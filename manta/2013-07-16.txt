{"nick":"chorrell","date":"2013-07-16T00:06:58.156Z","type":"join"}
{"nick":"peterbraden__","reason":"Ping timeout: 250 seconds","date":"2013-07-16T00:18:05.208Z","type":"quit"}
{"nick":"yunong","reason":"Quit: Leaving.","date":"2013-07-16T00:19:07.223Z","type":"quit"}
{"nick":"nfitch","reason":"Quit: Leaving.","date":"2013-07-16T00:21:56.288Z","type":"quit"}
{"nick":"fredk","reason":"Quit: Leaving.","date":"2013-07-16T00:23:34.763Z","type":"quit"}
{"nick":"bcantrill","reason":"Quit: Leaving.","date":"2013-07-16T00:58:23.487Z","type":"quit"}
{"nick":"yunong","date":"2013-07-16T01:09:15.147Z","type":"join"}
{"nick":"yunong","reason":"Quit: Leaving.","date":"2013-07-16T01:20:31.883Z","type":"quit"}
{"nick":"abraxas","date":"2013-07-16T01:27:26.377Z","type":"join"}
{"nick":"elijah-mbp","reason":"Remote host closed the connection","date":"2013-07-16T02:07:40.564Z","type":"quit"}
{"nick":"elijah-mbp","date":"2013-07-16T02:09:12.355Z","type":"join"}
{"nick":"elijah-mbp","reason":"Remote host closed the connection","date":"2013-07-16T02:09:27.525Z","type":"quit"}
{"nick":"bcantrill","date":"2013-07-16T02:20:12.635Z","type":"join"}
{"nick":"chorrell","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2013-07-16T02:27:44.864Z","type":"quit"}
{"nick":"ghostbar_","reason":"Ping timeout: 240 seconds","date":"2013-07-16T02:28:53.817Z","type":"quit"}
{"nick":"elijah-mbp","date":"2013-07-16T03:08:48.401Z","type":"join"}
{"nick":"mcavage","reason":"Remote host closed the connection","date":"2013-07-16T03:26:19.582Z","type":"quit"}
{"nick":"ghostbar","date":"2013-07-16T03:46:46.339Z","type":"join"}
{"nick":"ghostbar","reason":"Ping timeout: 240 seconds","date":"2013-07-16T03:50:46.155Z","type":"quit"}
{"nick":"_Tenchi_","reason":"Quit: Leaving","date":"2013-07-16T04:26:46.035Z","type":"quit"}
{"nick":"ghostbar","date":"2013-07-16T04:44:41.349Z","type":"join"}
{"nick":"yunong","date":"2013-07-16T05:35:26.177Z","type":"join"}
{"nick":"yunong","reason":"Quit: Leaving.","date":"2013-07-16T05:55:51.755Z","type":"quit"}
{"nick":"marsell","reason":"Quit: marsell","date":"2013-07-16T05:58:26.342Z","type":"quit"}
{"nick":"marsell","date":"2013-07-16T06:07:29.211Z","type":"join"}
{"nick":"marsell","reason":"Quit: marsell","date":"2013-07-16T06:32:24.682Z","type":"quit"}
{"nick":"ghostbar_","date":"2013-07-16T07:23:10.907Z","type":"join"}
{"nick":"ghostbar","reason":"Ping timeout: 240 seconds","date":"2013-07-16T07:23:46.163Z","type":"quit"}
{"nick":"mamash","date":"2013-07-16T07:39:41.678Z","type":"join"}
{"nick":"mamash","date":"2013-07-16T07:58:40.242Z","type":"part"}
{"nick":"mamash","date":"2013-07-16T07:58:46.938Z","type":"join"}
{"nick":"bcantrill","reason":"Quit: Leaving.","date":"2013-07-16T08:05:03.607Z","type":"quit"}
{"nick":"marsell","date":"2013-07-16T08:59:41.115Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-07-16T10:44:02.704Z","type":"quit"}
{"nick":"chorrell","date":"2013-07-16T12:57:51.828Z","type":"join"}
{"nick":"chorrell_","date":"2013-07-16T13:00:25.351Z","type":"join"}
{"nick":"bcantrill","date":"2013-07-16T13:50:44.829Z","type":"join"}
{"nick":"chorrell_","reason":"Quit: My iMac has gone to sleep. ZZZzzz…","date":"2013-07-16T13:55:44.590Z","type":"quit"}
{"nick":"bcantrill","reason":"Quit: Leaving.","date":"2013-07-16T14:27:44.088Z","type":"quit"}
{"nick":"dcrawford","date":"2013-07-16T14:45:57.864Z","type":"join"}
{"nick":"almostobsolete","date":"2013-07-16T15:05:05.397Z","type":"join"}
{"nick":"almostobsolete","message":"Hello, I'm just having a play with Manta","date":"2013-07-16T15:05:23.225Z","type":"message"}
{"nick":"marsell","message":"Have fun. :)","date":"2013-07-16T15:06:16.026Z","type":"message"}
{"nick":"almostobsolete","message":"Is there a way of having the map phase output under different keys and the reduce phase to run once per key?","date":"2013-07-16T15:06:48.119Z","type":"message"}
{"nick":"almostobsolete","message":"That's how I'm used to writing map-reduce jobs, or should I be doing things differently here?","date":"2013-07-16T15:07:10.981Z","type":"message"}
{"nick":"rmustacc","message":"Sounds like you want to just send it to another map phase before the reduce phase.","date":"2013-07-16T15:07:17.273Z","type":"message"}
{"nick":"almostobsolete","message":"I'm doing log file analysis and what I want to do is produce stats for each user (a given log entry has a user property). So there are lots of log files (1 per day) each of which has lots of lines.","date":"2013-07-16T15:07:49.530Z","type":"message"}
{"nick":"rmustacc","message":"Naively wouldn't you just build up that hash from each file and then sum them together in reduce?","date":"2013-07-16T15:08:32.792Z","type":"message"}
{"nick":"chorrell","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2013-07-16T15:09:15.462Z","type":"quit"}
{"nick":"almostobsolete","message":"The way I've done it as a map reduce before is to emit something like (user_id, {foocount: 1}) in the map phase then in the reduce phase it's grouped by the key (user id) and I just add up all the foocounts","date":"2013-07-16T15:10:06.107Z","type":"message"}
{"nick":"almostobsolete","message":"rmustacc: I'm not sure I follow?","date":"2013-07-16T15:10:49.503Z","type":"message"}
{"nick":"papertigers","date":"2013-07-16T15:11:26.812Z","type":"join"}
{"nick":"rmustacc","message":"I think we're saying the same thing, but at least for me, I don't see the need for automated grouping.","date":"2013-07-16T15:11:55.318Z","type":"message"}
{"nick":"almostobsolete","message":"There are probably too many users to fit into memory all at once","date":"2013-07-16T15:12:25.071Z","type":"message"}
{"nick":"almostobsolete","message":"Are you talking about the technique used here: http://apidocs.joyent.com/manta/job-patterns.html#word-frequency-count","date":"2013-07-16T15:13:05.036Z","type":"message"}
{"nick":"almostobsolete","message":"Because it seems to rely on the AWK reducer process keeping all the stats in memory as it processes. I may be totally missing the point here though :p","date":"2013-07-16T15:13:51.711Z","type":"message"}
{"nick":"rmustacc","message":"Well, if ask isn't working for you, you can use something else.","date":"2013-07-16T15:15:34.066Z","type":"message"}
{"nick":"rmustacc","message":"But I don't really have a sense for how large you're referring to.","date":"2013-07-16T15:15:48.961Z","type":"message"}
{"nick":"marsell","message":"You can have multiple reducers.","date":"2013-07-16T15:16:35.419Z","type":"message"}
{"nick":"rmustacc","message":"But what I would consider doing is something like a multi-phase job.","date":"2013-07-16T15:16:44.495Z","type":"message"}
{"nick":"rmustacc","message":"multiple reducers isn't quite what he wants.","date":"2013-07-16T15:16:52.664Z","type":"message"}
{"nick":"almostobsolete","message":"It's not specifically awk, it's just that as far as I can see if the reduce phase is just a single run of a single program then it's always going to be limited by the machine it's running on.","date":"2013-07-16T15:16:58.729Z","type":"message"}
{"nick":"rmustacc","message":"That is, well, the definition of reduce generally.","date":"2013-07-16T15:17:21.472Z","type":"message"}
{"nick":"almostobsolete","message":"So, for example, if instead of a single count I'm actually generating quite a lot of information per-user","date":"2013-07-16T15:17:22.438Z","type":"message"}
{"nick":"rmustacc","message":"Well, you can do multiple reducer rounds as Marsell mentioned.","date":"2013-07-16T15:17:50.421Z","type":"message"}
{"nick":"rmustacc","message":"You can also look at the msplit documentaiton.","date":"2013-07-16T15:17:57.653Z","type":"message"}
{"nick":"almostobsolete","message":"That's what I've used grouping by key for in Map-Reduce before, as I understand it that's what lets Map-Reduce work on large data sets","date":"2013-07-16T15:17:58.731Z","type":"message"}
{"nick":"rmustacc","message":"Have you tried it yet and know that it doesn't work?","date":"2013-07-16T15:18:20.321Z","type":"message"}
{"nick":"almostobsolete","message":"Multiple reducer rounds may be what I want, I'll check out msplit docs as well","date":"2013-07-16T15:18:20.532Z","type":"message"}
{"nick":"almostobsolete","message":"thanks!","date":"2013-07-16T15:18:25.427Z","type":"message"}
{"nick":"almostobsolete","message":"ah, msplit is exactly what I wanted","date":"2013-07-16T15:19:48.195Z","type":"message"}
{"nick":"mcavage","date":"2013-07-16T15:19:48.871Z","type":"join"}
{"nick":"mcavage","message":"almostobsolete: fwiw, we basically do exactly what you're describing (split by $userid) for internal manta things.","date":"2013-07-16T15:21:19.232Z","type":"message"}
{"nick":"mcavage","message":"that's what msplit was written for - so you can get around the limitations of one box with reduce -- you likely still want a final reduce phase to make a single output object, but that's not strictly necessary I suppose.","date":"2013-07-16T15:21:47.014Z","type":"message"}
{"nick":"chorrell","date":"2013-07-16T15:23:30.386Z","type":"join"}
{"nick":"almostobsolete","message":"It even understands JSON, that's really useful :)","date":"2013-07-16T15:23:56.965Z","type":"message"}
{"nick":"mcavage","message":"well, we needed it too ;)","date":"2013-07-16T15:24:04.060Z","type":"message"}
{"nick":"almostobsolete","message":"Good to know you guys are dog-fooding it all","date":"2013-07-16T15:24:59.746Z","type":"message"}
{"nick":"mcavage","message":"well we're going to be talking about manta in the fall at several conferences, this is one of the topics for sure: how manta built manta ;)","date":"2013-07-16T15:26:12.821Z","type":"message"}
{"nick":"mcavage","message":"we implemented all the upstack batch stuff on top it.","date":"2013-07-16T15:26:25.648Z","type":"message"}
{"nick":"almostobsolete","message":"nice","date":"2013-07-16T15:26:31.347Z","type":"message"}
{"nick":"chorrell","reason":"Read error: Connection reset by peer","date":"2013-07-16T15:28:31.446Z","type":"quit"}
{"nick":"almostobsolete","message":"mput is giving me \"url is a required argument\" when I type \"mput -f map.py /andymitchell/stor/map.py\"","date":"2013-07-16T15:32:55.050Z","type":"message"}
{"nick":"nfitch","date":"2013-07-16T15:32:55.833Z","type":"join"}
{"nick":"almostobsolete","message":"sure it's something really silly :p","date":"2013-07-16T15:33:07.266Z","type":"message"}
{"nick":"mcavage","message":"env | grep MANTA","date":"2013-07-16T15:33:25.806Z","type":"message"}
{"nick":"mcavage","message":"almostobsolete: you either need to have MANTA_URL set or pass in --url","date":"2013-07-16T15:33:44.979Z","type":"message"}
{"nick":"almostobsolete","message":"ah, I haven't restarted that terminal window since I added that to my .profile","date":"2013-07-16T15:34:10.540Z","type":"message"}
{"nick":"almostobsolete","message":"thanks, knew it'd be something simple :)","date":"2013-07-16T15:34:18.473Z","type":"message"}
{"nick":"mcavage","message":". ~/.profile","date":"2013-07-16T15:34:21.170Z","type":"message"}
{"nick":"mcavage","message":"you don't need to restart ;)","date":"2013-07-16T15:34:26.639Z","type":"message"}
{"nick":"almostobsolete","message":"thanks","date":"2013-07-16T15:34:47.745Z","type":"message"}
{"nick":"chorrell","date":"2013-07-16T15:36:19.544Z","type":"join"}
{"nick":"almostobsolete","message":"Is there an easy way to get mjob to output errors if they occur? \"job 9491e2dc-70d7-4773-bc0a-47519bbd4a06 had 565 errors\" isn't super helpful...","date":"2013-07-16T15:37:10.132Z","type":"message"}
{"nick":"mcavage","message":"mjob errors 9491e2dc-70d7-4773-bc0a-47519bbd4a06","date":"2013-07-16T15:38:46.716Z","type":"message"}
{"nick":"chorrell","reason":"Read error: Connection reset by peer","date":"2013-07-16T15:38:47.157Z","type":"quit"}
{"nick":"mcavage","message":"also:","date":"2013-07-16T15:38:53.558Z","type":"message"}
{"nick":"mcavage","message":"mjob errors 9491e2dc-70d7-4773-bc0a-47519bbd4a06 | json -ga stderr | xargs -L 10 mget","date":"2013-07-16T15:39:28.052Z","type":"message"}
{"nick":"mcavage","message":"that *should* give you all the stderr spew -- you might need to tweak","date":"2013-07-16T15:39:46.229Z","type":"message"}
{"nick":"mcavage","message":"anyway, the errors come back as a json stream that has things like the reason it exited as a switchable code, and we save stderr for you off to a manta object.","date":"2013-07-16T15:40:10.936Z","type":"message"}
{"nick":"almostobsolete","message":"great","date":"2013-07-16T15:40:39.772Z","type":"message"}
{"nick":"almostobsolete","message":"Would be a useful addition to mjob if it had an option to do that for you in the event of an error (much like the -o option does for non-error output)","date":"2013-07-16T15:41:13.559Z","type":"message"}
{"nick":"mcavage","message":"yeah, probably so.","date":"2013-07-16T15:41:40.499Z","type":"message"}
{"nick":"mcavage","message":"if you want to put an issue on github, appreciated ;)","date":"2013-07-16T15:41:51.733Z","type":"message"}
{"nick":"chorrell","date":"2013-07-16T15:42:44.496Z","type":"join"}
{"nick":"almostobsolete","message":"Oh, I hadn't notice it was on github, will do","date":"2013-07-16T15:42:45.754Z","type":"message"}
{"nick":"mcavage","message":"oh are you just using the mac installer?","date":"2013-07-16T15:43:51.092Z","type":"message"}
{"nick":"mcavage","message":"good to know :)","date":"2013-07-16T15:43:53.257Z","type":"message"}
{"nick":"mcavage","message":"anyway, joyent/node-manta","date":"2013-07-16T15:43:57.508Z","type":"message"}
{"nick":"almostobsolete","message":"I installed via npm","date":"2013-07-16T15:44:09.428Z","type":"message"}
{"nick":"mcavage","message":"oh ok.","date":"2013-07-16T15:44:20.207Z","type":"message"}
{"nick":"almostobsolete","message":"But didn't really look much beyond that, should have guessed it was on github","date":"2013-07-16T15:44:28.727Z","type":"message"}
{"nick":"mcavage","message":"no worries :)","date":"2013-07-16T15:44:38.479Z","type":"message"}
{"nick":"almostobsolete","message":"https://github.com/joyent/node-manta/issues/87","date":"2013-07-16T15:46:22.130Z","type":"message"}
{"nick":"chorrell","reason":"Read error: Connection reset by peer","date":"2013-07-16T15:46:22.673Z","type":"quit"}
{"nick":"mcavage","message":"thanks!","date":"2013-07-16T15:46:30.170Z","type":"message"}
{"nick":"almostobsolete","message":"Are you guys accepting pull requests? If I get a chance I might add it","date":"2013-07-16T15:47:43.315Z","type":"message"}
{"nick":"mcavage","message":"yes! :)","date":"2013-07-16T15:47:52.301Z","type":"message"}
{"nick":"chorrell","date":"2013-07-16T15:51:06.512Z","type":"join"}
{"nick":"chorrell","reason":"Read error: Connection reset by peer","date":"2013-07-16T15:53:13.566Z","type":"quit"}
{"nick":"papertigers","reason":"Ping timeout: 240 seconds","date":"2013-07-16T15:55:26.744Z","type":"quit"}
{"nick":"chorrell","date":"2013-07-16T15:57:09.408Z","type":"join"}
{"nick":"chorrell","reason":"Read error: Connection reset by peer","date":"2013-07-16T15:59:43.452Z","type":"quit"}
