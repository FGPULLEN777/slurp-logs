{"nick":"dap_","reason":"Quit: Leaving.","date":"2016-11-09T01:18:31.820Z","type":"quit"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2016-11-09T01:20:00.466Z","type":"quit"}
{"nick":"ed209","date":"2016-11-09T01:20:07.930Z","type":"join"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T02:14:02.260Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T02:14:33.129Z","type":"join"}
{"nick":"jhendricks","reason":"Client Quit","date":"2016-11-09T02:14:58.733Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T02:15:16.953Z","type":"join"}
{"nick":"jhendricks","reason":"Client Quit","date":"2016-11-09T02:16:03.289Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T02:16:47.196Z","type":"join"}
{"nick":"jhendricks","reason":"Client Quit","date":"2016-11-09T02:16:47.251Z","type":"quit"}
{"nick":"chorrell","date":"2016-11-09T03:00:43.102Z","type":"join"}
{"nick":"bahamat","reason":"Quit: Leaving.","date":"2016-11-09T03:04:17.059Z","type":"quit"}
{"nick":"jayschmidt","reason":"Quit: Leaving.","date":"2016-11-09T03:08:49.161Z","type":"quit"}
{"nick":"chorrell","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2016-11-09T03:18:25.679Z","type":"quit"}
{"nick":"therealkoopa","reason":"Remote host closed the connection","date":"2016-11-09T03:32:56.985Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T03:33:32.510Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 258 seconds","date":"2016-11-09T03:37:51.429Z","type":"quit"}
{"nick":"jayschmidt","date":"2016-11-09T03:47:49.210Z","type":"join"}
{"nick":"jhendricks","date":"2016-11-09T04:01:02.401Z","type":"join"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T04:06:29.279Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T04:11:14.973Z","type":"join"}
{"nick":"jhendricks","date":"2016-11-09T04:13:14.046Z","type":"join"}
{"nick":"therealkoopa","reason":"Remote host closed the connection","date":"2016-11-09T04:19:03.923Z","type":"quit"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T04:29:03.172Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T04:30:47.190Z","type":"join"}
{"nick":"jhendricks","reason":"Client Quit","date":"2016-11-09T04:34:55.704Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T04:40:50.841Z","type":"join"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T04:50:50.359Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T04:56:57.599Z","type":"join"}
{"nick":"therealkoopa","date":"2016-11-09T05:20:09.017Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 245 seconds","date":"2016-11-09T05:24:38.768Z","type":"quit"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T05:28:29.003Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T05:30:09.755Z","type":"join"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T05:42:05.282Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T05:52:01.833Z","type":"join"}
{"nick":"therealkoopa","date":"2016-11-09T06:20:55.697Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 244 seconds","date":"2016-11-09T06:25:30.601Z","type":"quit"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T06:36:21.461Z","type":"quit"}
{"nick":"melloc","reason":"Quit: Leaving.","date":"2016-11-09T06:37:10.544Z","type":"quit"}
{"nick":"bahamat","date":"2016-11-09T07:05:24.442Z","type":"join"}
{"nick":"therealkoopa","date":"2016-11-09T07:21:39.114Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 250 seconds","date":"2016-11-09T07:27:40.769Z","type":"quit"}
{"nick":"melloc","date":"2016-11-09T07:37:44.545Z","type":"join"}
{"nick":"trentm","reason":"Quit: Leaving.","date":"2016-11-09T07:39:05.988Z","type":"quit"}
{"nick":"melloc","reason":"Read error: No route to host","date":"2016-11-09T07:43:56.674Z","type":"quit"}
{"nick":"melloc","date":"2016-11-09T07:44:20.434Z","type":"join"}
{"nick":"melloc","reason":"Quit: Leaving.","date":"2016-11-09T08:06:25.966Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T08:16:19.139Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 252 seconds","date":"2016-11-09T08:20:33.955Z","type":"quit"}
{"nick":"melloc","date":"2016-11-09T08:33:13.838Z","type":"join"}
{"nick":"melloc","reason":"Client Quit","date":"2016-11-09T08:33:58.340Z","type":"quit"}
{"nick":"mhicks","reason":"Quit: Leaving.","date":"2016-11-09T08:59:02.614Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T09:17:02.474Z","type":"join"}
{"nick":"bahamat","reason":"Quit: Leaving.","date":"2016-11-09T09:20:30.424Z","type":"quit"}
{"nick":"therealkoopa","reason":"Ping timeout: 258 seconds","date":"2016-11-09T09:22:28.434Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T10:18:46.594Z","type":"join"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2016-11-09T10:20:00.403Z","type":"quit"}
{"nick":"ed209","date":"2016-11-09T10:20:07.866Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 268 seconds","date":"2016-11-09T10:23:55.586Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T11:19:31.467Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 258 seconds","date":"2016-11-09T11:24:22.427Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T12:20:26.617Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 268 seconds","date":"2016-11-09T12:25:24.535Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T13:21:14.973Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 260 seconds","date":"2016-11-09T13:25:52.879Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T13:36:20.997Z","type":"join"}
{"nick":"chorrell","date":"2016-11-09T14:32:39.863Z","type":"join"}
{"nick":"bahamat","date":"2016-11-09T14:50:10.427Z","type":"join"}
{"nick":"mhicks","date":"2016-11-09T14:58:05.600Z","type":"join"}
{"nick":"headw01","date":"2016-11-09T15:00:21.546Z","type":"join"}
{"nick":"chorrell","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2016-11-09T15:18:05.713Z","type":"quit"}
{"nick":"chorrell","date":"2016-11-09T15:19:23.226Z","type":"join"}
{"nick":"chorrell","reason":"Client Quit","date":"2016-11-09T15:23:20.286Z","type":"quit"}
{"nick":"chorrell","date":"2016-11-09T15:23:42.521Z","type":"join"}
{"nick":"jhendricks","date":"2016-11-09T15:51:53.903Z","type":"join"}
{"nick":"jhendricks","reason":"Client Quit","date":"2016-11-09T15:53:05.645Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T15:55:56.927Z","type":"join"}
{"nick":"chorrell","reason":"Quit: My MacBook has gone to sleep. ZZZzzzâ€¦","date":"2016-11-09T15:59:13.859Z","type":"quit"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T16:00:54.773Z","type":"quit"}
{"nick":"chorrell","date":"2016-11-09T16:13:13.598Z","type":"join"}
{"nick":"chorrell","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2016-11-09T16:22:27.209Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T16:22:32.111Z","type":"join"}
{"nick":"jhendricks","reason":"Client Quit","date":"2016-11-09T16:23:47.796Z","type":"quit"}
{"nick":"trentm","date":"2016-11-09T16:44:01.153Z","type":"join"}
{"nick":"metsuke","date":"2016-11-09T17:24:37.542Z","type":"join"}
{"nick":"melloc","date":"2016-11-09T17:24:46.405Z","type":"join"}
{"nick":"metsuke","message":"I'm trying to use manta-sync to upload ~2TB of data into Joyent's cloud Manta.  However, I consistently get an error: \"FATAL ERROR: CALL_AND_RETRY_LAST Allocation failed - JavaScript heap out of memory\"  I tried increasing the max_old_space_size to no avail.  My box has 32GB of memory.  Do I need more memory, or is there a way to tweak node?","date":"2016-11-09T17:27:06.729Z","type":"message"}
{"nick":"bahamat","message":"metsuke: node.js internally is 32-bit and it can only allocate about 1.6GB of RAM to a single process.","date":"2016-11-09T17:30:11.563Z","type":"message"}
{"nick":"bahamat","message":"metsuke: If there are any core files dumped from your manta-sync attempts, we'd like to be able to look at them to try to resolve the issue.","date":"2016-11-09T17:30:54.635Z","type":"message"}
{"nick":"metsuke","message":"bahamat: so manta-sync is limited to smaller subsets of data?","date":"2016-11-09T17:30:57.068Z","type":"message"}
{"nick":"metsuke","message":"yea, I have lots of core dumps =)","date":"2016-11-09T17:31:06.329Z","type":"message"}
{"nick":"bahamat","message":"metsuke: It *should* be possible to upload objects of arbitrary size.","date":"2016-11-09T17:31:16.402Z","type":"message"}
{"nick":"bahamat","message":"The fact that it's having an error means that there's a bug of some kind.","date":"2016-11-09T17:31:28.723Z","type":"message"}
{"nick":"headw01","reason":"Remote host closed the connection","date":"2016-11-09T17:33:42.610Z","type":"quit"}
{"nick":"bahamat","message":"metsuke: Can you file a bug in the github repo and I'll ping bahams10 to take a look at it.","date":"2016-11-09T17:33:48.870Z","type":"message"}
{"nick":"dap_","date":"2016-11-09T17:39:54.403Z","type":"join"}
{"nick":"bahamas10","date":"2016-11-09T17:45:00.452Z","type":"join"}
{"nick":"metsuke","message":"my node.core is 1.8G","date":"2016-11-09T17:46:09.812Z","type":"message"}
{"nick":"jhendricks","date":"2016-11-09T17:53:45.738Z","type":"join"}
{"nick":"metsuke","message":"here's the issue I submitted: https://github.com/bahamas10/node-manta-sync/issues/27","date":"2016-11-09T18:05:51.820Z","type":"message"}
{"nick":"bahamas10","message":"metsuke: i'm checking it out now","date":"2016-11-09T18:23:26.188Z","type":"message"}
{"nick":"metsuke","message":"awesome, thanks!","date":"2016-11-09T18:24:04.336Z","type":"message"}
{"nick":"bahamas10","message":"np. my initial thought is that the simple act of storing an array with every source file and dest file name (as strings) is exhausting the memory","date":"2016-11-09T18:24:55.416Z","type":"message"}
{"nick":"bahamas10","message":"metsuke: how many files are there total? I know it's 1.5T but i'm thinking the number of actual files is the problem here","date":"2016-11-09T18:27:48.522Z","type":"message"}
{"nick":"bahamas10","message":"try $ find . -type f | wc -l, where . is the dir you're trying to upload","date":"2016-11-09T18:28:02.074Z","type":"message"}
{"nick":"metsuke","message":"777303","date":"2016-11-09T18:32:09.001Z","type":"message"}
{"nick":"bahamas10","message":"great thanks, i'll do some testing locally... i'm also pulling the core dump now as we speak to analyze","date":"2016-11-09T18:32:38.168Z","type":"message"}
{"nick":"metsuke","message":"thank you!","date":"2016-11-09T18:32:54.888Z","type":"message"}
{"nick":"bahamas10","message":"also, can you try running with `-v` and then perhaps `-vv` it increase the verbosity? this may shed some light on the issue","date":"2016-11-09T18:35:22.744Z","type":"message"}
{"nick":"metsuke","message":"bahamas10: https://gist.github.com/metsuke0/9d1c53bd6141c1b84922c3ce9e9459e6","date":"2016-11-09T18:43:57.241Z","type":"message"}
{"nick":"metsuke","message":"I get some errors in the beginning, but it doesn't seem affect the rest of it.  I was able to do smaller uploads fine","date":"2016-11-09T18:44:29.910Z","type":"message"}
{"nick":"bahamas10","message":"yeah i've seen those dtrace errors before, they shouldn't be affecting manta-sync","date":"2016-11-09T18:45:40.348Z","type":"message"}
{"nick":"bahamas10","message":"also, what version of manta-sync are you using? `manta-sync -V` will tell you","date":"2016-11-09T18:46:04.868Z","type":"message"}
{"nick":"metsuke","message":"0.4.1","date":"2016-11-09T18:46:30.149Z","type":"message"}
{"nick":"bahamas10","message":"ok cool, that's the latest then","date":"2016-11-09T18:47:07.059Z","type":"message"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T18:47:21.465Z","type":"quit"}
{"nick":"bahamas10","message":"so my latest theory right now is number of subdirectories... i'm wondering if i have some bad logic somewhere in `finder.js` to find all files recursively","date":"2016-11-09T18:48:19.481Z","type":"message"}
{"nick":"bahamas10","message":"i'm attempting to recreate your issue by creating a large number of local files to sync","date":"2016-11-09T18:48:33.760Z","type":"message"}
{"nick":"jhendricks","date":"2016-11-09T18:50:02.912Z","type":"join"}
{"nick":"trentm","reason":"Quit: Leaving.","date":"2016-11-09T18:59:55.929Z","type":"quit"}
{"nick":"trentm","date":"2016-11-09T19:00:14.605Z","type":"join"}
{"nick":"bahamas10","message":"so just an update: it's failing while building the source file list.  manta-sync used to work by just gathering a list of files (an array of string filenames), but it has since changed (with the introduction of --reverse) to create `LocalFile` and `MantaFile` objects depending on direction of sync","date":"2016-11-09T19:49:26.311Z","type":"message"}
{"nick":"bahamas10","message":"the source gathering logic for local files (non-reverse sync) is here https://github.com/bahamas10/node-manta-sync/blob/master/lib/localfile.js#L108","date":"2016-11-09T19:49:46.949Z","type":"message"}
{"nick":"bahamas10","message":"I haven't successfully recreated the issue yet, but i'm working on a couple test programs to try and isolate the issue if metsuke you wouldn't mind running them","date":"2016-11-09T19:50:22.822Z","type":"message"}
{"nick":"bahamas10","message":"i'm busy with other priorities atm, but will have more time tonight to isolate this issue.  for the time being, what operating system and what version of node are you using? sorry if you've stated that before, I joined the IRC when you said \"my node.core is 1.8G\"","date":"2016-11-09T19:51:25.431Z","type":"message"}
{"nick":"melnaiem_lia","date":"2016-11-09T19:52:45.027Z","type":"join"}
{"nick":"bahamas10","message":"right now, for every file found, a LocalFile and MantaFile object are created and held in an array... for a large number of files this might be the source of the memory bloat.  My current theory is that, by only storing a string of the filename, and creating the LocalFile and MantaFile objects on demand when needed, this could reduce memory bloat as the GC could eliminate these objects when they fall out of","date":"2016-11-09T19:53:29.152Z","type":"message"}
{"nick":"bahamas10","message":"scope","date":"2016-11-09T19:53:31.149Z","type":"message"}
{"nick":"metsuke","message":"bahamas10: OS - 11.0-RELEASE-p3                node - v6.9.1","date":"2016-11-09T19:55:31.121Z","type":"message"}
{"nick":"metsuke","message":"I can run anything on this server.  It was set up to test the  manta sync","date":"2016-11-09T19:56:34.290Z","type":"message"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T19:56:52.085Z","type":"quit"}
{"nick":"jhendricks","date":"2016-11-09T20:01:30.844Z","type":"join"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T20:07:15.866Z","type":"quit"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2016-11-09T20:20:01.201Z","type":"quit"}
{"nick":"ed209","date":"2016-11-09T20:20:08.918Z","type":"join"}
{"nick":"melnaiem_lia","reason":"Ping timeout: 260 seconds","date":"2016-11-09T20:27:41.114Z","type":"quit"}
{"nick":"metsuke","message":"bahamas10: sorry, I forgot to add that the OS is FreeBSD","date":"2016-11-09T20:47:47.865Z","type":"message"}
{"nick":"metsuke","reason":"Quit: http://www.kiwiirc.com/ - A hand crafted IRC client","date":"2016-11-09T21:54:38.802Z","type":"quit"}
{"nick":"metsuke","date":"2016-11-09T21:57:52.062Z","type":"join"}
{"nick":"metsuke","reason":"Client Quit","date":"2016-11-09T21:58:17.627Z","type":"quit"}
{"nick":"metsuke","date":"2016-11-09T21:58:29.600Z","type":"join"}
{"nick":"jhendricks","date":"2016-11-09T22:02:03.999Z","type":"join"}
{"nick":"metsuke","reason":"Client Quit","date":"2016-11-09T22:03:13.952Z","type":"quit"}
{"nick":"metsuke","date":"2016-11-09T22:03:49.529Z","type":"join"}
{"nick":"metsuke","reason":"Quit: http://www.kiwiirc.com/ - A hand crafted IRC client","date":"2016-11-09T22:12:20.015Z","type":"quit"}
{"nick":"metsuke","date":"2016-11-09T22:15:01.747Z","type":"join"}
{"nick":"metsuke","reason":"Quit: http://www.kiwiirc.com/ - A hand crafted IRC client","date":"2016-11-09T22:20:15.919Z","type":"quit"}
{"nick":"metsuke","date":"2016-11-09T22:20:45.112Z","type":"join"}
{"nick":"bahamat","reason":"Ping timeout: 258 seconds","date":"2016-11-09T22:27:32.433Z","type":"quit"}
{"nick":"bahamat","date":"2016-11-09T22:29:24.818Z","type":"join"}
{"nick":"jhendricks","reason":"Quit: Leaving.","date":"2016-11-09T23:19:24.756Z","type":"quit"}
{"nick":"therealkoopa","reason":"Remote host closed the connection","date":"2016-11-09T23:21:17.737Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T23:21:53.166Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 240 seconds","date":"2016-11-09T23:25:57.090Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T23:34:34.591Z","type":"join"}
{"nick":"therealkoopa","reason":"Remote host closed the connection","date":"2016-11-09T23:46:10.245Z","type":"quit"}
{"nick":"therealkoopa","date":"2016-11-09T23:46:44.212Z","type":"join"}
{"nick":"trentm","reason":"Read error: Connection reset by peer","date":"2016-11-09T23:48:08.970Z","type":"quit"}
{"nick":"trentm","date":"2016-11-09T23:48:34.475Z","type":"join"}
{"nick":"jhendricks","date":"2016-11-09T23:49:09.486Z","type":"join"}
{"nick":"therealkoopa","reason":"Ping timeout: 240 seconds","date":"2016-11-09T23:50:57.115Z","type":"quit"}
