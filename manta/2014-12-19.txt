{"nick":"quijote","date":"2014-12-19T00:06:36.551Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 256 seconds","date":"2014-12-19T00:11:24.520Z","type":"quit"}
{"nick":"ryancnelson","date":"2014-12-19T00:28:21.502Z","type":"join"}
{"nick":"trentm","reason":"Quit: Leaving.","date":"2014-12-19T01:05:27.322Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T01:07:32.456Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 250 seconds","date":"2014-12-19T01:12:01.392Z","type":"quit"}
{"nick":"trentm","date":"2014-12-19T01:17:29.603Z","type":"join"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2014-12-19T01:20:00.871Z","type":"quit"}
{"nick":"ed209","date":"2014-12-19T01:20:18.553Z","type":"join"}
{"nick":"chorrell","date":"2014-12-19T01:22:12.397Z","type":"join"}
{"nick":"ryancnelson","reason":"Quit: Leaving.","date":"2014-12-19T01:25:35.973Z","type":"quit"}
{"nick":"trentm","reason":"Quit: Leaving.","date":"2014-12-19T01:26:44.137Z","type":"quit"}
{"nick":"abraxas_","date":"2014-12-19T01:28:36.358Z","type":"join"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2014-12-19T01:29:12.285Z","type":"quit"}
{"nick":"abraxas_","reason":"Ping timeout: 245 seconds","date":"2014-12-19T01:33:09.574Z","type":"quit"}
{"nick":"chorrell","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2014-12-19T01:40:49.906Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T02:08:08.626Z","type":"join"}
{"nick":"abraxas_","date":"2014-12-19T02:10:12.158Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 245 seconds","date":"2014-12-19T02:12:44.600Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T03:09:04.602Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 258 seconds","date":"2014-12-19T03:13:24.565Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T04:09:41.092Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 265 seconds","date":"2014-12-19T04:14:19.069Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T05:10:36.863Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 272 seconds","date":"2014-12-19T05:15:11.881Z","type":"quit"}
{"nick":"trentm","date":"2014-12-19T05:28:38.437Z","type":"join"}
{"nick":"marsell","reason":"Quit: marsell","date":"2014-12-19T05:46:49.061Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T06:11:14.426Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 250 seconds","date":"2014-12-19T06:15:47.364Z","type":"quit"}
{"nick":"nfitch","reason":"Quit: Leaving.","date":"2014-12-19T06:27:32.617Z","type":"quit"}
{"nick":"abraxas_","reason":"Remote host closed the connection","date":"2014-12-19T06:59:47.463Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T07:11:55.628Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 245 seconds","date":"2014-12-19T07:16:29.569Z","type":"quit"}
{"nick":"trentm","reason":"Quit: Leaving.","date":"2014-12-19T07:20:59.595Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T08:12:52.460Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 250 seconds","date":"2014-12-19T08:17:07.384Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T08:20:22.746Z","type":"join"}
{"nick":"pgale","date":"2014-12-19T08:25:10.387Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 245 seconds","date":"2014-12-19T09:31:29.629Z","type":"quit"}
{"nick":"marsell","date":"2014-12-19T09:52:13.297Z","type":"join"}
{"nick":"quijote","date":"2014-12-19T09:52:46.321Z","type":"join"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2014-12-19T10:20:01.372Z","type":"quit"}
{"nick":"ed209","date":"2014-12-19T10:20:18.430Z","type":"join"}
{"nick":"suhailski","date":"2014-12-19T11:23:51.679Z","type":"join"}
{"nick":"suhailski","reason":"Quit: #manta","date":"2014-12-19T11:29:02.095Z","type":"quit"}
{"nick":"suhailski","date":"2014-12-19T11:29:17.468Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 240 seconds","date":"2014-12-19T11:33:17.272Z","type":"quit"}
{"nick":"suhailski","reason":"Quit: Leaving.","date":"2014-12-19T11:47:18.389Z","type":"quit"}
{"nick":"suhailski","date":"2014-12-19T11:48:44.834Z","type":"join"}
{"nick":"klynton","reason":"Quit: Connection closed for inactivity","date":"2014-12-19T12:09:50.325Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T12:31:01.542Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 264 seconds","date":"2014-12-19T12:35:51.545Z","type":"quit"}
{"nick":"pgale","reason":"Quit: Leaving.","date":"2014-12-19T12:47:46.807Z","type":"quit"}
{"nick":"pgale","date":"2014-12-19T13:12:18.630Z","type":"join"}
{"nick":"pmooney10","date":"2014-12-19T13:26:39.579Z","type":"join"}
{"nick":"pmooney","reason":"Ping timeout: 240 seconds","date":"2014-12-19T13:28:57.352Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T13:31:58.471Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 255 seconds","date":"2014-12-19T13:36:25.563Z","type":"quit"}
{"nick":"chorrell","date":"2014-12-19T13:48:43.865Z","type":"join"}
{"nick":"quijote","date":"2014-12-19T14:20:47.620Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 264 seconds","date":"2014-12-19T14:25:39.624Z","type":"quit"}
{"nick":"chorrell","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2014-12-19T15:06:21.756Z","type":"quit"}
{"nick":"chorrell","date":"2014-12-19T15:18:50.642Z","type":"join"}
{"nick":"quijote","date":"2014-12-19T15:21:32.536Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 255 seconds","date":"2014-12-19T15:26:13.444Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T16:03:36.520Z","type":"join"}
{"nick":"nfitch","date":"2014-12-19T16:10:49.944Z","type":"join"}
{"nick":"swills","message":"ah, MANATEE-188 landed I see","date":"2014-12-19T16:12:24.859Z","type":"message"}
{"nick":"nfitch","message":"swills: Yes.  The migration guide is here: https://github.com/joyent/manatee/blob/master/docs/migrate-1-to-2.md","date":"2014-12-19T16:13:44.513Z","type":"message"}
{"nick":"nfitch","message":"If you have any questions, please ping us here!","date":"2014-12-19T16:15:14.091Z","type":"message"}
{"nick":"nahamu","message":"does Manatee 2.0 do fewer flips?","date":"2014-12-19T16:18:03.155Z","type":"message"}
{"nick":"nfitch","message":"nahamu: That'd be pretty hard to quantify…. but, yes, it *should* do fewer flips.","date":"2014-12-19T16:21:16.028Z","type":"message"}
{"nick":"nahamu","message":"looking at the migration guide it would seem like that was the goal of the change","date":"2014-12-19T16:21:37.028Z","type":"message"}
{"nick":"nahamu","message":"just making sure I understand.","date":"2014-12-19T16:21:41.283Z","type":"message"}
{"nick":"nfitch","message":"The main difference is that Manatee 1.0 uses sequential ephemeral nodes to determine the topology, so any process restarts cause the topology to change.","date":"2014-12-19T16:22:05.053Z","type":"message"}
{"nick":"nfitch","message":"Manatee 2.0 uses a persisted zk node with a json object representing the topology which only the primary or the sync can change.","date":"2014-12-19T16:22:47.261Z","type":"message"}
{"nick":"nahamu","message":"ah, ephemeral vs persistent node would probably make a big difference too. I don't think I caught that from the write-up.","date":"2014-12-19T16:22:47.572Z","type":"message"}
{"nick":"nfitch","message":"Well… the goal of the change was to avoid cluster state transitions that would cause transaction log divergence.","date":"2014-12-19T16:23:22.959Z","type":"message"}
{"nick":"nfitch","message":"(Postgres xlogs, that is)","date":"2014-12-19T16:23:30.033Z","type":"message"}
{"nick":"seldo","date":"2014-12-19T16:23:41.081Z","type":"join"}
{"nick":"nfitch","message":"It just so happens that the design also causes fewer flips :)","date":"2014-12-19T16:23:56.269Z","type":"message"}
{"nick":"nfitch","message":"Manatee 1.0 used the history (also persisted zk nodes) to try and avoid flips that would cause xlog divergence.","date":"2014-12-19T16:25:28.506Z","type":"message"}
{"nick":"nfitch","message":"The whole divergence thing is explained here: https://github.com/joyent/manatee/blob/master/docs/xlog-diverge.md","date":"2014-12-19T16:25:52.098Z","type":"message"}
{"nick":"nahamu","message":"ah, cool. thanks!","date":"2014-12-19T16:26:33.659Z","type":"message"}
{"nick":"pmooney10","new_nick":"pmooney","date":"2014-12-19T16:26:38.164Z","type":"nick"}
{"nick":"seldo","reason":"Client Quit","date":"2014-12-19T16:27:03.433Z","type":"quit"}
{"nick":"nfitch","message":"n/p!","date":"2014-12-19T16:28:19.885Z","type":"message"}
{"nick":"nahamu","message":"All Joyent software that runs on top of Manatee goes through some software layer that's aware of the cluster topology, right?","date":"2014-12-19T16:29:40.397Z","type":"message"}
{"nick":"nahamu","message":"(It would be cool if there were a piece of software that could present what looks like a normal Postgres server whose IP doesn't change to legacy applications but that sends everything into the Manatee cluster and as gracefully as possible handles flips...)","date":"2014-12-19T16:31:15.910Z","type":"message"}
{"nick":"nfitch","message":"Ya, node-manatee: https://github.com/joyent/node-manatee which is hooked into node-moray: https://github.com/joyent/node-moray","date":"2014-12-19T16:31:37.409Z","type":"message"}
{"nick":"nfitch","message":"Node-manatee watched the ZK state object for changes.","date":"2014-12-19T16:32:07.147Z","type":"message"}
{"nick":"nfitch","message":"*watches","date":"2014-12-19T16:32:20.153Z","type":"message"}
{"nick":"swills","message":"nfitch: i am setting up fresh actually","date":"2014-12-19T16:34:54.241Z","type":"message"}
{"nick":"nfitch","message":"Awwww…. but I tried to make the migration soooo easy!  ;)","date":"2014-12-19T16:35:39.759Z","type":"message"}
{"nick":"swills","message":"hehe","date":"2014-12-19T16:36:26.508Z","type":"message"}
{"nick":"swills","message":"nahamu: yes, i've been thinking about that too, would be nice","date":"2014-12-19T16:36:36.596Z","type":"message"}
{"nick":"nahamu","message":"It just occurred to me that https://github.com/postwait/vippy and https://github.com/joyent/node-manatee could be interesting...","date":"2014-12-19T16:40:48.644Z","type":"message"}
{"nick":"nahamu","message":"replace the gossip protocol bits with the stuff that watches ZK and then move the floating IP...","date":"2014-12-19T16:41:12.898Z","type":"message"}
{"nick":"quijote","reason":"Ping timeout: 244 seconds","date":"2014-12-19T16:41:50.461Z","type":"quit"}
{"nick":"nahamu","message":"the behavior for established connections might be bad, but at least new connections would probably do the right thing...","date":"2014-12-19T16:41:51.489Z","type":"message"}
{"nick":"nahamu","message":"actually, you'd just make the Manatee master take over the floating IP...","date":"2014-12-19T16:42:38.842Z","type":"message"}
{"nick":"nahamu","message":"no need for complicated other stuff...","date":"2014-12-19T16:42:47.323Z","type":"message"}
{"nick":"nahamu","message":"I'm sure that would break in horrible ways that I've yet to imagine.","date":"2014-12-19T16:43:01.567Z","type":"message"}
{"nick":"nahamu","message":"but https://github.com/joyent/node-manatee might have almost everything needed for an outside zone to present the legacy interface.","date":"2014-12-19T16:44:51.822Z","type":"message"}
{"nick":"nfitch","message":"node-manatee is dead simple.  It watches for cluster state changes and emits a set of postgres urls when it changes.","date":"2014-12-19T16:46:51.700Z","type":"message"}
{"nick":"nfitch","message":"It being the topology.","date":"2014-12-19T16:47:03.262Z","type":"message"}
{"nick":"nahamu","message":"Gotta get someone here at work to set up Manatee.","date":"2014-12-19T16:48:52.042Z","type":"message"}
{"nick":"moatsad","reason":"Quit: Leaving.","date":"2014-12-19T16:49:31.749Z","type":"quit"}
{"nick":"nahamu","message":"(or get Joyent to sell Manatee clusters in the JPC... wink wink nudge nudge...)","date":"2014-12-19T16:49:33.131Z","type":"message"}
{"nick":"quijote","date":"2014-12-19T17:20:50.316Z","type":"join"}
{"nick":"dap_","date":"2014-12-19T17:24:19.328Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 240 seconds","date":"2014-12-19T17:25:17.295Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T17:27:27.522Z","type":"join"}
{"nick":"pgale","reason":"Quit: Leaving.","date":"2014-12-19T17:50:56.979Z","type":"quit"}
{"nick":"ryancnelson","date":"2014-12-19T18:08:17.330Z","type":"join"}
{"nick":"ryancnelson","reason":"Read error: Connection reset by peer","date":"2014-12-19T18:10:22.772Z","type":"quit"}
{"nick":"ryancnelson","date":"2014-12-19T18:16:17.334Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 256 seconds","date":"2014-12-19T19:21:10.587Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T19:48:54.407Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 250 seconds","date":"2014-12-19T19:53:29.425Z","type":"quit"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2014-12-19T20:20:00.612Z","type":"quit"}
{"nick":"ed209","date":"2014-12-19T20:20:17.472Z","type":"join"}
{"nick":"quijote","date":"2014-12-19T20:49:39.450Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 250 seconds","date":"2014-12-19T20:54:09.365Z","type":"quit"}
{"nick":"chorrell","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2014-12-19T21:14:07.043Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T21:50:36.538Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 255 seconds","date":"2014-12-19T21:55:01.476Z","type":"quit"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2014-12-19T22:05:27.792Z","type":"quit"}
{"nick":"dap_","date":"2014-12-19T22:06:51.597Z","type":"join"}
{"nick":"dap_","reason":"Client Quit","date":"2014-12-19T22:08:52.278Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T22:51:23.704Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 245 seconds","date":"2014-12-19T22:55:42.647Z","type":"quit"}
{"nick":"nfitch","reason":"Quit: Leaving.","date":"2014-12-19T23:13:48.525Z","type":"quit"}
{"nick":"quijote","date":"2014-12-19T23:18:46.027Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 264 seconds","date":"2014-12-19T23:23:16.024Z","type":"quit"}
