{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-01-14T00:00:00.703Z","type":"quit"}
{"nick":"ircretary","date":"2013-01-14T00:00:07.604Z","type":"join"}
{"nick":"loladiro","reason":"Ping timeout: 272 seconds","date":"2013-01-14T00:00:34.762Z","type":"quit"}
{"nick":"TheJH","reason":"Ping timeout: 264 seconds","date":"2013-01-14T00:03:12.424Z","type":"quit"}
{"nick":"stagas_","date":"2013-01-14T00:06:12.631Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 246 seconds","date":"2013-01-14T00:06:37.781Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-01-14T00:06:43.260Z","type":"nick"}
{"nick":"pooya","date":"2013-01-14T00:27:25.601Z","type":"join"}
{"nick":"mjr_","date":"2013-01-14T00:32:39.916Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-01-14T00:37:42.000Z","type":"quit"}
{"nick":"benoitc","date":"2013-01-14T00:44:14.042Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-14T00:53:36.943Z","type":"quit"}
{"nick":"warz","date":"2013-01-14T01:01:36.761Z","type":"part"}
{"nick":"pooya_","date":"2013-01-14T01:10:16.922Z","type":"join"}
{"nick":"felixge_","reason":"Ping timeout: 244 seconds","date":"2013-01-14T01:10:49.092Z","type":"quit"}
{"nick":"pooya","reason":"Ping timeout: 264 seconds","date":"2013-01-14T01:14:00.414Z","type":"quit"}
{"nick":"pooya_","new_nick":"pooya","date":"2013-01-14T01:14:00.725Z","type":"nick"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-14T01:16:36.832Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 272 seconds","date":"2013-01-14T01:19:44.784Z","type":"quit"}
{"nick":"indexzero","date":"2013-01-14T01:24:45.635Z","type":"join"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-01-14T01:29:40.663Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-14T01:36:57.950Z","type":"join"}
{"nick":"EhevuTov","date":"2013-01-14T01:38:59.899Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-14T01:47:10.974Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-14T01:47:49.514Z","type":"join"}
{"nick":"jmar777","reason":"Ping timeout: 276 seconds","date":"2013-01-14T01:52:54.374Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-01-14T01:59:45.046Z","type":"quit"}
{"nick":"loladiro","date":"2013-01-14T02:03:48.160Z","type":"join"}
{"nick":"loladiro_","date":"2013-01-14T02:23:43.845Z","type":"join"}
{"nick":"loladiro","reason":"Read error: Connection reset by peer","date":"2013-01-14T02:24:34.351Z","type":"quit"}
{"nick":"loladiro_","new_nick":"loladiro","date":"2013-01-14T02:24:34.513Z","type":"nick"}
{"nick":"stagas","reason":"Ping timeout: 252 seconds","date":"2013-01-14T02:46:56.488Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-14T02:47:37.823Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-14T02:52:57.594Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-01-14T02:53:51.006Z","type":"quit"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2013-01-14T03:06:46.459Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 246 seconds","date":"2013-01-14T03:13:52.778Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-14T03:24:00.239Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 276 seconds","date":"2013-01-14T03:46:00.371Z","type":"quit"}
{"nick":"wolfeida_","reason":"Read error: Connection reset by peer","date":"2013-01-14T04:42:34.981Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-01-14T04:42:48.753Z","type":"join"}
{"nick":"brson","date":"2013-01-14T04:53:20.118Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-14T05:01:05.521Z","type":"quit"}
{"nick":"TheJH","date":"2013-01-14T05:38:25.628Z","type":"join"}
{"nick":"TheJH","reason":"Ping timeout: 252 seconds","date":"2013-01-14T05:51:00.497Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-14T06:06:46.714Z","type":"quit"}
{"nick":"karupanerura","reason":"Excess Flood","date":"2013-01-14T06:24:05.546Z","type":"quit"}
{"nick":"karupanerura","date":"2013-01-14T06:26:36.542Z","type":"join"}
{"nick":"indexzero","date":"2013-01-14T06:28:50.545Z","type":"join"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-01-14T06:38:03.464Z","type":"quit"}
{"nick":"stagas","date":"2013-01-14T06:51:20.976Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-14T06:52:32.867Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-14T06:54:06.793Z","type":"join"}
{"nick":"paddybyers","date":"2013-01-14T07:10:24.485Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-14T07:18:16.613Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-01-14T07:20:04.775Z","type":"quit"}
{"nick":"benoitc","date":"2013-01-14T07:22:45.474Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 252 seconds","date":"2013-01-14T07:24:30.496Z","type":"quit"}
{"nick":"pooya","date":"2013-01-14T07:25:22.318Z","type":"join"}
{"nick":"paddybyers","date":"2013-01-14T07:30:42.903Z","type":"join"}
{"nick":"rendar","date":"2013-01-14T07:39:17.181Z","type":"join"}
{"nick":"mikeal","date":"2013-01-14T07:41:04.250Z","type":"join"}
{"nick":"Ralt","date":"2013-01-14T07:53:58.501Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 256 seconds","date":"2013-01-14T08:03:10.854Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-14T08:03:28.869Z","type":"quit"}
{"nick":"indexzero","date":"2013-01-14T08:03:57.240Z","type":"join"}
{"nick":"felixge","date":"2013-01-14T08:10:01.957Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-01-14T08:10:02.309Z","type":"quit"}
{"nick":"felixge","date":"2013-01-14T08:10:02.437Z","type":"join"}
{"nick":"EhevuTov","date":"2013-01-14T08:29:07.609Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-14T08:30:18.646Z","type":"quit"}
{"nick":"paddybyers","date":"2013-01-14T08:42:04.478Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 252 seconds","date":"2013-01-14T08:47:29.144Z","type":"quit"}
{"nick":"loladiro","date":"2013-01-14T08:56:03.550Z","type":"join"}
{"nick":"felixge","reason":"Ping timeout: 246 seconds","date":"2013-01-14T09:00:22.789Z","type":"quit"}
{"nick":"felixge","date":"2013-01-14T09:01:07.594Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-01-14T09:01:07.809Z","type":"quit"}
{"nick":"felixge","date":"2013-01-14T09:01:07.944Z","type":"join"}
{"nick":"indutny","date":"2013-01-14T09:08:19.650Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-14T09:12:07.468Z","type":"quit"}
{"nick":"indutny","date":"2013-01-14T09:20:32.093Z","type":"join"}
{"nick":"indutny","message":"hoya","date":"2013-01-14T09:20:37.535Z","type":"message"}
{"nick":"indutny","message":"Hangar","date":"2013-01-14T09:20:53.545Z","type":"message"}
{"nick":"indutny","message":"great","date":"2013-01-14T09:20:55.396Z","type":"message"}
{"nick":"indutny","message":"now I can write from both mobile and desktop","date":"2013-01-14T09:21:00.678Z","type":"message"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-01-14T09:22:04.578Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-14T09:27:18.852Z","type":"quit"}
{"nick":"`3rdEden","date":"2013-01-14T09:32:34.879Z","type":"join"}
{"nick":"felixge","reason":"Quit: felixge","date":"2013-01-14T09:35:43.112Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-01-14T09:35:55.563Z","type":"quit"}
{"nick":"felixge","date":"2013-01-14T09:42:39.265Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-01-14T09:42:39.691Z","type":"quit"}
{"nick":"felixge","date":"2013-01-14T09:42:39.825Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-01-14T09:51:46.876Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis","date":"2013-01-14T09:57:30.546Z","type":"message"}
{"nick":"indutny","message":"oops","date":"2013-01-14T09:57:32.572Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: hey man","date":"2013-01-14T09:57:36.456Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so what have you figured out yesterday?","date":"2013-01-14T09:57:43.948Z","type":"message"}
{"nick":"indutny","message":"was it slab allocator?","date":"2013-01-14T09:57:47.637Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: that it's weak interaction at a distance","date":"2013-01-14T09:58:06.875Z","type":"message"}
{"nick":"bnoordhuis","message":"iow, not sure yet","date":"2013-01-14T09:58:11.094Z","type":"message"}
{"nick":"indutny","message":"iow?","date":"2013-01-14T09:58:19.403Z","type":"message"}
{"nick":"indutny","message":"are you kidding","date":"2013-01-14T09:58:21.377Z","type":"message"}
{"nick":"bnoordhuis","message":"do i ever jest?","date":"2013-01-14T09:58:34.594Z","type":"message"}
{"nick":"indutny","message":"yes?","date":"2013-01-14T09:58:57.673Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-01-14T09:58:59.303Z","type":"message"}
{"nick":"indutny","message":"interesting thing","date":"2013-01-14T09:59:20.306Z","type":"message"}
{"nick":"indutny","message":"I see some memory leak in master","date":"2013-01-14T09:59:27.485Z","type":"message"}
{"nick":"indutny","message":"it leaks like a hell","date":"2013-01-14T09:59:41.611Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: wanna take a look?","date":"2013-01-14T09:59:51.535Z","type":"message"}
{"nick":"indutny","message":"https://gist.github.com/79b5268e416d3c170ad8","date":"2013-01-14T10:00:12.187Z","type":"message"}
{"nick":"indutny","message":"./node 1.js","date":"2013-01-14T10:00:16.318Z","type":"message"}
{"nick":"indutny","message":"and then","date":"2013-01-14T10:00:25.306Z","type":"message"}
{"nick":"indutny","message":"ab -c 100 -n 100000 http://localhost:8080/","date":"2013-01-14T10:00:33.950Z","type":"message"}
{"nick":"indutny","message":"master process is now 680 mb RSS for me","date":"2013-01-14T10:00:39.916Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: try --trace-gc","date":"2013-01-14T10:00:59.806Z","type":"message"}
{"nick":"indutny","message":"good point","date":"2013-01-14T10:01:10.151Z","type":"message"}
{"nick":"indutny","message":"actually, I was going to make heap dump","date":"2013-01-14T10:01:15.393Z","type":"message"}
{"nick":"bnoordhuis","message":"or that :)","date":"2013-01-14T10:01:24.795Z","type":"message"}
{"nick":"felixge","reason":"Quit: http://www.debuggable.com/","date":"2013-01-14T10:15:58.547Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis","date":"2013-01-14T10:24:41.173Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: which tool I can use to analyze heap dumps?","date":"2013-01-14T10:24:51.558Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: the chrome inspector","date":"2013-01-14T10:25:01.841Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2013-01-14T10:25:06.530Z","type":"message"}
{"nick":"indutny","message":"right","date":"2013-01-14T10:25:07.164Z","type":"message"}
{"nick":"indutny","message":"and how can I do it?","date":"2013-01-14T10:28:03.897Z","type":"message"}
{"nick":"indutny","message":"nvm","date":"2013-01-14T10:28:19.428Z","type":"message"}
{"nick":"indutny","message":"erm","date":"2013-01-14T10:32:22.292Z","type":"message"}
{"nick":"tdb2","date":"2013-01-14T10:32:41.529Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: https://github.com/joyent/node/blob/master/lib/child_process.js#L157-L189","date":"2013-01-14T10:33:18.442Z","type":"message"}
{"nick":"indutny","message":"so this .list is populated","date":"2013-01-14T10:33:23.125Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u0002c931e31\u0002 : unix: make assertion message more descriptive - http://git.io/lSET-w","date":"2013-01-14T10:33:40.462Z","type":"message"}
{"nick":"indutny","message":"and never cleaned","date":"2013-01-14T10:35:06.361Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-01-14T10:35:07.995Z","type":"message"}
{"nick":"indutny","message":"it's cleaned when server is closed","date":"2013-01-14T10:35:13.215Z","type":"message"}
{"nick":"indutny","message":"but not before that","date":"2013-01-14T10:35:17.706Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2013-01-14T10:35:34.854Z","type":"message"}
{"nick":"travis-ci","date":"2013-01-14T10:36:05.732Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#1019 (master - c931e31 : Ben Noordhuis): The build is still failing.","date":"2013-01-14T10:36:05.860Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/8e3e60ffbf20...c931e317465b","date":"2013-01-14T10:36:05.860Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/4138841","date":"2013-01-14T10:36:05.860Z","type":"message"}
{"nick":"travis-ci","date":"2013-01-14T10:36:05.860Z","type":"part"}
{"nick":"indutny","message":"no, it's cleaned","date":"2013-01-14T10:36:56.196Z","type":"message"}
{"nick":"bnoordhuis","message":"is that code in child_process.js new? i don't remember that","date":"2013-01-14T10:37:55.506Z","type":"message"}
{"nick":"indutny","message":"I don't remember it either","date":"2013-01-14T10:38:37.820Z","type":"message"}
{"nick":"indutny","message":"but yeah, it's new","date":"2013-01-14T10:38:40.936Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2013-01-14T10:38:57.310Z","type":"message"}
{"nick":"indutny","message":"interesting","date":"2013-01-14T10:39:00.309Z","type":"message"}
{"nick":"indutny","message":"so","date":"2013-01-14T10:39:02.863Z","type":"message"}
{"nick":"bnoordhuis","message":"CommitDate: Mon May 14 07:47:52 2012 -0700","date":"2013-01-14T10:39:04.016Z","type":"message"}
{"nick":"bnoordhuis","message":"not really new. new-ish then","date":"2013-01-14T10:39:12.463Z","type":"message"}
{"nick":"indutny","message":"this .list seems to have very small lenght","date":"2013-01-14T10:39:21.694Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, but socket objects can be pretty big","date":"2013-01-14T10:39:37.705Z","type":"message"}
{"nick":"bnoordhuis","message":"what does it look like in the inspector?","date":"2013-01-14T10:39:45.712Z","type":"message"}
{"nick":"indutny","message":"it looks like there're a lot of sockets in this list","date":"2013-01-14T10:40:17.237Z","type":"message"}
{"nick":"indutny","message":"which is odd","date":"2013-01-14T10:40:29.946Z","type":"message"}
{"nick":"indutny","message":"probably array elements are retained after splice","date":"2013-01-14T10:40:47.779Z","type":"message"}
{"nick":"indutny","message":"well, really","date":"2013-01-14T10:41:08.802Z","type":"message"}
{"nick":"indutny","message":"it's 1-2 in length","date":"2013-01-14T10:41:11.729Z","type":"message"}
{"nick":"indutny","message":"almost every time","date":"2013-01-14T10:41:14.013Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: run with --expose-gc and add this: setTimeout(gc, 1000)","date":"2013-01-14T10:42:04.383Z","type":"message"}
{"nick":"indutny","message":"one sec","date":"2013-01-14T10:42:17.709Z","type":"message"}
{"nick":"bnoordhuis","message":"or -> if (typeof gc === 'function') setTimeout(gc, 1000);","date":"2013-01-14T10:42:18.927Z","type":"message"}
{"nick":"indutny","message":"I'll do another heap dump","date":"2013-01-14T10:42:21.516Z","type":"message"}
{"nick":"indutny","message":"ah, I see your point","date":"2013-01-14T10:42:30.627Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, if you're doing heap dumps","date":"2013-01-14T10:42:38.001Z","type":"message"}
{"nick":"bnoordhuis","message":"a full gc is done just before taking the snapshot","date":"2013-01-14T10:42:48.038Z","type":"message"}
{"nick":"bnoordhuis","message":"so no need in that case","date":"2013-01-14T10:42:57.376Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2013-01-14T10:43:16.167Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-14T10:43:16.541Z","type":"message"}
{"nick":"hz","date":"2013-01-14T10:43:47.455Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: yeah, still the same","date":"2013-01-14T10:49:10.368Z","type":"message"}
{"nick":"indutny","message":"this.list retains all sockets passed to it","date":"2013-01-14T10:49:16.280Z","type":"message"}
{"nick":"bnoordhuis","message":"why does console.trace('%j', {}) print '%j'...","date":"2013-01-14T10:50:49.179Z","type":"message"}
{"nick":"indutny","message":"ahhaha","date":"2013-01-14T10:51:34.990Z","type":"message"}
{"nick":"indutny","message":"and what should it do?","date":"2013-01-14T10:51:59.492Z","type":"message"}
{"nick":"indutny","message":"I think console.trace doesn't support any escape sequences","date":"2013-01-14T10:52:15.478Z","type":"message"}
{"nick":"bnoordhuis","message":"i would expect it to json-ify the argument","date":"2013-01-14T10:52:18.236Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, it's documented but it's silly if you ask me","date":"2013-01-14T10:52:28.468Z","type":"message"}
{"nick":"bnoordhuis","message":"and unexpected - because i didn't expect it","date":"2013-01-14T10:52:44.181Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll open an issue. something for a rainy day","date":"2013-01-14T10:53:03.723Z","type":"message"}
{"nick":"indutny","message":"aaah","date":"2013-01-14T10:53:04.133Z","type":"message"}
{"nick":"indutny","message":"stupid me","date":"2013-01-14T10:53:05.635Z","type":"message"}
{"nick":"indutny","message":"I was logging in a wrong place","date":"2013-01-14T10:53:13.435Z","type":"message"}
{"nick":"indutny","message":"ok, it leaks like a hell","date":"2013-01-14T10:53:17.365Z","type":"message"}
{"nick":"indutny","message":"and noone is clearing it","date":"2013-01-14T10:53:20.634Z","type":"message"}
{"nick":"indutny","message":"shit","date":"2013-01-14T10:53:32.284Z","type":"message"}
{"nick":"indutny","message":"I wonder why it should be retained","date":"2013-01-14T10:55:08.550Z","type":"message"}
{"nick":"indutny","message":"and where is Andreas when we need him","date":"2013-01-14T10:55:15.877Z","type":"message"}
{"nick":"indutny","message":"brb","date":"2013-01-14T10:55:16.502Z","type":"message"}
{"nick":"indutny","message":"tea and banana","date":"2013-01-14T10:55:20.487Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-14T10:55:29.837Z","type":"quit"}
{"nick":"indutny","message":"isaacs committed 8 months ago","date":"2013-01-14T10:59:54.333Z","type":"message"}
{"nick":"indutny","message":"https://github.com/joyent/node/commit/dceebbfa31a2b82bb534ba120ef9354a7d348f65","date":"2013-01-14T10:59:56.329Z","type":"message"}
{"nick":"indutny","message":"oh isaacs","date":"2013-01-14T10:59:59.307Z","type":"message"}
{"nick":"indutny","message":"if only you knew results of it","date":"2013-01-14T11:00:05.330Z","type":"message"}
{"nick":"indutny","message":"bad news - it's in v0.8","date":"2013-01-14T11:00:58.958Z","type":"message"}
{"nick":"btrask","date":"2013-01-14T11:19:19.980Z","type":"join"}
{"nick":"skebcio","reason":"Read error: Operation timed out","date":"2013-01-14T11:21:10.634Z","type":"quit"}
{"nick":"skebcio","date":"2013-01-14T11:23:06.756Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: yt?","date":"2013-01-14T11:35:43.334Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I wanna discuss it with you","date":"2013-01-14T11:35:53.741Z","type":"message"}
{"nick":"stagas_","date":"2013-01-14T11:40:25.670Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 255 seconds","date":"2013-01-14T11:42:14.791Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-01-14T11:42:20.781Z","type":"nick"}
{"nick":"AndreasMadsen","date":"2013-01-14T11:57:28.807Z","type":"join"}
{"nick":"indutny","message":"AndreasMadsen: hello","date":"2013-01-14T11:57:45.757Z","type":"message"}
{"nick":"AndreasMadsen","message":"indutny: Yep, no problem","date":"2013-01-14T11:57:49.604Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: discuss what?","date":"2013-01-14T11:57:52.926Z","type":"message"}
{"nick":"indutny","message":"so SocketListSend populates list of sockets","date":"2013-01-14T11:57:55.300Z","type":"message"}
{"nick":"indutny","message":"and never frees it","date":"2013-01-14T11:58:02.030Z","type":"message"}
{"nick":"indutny","message":"well, it frees it only when server is closed","date":"2013-01-14T11:58:09.681Z","type":"message"}
{"nick":"indutny","message":"I've removed that code","date":"2013-01-14T11:58:17.845Z","type":"message"}
{"nick":"indutny","message":"and things are working properly","date":"2013-01-14T11:58:21.024Z","type":"message"}
{"nick":"indutny","message":"so I wonder now","date":"2013-01-14T11:58:22.898Z","type":"message"}
{"nick":"indutny","message":"why do you need to keep this list","date":"2013-01-14T11:58:28.230Z","type":"message"}
{"nick":"indutny","message":"AndreasMadsen: ^","date":"2013-01-14T11:58:39.623Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: (if you have any ideas) ^","date":"2013-01-14T11:58:47.671Z","type":"message"}
{"nick":"AndreasMadsen","message":"Server.close() emits close when all sockets are closed.","date":"2013-01-14T11:58:58.299Z","type":"message"}
{"nick":"indutny","message":"yes, I know","date":"2013-01-14T11:59:22.279Z","type":"message"}
{"nick":"indutny","message":"but look at the code","date":"2013-01-14T11:59:29.690Z","type":"message"}
{"nick":"indutny","message":"this list will have all sockets sent to another processes","date":"2013-01-14T11:59:43.668Z","type":"message"}
{"nick":"indutny","message":"until server will be closed","date":"2013-01-14T11:59:47.299Z","type":"message"}
{"nick":"indutny","message":"which eventually occupy all available memory","date":"2013-01-14T12:00:11.286Z","type":"message"}
{"nick":"AndreasMadsen","message":"indutny: indutny, but sockets don't emit close on the master end, so in order to known when all sockets are closed the list is fetched when server.close is called.","date":"2013-01-14T12:00:13.648Z","type":"message"}
{"nick":"indutny","message":"which is awkward","date":"2013-01-14T12:00:32.872Z","type":"message"}
{"nick":"indutny","message":"so","date":"2013-01-14T12:00:35.493Z","type":"message"}
{"nick":"indutny","message":"why do you need this list after all","date":"2013-01-14T12:00:41.745Z","type":"message"}
{"nick":"AndreasMadsen","message":"indutny: I don't know how much the list is really needed, but it was made to avoid API differences between the \"server as a master\" and the \"server as a server\"","date":"2013-01-14T12:02:04.481Z","type":"message"}
{"nick":"AndreasMadsen","message":"cases.","date":"2013-01-14T12:02:11.691Z","type":"message"}
{"nick":"indutny","message":"erm","date":"2013-01-14T12:02:14.976Z","type":"message"}
{"nick":"indutny","message":"explain","date":"2013-01-14T12:02:23.258Z","type":"message"}
{"nick":"indutny","message":"I don't see where it is used at all","date":"2013-01-14T12:02:31.143Z","type":"message"}
{"nick":"indutny","message":"it isn't exposed to any apis","date":"2013-01-14T12:02:36.283Z","type":"message"}
{"nick":"indutny","message":"I suspect same can be applied to SocketListReceive","date":"2013-01-14T12:02:57.044Z","type":"message"}
{"nick":"AndreasMadsen","message":"The API differences (there could have been) is in when server.on('close') is emitted.","date":"2013-01-14T12:03:14.580Z","type":"message"}
{"nick":"indutny","message":"and?","date":"2013-01-14T12:05:04.756Z","type":"message"}
{"nick":"indutny","message":"why do you need all sockets in lsit?","date":"2013-01-14T12:05:26.768Z","type":"message"}
{"nick":"indutny","message":"s/lsit/list","date":"2013-01-14T12:05:30.743Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u0002e4598aa\u0002 : gitignore: ignore perf data files - http://git.io/sqK43g","date":"2013-01-14T12:06:50.931Z","type":"message"}
{"nick":"indutny","message":"AndreasMadsen: so can you please explain this API differencies in detail?","date":"2013-01-14T12:07:42.781Z","type":"message"}
{"nick":"AndreasMadsen","message":"yep","date":"2013-01-14T12:07:52.927Z","type":"message"}
{"nick":"indutny","message":"?","date":"2013-01-14T12:15:30.567Z","type":"message"}
{"nick":"AndreasMadsen","message":"I'm here","date":"2013-01-14T12:15:51.306Z","type":"message"}
{"nick":"indutny","message":"so","date":"2013-01-14T12:16:04.394Z","type":"message"}
{"nick":"indutny","message":"I'm trying to figure out","date":"2013-01-14T12:16:13.575Z","type":"message"}
{"nick":"sgallagh","date":"2013-01-14T12:17:06.943Z","type":"join"}
{"nick":"AndreasMadsen","message":"In the normal case `server.on('close')` would be emitted when all sockets are closed. In the child.send case server.on('close') would be emitted instantaneously assuming that all sockets where send to another process. ","date":"2013-01-14T12:17:18.224Z","type":"message"}
{"nick":"indutny","message":"ok, I got it","date":"2013-01-14T12:20:04.073Z","type":"message"}
{"nick":"indutny","message":"AndreasMadsen: thank you","date":"2013-01-14T12:20:09.920Z","type":"message"}
{"nick":"AndreasMadsen","message":"indutny: cool","date":"2013-01-14T12:20:13.994Z","type":"message"}
{"nick":"AndreasMadsen","message":"indutny: you should know that you where the one I originally discussed all this with ;)","date":"2013-01-14T12:20:38.681Z","type":"message"}
{"nick":"indutny","message":"yeah, I remember it","date":"2013-01-14T12:20:53.626Z","type":"message"}
{"nick":"indutny","message":"and remember not looking carefully into it","date":"2013-01-14T12:20:59.560Z","type":"message"}
{"nick":"indutny","message":"my fault afterall","date":"2013-01-14T12:21:02.238Z","type":"message"}
{"nick":"AndreasMadsen","message":"indutny: Personally I think that removing the SocketList would be the correct decision, after all its such a rare case and could be done in userland if truly needed.","date":"2013-01-14T12:23:45.715Z","type":"message"}
{"nick":"indutny","message":"well, I think I'll either workaround it","date":"2013-01-14T12:24:59.931Z","type":"message"}
{"nick":"indutny","message":"or just make behaviour a little bit different","date":"2013-01-14T12:25:10.897Z","type":"message"}
{"nick":"AndreasMadsen","message":"Of cause finding a way to emit socket.on('close') in both master and worker would be the best solution.","date":"2013-01-14T12:25:44.852Z","type":"message"}
{"nick":"AndreasMadsen","message":"indutny: cool, I will will keep an eye on you.","date":"2013-01-14T12:26:19.056Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-01-14T12:26:23.904Z","type":"message"}
{"nick":"indutny","message":"deal","date":"2013-01-14T12:26:25.473Z","type":"message"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-01-14T12:37:18.932Z","type":"nick"}
{"nick":"stagas","reason":"Ping timeout: 255 seconds","date":"2013-01-14T12:46:14.419Z","type":"quit"}
{"nick":"Gu_______","date":"2013-01-14T13:43:48.252Z","type":"join"}
{"nick":"hz","reason":"Ping timeout: 264 seconds","date":"2013-01-14T13:48:12.469Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-14T13:48:25.300Z","type":"join"}
{"nick":"hz","date":"2013-01-14T13:50:47.483Z","type":"join"}
{"nick":"tdb2","message":"Are there plans to flatten-out the uv.h, for instance to use vanilla enums() instead of macros","date":"2013-01-14T13:53:00.220Z","type":"message"}
{"nick":"indutny","message":"nothing I aware of","date":"2013-01-14T13:56:17.999Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-01-14T13:56:27.916Z","type":"join"}
{"nick":"indutny","message":"we already use enums where it's possible/needed","date":"2013-01-14T13:56:34.175Z","type":"message"}
{"nick":"indutny","message":"tdb2: why do you need enums","date":"2013-01-14T13:56:45.856Z","type":"message"}
{"nick":"piscisaureus_","message":"hey bnoordhuis, is it true that uv-unix asserts if you fail to read_stop when a socket errs?","date":"2013-01-14T13:56:51.581Z","type":"message"}
{"nick":"tdb2","message":"I was experimenting with SWIG to build a wrapper, but it's very painful with macroed source","date":"2013-01-14T13:57:10.462Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: yes","date":"2013-01-14T13:58:36.950Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: if only you ain't trolling ben","date":"2013-01-14T13:58:49.371Z","type":"message"}
{"nick":"indutny","message":"if you're - then no","date":"2013-01-14T13:58:54.328Z","type":"message"}
{"nick":"piscisaureus_","message":"I am not","date":"2013-01-14T13:58:59.143Z","type":"message"}
{"nick":"piscisaureus_","message":"So what is felix halim complaining about?","date":"2013-01-14T13:59:21.908Z","type":"message"}
{"nick":"indutny","message":"well, it's asserting","date":"2013-01-14T13:59:32.750Z","type":"message"}
{"nick":"indutny","message":"I was just kidding","date":"2013-01-14T13:59:36.240Z","type":"message"}
{"nick":"indutny","message":"I suppose it's fixed now","date":"2013-01-14T13:59:45.603Z","type":"message"}
{"nick":"indutny","message":"by emitting more informative assertion","date":"2013-01-14T13:59:52.060Z","type":"message"}
{"nick":"piscisaureus_","message":"https://github.com/bnoordhuis/libuv/commit/c931e31","date":"2013-01-14T14:00:06.717Z","type":"message"}
{"nick":"piscisaureus_","message":"on uv-win I just implicitly stop reading","date":"2013-01-14T14:00:20.479Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: is it good?","date":"2013-01-14T14:01:04.313Z","type":"message"}
{"nick":"piscisaureus_","message":"I don't like that libuv requires you to take a particular action","date":"2013-01-14T14:01:19.636Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: I mean, repeating code is bad and everything. But at least people won't ignore this error","date":"2013-01-14T14:01:24.565Z","type":"message"}
{"nick":"indutny","message":"which is what they should do","date":"2013-01-14T14:03:26.281Z","type":"message"}
{"nick":"piscisaureus_","message":"well, is that so? :-)","date":"2013-01-14T14:05:50.876Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: I mean, what if the person want's to call uv_close on a next tick?","date":"2013-01-14T14:06:05.661Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-01-14T14:08:58.715Z","type":"message"}
{"nick":"indutny","message":"I see your point","date":"2013-01-14T14:09:02.674Z","type":"message"}
{"nick":"indutny","message":"ask ben","date":"2013-01-14T14:09:55.642Z","type":"message"}
{"nick":"indutny","message":"anyway :)","date":"2013-01-14T14:09:57.790Z","type":"message"}
{"nick":"indutny","message":"if that would be me behind this commit","date":"2013-01-14T14:10:12.640Z","type":"message"}
{"nick":"indutny","message":"I'd probably change my mind now","date":"2013-01-14T14:10:17.082Z","type":"message"}
{"nick":"indutny","message":"or","date":"2013-01-14T14:10:21.778Z","type":"message"}
{"nick":"indutny","message":"pursue you","date":"2013-01-14T14:10:25.666Z","type":"message"}
{"nick":"indutny","message":"because it should be consistent anyway","date":"2013-01-14T14:10:34.981Z","type":"message"}
{"nick":"saghul","message":"I agree with piscisaureus_ here, I don't want to call uv_close early, I guess I could do read_stop, but I rather have libuv do it :-)","date":"2013-01-14T14:12:50.520Z","type":"message"}
{"nick":"piscisaureus_","message":"yay!","date":"2013-01-14T14:13:30.958Z","type":"message"}
{"nick":"piscisaureus_","message":"so indutny, I didn't quite got what you said -> do I need to convince you still?","date":"2013-01-14T14:13:58.599Z","type":"message"}
{"nick":"piscisaureus_","message":"and bnoordhuis: --^   ?","date":"2013-01-14T14:14:05.903Z","type":"message"}
{"nick":"indutny","message":"you lame guys","date":"2013-01-14T14:14:30.014Z","type":"message"}
{"nick":"indutny","message":"I agree with you","date":"2013-01-14T14:14:39.941Z","type":"message"}
{"nick":"saghul","message":"piscisaureus_, indutny now that bnoordhuis is not looking, can you add some input on this please? https://github.com/joyent/libuv/pull/676 :-)","date":"2013-01-14T14:21:09.429Z","type":"message"}
{"nick":"piscisaureus_","message":"I get unicorn","date":"2013-01-14T14:27:36.134Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus_: on my way to AMS","date":"2013-01-14T14:29:23.036Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: ^","date":"2013-01-14T14:29:24.847Z","type":"message"}
{"nick":"saghul","message":"stupid GitHub","date":"2013-01-14T14:29:33.208Z","type":"message"}
{"nick":"saghul","message":"piscisaureus_ seems it's working again now","date":"2013-01-14T14:32:19.501Z","type":"message"}
{"nick":"piscisaureus_","message":"not here no","date":"2013-01-14T14:32:35.903Z","type":"message"}
{"nick":"piscisaureus_","message":"saghul: so what do you need the UV__LOOP_DEFAULT flag for?","date":"2013-01-14T14:33:10.770Z","type":"message"}
{"nick":"saghul","message":"piscisaureus_ the unix loop had an unused flags field which i extended to windows and I thought I could add something useful there","date":"2013-01-14T14:33:58.143Z","type":"message"}
{"nick":"saghul","message":"piscisaureus_ but that's a detail which I don't mind chaning anyway","date":"2013-01-14T14:34:29.474Z","type":"message"}
{"nick":"piscisaureus_","message":"saghul: so what run modes do you plan adding after this?","date":"2013-01-14T14:37:16.028Z","type":"message"}
{"nick":"saghul","message":"piscisaureus_ none","date":"2013-01-14T14:37:35.075Z","type":"message"}
{"nick":"saghul","message":"this is meant to interrupt a run","date":"2013-01-14T14:38:01.371Z","type":"message"}
{"nick":"saghul","message":"(the default mode, that is)","date":"2013-01-14T14:38:08.476Z","type":"message"}
{"nick":"piscisaureus_","message":"I defined \"run modes\" broadly :-)","date":"2013-01-14T14:39:13.078Z","type":"message"}
{"nick":"piscisaureus_","message":"I like the minimal principle where we don't have multiple ways to achieve the same thing","date":"2013-01-14T14:39:36.714Z","type":"message"}
{"nick":"piscisaureus_","message":"but then it seems harmless and all that","date":"2013-01-14T14:39:50.484Z","type":"message"}
{"nick":"piscisaureus_","message":"saghul: but the next PR that you are going to send is to hav uv_run_timed or uv_run_until_error and so forth ...","date":"2013-01-14T14:40:20.699Z","type":"message"}
{"nick":"saghul","message":"The idea is that if one wants to run a loop, stop it at some undetermined point and then do whatever the user is forced to write some boilerplate","date":"2013-01-14T14:40:28.748Z","type":"message"}
{"nick":"piscisaureus_","message":"uv_throw","date":"2013-01-14T14:40:36.937Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2013-01-14T14:40:40.135Z","type":"message"}
{"nick":"saghul","message":"piscisaureus_ no i'm not :-)","date":"2013-01-14T14:40:42.139Z","type":"message"}
{"nick":"hz","date":"2013-01-14T14:40:52.696Z","type":"quit"}
{"nick":"saghul","message":"and the reason to add it would be to provide a nice API for a common/reasonable use case","date":"2013-01-14T14:41:19.016Z","type":"message"}
{"nick":"c4milo","date":"2013-01-14T14:46:35.572Z","type":"join"}
{"nick":"tdb2","message":"saghul, for my 2c, I think uv_run_mode should be in the loop struct, then you modify that through uv_break(loop*)","date":"2013-01-14T14:49:15.571Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: is it true that uv-unix asserts if you fail to read_stop when a socket errs? <- yes","date":"2013-01-14T14:50:17.868Z","type":"message"}
{"nick":"saghul","message":"tdb2 that's an implementation detail","date":"2013-01-14T14:50:21.946Z","type":"message"}
{"nick":"tdb2","message":"But I agree with the principle (thinking from a scripting language perspective)","date":"2013-01-14T14:51:01.949Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: do you think that is more reasonable than implicitly read_stop'ing on EOF/error ?","date":"2013-01-14T14:51:42.135Z","type":"message"}
{"nick":"tdb2","message":"while(foo->run_once) { last if $break; } will be horribly inefficient","date":"2013-01-14T14:51:46.184Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: well, you need to close the handle anyway","date":"2013-01-14T14:52:00.405Z","type":"message"}
{"nick":"piscisaureus_","message":"tdb2: why is that inefficient?","date":"2013-01-14T14:52:42.512Z","type":"message"}
{"nick":"tdb2","message":"In Perl at least, perl -> c -> perl is the most expensive op you can do","date":"2013-01-14T14:53:03.334Z","type":"message"}
{"nick":"piscisaureus_","message":"tdb2: so why don't you do it in C?","date":"2013-01-14T14:54:34.674Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis why close? is it not enough to stop it?","date":"2013-01-14T14:54:58.791Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: i was just replying to you on the mailing list :)","date":"2013-01-14T14:55:13.473Z","type":"message"}
{"nick":"saghul","message":"heh :-)","date":"2013-01-14T14:55:28.429Z","type":"message"}
{"nick":"Gu_______","message":"hello i heard libuv is written in basic is this true","date":"2013-01-14T14:56:49.388Z","type":"message"}
{"nick":"saghul","message":"piscisaureus_ I don't like to add things to pyuv that don't exist on libuv","date":"2013-01-14T14:57:13.938Z","type":"message"}
{"nick":"tdb2","message":"piscisaureus_, it depends on the design goal of libuv - does libuv define the API or its bindings?","date":"2013-01-14T14:57:24.238Z","type":"message"}
{"nick":"bnoordhuis","message":"Gu_______: no, logo. why do you ask?","date":"2013-01-14T14:57:43.994Z","type":"message"}
{"nick":"Gu_______","message":"cause i want to make bindings for gw basic ","date":"2013-01-14T14:58:05.668Z","type":"message"}
{"nick":"bnoordhuis","message":"Gu_______: i hear good stories about gw basic","date":"2013-01-14T14:58:26.182Z","type":"message"}
{"nick":"Gu_______","message":"omg i was scared, but logo has unit tests too","date":"2013-01-14T14:58:53.901Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: Maybe transient network outages. <- very unlikely though","date":"2013-01-14T14:58:54.712Z","type":"message"}
{"nick":"Gu_______","message":"http://www.calormen.com/logo/","date":"2013-01-14T14:58:55.424Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: by the time the os tcp stack reports the error, the tcp session is effectively dead","date":"2013-01-14T15:00:38.837Z","type":"message"}
{"nick":"bnoordhuis","message":"at least, with timeout errors. maybe ENETUNREACH","date":"2013-01-14T15:01:28.590Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis I see. What about doing the read_stop internally?","date":"2013-01-14T15:02:18.415Z","type":"message"}
{"nick":"saghul","message":"like uv-win","date":"2013-01-14T15:02:23.445Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: i could change that. but the assert() is a good reminder that you probably have a bug in your code","date":"2013-01-14T15:02:56.556Z","type":"message"}
{"nick":"bnoordhuis","message":"which felix had","date":"2013-01-14T15:03:03.293Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis in pyuv if a handle is garbage collected I uv_close it","date":"2013-01-14T15:03:46.504Z","type":"message"}
{"nick":"saghul","message":"but it may stay dead for a while","date":"2013-01-14T15:03:53.815Z","type":"message"}
{"nick":"saghul","message":"I don't really care","date":"2013-01-14T15:03:59.798Z","type":"message"}
{"nick":"saghul","message":"but a segfault is not very nice","date":"2013-01-14T15:04:09.945Z","type":"message"}
{"nick":"tdb2","message":"Taking a parallel with lib-poppler - they have a private space which is wrapped by a C++ API. It would be preferred to have one API rather than variations for each language binding ... i.e. a C or C++ clean API","date":"2013-01-14T15:04:43.053Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 272 seconds","date":"2013-01-14T15:04:58.775Z","type":"quit"}
{"nick":"bnoordhuis","message":"saghul: fortunately it's a SIGABRT, not a SIGSEGV. but i see your point :)","date":"2013-01-14T15:05:22.230Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis I don't mind adding a uv_read_stop in pyuv, but IMHO it would be nice to have libuv take care ;-)","date":"2013-01-14T15:06:15.478Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: i'll change it but i like that the assert() helps catch bugs","date":"2013-01-14T15:07:40.046Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe i'll replace it with some kind of debug tracing mechanism","date":"2013-01-14T15:08:05.649Z","type":"message"}
{"nick":"lohkey","date":"2013-01-14T15:08:21.032Z","type":"join"}
{"nick":"saghul","message":"sounds good to me :-)","date":"2013-01-14T15:08:42.206Z","type":"message"}
{"nick":"tdb2","message":"saghul, is all of that wrapper code in pyuv hand-crafted ?","date":"2013-01-14T15:11:23.822Z","type":"message"}
{"nick":"bradleymeck","date":"2013-01-14T15:12:05.321Z","type":"join"}
{"nick":"saghul","message":"tdb2 yes","date":"2013-01-14T15:12:29.890Z","type":"message"}
{"nick":"tdb2","message":"(The Perl binding doesn't support uv_spawn - I'm pondering the complexity of adding it ...)","date":"2013-01-14T15:12:39.076Z","type":"message"}
{"nick":"bnoordhuis","message":"tdb2: what's the issue?","date":"2013-01-14T15:13:13.906Z","type":"message"}
{"nick":"saghul","message":"tdb2 it was not complicated, but it's tedious to convert Python sequences to char** with all that error checking","date":"2013-01-14T15:13:28.356Z","type":"message"}
{"nick":"tdb2","message":"I'm pondering a rainy afternoon of either a) write a C wrapper API to bind using SWIG or b) write Perl XS code to wrap uv_spawn","date":"2013-01-14T15:14:05.394Z","type":"message"}
{"nick":"saghul","message":"the only thing I don't like about uv_spawn is the fact that there is no init for it, like there is for other handles","date":"2013-01-14T15:14:07.768Z","type":"message"}
{"nick":"tjfontaine","message":"a swig solution should only be used to bootstrap, after that you should be hands on anyway","date":"2013-01-14T15:14:33.668Z","type":"message"}
{"nick":"bradleymeck","message":"@isaacs nm on pull request need to completely redo it. but I am still doing as suggested with a new uv_loop_t, but all the streams will have to be handled in C++","date":"2013-01-14T15:15:38.717Z","type":"message"}
{"nick":"tdb2","message":"tjfontaine, depends how clean the structs are. A simple enough struct/procedure can be just named to wrap it","date":"2013-01-14T15:15:45.135Z","type":"message"}
{"nick":"tdb2","message":"%extend uv_loop_t { int run() { return uv_run($self); } }","date":"2013-01-14T15:18:14.200Z","type":"message"}
{"nick":"AndreasMadsen","reason":"Remote host closed the connection","date":"2013-01-14T15:24:25.837Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033bnoordhuis\u000f created branch issue4586 - http://git.io/cvG-HQ","date":"2013-01-14T15:37:20.728Z","type":"message"}
{"nick":"bnoordhuis","message":"^ review anyone? it's only a couple of lines","date":"2013-01-14T15:37:34.366Z","type":"message"}
{"nick":"bnoordhuis","message":"really, it's a one-liner fix and 20 lines of comments + a test","date":"2013-01-14T15:37:56.459Z","type":"message"}
{"nick":"stagas","date":"2013-01-14T15:41:35.277Z","type":"join"}
{"nick":"philips_","reason":"Excess Flood","date":"2013-01-14T15:47:38.799Z","type":"quit"}
{"nick":"AndreasMadsen","date":"2013-01-14T15:47:58.167Z","type":"join"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2013-01-14T15:52:17.529Z","type":"quit"}
{"nick":"indutny","message":"hoya","date":"2013-01-14T16:00:25.208Z","type":"message"}
{"nick":"philips_","date":"2013-01-14T16:00:34.369Z","type":"join"}
{"nick":"qmx","new_nick":"qmx|lunch","date":"2013-01-14T16:01:38.383Z","type":"nick"}
{"nick":"bnoordhuis","message":"indutny: ^ review","date":"2013-01-14T16:09:45.638Z","type":"message"}
{"nick":"bnoordhuis","message":"plus question mark","date":"2013-01-14T16:09:51.735Z","type":"message"}
{"nick":"indutny","message":"what?","date":"2013-01-14T16:09:55.038Z","type":"message"}
{"nick":"indutny","message":"review","date":"2013-01-14T16:09:56.883Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-14T16:10:00.373Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: http://git.io/cvG-HQ","date":"2013-01-14T16:10:02.961Z","type":"message"}
{"nick":"indutny","message":"ircrelay killed history","date":"2013-01-14T16:10:17.910Z","type":"message"}
{"nick":"indutny","message":"looking","date":"2013-01-14T16:10:24.123Z","type":"message"}
{"nick":"pooya","date":"2013-01-14T16:11:57.982Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-01-14T16:13:04.992Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: lgtm","date":"2013-01-14T16:13:43.612Z","type":"message"}
{"nick":"bnoordhuis","message":"thanks","date":"2013-01-14T16:15:17.289Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u0002c3642aa\u0002 : http: fix \"Cannot call method 'emit' of null\"  Fix the following exceptio - http://git.io/mYs5xw","date":"2013-01-14T16:15:26.055Z","type":"message"}
{"nick":"mikeal","date":"2013-01-14T16:15:32.961Z","type":"join"}
{"nick":"mmalecki","message":"bnoordhuis: piscisaureus_ you guys in Amsterdam today?","date":"2013-01-14T16:17:19.343Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: i'm not but bert is","date":"2013-01-14T16:17:32.576Z","type":"message"}
{"nick":"mmalecki","message":"I might be up for some late beers, as in, midnight, 1 AM late","date":"2013-01-14T16:17:36.680Z","type":"message"}
{"nick":"bnoordhuis","message":"you came at the right time. it just started snowing","date":"2013-01-14T16:17:49.752Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: yeah, same here. snow in Amsterdam is fun, isn't it?","date":"2013-01-14T16:18:14.427Z","type":"message"}
{"nick":"mmalecki","message":"also, I'm not there just yet. I'm waiting for my plane to Warsaw, then to Amsterdam","date":"2013-01-14T16:18:37.662Z","type":"message"}
{"nick":"bradleymeck","message":"bnoordhuis: was it you who i was talking about execSync with?","date":"2013-01-14T16:21:17.410Z","type":"message"}
{"nick":"bnoordhuis","message":"bradleymeck: if you mean if i was the guy that said \"not execSync again\", then yes","date":"2013-01-14T16:21:53.560Z","type":"message"}
{"nick":"bradleymeck","message":"no someone was talking about impl it, grr backlog showing nothing in grep","date":"2013-01-14T16:22:13.834Z","type":"message"}
{"nick":"bradleymeck","message":"on plus side i got a working copy, then found out that it is broken for large outputs so have to move all the streamwraps out to raw uv stream stuff and close the ones in JS manually, not terrible but more than I thought","date":"2013-01-14T16:23:27.833Z","type":"message"}
{"nick":"AvianFlu","date":"2013-01-14T16:23:49.098Z","type":"join"}
{"nick":"bradleymeck","message":"piscisaureus_: was it you I talked to about execSync?","date":"2013-01-14T16:23:55.705Z","type":"message"}
{"nick":"bradleymeck","message":"hail AvianFlu ","date":"2013-01-14T16:24:00.148Z","type":"message"}
{"nick":"indexzero","date":"2013-01-14T16:24:52.947Z","type":"join"}
{"nick":"indutny","message":"all hail the daleks","date":"2013-01-14T16:25:18.143Z","type":"message"}
{"nick":"bnoordhuis","message":"damnit, forgot to mention the issue # in that commit","date":"2013-01-14T16:26:27.393Z","type":"message"}
{"nick":"piscisaureus_","message":"bradleymeck: possibly","date":"2013-01-14T16:26:43.085Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u00022dbd5a3\u0002 : http: fix \"Cannot call method 'emit' of null\"  Fix the following exceptio - http://git.io/Al6WVA","date":"2013-01-14T16:27:01.742Z","type":"message"}
{"nick":"bradleymeck","message":"piscisaureus_: talking about a separate uv_loop_t for the process, but it looks like all the stdio must be buffered after some tests with large output? does that make sense to you?","date":"2013-01-14T16:27:49.546Z","type":"message"}
{"nick":"piscisaureus_","message":"bradleymeck: yes, that's unavoidable","date":"2013-01-14T16:28:10.393Z","type":"message"}
{"nick":"piscisaureus_","message":"bradleymeck: it's also what I want :-). No synchronous callbacks please","date":"2013-01-14T16:28:24.095Z","type":"message"}
{"nick":"bradleymeck","message":"piscisaureus_: clarify that last sentence","date":"2013-01-14T16:29:21.915Z","type":"message"}
{"nick":"piscisaureus_","message":"bradleymeck: well you could imagine that execSync could block the event loop but still call callbacls when data comes in (but execSync itself would not return until the process exits)","date":"2013-01-14T16:30:39.524Z","type":"message"}
{"nick":"piscisaureus_","message":"but I dislike it","date":"2013-01-14T16:30:44.244Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037v0.8\u000f * \u0002f3e78bd\u0002 : http: fix \"Cannot call method 'emit' of null\"  Fix the following exceptio - http://git.io/x-X7jA","date":"2013-01-14T16:31:54.096Z","type":"message"}
{"nick":"bradleymeck","message":"piscisaureus_: im using uv_run inside the execSync block. I tried using JS callbacks, but found some odd issues and am abandoning them","date":"2013-01-14T16:31:58.184Z","type":"message"}
{"nick":"piscisaureus_","message":"bradleymeck: good!","date":"2013-01-14T16:32:10.314Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u0002e4598aa\u0002 : gitignore: ignore perf data files - http://git.io/VJPcAw","date":"2013-01-14T16:32:33.329Z","type":"message"}
{"nick":"bradleymeck","message":"makes it take much longer to write though","date":"2013-01-14T16:32:38.499Z","type":"message"}
{"nick":"AndreasMadsen","reason":"Remote host closed the connection","date":"2013-01-14T16:39:51.984Z","type":"quit"}
{"nick":"trevnorris","date":"2013-01-14T16:41:09.989Z","type":"join"}
{"nick":"dap","date":"2013-01-14T16:44:49.801Z","type":"join"}
{"nick":"dap","reason":"Client Quit","date":"2013-01-14T16:44:54.905Z","type":"quit"}
{"nick":"dap","date":"2013-01-14T16:45:22.825Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-01-14T16:45:44.720Z","type":"quit"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-01-14T16:48:02.049Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-14T16:48:34.276Z","type":"join"}
{"nick":"loladiro","date":"2013-01-14T16:52:47.694Z","type":"join"}
{"nick":"Benvie","date":"2013-01-14T16:55:42.933Z","type":"join"}
{"nick":"mmalecki","new_nick":"mmalecki[fly]","date":"2013-01-14T16:57:03.518Z","type":"nick"}
{"nick":"bradleymeck","date":"2013-01-14T16:57:40.022Z","type":"join"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-01-14T16:57:49.455Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: Assertion failed: (fd_to_send >= 0), function uv__write, file ../deps/uv/src/unix/stream.c, line 724.","date":"2013-01-14T16:59:25.245Z","type":"message"}
{"nick":"indutny","message":"I suppose some use after free, right?","date":"2013-01-14T16:59:31.782Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: maybe","date":"2013-01-14T17:00:06.445Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-14T17:00:58.139Z","type":"message"}
{"nick":"bradleymeck","reason":"Read error: Connection reset by peer","date":"2013-01-14T17:01:12.158Z","type":"quit"}
{"nick":"bradleymeck_","date":"2013-01-14T17:01:15.930Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: have you seen that \"cannot call method 'emit' of null\" http error in 0.8?","date":"2013-01-14T17:01:36.276Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: wasn't the \"make a copy of the listeners array\" behavior added in 0.9?","date":"2013-01-14T17:02:00.575Z","type":"message"}
{"nick":"bradleymeck_","reason":"Client Quit","date":"2013-01-14T17:02:17.039Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-01-14T17:05:16.579Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: https://github.com/joyent/node/issues/4592","date":"2013-01-14T17:07:16.949Z","type":"message"}
{"nick":"Gu_______","reason":"Quit: Computer has gone to sleep.","date":"2013-01-14T17:07:20.992Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Ping timeout: 272 seconds","date":"2013-01-14T17:09:06.876Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: and this https://github.com/joyent/node/pull/4593","date":"2013-01-14T17:11:07.559Z","type":"message"}
{"nick":"indutny","message":"isaacs: ^","date":"2013-01-14T17:11:09.468Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: isaacs: would be good if you guys will check actual specification content","date":"2013-01-14T17:11:25.246Z","type":"message"}
{"nick":"indutny","message":"since I might be missing sacred meaning of some parts of it","date":"2013-01-14T17:11:34.024Z","type":"message"}
{"nick":"indutny","message":"due to my limited nature","date":"2013-01-14T17:11:37.301Z","type":"message"}
{"nick":"hz","date":"2013-01-14T17:11:42.434Z","type":"join"}
{"nick":"indutny","message":"and knowledge of your pretty popular language","date":"2013-01-14T17:11:45.699Z","type":"message"}
{"nick":"lohkey","date":"2013-01-14T17:12:43.794Z","type":"join"}
{"nick":"indutny","message":"anyone?","date":"2013-01-14T17:13:52.181Z","type":"message"}
{"nick":"isaacs","message":"hm.  that language is pretty dense, but as i read it, that menas that the CN should not have wildcards in it.","date":"2013-01-14T17:21:12.483Z","type":"message"}
{"nick":"isaacs","message":"however, i know for a fact that there are uses of * in the CN","date":"2013-01-14T17:21:20.743Z","type":"message"}
{"nick":"isaacs","message":"so tha'ts strange.","date":"2013-01-14T17:21:24.672Z","type":"message"}
{"nick":"isaacs","message":"indutny: chrome allows it, so i say we should, too","date":"2013-01-14T17:21:54.562Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-14T17:22:14.497Z","type":"message"}
{"nick":"indutny","message":"pulling into master","date":"2013-01-14T17:22:21.384Z","type":"message"}
{"nick":"isaacs","message":"yeah, pull req lgtm","date":"2013-01-14T17:22:47.431Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: we need to have a consistent story about throwing from async-callback-taking functions","date":"2013-01-14T17:23:24.781Z","type":"message"}
{"nick":"lohkey","reason":"Ping timeout: 260 seconds","date":"2013-01-14T17:25:04.648Z","type":"quit"}
{"nick":"indutny","message":"I think there're only way to fix it","date":"2013-01-14T17:25:56.199Z","type":"message"}
{"nick":"indutny","message":"don't throw","date":"2013-01-14T17:25:58.162Z","type":"message"}
{"nick":"isaacs","message":"indutny: fs.open({this:\"is not a filename or even a string\"}, callback)","date":"2013-01-14T17:27:49.918Z","type":"message"}
{"nick":"isaacs","message":"indutny: note that the filename is not a string, and there's no mode specified","date":"2013-01-14T17:27:57.978Z","type":"message"}
{"nick":"isaacs","message":"this is clearly a programmer error.","date":"2013-01-14T17:28:05.868Z","type":"message"}
{"nick":"isaacs","message":"do we throw, or call the cb?","date":"2013-01-14T17:28:09.448Z","type":"message"}
{"nick":"qmx|lunch","new_nick":"qmx","date":"2013-01-14T17:28:10.821Z","type":"nick"}
{"nick":"indutny","message":"cb","date":"2013-01-14T17:28:12.869Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-14T17:28:13.616Z","type":"quit"}
{"nick":"indutny","message":"it's programmer's error almost everytiem","date":"2013-01-14T17:28:25.698Z","type":"message"}
{"nick":"indutny","message":"anyway","date":"2013-01-14T17:28:27.391Z","type":"message"}
{"nick":"isaacs","message":"i'm inclined to agree.  it's surprising when async functions throw","date":"2013-01-14T17:28:32.668Z","type":"message"}
{"nick":"isaacs","message":"otoh, this is clearly an \"incorrect\" program","date":"2013-01-14T17:28:37.798Z","type":"message"}
{"nick":"indutny","message":"definitely incorrect","date":"2013-01-14T17:29:00.898Z","type":"message"}
{"nick":"indutny","message":"but the thing is","date":"2013-01-14T17:29:11.257Z","type":"message"}
{"nick":"indutny","message":"that programs are made of different components intreconnected with each other","date":"2013-01-14T17:29:22.694Z","type":"message"}
{"nick":"isaacs","message":"but i think a pretty good pattern is that we call the cb for public async API, throw for public sync api, and abort() or assert() for binding layer","date":"2013-01-14T17:29:28.357Z","type":"message"}
{"nick":"indutny","message":"they should behave similarly","date":"2013-01-14T17:29:29.068Z","type":"message"}
{"nick":"lohkey","date":"2013-01-14T17:29:58.256Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Fedor Indutny\u000f \u00037master\u000f * \u00024dd70bb\u0002 : tls: allow wildcards in common name  see #4592 - http://git.io/P6ytEQ","date":"2013-01-14T17:30:37.616Z","type":"message"}
{"nick":"TheJH","date":"2013-01-14T17:30:49.906Z","type":"join"}
{"nick":"isaacs","message":"indutny: i am ok with this on v0.8 as well.","date":"2013-01-14T17:31:06.576Z","type":"message"}
{"nick":"indutny","message":"another release?","date":"2013-01-14T17:31:14.110Z","type":"message"}
{"nick":"indutny","message":"please, nooo","date":"2013-01-14T17:31:17.915Z","type":"message"}
{"nick":"isaacs","message":"probably eventually :)","date":"2013-01-14T17:31:20.686Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-01-14T17:31:22.483Z","type":"message"}
{"nick":"isaacs","message":"or not.","date":"2013-01-14T17:31:23.226Z","type":"message"}
{"nick":"isaacs","message":"but you may as well land it there, in case we do one.","date":"2013-01-14T17:31:30.746Z","type":"message"}
{"nick":"isaacs","message":"it's a bug","date":"2013-01-14T17:31:32.126Z","type":"message"}
{"nick":"indutny","message":"now bnoordhuis will kill me","date":"2013-01-14T17:31:44.594Z","type":"message"}
{"nick":"isaacs","message":"hahah","date":"2013-01-14T17:31:47.896Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Fedor Indutny\u000f \u00037v0.8\u000f * \u000245024e7\u0002 : tls: allow wildcards in common name  see #4592 - http://git.io/dKZApQ","date":"2013-01-14T17:31:49.659Z","type":"message"}
{"nick":"indutny","message":"because he's going to feel pain again","date":"2013-01-14T17:31:51.046Z","type":"message"}
{"nick":"isaacs","message":"orly?","date":"2013-01-14T17:31:55.905Z","type":"message"}
{"nick":"indutny","message":"when merging v0.8 in master","date":"2013-01-14T17:31:56.903Z","type":"message"}
{"nick":"isaacs","message":"how come?","date":"2013-01-14T17:31:57.285Z","type":"message"}
{"nick":"isaacs","message":"oh, it'll be fine.","date":"2013-01-14T17:32:05.745Z","type":"message"}
{"nick":"isaacs","message":"it's just the same change in both places.  usually git can handle that.","date":"2013-01-14T17:32:14.965Z","type":"message"}
{"nick":"isaacs","message":"what sucks is when you make a *different* change in both places.","date":"2013-01-14T17:32:23.175Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-01-14T17:36:24.603Z","type":"message"}
{"nick":"isaacs","message":"ugh.  i'm seeing a bug in a pipe() in npm which i can't seem to reproduce outside of npm.","date":"2013-01-14T17:36:50.162Z","type":"message"}
{"nick":"isaacs","message":"timing issue with git child proces.","date":"2013-01-14T17:37:03.602Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-14T17:40:30.856Z","type":"quit"}
{"nick":"isaacs","message":"it's so weird.  if i do child.stdout.pipe(gzip, { end:false }) and then call end myself, it works fine.","date":"2013-01-14T17:41:32.019Z","type":"message"}
{"nick":"isaacs","message":"but if i just do child.stdout.pipe(gzip) it doesn't","date":"2013-01-14T17:41:38.819Z","type":"message"}
{"nick":"isaacs","message":"ahhh.. awesome.  found it","date":"2013-01-14T17:51:34.532Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: you should've landed that in v0.8 first","date":"2013-01-14T17:53:01.798Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: have you seen that \"cannot call method 'emit' of null\" http error in 0.8? <- yes","date":"2013-01-14T17:54:58.597Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i believe indutny was hesitant to make changes to v0.8 because there will likely not be a v0.8.18","date":"2013-01-14T17:55:40.522Z","type":"message"}
{"nick":"bnoordhuis","message":"why not?","date":"2013-01-14T17:55:52.161Z","type":"message"}
{"nick":"isaacs","message":"but, we saw 0.6 releases afer v0.8 was out, so... probably there will be some bug fixes eventually","date":"2013-01-14T17:55:53.867Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: yeah, my thoughts also :)","date":"2013-01-14T17:56:07.119Z","type":"message"}
{"nick":"paddybyers","reason":"Ping timeout: 252 seconds","date":"2013-01-14T17:56:16.485Z","type":"quit"}
{"nick":"bnoordhuis","message":"isaacs, indutny: re throw-vs-emit, it's clear-cut imo: throw an application bugs, emit runtime errors","date":"2013-01-14T17:56:35.685Z","type":"message"}
{"nick":"bnoordhuis","message":"*on","date":"2013-01-14T17:56:39.099Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: but that's not actually what we do, and that line is not so clear-cut.","date":"2013-01-14T17:56:56.149Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: it's not what we do because of certain bleeding heart patches, that's true","date":"2013-01-14T17:57:26.023Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: potential throws need to be documented and then we're relying on people reading documentation.","date":"2013-01-14T17:58:15.768Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: or testing their code","date":"2013-01-14T17:58:26.113Z","type":"message"}
{"nick":"isaacs","message":"against all potential input?","date":"2013-01-14T17:58:33.898Z","type":"message"}
{"nick":"isaacs","message":"impossible.","date":"2013-01-14T17:58:35.257Z","type":"message"}
{"nick":"isaacs","message":"what happens is that they DO test their code, then one day, get a bigger number that overflows the Uint32 limit, and their server crashes.","date":"2013-01-14T17:59:02.757Z","type":"message"}
{"nick":"bnoordhuis","message":"and then they get a nice stacktrace that points to the offending location and fix their code","date":"2013-01-14T17:59:29.230Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-01-14T17:59:34.252Z","type":"join"}
{"nick":"isaacs","message":"well, no, not necessarily","date":"2013-01-14T17:59:46.867Z","type":"message"}
{"nick":"bnoordhuis","message":"now, if you emit that error, all that contextual information is gone","date":"2013-01-14T17:59:48.702Z","type":"message"}
{"nick":"pooya","date":"2013-01-14T17:59:50.172Z","type":"join"}
{"nick":"isaacs","message":"you get exactly the same stack trace if you return the error in a cb","date":"2013-01-14T18:00:02.846Z","type":"message"}
{"nick":"isaacs","message":"rather than throw it","date":"2013-01-14T18:00:10.926Z","type":"message"}
{"nick":"bnoordhuis","message":"but you don't get the call site","date":"2013-01-14T18:00:13.556Z","type":"message"}
{"nick":"isaacs","message":"true.  butthe call site here is somewhere deep in the bowels of node.","date":"2013-01-14T18:00:26.686Z","type":"message"}
{"nick":"isaacs","message":"remember, they're not actually calling crypto.getRandombytes","date":"2013-01-14T18:00:33.606Z","type":"message"}
{"nick":"isaacs","message":"they're calling someModule.doSomeThing(reasonableLookingNumber)","date":"2013-01-14T18:00:43.016Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, and that will show up in the stacktrace as well","date":"2013-01-14T18:00:55.179Z","type":"message"}
{"nick":"isaacs","message":"right, but the call site is not that useful","date":"2013-01-14T18:01:01.936Z","type":"message"}
{"nick":"bnoordhuis","message":"of course it is","date":"2013-01-14T18:01:11.824Z","type":"message"}
{"nick":"isaacs","message":"returning the error in a callback is better, because that's where their error handling code lives.","date":"2013-01-14T18:01:12.846Z","type":"message"}
{"nick":"bnoordhuis","message":"if it happens in some module you don't control, you can at least report the bug","date":"2013-01-14T18:01:21.673Z","type":"message"}
{"nick":"isaacs","message":"in other words, yes, the callsite is valuable, but not as valuable as being able to handle the error.","date":"2013-01-14T18:01:34.695Z","type":"message"}
{"nick":"bnoordhuis","message":"strongly disagree","date":"2013-01-14T18:01:44.113Z","type":"message"}
{"nick":"isaacs","message":"really?","date":"2013-01-14T18:01:49.491Z","type":"message"}
{"nick":"bnoordhuis","message":"yes. matter of fact, that would be a breaking point for me","date":"2013-01-14T18:02:05.728Z","type":"message"}
{"nick":"isaacs","message":"it's the difference between returning a 500 error to the user vs crashing the server.","date":"2013-01-14T18:02:16.215Z","type":"message"}
{"nick":"EhevuTov","date":"2013-01-14T18:07:58.558Z","type":"join"}
{"nick":"loladiro","date":"2013-01-14T18:10:03.464Z","type":"join"}
{"nick":"hz","date":"2013-01-14T18:11:02.023Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-14T18:13:10.766Z","type":"join"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-01-14T18:13:43.979Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-01-14T18:14:10.056Z","type":"join"}
{"nick":"TooTallNate","date":"2013-01-14T18:16:39.274Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-14T18:26:08.847Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-01-14T18:27:01.930Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-14T18:27:03.587Z","type":"quit"}
{"nick":"TheJH","reason":"Read error: No route to host","date":"2013-01-14T18:27:24.806Z","type":"quit"}
{"nick":"TheJH","date":"2013-01-14T18:27:55.990Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 252 seconds","date":"2013-01-14T18:30:29.191Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-14T18:35:28.916Z","type":"join"}
{"nick":"sgallagh","date":"2013-01-14T18:47:11.062Z","type":"join"}
{"nick":"TheJH","reason":"Ping timeout: 248 seconds","date":"2013-01-14T18:48:35.894Z","type":"quit"}
{"nick":"paddybyers","date":"2013-01-14T18:50:34.495Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-14T18:57:39.860Z","type":"quit"}
{"nick":"loladiro","date":"2013-01-14T18:58:04.878Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-14T19:00:46.527Z","type":"quit"}
{"nick":"sblom","date":"2013-01-14T19:00:54.396Z","type":"join"}
{"nick":"sblom","reason":"Client Quit","date":"2013-01-14T19:00:57.850Z","type":"quit"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-01-14T19:02:42.915Z","type":"quit"}
{"nick":"loladiro","date":"2013-01-14T19:03:15.455Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-01-14T19:03:15.585Z","type":"quit"}
{"nick":"loladiro","date":"2013-01-14T19:08:00.791Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-01-14T19:10:06.040Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-14T19:12:46.775Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-14T19:13:22.410Z","type":"join"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-01-14T19:13:58.451Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-14T19:14:27.909Z","type":"join"}
{"nick":"TheJH","date":"2013-01-14T19:15:56.619Z","type":"join"}
{"nick":"brson","date":"2013-01-14T19:17:33.409Z","type":"join"}
{"nick":"roxlu","date":"2013-01-14T19:19:13.530Z","type":"join"}
{"nick":"roxlu","message":"hi","date":"2013-01-14T19:19:22.625Z","type":"message"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2013-01-14T19:21:36.516Z","type":"quit"}
{"nick":"lohkey","date":"2013-01-14T19:22:28.356Z","type":"join"}
{"nick":"indutny","message":"hoho","date":"2013-01-14T19:36:22.036Z","type":"message"}
{"nick":"roxlu","message":"everything good in libuv land?","date":"2013-01-14T19:36:37.559Z","type":"message"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2013-01-14T19:36:59.939Z","type":"quit"}
{"nick":"roxlu","message":"I was hoping someone /win 5","date":"2013-01-14T19:42:20.485Z","type":"message"}
{"nick":"paddybyers","reason":"Ping timeout: 252 seconds","date":"2013-01-14T19:42:36.486Z","type":"quit"}
{"nick":"roxlu","message":"hehe well. .. not /win 5 :) ","date":"2013-01-14T19:42:37.703Z","type":"message"}
{"nick":"roxlu","message":"but, I was hoping someone in here could give me some advise on a threaded related subject. I'm writing a video encoder which has two related functions: addVideoFrame(void* data, size_t size) and addAudioFrame(void* data, size_t size);, in these function I copy the data to a std::vector (wrapped around a \"Packet\" object). In my threaded function I'm checking if there are new audio/video packets that I can process.. now I'm wondering what a good a","date":"2013-01-14T19:44:41.945Z","type":"message"}
{"nick":"tjfontaine","message":"your client cut off at: \"what a good a\"","date":"2013-01-14T19:45:01.504Z","type":"message"}
{"nick":"roxlu","message":"oh","date":"2013-01-14T19:45:14.273Z","type":"message"}
{"nick":"roxlu","message":"now I'm wondering what a good approach is so the reading/writing from this queue of packets is not stalling my main thread ?","date":"2013-01-14T19:45:40.940Z","type":"message"}
{"nick":"indutny","message":"isaacs: yt?","date":"2013-01-14T19:47:01.684Z","type":"message"}
{"nick":"loladiro","date":"2013-01-14T19:47:38.149Z","type":"join"}
{"nick":"isaacs","message":"heading out to yoga practice.  leave a message :)","date":"2013-01-14T19:49:57.792Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2013-01-14T19:50:08.800Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-14T19:50:11.047Z","type":"message"}
{"nick":"indutny","message":"later then :)","date":"2013-01-14T19:50:13.464Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: yt?","date":"2013-01-14T19:50:20.110Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: in a meeting","date":"2013-01-14T19:50:26.060Z","type":"message"}
{"nick":"CoverSlide","message":"aww","date":"2013-01-14T19:50:57.347Z","type":"message"}
{"nick":"CoverSlide","message":"noone to play with","date":"2013-01-14T19:51:00.150Z","type":"message"}
{"nick":"roxlu","message":"indutny:  you miht have some advise on this threading thing maybe ? ","date":"2013-01-14T19:51:10.864Z","type":"message"}
{"nick":"roxlu","message":"yeah I'm here :) ","date":"2013-01-14T19:51:15.409Z","type":"message"}
{"nick":"indutny","message":"roxlu: what sort of advice you want?","date":"2013-01-14T19:51:34.002Z","type":"message"}
{"nick":"roxlu","message":"what a good approach is to handle this threading ","date":"2013-01-14T19:51:56.932Z","type":"message"}
{"nick":"indutny","message":"what threading","date":"2013-01-14T19:52:17.471Z","type":"message"}
{"nick":"indutny","message":"anyway","date":"2013-01-14T19:52:22.243Z","type":"message"}
{"nick":"indutny","message":"the best approach to handle threading is to avoid it","date":"2013-01-14T19:52:28.969Z","type":"message"}
{"nick":"roxlu","message":"indutny: did you see my post ^^","date":"2013-01-14T19:52:32.171Z","type":"message"}
{"nick":"roxlu","message":"haha","date":"2013-01-14T19:52:32.831Z","type":"message"}
{"nick":"indutny","message":"nope, I've missed it","date":"2013-01-14T19:52:38.822Z","type":"message"}
{"nick":"indutny","message":"thanks to ircrelay","date":"2013-01-14T19:52:41.579Z","type":"message"}
{"nick":"roxlu","message":"ah, I'll repaste","date":"2013-01-14T19:52:49.422Z","type":"message"}
{"nick":"roxlu","message":"indutny: pasting here, because copy/paste adds some tabs: https://gist.github.com/72d5b40950610fac1bbd ","date":"2013-01-14T19:53:20.361Z","type":"message"}
{"nick":"indutny","message":"well, I'd a short look at it","date":"2013-01-14T19:54:28.675Z","type":"message"}
{"nick":"indutny","message":"but I think you should just use two threads and semaphore","date":"2013-01-14T19:54:36.843Z","type":"message"}
{"nick":"roxlu","message":"ok, how do you suggest these threads/semaphore work together? (<-- that's the thing I'm not experienced with)","date":"2013-01-14T19:56:05.899Z","type":"message"}
{"nick":"indutny","message":"semaphore?","date":"2013-01-14T20:00:06.780Z","type":"message"}
{"nick":"roxlu","message":"20:53 <@indutny> but I think you should just use two threads and semaphore ","date":"2013-01-14T20:01:20.446Z","type":"message"}
{"nick":"indutny","message":"no","date":"2013-01-14T20:01:58.081Z","type":"message"}
{"nick":"indutny","message":"I mean just use semaphore","date":"2013-01-14T20:02:02.669Z","type":"message"}
{"nick":"indutny","message":"do you know how it works?","date":"2013-01-14T20:02:09.280Z","type":"message"}
{"nick":"roxlu","message":"indutny: isn't a semaphore like a mutex, but then very lightweight?","date":"2013-01-14T20:02:25.823Z","type":"message"}
{"nick":"indutny","message":"not, really","date":"2013-01-14T20:02:31.905Z","type":"message"}
{"nick":"roxlu","message":"ahh","date":"2013-01-14T20:02:35.171Z","type":"message"}
{"nick":"indutny","message":"well, it can be implemented with mutexes","date":"2013-01-14T20:02:38.649Z","type":"message"}
{"nick":"indutny","message":"but that's not the same thing","date":"2013-01-14T20:02:42.245Z","type":"message"}
{"nick":"indutny","message":"so","date":"2013-01-14T20:02:45.567Z","type":"message"}
{"nick":"indutny","message":"semaphore+shared queue+2 workers","date":"2013-01-14T20:02:51.349Z","type":"message"}
{"nick":"indutny","message":"1 worker - producer","date":"2013-01-14T20:02:56.350Z","type":"message"}
{"nick":"indutny","message":"1 worker - consumer","date":"2013-01-14T20:02:58.846Z","type":"message"}
{"nick":"indutny","message":"producer places item in queue and triggers semaphore","date":"2013-01-14T20:03:09.287Z","type":"message"}
{"nick":"indutny","message":"consumer waits for semaphore signal and takes item from the queue and process it","date":"2013-01-14T20:03:25.289Z","type":"message"}
{"nick":"roxlu","message":"ah! thanks","date":"2013-01-14T20:03:38.202Z","type":"message"}
{"nick":"indutny","message":"np","date":"2013-01-14T20:03:58.508Z","type":"message"}
{"nick":"indutny","message":"you're welcome","date":"2013-01-14T20:03:59.805Z","type":"message"}
{"nick":"roxlu","message":"I saw libuv has thread support.. can I use that to handle cross platform semaphores?","date":"2013-01-14T20:04:00.861Z","type":"message"}
{"nick":"indutny","message":"btw, there're a good book around here","date":"2013-01-14T20:04:06.848Z","type":"message"}
{"nick":"roxlu","message":"oh great, I'm really looking for a good book on this","date":"2013-01-14T20:04:22.022Z","type":"message"}
{"nick":"indutny","message":"http://www.amazon.com/The-Multiprocessor-Programming-Maurice-Herlihy/dp/0123705916/ref=sr_1_3?ie=UTF8&qid=1358193860&sr=8-3&keywords=multithread","date":"2013-01-14T20:04:26.714Z","type":"message"}
{"nick":"roxlu","message":"indutny: is that book also practical? ","date":"2013-01-14T20:04:40.465Z","type":"message"}
{"nick":"roxlu","message":"I mean does it describe APIs ? ","date":"2013-01-14T20:04:56.606Z","type":"message"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-01-14T20:05:30.469Z","type":"quit"}
{"nick":"indutny","message":"no, it's theoretical","date":"2013-01-14T20:05:48.584Z","type":"message"}
{"nick":"jmar777","date":"2013-01-14T20:05:52.873Z","type":"join"}
{"nick":"indutny","message":"if you want APIs","date":"2013-01-14T20:05:57.555Z","type":"message"}
{"nick":"indutny","message":"just search `man pthread` in google","date":"2013-01-14T20:06:03.743Z","type":"message"}
{"nick":"roxlu","message":":)","date":"2013-01-14T20:06:08.189Z","type":"message"}
{"nick":"indutny","message":"ok, time to wash some dishes","date":"2013-01-14T20:06:53.762Z","type":"message"}
{"nick":"roxlu","message":"hehe ok again thanks a lot! ","date":"2013-01-14T20:07:02.470Z","type":"message"}
{"nick":"lohkey","date":"2013-01-14T20:08:11.702Z","type":"join"}
{"nick":"indutny","message":"you're welcome","date":"2013-01-14T20:09:07.252Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-14T20:09:17.532Z","type":"quit"}
{"nick":"indutny","message":"ryah: ohai man","date":"2013-01-14T20:09:32.910Z","type":"message"}
{"nick":"indutny","message":"how are you doing?","date":"2013-01-14T20:09:35.454Z","type":"message"}
{"nick":"jmar777","date":"2013-01-14T20:09:52.791Z","type":"join"}
{"nick":"indutny","message":"ryah: are you going to visit nodeconf this year?","date":"2013-01-14T20:13:08.552Z","type":"message"}
{"nick":"CoverSlide","message":"he's alive!","date":"2013-01-14T20:13:22.834Z","type":"message"}
{"nick":"jmar777","reason":"Ping timeout: 260 seconds","date":"2013-01-14T20:14:14.633Z","type":"quit"}
{"nick":"indutny","message":"CoverSlide: calm down, kiddo","date":"2013-01-14T20:15:09.004Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-01-14T20:15:10.323Z","type":"message"}
{"nick":"`3rdEden","reason":"Quit: I shall swap.. devices","date":"2013-01-14T20:25:59.913Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-14T20:29:44.075Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-14T20:34:17.349Z","type":"join"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2013-01-14T20:42:38.701Z","type":"quit"}
{"nick":"lohkey","date":"2013-01-14T20:42:47.004Z","type":"join"}
{"nick":"hz","date":"2013-01-14T20:46:31.432Z","type":"join"}
{"nick":"ryah","message":"indutny: no","date":"2013-01-14T20:55:51.003Z","type":"message"}
{"nick":"bnoordhuis","message":"all the cool kids don't go to nodeconf","date":"2013-01-14T20:56:41.099Z","type":"message"}
{"nick":"piscisaureus_","message":"I am going to nodeconf","date":"2013-01-14T21:00:38.414Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: summer camp?","date":"2013-01-14T21:03:19.150Z","type":"message"}
{"nick":"`3rdEden","date":"2013-01-14T21:04:33.034Z","type":"join"}
{"nick":"piscisaureus_","message":"TooTallNate: the thing @ end of june","date":"2013-01-14T21:06:28.255Z","type":"message"}
{"nick":"indutny","message":"ryah: oh, ok","date":"2013-01-14T21:06:42.729Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: you're either not cool","date":"2013-01-14T21:06:56.952Z","type":"message"}
{"nick":"indutny","message":"or not kid","date":"2013-01-14T21:06:58.754Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: ya, that's the one","date":"2013-01-14T21:06:59.549Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: https://github.com/strongloop/node/commit/5c94ae11a20a5192e73239e50e5edbbb33e1dc80 <-- Made memory usage a lot more palatable for that customer of ours that shall not be named. Objections to landing it?","date":"2013-01-14T21:07:00.674Z","type":"message"}
{"nick":"indutny","message":"micro-optimization","date":"2013-01-14T21:07:41.471Z","type":"message"}
{"nick":"indutny","message":"nice","date":"2013-01-14T21:07:42.654Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: lgtm","date":"2013-01-14T21:07:47.164Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis does that thing with not stoping a stream in case of error happen also for udp? (though I don't know what error taht could be)","date":"2013-01-14T21:10:05.721Z","type":"message"}
{"nick":"lohkey","reason":"Ping timeout: 248 seconds","date":"2013-01-14T21:13:08.392Z","type":"quit"}
{"nick":"lohkey","date":"2013-01-14T21:13:16.400Z","type":"join"}
{"nick":"lohkey","reason":"Client Quit","date":"2013-01-14T21:14:34.112Z","type":"quit"}
{"nick":"piscisaureus_","message":"indutny: since you are a committer too, I'll happily take your thumbsup :-)","date":"2013-01-14T21:18:36.182Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Bert Belder\u000f \u00037master\u000f * \u0002e501ce4\u0002 : buffer: zero-length buffers shouldn't be slab-backed - http://git.io/zYZf3Q","date":"2013-01-14T21:19:41.173Z","type":"message"}
{"nick":"indutny","message":"ahhaha","date":"2013-01-14T21:20:19.100Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-14T21:20:21.000Z","type":"message"}
{"nick":"indutny","message":"it really loooks gooood to me","date":"2013-01-14T21:20:25.375Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Bert Belder\u000f \u00037v0.8\u000f * \u0002a6b8f63\u0002 : buffer: zero-length buffers shouldn't be slab-backed - http://git.io/Sn3LDQ","date":"2013-01-14T21:20:36.207Z","type":"message"}
{"nick":"piscisaureus_","message":"it makes a lot of difference with http-proxy","date":"2013-01-14T21:20:39.240Z","type":"message"}
{"nick":"piscisaureus_","message":"since 0-length buffers happen a lot there","date":"2013-01-14T21:20:45.996Z","type":"message"}
{"nick":"hz","date":"2013-01-14T21:21:45.856Z","type":"quit"}
{"nick":"tjfontaine","message":"ya it makes sense","date":"2013-01-14T21:21:59.379Z","type":"message"}
{"nick":"indutny","message":"good","date":"2013-01-14T21:22:15.944Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_ so you boy going to visit SF this year","date":"2013-01-14T21:22:31.852Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-14T21:22:45.528Z","type":"quit"}
{"nick":"piscisaureus_","message":"indutny: yes, I think somewhere in february even","date":"2013-01-14T21:22:49.580Z","type":"message"}
{"nick":"jmar777","date":"2013-01-14T21:23:18.196Z","type":"join"}
{"nick":"jmar777","reason":"Ping timeout: 256 seconds","date":"2013-01-14T21:27:40.084Z","type":"quit"}
{"nick":"TheJH","reason":"Ping timeout: 255 seconds","date":"2013-01-14T21:27:47.416Z","type":"quit"}
{"nick":"trevnorris","message":"piscisaureus_: was talking to a friend at apple about the memory fragmentation problem with pooled buffers and he gave me the idea of implementing simple memory compaction.","date":"2013-01-14T21:29:39.198Z","type":"message"}
{"nick":"paddybyers","date":"2013-01-14T21:30:13.329Z","type":"join"}
{"nick":"trevnorris","message":"couldn't we just piggy back on v8's gc and run a quick analysis of whether a pool should be compacted and shrunk?","date":"2013-01-14T21:30:30.752Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: possibly. How?","date":"2013-01-14T21:31:48.862Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: what calls the buffer class destructor?","date":"2013-01-14T21:32:52.540Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: there is no destructor","date":"2013-01-14T21:33:07.403Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: javascript has no destructors.","date":"2013-01-14T21:33:15.742Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: hm? I mean in lib/node_buffer.cc","date":"2013-01-14T21:33:31.264Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: only SlowBuffers have \"weak callbacks\" which is exactly what makes them expensive.","date":"2013-01-14T21:33:41.488Z","type":"message"}
{"nick":"piscisaureus_","message":"and that's why we have only few of them","date":"2013-01-14T21:33:48.637Z","type":"message"}
{"nick":"trevnorris","message":"isn't every buffer pool a slow buffer?","date":"2013-01-14T21:34:55.358Z","type":"message"}
{"nick":"trevnorris","message":"from which fast buffers are created?","date":"2013-01-14T21:35:08.381Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: yes, indeed","date":"2013-01-14T21:35:12.262Z","type":"message"}
{"nick":"trevnorris","message":"ok. so I assume v8 frees each fast buffer when it falls out of scope, right?","date":"2013-01-14T21:35:49.140Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: well -","date":"2013-01-14T21:36:49.833Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: and I assumed that it was cleared by calling the Buffer class destructor that's in lib/node_buffer.cc#194","date":"2013-01-14T21:37:08.008Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: when it is unreachable. So it is both out of scope *and* no longer referenced by the \"parent\" property of normal buffers","date":"2013-01-14T21:37:18.544Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: the destructor is called here: https://github.com/joyent/node/blob/e501ce4b218fd462d20b45ba817f6232219e6fa2/src/node_object_wrap.h#L121","date":"2013-01-14T21:37:33.731Z","type":"message"}
{"nick":"trevnorris","message":"so what's Buffer::~Buffer for?","date":"2013-01-14T21:38:07.018Z","type":"message"}
{"nick":"trevnorris","message":"I don't see it getting used anywhere.","date":"2013-01-14T21:38:12.647Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: see my previous comment.","date":"2013-01-14T21:38:33.116Z","type":"message"}
{"nick":"piscisaureus_","message":"that is calling the destructor","date":"2013-01-14T21:38:50.872Z","type":"message"}
{"nick":"paddybyers","reason":"Ping timeout: 276 seconds","date":"2013-01-14T21:39:09.466Z","type":"quit"}
{"nick":"trevnorris","message":"piscisaureus_: damn my newb-ness at C. ok.","date":"2013-01-14T21:39:29.203Z","type":"message"}
{"nick":"piscisaureus_","message":"C++ even :=)","date":"2013-01-14T21:39:48.453Z","type":"message"}
{"nick":"kohai","message":"C has 26 beers","date":"2013-01-14T21:39:49.548Z","type":"message"}
{"nick":"CoverSlide","message":"desctructors are more a C++ thing","date":"2013-01-14T21:39:51.528Z","type":"message"}
{"nick":"trevnorris","message":"heh, bad habit of using C and C++ interchangeably.","date":"2013-01-14T21:40:10.826Z","type":"message"}
{"nick":"piscisaureus_","message":"I will no longer answer questions unless you guys pay me $ 300","date":"2013-01-14T21:40:28.534Z","type":"message"}
{"nick":"piscisaureus_","message":"OR watch this video in full, with sound on: https://github.com/joyent/node/blob/e501ce4b218fd462d20b45ba817f6232219e6fa2/src/node_object_wrap.h#L121","date":"2013-01-14T21:40:45.623Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-01-14T21:41:00.918Z","type":"message"}
{"nick":"CoverSlide","message":"that's an awesome video","date":"2013-01-14T21:41:01.190Z","type":"message"}
{"nick":"piscisaureus_","message":"AH SHIT","date":"2013-01-14T21:41:11.065Z","type":"message"}
{"nick":"CoverSlide","message":"i love the delete obj; part","date":"2013-01-14T21:41:12.998Z","type":"message"}
{"nick":"piscisaureus_","message":"www.youtube.com/watch?feature=player_embedded&v=v7qTHbOEiDY#!c <-- That","date":"2013-01-14T21:41:14.653Z","type":"message"}
{"nick":"CoverSlide","message":"oh yeah that was amazing","date":"2013-01-14T21:41:33.518Z","type":"message"}
{"nick":"piscisaureus_","message":"It is not allowed to minimize, close eyes or cringe","date":"2013-01-14T21:42:03.533Z","type":"message"}
{"nick":"piscisaureus_","message":"and your toes gotta be relaxed","date":"2013-01-14T21:42:25.145Z","type":"message"}
{"nick":"CoverSlide","message":"\"I have a sweet job an a hot girlfriend\"","date":"2013-01-14T21:43:11.858Z","type":"message"}
{"nick":"tjfontaine","message":"and by hot, I mean ...","date":"2013-01-14T21:43:34.564Z","type":"message"}
{"nick":"CoverSlide","message":"she's baking in the oven right now","date":"2013-01-14T21:43:45.983Z","type":"message"}
{"nick":"CoverSlide","message":"apple flavor","date":"2013-01-14T21:43:51.993Z","type":"message"}
{"nick":"trevnorris","message":".... almost didn't make it through the first 20 sec.","date":"2013-01-14T21:44:44.166Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: I will mail you my routing info then :-)","date":"2013-01-14T21:47:34.502Z","type":"message"}
{"nick":"trevnorris","message":"heh! said I \"almost\" didn't make it through. (though can't vouch for my toes)","date":"2013-01-14T21:48:33.839Z","type":"message"}
{"nick":"paddybyers","date":"2013-01-14T21:48:47.944Z","type":"join"}
{"nick":"sgallagh","reason":"Ping timeout: 248 seconds","date":"2013-01-14T21:53:39.920Z","type":"quit"}
{"nick":"trevnorris","message":"piscisaureus_: as a side, since node only uses one context couldn't it be cached like node_isolate?","date":"2013-01-14T21:54:43.363Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: it is possible to use separate contexts in node.","date":"2013-01-14T21:55:14.502Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok.","date":"2013-01-14T21:55:23.827Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: it's even possible to load every module into a separate context","date":"2013-01-14T21:55:25.103Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-14T21:57:35.429Z","type":"quit"}
{"nick":"indutny","message":"back","date":"2013-01-14T21:59:44.231Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_ wanna ask me something?","date":"2013-01-14T22:00:03.384Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: will you marry me?","date":"2013-01-14T22:00:17.974Z","type":"message"}
{"nick":"indutny","message":"300 $","date":"2013-01-14T22:00:22.823Z","type":"message"}
{"nick":"indutny","message":"for answer","date":"2013-01-14T22:00:25.864Z","type":"message"}
{"nick":"piscisaureus_","message":"oh nvm then","date":"2013-01-14T22:00:37.197Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: cool. ok the short of my idea is that I assumed v8's gc told node when a buffer could be cleaned up.","date":"2013-01-14T22:00:38.977Z","type":"message"}
{"nick":"tjfontaine","message":"sounds cheaper than most wives","date":"2013-01-14T22:00:40.962Z","type":"message"}
{"nick":"indutny","message":"trevnorris: you mean flattening slices?","date":"2013-01-14T22:01:08.502Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: well, v8 tells node when a slowbuffer is to be cleaned up","date":"2013-01-14T22:01:08.916Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: but that is only fine because there are few of these","date":"2013-01-14T22:01:36.858Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: but then v8 must be keeping track of all the fast buffer references to the slowbuffer, right?","date":"2013-01-14T22:02:08.612Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: yuop","date":"2013-01-14T22:02:25.419Z","type":"message"}
{"nick":"piscisaureus_","message":"*yup","date":"2013-01-14T22:02:28.377Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: so is there a way to have v8 tell node when a faster buffer is no longer used?","date":"2013-01-14T22:02:54.916Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: no.","date":"2013-01-14T22:03:05.976Z","type":"message"}
{"nick":"piscisaureus_","message":"well you could maybe think of a scheme with weak maps","date":"2013-01-14T22:03:27.333Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: ok. basically I was thinking to detect when a fast buffer was cleaned up and then if the parent was, say, 50% unused then it would compact the parent slowbuffer and free the remaining memory.","date":"2013-01-14T22:05:33.755Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: I think a better strategy would be to disable slabs, write a benchmark and profile with gprof or valgrind to see what the hot paths are","date":"2013-01-14T22:06:55.298Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: then see if there are any optimization options","date":"2013-01-14T22:07:14.240Z","type":"message"}
{"nick":"indutny","message":"trevnorris: there is one thing that you can check","date":"2013-01-14T22:07:49.405Z","type":"message"}
{"nick":"indutny","message":"trevnorris: v8 is using generational GC","date":"2013-01-14T22:07:56.817Z","type":"message"}
{"nick":"indutny","message":"so, when buffer, is transferred to Old space","date":"2013-01-14T22:08:04.744Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: this one is more for memory conservation. there is an edge case where memory can leak through unused pools.","date":"2013-01-14T22:08:05.947Z","type":"message"}
{"nick":"indutny","message":"it's some long-living thing","date":"2013-01-14T22:08:12.421Z","type":"message"}
{"nick":"indutny","message":"and probably worth transforming it into slowbuffer","date":"2013-01-14T22:08:26.689Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: the problem would not exist if we didn't have slabs","date":"2013-01-14T22:08:35.397Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: so try to figure out why SlowBuffers are slow :-)","date":"2013-01-14T22:08:46.668Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: so what do you think about https://github.com/joyent/node/pull/4595","date":"2013-01-14T22:09:24.045Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: isaacs: ^","date":"2013-01-14T22:09:31.110Z","type":"message"}
{"nick":"indutny","message":"TooTallNate: ^","date":"2013-01-14T22:09:33.537Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: will work on it. waiting for 4504 to be accepted, then have another to make the remaining read/write methods faster.","date":"2013-01-14T22:10:20.920Z","type":"message"}
{"nick":"indutny","message":"are everyone ignoring me?","date":"2013-01-14T22:11:08.075Z","type":"message"}
{"nick":"indutny","message":"wtf","date":"2013-01-14T22:11:09.765Z","type":"message"}
{"nick":"piscisaureus_","message":"4505 is v8 upgrade right? Didn't that land?","date":"2013-01-14T22:11:10.059Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: and after that I'm going to work on a solution for a v8 deopt when calling a method on \"parent\" from a buffer that \"target requires context change\".","date":"2013-01-14T22:11:15.796Z","type":"message"}
{"nick":"TooTallNate","message":"indutny: reading your code","date":"2013-01-14T22:11:25.825Z","type":"message"}
{"nick":"indutny","message":"trevnorris: I landed it","date":"2013-01-14T22:11:25.952Z","type":"message"}
{"nick":"trevnorris","message":"which looses us about 20% performance.","date":"2013-01-14T22:11:34.739Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: yes, sorry. Marry me.","date":"2013-01-14T22:11:51.619Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: doesn't that just lead to more ignoring?","date":"2013-01-14T22:12:11.493Z","type":"message"}
{"nick":"trevnorris","message":"indutny: hu?","date":"2013-01-14T22:12:27.349Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: ok","date":"2013-01-14T22:12:33.341Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: ok, nice","date":"2013-01-14T22:12:39.345Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: will I become AMS citizen?","date":"2013-01-14T22:12:40.469Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-01-14T22:12:44.204Z","type":"message"}
{"nick":"indutny","message":"Netherlands","date":"2013-01-14T22:12:52.108Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: yes, if you can prove that you know me well :-)","date":"2013-01-14T22:12:57.237Z","type":"message"}
{"nick":"indutny","message":"huh?","date":"2013-01-14T22:13:02.667Z","type":"message"}
{"nick":"piscisaureus_","message":"and truly love me","date":"2013-01-14T22:13:05.447Z","type":"message"}
{"nick":"indutny","message":"what does it mean","date":"2013-01-14T22:13:06.030Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2013-01-14T22:13:08.281Z","type":"message"}
{"nick":"indutny","message":"shit","date":"2013-01-14T22:13:10.469Z","type":"message"}
{"nick":"indutny","message":"man","date":"2013-01-14T22:13:15.454Z","type":"message"}
{"nick":"indutny","message":"erm","date":"2013-01-14T22:13:17.671Z","type":"message"}
{"nick":"indutny","message":"you're man","date":"2013-01-14T22:13:19.121Z","type":"message"}
{"nick":"indutny","message":"no way","date":"2013-01-14T22:13:23.119Z","type":"message"}
{"nick":"piscisaureus_","message":"otherwise immigration will assume that you're just doing it for your visa","date":"2013-01-14T22:13:32.873Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: this is amsterdam, man+man is not a problem here","date":"2013-01-14T22:13:41.142Z","type":"message"}
{"nick":"piscisaureus_","message":"this is not russia","date":"2013-01-14T22:13:44.846Z","type":"message"}
{"nick":"trevnorris","message":"indutny: think you read the number wrong. it's 4504, not 4505.","date":"2013-01-14T22:13:47.117Z","type":"message"}
{"nick":"indutny","message":"aah","date":"2013-01-14T22:13:58.501Z","type":"message"}
{"nick":"indutny","message":"sorry","date":"2013-01-14T22:14:01.814Z","type":"message"}
{"nick":"indutny","message":"right","date":"2013-01-14T22:14:15.031Z","type":"message"}
{"nick":"trevnorris","message":"it makes Buffer.writeFloat|Double about 3x's faster","date":"2013-01-14T22:14:19.092Z","type":"message"}
{"nick":"piscisaureus_","message":"ah yeah, I think ben is reviewing that?","date":"2013-01-14T22:14:29.595Z","type":"message"}
{"nick":"trevnorris","message":"ironically they're also faster than all the other write methods when using assert.","date":"2013-01-14T22:14:35.153Z","type":"message"}
{"nick":"trevnorris","message":"have a patch ready for that too.","date":"2013-01-14T22:14:42.744Z","type":"message"}
{"nick":"rendar","date":"2013-01-14T22:14:49.450Z","type":"quit"}
{"nick":"indutny","message":"nice","date":"2013-01-14T22:15:05.874Z","type":"message"}
{"nick":"piscisaureus_","message":"Oh crap I forgot I have to get up at 7 tomorrow","date":"2013-01-14T22:16:11.308Z","type":"message"}
{"nick":"piscisaureus_","message":":-(","date":"2013-01-14T22:16:12.603Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: my 2 year old says that's weak sauce. ;-)","date":"2013-01-14T22:18:05.245Z","type":"message"}
{"nick":"indutny","message":"oooh","date":"2013-01-14T22:19:17.065Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: which reminds me that it's 2 am right now","date":"2013-01-14T22:19:23.642Z","type":"message"}
{"nick":"trevnorris","message":"indutny: how'd you know that about v8's gc? swear I haven't been able to find ample documentation on how the internals work.","date":"2013-01-14T22:21:23.847Z","type":"message"}
{"nick":"indutny","message":"I just know it","date":"2013-01-14T22:21:32.958Z","type":"message"}
{"nick":"indutny","message":"because otherwise it will be slow","date":"2013-01-14T22:21:37.100Z","type":"message"}
{"nick":"indutny","message":"also","date":"2013-01-14T22:21:38.884Z","type":"message"}
{"nick":"indutny","message":"you can search for string OldSpace in source","date":"2013-01-14T22:21:44.494Z","type":"message"}
{"nick":"indutny","message":"also I implemented my own generational GC once","date":"2013-01-14T22:22:13.293Z","type":"message"}
{"nick":"trevnorris","message":"indutny: heh, wow. I've literally been learning c++ to make these buffer improvements. real jump in the deep end move.","date":"2013-01-14T22:22:28.574Z","type":"message"}
{"nick":"indutny","message":"it's not that deep","date":"2013-01-14T22:22:40.466Z","type":"message"}
{"nick":"indutny","message":"imagine two heaps","date":"2013-01-14T22:22:52.185Z","type":"message"}
{"nick":"indutny","message":"one with old objects and one with new objects","date":"2013-01-14T22:22:58.278Z","type":"message"}
{"nick":"indutny","message":"old objects tend to live much longer than young ones","date":"2013-01-14T22:23:09.976Z","type":"message"}
{"nick":"indutny","message":"and therefore they shouldn't be cleaned to often","date":"2013-01-14T22:23:17.702Z","type":"message"}
{"nick":"indutny","message":"so v8 performs GC and increments generational bits for each object","date":"2013-01-14T22:23:34.785Z","type":"message"}
{"nick":"indutny","message":"once it reaches some specific value it moves object from NewSpace to OldSpace","date":"2013-01-14T22:23:51.098Z","type":"message"}
{"nick":"trevnorris","message":"ah, interesting.","date":"2013-01-14T22:24:20.066Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: lgtm","date":"2013-01-14T22:24:34.747Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: oh, you're back","date":"2013-01-14T22:24:54.266Z","type":"message"}
{"nick":"trevnorris","message":"my hope is that if the memory can be handled better than node can allocate larger pools (which I think would improve overall performance)","date":"2013-01-14T22:25:03.155Z","type":"message"}
{"nick":"indutny","message":"erm, not really","date":"2013-01-14T22:26:30.036Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: no, udp sockets are safe","date":"2013-01-14T22:26:34.667Z","type":"message"}
{"nick":"indutny","message":"I think it's faster up to specific limit","date":"2013-01-14T22:26:36.952Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis thanks!","date":"2013-01-14T22:26:45.366Z","type":"message"}
{"nick":"trevnorris","message":"and you think node's already allocating at that limit?","date":"2013-01-14T22:27:08.264Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-01-14T22:27:24.255Z","type":"message"}
{"nick":"indutny","message":"you should take in account startup time and everything","date":"2013-01-14T22:27:32.006Z","type":"message"}
{"nick":"indutny","message":"and also yeah","date":"2013-01-14T22:27:43.732Z","type":"message"}
{"nick":"indutny","message":"I think current size is pretty good","date":"2013-01-14T22:27:50.699Z","type":"message"}
{"nick":"qmx","new_nick":"qmx|afk","date":"2013-01-14T22:27:56.928Z","type":"nick"}
{"nick":"indutny","message":"but benchmarking it and measuring accurately may point that it isn't","date":"2013-01-14T22:28:13.315Z","type":"message"}
{"nick":"trevnorris","message":"ok, that's cool. two main things I want to accomplish are getting around the edge case in GH-4525, and","date":"2013-01-14T22:28:59.943Z","type":"message"}
{"nick":"trevnorris","message":"also I want to remove the need for calling methods on \"this.parent\". for lightweight calls it craps on performance.","date":"2013-01-14T22:29:05.142Z","type":"message"}
{"nick":"indutny","message":"kewl","date":"2013-01-14T22:29:47.431Z","type":"message"}
{"nick":"indutny","message":"what's happening when calling methods on \"this.parent\"","date":"2013-01-14T22:30:00.581Z","type":"message"}
{"nick":"indutny","message":"does it deoptimize function?","date":"2013-01-14T22:30:04.164Z","type":"message"}
{"nick":"indutny","message":"isn't this.parent monomorphic?","date":"2013-01-14T22:30:12.732Z","type":"message"}
{"nick":"trevnorris","message":"indutny: but also it has to do a context change. have benchmarks to show that.","date":"2013-01-14T22:30:22.715Z","type":"message"}
{"nick":"indutny","message":"context change...","date":"2013-01-14T22:30:37.362Z","type":"message"}
{"nick":"indutny","message":"why","date":"2013-01-14T22:30:41.507Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2013-01-14T22:30:51.038Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-01-14T22:30:54.419Z","type":"message"}
{"nick":"indutny","message":"I see the point","date":"2013-01-14T22:30:57.344Z","type":"message"}
{"nick":"trevnorris","message":"yeah. my new writeFloat methods are 20% faster when called directly to this.parent.","date":"2013-01-14T22:32:12.876Z","type":"message"}
{"nick":"indutny","message":"cool","date":"2013-01-14T22:32:58.529Z","type":"message"}
{"nick":"indutny","message":"brb","date":"2013-01-14T22:33:01.092Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 272 seconds","date":"2013-01-14T22:45:24.734Z","type":"quit"}
{"nick":"isaacs","message":"Can someone review this? https://github.com/isaacs/node/commit/25a8d3d","date":"2013-01-14T22:45:39.615Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_, TooTallNate, trevnorris ^","date":"2013-01-14T22:45:52.475Z","type":"message"}
{"nick":"isaacs","message":"indutny oh, you're here, too, you can do it if you like","date":"2013-01-14T22:46:02.225Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-01-14T22:46:04.080Z","type":"quit"}
{"nick":"isaacs","message":"indutny: i typed idn<tab> and it diidn't complete, so i figured you were away :)","date":"2013-01-14T22:46:26.685Z","type":"message"}
{"nick":"isaacs","message":"typos make me a bad team player >.<","date":"2013-01-14T22:46:46.074Z","type":"message"}
{"nick":"EhevuTov","date":"2013-01-14T22:46:47.568Z","type":"join"}
{"nick":"mmalecki[fly]","new_nick":"mmalecki","date":"2013-01-14T22:49:33.668Z","type":"nick"}
{"nick":"`3rdEden","date":"2013-01-14T22:50:50.327Z","type":"quit"}
{"nick":"indutny","message":"isaacs: sure","date":"2013-01-14T22:53:43.313Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: is there ever a case where n could be a negative (other than if a user screwed up)?","date":"2013-01-14T22:53:47.479Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: no, but i believe that negative numbers are treated like zero anyway","date":"2013-01-14T22:54:11.280Z","type":"message"}
{"nick":"indutny","message":"isaacs: can you add commit body?","date":"2013-01-14T22:54:13.132Z","type":"message"}
{"nick":"indutny","message":"I mean it needs more explanation","date":"2013-01-14T22:54:18.963Z","type":"message"}
{"nick":"isaacs","message":"indutny: sure thing","date":"2013-01-14T22:54:40.529Z","type":"message"}
{"nick":"indutny","message":"otherwise lgtm","date":"2013-01-14T22:55:27.419Z","type":"message"}
{"nick":"indutny","message":"isaacs: in exchange, please review this https://github.com/joyent/node/pull/4595","date":"2013-01-14T22:55:38.857Z","type":"message"}
{"nick":"indutny","message":"it is mostly javascript changes","date":"2013-01-14T22:55:44.934Z","type":"message"}
{"nick":"indutny","message":"I mean 100% javascript changes","date":"2013-01-14T22:55:49.918Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: ah, missed the re-assignation.","date":"2013-01-14T22:55:55.592Z","type":"message"}
{"nick":"isaacs","message":"indutny: will do","date":"2013-01-14T22:57:47.337Z","type":"message"}
{"nick":"isaacs","message":"indutny: https://github.com/isaacs/node/commit/master","date":"2013-01-14T23:00:02.585Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-14T23:00:17.761Z","type":"message"}
{"nick":"indutny","message":"very good :)","date":"2013-01-14T23:00:25.004Z","type":"message"}
{"nick":"indutny","message":"thank you","date":"2013-01-14T23:00:35.689Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: ok, so really it should only reach that error if a user manually changes length on the readable stream.","date":"2013-01-14T23:01:00.903Z","type":"message"}
{"nick":"wolfeidau","date":"2013-01-14T23:01:01.312Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: yeah","date":"2013-01-14T23:01:54.974Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: if you are manually dicking around with foo._readableState.whatever, then you're off the reservatio, and deserve to be eaten by bears, and perhaps fire.","date":"2013-01-14T23:02:17.194Z","type":"message"}
{"nick":"trevnorris","message":"lol","date":"2013-01-14T23:02:25.488Z","type":"message"}
{"nick":"isaacs","message":"in a future incarnation, it might even be hidden behind a private symbol","date":"2013-01-14T23:02:56.074Z","type":"message"}
{"nick":"isaacs","message":"which we don't share with non-core js","date":"2013-01-14T23:03:03.233Z","type":"message"}
{"nick":"trevnorris","message":"in the comments you say \"can override either this method...\" so the user can write their own \".read\" method, correct?","date":"2013-01-14T23:05:25.852Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yeah","date":"2013-01-14T23:07:45.940Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: but i think that any time a user does that, we've failed slightly","date":"2013-01-14T23:07:54.050Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: eg with object streams (/cc Raynos)","date":"2013-01-14T23:08:12.260Z","type":"message"}
{"nick":"isaacs","message":"not that they shouldn't do that, but we should make the \"blessed\" APIs so good that they don't have to","date":"2013-01-14T23:08:31.860Z","type":"message"}
{"nick":"isaacs","message":"experience has shown that implementing streaming logic is pretty tricky actually","date":"2013-01-14T23:08:51.189Z","type":"message"}
{"nick":"isaacs","message":"indutny: I'm not understanding why we need to track:true ever","date":"2013-01-14T23:09:33.509Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-01-14T23:09:43.767Z","type":"message"}
{"nick":"indutny","message":"you pass socket","date":"2013-01-14T23:09:52.658Z","type":"message"}
{"nick":"indutny","message":"and want to know when it's destroyed","date":"2013-01-14T23:09:59.037Z","type":"message"}
{"nick":"indutny","message":"this is the case #1","date":"2013-01-14T23:10:02.464Z","type":"message"}
{"nick":"indutny","message":"case #2","date":"2013-01-14T23:10:05.066Z","type":"message"}
{"nick":"indutny","message":"you want to know number of server connections","date":"2013-01-14T23:10:18.302Z","type":"message"}
{"nick":"indutny","message":"but","date":"2013-01-14T23:10:27.253Z","type":"message"}
{"nick":"indutny","message":"may be you're right","date":"2013-01-14T23:10:36.128Z","type":"message"}
{"nick":"isaacs","message":"i think tracking it as an option is fine.","date":"2013-01-14T23:11:08.208Z","type":"message"}
{"nick":"isaacs","message":"but it should default to false","date":"2013-01-14T23:11:09.908Z","type":"message"}
{"nick":"isaacs","message":"node should be fast by default.","date":"2013-01-14T23:11:14.958Z","type":"message"}
{"nick":"isaacs","message":"if the connections count is invalid, let's just make it 0","date":"2013-01-14T23:11:48.088Z","type":"message"}
{"nick":"isaacs","message":"or -1 or null or whatever.","date":"2013-01-14T23:11:52.377Z","type":"message"}
{"nick":"isaacs","message":"like, \"Sorry, you don't get that info, because you didn't ask for it\"","date":"2013-01-14T23:12:14.847Z","type":"message"}
{"nick":"isaacs","message":"i think that's reasonable","date":"2013-01-14T23:12:15.647Z","type":"message"}
{"nick":"indutny","message":"-1","date":"2013-01-14T23:12:19.260Z","type":"message"}
{"nick":"indutny","message":"because I don't want server.close() to emit 'close' immediately","date":"2013-01-14T23:12:30.709Z","type":"message"}
{"nick":"isaacs","message":"nono","date":"2013-01-14T23:12:34.277Z","type":"message"}
{"nick":"isaacs","message":"server.close() will still wait for the children to report that they're closed.","date":"2013-01-14T23:12:43.907Z","type":"message"}
{"nick":"isaacs","message":"justlike your patch does","date":"2013-01-14T23:12:46.896Z","type":"message"}
{"nick":"isaacs","message":"but server.connections doesn't have to be anything useful if you're not tracking them","date":"2013-01-14T23:12:58.327Z","type":"message"}
{"nick":"isaacs","message":"i mean, showing server.connections = \"total number of connections since ever\" is not so useful","date":"2013-01-14T23:13:18.267Z","type":"message"}
{"nick":"isaacs","message":"but it looks like a number, then, not a `null` showing you that it's just not a thing","date":"2013-01-14T23:13:30.736Z","type":"message"}
{"nick":"isaacs","message":"so it's hard to tell what's going on","date":"2013-01-14T23:13:38.456Z","type":"message"}
{"nick":"isaacs","message":"we could also add server.connectionCount(cb)","date":"2013-01-14T23:14:02.466Z","type":"message"}
{"nick":"isaacs","message":"so, in a cluster master, it'll poll the children","date":"2013-01-14T23:14:14.146Z","type":"message"}
{"nick":"isaacs","message":"and in a non-master server, it'll just call the cb with server.connections","date":"2013-01-14T23:14:29.036Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: holy, keeping all the legacy bits in must have been a drag.","date":"2013-01-14T23:15:03.153Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-14T23:15:08.640Z","type":"quit"}
{"nick":"isaacs","message":"trevnorris: A DRAG AS IN BEING DRAGGED BEHIND WILD HOGS WITH SIGNIFICANT GASTROINTESTINAL ISSUES.","date":"2013-01-14T23:15:39.585Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yes.","date":"2013-01-14T23:15:42.605Z","type":"message"}
{"nick":"indutny","message":"right","date":"2013-01-14T23:15:42.757Z","type":"message"}
{"nick":"indutny","message":"isaacs: looks like I was wrong about CN matching","date":"2013-01-14T23:16:09.891Z","type":"message"}
{"nick":"Raynos","message":"trevnorris: I overwrote .read in my object stream wrapper. It's a disaster. Having worked on streams in node core to make them support object streams I can tell you it's trivial to handle edge cases incorrectly. We should solve it once","date":"2013-01-14T23:16:11.818Z","type":"message"}
{"nick":"indutny","message":"there're two things to change/fix","date":"2013-01-14T23:16:15.050Z","type":"message"}
{"nick":"indutny","message":"1. CN should not allow wildcards if altname is present","date":"2013-01-14T23:16:23.040Z","type":"message"}
{"nick":"indutny","message":"and apparently it's not present in dropbox's certificate","date":"2013-01-14T23:16:31.182Z","type":"message"}
{"nick":"indutny","message":"nor in facebook's","date":"2013-01-14T23:16:43.050Z","type":"message"}
{"nick":"indutny","message":"2. Wildcard is allowed only in left-most part of identifier","date":"2013-01-14T23:16:56.751Z","type":"message"}
{"nick":"indutny","message":"(pointed by bnoordhuis)","date":"2013-01-14T23:17:03.055Z","type":"message"}
{"nick":"indutny","message":"I've a patch to review","date":"2013-01-14T23:17:14.292Z","type":"message"}
{"nick":"indutny","message":"but right now I'm just running tests","date":"2013-01-14T23:17:18.943Z","type":"message"}
{"nick":"isaacs","message":"indutny: thanks","date":"2013-01-14T23:21:20.689Z","type":"message"}
{"nick":"isaacs","message":"indutny: that makes sense iwth my experience.","date":"2013-01-14T23:21:27.719Z","type":"message"}
{"nick":"isaacs","message":"indutny: so,i'm landing this stream thing","date":"2013-01-14T23:21:35.359Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-14T23:22:19.466Z","type":"message"}
{"nick":"indutny","message":"isaacs: I wonder  how many patches to this code will we make","date":"2013-01-14T23:22:30.666Z","type":"message"}
{"nick":"indutny","message":"until it'll become useful :)","date":"2013-01-14T23:22:35.167Z","type":"message"}
{"nick":"indutny","message":"it's like 20th patch to this small functions","date":"2013-01-14T23:22:43.698Z","type":"message"}
{"nick":"indutny","message":"and still everyone is not satisfied","date":"2013-01-14T23:22:50.959Z","type":"message"}
{"nick":"isaacs","message":"hahah","date":"2013-01-14T23:22:51.748Z","type":"message"}
{"nick":"isaacs","message":"indutny: welcome to the wonderful world of tls :)","date":"2013-01-14T23:22:59.489Z","type":"message"}
{"nick":"isaacs","message":"indutny: there are no heroes.  only failures.  your best hope is to fail less than average.","date":"2013-01-14T23:23:24.238Z","type":"message"}
{"nick":"isaacs","message":"indutny: this is why security people are usually so grump.","date":"2013-01-14T23:23:33.618Z","type":"message"}
{"nick":"isaacs","message":"*grumpy","date":"2013-01-14T23:23:35.808Z","type":"message"}
{"nick":"indutny","message":"I've failed to fail less than average","date":"2013-01-14T23:23:38.116Z","type":"message"}
{"nick":"indutny","message":"is it bad? :)","date":"2013-01-14T23:23:40.381Z","type":"message"}
{"nick":"isaacs","message":"hahah","date":"2013-01-14T23:23:43.098Z","type":"message"}
{"nick":"isaacs","message":"well, that'sjust one failure, so i'd say you're doing ok","date":"2013-01-14T23:23:54.178Z","type":"message"}
{"nick":"isaacs","message":"indutny: speaking of failures, simple/test-tls-check-server-identity is failing for me on master.","date":"2013-01-14T23:25:47.486Z","type":"message"}
{"nick":"indutny","message":"oh, actually","date":"2013-01-14T23:25:50.369Z","type":"message"}
{"nick":"indutny","message":"forget about pt 2","date":"2013-01-14T23:25:55.098Z","type":"message"}
{"nick":"indutny","message":"err","date":"2013-01-14T23:25:58.558Z","type":"message"}
{"nick":"indutny","message":"pt 1","date":"2013-01-14T23:25:59.667Z","type":"message"}
{"nick":"isaacs","message":"Test#4 failed: { host: 'b.a.com', cert: { subject: { CN: '*.a.com' } }, result: false }","date":"2013-01-14T23:26:01.366Z","type":"message"}
{"nick":"indutny","message":"yes, I know","date":"2013-01-14T23:26:05.449Z","type":"message"}
{"nick":"isaacs","message":"k","date":"2013-01-14T23:26:08.216Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: another user-failure case. but looks like no check if lowWaterMark < highWaterMark.","date":"2013-01-14T23:26:17.399Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: there was a check, but it slowed down http_simple","date":"2013-01-14T23:26:42.355Z","type":"message"}
{"nick":"isaacs","message":"so we removed the seatbelts from the car.","date":"2013-01-14T23:26:46.906Z","type":"message"}
{"nick":"isaacs","message":"to go faster.","date":"2013-01-14T23:26:50.216Z","type":"message"}
{"nick":"isaacs","message":"that one is probably worthwhile","date":"2013-01-14T23:27:04.155Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u000227fafd4\u0002 : stream: Do not call endReadable on a non-empty stream  Say that a stream' - http://git.io/n21QAw","date":"2013-01-14T23:27:43.423Z","type":"message"}
{"nick":"paddybyers","reason":"Ping timeout: 248 seconds","date":"2013-01-14T23:29:07.886Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-14T23:29:36.737Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: i'd think a check on instantiation (e.g. `this.hWM = ~~(hwm > lwm ? hwm : lwm)`) would be enough. was that causing a problem?","date":"2013-01-14T23:29:50.379Z","type":"message"}
{"nick":"indutny","message":"pushing","date":"2013-01-14T23:30:26.305Z","type":"message"}
{"nick":"indutny","message":"isaacs: please review very carefully https://github.com/indutny/node/commit/add5e12ab3bc940d73dd46eecbc9d6cf0a5ed6ea","date":"2013-01-14T23:30:54.173Z","type":"message"}
{"nick":"indutny","message":"I'll reread it myself","date":"2013-01-14T23:30:57.917Z","type":"message"}
{"nick":"indutny","message":"does it match quotes?","date":"2013-01-14T23:32:52.402Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i had a bunch of asserts in there.","date":"2013-01-14T23:33:21.342Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok","date":"2013-01-14T23:33:27.127Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: removing them all sped things up a bit.","date":"2013-01-14T23:33:29.731Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: but yeah, in teh ctor, it would probably be good to just do if (hwm < lwm) throw","date":"2013-01-14T23:33:49.711Z","type":"message"}
{"nick":"isaacs","message":"indutny: what is this? return /$./;","date":"2013-01-14T23:36:07.240Z","type":"message"}
{"nick":"indutny","message":"falsy regexp","date":"2013-01-14T23:36:14.115Z","type":"message"}
{"nick":"isaacs","message":"indutny: is that just a regexp that can never match anything?","date":"2013-01-14T23:36:14.243Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-14T23:36:16.607Z","type":"message"}
{"nick":"isaacs","message":"i see.","date":"2013-01-14T23:36:17.300Z","type":"message"}
{"nick":"isaacs","message":"indutny: it'd be good to put the RFC comments next to the tests that demonstrate them","date":"2013-01-14T23:37:53.316Z","type":"message"}
{"nick":"indutny","message":"yeah, probably","date":"2013-01-14T23:38:01.986Z","type":"message"}
{"nick":"isaacs","message":"indutny: since that's usually the first place I check to see why it's behaving the way it is","date":"2013-01-14T23:38:06.946Z","type":"message"}
{"nick":"indutny","message":"can you do it? for me :)","date":"2013-01-14T23:38:16.617Z","type":"message"}
{"nick":"isaacs","message":"indutny: if I think, \"That's wrong\" and i look at the test, and see that we're making SURE it's wrong, then i'm extra curious","date":"2013-01-14T23:38:27.946Z","type":"message"}
{"nick":"indutny","message":"I'm afraid I can't handle it anymore tonight","date":"2013-01-14T23:38:28.324Z","type":"message"}
{"nick":"isaacs","message":"indutny: np","date":"2013-01-14T23:38:31.865Z","type":"message"}
{"nick":"indutny","message":"so","date":"2013-01-14T23:38:35.944Z","type":"message"}
{"nick":"indutny","message":"lgtm?","date":"2013-01-14T23:38:37.132Z","type":"message"}
{"nick":"isaacs","message":"indutny: i need to play with it a bit more.","date":"2013-01-14T23:38:46.025Z","type":"message"}
{"nick":"isaacs","message":"indutny: just read, didn't test myself.","date":"2013-01-14T23:38:51.785Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-14T23:38:56.857Z","type":"message"}
{"nick":"indutny","message":"good","date":"2013-01-14T23:38:59.245Z","type":"message"}
{"nick":"isaacs","message":"indutny: but if you're happy with it, i'll land it today if it lgtm","date":"2013-01-14T23:39:01.455Z","type":"message"}
{"nick":"isaacs","message":"and i'll add comments to the tests","date":"2013-01-14T23:39:08.115Z","type":"message"}
{"nick":"indutny","message":"I don't have any concerns with it","date":"2013-01-14T23:39:13.098Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2013-01-14T23:39:15.585Z","type":"message"}
{"nick":"indutny","message":"as far as I can see","date":"2013-01-14T23:39:17.208Z","type":"message"}
{"nick":"isaacs","message":"thanks for doing this :)","date":"2013-01-14T23:39:21.425Z","type":"message"}
{"nick":"indutny","message":"thank you :)","date":"2013-01-14T23:39:38.411Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: yeah. reason I don't use assert.ok on small functions is because I always get a \"Did not inline ok called from testme (target requires context change)\"","date":"2013-01-14T23:41:44.015Z","type":"message"}
{"nick":"trevnorris","message":"in the super trivial case it makes it about 6x's slower: https://gist.github.com/4534623","date":"2013-01-14T23:44:47.644Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: wow","date":"2013-01-14T23:47:39.829Z","type":"message"}
{"nick":"isaacs","message":"it'd be nice if assert() were like a language construct.","date":"2013-01-14T23:47:49.860Z","type":"message"}
{"nick":"isaacs","message":"assert(booleanvalue, message)","date":"2013-01-14T23:48:00.789Z","type":"message"}
{"nick":"isaacs","message":"maybe when we get macros, i can write it ;)","date":"2013-01-14T23:48:10.459Z","type":"message"}
{"nick":"isaacs","message":"if (!booleanValue) throw new Error(message)","date":"2013-01-14T23:48:27.759Z","type":"message"}
{"nick":"indutny","message":"we can do interesting thing now","date":"2013-01-14T23:48:28.355Z","type":"message"}
{"nick":"indutny","message":"compile two version of each module","date":"2013-01-14T23:48:37.073Z","type":"message"}
{"nick":"indutny","message":"s/version/versions","date":"2013-01-14T23:48:40.404Z","type":"message"}
{"nick":"indutny","message":"one - original","date":"2013-01-14T23:48:45.077Z","type":"message"}
{"nick":"indutny","message":"second - with commented out assertions","date":"2013-01-14T23:48:50.187Z","type":"message"}
{"nick":"indutny","message":"and choose which one to run depending on env variables","date":"2013-01-14T23:49:06.446Z","type":"message"}
{"nick":"isaacs","message":"hrm... meh.","date":"2013-01-14T23:49:12.398Z","type":"message"}
{"nick":"isaacs","message":"i'll just add a if/throw check","date":"2013-01-14T23:49:18.118Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-01-14T23:49:26.471Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-14T23:49:28.053Z","type":"message"}
{"nick":"indutny","message":"brb","date":"2013-01-14T23:49:30.025Z","type":"message"}
{"nick":"indutny","message":"tea","date":"2013-01-14T23:49:33.163Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: it's actually from how the module system works. here's the most trivial module case: https://gist.github.com/4534623","date":"2013-01-14T23:52:31.220Z","type":"message"}
{"nick":"trevnorris","message":"so it's not the assert that's slow, it's calling in the assert through require.","date":"2013-01-14T23:52:44.414Z","type":"message"}
{"nick":"isaacs","message":"review? https://gist.github.com/4534672","date":"2013-01-14T23:54:05.535Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: interesting.","date":"2013-01-14T23:54:20.165Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: lgtm","date":"2013-01-14T23:54:54.021Z","type":"message"}
{"nick":"indutny","message":"ok, time to sleep","date":"2013-01-14T23:55:35.894Z","type":"message"}
{"nick":"indutny","message":"ttyl","date":"2013-01-14T23:55:40.816Z","type":"message"}
{"nick":"indutny","message":"isaacs: lgtm","date":"2013-01-14T23:55:53.001Z","type":"message"}
