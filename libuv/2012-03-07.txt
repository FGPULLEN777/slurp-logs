{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-03-07T00:00:51.849Z","type":"quit"}
{"nick":"mmalecki","message":"curl'able irssi would be neat.","date":"2012-03-07T00:06:44.043Z","type":"message"}
{"nick":"piscisaureus","message":"mmalecki: curl-able?","date":"2012-03-07T00:07:16.606Z","type":"message"}
{"nick":"piscisaureus","message":"mmalecki: probably you want netcat-able?","date":"2012-03-07T00:07:25.998Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus: nah, curl-able! curl surrender-cube.jit.su","date":"2012-03-07T00:07:50.741Z","type":"message"}
{"nick":"mmalecki","message":"but yeah, netcat-able would do it ;)","date":"2012-03-07T00:08:04.606Z","type":"message"}
{"nick":"piscisaureus","message":"mmalecki: you want to know how that looks on windows? :-)","date":"2012-03-07T00:08:48.101Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus: actually, I don't :)","date":"2012-03-07T00:09:30.779Z","type":"message"}
{"nick":"mmalecki","message":"it's substack's project, so harass him ;)","date":"2012-03-07T00:10:07.659Z","type":"message"}
{"nick":"piscisaureus","message":"node -e \"require('http').get({host:'surrender-cube.jit.su'}, function(res) { res.pipe(process.stdout) })\"","date":"2012-03-07T00:14:43.377Z","type":"message"}
{"nick":"piscisaureus","message":"does the trick","date":"2012-03-07T00:14:47.592Z","type":"message"}
{"nick":"piscisaureus","message":"but I don't know if this is what I am supposed to see","date":"2012-03-07T00:14:58.028Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus: you're supposed to see a rotating cube","date":"2012-03-07T00:16:49.411Z","type":"message"}
{"nick":"piscisaureus","message":"mmalecki: It looks somewhat like that yeah","date":"2012-03-07T00:17:31.876Z","type":"message"}
{"nick":"isaacs","action":"uses limechat","date":"2012-03-07T00:17:33.831Z","type":"action"}
{"nick":"tjfontaine","message":"hmm the node one liner is prettier than the curl version","date":"2012-03-07T00:18:26.794Z","type":"message"}
{"nick":"tjfontaine","message":"wget -q -O- is slightly better","date":"2012-03-07T00:19:18.022Z","type":"message"}
{"nick":"mmalecki","message":"actually, it's somehow related to output buffering curl does","date":"2012-03-07T00:21:00.285Z","type":"message"}
{"nick":"mmalecki","message":"s/output//","date":"2012-03-07T00:21:15.992Z","type":"message"}
{"nick":"mmalecki","message":"there have to be some switches, but node is close enough :)","date":"2012-03-07T00:21:54.789Z","type":"message"}
{"nick":"tjfontaine","message":"indeed","date":"2012-03-07T00:22:10.433Z","type":"message"}
{"nick":"TooTallNate","message":"-N / --no-buffer for curl","date":"2012-03-07T00:23:24.713Z","type":"message"}
{"nick":"piscisaureus","message":"To be honest node I am always amazed how much you can do with node one liners","date":"2012-03-07T00:24:32.669Z","type":"message"}
{"nick":"piscisaureus","message":"now I am used to the windows shell which lacks many tools so maybe I am too easily satistfied","date":"2012-03-07T00:25:08.796Z","type":"message"}
{"nick":"tjfontaine","message":"in nix world such things are common, people love their bash and perl one lienrs","date":"2012-03-07T00:25:40.833Z","type":"message"}
{"nick":"tjfontaine","message":"*liners","date":"2012-03-07T00:25:43.975Z","type":"message"}
{"nick":"benvie","message":"this is why I have my favorite shell menu addition for .js files: \"make runnable\"","date":"2012-03-07T00:31:15.035Z","type":"message"}
{"nick":"benvie","message":"which creates a .cmd file in node's directory (in the path) that invokes the js file passing along everything else","date":"2012-03-07T00:32:05.785Z","type":"message"}
{"nick":"benvie","message":"using node to shim the nicities of unix into windows","date":"2012-03-07T00:32:44.566Z","type":"message"}
{"nick":"benvie","message":"for fun and profit","date":"2012-03-07T00:32:51.428Z","type":"message"}
{"nick":"mmalecki","message":"I mean, use Unix?","date":"2012-03-07T00:33:04.080Z","type":"message"}
{"nick":"mmalecki","message":"porting unix to windows seems pretty pointless to me ;)","date":"2012-03-07T00:33:25.920Z","type":"message"}
{"nick":"benvie","message":"but the reverse, shimming the nicities of windows in unix, is a more complicated process =D","date":"2012-03-07T00:33:26.374Z","type":"message"}
{"nick":"benvie","message":"for that I have my kubuntu vm","date":"2012-03-07T00:34:06.961Z","type":"message"}
{"nick":"benvie","message":"which kind of does it","date":"2012-03-07T00:34:16.190Z","type":"message"}
{"nick":"mmalecki","message":"I wish writing OSes was easier :)","date":"2012-03-07T00:34:52.446Z","type":"message"}
{"nick":"benvie","message":"it would be if there was a node module for writing OSes","date":"2012-03-07T00:36:53.136Z","type":"message"}
{"nick":"benvie","message":"the gauntlet has been laid","date":"2012-03-07T00:37:27.104Z","type":"message"}
{"nick":"tjfontaine","message":"then we'd just have more arguments about require('posix');","date":"2012-03-07T00:37:33.573Z","type":"message"}
{"nick":"benvie","message":"it an x86 architecture can be emulated in js and linux run on it","date":"2012-03-07T00:38:22.764Z","type":"message"}
{"nick":"benvie","message":"then node can have an os building module","date":"2012-03-07T00:38:27.438Z","type":"message"}
{"nick":"benvie","message":"nay, must","date":"2012-03-07T00:38:56.232Z","type":"message"}
{"nick":"mikeal1","date":"2012-03-07T01:22:08.816Z","type":"join"}
{"nick":"mikeal","reason":"Read error: Connection reset by peer","date":"2012-03-07T01:22:11.263Z","type":"quit"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-03-07T01:25:32.005Z","type":"quit"}
{"nick":"mikeal1","reason":"Quit: Leaving.","date":"2012-03-07T01:29:26.064Z","type":"quit"}
{"nick":"mjr_","date":"2012-03-07T01:35:55.805Z","type":"join"}
{"nick":"piscisaureus","message":"wtf","date":"2012-03-07T01:40:28.606Z","type":"message"}
{"nick":"mmalecki","new_nick":"mmalecki[zzz]","date":"2012-03-07T01:41:07.579Z","type":"nick"}
{"nick":"isaacs","date":"2012-03-07T01:41:12.512Z","type":"join"}
{"nick":"philips","reason":"Excess Flood","date":"2012-03-07T01:42:37.263Z","type":"quit"}
{"nick":"philips","date":"2012-03-07T01:43:36.138Z","type":"join"}
{"nick":"mikeal","date":"2012-03-07T01:44:35.690Z","type":"join"}
{"nick":"brson","reason":"Quit: leaving","date":"2012-03-07T01:49:49.771Z","type":"quit"}
{"nick":"abraxas","date":"2012-03-07T01:53:56.080Z","type":"join"}
{"nick":"perezd","date":"2012-03-07T02:00:38.213Z","type":"join"}
{"nick":"pietern","reason":"Quit: pietern","date":"2012-03-07T02:05:39.297Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-03-07T02:06:20.984Z","type":"quit"}
{"nick":"mikeal","date":"2012-03-07T02:14:53.998Z","type":"join"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u0002d5fca08\u000f \u000310\u000f/ benchmark/client_latency.js \u0002:\u000f A benchmark script for measuring client latency - http://git.io/qREqXg","date":"2012-03-07T02:20:01.704Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u000217da424\u000f \u000310\u000f/ benchmark/http_server_lag.js \u0002:\u000f A server with configurable lag for testing - http://git.io/oETuJA","date":"2012-03-07T02:20:02.416Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u0002fb53986\u000f \u000310\u000f/ benchmark/http.sh \u0002:\u000f Bash script for running http-simple benchmarks - http://git.io/Dt-APA","date":"2012-03-07T02:20:02.815Z","type":"message"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-03-07T02:23:32.102Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-03-07T02:23:50.838Z","type":"quit"}
{"nick":"piscisaureus","message":"So","date":"2012-03-07T02:28:47.941Z","type":"message"}
{"nick":"piscisaureus","message":"I know how to make bytes/1024 faster :-)","date":"2012-03-07T02:28:58.207Z","type":"message"}
{"nick":"creationix","message":"bytes/1024?","date":"2012-03-07T02:34:41.872Z","type":"message"}
{"nick":"piscisaureus","message":"http simple","date":"2012-03-07T02:39:20.879Z","type":"message"}
{"nick":"piscisaureus","message":"ab -t 1000 -c 100 http://localhost:8000/buffer/10240","date":"2012-03-07T02:39:38.220Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: what should we do if the user writes a string that ends with a lead surrogate, and then calls write() another time with a string that starts with a trail surrogate?","date":"2012-03-07T02:47:38.119Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: would we do something opposite to string_decoder, or is it just the user's responsibility to not split strings in the middle of a surrogate pair?","date":"2012-03-07T02:48:27.282Z","type":"message"}
{"nick":"piscisaureus","message":"pquerna mjr_ igorzi: ^ ?","date":"2012-03-07T02:48:36.483Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: ^","date":"2012-03-07T02:49:03.062Z","type":"message"}
{"nick":"mjr_","message":"When writing buffers, this has to be OK.","date":"2012-03-07T02:49:22.549Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: we have to do something the opposite of a string_decoder","date":"2012-03-07T02:49:35.390Z","type":"message"}
{"nick":"isaacs","message":"singleByteService.pipe(httpResponse)","date":"2012-03-07T02:49:55.572Z","type":"message"}
{"nick":"isaacs","message":"that has to work ^","date":"2012-03-07T02:49:58.005Z","type":"message"}
{"nick":"isaacs","message":"even in the presence of U+10FFFF chars","date":"2012-03-07T02:50:09.426Z","type":"message"}
{"nick":"isaacs","message":"er, U+01FFFF","date":"2012-03-07T02:50:16.528Z","type":"message"}
{"nick":"piscisaureus","message":"mjr_ isaacs: this does not affect writing buffers","date":"2012-03-07T02:50:20.923Z","type":"message"}
{"nick":"piscisaureus","message":"only writing strings","date":"2012-03-07T02:50:24.118Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-03-07T02:50:24.997Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus: oh, i see","date":"2012-03-07T02:50:39.008Z","type":"message"}
{"nick":"isaacs","message":"so write(\"foo\\ud800\") then write(\"\\uffed\")","date":"2012-03-07T02:50:56.263Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: yes","date":"2012-03-07T02:51:01.865Z","type":"message"}
{"nick":"isaacs","message":"yeah, let's punt on that","date":"2012-03-07T02:51:22.290Z","type":"message"}
{"nick":"piscisaureus","message":"mjr_: isaacs: the problem is that our api has no room for it, there is no set encoding for writes","date":"2012-03-07T02:51:52.247Z","type":"message"}
{"nick":"piscisaureus","message":"people could do","date":"2012-03-07T02:51:55.242Z","type":"message"}
{"nick":"piscisaureus","message":"write(\"foo\\ud800\", \"utf8\")","date":"2012-03-07T02:52:09.051Z","type":"message"}
{"nick":"piscisaureus","message":"write(\"bla\", \"base64\")","date":"2012-03-07T02:52:21.474Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301write(\"\\uffed\", \"utf8\")\u0003\u000301","date":"2012-03-07T02:52:29.585Z","type":"message"}
{"nick":"sh1mmer","date":"2012-03-07T02:54:11.973Z","type":"join"}
{"nick":"mikeal","date":"2012-03-07T02:56:22.774Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-03-07T03:04:30.690Z","type":"quit"}
{"nick":"piscisaureus","message":"ok. time to go again.","date":"2012-03-07T03:06:37.104Z","type":"message"}
{"nick":"piscisaureus","message":"The c++ placement new syntax just made me cry","date":"2012-03-07T03:06:48.666Z","type":"message"}
{"nick":"mikeal","date":"2012-03-07T03:10:54.822Z","type":"join"}
{"nick":"isaacs","message":"piscisaureus: i think if you're writing strings, and they have multibytes (er, multi-words, rather) then it's up to you to not write them brokenly","date":"2012-03-07T03:11:55.025Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: right, ok. That makes things easy","date":"2012-03-07T03:12:19.687Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: wherever you're getting that string from should be through a string_decoder or something","date":"2012-03-07T03:12:26.210Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: yeah, we should not break up strings ourselves. And string decoder should correctly continue decoding after a buffer break, like it already does.","date":"2012-03-07T03:13:21.404Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2012-03-07T03:13:39.942Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: something else - why was the SlowBuffer / Buffer distinction invented?","date":"2012-03-07T03:13:52.748Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: i'd assume that the majority use case is: turn a buffer into a string, turn the string back into a buffer, write the buffer to a socket/file","date":"2012-03-07T03:14:04.869Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: because allocating lots of little buffers and crossing the C++ boundary a lot was found to be slow","date":"2012-03-07T03:14:25.753Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: some day, it'd be nice to use TypedArrays or whatever the ES thing is","date":"2012-03-07T03:14:43.529Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: hmm. I find just figured out that it is much faster to do the string -> buffer conversion in the binding layer.","date":"2012-03-07T03:15:15.167Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: interesting","date":"2012-03-07T03:15:29.014Z","type":"message"}
{"nick":"piscisaureus","message":"that is, don't really create a buffer - just malloc memory","date":"2012-03-07T03:15:33.890Z","type":"message"}
{"nick":"piscisaureus","message":"and write that","date":"2012-03-07T03:15:41.101Z","type":"message"}
{"nick":"piscisaureus","message":"it seems to me that this would make the SlowBuffer kind of unnecessary","date":"2012-03-07T03:15:57.280Z","type":"message"}
{"nick":"piscisaureus","message":"I don't think many people really do `new Buffer(10)` just for fun. Or do you, mjr_?","date":"2012-03-07T03:16:36.093Z","type":"message"}
{"nick":"piscisaureus","message":"Buffers are only made when people want to write stuff to a socket or file - or node itself creates it when reading/receiving.","date":"2012-03-07T03:17:30.227Z","type":"message"}
{"nick":"mjr_","message":"My metrics processing system does new Buffer(some_size)","date":"2012-03-07T03:17:56.765Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-03-07T03:18:05.040Z","type":"quit"}
{"nick":"piscisaureus","message":"mjr_: what would be a typical size?","date":"2012-03-07T03:18:13.600Z","type":"message"}
{"nick":"mjr_","message":"It works with UDP packets though.","date":"2012-03-07T03:18:15.879Z","type":"message"}
{"nick":"mjr_","message":"40 - 100 bytes.","date":"2012-03-07T03:18:21.328Z","type":"message"}
{"nick":"mjr_","message":"For most stuff though, I never explicitly allocate buffers, they are passed in from \"data\" callbacks.","date":"2012-03-07T03:18:47.508Z","type":"message"}
{"nick":"piscisaureus","message":"yeah, exactly","date":"2012-03-07T03:19:02.317Z","type":"message"}
{"nick":"piscisaureus","message":"but they are created from another slab","date":"2012-03-07T03:19:27.771Z","type":"message"}
{"nick":"piscisaureus","message":"but yes they still require SlowBuffer","date":"2012-03-07T03:19:41.401Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u0002150053b\u000f \u000310\u000f/ benchmark/http_server_lag.js \u0002:\u000f ","date":"2012-03-07T03:31:54.263Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f Typo in http_server_lag.js script","date":"2012-03-07T03:31:54.478Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f Thanks, @mscdex - http://git.io/gHq2Ug","date":"2012-03-07T03:31:54.478Z","type":"message"}
{"nick":"AvianFlu","date":"2012-03-07T03:38:33.814Z","type":"join"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Shea Levy\u000f \u000307master\u000f * r\u00024ff6138\u000f \u000310\u000f/ lib/child_process.js \u0002:\u000f ","date":"2012-03-07T03:41:35.346Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f fork: don't clear environment by default","date":"2012-03-07T03:41:35.553Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f - Set options.env to process.env instead of {} by default.","date":"2012-03-07T03:41:35.554Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f - Shallow clone the passed options.env in case the user passed process.env directly. - http://git.io/43fQww","date":"2012-03-07T03:41:35.554Z","type":"message"}
{"nick":"piscisaureus","message":"shit, backing out","date":"2012-03-07T03:42:20.873Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: backing out?","date":"2012-03-07T03:42:51.177Z","type":"message"}
{"nick":"piscisaureus","message":"yeah. no cla","date":"2012-03-07T03:42:56.719Z","type":"message"}
{"nick":"isaacs","message":"ah, yikes.","date":"2012-03-07T03:43:13.597Z","type":"message"}
{"nick":"isaacs","message":"thanks for catching it","date":"2012-03-07T03:43:16.880Z","type":"message"}
{"nick":"piscisaureus","message":"I wish we could have a big banner that says \"sign the CLA!!!!1\"","date":"2012-03-07T03:44:35.469Z","type":"message"}
{"nick":"piscisaureus","message":"Admittedly, the CLA is not even mentioned in the readme","date":"2012-03-07T03:45:30.261Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: we could set up a pull req hook on github that checks this, i think","date":"2012-03-07T03:46:22.164Z","type":"message"}
{"nick":"isaacs","message":"yui had something like that","date":"2012-03-07T03:46:25.594Z","type":"message"}
{"nick":"piscisaureus","message":"oh, yeah","date":"2012-03-07T03:46:35.315Z","type":"message"}
{"nick":"isaacs","message":"really, ti'd be best if github just did this for us.","date":"2012-03-07T03:46:37.257Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-07T03:46:48.039Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#562 (master - 150053b : isaacs): The build is still failing.","date":"2012-03-07T03:46:48.253Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/fb53986...150053b","date":"2012-03-07T03:46:48.254Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/811116","date":"2012-03-07T03:46:48.254Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-07T03:46:48.254Z","type":"part"}
{"nick":"piscisaureus","message":"isaacs: meh, client_latency depends on request","date":"2012-03-07T03:49:19.227Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: you didn't get a review did you? >:-)","date":"2012-03-07T03:49:41.655Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002408f450\u000f \u000310\u000f/ benchmark/client_latency.js \u0002:\u000f client latency benchmark: don't require('request') - http://git.io/MyU4VA","date":"2012-03-07T03:53:32.744Z","type":"message"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2012-03-07T03:55:52.947Z","type":"quit"}
{"nick":"travis-ci","date":"2012-03-07T03:56:20.761Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#563 (master - 4ff6138 : Shea Levy): The build is still failing.","date":"2012-03-07T03:56:20.956Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/150053b...4ff6138","date":"2012-03-07T03:56:20.956Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/811158","date":"2012-03-07T03:56:20.956Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-07T03:56:20.956Z","type":"part"}
{"nick":"isaacs","message":"piscisaureus: oh, no, i didn't.","date":"2012-03-07T03:59:49.449Z","type":"message"}
{"nick":"isaacs","message":"i was playing around with a bunch of stuff in that thing, trying to find the soure","date":"2012-03-07T04:00:01.544Z","type":"message"}
{"nick":"isaacs","message":"*source","date":"2012-03-07T04:00:04.971Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: so what is the issue you are seeing","date":"2012-03-07T04:00:10.750Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: so, if you bump up the total number of requests, the latency increases much more in 0.6/master than it did in 0.4","date":"2012-03-07T04:00:32.335Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: if I run server_lag and client_latency without any options it creates a file with numbers","date":"2012-03-07T04:00:34.701Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: each column is a \"run\"","date":"2012-03-07T04:00:45.369Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: all the numbers are in the range 30-40","date":"2012-03-07T04:00:47.530Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: right.","date":"2012-03-07T04:00:52.350Z","type":"message"}
{"nick":"piscisaureus","message":"well, almost :-)","date":"2012-03-07T04:01:16.690Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: so what happens for you?","date":"2012-03-07T04:01:23.770Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: https://gist.github.com/1951446","date":"2012-03-07T04:01:24.515Z","type":"message"}
{"nick":"isaacs","message":"if you do a run with a smaller number of requests (regardless of how many you tell it to run at once) you get dramatically higher latency","date":"2012-03-07T04:02:30.973Z","type":"message"}
{"nick":"piscisaureus","message":"ach so","date":"2012-03-07T04:02:46.540Z","type":"message"}
{"nick":"isaacs","message":"er, with a larger number of requests","date":"2012-03-07T04:03:00.152Z","type":"message"}
{"nick":"piscisaureus","message":"ah, yeah","date":"2012-03-07T04:03:04.905Z","type":"message"}
{"nick":"piscisaureus","message":"1000 100 10 goes up to ~250 for me","date":"2012-03-07T04:03:18.644Z","type":"message"}
{"nick":"isaacs","message":"yikes","date":"2012-03-07T04:03:23.385Z","type":"message"}
{"nick":"isaacs","message":"so, you'd expect that that would throw out 100 requests at a time, since that's the number of sockets it's going to open at once","date":"2012-03-07T04:03:41.221Z","type":"message"}
{"nick":"isaacs","message":"so 1000 100 10 should have roughly the same values for the first 100 as 100 100 10","date":"2012-03-07T04:03:55.635Z","type":"message"}
{"nick":"isaacs","message":"then the second batch of 100 should be longer, etc.","date":"2012-03-07T04:04:02.316Z","type":"message"}
{"nick":"isaacs","message":"more-or-less stacking","date":"2012-03-07T04:04:07.082Z","type":"message"}
{"nick":"isaacs","message":"but what you instead see is this huge jump.","date":"2012-03-07T04:04:19.197Z","type":"message"}
{"nick":"isaacs","message":"this is totally killing the joyent portal right now.  basically, they're stuck on 0.4 because of this.","date":"2012-03-07T04:04:35.285Z","type":"message"}
{"nick":"piscisaureus","message":"so it is expected to go up?","date":"2012-03-07T04:05:11.915Z","type":"message"}
{"nick":"isaacs","message":"you mean, expected to go up as you go down the list?","date":"2012-03-07T04:05:25.630Z","type":"message"}
{"nick":"piscisaureus","message":"yeah","date":"2012-03-07T04:05:31.841Z","type":"message"}
{"nick":"isaacs","message":"the values are: numRequests numSockets numRuns","date":"2012-03-07T04:05:35.667Z","type":"message"}
{"nick":"perezd","date":"2012-03-07T04:05:40.489Z","type":"join"}
{"nick":"piscisaureus","message":"I mean, what is the pattern that is desirable?","date":"2012-03-07T04:05:41.538Z","type":"message"}
{"nick":"isaacs","message":"teh pattern is for numRequests to not affect latency overmuch.","date":"2012-03-07T04:05:56.381Z","type":"message"}
{"nick":"isaacs","message":"but each batch of <numRequests> will stack upon one naother","date":"2012-03-07T04:06:13.509Z","type":"message"}
{"nick":"isaacs","message":"so you should see something like [1,2,1,1,2,1,0,1, ...] for the first batch, then something like [2,1,2,2,4,2,2] for the second, etc.","date":"2012-03-07T04:06:40.816Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: so why do you set maxSockets to 100 when you make 1000 requests?","date":"2012-03-07T04:06:41.361Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: because i was trying to figure out if it was a result of requests queuing up in line for an available socket or not","date":"2012-03-07T04:07:04.316Z","type":"message"}
{"nick":"isaacs","message":"but you can also run it with 1000 1000 10","date":"2012-03-07T04:07:09.181Z","type":"message"}
{"nick":"isaacs","message":"results are still roughly the same","date":"2012-03-07T04:07:14.698Z","type":"message"}
{"nick":"isaacs","message":"regardless, the first \"batch\" (ie, the first <numSockets> lines in each column) should be roughly the same, no matter what the <numRequests> is set to","date":"2012-03-07T04:07:50.581Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-07T04:08:05.239Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#564 (master - 408f450 : Bert Belder): The build is still failing.","date":"2012-03-07T04:08:05.462Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/150053b...408f450","date":"2012-03-07T04:08:05.462Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/811219","date":"2012-03-07T04:08:05.462Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-07T04:08:05.462Z","type":"part"}
{"nick":"isaacs","message":"so, 1000 10 10 should look the same (in the first 10 lines) as 100 10 10 or 10 10 10","date":"2012-03-07T04:08:18.273Z","type":"message"}
{"nick":"piscisaureus","message":"ah","date":"2012-03-07T04:08:46.691Z","type":"message"}
{"nick":"piscisaureus","message":"well that is the case","date":"2012-03-07T04:08:54.096Z","type":"message"}
{"nick":"piscisaureus","message":"but if I boost the number of requests it all gets much slower","date":"2012-03-07T04:09:07.949Z","type":"message"}
{"nick":"mikeal","date":"2012-03-07T04:09:41.763Z","type":"join"}
{"nick":"isaacs","message":"yes","date":"2012-03-07T04:09:45.163Z","type":"message"}
{"nick":"isaacs","message":"it might get *a bit* slower, with more js objects etc being thrown around, but this is way more than expected.","date":"2012-03-07T04:10:05.504Z","type":"message"}
{"nick":"isaacs","message":"so something is going on","date":"2012-03-07T04:10:08.074Z","type":"message"}
{"nick":"mikeal","reason":"Client Quit","date":"2012-03-07T04:14:07.028Z","type":"quit"}
{"nick":"piscisaureus","message":"1000 1000 1000 makes my kernel run out of memory","date":"2012-03-07T04:15:08.265Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: in other news, just `npm install`ed jsdom on windows and it Just Works.","date":"2012-03-07T04:15:13.459Z","type":"message"}
{"nick":"piscisaureus","message":"really","date":"2012-03-07T04:15:21.212Z","type":"message"}
{"nick":"isaacs","message":"(provided you have node-gyp installed, of course)","date":"2012-03-07T04:15:21.921Z","type":"message"}
{"nick":"piscisaureus","message":"cool","date":"2012-03-07T04:15:22.967Z","type":"message"}
{"nick":"isaacs","message":"yes","date":"2012-03-07T04:15:23.241Z","type":"message"}
{"nick":"isaacs","message":"now i just need to make it fail gracefully when you don't :)","date":"2012-03-07T04:15:42.559Z","type":"message"}
{"nick":"mikeal","date":"2012-03-07T04:15:43.045Z","type":"join"}
{"nick":"piscisaureus","message":"hah, that's really cool","date":"2012-03-07T04:15:55.204Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: btw, what server are you running? http_simple or http_server_lag?","date":"2012-03-07T04:17:37.231Z","type":"message"}
{"nick":"isaacs","message":"of course, there's still a million other issues to deal with.","date":"2012-03-07T04:17:41.280Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: i'm running http_simple with the client benchmark","date":"2012-03-07T04:17:48.614Z","type":"message"}
{"nick":"piscisaureus","message":"aha","date":"2012-03-07T04:18:02.182Z","type":"message"}
{"nick":"piscisaureus","message":"I was running lag","date":"2012-03-07T04:18:04.565Z","type":"message"}
{"nick":"isaacs","message":"http_server_lag.js is useful to suss out socket-waiting queue behavior","date":"2012-03-07T04:18:05.987Z","type":"message"}
{"nick":"isaacs","message":"because then each batch will be more distinct","date":"2012-03-07T04:18:24.425Z","type":"message"}
{"nick":"isaacs","message":"it'll be like 10,10,10,20,20,21,...","date":"2012-03-07T04:18:35.968Z","type":"message"}
{"nick":"piscisaureus","message":"yeah but","date":"2012-03-07T04:18:40.293Z","type":"message"}
{"nick":"piscisaureus","message":"somehow the sockets are not properly disconnected","date":"2012-03-07T04:18:47.726Z","type":"message"}
{"nick":"isaacs","message":"interesting","date":"2012-03-07T04:18:56.953Z","type":"message"}
{"nick":"piscisaureus","message":"so windows runs out of kernel buffers after opening 60000 sockets or so","date":"2012-03-07T04:19:13.728Z","type":"message"}
{"nick":"isaacs","message":"ooh... that's not so good","date":"2012-03-07T04:19:23.413Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: what's windows cmd-ese for \"blah || true; bloo\"","date":"2012-03-07T04:29:23.039Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: like, do \"blah\", don't fail if it fails, then do \"bloo\"","date":"2012-03-07T04:29:35.057Z","type":"message"}
{"nick":"piscisaureus","message":"alright. This is too complicated for me. I am leavingk.","date":"2012-03-07T04:29:40.046Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: oh","date":"2012-03-07T04:29:43.735Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: if i do ||(exit 0) it doesn't get to bloo","date":"2012-03-07T04:29:57.237Z","type":"message"}
{"nick":"isaacs","message":"it just exits completely","date":"2012-03-07T04:30:00.539Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I don't really understand","date":"2012-03-07T04:30:28.829Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: can you use a c-family syntax to describe what you want?","date":"2012-03-07T04:30:40.643Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: (node-gyp clean || true) && node-gyp configure","date":"2012-03-07T04:31:00.840Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: you mean: do A and then do B even if A fails?","date":"2012-03-07T04:31:53.512Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: yes, and report the eventual success or failure as the result of B","date":"2012-03-07T04:32:07.697Z","type":"message"}
{"nick":"isaacs","message":"ie, if B fails, then it failed.","date":"2012-03-07T04:32:18.767Z","type":"message"}
{"nick":"isaacs","message":"that's the return value i care about","date":"2012-03-07T04:32:23.657Z","type":"message"}
{"nick":"isaacs","message":"in bash-land, i could just do `node-gyp clean; node-gyp configure`","date":"2012-03-07T04:32:52.777Z","type":"message"}
{"nick":"isaacs","message":"without any fancy || && magic","date":"2012-03-07T04:33:02.078Z","type":"message"}
{"nick":"piscisaureus","message":"aah","date":"2012-03-07T04:33:03.942Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: a & b","date":"2012-03-07T04:33:11.032Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: wait, srsly?","date":"2012-03-07T04:33:20.871Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: try it","date":"2012-03-07T04:33:42.258Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: ugh.  that has a *wildly* different meaning in unix.","date":"2012-03-07T04:33:51.873Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: that's \"run a in teh background, then run b\"","date":"2012-03-07T04:34:01.497Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: there is no unix-like background in windows. If anything you would use `start a`","date":"2012-03-07T04:34:49.545Z","type":"message"}
{"nick":"isaacs","message":"ugh","date":"2012-03-07T04:35:00.066Z","type":"message"}
{"nick":"isaacs","message":"seriously, windows does not make it easy","date":"2012-03-07T04:35:14.160Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I am really checking out now. bye","date":"2012-03-07T04:35:34.396Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: ok, good night","date":"2012-03-07T04:35:55.379Z","type":"message"}
{"nick":"isaacs","message":":)","date":"2012-03-07T04:35:57.162Z","type":"message"}
{"nick":"piscisaureus","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-03-07T04:36:21.695Z","type":"quit"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-03-07T04:39:55.459Z","type":"quit"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-03-07T04:50:33.189Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-03-07T04:50:47.152Z","type":"quit"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-03-07T04:51:22.273Z","type":"quit"}
{"nick":"mikeal","date":"2012-03-07T05:22:22.911Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-03-07T06:13:38.400Z","type":"quit"}
{"nick":"hij1nx","date":"2012-03-07T06:19:38.444Z","type":"join"}
{"nick":"paddybyers","date":"2012-03-07T06:32:37.548Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 240 seconds","date":"2012-03-07T06:35:34.821Z","type":"quit"}
{"nick":"mikeal","date":"2012-03-07T06:47:02.956Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2012-03-07T06:48:39.111Z","type":"quit"}
{"nick":"AvianFlu","date":"2012-03-07T06:49:26.742Z","type":"join"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-03-07T07:03:31.358Z","type":"quit"}
{"nick":"mikeal","date":"2012-03-07T07:10:42.408Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-03-07T07:18:32.359Z","type":"quit"}
{"nick":"mjr_","date":"2012-03-07T07:24:25.695Z","type":"join"}
{"nick":"dshaw_","date":"2012-03-07T07:32:38.547Z","type":"join"}
{"nick":"paddybyers","date":"2012-03-07T07:46:16.637Z","type":"join"}
{"nick":"rendar","date":"2012-03-07T07:48:33.729Z","type":"join"}
{"nick":"stephank","reason":"Quit: *Poof!*","date":"2012-03-07T07:57:16.388Z","type":"quit"}
