{"nick":"grantila","reason":"Quit: Leaving.","date":"2016-11-25T00:35:15.954Z","type":"quit"}
{"nick":"tunniclm","reason":"Ping timeout: 250 seconds","date":"2016-11-25T00:36:36.919Z","type":"quit"}
{"nick":"grantila","date":"2016-11-25T01:46:31.059Z","type":"join"}
{"nick":"grantila","reason":"Ping timeout: 252 seconds","date":"2016-11-25T01:51:01.937Z","type":"quit"}
{"nick":"grantila","date":"2016-11-25T02:57:27.826Z","type":"join"}
{"nick":"grantila","reason":"Client Quit","date":"2016-11-25T02:57:31.606Z","type":"quit"}
{"nick":"grantila","date":"2016-11-25T04:08:49.988Z","type":"join"}
{"nick":"grantila","reason":"Ping timeout: 252 seconds","date":"2016-11-25T04:13:17.980Z","type":"quit"}
{"nick":"pspi","reason":"Quit: leaving","date":"2016-11-25T05:22:37.821Z","type":"quit"}
{"nick":"pspi","date":"2016-11-25T05:23:41.014Z","type":"join"}
{"nick":"italoacasas","reason":"Quit: Connection closed for inactivity","date":"2016-11-25T06:23:03.212Z","type":"quit"}
{"nick":"grantila","date":"2016-11-25T06:30:52.075Z","type":"join"}
{"nick":"grantila","reason":"Ping timeout: 246 seconds","date":"2016-11-25T06:35:12.050Z","type":"quit"}
{"nick":"txdv","message":"kellabyte: linking the lien with the assert on github would make it easier for people too look it up","date":"2016-11-25T06:47:54.593Z","type":"message"}
{"nick":"txdv","message":"kellabyte: it means, your server is on one loop and the client you want to accept is on another","date":"2016-11-25T06:49:01.889Z","type":"message"}
{"nick":"txdv","message":"this is not allowed... though should be possible in theory at least on linux","date":"2016-11-25T06:50:22.586Z","type":"message"}
{"nick":"kellabyte","message":"txdv: the weird thing is it doesn't always happen","date":"2016-11-25T06:50:33.956Z","type":"message"}
{"nick":"kellabyte","message":"so I have no idea how the assert could sometimes be false and sometimes true","date":"2016-11-25T06:50:46.021Z","type":"message"}
{"nick":"txdv","message":"the assert only triggers if the handles or not on the same loop","date":"2016-11-25T06:51:13.978Z","type":"message"}
{"nick":"txdv","message":"you have the listener handle and you are creating a client handle ","date":"2016-11-25T06:51:46.232Z","type":"message"}
{"nick":"txdv","message":"during creationg you have to use the same loop","date":"2016-11-25T06:51:52.374Z","type":"message"}
{"nick":"kellabyte","message":"yeah I'm just really confused why it'll work many times then suddenly stop working","date":"2016-11-25T06:53:25.110Z","type":"message"}
{"nick":"kellabyte","message":"the code isn't changing lol","date":"2016-11-25T06:53:28.746Z","type":"message"}
{"nick":"txdv","message":"you are creating the handle you want to accept onto on a differnt loop?","date":"2016-11-25T06:54:10.951Z","type":"message"}
{"nick":"txdv","message":"The memory that handle is using is corrupt?","date":"2016-11-25T06:54:20.855Z","type":"message"}
{"nick":"txdv","message":"or changed somewhere?","date":"2016-11-25T06:54:36.362Z","type":"message"}
{"nick":"txdv","message":"don't know, is your code open source?","date":"2016-11-25T06:54:52.928Z","type":"message"}
{"nick":"kellabyte","message":"yeah it is, I've been trying to avoid just dumping code on someone like this but I've been stuck for awhile, I tried a repro but couldn't once I stripped stuff out","date":"2016-11-25T06:55:36.714Z","type":"message"}
{"nick":"kellabyte","message":"this is the related code: https://github.com/haywire/haywire/blob/master/src/haywire/http_server.c#L246","date":"2016-11-25T06:56:57.003Z","type":"message"}
{"nick":"txdv","message":"are you calling uv_accept on a different thread?","date":"2016-11-25T06:58:12.774Z","type":"message"}
{"nick":"kellabyte","message":"I don't think so","date":"2016-11-25T07:01:18.563Z","type":"message"}
{"nick":"txdv","message":"you are createing a thread in that linked line","date":"2016-11-25T07:02:24.454Z","type":"message"}
{"nick":"kellabyte","message":"right but thats to create an ipc worker thread","date":"2016-11-25T07:03:39.676Z","type":"message"}
{"nick":"txdv","message":"luajit","date":"2016-11-25T07:05:15.299Z","type":"message"}
{"nick":"txdv","message":"in your webbrowser","date":"2016-11-25T07:05:18.769Z","type":"message"}
{"nick":"kellabyte","message":"this whole run around is just because I want to be able to load balance across multiple event loops, its always been a really complex piece of code for what I want it to do","date":"2016-11-25T07:05:22.533Z","type":"message"}
{"nick":"txdv","message":"yeah, libuv is single threaded ...","date":"2016-11-25T07:05:42.164Z","type":"message"}
{"nick":"txdv","message":"so you have to do all the logic with multi threading yourself","date":"2016-11-25T07:05:50.811Z","type":"message"}
{"nick":"kellabyte","message":"yeah but I wish I could just move a socket to another event loop","date":"2016-11-25T07:06:01.514Z","type":"message"}
{"nick":"kellabyte","message":"in an easier way","date":"2016-11-25T07:06:14.394Z","type":"message"}
{"nick":"kellabyte","message":"its a common thing I see a lot of libuv http servers doing in various languages, each does it with varying quality","date":"2016-11-25T07:06:52.386Z","type":"message"}
{"nick":"txdv","message":"well, you have to do it over ipc","date":"2016-11-25T07:07:34.309Z","type":"message"}
{"nick":"txdv","message":"you could just pass the fd?","date":"2016-11-25T07:08:05.715Z","type":"message"}
{"nick":"txdv","message":"what line of your code throws that assert?","date":"2016-11-25T07:09:48.549Z","type":"message"}
{"nick":"txdv","message":"also, can you reproduce it reliably?","date":"2016-11-25T07:09:58.858Z","type":"message"}
{"nick":"txdv","message":"your tcp listining code seems to be correct","date":"2016-11-25T07:10:14.958Z","type":"message"}
{"nick":"txdv","message":"kellabyte: the line you linked me to just creates the thread, i want to know which uv_accept in your code blows up","date":"2016-11-25T07:10:42.488Z","type":"message"}
{"nick":"kellabyte","message":"#5  0x000000000041074a in ipc_read_cb (handle=0x7ffff75e7de8,","date":"2016-11-25T07:12:00.281Z","type":"message"}
{"nick":"kellabyte","message":"    nread=<optimized out>, buf=<optimized out>)","date":"2016-11-25T07:12:00.373Z","type":"message"}
{"nick":"kellabyte","message":"    at /root/git/haywire/src/haywire/connection_consumer.c:36","date":"2016-11-25T07:12:00.373Z","type":"message"}
{"nick":"kellabyte","message":"thank you for the help by the way :)","date":"2016-11-25T07:12:21.300Z","type":"message"}
{"nick":"txdv","message":"i didnt help yet","date":"2016-11-25T07:12:43.847Z","type":"message"}
{"nick":"txdv","message":"im on master right now, the 36 line is uv_close((uv_handle_t*) &ctx->ipc_pipe, NULL);\\","date":"2016-11-25T07:13:29.438Z","type":"message"}
{"nick":"txdv","message":"seems like you are closing the ipc pipe the read callback","date":"2016-11-25T07:14:46.680Z","type":"message"}
{"nick":"txdv","message":"https://github.com/haywire/haywire/blob/master/src/haywire/connection_consumer.c#L36","date":"2016-11-25T07:16:11.897Z","type":"message"}
{"nick":"txdv","message":"why are you doing this?","date":"2016-11-25T07:16:14.490Z","type":"message"}
{"nick":"kellabyte","message":"hmm good question, I don't remember why that was there","date":"2016-11-25T07:16:57.261Z","type":"message"}
{"nick":"kellabyte","message":"ah right, I remember following this example which also does that: https://github.com/libuv/libuv/blob/v1.x/test/benchmark-multi-accept.c#L195","date":"2016-11-25T07:18:08.513Z","type":"message"}
{"nick":"txdv","message":"it seems like you have mixed up what is the server handle and what is the client handle in that part of code","date":"2016-11-25T07:18:11.065Z","type":"message"}
{"nick":"txdv","message":"literally the smae code","date":"2016-11-25T07:18:36.036Z","type":"message"}
{"nick":"txdv","message":"D","date":"2016-11-25T07:18:38.085Z","type":"message"}
{"nick":"txdv","message":";D","date":"2016-11-25T07:18:40.085Z","type":"message"}
{"nick":"kellabyte","message":"yeah haha","date":"2016-11-25T07:18:51.855Z","type":"message"}
{"nick":"kellabyte","message":"it was a couple years ago I followed the pattern :P","date":"2016-11-25T07:19:03.301Z","type":"message"}
{"nick":"kellabyte","message":"which handle did I mix up?","date":"2016-11-25T07:20:04.302Z","type":"message"}
{"nick":"txdv","message":"nevermind","date":"2016-11-25T07:20:30.090Z","type":"message"}
{"nick":"txdv","message":"https://github.com/haywire/haywire/blob/master/src/haywire/connection_consumer.c#L23","date":"2016-11-25T07:20:31.969Z","type":"message"}
{"nick":"txdv","message":"first fix you need to do","date":"2016-11-25T07:20:34.910Z","type":"message"}
{"nick":"txdv","message":"this line returns the number of stuff you want to accept","date":"2016-11-25T07:21:17.060Z","type":"message"}
{"nick":"txdv","message":"its not a procedure, it is a function","date":"2016-11-25T07:21:25.453Z","type":"message"}
{"nick":"kellabyte","message":"so it should be 1? I'm not sure what you're saying needs to be fixed","date":"2016-11-25T07:22:38.912Z","type":"message"}
{"nick":"txdv","message":"this function returns the number of handles queued in the pipe","date":"2016-11-25T07:23:54.542Z","type":"message"}
{"nick":"txdv","message":"i put 2 connections into the pipe, this one returns the number 2 ","date":"2016-11-25T07:24:20.547Z","type":"message"}
{"nick":"txdv","message":"in the benchmark it always just gets 1 returned, because this is the way the benchmark is coded","date":"2016-11-25T07:24:37.257Z","type":"message"}
{"nick":"kellabyte","message":"oh I see, so I may have to loop and accept multiple?","date":"2016-11-25T07:24:38.387Z","type":"message"}
{"nick":"txdv","message":"I think you should","date":"2016-11-25T07:25:00.398Z","type":"message"}
{"nick":"txdv","message":"if you have a test to trigger your assertion","date":"2016-11-25T07:28:49.470Z","type":"message"}
{"nick":"txdv","message":"please try to printf that number","date":"2016-11-25T07:28:54.911Z","type":"message"}
{"nick":"txdv","message":"if it is 1 all the time, this wont fix the problem if it is > 1 then this might fix the problem","date":"2016-11-25T07:29:07.993Z","type":"message"}
{"nick":"kellabyte","message":"okay let me try that now that I know what that returns","date":"2016-11-25T07:30:01.725Z","type":"message"}
{"nick":"kellabyte","message":"lets see if I can reproduce","date":"2016-11-25T07:30:07.923Z","type":"message"}
{"nick":"kellabyte","message":"hmm I got some 0's","date":"2016-11-25T07:31:23.590Z","type":"message"}
{"nick":"kellabyte","message":"no 1 or no >1","date":"2016-11-25T07:31:27.383Z","type":"message"}
{"nick":"txdv","message":"are you sure you are sending stuff at all?","date":"2016-11-25T07:35:12.268Z","type":"message"}
{"nick":"txdv","message":"you need to rethink that part of code","date":"2016-11-25T07:35:31.378Z","type":"message"}
{"nick":"txdv","message":"that close there is in the test because it expects only ONE connection ","date":"2016-11-25T07:35:45.734Z","type":"message"}
{"nick":"txdv","message":"literally, it gets one connection, then the test is done","date":"2016-11-25T07:35:52.995Z","type":"message"}
{"nick":"txdv","message":"it seems like you want to be able to accept more than one connection?","date":"2016-11-25T07:36:15.161Z","type":"message"}
{"nick":"kellabyte","message":"yeah I misunderstood what that was for I guess, but like how is this working most of the time then? haha","date":"2016-11-25T07:36:40.169Z","type":"message"}
{"nick":"kellabyte","message":"like I'm running this on osx right now and the pending = 1 4 times for 4 threads started","date":"2016-11-25T07:36:56.631Z","type":"message"}
{"nick":"kellabyte","message":"and it runs fine","date":"2016-11-25T07:36:59.986Z","type":"message"}
{"nick":"kellabyte","message":"but on another linux machine its 0's and assert is failing","date":"2016-11-25T07:37:11.968Z","type":"message"}
{"nick":"txdv","message":"you have a mac?","date":"2016-11-25T07:38:24.011Z","type":"message"}
{"nick":"kellabyte","message":"yeah I'm debugging this in xcode and also running on linux because the linux server is the one having the troubles","date":"2016-11-25T07:38:47.569Z","type":"message"}
{"nick":"kellabyte","message":"which parts of that function do I need to do N times besides the uv_accept()?","date":"2016-11-25T07:39:22.120Z","type":"message"}
{"nick":"txdv","message":"can you give me a testcase so i can run it myself?","date":"2016-11-25T07:40:49.774Z","type":"message"}
{"nick":"grantila","date":"2016-11-25T07:41:39.939Z","type":"join"}
{"nick":"grantila","reason":"Client Quit","date":"2016-11-25T07:41:40.761Z","type":"quit"}
{"nick":"txdv","message":"i cant even compile haywire on linux debian","date":"2016-11-25T07:41:52.616Z","type":"message"}
{"nick":"kellabyte","message":"whats it complaining about?","date":"2016-11-25T07:42:42.320Z","type":"message"}
{"nick":"jessicaquynh","date":"2016-11-25T07:42:47.536Z","type":"join"}
{"nick":"saghul","date":"2016-11-25T07:43:45.724Z","type":"join"}
{"nick":"kellabyte","message":"its compiling some memory allocators and benchmarking tools, if its failing on those we can just comment those out","date":"2016-11-25T07:44:06.192Z","type":"message"}
{"nick":"kellabyte","message":"in compile_dependencies.sh just delete everything but libuv","date":"2016-11-25T07:44:28.935Z","type":"message"}
{"nick":"kellabyte","message":"then ./make.sh","date":"2016-11-25T07:44:32.284Z","type":"message"}
{"nick":"kellabyte","message":"then to reproduce the error ./build/hello_world --threads 4","date":"2016-11-25T07:45:33.277Z","type":"message"}
{"nick":"kellabyte","message":"but yeah on this linux machine thats now having issues, pending = 0 for all 20 threads","date":"2016-11-25T07:46:24.568Z","type":"message"}
{"nick":"txdv","message":"you have a linux machines with 20 cores?","date":"2016-11-25T07:48:25.962Z","type":"message"}
{"nick":"kellabyte","message":"40 cores but 20 are real, other 20 are hyperthreaded","date":"2016-11-25T07:48:40.190Z","type":"message"}
{"nick":"txdv","message":"is that your personal server>/","date":"2016-11-25T07:49:03.377Z","type":"message"}
{"nick":"kellabyte","message":"I have control of it yeah, rackspace gave me 2 bare metal instances to benchmark with","date":"2016-11-25T07:49:50.224Z","type":"message"}
{"nick":"kellabyte","message":"even if I do --threads 4 it has the same issue, so its not about number of threads","date":"2016-11-25T07:50:18.317Z","type":"message"}
{"nick":"txdv","message":"http://paste.debian.net/898700","date":"2016-11-25T07:51:47.294Z","type":"message"}
{"nick":"txdv","message":"im using ./build.sh","date":"2016-11-25T07:52:16.743Z","type":"message"}
{"nick":"kellabyte","message":"oh no don't use that","date":"2016-11-25T07:52:46.926Z","type":"message"}
{"nick":"kellabyte","message":"sorry I need to deprecate that","date":"2016-11-25T07:52:50.935Z","type":"message"}
{"nick":"kellabyte","message":"use ./make.sh","date":"2016-11-25T07:52:53.176Z","type":"message"}
{"nick":"kellabyte","message":"I'm moving from gyp to cmake","date":"2016-11-25T07:53:00.915Z","type":"message"}
{"nick":"kellabyte","action":"checks to make sure the README says make.sh lol","date":"2016-11-25T07:53:33.995Z","type":"action"}
{"nick":"txdv","message":"i didnt read it","date":"2016-11-25T07:54:56.223Z","type":"message"}
{"nick":"txdv","message":";D","date":"2016-11-25T07:54:59.280Z","type":"message"}
{"nick":"txdv","message":"just saw build in the dir and immediately used tghat","date":"2016-11-25T07:55:06.823Z","type":"message"}
{"nick":"kellabyte","message":"haha yeah I should just delete it","date":"2016-11-25T07:55:18.236Z","type":"message"}
{"nick":"kellabyte","message":"actually should just do a makefile now that I've learned how","date":"2016-11-25T07:55:46.039Z","type":"message"}
{"nick":"txdv","message":"so i started it","date":"2016-11-25T07:56:30.490Z","type":"message"}
{"nick":"txdv","message":"is there some special configuration i need to do?","date":"2016-11-25T07:56:44.616Z","type":"message"}
{"nick":"txdv","message":"im doing ab -c 1000 -n 10000 right now and everything wroks","date":"2016-11-25T07:56:55.016Z","type":"message"}
{"nick":"kellabyte","message":"you did --thread <N>?","date":"2016-11-25T07:57:24.867Z","type":"message"}
{"nick":"kellabyte","message":"err --threads","date":"2016-11-25T07:57:29.227Z","type":"message"}
{"nick":"txdv","message":"yeah","date":"2016-11-25T07:57:55.409Z","type":"message"}
{"nick":"kellabyte","message":"yeah see now its working lol","date":"2016-11-25T07:58:07.052Z","type":"message"}
{"nick":"kellabyte","message":"what would cause the ipc_read_cb() to be called but the pending pipes is 0?","date":"2016-11-25T07:59:09.734Z","type":"message"}
{"nick":"txdv","message":"can you lsb_release -a on your server","date":"2016-11-25T08:00:29.442Z","type":"message"}
{"nick":"txdv","message":"the pending_count() returns 1 on my machine ","date":"2016-11-25T08:00:59.441Z","type":"message"}
{"nick":"kellabyte","message":"Description:\tUbuntu 15.10","date":"2016-11-25T08:01:14.617Z","type":"message"}
{"nick":"kellabyte","message":"here's the thing though, its not machine specific, like I could reboot the box and it'll probably start working again","date":"2016-11-25T08:01:30.287Z","type":"message"}
{"nick":"txdv","message":"uname -a","date":"2016-11-25T08:01:35.475Z","type":"message"}
{"nick":"kellabyte","message":"sometimes it works and then it stops","date":"2016-11-25T08:01:37.930Z","type":"message"}
{"nick":"kellabyte","message":"Linux server1 4.2.0-30-generic #36-Ubuntu SMP Fri Feb 26 00:58:07 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux","date":"2016-11-25T08:01:54.156Z","type":"message"}
{"nick":"txdv","message":"does hello world create a named pipe?","date":"2016-11-25T08:02:16.944Z","type":"message"}
{"nick":"txdv","message":"on the file system?","date":"2016-11-25T08:02:29.749Z","type":"message"}
{"nick":"txdv","message":"HAYWIRE_CONNECTION_DISPATCH_PIPE_NAME","date":"2016-11-25T08:03:26.795Z","type":"message"}
{"nick":"txdv","message":"is that file present on your file system?","date":"2016-11-25T08:03:33.339Z","type":"message"}
{"nick":"kellabyte","message":"oh yeah it is","date":"2016-11-25T08:04:09.454Z","type":"message"}
{"nick":"txdv","message":"and that my friend","date":"2016-11-25T08:04:14.557Z","type":"message"}
{"nick":"txdv","message":"is the source of the error","date":"2016-11-25T08:04:19.279Z","type":"message"}
{"nick":"txdv","message":"delete it and it will work","date":"2016-11-25T08:04:21.716Z","type":"message"}
{"nick":"kellabyte","message":"you're right! what is that doing?","date":"2016-11-25T08:04:45.284Z","type":"message"}
{"nick":"txdv","message":"named pipes need a representation on the file system","date":"2016-11-25T08:04:58.294Z","type":"message"}
{"nick":"txdv","message":"because ... they are named files after all","date":"2016-11-25T08:05:05.027Z","type":"message"}
{"nick":"txdv","message":"if your app does not close cleanly, it may leave one around","date":"2016-11-25T08:05:23.860Z","type":"message"}
{"nick":"txdv","message":"like if you dont close it appropriately or something","date":"2016-11-25T08:05:32.415Z","type":"message"}
{"nick":"txdv","message":"i had the same issue in my tests for my libuv bindings","date":"2016-11-25T08:05:43.637Z","type":"message"}
{"nick":"kellabyte","message":"ahhhhhh! that explains the trend that when I have a crash and fix it, it seems broken","date":"2016-11-25T08:05:49.946Z","type":"message"}
{"nick":"txdv","message":"so yeah, before binding to that name, do a check if the file exists","date":"2016-11-25T08:06:25.047Z","type":"message"}
{"nick":"txdv","message":"delete if eventually or ask the user if it is ok to delete that named pipe","date":"2016-11-25T08:06:38.238Z","type":"message"}
{"nick":"kellabyte","message":"okay, is there a good place to put that file typically thats not current dir?","date":"2016-11-25T08:06:50.941Z","type":"message"}
{"nick":"txdv","message":"tmp?","date":"2016-11-25T08:07:02.269Z","type":"message"}
{"nick":"kellabyte","message":"yeah thats what I was thinking","date":"2016-11-25T08:07:08.112Z","type":"message"}
{"nick":"txdv","message":"but that will make it global","date":"2016-11-25T08:07:13.430Z","type":"message"}
{"nick":"kellabyte","message":"what happens if multiple processes use the same name?","date":"2016-11-25T08:07:15.983Z","type":"message"}
{"nick":"txdv","message":"local dir is nice if you want have seperate directories ","date":"2016-11-25T08:07:18.970Z","type":"message"}
{"nick":"kellabyte","message":"damn I'm so glad you helped me on that, thank you so much, I feel like an idiot though haha","date":"2016-11-25T08:08:17.900Z","type":"message"}
{"nick":"txdv","message":"what mac do you have?","date":"2016-11-25T08:08:53.071Z","type":"message"}
{"nick":"kellabyte","message":"its a macbook pro, couple years old","date":"2016-11-25T08:09:05.602Z","type":"message"}
{"nick":"kellabyte","message":"do you need me to test something?","date":"2016-11-25T08:09:09.861Z","type":"message"}
{"nick":"txdv","message":"no, just curious","date":"2016-11-25T08:09:16.400Z","type":"message"}
{"nick":"txdv","message":"you should read up on named pipes","date":"2016-11-25T08:09:26.453Z","type":"message"}
{"nick":"txdv","message":"to understand what it is doing","date":"2016-11-25T08:09:36.629Z","type":"message"}
{"nick":"txdv","message":"i think listening to the same named pipe file makes it fight for connections","date":"2016-11-25T08:10:28.902Z","type":"message"}
{"nick":"txdv","message":"but i think you can connect with multiple clients and send whatever you want over there","date":"2016-11-25T08:10:52.160Z","type":"message"}
{"nick":"txdv","message":"this mechanism you are using is for sending handles from one loop to another","date":"2016-11-25T08:11:42.020Z","type":"message"}
{"nick":"kellabyte","message":"yeah, once I move the TCP connection to another event loop then it stays there","date":"2016-11-25T08:12:00.307Z","type":"message"}
{"nick":"kellabyte","message":"its a lot of hard to reason about code with barriers and stuff though","date":"2016-11-25T08:12:21.108Z","type":"message"}
{"nick":"txdv","message":"the thing is, on unix you could just pass the fd to another event loop and open it with uv_tcp_open","date":"2016-11-25T08:12:27.550Z","type":"message"}
{"nick":"kellabyte","message":"yeah and recent versions of windows supports similar as well","date":"2016-11-25T08:12:39.119Z","type":"message"}
{"nick":"txdv","message":"but that is not supported on windows","date":"2016-11-25T08:12:40.585Z","type":"message"}
{"nick":"txdv","message":"so you are doing this named piped trick which has something similar on windows","date":"2016-11-25T08:12:54.049Z","type":"message"}
{"nick":"txdv","message":"also named pipes on windows can't send over udp connections if i remember correclty","date":"2016-11-25T08:13:07.737Z","type":"message"}
{"nick":"txdv","message":"AFAIK","date":"2016-11-25T08:14:00.293Z","type":"message"}
{"nick":"kellabyte","message":"yup, yeah I'll read up on it, thank you SO much for your time, I really appreciate it","date":"2016-11-25T08:15:50.051Z","type":"message"}
{"nick":"kellabyte","message":"I've gotten SO_REUSEPORT to work with libuv too which has been really nice","date":"2016-11-25T08:16:02.016Z","type":"message"}
{"nick":"txdv","message":"what does that do?","date":"2016-11-25T08:16:23.595Z","type":"message"}
{"nick":"txdv","message":"like reuse client connections?","date":"2016-11-25T08:16:31.988Z","type":"message"}
{"nick":"kellabyte","message":"it allows me to avoid the IPC worker threads and allows multiple threads to open sockets to the same port","date":"2016-11-25T08:16:43.556Z","type":"message"}
{"nick":"kellabyte","message":"and the linux kernel will load balance ","date":"2016-11-25T08:16:49.254Z","type":"message"}
{"nick":"txdv","message":"o yeah","date":"2016-11-25T08:17:21.659Z","type":"message"}
{"nick":"txdv","message":"i member","date":"2016-11-25T08:17:25.379Z","type":"message"}
{"nick":"kellabyte","message":"so it allows me to do things like run 20 haywire instances with 1 thread, or run 1 haywire instance with 20 threads","date":"2016-11-25T08:17:34.869Z","type":"message"}
{"nick":"kellabyte","message":"I'm hitting 6.8M req/s with 20 1 thread processes, but only 3.5M req/s with 1 process and 20 threads","date":"2016-11-25T08:18:30.371Z","type":"message"}
{"nick":"txdv","message":"https://travis-ci.org/haywire/haywire#L5886","date":"2016-11-25T08:18:48.269Z","type":"message"}
{"nick":"kellabyte","message":"yeah, I'm not sure why its failing on travisci","date":"2016-11-25T08:19:12.603Z","type":"message"}
{"nick":"txdv","message":"so what are you using haywire for?","date":"2016-11-25T08:19:50.574Z","type":"message"}
{"nick":"kellabyte","message":"learning how to write fast code and learning C, it's a couple year old project now, one company decided to contribute to it and they use it in production","date":"2016-11-25T08:20:23.062Z","type":"message"}
{"nick":"txdv","message":"what company?","date":"2016-11-25T08:20:36.235Z","type":"message"}
{"nick":"kellabyte","message":"they helped polish some things up since it was crazy experimental (still is in some ways)","date":"2016-11-25T08:20:39.598Z","type":"message"}
{"nick":"kellabyte","message":"umm I don't think they wanted to be public about it, but they use haywire as a HTTP API fronting an Aerospike cluster which is an in-memory cache cluster","date":"2016-11-25T08:21:10.842Z","type":"message"}
{"nick":"kellabyte","message":"so they use it for low latency cache hits","date":"2016-11-25T08:21:25.665Z","type":"message"}
{"nick":"kellabyte","message":"https://twitter.com/kellabyte/status/697812564793802752","date":"2016-11-25T08:22:00.486Z","type":"message"}
{"nick":"txdv","message":"thats you","date":"2016-11-25T08:22:34.873Z","type":"message"}
{"nick":"kellabyte","message":"but mostly its just me learning how to write faster code, I like trying to get as high up the techempower benchmarks as I can, its a fun challenge that drives me to learn things","date":"2016-11-25T08:23:17.278Z","type":"message"}
{"nick":"txdv","message":"you are up there","date":"2016-11-25T08:24:25.025Z","type":"message"}
{"nick":"txdv","message":"aspnet-core is higher though ","date":"2016-11-25T08:24:45.779Z","type":"message"}
{"nick":"kellabyte","message":"well, depends, for some reason round 13 for haywire was really bad, no idea why","date":"2016-11-25T08:25:02.391Z","type":"message"}
{"nick":"txdv","message":"is it possible to view older rounds?","date":"2016-11-25T08:25:26.275Z","type":"message"}
{"nick":"kellabyte","message":"yeah hold on","date":"2016-11-25T08:25:44.746Z","type":"message"}
{"nick":"kellabyte","message":"also click the \"cloud\" tab, for some reason this time around I was faster in the cloud than on bare metal haha","date":"2016-11-25T08:26:01.570Z","type":"message"}
{"nick":"kellabyte","message":"I'm assuming an anomaly happened ","date":"2016-11-25T08:26:14.190Z","type":"message"}
{"nick":"kellabyte","message":"https://www.techempower.com/benchmarks/#section=data-r10&hw=ph&test=plaintext","date":"2016-11-25T08:27:17.574Z","type":"message"}
{"nick":"txdv","message":"strange","date":"2016-11-25T08:28:41.529Z","type":"message"}
{"nick":"txdv","message":"that h2o server though","date":"2016-11-25T08:29:19.172Z","type":"message"}
{"nick":"kellabyte","message":"yeah, I'm working on some pretty big gains, if I can figure out why 20 threads in-process goes 2x slower than 20 processes, that'll unlock alot","date":"2016-11-25T08:29:48.883Z","type":"message"}
{"nick":"txdv","message":"he got rid of libuv because it was a layer of abstraction which was slowing him down","date":"2016-11-25T08:29:51.943Z","type":"message"}
{"nick":"kellabyte","message":"I don't think libuv is a big problem to be honest","date":"2016-11-25T08:30:08.686Z","type":"message"}
{"nick":"kellabyte","message":"I know some major gains, I just don't know how to polish them or this one multi-threaded bottleneck","date":"2016-11-25T08:30:33.277Z","type":"message"}
{"nick":"kellabyte","message":"h2o also uses a SIMD accelerated http parser, I'm working on integrating that too","date":"2016-11-25T08:31:03.506Z","type":"message"}
{"nick":"kellabyte","message":"but if I can get multi-threaded to run as fast as multi-process, then add tcp batching in the responses, I'll be right at the top","date":"2016-11-25T08:31:31.975Z","type":"message"}
{"nick":"txdv","message":"i remember indutny investigating that http parser","date":"2016-11-25T08:34:01.549Z","type":"message"}
{"nick":"kellabyte","message":"it works a lot differently, so I'm trying to sort out how to integrate it with haywires buffer manager","date":"2016-11-25T08:34:20.525Z","type":"message"}
{"nick":"kellabyte","message":"I have an old experimental branch that adds that parser + tcp batch sends, and it got me up to 9.8M req/sec","date":"2016-11-25T08:34:57.982Z","type":"message"}
{"nick":"kellabyte","message":"but it was hacky but proved to me what I could achieve if I could polished it and didn't lose the perf","date":"2016-11-25T08:35:24.913Z","type":"message"}
{"nick":"txdv","message":"you are ambitious","date":"2016-11-25T08:38:41.245Z","type":"message"}
{"nick":"kellabyte","message":"its fun :)","date":"2016-11-25T08:38:46.145Z","type":"message"}
{"nick":"kellabyte","message":"I wish I had a contributor or two to learn from though, I've learned doing something solo isn't the best learning environment","date":"2016-11-25T08:39:47.728Z","type":"message"}
{"nick":"txdv","message":"\"IM TOP 10 IN TECHEMPOWER SO STFU\" is way to assert geek dominance","date":"2016-11-25T08:39:54.059Z","type":"message"}
{"nick":"txdv","message":"is a nice way *","date":"2016-11-25T08:40:00.768Z","type":"message"}
{"nick":"kellabyte","message":"haha","date":"2016-11-25T08:40:01.515Z","type":"message"}
{"nick":"txdv","message":"what exactly do you want to learn?","date":"2016-11-25T08:40:30.162Z","type":"message"}
{"nick":"kellabyte","message":"well, I know my C is really sloppy, I want to learn how to just write faster things and get better at investigating bottlenecks","date":"2016-11-25T08:41:20.835Z","type":"message"}
{"nick":"kellabyte","message":"like this isn't the greatest investigation and I'm not terribly confident at what the issue is: https://github.com/gperftools/gperftools/issues/847","date":"2016-11-25T08:41:53.107Z","type":"message"}
{"nick":"txdv","message":"threads fighting for the same heap?","date":"2016-11-25T08:44:49.777Z","type":"message"}
{"nick":"txdv","message":"don't know, I'm not an expert either","date":"2016-11-25T08:44:59.968Z","type":"message"}
{"nick":"txdv","message":"but tcmalloc should literally fight that problem, according to the description","date":"2016-11-25T08:47:31.376Z","type":"message"}
{"nick":"txdv","message":"lol it was fun chasing that bug down","date":"2016-11-25T08:49:19.039Z","type":"message"}
{"nick":"txdv","message":"the fun part is that I literally had the same problem with my own tests","date":"2016-11-25T08:49:34.860Z","type":"message"}
{"nick":"kellabyte","message":"haha really?","date":"2016-11-25T08:50:18.238Z","type":"message"}
{"nick":"kellabyte","message":"thank you so very much for your time, I really appreciate it :)","date":"2016-11-25T08:50:27.969Z","type":"message"}
{"nick":"txdv","message":"a test would break or something like that and that pipe file would just be there and afterwards the test would fail again and again","date":"2016-11-25T08:51:06.507Z","type":"message"}
{"nick":"grantila","date":"2016-11-25T08:52:57.743Z","type":"join"}
{"nick":"txdv","message":"also, it had nothing to do with bad code and such, it literally was an environmental issue","date":"2016-11-25T08:55:37.727Z","type":"message"}
{"nick":"grantila","reason":"Ping timeout: 256 seconds","date":"2016-11-25T08:57:31.861Z","type":"quit"}
{"nick":"kellabyte","message":"ahh yeah","date":"2016-11-25T09:06:32.322Z","type":"message"}
{"nick":"kellabyte","message":"this really explains why it was so confusing to track down","date":"2016-11-25T09:06:43.333Z","type":"message"}
{"nick":"noora","date":"2016-11-25T09:07:05.979Z","type":"join"}
{"nick":"txdv","message":"linux does actually the worst thing with those named pipes","date":"2016-11-25T09:08:26.493Z","type":"message"}
{"nick":"txdv","message":"because that file is literally useless","date":"2016-11-25T09:08:30.943Z","type":"message"}
{"nick":"txdv","message":"you listen to it again and it does nothing? you send to it something and it just goes to /dev/null","date":"2016-11-25T09:08:54.803Z","type":"message"}
{"nick":"kellabyte","message":"lol","date":"2016-11-25T09:12:05.768Z","type":"message"}
{"nick":"kellabyte","message":"can you make an anonymous pipe?","date":"2016-11-25T09:12:16.321Z","type":"message"}
{"nick":"txdv","message":"on linux, yeah","date":"2016-11-25T09:12:46.038Z","type":"message"}
{"nick":"txdv","message":"uv_async uses anonymous pipes","date":"2016-11-25T09:12:57.521Z","type":"message"}
{"nick":"txdv","message":"windows has CreatePipe","date":"2016-11-25T09:17:13.058Z","type":"message"}
{"nick":"txdv","message":"http://stackoverflow.com/questions/14769638/what-are-the-main-disadvantages-of-windows-pipes-for-inter-process-communication?answertab=votes#tab-top","date":"2016-11-25T09:21:28.624Z","type":"message"}
{"nick":"txdv","message":"unnamed pipe have no IOCP support","date":"2016-11-25T09:21:37.427Z","type":"message"}
{"nick":"txdv","message":"that is probably why it is not supported by libuv","date":"2016-11-25T09:21:53.062Z","type":"message"}
{"nick":"txdv","message":"Everything is so confusing with those APIs","date":"2016-11-25T09:23:05.628Z","type":"message"}
{"nick":"txdv","message":"file reads writes on windows are supported with IOCP","date":"2016-11-25T09:23:15.455Z","type":"message"}
{"nick":"txdv","message":"however opening a file (which might be a IO blocking operation) is not","date":"2016-11-25T09:23:29.270Z","type":"message"}
{"nick":"txdv","message":"close on a file blocks on some unix platform on some doesn't","date":"2016-11-25T09:23:48.624Z","type":"message"}
{"nick":"txdv","message":"the linux async io primitives not used in libuv because they are too buggy","date":"2016-11-25T09:24:44.083Z","type":"message"}
{"nick":"txdv","message":"then there are the small diferences between kqueue, epoll, whatever solaris uses","date":"2016-11-25T09:25:00.472Z","type":"message"}
{"nick":"kellabyte","message":"oh weird, that is strange","date":"2016-11-25T09:33:03.491Z","type":"message"}
{"nick":"txdv","message":"libuv basically abstracts that entire clusterfuck","date":"2016-11-25T09:33:57.078Z","type":"message"}
{"nick":"txdv","message":"there are many more corner cases","date":"2016-11-25T09:34:00.161Z","type":"message"}
{"nick":"txdv","message":"i remember at first I was like \"It would be cool to write a libuv counter part in language X\" but then I realized it is just wasted effort recreating and catching all the corner cases","date":"2016-11-25T09:34:59.775Z","type":"message"}
{"nick":"noora","reason":"Quit: Page closed","date":"2016-11-25T09:51:31.046Z","type":"quit"}
{"nick":"kellabyte","message":"yeah lol","date":"2016-11-25T09:54:34.029Z","type":"message"}
{"nick":"kellabyte","message":"getting things polished really is a tough task, redoing it isn't often worth it","date":"2016-11-25T09:54:45.506Z","type":"message"}
{"nick":"seishun","date":"2016-11-25T10:22:22.582Z","type":"join"}
{"nick":"seishun","reason":"Disconnected by services","date":"2016-11-25T10:24:26.112Z","type":"quit"}
{"nick":"seishun","date":"2016-11-25T10:24:32.334Z","type":"join"}
{"nick":"grantila","date":"2016-11-25T11:14:58.678Z","type":"join"}
{"nick":"grantila","reason":"Ping timeout: 265 seconds","date":"2016-11-25T11:19:35.695Z","type":"quit"}
{"nick":"thealphanerd","reason":"Quit: farewell for now","date":"2016-11-25T11:25:09.311Z","type":"quit"}
{"nick":"thealphanerd","date":"2016-11-25T11:25:39.774Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 246 seconds","date":"2016-11-25T11:57:33.089Z","type":"quit"}
{"nick":"seishun","date":"2016-11-25T12:00:36.950Z","type":"join"}
{"nick":"seishun","reason":"Disconnected by services","date":"2016-11-25T12:02:47.815Z","type":"quit"}
{"nick":"seishun","date":"2016-11-25T12:02:54.213Z","type":"join"}
{"nick":"rendar","date":"2016-11-25T12:15:24.255Z","type":"join"}
{"nick":"grantila","date":"2016-11-25T12:25:47.601Z","type":"join"}
{"nick":"grantila","reason":"Client Quit","date":"2016-11-25T12:25:47.763Z","type":"quit"}
{"nick":"seishun","reason":"Ping timeout: 245 seconds","date":"2016-11-25T12:38:23.825Z","type":"quit"}
{"nick":"seishun","date":"2016-11-25T12:42:02.136Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 245 seconds","date":"2016-11-25T12:49:38.830Z","type":"quit"}
{"nick":"rmg","reason":"Remote host closed the connection","date":"2016-11-25T12:58:21.095Z","type":"quit"}
{"nick":"seishun","date":"2016-11-25T12:58:40.072Z","type":"join"}
{"nick":"grantila","date":"2016-11-25T13:37:04.530Z","type":"join"}
{"nick":"grantila","reason":"Ping timeout: 260 seconds","date":"2016-11-25T13:41:49.619Z","type":"quit"}
{"nick":"grantila","date":"2016-11-25T14:48:16.679Z","type":"join"}
{"nick":"grantila","reason":"Client Quit","date":"2016-11-25T14:48:16.888Z","type":"quit"}
{"nick":"Fishrock123","date":"2016-11-25T15:30:08.879Z","type":"join"}
{"nick":"grantila","date":"2016-11-25T15:59:34.595Z","type":"join"}
{"nick":"grantila","reason":"Ping timeout: 244 seconds","date":"2016-11-25T16:03:53.594Z","type":"quit"}
{"nick":"seishun","reason":"Ping timeout: 245 seconds","date":"2016-11-25T16:19:13.845Z","type":"quit"}
{"nick":"rmg","date":"2016-11-25T16:22:38.423Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 260 seconds","date":"2016-11-25T16:28:31.934Z","type":"quit"}
{"nick":"rmg","date":"2016-11-25T17:04:54.921Z","type":"join"}
{"nick":"grantila","date":"2016-11-25T17:10:22.791Z","type":"join"}
{"nick":"grantila","reason":"Client Quit","date":"2016-11-25T17:10:22.885Z","type":"quit"}
{"nick":"grantila","date":"2016-11-25T17:22:09.164Z","type":"join"}
{"nick":"jessicaquynh","date":"2016-11-25T17:23:22.824Z","type":"quit"}
{"nick":"jessicaquynh","date":"2016-11-25T17:25:37.251Z","type":"join"}
{"nick":"grantila","reason":"Quit: Leaving.","date":"2016-11-25T17:42:19.209Z","type":"quit"}
{"nick":"seishun","date":"2016-11-25T17:42:49.642Z","type":"join"}
{"nick":"italoacasas","date":"2016-11-25T18:11:22.537Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 245 seconds","date":"2016-11-25T18:15:28.881Z","type":"quit"}
{"nick":"seishun","date":"2016-11-25T18:18:17.090Z","type":"join"}
{"nick":"tunniclm","date":"2016-11-25T19:32:08.990Z","type":"join"}
{"nick":"dagobert________","new_nick":"dagobert_","date":"2016-11-25T19:42:23.402Z","type":"nick"}
{"nick":"dagobert_","new_nick":"dagobert__","date":"2016-11-25T19:42:36.325Z","type":"nick"}
{"nick":"rendar","reason":"Ping timeout: 250 seconds","date":"2016-11-25T20:09:38.985Z","type":"quit"}
{"nick":"seishun","reason":"Disconnected by services","date":"2016-11-25T20:13:29.835Z","type":"quit"}
{"nick":"seishun","date":"2016-11-25T20:13:35.898Z","type":"join"}
{"nick":"rendar","date":"2016-11-25T20:39:06.974Z","type":"join"}
{"nick":"jessicaquynh","reason":"Remote host closed the connection","date":"2016-11-25T21:12:56.107Z","type":"quit"}
{"nick":"jessicaquynh","date":"2016-11-25T21:13:33.158Z","type":"join"}
{"nick":"jessicaquynh","reason":"Remote host closed the connection","date":"2016-11-25T21:44:11.480Z","type":"quit"}
{"nick":"rendar","reason":"Quit: std::lower_bound + std::less_equal *works* with a vector without duplicates!","date":"2016-11-25T21:49:24.391Z","type":"quit"}
{"nick":"seishun","reason":"Ping timeout: 246 seconds","date":"2016-11-25T22:16:00.068Z","type":"quit"}
{"nick":"jessicaquynh","date":"2016-11-25T22:20:30.966Z","type":"join"}
{"nick":"jessicaquynh","reason":"Ping timeout: 252 seconds","date":"2016-11-25T22:24:51.965Z","type":"quit"}
{"nick":"jessicaquynh","date":"2016-11-25T22:33:03.357Z","type":"join"}
{"nick":"saghul","reason":"Ping timeout: 250 seconds","date":"2016-11-25T23:16:08.789Z","type":"quit"}
{"nick":"rmg","reason":"Remote host closed the connection","date":"2016-11-25T23:51:49.718Z","type":"quit"}
