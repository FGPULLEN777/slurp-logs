{"nick":"piscisaureus","message":"heh","date":"2011-09-21T00:00:17.009Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: you're fulltime :-(","date":"2011-09-21T00:00:21.495Z","type":"message"}
{"nick":"piscisaureus","message":"it's cheating","date":"2011-09-21T00:00:24.744Z","type":"message"}
{"nick":"piscisaureus","message":"but hey, congrats","date":"2011-09-21T00:00:41.379Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs is going DOWN","date":"2011-09-21T00:00:54.367Z","type":"message"}
{"nick":"bnoordhuis","message":"haha, poor guy","date":"2011-09-21T00:01:01.554Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: btw - if you have time - how does this new RIO sockets api make better performance possible?","date":"2011-09-21T00:03:35.700Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: \"RIO sockets api\"?","date":"2011-09-21T00:05:15.543Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: the server is booted into linux","date":"2011-09-21T00:06:39.269Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: i'm logged in i think, it's the machine with hostname NDJS-UBT5 rigth?","date":"2011-09-21T00:07:46.551Z","type":"message"}
{"nick":"bnoordhuis","message":"*right","date":"2011-09-21T00:07:48.408Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: yep","date":"2011-09-21T00:08:06.989Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, and i should rdp into the other machine and start the bench tool?","date":"2011-09-21T00:08:23.051Z","type":"message"}
{"nick":"igorzi","message":"yes, once your server is up and running, rpd into the other machine and run \"bench.cmd ...\"","date":"2011-09-21T00:09:26.508Z","type":"message"}
{"nick":"isaacs","date":"2011-09-21T00:14:07.075Z","type":"join"}
{"nick":"bnoordhuis","message":"igorzi: are those hostnames internal? they won't resolve for me here (and neither from the linux machine)","date":"2011-09-21T00:14:55.136Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: how does that matter? only 1 machine needs to run linux, the other machines know it's IP","date":"2011-09-21T00:15:47.316Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: http://msdn.microsoft.com/en-us/library/windows/desktop/hh437213%28v=VS.85%29.aspx","date":"2011-09-21T00:16:01.872Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i need to rdp to the machine","date":"2011-09-21T00:16:13.417Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: mstsc /v:NDJS-Win3.ep.interop.msftlabs.com:303","date":"2011-09-21T00:17:14.548Z","type":"message"}
{"nick":"igorzi","message":"damn, i can't rdp to any machines either now","date":"2011-09-21T00:17:27.068Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: sorry, i'll let you know once this is resolved","date":"2011-09-21T00:17:47.348Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: okay, cool","date":"2011-09-21T00:17:53.567Z","type":"message"}
{"nick":"piscisaureus","message":"I can rdp into 303","date":"2011-09-21T00:18:06.887Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: are you running your server at the linux machine?","date":"2011-09-21T00:19:02.438Z","type":"message"}
{"nick":"igorzi","message":"hmm, now it works for me too.  bnoordhuis, can you try \"mstsc /v:NDJS-Win3.ep.interop.msftlabs.com:303\"","date":"2011-09-21T00:19:07.007Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes","date":"2011-09-21T00:19:15.634Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: what is the ip of that machine?","date":"2011-09-21T00:19:54.578Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: oh nvm - you are in apparently :-)","date":"2011-09-21T00:20:06.504Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: yep, works now. must've been a dns error","date":"2011-09-21T00:20:10.684Z","type":"message"}
{"nick":"bnoordhuis","message":"err, i'm logged in, ran `bench 200 7` and it's complaining an awful lot","date":"2011-09-21T00:23:05.045Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: edit bench.cmd and put the right ip in there","date":"2011-09-21T00:23:39.991Z","type":"message"}
{"nick":"bnoordhuis","message":"oh wait","date":"2011-09-21T00:23:42.639Z","type":"message"}
{"nick":"bnoordhuis","message":"port number","date":"2011-09-21T00:23:45.573Z","type":"message"}
{"nick":"bnoordhuis","message":"that's the key","date":"2011-09-21T00:23:48.691Z","type":"message"}
{"nick":"piscisaureus","message":"or that :-)","date":"2011-09-21T00:23:50.615Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: it has to be on port 80","date":"2011-09-21T00:24:15.783Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, seemed to work","date":"2011-09-21T00:27:12.807Z","type":"message"}
{"nick":"bnoordhuis","message":"where do i find the logs?","date":"2011-09-21T00:27:15.919Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: when bench.cmd is done running it'll give you a little summary","date":"2011-09-21T00:29:13.256Z","type":"message"}
{"nick":"bnoordhuis","message":"right","date":"2011-09-21T00:29:39.968Z","type":"message"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-09-21T00:30:30.426Z","type":"quit"}
{"nick":"igorzi","message":"also, it generates log.xml files.. look for rps","date":"2011-09-21T00:30:40.032Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: numbers, numbers","date":"2011-09-21T00:32:35.471Z","type":"message"}
{"nick":"piscisaureus","message":"preliminary ones are the best","date":"2011-09-21T00:32:41.432Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: it's still busy","date":"2011-09-21T00:33:03.032Z","type":"message"}
{"nick":"bnoordhuis","message":"in progress, i should say","date":"2011-09-21T00:33:33.676Z","type":"message"}
{"nick":"bnoordhuis","message":"log3.xml                        ,   29647.3,       0.0,       123,   0.0,     0","date":"2011-09-21T00:35:23.513Z","type":"message"}
{"nick":"bnoordhuis","message":"log4.xml                        ,   29614.3,       0.0,       123,   0.0,     0","date":"2011-09-21T00:35:23.728Z","type":"message"}
{"nick":"bnoordhuis","message":"log5.xml                        ,   29604.4,       0.0,       123,   0.0,     0","date":"2011-09-21T00:35:23.728Z","type":"message"}
{"nick":"bnoordhuis","message":"log6.xml                        ,   29620.2,       0.0,       123,   0.0,     0","date":"2011-09-21T00:35:23.728Z","type":"message"}
{"nick":"bnoordhuis","message":"log7.xml                        ,   29571.4,       0.0,       123,   0.0,     0","date":"2011-09-21T00:35:23.728Z","type":"message"}
{"nick":"bnoordhuis","message":"average                         ,   29611.5,       0.0,       123,   0.0,     0","date":"2011-09-21T00:35:24.551Z","type":"message"}
{"nick":"bnoordhuis","message":"that's with a single server process","date":"2011-09-21T00:35:42.915Z","type":"message"}
{"nick":"igorzi","message":"is this with libuv?","date":"2011-09-21T00:36:07.200Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2011-09-21T00:36:43.933Z","type":"message"}
{"nick":"piscisaureus","message":"that's about twice as good as windows","date":"2011-09-21T00:37:07.295Z","type":"message"}
{"nick":"piscisaureus","message":"with a single process","date":"2011-09-21T00:37:15.564Z","type":"message"}
{"nick":"bnoordhuis","message":"running it with 8 processes now","date":"2011-09-21T00:37:27.161Z","type":"message"}
{"nick":"piscisaureus","message":"(although I haven't cracked down on malloc() usage as much as you did - but I don't think that will change much)","date":"2011-09-21T00:37:59.013Z","type":"message"}
{"nick":"igorzi","message":"btw, with node, i was getting somewhere between 5500 and 6500 r/s on linux and windows","date":"2011-09-21T00:38:49.520Z","type":"message"}
{"nick":"igorzi","message":"(http_simple)","date":"2011-09-21T00:38:56.615Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm... that's not awesomely impressive, is it?","date":"2011-09-21T00:39:37.372Z","type":"message"}
{"nick":"piscisaureus","message":"depends on what the bottleneck is","date":"2011-09-21T00:39:59.053Z","type":"message"}
{"nick":"piscisaureus","message":"I mean, 6500 connections per second","date":"2011-09-21T00:40:14.629Z","type":"message"}
{"nick":"piscisaureus","message":"that is a lot","date":"2011-09-21T00:40:21.400Z","type":"message"}
{"nick":"indutny","message":"ryah: that's a v8 bug I told you about : https://github.com/joyent/node/issues/1745","date":"2011-09-21T00:41:08.523Z","type":"message"}
{"nick":"indutny","message":"ryah: debugger was catching it too, but I removed backtrace request, because it was useless","date":"2011-09-21T00:41:41.801Z","type":"message"}
{"nick":"bnoordhuis","message":"only marginally better...","date":"2011-09-21T00:46:03.738Z","type":"message"}
{"nick":"bnoordhuis","message":"log3.xml                        ,   31728.0,       0.0,       123,   0.0,     0","date":"2011-09-21T00:46:05.815Z","type":"message"}
{"nick":"bnoordhuis","message":"log4.xml                        ,   31739.7,       0.0,       123,   0.0,     0","date":"2011-09-21T00:46:06.022Z","type":"message"}
{"nick":"bnoordhuis","message":"log5.xml                        ,   31588.7,       0.0,       123,   0.0,     0","date":"2011-09-21T00:46:06.022Z","type":"message"}
{"nick":"bnoordhuis","message":"log6.xml                        ,   31744.7,       0.0,       123,   0.0,     0","date":"2011-09-21T00:46:06.022Z","type":"message"}
{"nick":"bnoordhuis","message":"log7.xml                        ,   31757.0,       0.0,       123,   0.0,     0","date":"2011-09-21T00:46:06.022Z","type":"message"}
{"nick":"bnoordhuis","message":"------------------------------------------------------------------------------","date":"2011-09-21T00:46:06.506Z","type":"message"}
{"nick":"bnoordhuis","message":"average                         ,   31711.6,       0.0,       123,   0.0,     0","date":"2011-09-21T00:46:08.271Z","type":"message"}
{"nick":"bnoordhuis","message":"let's try it with -c 4","date":"2011-09-21T00:46:15.014Z","type":"message"}
{"nick":"piscisaureus","message":"hmm. that's not better than windows","date":"2011-09-21T00:48:40.790Z","type":"message"}
{"nick":"piscisaureus","message":"maybe this comparison is not good - prefork is just a load balancing strategy","date":"2011-09-21T00:49:27.579Z","type":"message"}
{"nick":"piscisaureus","message":"maybe we should have our benchmarks do some actual work","date":"2011-09-21T00:49:37.410Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: yeah, to emulate how this will work in node - we probably should","date":"2011-09-21T00:51:39.560Z","type":"message"}
{"nick":"bnoordhuis","message":"log3.xml                        ,   35343.2,       0.0,       123,   0.0,     2","date":"2011-09-21T00:53:26.108Z","type":"message"}
{"nick":"bnoordhuis","message":"log4.xml                        ,   36709.4,       0.0,       123,   0.0,     0","date":"2011-09-21T00:53:26.322Z","type":"message"}
{"nick":"bnoordhuis","message":"log5.xml                        ,   35116.2,       0.0,       123,   0.0,     0","date":"2011-09-21T00:53:26.322Z","type":"message"}
{"nick":"bnoordhuis","message":"log6.xml                        ,   37068.8,       0.0,       123,   0.0,     0","date":"2011-09-21T00:53:26.322Z","type":"message"}
{"nick":"bnoordhuis","message":"log7.xml                        ,   37083.5,       0.0,       123,   0.0,     0","date":"2011-09-21T00:53:26.322Z","type":"message"}
{"nick":"bnoordhuis","message":"------------------------------------------------------------------------------","date":"2011-09-21T00:53:26.628Z","type":"message"}
{"nick":"bnoordhuis","message":"average                         ,   36264.2,       0.0,       123,   0.0,     2","date":"2011-09-21T00:53:28.529Z","type":"message"}
{"nick":"bnoordhuis","message":"with -c 4","date":"2011-09-21T00:53:33.020Z","type":"message"}
{"nick":"bnoordhuis","message":"there's probably a sweet spot of # of processes vs. # of cpus","date":"2011-09-21T00:53:57.709Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: use `bench 200 1` to get an indication","date":"2011-09-21T00:54:51.630Z","type":"message"}
{"nick":"piscisaureus","message":"although you have to scroll up a little bit to see the results then","date":"2011-09-21T00:55:01.842Z","type":"message"}
{"nick":"piscisaureus","message":"36K r/s is still not better than windows","date":"2011-09-21T00:55:30.094Z","type":"message"}
{"nick":"ryah","message":"great","date":"2011-09-21T00:56:03.188Z","type":"message"}
{"nick":"ryah","message":"the grand benchmark numbers!","date":"2011-09-21T00:56:14.044Z","type":"message"}
{"nick":"ryah","message":"https://gist.github.com/1220252 <-- piscisaureus's numbers from last week","date":"2011-09-21T00:56:55.233Z","type":"message"}
{"nick":"ryah","message":"it seems like we need to add work to these programs.","date":"2011-09-21T00:57:42.450Z","type":"message"}
{"nick":"bnoordhuis","message":"check this, -c 2:","date":"2011-09-21T01:01:12.520Z","type":"message"}
{"nick":"bnoordhuis","message":"log3.xml                        ,   44931.8,       0.0,       123,   0.0,     0","date":"2011-09-21T01:01:13.729Z","type":"message"}
{"nick":"bnoordhuis","message":"log4.xml                        ,   44929.2,       0.0,       123,   0.0,     0","date":"2011-09-21T01:01:13.942Z","type":"message"}
{"nick":"bnoordhuis","message":"log5.xml                        ,   45158.5,       0.0,       123,   0.0,     0","date":"2011-09-21T01:01:13.942Z","type":"message"}
{"nick":"bnoordhuis","message":"log6.xml                        ,   44963.1,       0.0,       123,   0.0,     0","date":"2011-09-21T01:01:13.942Z","type":"message"}
{"nick":"bnoordhuis","message":"log7.xml                        ,   44907.2,       0.0,       123,   0.0,     0","date":"2011-09-21T01:01:13.942Z","type":"message"}
{"nick":"bnoordhuis","message":"------------------------------------------------------------------------------","date":"2011-09-21T01:01:15.803Z","type":"message"}
{"nick":"bnoordhuis","message":"average                         ,   44977.9,       0.0,       123,   0.0,     0","date":"2011-09-21T01:01:17.706Z","type":"message"}
{"nick":"piscisaureus","message":"ouch. you beat me there","date":"2011-09-21T01:01:24.964Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: are all 8 cores working on the linux machine btw?","date":"2011-09-21T01:02:19.753Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: they're all reported by /proc/cpuinfo so i should think so","date":"2011-09-21T01:02:45.051Z","type":"message"}
{"nick":"piscisaureus","message":"ok - yeah","date":"2011-09-21T01:02:52.556Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: do you see even distribution in htop?","date":"2011-09-21T01:07:07.721Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: almost","date":"2011-09-21T01:08:06.429Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: can i shell in?","date":"2011-09-21T01:08:24.314Z","type":"message"}
{"nick":"bnoordhuis","message":"there's always one process that consistently pegs the cpu more than the others","date":"2011-09-21T01:08:35.743Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: sure, do you know how?","date":"2011-09-21T01:08:41.459Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: https://raw.github.com/gist/6b1522538d1605f52f87/6ac86fc4f12b8c66cb4633fbd1835f0c36b5fada/id_rsa.pub","date":"2011-09-21T01:09:01.001Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: no","date":"2011-09-21T01:09:07.151Z","type":"message"}
{"nick":"bnoordhuis","message":"let me add your key","date":"2011-09-21T01:09:17.898Z","type":"message"}
{"nick":"piscisaureus","message":"add mine too","date":"2011-09-21T01:09:26.099Z","type":"message"}
{"nick":"ryah","message":"do i need to do something special?","date":"2011-09-21T01:09:27.001Z","type":"message"}
{"nick":"piscisaureus","message":"me too me too","date":"2011-09-21T01:09:28.055Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: https://gist.github.com/1230909","date":"2011-09-21T01:10:33.517Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: ryan@208.229.101.184","date":"2011-09-21T01:11:55.454Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: bertjedegekste@208.229.101.184","date":"2011-09-21T01:13:29.486Z","type":"message"}
{"nick":"bnoordhuis","message":"(i kid, i kid - just bert)","date":"2011-09-21T01:13:37.297Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: can you run a -c 4 test?","date":"2011-09-21T01:16:35.061Z","type":"message"}
{"nick":"ryah","message":" 4644 bert      20   0 19680  1452  1084 S  2.0  0.0  0:00.72 htop 4638 ryan      20   0 19676  1472  1084 R  2.0  0.0  0:01.09 htop 4645 bnoordhu  20   0 19804  1576  1084 S  2.0  0.0  0:00.60 htop","date":"2011-09-21T01:16:55.098Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: starts now","date":"2011-09-21T01:16:56.998Z","type":"message"}
{"nick":"ryah","message":":)","date":"2011-09-21T01:16:59.592Z","type":"message"}
{"nick":"ryah","message":"oh yeah, nice","date":"2011-09-21T01:17:23.580Z","type":"message"}
{"nick":"piscisaureus","message":"It's not getting saturated though","date":"2011-09-21T01:18:00.657Z","type":"message"}
{"nick":"ryah","message":"no","date":"2011-09-21T01:18:03.615Z","type":"message"}
{"nick":"ryah","message":"is it possible these three machines can't drive the load?","date":"2011-09-21T01:18:15.717Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: did you guys test with a release or a debug build?","date":"2011-09-21T01:18:32.579Z","type":"message"}
{"nick":"ryah","message":"this tool - wcat - do we trust it?","date":"2011-09-21T01:18:36.043Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: release","date":"2011-09-21T01:18:42.710Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: okay, this is a debug release","date":"2011-09-21T01:18:49.226Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: can I connect to 303?","date":"2011-09-21T01:19:08.222Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i'm logged in right now if that is what you mean","date":"2011-09-21T01:19:27.805Z","type":"message"}
{"nick":"piscisaureus","message":"yes - ok","date":"2011-09-21T01:19:37.686Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: try another -c 8 test","date":"2011-09-21T01:19:53.911Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: the current one is still running","date":"2011-09-21T01:20:07.589Z","type":"message"}
{"nick":"bnoordhuis","message":"want me to abort it?","date":"2011-09-21T01:20:10.188Z","type":"message"}
{"nick":"piscisaureus","message":"yeah whatever","date":"2011-09-21T01:20:17.367Z","type":"message"}
{"nick":"piscisaureus","message":"You got the results already or?","date":"2011-09-21T01:20:33.410Z","type":"message"}
{"nick":"bnoordhuis","message":"here goes","date":"2011-09-21T01:20:46.612Z","type":"message"}
{"nick":"bnoordhuis","message":"no, i ctrl-c'd it","date":"2011-09-21T01:20:51.466Z","type":"message"}
{"nick":"bnoordhuis","message":"Sep 20 18:21:37 NDJS-UBT5 kernel: [ 4961.124145] TCP: time wait bucket table overflow","date":"2011-09-21T01:21:45.625Z","type":"message"}
{"nick":"bnoordhuis","message":"Sep 20 18:21:37 NDJS-UBT5 kernel: [ 4961.124177] TCP: time wait bucket table overflow","date":"2011-09-21T01:21:45.839Z","type":"message"}
{"nick":"bnoordhuis","message":"Sep 20 18:21:37 NDJS-UBT5 kernel: [ 4961.124845] TCP: time wait bucket table overflow","date":"2011-09-21T01:21:45.839Z","type":"message"}
{"nick":"piscisaureus","message":"I wonder if this could be happening on windows as well","date":"2011-09-21T01:22:00.466Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: about not being able to drive the load","date":"2011-09-21T01:26:16.120Z","type":"message"}
{"nick":"bnoordhuis","message":"Sep 20 18:22:44 NDJS-UBT5 kernel: [ 5027.654095] net_ratelimit: 12032 callbacks suppressed <- hitting it hard","date":"2011-09-21T01:26:26.136Z","type":"message"}
{"nick":"bnoordhuis","message":"ep 20 18:22:58 NDJS-UBT5 kernel: [ 5041.477328] possible SYN flooding on port 80. Sending cookies.","date":"2011-09-21T01:26:26.345Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: 306 is about 40% saturated when running a test","date":"2011-09-21T01:26:45.074Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: so it's a server side thing","date":"2011-09-21T01:27:27.798Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: maybe it's synchronization?","date":"2011-09-21T01:27:41.280Z","type":"message"}
{"nick":"ryah","message":"so obviously we need to decrease the TIME_WAIT","date":"2011-09-21T01:28:00.260Z","type":"message"}
{"nick":"bnoordhuis","message":"btw, that machine's got gnome running...","date":"2011-09-21T01:28:19.553Z","type":"message"}
{"nick":"ryah","message":"which... i can't figure out how to do on linux..","date":"2011-09-21T01:28:20.083Z","type":"message"}
{"nick":"ryah","message":"ah. there we go","date":"2011-09-21T01:29:32.565Z","type":"message"}
{"nick":"ryah","message":"$ cat /proc/sys/net/ipv4/tcp_fin_timeout","date":"2011-09-21T01:29:32.912Z","type":"message"}
{"nick":"ryah","message":"60","date":"2011-09-21T01:29:33.119Z","type":"message"}
{"nick":"piscisaureus","message":"hmm. who's running apt-get intall aptitude?","date":"2011-09-21T01:29:51.145Z","type":"message"}
{"nick":"ryah","message":"root","date":"2011-09-21T01:31:06.258Z","type":"message"}
{"nick":"piscisaureus","message":"root: yt?","date":"2011-09-21T01:31:18.883Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes","date":"2011-09-21T01:31:21.651Z","type":"message"}
{"nick":"piscisaureus","message":"sorry I was just kidding","date":"2011-09-21T01:31:37.015Z","type":"message"}
{"nick":"piscisaureus","new_nick":"root","date":"2011-09-21T01:31:38.913Z","type":"nick"}
{"nick":"root","new_nick":"piscisaureus","date":"2011-09-21T01:31:52.493Z","type":"nick"}
{"nick":"bnoordhuis","message":"du witzbold","date":"2011-09-21T01:32:18.001Z","type":"message"}
{"nick":"bnoordhuis","message":"that machine needs upgrading and a server kernel...","date":"2011-09-21T01:32:37.530Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: are you using gnome?","date":"2011-09-21T01:33:11.989Z","type":"message"}
{"nick":"ryah","message":"i lowered the tcp_fin_timeout","date":"2011-09-21T01:33:31.973Z","type":"message"}
{"nick":"ryah","message":"we shoudl run the test again","date":"2011-09-21T01:33:35.605Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: do it!","date":"2011-09-21T01:33:52.172Z","type":"message"}
{"nick":"bnoordhuis","message":"i should, shouldn't i?","date":"2011-09-21T01:34:04.838Z","type":"message"}
{"nick":"ryah","message":"ntop isn't working ... it would be nice to know what sort of throughput we're seeing","date":"2011-09-21T01:34:45.688Z","type":"message"}
{"nick":"ryah","message":"anyone know how to check that?","date":"2011-09-21T01:34:49.326Z","type":"message"}
{"nick":"piscisaureus","message":"sudo ntop?","date":"2011-09-21T01:35:25.051Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: can you install sar please","date":"2011-09-21T01:37:06.636Z","type":"message"}
{"nick":"ryah","message":"and/or exit aptitude","date":"2011-09-21T01:37:35.036Z","type":"message"}
{"nick":"piscisaureus","message":"he has","date":"2011-09-21T01:37:43.667Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm, ubuntu 10.10 says:","date":"2011-09-21T01:38:01.323Z","type":"message"}
{"nick":"bnoordhuis","message":"Package sar is not available, but is referred to by another package.","date":"2011-09-21T01:38:01.940Z","type":"message"}
{"nick":"bnoordhuis","message":"This may mean that the package is missing, has been obsoleted, or","date":"2011-09-21T01:38:02.154Z","type":"message"}
{"nick":"bnoordhuis","message":"is only available from another source","date":"2011-09-21T01:38:02.154Z","type":"message"}
{"nick":"bnoordhuis","message":"However the following packages replace it:","date":"2011-09-21T01:38:02.154Z","type":"message"}
{"nick":"bnoordhuis","message":"  searchandrescue","date":"2011-09-21T01:38:02.154Z","type":"message"}
{"nick":"piscisaureus","message":"sysstat?","date":"2011-09-21T01:38:13.012Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, that's it","date":"2011-09-21T01:39:09.699Z","type":"message"}
{"nick":"ryah","message":"got it","date":"2011-09-21T01:40:39.480Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: the client machine is yours","date":"2011-09-21T01:42:22.776Z","type":"message"}
{"nick":"ryah","message":"sar -n DEV 1 ","date":"2011-09-21T01:44:41.711Z","type":"message"}
{"nick":"ryah","message":"^-- displays throughput","date":"2011-09-21T01:44:45.909Z","type":"message"}
{"nick":"rmustacc","date":"2011-09-21T01:45:27.864Z","type":"part"}
{"nick":"ryah","message":"this machine is busy.","date":"2011-09-21T01:46:27.015Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: the machine needs upgrading?","date":"2011-09-21T01:46:35.479Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: yes","date":"2011-09-21T01:46:53.230Z","type":"message"}
{"nick":"igorzi","message":"what does it need?","date":"2011-09-21T01:47:12.275Z","type":"message"}
{"nick":"piscisaureus","message":"it seems that 1 core is getting kind of busy","date":"2011-09-21T01:47:15.146Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: a server kernel, it's configured as a desktop system now","date":"2011-09-21T01:47:37.179Z","type":"message"}
{"nick":"ryah","message":"06:47:03 PM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s","date":"2011-09-21T01:47:51.284Z","type":"message"}
{"nick":"ryah","message":"06:47:04 PM      eth1 126715.00 157782.00   8880.20  10788.29      0.00      0.00      0.00","date":"2011-09-21T01:47:54.771Z","type":"message"}
{"nick":"ryah","message":"^-- this doesn't seem very high","date":"2011-09-21T01:47:58.063Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: can you upgrade it?","date":"2011-09-21T01:48:00.409Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2011-09-21T01:48:04.805Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah piscisaureus: mind if i upgrade it now?","date":"2011-09-21T01:48:11.552Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: go for it. i gtg","date":"2011-09-21T01:48:18.468Z","type":"message"}
{"nick":"piscisaureus","message":"yes I am going to sleep","date":"2011-09-21T01:48:28.411Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: are you using gnome?","date":"2011-09-21T01:48:31.350Z","type":"message"}
{"nick":"bnoordhuis","message":"the desktop, i mean","date":"2011-09-21T01:48:37.431Z","type":"message"}
{"nick":"piscisaureus","message":"so have your way bnoordhuis","date":"2011-09-21T01:48:39.683Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: nope","date":"2011-09-21T01:50:03.096Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: okay, removing","date":"2011-09-21T01:50:12.911Z","type":"message"}
{"nick":"piscisaureus","message":"I quit. goodbye.","date":"2011-09-21T01:53:41.219Z","type":"message"}
{"nick":"piscisaureus","message":"heh http://www.rust-lang.org/ <-- check the de-ajaxed issues link :-)","date":"2011-09-21T01:56:41.030Z","type":"message"}
{"nick":"brson","reason":"Quit: leaving","date":"2011-09-21T01:56:43.514Z","type":"quit"}
{"nick":"igorzi","message":"bnoordhuis: pls let me know when you're done (with updating & benchmarking)","date":"2011-09-21T01:59:18.665Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: will do","date":"2011-09-21T01:59:30.741Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: it's all yours again","date":"2011-09-21T03:34:29.018Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: thanks","date":"2011-09-21T03:45:36.881Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: got the updated numbers?","date":"2011-09-21T03:45:46.870Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: didn't run tests, the upgrade itself took so much time","date":"2011-09-21T03:46:37.833Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: do you want to hold the machine?  or you're done for today?","date":"2011-09-21T03:48:26.960Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: i'm off to bed in a minute so yeah, i'm done :)","date":"2011-09-21T03:48:57.527Z","type":"message"}
{"nick":"igorzi","message":"ok, good night :)","date":"2011-09-21T03:49:35.951Z","type":"message"}
{"nick":"piscisaureus","reason":"Read error: Connection reset by peer","date":"2011-09-21T03:53:33.986Z","type":"quit"}
{"nick":"jmp0","reason":"*.net *.split","date":"2011-09-21T04:04:57.934Z","type":"quit"}
{"nick":"pquerna","reason":"*.net *.split","date":"2011-09-21T04:05:00.788Z","type":"quit"}
{"nick":"ryah","reason":"*.net *.split","date":"2011-09-21T04:05:03.406Z","type":"quit"}
{"nick":"indutny","reason":"*.net *.split","date":"2011-09-21T04:05:03.758Z","type":"quit"}
{"nick":"erickt","reason":"*.net *.split","date":"2011-09-21T04:05:05.114Z","type":"quit"}
{"nick":"bnoordhuis","reason":"*.net *.split","date":"2011-09-21T04:05:05.397Z","type":"quit"}
{"nick":"dmkbot","reason":"*.net *.split","date":"2011-09-21T04:05:07.556Z","type":"quit"}
{"nick":"mraleph","reason":"*.net *.split","date":"2011-09-21T04:05:09.959Z","type":"quit"}
{"nick":"ryah","date":"2011-09-21T05:58:47.498Z","type":"join"}
{"nick":"isaacs","date":"2011-09-21T05:59:59.066Z","type":"join"}
{"nick":"DrMcKay","date":"2011-09-21T06:04:45.318Z","type":"join"}
{"nick":"DrMcKay","reason":"Quit: leaving","date":"2011-09-21T06:32:49.265Z","type":"quit"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-09-21T06:59:44.298Z","type":"quit"}
{"nick":"pquerna","date":"2011-09-21T06:59:55.629Z","type":"join"}
{"nick":"pquerna","reason":"Changing host","date":"2011-09-21T07:00:03.435Z","type":"quit"}
{"nick":"pquerna","date":"2011-09-21T07:00:03.647Z","type":"join"}
{"nick":"DrPizza","reason":"Excess Flood","date":"2011-09-21T07:49:38.464Z","type":"quit"}
{"nick":"DrPizza","date":"2011-09-21T07:49:46.065Z","type":"join"}
{"nick":"dmkbot","date":"2011-09-21T07:51:31.815Z","type":"join"}
{"nick":"mraleph","date":"2011-09-21T07:51:32.028Z","type":"join"}
{"nick":"indutny","date":"2011-09-21T07:51:42.588Z","type":"join"}
{"nick":"DrPizza","reason":"Excess Flood","date":"2011-09-21T07:51:47.366Z","type":"quit"}
{"nick":"jmp0","date":"2011-09-21T07:51:54.063Z","type":"join"}
{"nick":"DrPizza","date":"2011-09-21T07:52:09.059Z","type":"join"}
{"nick":"DrPizza","reason":"Excess Flood","date":"2011-09-21T07:52:57.974Z","type":"quit"}
{"nick":"DrPizza","date":"2011-09-21T07:53:04.609Z","type":"join"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-09-21T08:12:14.961Z","type":"quit"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Vitor Balocco\u000f \u000307v0.4\u000f * r\u000297d355c\u000f \u000310\u000f/ (doc/api_assets/style.css tools/doctool/doctool.js)\u0002:\u000f ","date":"2011-09-21T12:11:55.684Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f docs: Add anchor links next to each function","date":"2011-09-21T12:11:55.898Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Modify doctool.js to automatically create anchor links for","date":"2011-09-21T12:11:55.899Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f every function, for easy linking.","date":"2011-09-21T12:11:55.899Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Include support for functions that have a <h4> level","date":"2011-09-21T12:11:55.899Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Fixes: #1718. - http://git.io/Yp-xOg","date":"2011-09-21T12:11:56.109Z","type":"message"}
{"nick":"piscisaureus","date":"2011-09-21T13:30:21.377Z","type":"join"}
{"nick":"erickt","date":"2011-09-21T13:49:41.321Z","type":"join"}
{"nick":"bnoordhuis","date":"2011-09-21T14:38:22.281Z","type":"join"}
{"nick":"erickt","reason":"Quit: erickt","date":"2011-09-21T15:07:57.958Z","type":"quit"}
{"nick":"isaacs","date":"2011-09-21T15:20:07.214Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: did you mange to find out what was the bottleneck on the linux prefork bench ?","date":"2011-09-21T15:39:05.738Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: no, removing all that desktop junk from the machine took until 6 am","date":"2011-09-21T15:39:54.962Z","type":"message"}
{"nick":"bnoordhuis","message":"so i went to bed after that","date":"2011-09-21T15:40:00.004Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: you got a server kernel in place?","date":"2011-09-21T15:40:33.757Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes","date":"2011-09-21T15:40:38.714Z","type":"message"}
{"nick":"bnoordhuis","message":"but i think igorzi rebooted into windows","date":"2011-09-21T15:41:14.277Z","type":"message"}
{"nick":"piscisaureus","message":"that's good - there's another benchmark to run","date":"2011-09-21T15:41:30.057Z","type":"message"}
{"nick":"piscisaureus","message":"I'm also already thinking of how to improve the perf on my benchmark","date":"2011-09-21T15:41:49.851Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: we should probably take malloc out of the equation entirely","date":"2011-09-21T15:42:17.421Z","type":"message"}
{"nick":"piscisaureus","message":"wel...","date":"2011-09-21T15:42:24.886Z","type":"message"}
{"nick":"piscisaureus","message":"malloc is not that bad","date":"2011-09-21T15:42:28.996Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, it is","date":"2011-09-21T15:42:32.049Z","type":"message"}
{"nick":"piscisaureus","message":"it won't amount for 50% difference right?","date":"2011-09-21T15:42:37.370Z","type":"message"}
{"nick":"bnoordhuis","message":"i've seen apps spend 25-50% of their cpu time inside malloc","date":"2011-09-21T15:42:53.879Z","type":"message"}
{"nick":"piscisaureus","message":"hm","date":"2011-09-21T15:43:00.941Z","type":"message"}
{"nick":"piscisaureus","message":"okay yes we should","date":"2011-09-21T15:43:06.202Z","type":"message"}
{"nick":"indutny","message":"what's so bad about malloc?","date":"2011-09-21T15:48:34.476Z","type":"message"}
{"nick":"piscisaureus","message":"locking, traversal of some complex data structure to find a suitable spot","date":"2011-09-21T15:49:12.268Z","type":"message"}
{"nick":"indutny","message":"k","date":"2011-09-21T15:51:38.540Z","type":"message"}
{"nick":"piscisaureus","message":"I wonder how malloc perf scales with heap size","date":"2011-09-21T15:53:46.445Z","type":"message"}
{"nick":"indutny","message":"ryah: yt?","date":"2011-09-21T16:00:52.666Z","type":"message"}
{"nick":"indutny","message":"ryah: I smoothly remember that you tried to include LiveEdit functionality into node's core some time ago","date":"2011-09-21T16:01:23.181Z","type":"message"}
{"nick":"indutny","message":"ryah: what stopped you from doing this?","date":"2011-09-21T16:01:30.853Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://github.com/bnoordhuis/libuv/commit/68df605 <- 10% speedup","date":"2011-09-21T16:09:20.737Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: wow","date":"2011-09-21T16:11:49.566Z","type":"message"}
{"nick":"piscisaureus","message":"I guess I should update my benchmark","date":"2011-09-21T16:11:59.603Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but if we avoid `new` for every write in node, does that mean we also get a 10% speedup? :-)","date":"2011-09-21T16:12:32.921Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: you probably mean that tongue-in-cheek","date":"2011-09-21T16:13:30.326Z","type":"message"}
{"nick":"bnoordhuis","message":"but i suspect we can gain quite a bit by caching stuff smarter / smartly","date":"2011-09-21T16:13:46.383Z","type":"message"}
{"nick":"bnoordhuis","message":"node is eminently suited for it","date":"2011-09-21T16:14:21.777Z","type":"message"}
{"nick":"bnoordhuis","message":"it's single-threaded (for the most part) so you don't have to deal with locking","date":"2011-09-21T16:14:34.844Z","type":"message"}
{"nick":"pquerna","message":"you can do lots of things like that, but its pretty hard to implement them in node","date":"2011-09-21T16:14:46.408Z","type":"message"}
{"nick":"pquerna","message":"caching js objects?","date":"2011-09-21T16:14:54.836Z","type":"message"}
{"nick":"pquerna","message":"not sure its worth it","date":"2011-09-21T16:14:58.484Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe not js objects","date":"2011-09-21T16:15:03.789Z","type":"message"}
{"nick":"bnoordhuis","message":"but their c++ counterparts","date":"2011-09-21T16:15:12.043Z","type":"message"}
{"nick":"pquerna","message":"sure","date":"2011-09-21T16:15:16.115Z","type":"message"}
{"nick":"pquerna","message":"little object pools","date":"2011-09-21T16:15:21.690Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2011-09-21T16:15:25.200Z","type":"message"}
{"nick":"pquerna","message":"http-parser already is","date":"2011-09-21T16:15:27.052Z","type":"message"}
{"nick":"piscisaureus","message":"OK. I am going to update my prefork bench to avoid mallic","date":"2011-09-21T16:19:25.494Z","type":"message"}
{"nick":"piscisaureus","message":"malloc","date":"2011-09-21T16:19:30.576Z","type":"message"}
{"nick":"bnoordhuis","message":"pquerna: btw, https://github.com/bnoordhuis/lua-uv","date":"2011-09-21T16:24:50.332Z","type":"message"}
{"nick":"bnoordhuis","message":"WIP obviously","date":"2011-09-21T16:24:58.617Z","type":"message"}
{"nick":"pquerna","message":"nice","date":"2011-09-21T16:25:27.146Z","type":"message"}
{"nick":"pquerna","message":"need to ship all this node code.. .then back to lua <3","date":"2011-09-21T16:25:53.217Z","type":"message"}
{"nick":"pquerna","message":"bnoordhuis: https://github.com/racker/virgo/blob/master/lib/virgo_luadebugger.c","date":"2011-09-21T16:28:58.862Z","type":"message"}
{"nick":"bnoordhuis","message":"pquerna: that'll come in handy","date":"2011-09-21T16:29:43.077Z","type":"message"}
{"nick":"piscisaureus","action":"having dinner","date":"2011-09-21T16:31:24.239Z","type":"action"}
{"nick":"ryah","message":"so yesterday i measured the throughput being pretty bad","date":"2011-09-21T16:41:07.825Z","type":"message"}
{"nick":"ryah","message":"during the benchmark","date":"2011-09-21T16:41:13.451Z","type":"message"}
{"nick":"ryah","message":"it would be good to understand that","date":"2011-09-21T16:41:21.738Z","type":"message"}
{"nick":"ryah","message":"(before exploring what effect malloc does)","date":"2011-09-21T16:41:34.336Z","type":"message"}
{"nick":"ryah","message":"we should be able to serve better than 1 gbit even with a slow malloc","date":"2011-09-21T16:42:44.452Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: i suspect it's a server configuration issue","date":"2011-09-21T16:43:26.511Z","type":"message"}
{"nick":"bnoordhuis","message":"the kernel was complaining loudly in the syslog","date":"2011-09-21T16:43:42.156Z","type":"message"}
{"nick":"ryah","message":"yeah","date":"2011-09-21T16:43:46.155Z","type":"message"}
{"nick":"bnoordhuis","message":"we probably shouldn't fine-tune it too much though","date":"2011-09-21T16:44:28.554Z","type":"message"}
{"nick":"bnoordhuis","message":"node's running mostly in non-tuned environments so...","date":"2011-09-21T16:45:17.307Z","type":"message"}
{"nick":"bnoordhuis","message":"that's what i expect anyway","date":"2011-09-21T16:45:26.051Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: have you started on that vt100 parser?","date":"2011-09-21T16:46:57.346Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: no","date":"2011-09-21T16:48:13.577Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe i'll steal it from you","date":"2011-09-21T16:48:43.414Z","type":"message"}
{"nick":"bnoordhuis","message":"the task, that is","date":"2011-09-21T16:48:55.677Z","type":"message"}
{"nick":"ryah","message":"sure - but we should wait for bert so that it can be tested directly on windows","date":"2011-09-21T16:53:45.955Z","type":"message"}
{"nick":"indutny","message":"ryah: do you have a minute for debugger questions?","date":"2011-09-21T16:58:27.806Z","type":"message"}
{"nick":"indutny","message":"good morning","date":"2011-09-21T16:58:32.248Z","type":"message"}
{"nick":"brson","date":"2011-09-21T17:12:00.055Z","type":"join"}
{"nick":"erickt","date":"2011-09-21T17:12:31.605Z","type":"join"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u000212d3680\u000f \u000310\u000f/ src/unix/tty.c \u0002:\u000f unix: fix warning: implicit declaration of function ‘isatty’ - http://git.io/i1x0gQ","date":"2011-09-21T17:26:50.003Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: are you using the bench cluster now?","date":"2011-09-21T17:29:35.540Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: no, not using it now","date":"2011-09-21T17:31:25.829Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: btw, what was the throughput that you got after you added read to the benchmark?","date":"2011-09-21T17:31:43.080Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: about the same for 1-3 processes, above that it was worse","date":"2011-09-21T17:32:13.977Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: also, one of the client machines is down.. i'll get that fixed","date":"2011-09-21T17:32:26.351Z","type":"message"}
{"nick":"piscisaureus","message":"got maxed out at ~ 37K r/s","date":"2011-09-21T17:32:27.623Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: I can't terminate multi-threaded-server.exe","date":"2011-09-21T17:32:41.768Z","type":"message"}
{"nick":"piscisaureus","message":":-(","date":"2011-09-21T17:32:43.750Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: I am about to re-run the test with a prefork server that mallocs less","date":"2011-09-21T17:32:59.032Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: is windbg running?","date":"2011-09-21T17:33:44.938Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: yes, but I couldn't terminate that either. but logoff solved it","date":"2011-09-21T17:33:59.412Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: btw, i got the m-threaded server to work (with many hacks), and i couldn't get it above 30k r/s","date":"2011-09-21T17:34:09.706Z","type":"message"}
{"nick":"igorzi","message":"i also tried mallocing less (same way as bnoordhuis's benchmark), but it had no impact","date":"2011-09-21T17:34:43.689Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-21T17:35:57.184Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-21T17:36:02.333Z","type":"join"}
{"nick":"igorzi","message":"piscisaureus: bnoordhuis: i think that what we're doing now is counterproductive.. i think we really need to add some work to these benchmarks for these numbers to be meaningful.","date":"2011-09-21T17:38:29.620Z","type":"message"}
{"nick":"ryah","message":"indutny: yes - how's it going?","date":"2011-09-21T17:39:05.670Z","type":"message"}
{"nick":"igorzi","message":"like i said yesterday, node runs @ about 6K r/s.  i think we need to add enough work to these benchmarks to get ~ 6K r/s on a single cpu, and then try to see how that scales with more cpus","date":"2011-09-21T17:39:25.316Z","type":"message"}
{"nick":"igorzi","message":"ryah: ---^","date":"2011-09-21T17:39:32.058Z","type":"message"}
{"nick":"ryah","message":"igorzi: yes, agreed","date":"2011-09-21T17:39:44.821Z","type":"message"}
{"nick":"ryah","message":"optimizing the servers isn't really waht we're after :)","date":"2011-09-21T17:40:28.585Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: no dispute there","date":"2011-09-21T17:40:44.109Z","type":"message"}
{"nick":"ryah","message":"what's a good way to do work?","date":"2011-09-21T17:41:05.824Z","type":"message"}
{"nick":"bnoordhuis","message":"calculating pi to the one billionth digit!","date":"2011-09-21T17:41:18.041Z","type":"message"}
{"nick":"bnoordhuis","message":"it's never been done before either","date":"2011-09-21T17:41:33.157Z","type":"message"}
{"nick":"piscisaureus","message":"I am pretty certain now that the iocp emulation trick will not yield worse performance than single-process iocp","date":"2011-09-21T17:41:43.199Z","type":"message"}
{"nick":"piscisaureus","message":"nsdj-win7 still down","date":"2011-09-21T17:42:27.556Z","type":"message"}
{"nick":"ryah","message":"iocp emulation = igorzi's m-thread?","date":"2011-09-21T17:42:28.191Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-21T17:42:32.397Z","type":"message"}
{"nick":"ryah","message":"can we try one more test? sum the numbers from 1 to 1,000,000","date":"2011-09-21T17:43:28.607Z","type":"message"}
{"nick":"piscisaureus","message":"we need a reliable busyloop","date":"2011-09-21T17:43:29.006Z","type":"message"}
{"nick":"igorzi","message":"i was getting max of 30K r/s with m-thread sever with 5 threads.. after that the throughput started decreasing","date":"2011-09-21T17:43:35.262Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: i'm fixing nsdj-win7","date":"2011-09-21T17:44:02.146Z","type":"message"}
{"nick":"ryah","message":"(on each request)","date":"2011-09-21T17:44:03.783Z","type":"message"}
{"nick":"piscisaureus","message":"how can we do a busyloop without the compiler getting smart on us and unrolling the loop?","date":"2011-09-21T17:44:40.430Z","type":"message"}
{"nick":"ryah","message":"-O0 ?","date":"2011-09-21T17:44:49.399Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-21T17:45:04.811Z","type":"message"}
{"nick":"ryah","message":"anyway - we're most concerned about the difference between the two windows","date":"2011-09-21T17:45:06.156Z","type":"message"}
{"nick":"igorzi","message":"can we write to a volatile?","date":"2011-09-21T17:45:16.297Z","type":"message"}
{"nick":"piscisaureus","message":"I think that would work","date":"2011-09-21T17:45:34.304Z","type":"message"}
{"nick":"indutny","message":"ryah: it's going fine, I'm thinking about implementing livechange feature","date":"2011-09-21T17:46:19.846Z","type":"message"}
{"nick":"indutny","message":"ryah: looks like it's quite simple to implement for debugger","date":"2011-09-21T17:46:45.798Z","type":"message"}
{"nick":"indutny","message":"ryah: what do you think about it?","date":"2011-09-21T17:47:01.772Z","type":"message"}
{"nick":"ryah","message":"indutny: how would that work?","date":"2011-09-21T17:47:12.237Z","type":"message"}
{"nick":"indutny","message":"ryah: 'changelive' command via debugger protocol","date":"2011-09-21T17:47:27.133Z","type":"message"}
{"nick":"indutny","message":"ryah: it'll replace old script with a new script's code","date":"2011-09-21T17:47:48.007Z","type":"message"}
{"nick":"indutny","message":"ryah: it's not documented, but used inside Chrome's Dev Tools","date":"2011-09-21T17:48:04.821Z","type":"message"}
{"nick":"indutny","message":"ryah: btw, http://github.com/indutny/node/tree/feature-debugger-round-4","date":"2011-09-21T17:48:26.491Z","type":"message"}
{"nick":"ryah","message":"igorzi: write to a volatile? if you say so","date":"2011-09-21T17:48:42.456Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, that works","date":"2011-09-21T17:48:57.939Z","type":"message"}
{"nick":"ryah","message":"igorzi: i dont know what effect that has on the generated code for a single threaded app","date":"2011-09-21T17:49:00.087Z","type":"message"}
{"nick":"bnoordhuis","message":"it prevents the optimizer from getting smart","date":"2011-09-21T17:49:06.985Z","type":"message"}
{"nick":"ryah","message":"indutny: but how would it work for the user?","date":"2011-09-21T17:50:23.917Z","type":"message"}
{"nick":"indutny","message":"ryah: users will type 'live'  in debugger's repl","date":"2011-09-21T17:50:38.814Z","type":"message"}
{"nick":"indutny","message":"ryah: and all current active scripts will be monitored","date":"2011-09-21T17:50:52.624Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: scrum call in 10, don't forget","date":"2011-09-21T17:50:56.736Z","type":"message"}
{"nick":"indutny","message":"ryah: and hot-swapped on file change","date":"2011-09-21T17:51:01.854Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: thanks :)","date":"2011-09-21T17:51:04.166Z","type":"message"}
{"nick":"ryah","message":"indutny: and if they can't be hot-swapped? would you automatically restart?","date":"2011-09-21T17:51:29.717Z","type":"message"}
{"nick":"indutny","message":"ryah: once they'll type 'unlive' or 'dead'","date":"2011-09-21T17:51:31.995Z","type":"message"}
{"nick":"indutny","message":"ryah: w/o restarts","date":"2011-09-21T17:51:38.839Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: pls ping me when 7 is back up","date":"2011-09-21T17:51:43.113Z","type":"message"}
{"nick":"ryah","message":"indutny: liveedit doesn't work all the time","date":"2011-09-21T17:51:49.325Z","type":"message"}
{"nick":"indutny","message":"ryah: ah, yeah","date":"2011-09-21T17:51:55.228Z","type":"message"}
{"nick":"indutny","message":"ryah: probably better do nothing and print warning","date":"2011-09-21T17:52:08.389Z","type":"message"}
{"nick":"ryah","message":"indutny: btw see http://markmail.org/message/dlcoanxixrurdpry","date":"2011-09-21T17:52:30.256Z","type":"message"}
{"nick":"indutny","message":"ryah: oh, cool! I tried to find it","date":"2011-09-21T17:52:52.398Z","type":"message"}
{"nick":"ryah","message":"indutny: i dont like the idea.","date":"2011-09-21T17:54:13.950Z","type":"message"}
{"nick":"ryah","message":"seems confusing","date":"2011-09-21T17:54:31.718Z","type":"message"}
{"nick":"indutny","message":"ryah: yep, looks like so...","date":"2011-09-21T17:55:23.576Z","type":"message"}
{"nick":"indutny","message":"ryah: ok, going to sleep. please ping me here or by email if you've any questions about round-4 changes","date":"2011-09-21T17:56:08.640Z","type":"message"}
{"nick":"indutny","message":"ttyl","date":"2011-09-21T17:56:11.609Z","type":"message"}
{"nick":"piscisaureus","message":"hmm. time sheets...","date":"2011-09-21T17:59:30.781Z","type":"message"}
{"nick":"bnoordhuis","message":"i've been putting that off since i joined joyent...","date":"2011-09-21T18:11:54.563Z","type":"message"}
{"nick":"piscisaureus","message":"I am bad at it too. But I really must do it now.","date":"2011-09-21T18:18:20.408Z","type":"message"}
{"nick":"piscisaureus","message":"https://github.com/joyent/node/issues/1553","date":"2011-09-21T18:30:26.911Z","type":"message"}
{"nick":"ryah","message":"java uses SIGQUIT for this debug output","date":"2011-09-21T18:31:12.614Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: nsdj-win7 is back up","date":"2011-09-21T18:31:48.750Z","type":"message"}
{"nick":"ryah","message":"http://download.oracle.com/docs/cd/E19455-01/806-1367/6jalj6mv1/index.html","date":"2011-09-21T18:33:01.289Z","type":"message"}
{"nick":"bnoordhuis","message":"good ol' ctrl-\\","date":"2011-09-21T18:33:12.787Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: http://video.ch9.ms/build/2011/slides/SAC-593T_Briggs.pptx","date":"2011-09-21T18:33:31.439Z","type":"message"}
{"nick":"ryah","message":"(i'd like to have this functionality once we have domains - list all the current handles/domains)","date":"2011-09-21T18:33:34.641Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus:^--- slides about RIO sockets from build","date":"2011-09-21T18:33:43.437Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: thnx 2x","date":"2011-09-21T18:34:36.017Z","type":"message"}
{"nick":"bnoordhuis","action":"is off to dinner","date":"2011-09-21T18:34:37.363Z","type":"action"}
{"nick":"ryah","message":"piscisaureus: http://eli.thegreenplace.net/2011/01/23/how-debuggers-work-part-1/ <-- good read about gdb on linux","date":"2011-09-21T18:42:00.168Z","type":"message"}
{"nick":"ryah","message":"doesn't say how it attaches to another process though..","date":"2011-09-21T18:42:35.859Z","type":"message"}
{"nick":"ryah","message":"\"Other signals used by the JVM are for internal control purposes and do not cause it to terminate. The only control signal of interest is SIGQUIT (on Unix type platforms) and SIGBREAK (on Windows), which cause a Java core dump to be generated.\"","date":"2011-09-21T18:43:21.203Z","type":"message"}
{"nick":"ryah","message":"http://www.ibm.com/developerworks/java/library/i-signalhandling/","date":"2011-09-21T18:43:25.701Z","type":"message"}
{"nick":"ryah","message":"i guess this is CTRL_BREAK_EVENT","date":"2011-09-21T18:43:50.133Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: http://msdn.microsoft.com/en-us/library/windows/desktop/ms679303%28v=VS.85%29.aspx","date":"2011-09-21T18:46:25.358Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: I can't make up from that slides whether this makes 0-reads obsolete","date":"2011-09-21T18:46:53.548Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: they should make it possible for multiple sockets to share a receive buffer pool","date":"2011-09-21T18:47:10.672Z","type":"message"}
{"nick":"piscisaureus","message":"that'd be awesome","date":"2011-09-21T18:47:15.866Z","type":"message"}
{"nick":"piscisaureus","message":"Actually, if the RIO socket api designers did *not* solve this problem I have lost my trust in them already -","date":"2011-09-21T18:48:17.112Z","type":"message"}
{"nick":"piscisaureus","message":"it would mean they never ever wrote a C10k application","date":"2011-09-21T18:48:17.322Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: oh nice","date":"2011-09-21T18:48:50.187Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: are you against using the unix signal terminology in libuv?","date":"2011-09-21T18:50:09.954Z","type":"message"}
{"nick":"ryah","message":"e.g. \"SIGINT\" instead of \"CTRL+C\" ?","date":"2011-09-21T18:50:18.577Z","type":"message"}
{"nick":"ryah","message":"i think we should use the unix signal names","date":"2011-09-21T18:50:53.667Z","type":"message"}
{"nick":"ryah","message":"and i guess we can do kill() with http://msdn.microsoft.com/en-us/library/ms683155.aspx","date":"2011-09-21T18:52:12.613Z","type":"message"}
{"nick":"DrPizza","message":"ryah: I think CTRL_C_EVENT -> SIGINT, CTRL_BREAK_EVENT -> SIGHUP, CTRL_CLOSE_EVENT -> SIGTERM","date":"2011-09-21T18:53:29.882Z","type":"message"}
{"nick":"DrPizza","message":"piscisaureus: c10k already works fine with overlapped I/O","date":"2011-09-21T18:54:25.628Z","type":"message"}
{"nick":"ryah","message":"DrPizza: if you do zero reads :)","date":"2011-09-21T18:54:45.501Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-21T18:54:49.679Z","type":"quit"}
{"nick":"piscisaureus","message":"DrPizza: no it doesn't - you need -reads","date":"2011-09-21T18:54:53.075Z","type":"message"}
{"nick":"dmkbot","date":"2011-09-21T18:54:55.215Z","type":"join"}
{"nick":"piscisaureus","message":"0-read","date":"2011-09-21T18:54:55.706Z","type":"message"}
{"nick":"piscisaureus","message":"what ryah said","date":"2011-09-21T18:54:59.818Z","type":"message"}
{"nick":"DrPizza","message":"what do you mean, \"need\"?","date":"2011-09-21T18:55:03.292Z","type":"message"}
{"nick":"piscisaureus","message":"If you don't you are wasting a lot of memory","date":"2011-09-21T18:55:41.128Z","type":"message"}
{"nick":"piscisaureus","message":"10k sockets * 64 kb read buffers = 640mb","date":"2011-09-21T18:56:05.612Z","type":"message"}
{"nick":"DrPizza","message":"memory is cheap","date":"2011-09-21T18:56:12.162Z","type":"message"}
{"nick":"piscisaureus","message":"not that cheap","date":"2011-09-21T18:56:34.835Z","type":"message"}
{"nick":"DrPizza","message":"if you're spending a thousand bucks on a windows license","date":"2011-09-21T18:57:15.381Z","type":"message"}
{"nick":"DrPizza","message":"you can afford eonugh memory to have 64 kiB per connection","date":"2011-09-21T18:57:26.931Z","type":"message"}
{"nick":"ryah","message":"640mb isn't bad for 10k clients, but it's kind of sad that a linux program can do the same (and preform better) with 3MB","date":"2011-09-21T18:57:30.808Z","type":"message"}
{"nick":"piscisaureus","message":"c'mon - they should just fix that problem","date":"2011-09-21T18:57:41.567Z","type":"message"}
{"nick":"piscisaureus","message":"it's not impossible","date":"2011-09-21T18:57:46.177Z","type":"message"}
{"nick":"DrPizza","message":"I don't think it is a problem","date":"2011-09-21T18:57:52.886Z","type":"message"}
{"nick":"DrPizza","message":"Ithink \"read as much as you can into this buffer\" is a perfectly reasonable model","date":"2011-09-21T18:58:10.306Z","type":"message"}
{"nick":"piscisaureus","message":"just give the kernel a pool of buffers - when data comes in, pick a buffer from the pool and return that","date":"2011-09-21T18:58:16.600Z","type":"message"}
{"nick":"piscisaureus","message":"^-- much better. not difficult to implement.","date":"2011-09-21T18:58:30.120Z","type":"message"}
{"nick":"DrPizza","message":"that's what RIO does","date":"2011-09-21T18:58:45.876Z","type":"message"}
{"nick":"DrPizza","message":"you carve off a big block of memory","date":"2011-09-21T18:58:51.177Z","type":"message"}
{"nick":"DrPizza","message":"then hand it to the kernel","date":"2011-09-21T18:58:54.291Z","type":"message"}
{"nick":"DrPizza","message":"the downside appears to be that the memory then has to be pinned","date":"2011-09-21T18:59:21.431Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: multiple sockets share the same memory?","date":"2011-09-21T18:59:21.637Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: that is also true for iocp","date":"2011-09-21T18:59:30.677Z","type":"message"}
{"nick":"DrPizza","message":"iocp doesn't require the whole block to be pinned","date":"2011-09-21T18:59:41.601Z","type":"message"}
{"nick":"piscisaureus","message":"it does","date":"2011-09-21T18:59:45.648Z","type":"message"}
{"nick":"DrPizza","message":"no it doesn't","date":"2011-09-21T18:59:50.334Z","type":"message"}
{"nick":"DrPizza","message":"it doesn't DMA into it (apparently)","date":"2011-09-21T18:59:56.025Z","type":"message"}
{"nick":"piscisaureus","message":"it still locks the memory block into the non-paged pool","date":"2011-09-21T19:00:10.594Z","type":"message"}
{"nick":"piscisaureus","message":"I don't say it has to do this - it just does.","date":"2011-09-21T19:00:18.493Z","type":"message"}
{"nick":"DrPizza","message":"????","date":"2011-09-21T19:01:05.895Z","type":"message"}
{"nick":"DrPizza","message":"IOCP DMAs intoa  kernel buffer","date":"2011-09-21T19:01:12.641Z","type":"message"}
{"nick":"DrPizza","message":"then memcpy()s to the user buffer","date":"2011-09-21T19:01:19.138Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: that's true - but it still locks the user buffer into physical memory","date":"2011-09-21T19:01:32.670Z","type":"message"}
{"nick":"DrPizza","message":"(according to the RIO slides, anyway)","date":"2011-09-21T19:01:38.394Z","type":"message"}
{"nick":"DrPizza","message":"different kind of pinning","date":"2011-09-21T19:02:42.441Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: what kind of pinning are you talking about then?","date":"2011-09-21T19:03:08.604Z","type":"message"}
{"nick":"DrPizza","message":"RIO uses privileged (SeLockPages orwhatever it is) long-term pinning, so that it can DMA directly to the user memory, but IIRC such pages don't go in the NPP.","date":"2011-09-21T19:05:23.839Z","type":"message"}
{"nick":"piscisaureus","message":"well - being able to DMA into a buffer kind of implies the pages to be nonpaged or?","date":"2011-09-21T19:06:56.479Z","type":"message"}
{"nick":"DrPizza","message":"IOCP doesn't DMA into the user buffer","date":"2011-09-21T19:07:10.138Z","type":"message"}
{"nick":"DrPizza","message":"I thought itdid, but these slides say otherwise","date":"2011-09-21T19:07:17.316Z","type":"message"}
{"nick":"piscisaureus","message":"it doesn't really surprise me","date":"2011-09-21T19:07:39.864Z","type":"message"}
{"nick":"DrPizza","message":"but maybe I am misinterpreting these slides","date":"2011-09-21T19:07:41.877Z","type":"message"}
{"nick":"DrPizza","message":"but if you look at slide 13","date":"2011-09-21T19:07:56.315Z","type":"message"}
{"nick":"piscisaureus","message":"yes - I interpret that the same as you do","date":"2011-09-21T19:08:13.585Z","type":"message"}
{"nick":"DrPizza","message":"it DMAs into one buffer, then memcpy()s into the user buffer","date":"2011-09-21T19:08:14.299Z","type":"message"}
{"nick":"piscisaureus","message":"But it doesn't matter","date":"2011-09-21T19:08:19.631Z","type":"message"}
{"nick":"piscisaureus","message":"The problem is that IOCP non-0 reads wastes memory - and RIO apparently still does","date":"2011-09-21T19:08:52.484Z","type":"message"}
{"nick":"piscisaureus","message":"that's just sad","date":"2011-09-21T19:08:55.279Z","type":"message"}
{"nick":"DrPizza","message":"how does RIO waste memory?","date":"2011-09-21T19:09:11.838Z","type":"message"}
{"nick":"piscisaureus","message":"The same way as IOCP non-0-reads wastes memory","date":"2011-09-21T19:09:49.564Z","type":"message"}
{"nick":"piscisaureus","message":"RIOReceive takes a RIO_RQ","date":"2011-09-21T19:10:15.139Z","type":"message"}
{"nick":"piscisaureus","message":"... and a buffer","date":"2011-09-21T19:10:49.014Z","type":"message"}
{"nick":"piscisaureus","message":"a RIO_RQ is pegged to one socket","date":"2011-09-21T19:11:04.960Z","type":"message"}
{"nick":"piscisaureus","message":"So maybe I should e-mail one of Ben Schultz, Osman Ertugay, Ed Briggs","date":"2011-09-21T19:12:43.364Z","type":"message"}
{"nick":"DrPizza","message":"but the RIO_RQ isn't tied to a particular RIO buffer","date":"2011-09-21T19:14:12.723Z","type":"message"}
{"nick":"DrPizza","message":"the rio buffer can be shared amongst all sockets","date":"2011-09-21T19:14:44.346Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: but you have to call RioReceive for every socket - and the RioReceive call takes a buffer","date":"2011-09-21T19:15:11.052Z","type":"message"}
{"nick":"DrPizza","message":"no, it takes a portion of a buffer","date":"2011-09-21T19:15:33.945Z","type":"message"}
{"nick":"DrPizza","message":"RIO_BUF  is used to break up the onebig rio buffer into chunks for each I/O","date":"2011-09-21T19:15:48.060Z","type":"message"}
{"nick":"piscisaureus","message":"meh","date":"2011-09-21T19:15:48.733Z","type":"message"}
{"nick":"piscisaureus","message":"it doesn't change anything","date":"2011-09-21T19:15:56.730Z","type":"message"}
{"nick":"piscisaureus","message":"you still have to dedicate 64kb of memory for 1 socket receive operation","date":"2011-09-21T19:16:12.155Z","type":"message"}
{"nick":"piscisaureus","message":"and have at least 1 receive operation per socket","date":"2011-09-21T19:16:28.611Z","type":"message"}
{"nick":"DrPizza","message":"why 64 kiB?","date":"2011-09-21T19:16:46.597Z","type":"message"}
{"nick":"piscisaureus","message":"whether this is a portion of a big buffer or something separate ist mir ganz egal","date":"2011-09-21T19:16:52.429Z","type":"message"}
{"nick":"DrPizza","message":"you can create RIO_BUFs of less than page granularity","date":"2011-09-21T19:16:59.252Z","type":"message"}
{"nick":"piscisaureus","message":"sure","date":"2011-09-21T19:17:03.775Z","type":"message"}
{"nick":"piscisaureus","message":"you can read 1 byte at a time","date":"2011-09-21T19:17:10.454Z","type":"message"}
{"nick":"piscisaureus","message":"goodbye, performance","date":"2011-09-21T19:17:15.224Z","type":"message"}
{"nick":"DrPizza","message":"instead of doing 64 kiB reads, I would think you'd want to try RWIN-sized reads, or maybe even RWIN * # of delayed acks","date":"2011-09-21T19:23:25.899Z","type":"message"}
{"nick":"igorzi","message":"ryah: does the debugger stuff (that indutny has been working on) work on windows?","date":"2011-09-21T19:28:53.915Z","type":"message"}
{"nick":"ryah","message":"igorzi: yeah","date":"2011-09-21T19:53:21.698Z","type":"message"}
{"nick":"ryah","message":"igorzi: node debug somescript.js","date":"2011-09-21T19:53:35.656Z","type":"message"}
{"nick":"igorzi","message":"ryah: yeah, i just tried.. this is very cool!","date":"2011-09-21T19:53:38.693Z","type":"message"}
{"nick":"ryah","message":"im looking at the rio docs - but i don't really understand - does it still work with GetQueuedCompletionStatus?","date":"2011-09-21T19:54:20.352Z","type":"message"}
{"nick":"ryah","message":"or do you have to poll some other way?","date":"2011-09-21T19:54:30.163Z","type":"message"}
{"nick":"ryah","message":"http://www.infoq.com/articles/multi-core-node-js <-- why would they do this without asking us about it?","date":"2011-09-21T19:57:44.508Z","type":"message"}
{"nick":"ryah","message":"i mean none of these people are involved in node development","date":"2011-09-21T19:58:13.101Z","type":"message"}
{"nick":"ryah","message":"well - whatever","date":"2011-09-21T19:58:56.949Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: it meshes well with GetQueuedCompletionStatus so it seems","date":"2011-09-21T19:59:56.819Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: you can just request to be notified through iocp","date":"2011-09-21T20:00:08.276Z","type":"message"}
{"nick":"igorzi","message":"i think you can still use GetQueuedCompletionStatus or poll RIODequeueCompletion","date":"2011-09-21T20:00:33.548Z","type":"message"}
{"nick":"piscisaureus","message":"it was in the slides","date":"2011-09-21T20:00:46.411Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I can't make up what this \"node multi-core\" is. Are they working on something together?","date":"2011-09-21T20:08:39.002Z","type":"message"}
{"nick":"DrPizza","message":"yeah, you either GQCS if it's bound to an IOCP, wait for an event, if it's bound ot an event, or poll.","date":"2011-09-21T20:08:59.718Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: no - they're just talking about their different wrappers around sendfd","date":"2011-09-21T20:09:04.219Z","type":"message"}
{"nick":"ryah","message":"i wonder if the benchmarks they're reporting are using IOCP or the RIODequeueCompletion?","date":"2011-09-21T20:10:01.383Z","type":"message"}
{"nick":"DrPizza","message":"you use both","date":"2011-09-21T20:10:08.113Z","type":"message"}
{"nick":"DrPizza","message":"well I mean","date":"2011-09-21T20:10:13.676Z","type":"message"}
{"nick":"DrPizza","message":"you use RIODequeuecompletion regardless of whether oyu're polling or using IOCP","date":"2011-09-21T20:10:27.016Z","type":"message"}
{"nick":"ryah","message":"i guess you also have the option of using RIODequeueCompletion alone (if you're only doing socket stuff)","date":"2011-09-21T20:11:01.525Z","type":"message"}
{"nick":"ryah","message":"\"May provide the highest performance and lowest latency, but high CPU utilization","date":"2011-09-21T20:11:16.384Z","type":"message"}
{"nick":"DrPizza","message":"yes","date":"2011-09-21T20:11:19.847Z","type":"message"}
{"nick":"piscisaureus","message":"because it's really polling","date":"2011-09-21T20:11:40.190Z","type":"message"}
{"nick":"piscisaureus","message":"?","date":"2011-09-21T20:11:44.639Z","type":"message"}
{"nick":"DrPizza","message":"yes, riodqueuecompletion doesn't wait","date":"2011-09-21T20:11:55.657Z","type":"message"}
{"nick":"DrPizza","message":"it just tries to dequeue if there's anything to dequeue","date":"2011-09-21T20:12:01.826Z","type":"message"}
{"nick":"piscisaureus","message":"so they're saying: a busyloop provides the best performance","date":"2011-09-21T20:12:14.522Z","type":"message"}
{"nick":"piscisaureus","message":":-/","date":"2011-09-21T20:12:15.511Z","type":"message"}
{"nick":"DrPizza","message":"so you can just call it in a loop with YieldProcessor or Sleep(0) or w/e","date":"2011-09-21T20:12:17.004Z","type":"message"}
{"nick":"piscisaureus","message":"wow","date":"2011-09-21T20:12:19.382Z","type":"message"}
{"nick":"ryah","message":"it doesn't block?","date":"2011-09-21T20:12:21.888Z","type":"message"}
{"nick":"DrPizza","message":"no","date":"2011-09-21T20:12:25.518Z","type":"message"}
{"nick":"DrPizza","message":"ryah: if you want itt o block, you wait on the IOCP first","date":"2011-09-21T20:12:38.951Z","type":"message"}
{"nick":"DrPizza","message":"then dequeue.","date":"2011-09-21T20:12:41.009Z","type":"message"}
{"nick":"DrPizza","message":"or wait on the event first","date":"2011-09-21T20:12:46.596Z","type":"message"}
{"nick":"DrPizza","message":"then dequeue","date":"2011-09-21T20:12:48.647Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-21T20:13:03.510Z","type":"message"}
{"nick":"piscisaureus","message":"this quote: \"Windows Server 2008R2 sustains ~2 Million datagrams per second\"","date":"2011-09-21T20:13:55.631Z","type":"message"}
{"nick":"piscisaureus","message":"I wonder how they do it","date":"2011-09-21T20:14:02.700Z","type":"message"}
{"nick":"piscisaureus","message":"I never managed to even achieve 10% of that","date":"2011-09-21T20:14:29.117Z","type":"message"}
{"nick":"DrPizza","message":"well they may have 10x the processors","date":"2011-09-21T20:14:56.070Z","type":"message"}
{"nick":"piscisaureus","message":"heh","date":"2011-09-21T20:15:02.202Z","type":"message"}
{"nick":"DrPizza","message":"or more!","date":"2011-09-21T20:15:10.087Z","type":"message"}
{"nick":"piscisaureus","message":"it's cheating","date":"2011-09-21T20:15:14.076Z","type":"message"}
{"nick":"DrPizza","message":"although who knows","date":"2011-09-21T20:15:16.524Z","type":"message"}
{"nick":"piscisaureus","message":"Windows XP can send 30 million search requests per second to google","date":"2011-09-21T20:15:58.099Z","type":"message"}
{"nick":"piscisaureus","message":"Just takes a few continents packed with xp computers","date":"2011-09-21T20:16:30.905Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Fedor Indutny\u000f \u000307new-tty-binding\u000f * r\u000286f8701\u000f \u000310\u000f/ lib/_debugger.js \u0002:\u000f [debugger] fix 'debug> connecting...', fixed autostart (XXX figure out why it wasn't working in some cases), fixed highlighting for first line of module's code - http://git.io/S5Sxng","date":"2011-09-21T20:24:28.187Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Fedor Indutny\u000f \u000307new-tty-binding\u000f * r\u000213c0156\u000f \u000310\u000f/ lib/_debugger.js \u0002:\u000f [debugger] optimize context's properties initialization, make 'list' a function, not a getter - http://git.io/i-verg","date":"2011-09-21T20:24:28.427Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Fedor Indutny\u000f \u000307new-tty-binding\u000f * r\u0002f1135b9\u000f \u000310\u000f/ lib/_debugger.js \u0002:\u000f [debugger] shorten break message - http://git.io/m_sbnQ","date":"2011-09-21T20:24:28.856Z","type":"message"}
{"nick":"ryah","message":"fuck.. ","date":"2011-09-21T20:24:33.878Z","type":"message"}
{"nick":"ryah","message":"^-- force pushing this branch","date":"2011-09-21T20:25:06.195Z","type":"message"}
{"nick":"piscisaureus","message":"volatile int fubar;","date":"2011-09-21T20:25:45.253Z","type":"message"}
{"nick":"piscisaureus","message":"for (fubar = 50000; fubar > 0; fubar--) {}","date":"2011-09-21T20:25:45.459Z","type":"message"}
{"nick":"piscisaureus","message":"^-- that's what we need to do","date":"2011-09-21T20:25:45.459Z","type":"message"}
{"nick":"DrPizza","message":"do or what","date":"2011-09-21T20:28:02.324Z","type":"message"}
{"nick":"DrPizza","message":"er, for what","date":"2011-09-21T20:28:05.572Z","type":"message"}
{"nick":"DrPizza","message":"burning cycles?","date":"2011-09-21T20:28:07.507Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Igor Zinkovsky\u000f \u000307file_watcher\u000f * r\u00021e0757f\u000f \u000310\u000f/ (9 files in 5 dirs)\u0002:\u000f windows: file watcher - http://git.io/YFVNlw","date":"2011-09-21T20:28:09.643Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307file_watcher\u000f * r\u00022a1c32a\u000f \u000310\u000f/ (6 files in 3 dirs)\u0002:\u000f linux: implement file watcher API - http://git.io/xZMwxQ","date":"2011-09-21T20:28:09.988Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Fedor Indutny\u000f \u000307master\u000f * r\u00023148f14\u000f \u000310\u000f/ lib/_debugger.js \u0002:\u000f [debugger] fix 'debug> connecting...', fixed autostart (XXX figure out why it wasn't working in some cases), fixed highlighting for first line of module's code - http://git.io/3lvlXQ","date":"2011-09-21T20:28:24.382Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Fedor Indutny\u000f \u000307master\u000f * r\u000279fd1f7\u000f \u000310\u000f/ lib/_debugger.js \u0002:\u000f [debugger] optimize context's properties initialization, make 'list' a function, not a getter - http://git.io/q0KUIA","date":"2011-09-21T20:28:25.328Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Fedor Indutny\u000f \u000307master\u000f * r\u00028efe7a8\u000f \u000310\u000f/ lib/_debugger.js \u0002:\u000f [debugger] shorten break message - http://git.io/zrQp_A","date":"2011-09-21T20:28:25.564Z","type":"message"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-09-21T20:28:37.353Z","type":"quit"}
{"nick":"igorzi","message":"bnoordhuis: i rebased your and my changes against master, and put them into https://github.com/joyent/libuv/tree/file_watcher.","date":"2011-09-21T20:29:25.477Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: can you pls verify that linux stuff is correct and works?","date":"2011-09-21T20:29:38.607Z","type":"message"}
{"nick":"ryah","message":"guys - i need something like: int uv_is_pipe(int fd)","date":"2011-09-21T20:39:54.926Z","type":"message"}
{"nick":"ryah","message":"in node we test if stdout is a tty, a pipe, or a file","date":"2011-09-21T20:40:11.254Z","type":"message"}
{"nick":"ryah","message":"and switch how we deal with output differently","date":"2011-09-21T20:40:28.186Z","type":"message"}
{"nick":"ryah","message":"i think in windows you will never have a pipe for stdout which is attached to an iocp?","date":"2011-09-21T20:40:55.796Z","type":"message"}
{"nick":"ryah","message":"int uv_is_stdout_blocking() would also work","date":"2011-09-21T20:42:02.377Z","type":"message"}
{"nick":"ryah","message":"but im trying to be more general...","date":"2011-09-21T20:42:08.727Z","type":"message"}
{"nick":"DrPizza","message":"you could couldn't you?","date":"2011-09-21T20:42:22.309Z","type":"message"}
{"nick":"DrPizza","message":"if you were chaining node instances for example, they'd use iocp-attached pipes, wouldn't they?","date":"2011-09-21T20:42:45.501Z","type":"message"}
{"nick":"igorzi","message":"yeah, most likely the stdout pipe is created without FILE_FLAG_OVERLAPPED (for non-node child processes)","date":"2011-09-21T20:43:04.174Z","type":"message"}
{"nick":"ryah","message":"\"node script.js | cat\"","date":"2011-09-21T20:43:04.504Z","type":"message"}
{"nick":"ryah","message":"^-- what will stdout be?","date":"2011-09-21T20:43:08.694Z","type":"message"}
{"nick":"piscisaureus","message":"pipe","date":"2011-09-21T20:43:17.640Z","type":"message"}
{"nick":"DrPizza","message":"probably a blocking pipe","date":"2011-09-21T20:43:20.128Z","type":"message"}
{"nick":"piscisaureus","message":"anonymous pipe even, they are always blocking","date":"2011-09-21T20:43:30.977Z","type":"message"}
{"nick":"DrPizza","message":"piscisaureus: they can probably be reopened, can't they?","date":"2011-09-21T20:43:41.755Z","type":"message"}
{"nick":"piscisaureus","message":"don't know","date":"2011-09-21T20:43:54.413Z","type":"message"}
{"nick":"DrPizza","message":"to make them overlapped","date":"2011-09-21T20:43:54.579Z","type":"message"}
{"nick":"ryah","message":"in the case that stdout is not a tty - we should always use uv_fs_write() for stdout - correct?","date":"2011-09-21T20:44:04.065Z","type":"message"}
{"nick":"ryah","message":"(on windows)","date":"2011-09-21T20:44:07.600Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: maybe not always - but I guess it's fine for now","date":"2011-09-21T20:44:29.021Z","type":"message"}
{"nick":"DrPizza","message":"ryah: require('child_process').exec('node') (or whatever it is) would spawn node with an overlapped pipe on stdout, I think","date":"2011-09-21T20:44:43.020Z","type":"message"}
{"nick":"ryah","message":"this is what's currently happening","date":"2011-09-21T20:44:45.158Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: bnoordhuis: igorzi: win-prefork with fake work (https://gist.github.com/1233242)","date":"2011-09-21T20:44:49.430Z","type":"message"}
{"nick":"piscisaureus","message":"1 process: 4727 r/s","date":"2011-09-21T20:44:49.640Z","type":"message"}
{"nick":"piscisaureus","message":"2 processes: 9062 r/s","date":"2011-09-21T20:44:49.640Z","type":"message"}
{"nick":"piscisaureus","message":"4 processes: 15821 r/s","date":"2011-09-21T20:44:49.640Z","type":"message"}
{"nick":"piscisaureus","message":"8 processes: 23858 r/s","date":"2011-09-21T20:44:49.640Z","type":"message"}
{"nick":"piscisaureus","message":"16 processes: 22895 r/s\u0003","date":"2011-09-21T20:44:50.400Z","type":"message"}
{"nick":"DrPizza","message":"ryah: I think that sohuld be reasonable, yes","date":"2011-09-21T20:45:58.888Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: do you know what happens between 4 and 8 processes?  where does it max out?","date":"2011-09-21T20:47:48.613Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: no - let me try","date":"2011-09-21T20:48:02.233Z","type":"message"}
{"nick":"ryah","message":"piscisaureus, igorzi, DrPizza: you okay with these functions https://gist.github.com/1233308 ?","date":"2011-09-21T21:04:03.094Z","type":"message"}
{"nick":"DrPizza","message":"I'd rather have a struct terminal_size { int width; int height; }, but I guess that's taste","date":"2011-09-21T21:05:19.562Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: (1) do we have a UV_FILE type atm? (2) DrPizza is kind of right, the width-height ordering is not necessarily clear. uv_tty_get_winsize(uv_tty_t*, int* w, int* h) also works.","date":"2011-09-21T21:06:48.091Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi:","date":"2011-09-21T21:06:48.299Z","type":"message"}
{"nick":"piscisaureus","message":"\u00035 processes: 18601","date":"2011-09-21T21:06:48.299Z","type":"message"}
{"nick":"piscisaureus","message":"6 processes: 21158","date":"2011-09-21T21:06:48.299Z","type":"message"}
{"nick":"piscisaureus","message":"7 processes: 21675","date":"2011-09-21T21:06:48.299Z","type":"message"}
{"nick":"DrPizza","message":"after all, a standard terminal is 80x25, not 25x80","date":"2011-09-21T21:06:59.226Z","type":"message"}
{"nick":"ryah","message":"yes we have UV_FILE - okay i'll change the sig for uv_tty_get_winsize()","date":"2011-09-21T21:07:47.286Z","type":"message"}
{"nick":"ryah","message":"terminals are so painful","date":"2011-09-21T21:09:54.682Z","type":"message"}
{"nick":"DrPizza","message":"agreed","date":"2011-09-21T21:10:06.197Z","type":"message"}
{"nick":"DrPizza","message":"node should use a GUI instead","date":"2011-09-21T21:10:12.687Z","type":"message"}
{"nick":"DrPizza","message":":p","date":"2011-09-21T21:10:16.989Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: it that an 8 core box?","date":"2011-09-21T21:11:29.030Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-21T21:11:33.862Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: you know which box it is :-/","date":"2011-09-21T21:11:49.676Z","type":"message"}
{"nick":"ryah","message":"yeah sorry :)","date":"2011-09-21T21:12:22.082Z","type":"message"}
{"nick":"piscisaureus","message":"so if this benchmark is good 8 nodes should be able to handle 24K r/s on this box","date":"2011-09-21T21:14:07.234Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: so. sendfd api","date":"2011-09-21T21:15:28.173Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: you're doing this over a named pipe, correct?","date":"2011-09-21T21:15:50.733Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: yes, but that doesn't really matter","date":"2011-09-21T21:16:05.254Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: should we add another \"channel\" to uv_spawn?","date":"2011-09-21T21:16:24.287Z","type":"message"}
{"nick":"ryah","message":"for sending stuff?","date":"2011-09-21T21:16:27.795Z","type":"message"}
{"nick":"ryah","message":"can use it for cp.fork() too","date":"2011-09-21T21:16:35.716Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I guess","date":"2011-09-21T21:16:39.208Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-21T21:16:42.667Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: it needs to be a special UV_XXX type","date":"2011-09-21T21:17:02.363Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: right - so is your thing going to work with non-sockets as well?","date":"2011-09-21T21:17:50.566Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: it could - but it would need extra work","date":"2011-09-21T21:18:09.271Z","type":"message"}
{"nick":"ryah","message":"does it work with non-servers?","date":"2011-09-21T21:18:19.023Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: yes, that too needs extra work","date":"2011-09-21T21:18:31.371Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: somehow it only works with servers if the root process calls listen() first","date":"2011-09-21T21:18:53.123Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: what if we add a \"bool use_channel\" to process_options","date":"2011-09-21T21:19:04.172Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: then have something like uv_send_socket(uv_process_t*, uv_tcp_t*)","date":"2011-09-21T21:19:31.156Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: how would you send user data over the channel?","date":"2011-09-21T21:19:52.940Z","type":"message"}
{"nick":"ryah","message":"uv_ipc(uv_process_t*, uv_buf_t*)","date":"2011-09-21T21:20:13.315Z","type":"message"}
{"nick":"ryah","message":"or something","date":"2011-09-21T21:20:18.383Z","type":"message"}
{"nick":"ryah","message":"hm","date":"2011-09-21T21:20:24.389Z","type":"message"}
{"nick":"ryah","message":"how do we recv it ?","date":"2011-09-21T21:20:33.396Z","type":"message"}
{"nick":"piscisaureus","message":":-)","date":"2011-09-21T21:20:38.118Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I think we considered mimicking the accept api for receiving fd's","date":"2011-09-21T21:21:08.192Z","type":"message"}
{"nick":"isaacs","date":"2011-09-21T21:21:38.729Z","type":"join"}
{"nick":"piscisaureus","message":"let me think - there may be other ways to do this","date":"2011-09-21T21:22:46.697Z","type":"message"}
{"nick":"ryah","message":"uv_default_loop()->channel","date":"2011-09-21T21:22:54.106Z","type":"message"}
{"nick":"ryah","message":"hm","date":"2011-09-21T21:23:22.295Z","type":"message"}
{"nick":"piscisaureus","message":"that would be the channel to the parent process right?","date":"2011-09-21T21:23:23.171Z","type":"message"}
{"nick":"ryah","message":"yeah","date":"2011-09-21T21:23:27.771Z","type":"message"}
{"nick":"ryah","message":"somehow you want to be able to test if your a child of a libuv process","date":"2011-09-21T21:24:24.399Z","type":"message"}
{"nick":"piscisaureus","message":"and if it is interested in using the channel :-)","date":"2011-09-21T21:24:46.499Z","type":"message"}
{"nick":"piscisaureus","message":"I mean, conceivably people might use libuv but not care about the channel","date":"2011-09-21T21:25:00.475Z","type":"message"}
{"nick":"piscisaureus","action":"thinks (beware)","date":"2011-09-21T21:26:30.619Z","type":"action"}
{"nick":"piscisaureus","action":"thinks (http://www.youtube.com/watch?v=v-ayGu0PYJA)","date":"2011-09-21T21:27:32.587Z","type":"action"}
{"nick":"ryah","message":"uv_ipc(uv_process_t*, uv_buf_t, uv_tcp_t*); uv_default_loop()->on_ipc;  typedef uv_buf_t (*uv_ipc_cb)(uv_stream_t* channel, size_t suggested_size);","date":"2011-09-21T21:31:42.352Z","type":"message"}
{"nick":"ryah","message":"^-- combine uv_alloc_cb and uv_connection_cb ?","date":"2011-09-21T21:31:52.653Z","type":"message"}
{"nick":"ryah","message":"hmm.","date":"2011-09-21T21:32:21.763Z","type":"message"}
{"nick":"ryah","message":"using uv_accept would be nice","date":"2011-09-21T21:32:41.004Z","type":"message"}
{"nick":"ryah","message":"for integrating with node","date":"2011-09-21T21:32:44.317Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: is it possible to needed to enable/disable sendfd on unix?","date":"2011-09-21T21:33:14.528Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: what happens if someone sends you an fd but you're not interested?","date":"2011-09-21T21:33:32.752Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: you can ignore it","date":"2011-09-21T21:34:24.378Z","type":"message"}
{"nick":"ryah","message":"i think that fd will still be opened in your process","date":"2011-09-21T21:34:37.254Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I think ideally we should just make it a stream type","date":"2011-09-21T21:35:58.437Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: fine by me","date":"2011-09-21T21:36:11.745Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: it should be able to listen() etc","date":"2011-09-21T21:36:29.202Z","type":"message"}
{"nick":"piscisaureus","message":"and also read_start","date":"2011-09-21T21:36:34.287Z","type":"message"}
{"nick":"piscisaureus","message":"on both ends","date":"2011-09-21T21:36:40.539Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: when the child recvs it - does the child alloc the space for it or the parent?","date":"2011-09-21T21:36:58.540Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: that's the only open question indeed","date":"2011-09-21T21:37:11.366Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: what's the windows API you use on the recving end?","date":"2011-09-21T21:37:12.129Z","type":"message"}
{"nick":"ryah","message":"s/or the parent/or libuv/","date":"2011-09-21T21:37:30.197Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: ReadFile plus a protocol parser","date":"2011-09-21T21:37:31.081Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: you encode the HANDLE pointer?","date":"2011-09-21T21:38:00.423Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I don't really understand what you mean, sorry","date":"2011-09-21T21:38:22.228Z","type":"message"}
{"nick":"DrPizza","message":"ryah: duplicatehandle into the child process, then tell the child process the integer handle value","date":"2011-09-21T21:38:35.929Z","type":"message"}
{"nick":"ryah","message":"eh - in your protocol - do you write out the HADNLE","date":"2011-09-21T21:38:36.742Z","type":"message"}
{"nick":"ryah","message":"over \"the wire\"","date":"2011-09-21T21:38:47.884Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: yes, for files/pipes I would do that","date":"2011-09-21T21:38:52.929Z","type":"message"}
{"nick":"ryah","message":"that's actually a nice API","date":"2011-09-21T21:39:17.955Z","type":"message"}
{"nick":"ryah","message":"i liek that better than the unix way","date":"2011-09-21T21:39:22.800Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: for sockets I would send a WSAPROTOCOL_INFOW structure","date":"2011-09-21T21:39:25.691Z","type":"message"}
{"nick":"DrPizza","message":"what's the unix way?","date":"2011-09-21T21:39:28.037Z","type":"message"}
{"nick":"ryah","message":"there's a special struct that you attach to your message","date":"2011-09-21T21:39:52.580Z","type":"message"}
{"nick":"DrPizza","message":"ah","date":"2011-09-21T21:39:59.980Z","type":"message"}
{"nick":"piscisaureus","message":"I am not sure it's better than the unix way","date":"2011-09-21T21:40:17.670Z","type":"message"}
{"nick":"ryah","message":"the fd on the recving side can be different","date":"2011-09-21T21:40:20.535Z","type":"message"}
{"nick":"piscisaureus","message":"on windows too","date":"2011-09-21T21:40:27.046Z","type":"message"}
{"nick":"piscisaureus","message":"you have to call DuplicateHandle to obtain a handle that's valid in the receiving process","date":"2011-09-21T21:40:46.957Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: ah","date":"2011-09-21T21:40:58.248Z","type":"message"}
{"nick":"DrPizza","message":"yes","date":"2011-09-21T21:41:05.323Z","type":"message"}
{"nick":"DrPizza","message":"you then pass the value of that handle to the child through some app-specific mechanism","date":"2011-09-21T21:41:23.730Z","type":"message"}
{"nick":"DrPizza","message":"piscisaureus: it's kindof annoying that you can't just duplicatehandle sockets","date":"2011-09-21T21:41:50.778Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-21T21:42:09.261Z","type":"message"}
{"nick":"DrPizza","message":"do people actually have socket providers that don't have corresponding kernel HANDLEs?","date":"2011-09-21T21:42:13.759Z","type":"message"}
{"nick":"piscisaureus","message":"no","date":"2011-09-21T21:42:21.597Z","type":"message"}
{"nick":"DrPizza","message":"obviously that's not the case for IP","date":"2011-09-21T21:42:24.384Z","type":"message"}
{"nick":"DrPizza","message":"so really there's no good reason for it","date":"2011-09-21T21:42:32.309Z","type":"message"}
{"nick":"piscisaureus","message":"it never happens","date":"2011-09-21T21:42:35.430Z","type":"message"}
{"nick":"DrPizza","message":"it's just that a socket provider can theoretically have non-HANDLE sockets","date":"2011-09-21T21:42:48.477Z","type":"message"}
{"nick":"piscisaureus","message":"but winsock also keeps some socket information in user address space","date":"2011-09-21T21:42:52.242Z","type":"message"}
{"nick":"piscisaureus","message":"I think that's what gets fucked up","date":"2011-09-21T21:42:58.383Z","type":"message"}
{"nick":"DrPizza","message":"hmm","date":"2011-09-21T21:43:02.068Z","type":"message"}
{"nick":"ryah","message":"i think the child process should alloc the socket","date":"2011-09-21T21:43:09.025Z","type":"message"}
{"nick":"DrPizza","message":"that may be true Isuppose","date":"2011-09-21T21:43:10.300Z","type":"message"}
{"nick":"ryah","message":"it plays better with node... because we have the structs in our wrap classes","date":"2011-09-21T21:43:28.006Z","type":"message"}
{"nick":"DrPizza","message":"piscisaureus: but if they mandated that every socket were a HANDLE, I'm sure they'd figure something out","date":"2011-09-21T21:43:29.638Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: we should pretend it's some kind of 4th stdio handle but with a specific type","date":"2011-09-21T21:43:49.360Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: yeah sure. one that you can call uv_listen on?","date":"2011-09-21T21:44:13.737Z","type":"message"}
{"nick":"DrPizza","message":"piscisaureus: you could even pass it as stdio handle 4.","date":"2011-09-21T21:44:14.628Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: and uv_read_start() :)","date":"2011-09-21T21:44:30.464Z","type":"message"}
{"nick":"DrPizza","message":"piscisaureus: though it would mean filling in that \"reserved\" field when calling CreateProcess","date":"2011-09-21T21:44:30.834Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: exactly","date":"2011-09-21T21:44:36.980Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: yes I am considering that but it's an implementation detail","date":"2011-09-21T21:44:56.424Z","type":"message"}
{"nick":"ryah","message":"what if someone calls uv_listen but not uv_read_start?","date":"2011-09-21T21:44:58.273Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: hmm","date":"2011-09-21T21:45:05.002Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: we send the MI6 after him?","date":"2011-09-21T21:45:17.010Z","type":"message"}
{"nick":"ryah","message":"it seems we need some sort of combined listen/read","date":"2011-09-21T21:45:59.781Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: you have a point.","date":"2011-09-21T21:46:09.675Z","type":"message"}
{"nick":"ryah","message":"on unix too - we must read data when we recv fds","date":"2011-09-21T21:46:17.434Z","type":"message"}
{"nick":"piscisaureus","message":"although we could also just not emit connection_cb when the user isn't reading","date":"2011-09-21T21:46:27.016Z","type":"message"}
{"nick":"ryah","message":"hm - that might work","date":"2011-09-21T21:46:55.496Z","type":"message"}
{"nick":"piscisaureus","message":"in that case we could have uv_readfd_start(uv_ipc_t*, uv_read_cb*, uv_connection_cb*, uv_alloc_cb*)","date":"2011-09-21T21:47:15.366Z","type":"message"}
{"nick":"ryah","message":"oh god","date":"2011-09-21T21:47:43.842Z","type":"message"}
{"nick":"ryah","message":"it looks a bit horrible","date":"2011-09-21T21:48:01.799Z","type":"message"}
{"nick":"piscisaureus","message":"I agree","date":"2011-09-21T21:48:08.416Z","type":"message"}
{"nick":"ryah","message":"uv_readfd_start(uv_ipc_t*, uv_alloc_cb*, uv_readfd_cb*)","date":"2011-09-21T21:48:31.731Z","type":"message"}
{"nick":"piscisaureus","message":"heh","date":"2011-09-21T21:48:41.226Z","type":"message"}
{"nick":"piscisaureus","message":"now specify uv_readfd_cb","date":"2011-09-21T21:48:46.818Z","type":"message"}
{"nick":"ryah","message":"typedef void (*uv_readfd_cb)(uv_ipc_t*, ssize_t nread, uv_buf_t, bool pending_connection)","date":"2011-09-21T21:49:44.822Z","type":"message"}
{"nick":"piscisaureus","message":"on unix, if you want to send an fd, you need to send data too","date":"2011-09-21T21:51:17.025Z","type":"message"}
{"nick":"piscisaureus","message":"are we going to maintain this restriction?","date":"2011-09-21T21:51:25.106Z","type":"message"}
{"nick":"ryah","message":"or - how about using normal uv_read_start, uv_read_stop but adding: uv_handle_type uv_ipc_pending_connection(uv_ipc_t*)","date":"2011-09-21T21:51:39.546Z","type":"message"}
{"nick":"piscisaureus","message":"pending_connection seems off, but that'd work","date":"2011-09-21T21:52:25.771Z","type":"message"}
{"nick":"piscisaureus","message":"so the user could poll from uv_read_cb right?","date":"2011-09-21T21:52:42.711Z","type":"message"}
{"nick":"ryah","message":"somehow you need to know which type before you accept","date":"2011-09-21T21:52:44.048Z","type":"message"}
{"nick":"ryah","message":"yeah","date":"2011-09-21T21:52:50.060Z","type":"message"}
{"nick":"piscisaureus","message":"that's also a problem for the on_connection callback","date":"2011-09-21T21:52:57.566Z","type":"message"}
{"nick":"piscisaureus","message":"we should pass in the type somehow","date":"2011-09-21T21:53:01.802Z","type":"message"}
{"nick":"ryah","message":"so in node we currently force people to write a buffer when they send fds","date":"2011-09-21T21:53:34.101Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-21T21:53:50.376Z","type":"message"}
{"nick":"piscisaureus","message":"we can maintain this restriction","date":"2011-09-21T21:54:04.884Z","type":"message"}
{"nick":"piscisaureus","message":"although on windows there's no need to","date":"2011-09-21T21:54:18.392Z","type":"message"}
{"nick":"ryah","message":"i mean - on the unix side we could also have our own protocol","date":"2011-09-21T21:54:34.221Z","type":"message"}
{"nick":"ryah","message":"which says if there is a buffer or not :)","date":"2011-09-21T21:54:42.934Z","type":"message"}
{"nick":"ryah","message":"that'll take up one byte","date":"2011-09-21T21:54:49.746Z","type":"message"}
{"nick":"piscisaureus","message":"heh","date":"2011-09-21T21:54:52.889Z","type":"message"}
{"nick":"piscisaureus","message":"sure","date":"2011-09-21T21:54:54.205Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: is there some kind of guaranteed ordering of the fd and message","date":"2011-09-21T21:55:40.954Z","type":"message"}
{"nick":"ryah","message":"ok let me gist our what we've just talked about...","date":"2011-09-21T21:55:43.688Z","type":"message"}
{"nick":"piscisaureus","message":"ryah++","date":"2011-09-21T21:55:51.153Z","type":"message"}
{"nick":"piscisaureus","message":"this going to be a nice api for node users","date":"2011-09-21T22:01:18.404Z","type":"message"}
{"nick":"piscisaureus","message":"we should not send FDs to the other side - send a wrap","date":"2011-09-21T22:01:44.074Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: strawman https://gist.github.com/1233459","date":"2011-09-21T22:02:55.865Z","type":"message"}
{"nick":"ryah","message":"oops missing the most important part..","date":"2011-09-21T22:03:37.795Z","type":"message"}
{"nick":"piscisaureus","message":"pending_connection should be renamed to something like pending_handle or pending_stream","date":"2011-09-21T22:03:57.808Z","type":"message"}
{"nick":"ryah","message":"updated","date":"2011-09-21T22:05:29.175Z","type":"message"}
{"nick":"piscisaureus","message":"maybe uv_ipc_pending_connection should take an uv_stream_t","date":"2011-09-21T22:06:37.758Z","type":"message"}
{"nick":"ryah","message":"oh, actually i think it should take no args","date":"2011-09-21T22:07:14.227Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-21T22:07:21.539Z","type":"message"}
{"nick":"ryah","message":"hm","date":"2011-09-21T22:07:43.616Z","type":"message"}
{"nick":"igorzi","message":"do we want to see what this (fake work) looks like with multi-threaded server?","date":"2011-09-21T22:07:44.359Z","type":"message"}
{"nick":"ryah","message":":/","date":"2011-09-21T22:07:45.214Z","type":"message"}
{"nick":"piscisaureus","message":"what happens if the user doesn't pick up the pending handle?\"","date":"2011-09-21T22:07:54.268Z","type":"message"}
{"nick":"ryah","message":"igorzi: would be interesting - if it's not too much trouble :D","date":"2011-09-21T22:08:04.889Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: is it a lot of work or a little?","date":"2011-09-21T22:08:11.616Z","type":"message"}
{"nick":"igorzi","message":"little, i'll get the numbers for completion :)","date":"2011-09-21T22:08:27.217Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: do it. I am most interested in the numbers for 1 process and 8 processes","date":"2011-09-21T22:08:51.218Z","type":"message"}
{"nick":"piscisaureus","message":"that should give a good indication","date":"2011-09-21T22:08:57.792Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: where did you add the loop?  in read_cb?","date":"2011-09-21T22:08:58.001Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: yes, I do it just before calling uv_write","date":"2011-09-21T22:09:14.427Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: we're going to have to have a queue of pending handles, i think","date":"2011-09-21T22:15:10.019Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: or throw them away if the user doesn't accept them","date":"2011-09-21T22:15:28.018Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: uv_pending_handle needs to take a parameter","date":"2011-09-21T22:16:09.828Z","type":"message"}
{"nick":"ryah","message":"why","date":"2011-09-21T22:16:14.993Z","type":"message"}
{"nick":"piscisaureus","message":"or it won't play nice with multiplicity","date":"2011-09-21T22:16:18.231Z","type":"message"}
{"nick":"ryah","message":"https://gist.github.com/1233459 <-- updatd","date":"2011-09-21T22:16:24.094Z","type":"message"}
{"nick":"piscisaureus","message":"good","date":"2011-09-21T22:16:35.280Z","type":"message"}
{"nick":"ryah","message":"i like this...","date":"2011-09-21T22:17:07.020Z","type":"message"}
{"nick":"piscisaureus","message":"... ?","date":"2011-09-21T22:17:30.411Z","type":"message"}
{"nick":"ryah","message":"i think this api is looking okay","date":"2011-09-21T22:18:14.166Z","type":"message"}
{"nick":"piscisaureus","message":":-)","date":"2011-09-21T22:18:20.212Z","type":"message"}
{"nick":"piscisaureus","message":"nice","date":"2011-09-21T22:18:20.867Z","type":"message"}
{"nick":"piscisaureus","message":"now the implementation","date":"2011-09-21T22:18:25.638Z","type":"message"}
{"nick":"piscisaureus","message":"re:  * Called from child.","date":"2011-09-21T22:18:46.600Z","type":"message"}
{"nick":"piscisaureus","message":"the child would also be able to send an fd to the parent right?","date":"2011-09-21T22:18:57.328Z","type":"message"}
{"nick":"ryah","message":"let's get feedback from bnoordhuis and igorzi about this API","date":"2011-09-21T22:19:02.771Z","type":"message"}
{"nick":"ryah","message":"hm","date":"2011-09-21T22:19:13.338Z","type":"message"}
{"nick":"ryah","message":"i guess so...","date":"2011-09-21T22:19:15.233Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: your file watcher branch works fine on linux, go ahead and merge it","date":"2011-09-21T22:19:45.836Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi is busy :-)","date":"2011-09-21T22:19:58.528Z","type":"message"}
{"nick":"ryah","message":"so we wont use uv_listen() with uv_ipc_t , right?","date":"2011-09-21T22:21:22.946Z","type":"message"}
{"nick":"mraleph","date":"2011-09-21T22:21:26.301Z","type":"join"}
{"nick":"piscisaureus","message":"no","date":"2011-09-21T22:21:39.482Z","type":"message"}
{"nick":"ryah","message":"k","date":"2011-09-21T22:21:46.486Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: do we guarantee anything about the order that FDs and data appears in","date":"2011-09-21T22:22:04.861Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: ryah: i think i'm missing some context.. why can't we just pass the socket (handle) to the other process through the child process'es stdin?  (like fd passing on unix)","date":"2011-09-21T22:22:34.006Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: right now uv_ipc_send doesn't take data so the client sees *either* data *or* a stream, or the relationship between data and stream is unclear","date":"2011-09-21T22:23:13.213Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: they'll come in different packets","date":"2011-09-21T22:24:14.861Z","type":"message"}
{"nick":"ryah","message":"igorzi: well bert wants to have his own protocol on top of the stream","date":"2011-09-21T22:24:42.206Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: that would be possible but users might want to use stdin for something else.","date":"2011-09-21T22:24:54.440Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: also, on unix FDs don't need to be multiplexed with other data, but on windows this is needed, so we have to layer your own protocol on top of the stream","date":"2011-09-21T22:24:54.651Z","type":"message"}
{"nick":"piscisaureus","message":"i don't want this - I just don't see a reasonable alternative","date":"2011-09-21T22:25:13.745Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: what if the user wants to send some context with the FD? Like, what the purpose of it is","date":"2011-09-21T22:26:01.494Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: yeah.. that's a good use-case","date":"2011-09-21T22:26:49.270Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: they can always send a message before the fd","date":"2011-09-21T22:27:23.795Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: with app-layer info that says: \"im sending a socket now!\"","date":"2011-09-21T22:27:34.727Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: the socket is only sent when the child process starts-up, right?  after that there's no more communication (for passing sockets)?","date":"2011-09-21T22:27:39.633Z","type":"message"}
{"nick":"ryah","message":"then the next fd to be recved can be interpreted that way","date":"2011-09-21T22:27:45.681Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: no - we can just send sockets whenever the user wants to","date":"2011-09-21T22:28:01.797Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: the ipc pipe however is established at startup","date":"2011-09-21T22:28:31.378Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: how does it work with unix fd-passing?  can the fd be sent whenever the user wants to?","date":"2011-09-21T22:29:16.197Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: yes","date":"2011-09-21T22:29:25.274Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: and how does the multiplexing work there?","date":"2011-09-21T22:29:45.986Z","type":"message"}
{"nick":"ryah","message":"igorzi: the message is ancillary to the data","date":"2011-09-21T22:30:17.767Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: the fd is sent as some kind of out-of-band data","date":"2011-09-21T22:30:20.866Z","type":"message"}
{"nick":"ryah","message":"er the fd","date":"2011-09-21T22:30:21.943Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Igor Zinkovsky\u000f \u000307master\u000f * r\u00021e0757f\u000f \u000310\u000f/ (9 files in 5 dirs)\u0002:\u000f windows: file watcher - http://git.io/YFVNlw","date":"2011-09-21T22:31:09.737Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: this is undocumented btw - I can't find it here - http://nodejs.org/docs/v0.5.7/api/net.html","date":"2011-09-21T22:31:09.950Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u00022a1c32a\u000f \u000310\u000f/ (6 files in 3 dirs)\u0002:\u000f linux: implement file watcher API - http://git.io/xZMwxQ","date":"2011-09-21T22:31:10.159Z","type":"message"}
{"nick":"ryah","message":"http://linux.die.net/man/2/recvmsg <- see msg_control","date":"2011-09-21T22:31:50.335Z","type":"message"}
{"nick":"piscisaureus","message":"oh heh","date":"2011-09-21T22:31:51.674Z","type":"message"}
{"nick":"piscisaureus","message":"http://nodejs.org/docs/v0.5.7/api/streams.html","date":"2011-09-21T22:31:53.983Z","type":"message"}
{"nick":"igorzi","message":"ok, i get the need for the protocol now","date":"2011-09-21T22:32:02.548Z","type":"message"}
{"nick":"piscisaureus","message":"http://nodejs.org/docs/v0.5.7/api/streams.html#stream.write and http://nodejs.org/docs/v0.5.7/api/streams.html#event_fd_","date":"2011-09-21T22:32:14.042Z","type":"message"}
{"nick":"igorzi","message":"ryah: piscisaureus: so you want to still use stdin with a special protocol?  or you want to use a completely separate pipe for this?","date":"2011-09-21T22:32:44.677Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: stdin will just be a pipe","date":"2011-09-21T22:32:54.847Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: we'll have a completely separate pipe for this","date":"2011-09-21T22:33:19.514Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: btw how do you get the channel to the child?","date":"2011-09-21T22:33:28.392Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: ok","date":"2011-09-21T22:33:34.202Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: think of it as a 4th stdio \"stream\"","date":"2011-09-21T22:33:52.190Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: *shrug* there are several options","date":"2011-09-21T22:34:00.899Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: an environment variable, or cbReserved2/lpReserved2 from STARTUPINFO (http://msdn.microsoft.com/en-us/library/ms686331%28v=vs.85%29.aspx)","date":"2011-09-21T22:35:06.829Z","type":"message"}
{"nick":"ryah","message":"using stdin might be good - can it be a bidirection pipe for you?","date":"2011-09-21T22:35:47.139Z","type":"message"}
{"nick":"ryah","message":"i hate dealing with these environmental variables...","date":"2011-09-21T22:36:03.075Z","type":"message"}
{"nick":"piscisaureus","message":"yes, it can","date":"2011-09-21T22:36:03.286Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: but how the the child node going to tell if it's parent is node (so it has to parse this protocol) or something else (so stdin is raw)","date":"2011-09-21T22:36:39.398Z","type":"message"}
{"nick":"piscisaureus","message":"?","date":"2011-09-21T22:36:40.437Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: okay if i merge the file watcher branch?","date":"2011-09-21T22:37:16.763Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, you just did, nm :)","date":"2011-09-21T22:37:28.885Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: the child should call uv_ipc_init() ?","date":"2011-09-21T22:37:36.275Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: so how is libuv going to tell the difference?","date":"2011-09-21T22:37:55.259Z","type":"message"}
{"nick":"ryah","message":"oh hm","date":"2011-09-21T22:38:06.022Z","type":"message"}
{"nick":"piscisaureus","message":"all libuv can tell it's a pipe","date":"2011-09-21T22:38:18.931Z","type":"message"}
{"nick":"ryah","message":"yeahi guess we need some environ variable at least","date":"2011-09-21T22:38:33.432Z","type":"message"}
{"nick":"piscisaureus","message":"well - on windows this might be avoidable","date":"2011-09-21T22:38:55.540Z","type":"message"}
{"nick":"piscisaureus","message":"but not on linux I think","date":"2011-09-21T22:39:00.038Z","type":"message"}
{"nick":"piscisaureus","message":"and I don't really know if I want to patch lpReserved2","date":"2011-09-21T22:39:13.035Z","type":"message"}
{"nick":"ryah","message":"another problem is that uv_process_options_t currently has uv_pipe_t* for stdin","date":"2011-09-21T22:40:34.025Z","type":"message"}
{"nick":"ryah","message":"i think having a different channel is probably easiest","date":"2011-09-21T22:42:06.076Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: do you have any opinions on https://gist.github.com/1233459 ?","date":"2011-09-21T22:46:17.955Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: so read_cb either gets an empty buffer or an fd?","date":"2011-09-21T22:47:32.562Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: no strong opinions","date":"2011-09-21T22:47:33.709Z","type":"message"}
{"nick":"piscisaureus","message":"er","date":"2011-09-21T22:47:45.302Z","type":"message"}
{"nick":"piscisaureus","message":"a buffer and no fd *or* an empty buffer and an fd?","date":"2011-09-21T22:48:05.465Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe that uv_ipc_send(uv_ipc_t*, uv_stream_t*) should accept a handle instead? in case you want to send over something non-stream like?","date":"2011-09-21T22:48:12.201Z","type":"message"}
{"nick":"piscisaureus","message":"like what?","date":"2011-09-21T22:48:30.677Z","type":"message"}
{"nick":"bnoordhuis","message":"udp handle?","date":"2011-09-21T22:48:38.493Z","type":"message"}
{"nick":"piscisaureus","message":"hmm yeah","date":"2011-09-21T22:48:44.752Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: why doesn't uv_ipc_send not take a req?","date":"2011-09-21T22:51:51.874Z","type":"message"}
{"nick":"piscisaureus","message":"s/n't//","date":"2011-09-21T22:52:00.248Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: ryah: if uv_ipc_pending returns pipe, then the child calls uv_accept?","date":"2011-09-21T22:52:41.584Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: yes","date":"2011-09-21T22:52:51.091Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u0002bee7112\u000f \u000310\u000f/ (src/unix/internal.h src/unix/linux.c)\u0002:\u000f unix: move container_of and SAVE_ERRNO to internal.h - http://git.io/YDko-g","date":"2011-09-21T22:52:58.114Z","type":"message"}
{"nick":"piscisaureus","message":"I'm not happy about the uv_ipc_send api","date":"2011-09-21T22:53:19.450Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: what does it pass for 1st arg? (server)","date":"2011-09-21T22:53:31.403Z","type":"message"}
{"nick":"piscisaureus","message":"it doesn't take a req, buffers or a callback","date":"2011-09-21T22:53:31.610Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: the uv_ipc_t handle","date":"2011-09-21T22:53:45.998Z","type":"message"}
{"nick":"ryah","message":"yeah.. ","date":"2011-09-21T22:54:37.259Z","type":"message"}
{"nick":"ryah","message":"we kind of want uv_ipc_send to be like uv_write","date":"2011-09-21T22:54:46.066Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-21T22:54:52.712Z","type":"message"}
{"nick":"ryah","message":"can't we just have a uv_write_prime() or something?","date":"2011-09-21T22:54:59.294Z","type":"message"}
{"nick":"ryah","message":"which also has a uv_stream_t","date":"2011-09-21T22:55:09.859Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301uv_write_prime()\u0003\u000301?","date":"2011-09-21T22:55:26.990Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301uv_write_prime(13)\u0003\u000301 <- ok","date":"2011-09-21T22:55:40.357Z","type":"message"}
{"nick":"piscisaureus","message":"\u0003\u000301uv_write_prime(12)\u0003\u000301 <- ENOTPRIME?","date":"2011-09-21T22:55:40.703Z","type":"message"}
{"nick":"igorzi","message":"1 proc:  4709","date":"2011-09-21T22:55:57.115Z","type":"message"}
{"nick":"igorzi","message":"2 procs: 8977","date":"2011-09-21T22:55:57.875Z","type":"message"}
{"nick":"igorzi","message":"4 procs: 13515","date":"2011-09-21T22:56:01.691Z","type":"message"}
{"nick":"igorzi","message":"8 procs: 21860","date":"2011-09-21T22:56:05.939Z","type":"message"}
{"nick":"igorzi","message":"* procs -> threads","date":"2011-09-21T22:56:17.573Z","type":"message"}
{"nick":"igorzi","message":"(so i think we're good to go with piscisaureus's prefork :))","date":"2011-09-21T22:56:56.722Z","type":"message"}
{"nick":"piscisaureus","message":"\\o/ i won! victory!","date":"2011-09-21T22:57:17.384Z","type":"message"}
{"nick":"piscisaureus","message":":-p","date":"2011-09-21T22:57:21.908Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: nice work.","date":"2011-09-21T22:57:27.022Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: if a primer works, an uv_write_ipc() function that takes one extra argument works as well.","date":"2011-09-21T23:09:49.385Z","type":"message"}
{"nick":"piscisaureus","message":"I like that better","date":"2011-09-21T23:09:49.592Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: ok, im down with that","date":"2011-09-21T23:11:08.884Z","type":"message"}
{"nick":"igorzi","message":"ryah: https://github.com/igorzi/node/commit/2f71caf95011e0d3d3dfd59bbe45ed6c1d462c09","date":"2011-09-21T23:13:22.268Z","type":"message"}
{"nick":"igorzi","message":"there's no node_zlib.h","date":"2011-09-21T23:13:23.541Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-09-21T23:17:42.364Z","type":"quit"}
{"nick":"piscisaureus","message":"ryah: so this - https://gist.github.com/1233593","date":"2011-09-21T23:19:03.684Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-21T23:20:07.234Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-21T23:20:12.458Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 260 seconds","date":"2011-09-21T23:31:08.374Z","type":"quit"}
{"nick":"piscisaureus","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2011-09-21T23:36:26.200Z","type":"quit"}
{"nick":"piscisaureus","date":"2011-09-21T23:38:44.347Z","type":"join"}
{"nick":"ryah","message":"piscisaureus: sorry office hours started","date":"2011-09-21T23:49:46.913Z","type":"message"}
{"nick":"piscisaureus","message":"I'm going to bed","date":"2011-09-21T23:50:01.293Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: uv_ipc_write sounds good","date":"2011-09-21T23:50:06.521Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: okay - night","date":"2011-09-21T23:50:11.532Z","type":"message"}
{"nick":"piscisaureus","message":"I'm going to tweet this","date":"2011-09-21T23:50:26.305Z","type":"message"}
{"nick":"ryah","message":"im going to retweet your tweet :)","date":"2011-09-21T23:51:06.676Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Igor Zinkovsky\u000f \u000307master\u000f * r\u0002de0066c\u000f \u000310\u000f/ node.gyp \u0002:\u000f remove node_zlib.h from node.gyp - http://git.io/9t13yw","date":"2011-09-21T23:54:54.212Z","type":"message"}
