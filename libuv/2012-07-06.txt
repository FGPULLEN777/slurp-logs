{"nick":"TooTallNate","message":"LOUD NOISES!!","date":"2012-07-06T00:00:06.005Z","type":"message"}
{"nick":"indutny","message":"so it's very unlikely (but still possible) introducing bugs","date":"2012-07-06T00:00:07.531Z","type":"message"}
{"nick":"indutny","message":"TooTallNate: you're really tall, btw :P","date":"2012-07-06T00:00:17.167Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 264 seconds","date":"2012-07-06T00:00:20.790Z","type":"quit"}
{"nick":"TooTallNate","message":"indutny: haha, it's true :p","date":"2012-07-06T00:00:28.843Z","type":"message"}
{"nick":"TooTallNate","message":"indutny: i did see one or two people taller then me at the conf though, it was a little strange, haha","date":"2012-07-06T00:00:49.085Z","type":"message"}
{"nick":"indutny","message":"hahah","date":"2012-07-06T00:01:22.328Z","type":"message"}
{"nick":"indutny","message":"looking upwards?","date":"2012-07-06T00:01:26.607Z","type":"message"}
{"nick":"isaacs","message":"node appeals to very tall men.","date":"2012-07-06T00:01:54.898Z","type":"message"}
{"nick":"isaacs","message":"not sure why","date":"2012-07-06T00:01:56.627Z","type":"message"}
{"nick":"indutny","message":"hahahaha","date":"2012-07-06T00:02:00.005Z","type":"message"}
{"nick":"isaacs","message":"mjr, creationix, tootallnate, felix, etc","date":"2012-07-06T00:02:20.636Z","type":"message"}
{"nick":"isaacs","message":"evne ry's pretty tall.","date":"2012-07-06T00:02:23.748Z","type":"message"}
{"nick":"isaacs","message":"and he's like one of the shorter node people.  that's why i hang out with mikeal so much, he's the only one who doesn't make me feel tiny.","date":"2012-07-06T00:02:59.100Z","type":"message"}
{"nick":"indutny","message":"btw, is ryan living in SF too?","date":"2012-07-06T00:04:41.164Z","type":"message"}
{"nick":"indutny","message":"i mean CA","date":"2012-07-06T00:04:44.723Z","type":"message"}
{"nick":"indutny","message":"isaacs: %","date":"2012-07-06T00:08:20.009Z","type":"message"}
{"nick":"indutny","message":"isaacs: ^","date":"2012-07-06T00:08:22.748Z","type":"message"}
{"nick":"isaacs","message":"yeah, he lives in SF","date":"2012-07-06T00:09:01.698Z","type":"message"}
{"nick":"isaacs","message":"in the West Bay","date":"2012-07-06T00:09:06.294Z","type":"message"}
{"nick":"isaacs","message":"i'm in The City (aka oakland)","date":"2012-07-06T00:09:13.185Z","type":"message"}
{"nick":"rendar","date":"2012-07-06T00:10:51.975Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: Leaving","date":"2012-07-06T00:25:22.530Z","type":"quit"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303Tim Macfarlane\u000f \u000307v0.8\u000f * r\u00020dba28b\u000f \u000310\u000f/ lib/readline.js \u0002:\u000f readline: fix for unicode prompts - http://git.io/io9YOA","date":"2012-07-06T00:26:03.154Z","type":"message"}
{"nick":"indutny","message":"yeah, I know oakland","date":"2012-07-06T00:27:33.778Z","type":"message"}
{"nick":"indutny","message":"jchris lives here too","date":"2012-07-06T00:27:37.961Z","type":"message"}
{"nick":"indutny","message":"or lived here, don't really know how he's doing now","date":"2012-07-06T00:27:46.324Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I've explained that ;)","date":"2012-07-06T00:35:41.498Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so are we going to allow session reusal between cluster processes?","date":"2012-07-06T00:37:03.299Z","type":"message"}
{"nick":"bcantrill","reason":"Quit: Leaving.","date":"2012-07-06T00:41:47.789Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-07-06T00:42:32.507Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: session reusal?","date":"2012-07-06T00:53:40.353Z","type":"message"}
{"nick":"bnoordhuis","message":"you mean ssl session reuse?","date":"2012-07-06T00:53:49.934Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: yes","date":"2012-07-06T00:54:05.209Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i think that only works when you have shared memory and cross-process mutexes, right?","date":"2012-07-06T00:54:52.268Z","type":"message"}
{"nick":"indutny","message":"right","date":"2012-07-06T00:56:59.044Z","type":"message"}
{"nick":"indutny","message":"do we need some special mutexes handling uv for unixes?","date":"2012-07-06T00:57:34.865Z","type":"message"}
{"nick":"bnoordhuis","message":"well, that's a problem - libuv supports neither shm or PTHREAD_PROCESS_SHARED mutexes","date":"2012-07-06T00:57:37.267Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2012-07-06T00:57:48.321Z","type":"message"}
{"nick":"indutny","message":"shm is kind of retarded, AFAIK","date":"2012-07-06T00:57:56.891Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah","date":"2012-07-06T00:58:01.646Z","type":"message"}
{"nick":"bnoordhuis","message":"but libuv neither supports cross-fork mmap :)","date":"2012-07-06T00:58:18.341Z","type":"message"}
{"nick":"indutny","message":"indeed","date":"2012-07-06T00:58:29.707Z","type":"message"}
{"nick":"indutny","message":"it doesn't have mmap support at all","date":"2012-07-06T00:58:35.013Z","type":"message"}
{"nick":"bnoordhuis","message":"exactly :)","date":"2012-07-06T00:58:40.347Z","type":"message"}
{"nick":"indutny","message":"but it can have it","date":"2012-07-06T00:58:48.442Z","type":"message"}
{"nick":"indutny","message":"I'm quite sure that windows has shared memory support","date":"2012-07-06T00:58:59.726Z","type":"message"}
{"nick":"bnoordhuis","message":"it has","date":"2012-07-06T00:59:07.466Z","type":"message"}
{"nick":"bnoordhuis","message":" PTHREAD_PROCESS_SHARED is kind of problematic though","date":"2012-07-06T00:59:15.104Z","type":"message"}
{"nick":"indutny","message":"what's really interesting is that we'll need to extend uv_spawn API","date":"2012-07-06T00:59:21.101Z","type":"message"}
{"nick":"indutny","message":"how would that work on windows?","date":"2012-07-06T00:59:40.829Z","type":"message"}
{"nick":"bnoordhuis","message":"with normal mutexes","date":"2012-07-06T01:00:41.869Z","type":"message"}
{"nick":"indutny","message":"doesn't it have shared mutexes?","date":"2012-07-06T01:01:25.921Z","type":"message"}
{"nick":"indutny","message":"what's the point of shared memory without mutexes?","date":"2012-07-06T01:01:33.886Z","type":"message"}
{"nick":"indutny","message":"you can't do anything with it at all","date":"2012-07-06T01:01:43.703Z","type":"message"}
{"nick":"bnoordhuis","message":"heh","date":"2012-07-06T01:01:49.941Z","type":"message"}
{"nick":"bnoordhuis","message":"\"normal\" a.k.a. heavy-weight mutexes are the windows equivalent of PTHREAD_PROCESS_SHARED","date":"2012-07-06T01:02:06.892Z","type":"message"}
{"nick":"bnoordhuis","message":"it's CriticalSection mutexes that you can't share","date":"2012-07-06T01:02:19.957Z","type":"message"}
{"nick":"indutny","message":"well, we're using CriticalSections anyway, as I know","date":"2012-07-06T01:03:25.983Z","type":"message"}
{"nick":"indutny","message":"ok, we just should off-load that to bertje","date":"2012-07-06T01:03:48.787Z","type":"message"}
{"nick":"indutny","message":"we need to implement support for that in uv, anyway","date":"2012-07-06T01:04:06.288Z","type":"message"}
{"nick":"indutny","message":"and then after benchmarking we'll disable it on windows in node","date":"2012-07-06T01:04:17.387Z","type":"message"}
{"nick":"indutny","message":"so, I propose adding uv_shmutex_t","date":"2012-07-06T01:05:32.360Z","type":"message"}
{"nick":"indutny","message":"and uv_shmutex_*()","date":"2012-07-06T01:05:39.961Z","type":"message"}
{"nick":"erickt","reason":"Ping timeout: 252 seconds","date":"2012-07-06T01:07:27.071Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: the reason i said it's problematic is that not all unices have shared mutexes","date":"2012-07-06T01:07:58.035Z","type":"message"}
{"nick":"indutny","message":"oh my zosh","date":"2012-07-06T01:08:06.361Z","type":"message"}
{"nick":"bnoordhuis","message":"linux does, i'm pretty solaris does too, freebsd's implementation used to have bugs","date":"2012-07-06T01:09:04.506Z","type":"message"}
{"nick":"bnoordhuis","message":"which means os x's implementation probably has or had bugs as well","date":"2012-07-06T01:09:22.735Z","type":"message"}
{"nick":"indutny","message":"ok, that's really nice","date":"2012-07-06T01:10:02.132Z","type":"message"}
{"nick":"indutny","message":"we can try using lock-less structures, but the overhead will be really big","date":"2012-07-06T01:10:19.718Z","type":"message"}
{"nick":"indutny","message":"and probably bigger than benefits from shared session storage","date":"2012-07-06T01:10:28.914Z","type":"message"}
{"nick":"bnoordhuis","message":"yes. let's punt on this for a bit","date":"2012-07-06T01:10:45.029Z","type":"message"}
{"nick":"indutny","message":"deal","date":"2012-07-06T01:11:41.708Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: which is not to say you can't hack on a quick prototype","date":"2012-07-06T01:12:03.274Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: well, I wasn't saying that I won't do anything :P","date":"2012-07-06T01:12:14.842Z","type":"message"}
{"nick":"bnoordhuis","message":"heh, okay","date":"2012-07-06T01:12:19.400Z","type":"message"}
{"nick":"indutny","message":"http://fscked.org/writings/SHM/shm-3.html","date":"2012-07-06T01:12:34.351Z","type":"message"}
{"nick":"indutny","message":"really nice ^","date":"2012-07-06T01:12:36.159Z","type":"message"}
{"nick":"bnoordhuis","message":"haha","date":"2012-07-06T01:13:03.879Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i would generally recommend to use shared mmap'd memory","date":"2012-07-06T01:13:51.478Z","type":"message"}
{"nick":"bnoordhuis","message":"much easier than sysv or posix shm","date":"2012-07-06T01:13:59.715Z","type":"message"}
{"nick":"indutny","message":"indeed","date":"2012-07-06T01:14:02.692Z","type":"message"}
{"nick":"indutny","message":"well, all I need is just passing pointer to the forks, right?","date":"2012-07-06T01:14:26.462Z","type":"message"}
{"nick":"indutny","message":"they should already have COW memory of parent process","date":"2012-07-06T01:14:39.674Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: explain 'passing pointer'?","date":"2012-07-06T01:16:05.142Z","type":"message"}
{"nick":"indutny","message":"well, suppose I do","date":"2012-07-06T01:16:14.475Z","type":"message"}
{"nick":"bnoordhuis","message":"the idea is to store the sessions themselves in shm","date":"2012-07-06T01:16:19.360Z","type":"message"}
{"nick":"indutny","message":"void* ptr = mmap(...)","date":"2012-07-06T01:16:26.444Z","type":"message"}
{"nick":"indutny","message":"if (!fork()) {","date":"2012-07-06T01:16:44.049Z","type":"message"}
{"nick":"indutny","message":"}","date":"2012-07-06T01:16:44.249Z","type":"message"}
{"nick":"indutny","message":"err","date":"2012-07-06T01:16:46.211Z","type":"message"}
{"nick":"indutny","message":"if (!fork()) use(ptr);","date":"2012-07-06T01:16:52.094Z","type":"message"}
{"nick":"bnoordhuis","message":"right, that works","date":"2012-07-06T01:16:57.925Z","type":"message"}
{"nick":"indutny","message":"is there any other ways (except named regions)?","date":"2012-07-06T01:17:08.434Z","type":"message"}
{"nick":"bnoordhuis","message":"provided you mmap'd it with MAP_SHARED of course :)","date":"2012-07-06T01:17:11.249Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2012-07-06T01:17:17.947Z","type":"message"}
{"nick":"indutny","message":"I understand that","date":"2012-07-06T01:17:19.853Z","type":"message"}
{"nick":"bnoordhuis","message":"no, pointer passing works - the forks inherit the memory mappings","date":"2012-07-06T01:17:42.351Z","type":"message"}
{"nick":"indutny","message":"ok, going to hack this out","date":"2012-07-06T01:17:58.412Z","type":"message"}
{"nick":"bnoordhuis","message":"good luck :)","date":"2012-07-06T01:18:04.896Z","type":"message"}
{"nick":"indutny","message":"I wonder if splay tree will handle enough of load","date":"2012-07-06T01:18:12.543Z","type":"message"}
{"nick":"indutny","message":"err","date":"2012-07-06T01:18:20.254Z","type":"message"}
{"nick":"indutny","message":"will do searches in reasonable time","date":"2012-07-06T01:18:27.136Z","type":"message"}
{"nick":"indutny","message":"I really do not want a RB-tree here","date":"2012-07-06T01:18:43.052Z","type":"message"}
{"nick":"bnoordhuis","message":"benchmark it and you'll know","date":"2012-07-06T01:18:50.097Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2012-07-06T01:19:01.125Z","type":"message"}
{"nick":"bnoordhuis","message":"though in my experience different data structures with similar big O behavior don't usually have wildly different performance characteristics","date":"2012-07-06T01:19:25.044Z","type":"message"}
{"nick":"indutny","message":"well, RB has O(1) insertion","date":"2012-07-06T01:19:43.086Z","type":"message"}
{"nick":"indutny","message":"splay has O(log n)","date":"2012-07-06T01:19:59.901Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-07-06T01:20:09.962Z","type":"message"}
{"nick":"bnoordhuis","message":"a red/black tree is also O(log n) insertion","date":"2012-07-06T01:20:13.503Z","type":"message"}
{"nick":"bnoordhuis","message":"you need to find the place to insert to first","date":"2012-07-06T01:20:20.842Z","type":"message"}
{"nick":"indutny","message":"yeeah","date":"2012-07-06T01:20:23.898Z","type":"message"}
{"nick":"indutny","message":"indeed, I forgot about that","date":"2012-07-06T01:20:30.451Z","type":"message"}
{"nick":"indutny","message":"so the difference is only in worst cases here","date":"2012-07-06T01:20:48.152Z","type":"message"}
{"nick":"bnoordhuis","message":"it's more that people always bitch and moan about the cache characteristics of binary trees vs. hashes and such","date":"2012-07-06T01:21:14.619Z","type":"message"}
{"nick":"indutny","message":"hashes are good","date":"2012-07-06T01:21:35.044Z","type":"message"}
{"nick":"indutny","message":"really good","date":"2012-07-06T01:21:36.591Z","type":"message"}
{"nick":"indutny","message":"but they eat a lot of memory","date":"2012-07-06T01:21:42.150Z","type":"message"}
{"nick":"indutny","message":"and hard to cleanup","date":"2012-07-06T01:21:44.565Z","type":"message"}
{"nick":"mmalecki","date":"2012-07-06T01:27:14.864Z","type":"join"}
{"nick":"abraxas","date":"2012-07-06T01:28:41.875Z","type":"join"}
{"nick":"indutny","message":"actually, I love hashmaps","date":"2012-07-06T01:29:14.404Z","type":"message"}
{"nick":"indutny","message":":D","date":"2012-07-06T01:29:18.015Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm going to think hard and deep on how to deal with signals, threads and multiple event loops","date":"2012-07-06T01:34:09.181Z","type":"message"}
{"nick":"bnoordhuis","message":"and i'm going to do it from the comfort of my own bed","date":"2012-07-06T01:34:33.917Z","type":"message"}
{"nick":"bnoordhuis","message":"sleep tight people","date":"2012-07-06T01:34:37.429Z","type":"message"}
{"nick":"indutny","message":"sleep tight ben","date":"2012-07-06T01:35:10.406Z","type":"message"}
{"nick":"bnoordhuis","message":"you too, fedor","date":"2012-07-06T01:35:27.139Z","type":"message"}
{"nick":"mmalecki","message":"night Ben","date":"2012-07-06T01:36:21.308Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2012-07-06T01:39:27.592Z","type":"quit"}
{"nick":"mmalecki","reason":"Ping timeout: 244 seconds","date":"2012-07-06T01:41:22.402Z","type":"quit"}
{"nick":"indutny","message":"oh grammar is really borked in cluster.js","date":"2012-07-06T02:18:57.877Z","type":"message"}
{"nick":"indutny","message":"wtf","date":"2012-07-06T02:18:59.638Z","type":"message"}
{"nick":"indutny","message":"even I'm noticing this","date":"2012-07-06T02:19:12.509Z","type":"message"}
{"nick":"erickt","date":"2012-07-06T02:28:23.610Z","type":"join"}
{"nick":"TooTallNate","reason":"Ping timeout: 255 seconds","date":"2012-07-06T02:49:41.087Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2012-07-06T02:56:08.145Z","type":"quit"}
{"nick":"mjr_","date":"2012-07-06T03:02:10.702Z","type":"join"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-07-06T03:09:49.312Z","type":"quit"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2012-07-06T03:23:46.614Z","type":"quit"}
{"nick":"mjr_","date":"2012-07-06T03:24:08.055Z","type":"join"}
{"nick":"brson","date":"2012-07-06T03:38:48.327Z","type":"join"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2012-07-06T03:49:44.533Z","type":"quit"}
{"nick":"bcantrill","date":"2012-07-06T05:07:26.435Z","type":"join"}
{"nick":"perezd","date":"2012-07-06T05:10:12.815Z","type":"join"}
{"nick":"isaacs_mobile","date":"2012-07-06T05:10:33.586Z","type":"join"}
{"nick":"paddybyers","date":"2012-07-06T05:30:06.650Z","type":"join"}
{"nick":"isaacs_mobile","reason":"Quit: Leaving","date":"2012-07-06T05:48:40.637Z","type":"quit"}
{"nick":"EhevuTov","date":"2012-07-06T06:08:43.704Z","type":"join"}
{"nick":"isaacs_mobile","date":"2012-07-06T06:26:48.139Z","type":"join"}
{"nick":"mmalecki","date":"2012-07-06T06:30:37.806Z","type":"join"}
{"nick":"loladiro","date":"2012-07-06T06:35:48.623Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2012-07-06T06:37:18.233Z","type":"quit"}
{"nick":"hz","date":"2012-07-06T06:44:23.409Z","type":"join"}
{"nick":"isaacs_mobile","reason":"Ping timeout: 252 seconds","date":"2012-07-06T06:46:37.034Z","type":"quit"}
{"nick":"stephank","reason":"Quit: *Poof!*","date":"2012-07-06T06:54:00.333Z","type":"quit"}
{"nick":"stephank","date":"2012-07-06T07:01:29.798Z","type":"join"}
{"nick":"rendar","date":"2012-07-06T07:08:25.325Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: Leaving","date":"2012-07-06T07:27:56.196Z","type":"quit"}
{"nick":"mmalecki","reason":"Ping timeout: 265 seconds","date":"2012-07-06T07:38:23.319Z","type":"quit"}
{"nick":"AlbireoX","new_nick":"AlbireoX`Away","date":"2012-07-06T07:55:58.381Z","type":"nick"}
{"nick":"AlbireoX`Away","new_nick":"AlbireoX","date":"2012-07-06T07:56:01.364Z","type":"nick"}
{"nick":"mmalecki","date":"2012-07-06T08:09:10.918Z","type":"join"}
{"nick":"bcantrill","reason":"Quit: Leaving.","date":"2012-07-06T08:26:00.175Z","type":"quit"}
{"nick":"brson","reason":"Remote host closed the connection","date":"2012-07-06T08:53:04.931Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-07-06T10:21:31.793Z","type":"quit"}
{"nick":"mmalecki","reason":"Quit: leaving","date":"2012-07-06T11:05:36.217Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-07-06T12:05:52.848Z","type":"join"}
{"nick":"bnoordhuis","date":"2012-07-06T12:09:57.594Z","type":"join"}
{"nick":"loladiro","date":"2012-07-06T12:26:24.124Z","type":"join"}
{"nick":"piscisaureus_","message":"bah","date":"2012-07-06T12:32:13.004Z","type":"message"}
{"nick":"piscisaureus_","message":"INSTALL.W64: No assembler modules are engaged upon initial 0.9.8 release.","date":"2012-07-06T12:32:13.650Z","type":"message"}
{"nick":"piscisaureus_","message":"INSTALL.W32: Netwide Assembler, a.k.a. NASM, available from http://nasm.sourceforge.net/   is required if you intend to utilize assembler modules. Note that NASM   is now the only supported assembler.","date":"2012-07-06T12:32:13.854Z","type":"message"}
{"nick":"loladiro_","date":"2012-07-06T12:36:44.250Z","type":"join"}
{"nick":"loladiro","reason":"Ping timeout: 252 seconds","date":"2012-07-06T12:38:37.008Z","type":"quit"}
{"nick":"loladiro_","new_nick":"loladiro","date":"2012-07-06T12:38:37.330Z","type":"nick"}
{"nick":"piscisaureus_","message":"hmm the state of ssl is a mess...","date":"2012-07-06T12:43:07.524Z","type":"message"}
{"nick":"piscisaureus_","message":"WARNING: mkdef.pl doesn't know the following algorithms:","date":"2012-07-06T12:43:23.711Z","type":"message"}
{"nick":"piscisaureus_","message":"        NEXTPROTONEG","date":"2012-07-06T12:43:23.909Z","type":"message"}
{"nick":"piscisaureus_","message":"I presume that was added by the chromium guys>","date":"2012-07-06T12:43:36.095Z","type":"message"}
{"nick":"hz","date":"2012-07-06T12:50:45.361Z","type":"quit"}
{"nick":"loladiro","reason":"Ping timeout: 246 seconds","date":"2012-07-06T12:54:43.986Z","type":"quit"}
{"nick":"loladiro","date":"2012-07-06T12:54:59.726Z","type":"join"}
{"nick":"loladiro","reason":"Ping timeout: 255 seconds","date":"2012-07-06T13:05:03.787Z","type":"quit"}
{"nick":"loladiro","date":"2012-07-06T13:30:29.864Z","type":"join"}
{"nick":"chobi_e_","new_nick":"chobi_e","date":"2012-07-06T13:38:34.353Z","type":"nick"}
{"nick":"piscisaureus_","message":"Hmm, ok, so for x64 only gcc is supported","date":"2012-07-06T13:42:58.960Z","type":"message"}
{"nick":"piscisaureus_","message":"bleh","date":"2012-07-06T13:43:00.610Z","type":"message"}
{"nick":"piscisaureus_","message":"manual porting action","date":"2012-07-06T13:43:18.697Z","type":"message"}
{"nick":"loladiro","message":"piscisaureus_: Did you get to look at the IPC stuff yet?","date":"2012-07-06T13:56:43.061Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: hey man","date":"2012-07-06T14:10:20.893Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: oh hey","date":"2012-07-06T14:10:25.278Z","type":"message"}
{"nick":"indutny","message":"bweaver: should I do something special, except adding MAP_ANON | MAP_SHARED flag to mmap to get it working between forks","date":"2012-07-06T14:11:17.256Z","type":"message"}
{"nick":"indutny","message":"oops","date":"2012-07-06T14:13:53.978Z","type":"message"}
{"nick":"indutny","message":"bweaver: sorry, wrong tab completion","date":"2012-07-06T14:13:59.051Z","type":"message"}
{"nick":"mmalecki","date":"2012-07-06T14:15:34.263Z","type":"join"}
{"nick":"piscisaureus_","message":"loladiro: not yet, sorry","date":"2012-07-06T14:18:11.857Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: hey","date":"2012-07-06T14:18:20.026Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: no, that's all you need","date":"2012-07-06T14:18:31.027Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: odd, because I'm getting undefined values when accessing this memory from forks","date":"2012-07-06T14:18:46.843Z","type":"message"}
{"nick":"indutny","message":":(","date":"2012-07-06T14:18:49.123Z","type":"message"}
{"nick":"indutny","message":"and I'm quite sure that I'm getting the same pointer as the parent has","date":"2012-07-06T14:19:03.090Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so basically the code here https://github.com/indutny/node/compare/feature-ssl-shared-cache#L9R639","date":"2012-07-06T14:19:41.748Z","type":"message"}
{"nick":"indutny","message":"fails","date":"2012-07-06T14:19:43.357Z","type":"message"}
{"nick":"indutny","message":"and that storage is created using this: https://github.com/indutny/node/compare/feature-ssl-shared-cache#L11R98","date":"2012-07-06T14:20:02.870Z","type":"message"}
{"nick":"indutny","message":"btw, I think we may use semaphores as a shared mutexes on osx","date":"2012-07-06T14:20:51.622Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: https://gist.github.com/40d9c0316c083f1366ac <- does that code work for you?","date":"2012-07-06T14:22:46.395Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess you'll have to adapt it a little for os x","date":"2012-07-06T14:22:58.072Z","type":"message"}
{"nick":"indutny","message":"sec, let me try","date":"2012-07-06T14:23:07.765Z","type":"message"}
{"nick":"indutny","message":"you mean adapt your code?","date":"2012-07-06T14:23:15.810Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: yes. i doubt os x has clock_gettime() :)","date":"2012-07-06T14:23:31.123Z","type":"message"}
{"nick":"c4milo","date":"2012-07-06T14:27:25.510Z","type":"join"}
{"nick":"indutny","message":"ok, it's failing in mq_init","date":"2012-07-06T14:27:43.670Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-07-06T14:27:45.979Z","type":"message"}
{"nick":"indutny","message":"I don't think that osx has semaphores in this way","date":"2012-07-06T14:28:05.502Z","type":"message"}
{"nick":"indutny","message":"it's using some Mach junk for them","date":"2012-07-06T14:28:11.372Z","type":"message"}
{"nick":"bnoordhuis","message":"that might very well be the case","date":"2012-07-06T14:28:26.209Z","type":"message"}
{"nick":"indutny","message":"well, but I'm not using semaphores in my code","date":"2012-07-06T14:28:57.852Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2012-07-06T14:29:35.627Z","type":"message"}
{"nick":"indutny","message":"yeah https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KernelProgramming/synchronization/synchronization.html","date":"2012-07-06T14:30:10.447Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: have you tried your code on linux? it's possible that os x doesn't support MAP_ANONYMOUS | MAP_SHARED","date":"2012-07-06T14:30:22.169Z","type":"message"}
{"nick":"indutny","message":"it support MAP_ANON","date":"2012-07-06T14:30:35.427Z","type":"message"}
{"nick":"indutny","message":"ah, so you think it's only supporting non-anonymous shared memory?","date":"2012-07-06T14:30:54.636Z","type":"message"}
{"nick":"bnoordhuis","message":"possibly","date":"2012-07-06T14:31:00.950Z","type":"message"}
{"nick":"indutny","message":"yeah, I can /dev/zero it, I suppose","date":"2012-07-06T14:31:10.890Z","type":"message"}
{"nick":"tjfontaine","message":"udp should behave the same as tcp here right? https://gist.github.com/3060476","date":"2012-07-06T14:31:11.095Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: yes","date":"2012-07-06T14:32:42.840Z","type":"message"}
{"nick":"tjfontaine","message":"alright I guess I'll do a pull req :)","date":"2012-07-06T14:33:59.402Z","type":"message"}
{"nick":"indutny","message":"oh crap","date":"2012-07-06T14:34:20.525Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: you were right","date":"2012-07-06T14:34:23.100Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: it works with mmaped file","date":"2012-07-06T14:34:35.513Z","type":"message"}
{"nick":"indutny","message":"or, no","date":"2012-07-06T14:34:41.147Z","type":"message"}
{"nick":"indutny","message":"wtf","date":"2012-07-06T14:34:42.111Z","type":"message"}
{"nick":"indutny","message":"it just suddenly crashed","date":"2012-07-06T14:34:48.587Z","type":"message"}
{"nick":"indutny","message":"oh, great it was just slowly mmaping file and then failing","date":"2012-07-06T14:35:26.968Z","type":"message"}
{"nick":"indutny","message":"really nice","date":"2012-07-06T14:35:29.962Z","type":"message"}
{"nick":"bnoordhuis","message":"haha","date":"2012-07-06T14:36:00.690Z","type":"message"}
{"nick":"bnoordhuis","message":"system programming is awesome, isn't it?","date":"2012-07-06T14:36:10.028Z","type":"message"}
{"nick":"indutny","message":"yeah, indeed","date":"2012-07-06T14:36:54.272Z","type":"message"}
{"nick":"indutny","message":"things are just like they're described in man","date":"2012-07-06T14:37:03.084Z","type":"message"}
{"nick":"indutny","message":"nothing unexpected","date":"2012-07-06T14:37:08.407Z","type":"message"}
{"nick":"indutny","message":"ok, I got ENODEV","date":"2012-07-06T14:38:24.167Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: should just the emit of listening be delayed to the nextTick or also the call to _startReceiving?","date":"2012-07-06T14:39:23.305Z","type":"message"}
{"nick":"indutny","message":"oh crap","date":"2012-07-06T14:39:31.388Z","type":"message"}
{"nick":"indutny","message":"I added MAP_ANON","date":"2012-07-06T14:39:34.990Z","type":"message"}
{"nick":"indutny","message":"and it's returning EACCES","date":"2012-07-06T14:39:42.238Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis:   int fd = open(\"/dev/zero\", O_RDWR);","date":"2012-07-06T14:39:49.895Z","type":"message"}
{"nick":"indutny","message":"am I doing something wrong?","date":"2012-07-06T14:39:55.409Z","type":"message"}
{"nick":"mmalecki","message":"anyone up for reviewing https://github.com/joyent/node/pull/3635 ?","date":"2012-07-06T14:40:02.245Z","type":"message"}
{"nick":"indutny","message":"I suppose this file should be open for both read and write, isn't it?","date":"2012-07-06T14:40:12.201Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: I suppose you can't mmap /dev/zero","date":"2012-07-06T14:40:18.801Z","type":"message"}
{"nick":"piscisaureus_","message":"that would be insanity anyway","date":"2012-07-06T14:40:24.462Z","type":"message"}
{"nick":"indutny","message":"really insane","date":"2012-07-06T14:40:40.464Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: both","date":"2012-07-06T14:40:41.830Z","type":"message"}
{"nick":"indutny","message":"mmalecki: how much performance improvement does it make?","date":"2012-07-06T14:40:59.785Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: ok","date":"2012-07-06T14:41:06.274Z","type":"message"}
{"nick":"indutny","message":"mmalecki: I've looked at this stuff some time ago","date":"2012-07-06T14:41:12.516Z","type":"message"}
{"nick":"indutny","message":"mmalecki: and there was no visible performance improvement here","date":"2012-07-06T14:41:21.907Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny, piscisaureus_: it should be possible to mmap /dev/zero, i've seen it used as a trick to quickly zero big slabs of memory","date":"2012-07-06T14:42:00.799Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: well /tmp/1 can't be used too :)","date":"2012-07-06T14:42:05.832Z","type":"message"}
{"nick":"mmalecki","message":"indutny: I can post some gist with siege output, but there wasn't some *big* performance impact","date":"2012-07-06T14:42:26.082Z","type":"message"}
{"nick":"mmalecki","message":"like 5 ms/1000 reqs or so?","date":"2012-07-06T14:42:34.291Z","type":"message"}
{"nick":"indutny","message":"mmalecki: well, it may be a statistical deviation","date":"2012-07-06T14:42:56.084Z","type":"message"}
{"nick":"indutny","message":"mmalecki: read is doing call to C++ land which costs much more than running non-optimized function","date":"2012-07-06T14:43:15.320Z","type":"message"}
{"nick":"indutny","message":"and optimization/deoptimization takes some extra time","date":"2012-07-06T14:43:29.929Z","type":"message"}
{"nick":"mmalecki","message":"indutny: wait, which thing are we talking about?","date":"2012-07-06T14:43:47.067Z","type":"message"}
{"nick":"mmalecki","message":"fs.read or http thing?","date":"2012-07-06T14:43:50.767Z","type":"message"}
{"nick":"indutny","message":"so as this function is not really hot, I propose waiting for v8 guys to make it work","date":"2012-07-06T14:43:53.503Z","type":"message"}
{"nick":"indutny","message":"fs.read","date":"2012-07-06T14:44:05.333Z","type":"message"}
{"nick":"mmalecki","message":"oh, no, I linked https://github.com/joyent/node/pull/3635","date":"2012-07-06T14:44:13.978Z","type":"message"}
{"nick":"mmalecki","message":"indutny: I didn't measure fs.read performance, I just noticed that it bails out and fixed it","date":"2012-07-06T14:44:28.913Z","type":"message"}
{"nick":"indutny","message":"mmalecki: ok, bailout basically means that they haven't implemented this feature yet","date":"2012-07-06T14:44:43.588Z","type":"message"}
{"nick":"mmalecki","message":"right","date":"2012-07-06T14:44:56.090Z","type":"message"}
{"nick":"indutny","message":"#elif (NGX_HAVE_MAP_DEVZERO)","date":"2012-07-06T14:44:59.662Z","type":"message"}
{"nick":"mmalecki","message":"but that's how we always parse arguments anyway, right?","date":"2012-07-06T14:45:09.866Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I suppose nginx has special configure test for that stuff","date":"2012-07-06T14:45:11.008Z","type":"message"}
{"nick":"mmalecki","message":"you don't usually use arguments[i] when you have named arguments anyway","date":"2012-07-06T14:45:22.766Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: well, actually I think that it should fail or work","date":"2012-07-06T14:47:12.926Z","type":"message"}
{"nick":"indutny","message":"I can't see any description of this problem on the internet","date":"2012-07-06T14:47:21.889Z","type":"message"}
{"nick":"mmalecki","message":"but anyway, what I was asking about is https://github.com/joyent/node/pull/3635","date":"2012-07-06T14:48:14.565Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: you might be interested ^","date":"2012-07-06T14:48:29.599Z","type":"message"}
{"nick":"indutny","message":"removing a lot of code","date":"2012-07-06T14:48:48.100Z","type":"message"}
{"nick":"indutny","message":"good :)","date":"2012-07-06T14:48:49.442Z","type":"message"}
{"nick":"mmalecki","message":"\"26 additions and 64 deletions\" makes me a happy panda too :)","date":"2012-07-06T14:49:23.406Z","type":"message"}
{"nick":"creationix","date":"2012-07-06T14:50:51.016Z","type":"join"}
{"nick":"creationix","date":"2012-07-06T14:51:03.223Z","type":"part"}
{"nick":"creationix","date":"2012-07-06T14:51:07.085Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: master: 0x102200000 size: 10240","date":"2012-07-06T14:52:37.033Z","type":"message"}
{"nick":"indutny","message":"0x102200000","date":"2012-07-06T14:52:37.234Z","type":"message"}
{"nick":"indutny","message":"Assertion failed: (st->is_shared()), function UseSharedSessionStorage, file ../src/node_crypto.cc, line 640.","date":"2012-07-06T14:52:37.234Z","type":"message"}
{"nick":"indutny","message":"oohh crap","date":"2012-07-06T14:52:40.774Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ok, the problem is in my code","date":"2012-07-06T14:56:16.412Z","type":"message"}
{"nick":"indutny","message":"https://gist.github.com/4083bddd75c2078c1efc <- this is working","date":"2012-07-06T14:56:20.545Z","type":"message"}
{"nick":"indutny","message":"bbiab need to eat some sushi :)","date":"2012-07-06T14:56:30.877Z","type":"message"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-07-06T14:59:06.735Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-07-06T15:00:35.203Z","type":"quit"}
{"nick":"bnoordhuis","message":"company meeting, back in an hour (hopefully)","date":"2012-07-06T15:00:46.384Z","type":"message"}
{"nick":"mmalecki","message":"lol, company meeting which lasts an hour?","date":"2012-07-06T15:01:11.169Z","type":"message"}
{"nick":"piscisaureus_","date":"2012-07-06T15:15:50.805Z","type":"join"}
{"nick":"hz","date":"2012-07-06T15:17:09.534Z","type":"join"}
{"nick":"erickt","date":"2012-07-06T15:37:03.358Z","type":"join"}
{"nick":"chobi_e","new_nick":"chobi_e_","date":"2012-07-06T15:38:28.211Z","type":"nick"}
{"nick":"theCole","date":"2012-07-06T15:39:39.508Z","type":"join"}
{"nick":"bnoordhuis","message":"mmalecki: there's beer involved","date":"2012-07-06T15:40:03.377Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: so deferring startReceiving breaks implicit bind on send semantics, and this all has to do with the fact that dgram lookup is synchronous for .bind where address is undefined or an ip","date":"2012-07-06T15:41:12.374Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: well, at *our* standups, there's vodka involved","date":"2012-07-06T15:41:24.040Z","type":"message"}
{"nick":"mmalecki","message":"if you bring one, of course","date":"2012-07-06T15:41:28.739Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: also, did you see that http thing?","date":"2012-07-06T15:41:45.887Z","type":"message"}
{"nick":"tjfontaine","message":"there's a \"in soviet russia\" joke there somewhere","date":"2012-07-06T15:41:46.852Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 264 seconds","date":"2012-07-06T15:42:56.682Z","type":"quit"}
{"nick":"mmalecki","reason":"Quit: leaving","date":"2012-07-06T15:47:04.709Z","type":"quit"}
{"nick":"tjfontaine","message":"dear internets, please dont' cut out whilst I'm running `make test` it's depressing","date":"2012-07-06T15:54:52.269Z","type":"message"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-07-06T15:55:06.639Z","type":"quit"}
