{"nick":"bnoordhuis","message":"piscisaureus_: btw, what exactly do you need it for?","date":"2012-10-02T00:00:02.246Z","type":"message"}
{"nick":"TooTallNate","message":"i know there's packages out there that do that...","date":"2012-10-02T00:00:02.848Z","type":"message"}
{"nick":"mmalecki","message":"that was what I was thinking about :)","date":"2012-10-02T00:00:05.783Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-10-02T00:00:12.935Z","type":"quit"}
{"nick":"mmalecki","message":"which config system do you like? nconf?","date":"2012-10-02T00:00:14.648Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: well, my idea is to create a simple array with loop fds","date":"2012-10-02T00:00:23.041Z","type":"message"}
{"nick":"mmalecki","message":"I'm not sure what is used in npm, config-chain?","date":"2012-10-02T00:00:34.960Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: and walk that list when dispatching a signal","date":"2012-10-02T00:00:39.278Z","type":"message"}
{"nick":"c4milo","date":"2012-10-02T00:00:54.642Z","type":"join"}
{"nick":"TooTallNate","message":"mmalecki: i try to stick with what npm uses","date":"2012-10-02T00:00:58.341Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but if I need to expand the array (because a new loop is started) then the array needs to be resized","date":"2012-10-02T00:01:01.891Z","type":"message"}
{"nick":"TooTallNate","message":"mmalecki: do you have a preference for \"disturl\" vs. \"dist-url\"","date":"2012-10-02T00:01:27.263Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: you can't do that from a signal handler","date":"2012-10-02T00:01:27.440Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but I need to avoid releasing the old array while a signal handler is iterating over it","date":"2012-10-02T00:01:30.859Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: why not?","date":"2012-10-02T00:01:42.601Z","type":"message"}
{"nick":"TooTallNate","message":"mmalecki: there's just no config flags that currently have \"-\", so it looks a little werid","date":"2012-10-02T00:01:44.668Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: is for( ;; ) not async signal safe these days?","date":"2012-10-02T00:01:52.948Z","type":"message"}
{"nick":"mmalecki","message":"TooTallNate: I used dist-url because that seems to be a unix convention, but I have no strong feeling for that","date":"2012-10-02T00:02:06.526Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: no, i thought you meant malloc() from a signal handler","date":"2012-10-02T00:02:08.124Z","type":"message"}
{"nick":"TooTallNate","message":"mmalecki: in retrospect, people often try --node-dir when it's really --nodedir","date":"2012-10-02T00:02:35.371Z","type":"message"}
{"nick":"TooTallNate","message":"mmalecki: support for both would be ideal :)","date":"2012-10-02T00:02:44.042Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: but you want to do some compare-and-swap pointer trickery, i presume?","date":"2012-10-02T00:02:46.089Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2012-10-02T00:02:51.692Z","type":"message"}
{"nick":"mmalecki","message":"yeah, I was wondering wtf didn't that work at first.","date":"2012-10-02T00:02:54.179Z","type":"message"}
{"nick":"mmalecki","message":"TooTallNate: YOU KNOW I STILL NEED SOME SLEEP","date":"2012-10-02T00:03:15.676Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: you don't have to, you can use a volatile sig_atomic_t flag","date":"2012-10-02T00:03:21.566Z","type":"message"}
{"nick":"mmalecki","message":"meh, can do that","date":"2012-10-02T00:03:30.216Z","type":"message"}
{"nick":"TooTallNate","message":"mmalecki: get sleep :) your patch lgtm; mergin","date":"2012-10-02T00:03:31.386Z","type":"message"}
{"nick":"mmalecki","message":"so npm uses npmconf","date":"2012-10-02T00:03:39.833Z","type":"message"}
{"nick":"piscisaureus_","message":"hmm","date":"2012-10-02T00:03:41.857Z","type":"message"}
{"nick":"TooTallNate","message":"mmalecki: i think npmconf is a layer on top of another config system though","date":"2012-10-02T00:03:56.883Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm, wait","date":"2012-10-02T00:03:58.623Z","type":"message"}
{"nick":"mmalecki","message":"TooTallNate: config-chain","date":"2012-10-02T00:04:10.109Z","type":"message"}
{"nick":"mmalecki","message":"thanks for merging :)","date":"2012-10-02T00:04:23.925Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: you need to take some care and avoid races or deadlocks","date":"2012-10-02T00:04:51.133Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: yes, I know :-)","date":"2012-10-02T00:04:59.012Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: i want to implement a special type of spinlock","date":"2012-10-02T00:05:11.155Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: there's one issue with signals and locks of any kind, the signal handler can run as the same thread that currently holds the lock","date":"2012-10-02T00:06:08.714Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I know. Hence, a *special* type of spinlock :-)","date":"2012-10-02T00:06:25.438Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: cool. it's possible, you just need to tread carefully","date":"2012-10-02T00:07:09.726Z","type":"message"}
{"nick":"piscisaureus_","message":"it's sad that neither pthread_yield nor nanosleep are async signal safe","date":"2012-10-02T00:07:55.567Z","type":"message"}
{"nick":"piscisaureus_","message":"yet, poll() is ...","date":"2012-10-02T00:08:05.059Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: async safe as in usable from in a signal handler? if you use ppoll(), you can still sleep with nanosecond precision, async safe :)","date":"2012-10-02T00:10:13.765Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: yeah, I considered that. I just think it's odd that poll would be safe but nanosleep isn't ...","date":"2012-10-02T00:10:48.140Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: the motivation is that poll() is always a syscall while nanosleep could be a libc function","date":"2012-10-02T00:11:25.616Z","type":"message"}
{"nick":"bnoordhuis","message":"it's not always true btw, poll() isn't a syscall on os x iirc","date":"2012-10-02T00:11:43.078Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: sleep() is also safe","date":"2012-10-02T00:15:08.910Z","type":"message"}
{"nick":"bnoordhuis","message":"is it? okay, bad motivation then","date":"2012-10-02T00:15:22.532Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll be darned. alarm() is as well","date":"2012-10-02T00:16:35.816Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: it would probably be easiest to just block all signals while updating the thing btw","date":"2012-10-02T00:16:53.693Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: why not just do that?","date":"2012-10-02T00:16:58.619Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: http://www.gnu.org/software/libc/manual/html_node/Why-Block.html#Why-Block","date":"2012-10-02T00:18:26.279Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: inside or outside of the signal handler?","date":"2012-10-02T00:18:30.891Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: outsize","date":"2012-10-02T00:18:37.082Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: block it in uv_signal_start/stop","date":"2012-10-02T00:18:50.425Z","type":"message"}
{"nick":"bnoordhuis","message":"oh right, that could work","date":"2012-10-02T00:18:57.967Z","type":"message"}
{"nick":"piscisaureus_","message":"probably even easier :-)","date":"2012-10-02T00:19:09.736Z","type":"message"}
{"nick":"piscisaureus_","message":"we'd still have to ensure that we don't update any state when the signal handler is already running","date":"2012-10-02T00:20:56.645Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-10-02T00:23:00.042Z","type":"quit"}
{"nick":"bnoordhuis","message":"piscisaureus_: that's where the sig_atomic_t comes in","date":"2012-10-02T00:23:26.373Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: haha, well...","date":"2012-10-02T00:23:58.627Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: how?","date":"2012-10-02T00:24:00.645Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: consider the situation where one thread is trying to start a signal handler while 2 others are already running a signal handler","date":"2012-10-02T00:24:31.364Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: the signal handler sets the flag, normal code checks it with while (busy); after blocking signals but before touching the array","date":"2012-10-02T00:24:57.576Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: alright. now think of 2 signal handlers running at the same time","date":"2012-10-02T00:25:17.230Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: you want to do:","date":"2012-10-02T00:25:30.481Z","type":"message"}
{"nick":"piscisaureus_","message":"signal_handler_running++ ?","date":"2012-10-02T00:25:30.624Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: that's not race free","date":"2012-10-02T00:25:35.062Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: why would you have more than one signal handler touching that array?","date":"2012-10-02T00:25:43.476Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: maybe you should explain what you're trying to do :)","date":"2012-10-02T00:26:00.486Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: well, because 2 signal handlers could run at the same time right?","date":"2012-10-02T00:26:05.818Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: if you have multiple threads","date":"2012-10-02T00:26:13.599Z","type":"message"}
{"nick":"piscisaureus_","message":"one signal may be delivered to thread A and another could be delivered to thread B at the same tiem","date":"2012-10-02T00:26:29.592Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: you generally let one thread handle signals","date":"2012-10-02T00:27:29.513Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: and block them in the other threads","date":"2012-10-02T00:27:40.358Z","type":"message"}
{"nick":"bnoordhuis","message":"note to self, i need to do that in the new thread pool","date":"2012-10-02T00:27:50.883Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I thought you told me that wasn't safe","date":"2012-10-02T00:27:55.882Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: well... not for a library, because it can't assume that all threads cooperate","date":"2012-10-02T00:28:28.271Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: btw, is this for libuv or runjs?","date":"2012-10-02T00:29:04.949Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: libuv","date":"2012-10-02T00:29:10.851Z","type":"message"}
{"nick":"bnoordhuis","message":"ah okay","date":"2012-10-02T00:29:15.884Z","type":"message"}
{"nick":"c4milo","date":"2012-10-02T00:42:34.308Z","type":"join"}
{"nick":"piscisaureus_","message":"I suppose it would also be possible to implement locking using read() and dup2() :-)","date":"2012-10-02T00:44:45.507Z","type":"message"}
{"nick":"erickt","reason":"Ping timeout: 260 seconds","date":"2012-10-02T00:54:48.562Z","type":"quit"}
{"nick":"piscisaureus_","message":"bnoordhuis: async signal safe lock https://gist.github.com/3815525. How hard can it be?","date":"2012-10-02T00:54:48.704Z","type":"message"}
{"nick":"piscisaureus_","message":"(still have to beware of deadlocks - this can be solved with signal blocking)","date":"2012-10-02T00:54:48.704Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: does it actually compile? } (while r < 0 && errno == EINTR);","date":"2012-10-02T00:56:12.158Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: no it was to give you the idea","date":"2012-10-02T00:56:22.878Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: didn't try","date":"2012-10-02T00:56:25.776Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: okay, noted","date":"2012-10-02T00:57:17.815Z","type":"message"}
{"nick":"bnoordhuis","message":"you swapped the read and write fds btw","date":"2012-10-02T00:57:26.945Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: do you see any conceptual issues?","date":"2012-10-02T00:57:37.553Z","type":"message"}
{"nick":"piscisaureus_","message":"I may just be overlooking something","date":"2012-10-02T00:57:48.619Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: it looks simple enough. just don't call release twice :)","date":"2012-10-02T00:58:27.506Z","type":"message"}
{"nick":"piscisaureus_","message":"true","date":"2012-10-02T00:58:47.715Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033bnoordhuis\u000f created branch reviewme","date":"2012-10-02T01:01:35.064Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: ^","date":"2012-10-02T01:01:42.913Z","type":"message"}
{"nick":"piscisaureus_","message":"it lacks a link","date":"2012-10-02T01:01:50.650Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2012-10-02T01:01:55.055Z","type":"message"}
{"nick":"piscisaureus_","message":"tjfontaine: ^","date":"2012-10-02T01:01:55.618Z","type":"message"}
{"nick":"tjfontaine","message":"I have to make that link up, so where would you like to be directed?","date":"2012-10-02T01:02:18.505Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T01:03:03.391Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#753 (reviewme - b77b648 : Ben Noordhuis): The build was fixed.","date":"2012-10-02T01:03:03.536Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/commit/b77b648b0b79","date":"2012-10-02T01:03:03.537Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/2631410","date":"2012-10-02T01:03:03.537Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T01:03:03.537Z","type":"part"}
{"nick":"tjfontaine","message":"piscisaureus_: for instance the github dashboard only links to https://github.com/joyent/libuv which doesn't seem so helpful","date":"2012-10-02T01:04:05.634Z","type":"message"}
{"nick":"tjfontaine","message":"or would you rather https://github.com/joyent/libuv/compare/reviewme","date":"2012-10-02T01:04:44.543Z","type":"message"}
{"nick":"piscisaureus_","message":"tjfontaine: that, or libuv/commits/<branchname>","date":"2012-10-02T01:05:04.209Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: i'd like /compare/<branch>","date":"2012-10-02T01:05:51.905Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2012-10-02T01:06:02.691Z","type":"quit"}
{"nick":"tjfontaine","message":"k","date":"2012-10-02T01:06:11.637Z","type":"message"}
{"nick":"hz","date":"2012-10-02T01:11:03.101Z","type":"quit"}
{"nick":"bnoordhuis","message":"okay, off to bed. sleep tight everyone","date":"2012-10-02T01:13:52.986Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: mostly lgtm, take care of the thread safety issue","date":"2012-10-02T01:14:42.372Z","type":"message"}
{"nick":"piscisaureus_","message":"I'm off to bed too","date":"2012-10-02T01:17:34.432Z","type":"message"}
{"nick":"piscisaureus_","message":"later peepz","date":"2012-10-02T01:17:37.413Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2012-10-02T01:18:36.275Z","type":"quit"}
{"nick":"isaacs","message":"THE DIE IS CAST! http://jsconf.com.au/speakers/isaac","date":"2012-10-02T01:18:59.167Z","type":"message"}
{"nick":"isaacs","message":"I'm on the hook to talk about streams, so i have to actually finish this :)","date":"2012-10-02T01:19:12.063Z","type":"message"}
{"nick":"MI6","reason":"Remote host closed the connection","date":"2012-10-02T01:20:03.686Z","type":"quit"}
{"nick":"MI6","date":"2012-10-02T01:20:14.240Z","type":"join"}
{"nick":"piscisaureus_","message":"australistan","date":"2012-10-02T01:20:14.978Z","type":"message"}
{"nick":"piscisaureus_","message":"cool","date":"2012-10-02T01:20:16.748Z","type":"message"}
{"nick":"lohkey","date":"2012-10-02T01:27:59.460Z","type":"join"}
{"nick":"c4milo","message":"what's the closest datatype to a unsigned long in V8? ","date":"2012-10-02T01:32:35.219Z","type":"message"}
{"nick":"c4milo","message":"Number? ","date":"2012-10-02T01:32:37.413Z","type":"message"}
{"nick":"tjfontaine","message":"javascript numbers are max of 48bits","date":"2012-10-02T01:33:00.130Z","type":"message"}
{"nick":"tjfontaine","message":"c4milo: v8.h says NumberValue is a double though","date":"2012-10-02T01:35:10.148Z","type":"message"}
{"nick":"c4milo","message":"yeah","date":"2012-10-02T01:35:16.039Z","type":"message"}
{"nick":"c4milo","message":"this is what the ecmascript standard says ","date":"2012-10-02T01:36:03.787Z","type":"message"}
{"nick":"c4milo","message":"primitive value corresponding to a double-precision 64-bit binary format IEEE 754 value","date":"2012-10-02T01:36:04.199Z","type":"message"}
{"nick":"piscisaureus_","message":"tjfontaine: javascript numbers are doubles","date":"2012-10-02T01:36:10.156Z","type":"message"}
{"nick":"abraxas","date":"2012-10-02T01:37:13.545Z","type":"join"}
{"nick":"piscisaureus_","message":"tjfontaine: but they retain integer precision up to 2^53","date":"2012-10-02T01:37:48.136Z","type":"message"}
{"nick":"tjfontaine","message":"ah that's what I was looking through the rfc for, thanks","date":"2012-10-02T01:38:10.705Z","type":"message"}
{"nick":"tjfontaine","message":"s/frc/standard/","date":"2012-10-02T01:38:21.336Z","type":"message"}
{"nick":"piscisaureus_","message":"tjfontaine: the reason is that it has a 52-bit mantissa, plus an extra bit because it has base 2","date":"2012-10-02T01:39:14.968Z","type":"message"}
{"nick":"tjfontaine","message":"right I just found some mentioning of that","date":"2012-10-02T01:40:49.404Z","type":"message"}
{"nick":"piscisaureus_","reason":"Read error: Connection reset by peer","date":"2012-10-02T01:44:23.634Z","type":"quit"}
{"nick":"erickt","date":"2012-10-02T02:01:28.141Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-10-02T02:25:20.096Z","type":"join"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2012-10-02T02:25:26.034Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2012-10-02T02:41:45.358Z","type":"quit"}
{"nick":"TooTallNate","date":"2012-10-02T02:59:36.644Z","type":"join"}
{"nick":"TooTallNate","reason":"Ping timeout: 245 seconds","date":"2012-10-02T03:03:58.449Z","type":"quit"}
{"nick":"TooTallNate","date":"2012-10-02T03:06:33.582Z","type":"join"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2012-10-02T03:26:33.971Z","type":"quit"}
{"nick":"EhevuTov","date":"2012-10-02T03:53:12.606Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2012-10-02T04:02:01.290Z","type":"quit"}
{"nick":"mmalecki","new_nick":"mmalecki[zzz]","date":"2012-10-02T04:06:24.488Z","type":"nick"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-10-02T04:41:53.102Z","type":"quit"}
{"nick":"MI6","reason":"Remote host closed the connection","date":"2012-10-02T05:19:57.988Z","type":"quit"}
{"nick":"Aria","reason":"Remote host closed the connection","date":"2012-10-02T05:23:31.780Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2012-10-02T05:31:03.250Z","type":"quit"}
{"nick":"erickt","reason":"Ping timeout: 240 seconds","date":"2012-10-02T05:37:29.126Z","type":"quit"}
{"nick":"erickt","date":"2012-10-02T05:42:55.326Z","type":"join"}
{"nick":"sj26","reason":"Quit: Rainbows!","date":"2012-10-02T05:45:53.719Z","type":"quit"}
{"nick":"stagas","date":"2012-10-02T05:49:16.314Z","type":"join"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-10-02T06:35:51.068Z","type":"quit"}
{"nick":"kristate","date":"2012-10-02T06:40:57.384Z","type":"join"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2012-10-02T06:42:04.485Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-10-02T06:43:42.949Z","type":"quit"}
{"nick":"rendar","date":"2012-10-02T06:52:23.769Z","type":"join"}
{"nick":"mikeal","date":"2012-10-02T07:26:08.414Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 260 seconds","date":"2012-10-02T07:36:36.307Z","type":"quit"}
{"nick":"saghul","date":"2012-10-02T07:55:30.258Z","type":"join"}
{"nick":"mikeal","date":"2012-10-02T08:02:24.274Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 240 seconds","date":"2012-10-02T08:07:09.168Z","type":"quit"}
{"nick":"einaros","reason":"Quit: reboot","date":"2012-10-02T08:10:34.147Z","type":"quit"}
{"nick":"einaros","date":"2012-10-02T08:22:11.109Z","type":"join"}
{"nick":"V1","date":"2012-10-02T08:47:11.144Z","type":"join"}
{"nick":"V1","new_nick":"`3rdEden","date":"2012-10-02T08:47:34.749Z","type":"nick"}
{"nick":"mikeal","date":"2012-10-02T09:03:00.825Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 255 seconds","date":"2012-10-02T09:08:06.705Z","type":"quit"}
{"nick":"kristate","date":"2012-10-02T09:18:56.741Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2012-10-02T09:35:39.080Z","type":"quit"}
{"nick":"hz","date":"2012-10-02T09:54:07.448Z","type":"join"}
{"nick":"mikeal","date":"2012-10-02T10:03:31.349Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 252 seconds","date":"2012-10-02T10:08:28.114Z","type":"quit"}
{"nick":"stagas_","date":"2012-10-02T10:09:48.443Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 245 seconds","date":"2012-10-02T10:10:13.546Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2012-10-02T10:10:25.051Z","type":"nick"}
{"nick":"mikeal","date":"2012-10-02T11:04:21.500Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 246 seconds","date":"2012-10-02T11:09:24.402Z","type":"quit"}
{"nick":"stagas","reason":"Ping timeout: 246 seconds","date":"2012-10-02T11:20:15.395Z","type":"quit"}
{"nick":"mmalecki[zzz]","new_nick":"mmalecki","date":"2012-10-02T11:36:09.690Z","type":"nick"}
{"nick":"MI6","date":"2012-10-02T12:00:08.247Z","type":"join"}
{"nick":"mikeal","date":"2012-10-02T12:04:47.451Z","type":"join"}
{"nick":"bnoordhuis","date":"2012-10-02T12:08:34.077Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 244 seconds","date":"2012-10-02T12:09:35.347Z","type":"quit"}
{"nick":"hz","reason":"Ping timeout: 272 seconds","date":"2012-10-02T12:09:38.537Z","type":"quit"}
{"nick":"hz","date":"2012-10-02T12:19:04.528Z","type":"join"}
{"nick":"c4milo","date":"2012-10-02T12:33:30.540Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-10-02T12:36:08.866Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u00022d3760a\u0002 : unix: fix scandir filter prototype  The dirent argument is const on syst - http://git.io/uxBW-w","date":"2012-10-02T12:41:49.794Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: ping","date":"2012-10-02T12:42:34.798Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis back in 15","date":"2012-10-02T12:43:06.575Z","type":"message"}
{"nick":"bnoordhuis","message":"roger","date":"2012-10-02T12:43:14.850Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T12:43:16.128Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#754 (master - 2d3760a : Ben Noordhuis): The build was fixed.","date":"2012-10-02T12:43:16.274Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/8399cb1fc366...2d3760a17c58","date":"2012-10-02T12:43:16.274Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/2636361","date":"2012-10-02T12:43:16.274Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T12:43:16.275Z","type":"part"}
{"nick":"mmalecki","message":"bnoordhuis: hey, what do you think about using slab allocation here https://github.com/joyent/node/blob/master/src/node_http_parser.cc#L127 ?","date":"2012-10-02T12:43:46.653Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: show me numbers that show that it matters","date":"2012-10-02T12:44:34.174Z","type":"message"}
{"nick":"bnoordhuis","message":"because it probably doesn't","date":"2012-10-02T12:44:44.985Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: that bit of code is only executed when a header field or value is split over two packets","date":"2012-10-02T12:45:41.747Z","type":"message"}
{"nick":"bnoordhuis","message":"which happens almost never","date":"2012-10-02T12:45:48.728Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: is everytime I use `curl` against localhost \"almost never\"?","date":"2012-10-02T12:46:49.037Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: why does that happen?","date":"2012-10-02T12:47:19.886Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: I'm talking about Save, not Update","date":"2012-10-02T12:47:29.022Z","type":"message"}
{"nick":"mmalecki","message":"from what I reckon, Update happens when input is split over two packets","date":"2012-10-02T12:47:54.289Z","type":"message"}
{"nick":"bnoordhuis","message":"oh wait, that's ryan's code, not mine","date":"2012-10-02T12:48:03.354Z","type":"message"}
{"nick":"bnoordhuis","message":"in that case anything is possible","date":"2012-10-02T12:48:09.242Z","type":"message"}
{"nick":"mmalecki","message":":)","date":"2012-10-02T12:48:13.205Z","type":"message"}
{"nick":"bnoordhuis","message":"still, numbers first, optimizations second","date":"2012-10-02T12:48:47.074Z","type":"message"}
{"nick":"mmalecki","message":"sure","date":"2012-10-02T12:48:55.265Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis pong","date":"2012-10-02T12:57:19.057Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: ping","date":"2012-10-02T13:01:13.362Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis pong2 :-)","date":"2012-10-02T13:01:26.863Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: can you run this? gdb out/Debug/run-tests fs_async_sendfile fs_async_sendfile","date":"2012-10-02T13:01:42.561Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm curious what error you're seeing","date":"2012-10-02T13:01:49.329Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis http://pastebin.com/eZp5nAYG","date":"2012-10-02T13:03:40.616Z","type":"message"}
{"nick":"saghul","message":"it may be unrelated, but my pyuv test for sendfile now fails with errno 32","date":"2012-10-02T13:04:03.177Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: can you try this? `f 2`, followed by `p *req`","date":"2012-10-02T13:04:16.278Z","type":"message"}
{"nick":"bnoordhuis","message":"errno 32... that's EPIPE","date":"2012-10-02T13:04:58.270Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis http://pastebin.com/cj1VbU6U","date":"2012-10-02T13:05:13.972Z","type":"message"}
{"nick":"mikeal","date":"2012-10-02T13:05:26.032Z","type":"join"}
{"nick":"bnoordhuis","message":"saghul: right, thanks","date":"2012-10-02T13:05:52.628Z","type":"message"}
{"nick":"bnoordhuis","message":"a fix is in the works :)","date":"2012-10-02T13:06:19.230Z","type":"message"}
{"nick":"txdv_","message":"bnoordhuis: getting rid of libeio?","date":"2012-10-02T13:07:18.084Z","type":"message"}
{"nick":"bnoordhuis","message":"txdv_: yep, already done","date":"2012-10-02T13:07:27.565Z","type":"message"}
{"nick":"txdv_","message":"so you are working towards uv_file_t?","date":"2012-10-02T13:07:45.777Z","type":"message"}
{"nick":"bnoordhuis","message":"hah, sure","date":"2012-10-02T13:07:52.388Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis great","date":"2012-10-02T13:07:52.537Z","type":"message"}
{"nick":"txdv_","message":"so libev is next i guess","date":"2012-10-02T13:08:18.158Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: interesting that the github firehose spit out your libuv push but not your node push","date":"2012-10-02T13:08:59.503Z","type":"message"}
{"nick":"mikeal","reason":"Ping timeout: 246 seconds","date":"2012-10-02T13:10:17.973Z","type":"quit"}
{"nick":"saghul","message":"bnoordhuis was sendfile previously broken in some weird way? I wonder why my test fails now :-S","date":"2012-10-02T13:12:25.806Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: not broken, libeio always emulated i t","date":"2012-10-02T13:12:38.941Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis hum, I guess I need to dive deeper then","date":"2012-10-02T13:13:11.451Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: i know why it's happening, that test tries to sendfile() from one regular file to another","date":"2012-10-02T13:13:37.287Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis is that not ok?","date":"2012-10-02T13:14:02.162Z","type":"message"}
{"nick":"saghul","message":"my test does the same","date":"2012-10-02T13:14:14.442Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: no, on most platforms sendfile() only supports writing from a regular file to a socket","date":"2012-10-02T13:14:25.260Z","type":"message"}
{"nick":"bnoordhuis","message":"linux is the only exception, i think, and only since 2.6.33 or 2.6.38 iirc","date":"2012-10-02T13:14:53.502Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: hm, I can't use SlabAllocator here. I guess I should write my own. should it go to a seperate file?","date":"2012-10-02T13:14:53.624Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: have you profiled it?","date":"2012-10-02T13:15:23.456Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis fun. not. then maybe libeio was doing some black magic there? that thing worked on Darwin.","date":"2012-10-02T13:15:45.311Z","type":"message"}
{"nick":"c4milo","date":"2012-10-02T13:15:46.758Z","type":"join"}
{"nick":"bnoordhuis","message":"saghul: yeah, that's because it never actually called sendfile - it just did a read/write loop :)","date":"2012-10-02T13:16:06.256Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: nope, not yet","date":"2012-10-02T13:16:28.827Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: start with that :)","date":"2012-10-02T13:16:36.934Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis oh, that explains!","date":"2012-10-02T13:16:58.934Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: i'll be landing a patch today that falls back to a read/write loop if sendfile fails","date":"2012-10-02T13:17:27.545Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis cool! question: if the fd on a TCP handle is private, how is this supposed to be used?","date":"2012-10-02T13:18:06.044Z","type":"message"}
{"nick":"saghul","message":"or is the fd public now?","date":"2012-10-02T13:18:19.390Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: you don't use it if you want to be cross-platform","date":"2012-10-02T13:19:11.990Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: i assume that relates to sendfile?","date":"2012-10-02T13:19:38.646Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis yes, sendfile","date":"2012-10-02T13:19:47.317Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: we don't have a good story for that yet","date":"2012-10-02T13:19:57.535Z","type":"message"}
{"nick":"bnoordhuis","message":"we're probably going to add some stream-like api that automatically does the Right Thing","date":"2012-10-02T13:20:16.175Z","type":"message"}
{"nick":"bnoordhuis","message":"something like uv_stream(uv_handle_t* src, uv_handle_t* dst, size_t nbytes, off_t offset)","date":"2012-10-02T13:20:47.407Z","type":"message"}
{"nick":"bnoordhuis","message":"(details remain tbd)","date":"2012-10-02T13:21:03.166Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis sounds awesome :-) I'll just disable that test on platforms other than Linux then","date":"2012-10-02T13:21:46.082Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: you should be able to re-enable it later today :)","date":"2012-10-02T13:22:22.268Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis I'll watch the GitHub feed closely then ;-)","date":"2012-10-02T13:23:33.403Z","type":"message"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2012-10-02T13:24:26.853Z","type":"quit"}
{"nick":"kristate","date":"2012-10-02T13:25:38.836Z","type":"join"}
{"nick":"mmalecki","message":"http_bench is unstable as fuck >.<","date":"2012-10-02T13:25:45.219Z","type":"message"}
{"nick":"rendar","message":"tbd ?","date":"2012-10-02T13:25:51.475Z","type":"message"}
{"nick":"mmalecki","message":"rendar: to be done","date":"2012-10-02T13:25:57.892Z","type":"message"}
{"nick":"rendar","message":"i see","date":"2012-10-02T13:26:00.972Z","type":"message"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2012-10-02T13:27:45.971Z","type":"quit"}
{"nick":"stagas","date":"2012-10-02T13:32:16.845Z","type":"join"}
{"nick":"kristate","date":"2012-10-02T13:33:01.977Z","type":"join"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2012-10-02T13:33:57.130Z","type":"quit"}
{"nick":"kristate","date":"2012-10-02T13:35:03.976Z","type":"join"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2012-10-02T13:36:22.297Z","type":"quit"}
{"nick":"kristate","date":"2012-10-02T13:37:10.670Z","type":"join"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2012-10-02T13:48:52.945Z","type":"quit"}
{"nick":"kristate","date":"2012-10-02T13:49:19.975Z","type":"join"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2012-10-02T13:51:47.635Z","type":"quit"}
{"nick":"kristate","date":"2012-10-02T13:52:14.902Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-10-02T13:53:09.420Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: yo","date":"2012-10-02T13:55:21.615Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: sup homie?","date":"2012-10-02T13:55:31.515Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: sendfile emulation - did you fix the race condition?","date":"2012-10-02T13:55:37.098Z","type":"message"}
{"nick":"piscisaureus_","message":"er","date":"2012-10-02T13:55:40.662Z","type":"message"}
{"nick":"piscisaureus_","message":"the  threadsafety issue","date":"2012-10-02T13:55:44.824Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: yes. and introduced a fork safety issue :)","date":"2012-10-02T13:55:52.514Z","type":"message"}
{"nick":"piscisaureus_","message":"well, fuck that","date":"2012-10-02T13:56:10.809Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: uv-unix is full of fork-safety issues","date":"2012-10-02T13:56:21.521Z","type":"message"}
{"nick":"indutny","message":" /usr/bin/env: No such file or directory","date":"2012-10-02T13:56:24.486Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2012-10-02T13:56:26.053Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: on non-linux anyway","date":"2012-10-02T13:56:35.593Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: the only way around that is a big mutex","date":"2012-10-02T13:56:39.616Z","type":"message"}
{"nick":"indutny","message":"how to configure node on smartos?","date":"2012-10-02T13:56:48.034Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: ./configure","date":"2012-10-02T13:57:03.930Z","type":"message"}
{"nick":"mmalecki","message":"indutny: well, ./configure --prefix /opt/local","date":"2012-10-02T13:57:04.707Z","type":"message"}
{"nick":"mmalecki","message":"that's what I do on smartmachines","date":"2012-10-02T13:57:11.305Z","type":"message"}
{"nick":"mmalecki","message":"indutny: you want access to a configured and set up machine?","date":"2012-10-02T13:57:40.944Z","type":"message"}
{"nick":"indutny","message":"mmalecki: nope","date":"2012-10-02T13:57:52.893Z","type":"message"}
{"nick":"indutny","message":"mmalecki: I need my own one :)","date":"2012-10-02T13:57:56.989Z","type":"message"}
{"nick":"mmalecki","message":"cool","date":"2012-10-02T13:58:01.728Z","type":"message"}
{"nick":"bnoordhuis","action":"is doing the groceries","date":"2012-10-02T13:58:28.413Z","type":"action"}
{"nick":"indutny","message":"mmalecki: wanna proof read my blog post?","date":"2012-10-02T13:59:02.058Z","type":"message"}
{"nick":"indutny","message":"ryah: ^","date":"2012-10-02T13:59:05.124Z","type":"message"}
{"nick":"indutny","message":"I mean you both","date":"2012-10-02T13:59:29.428Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-10-02T13:59:31.809Z","type":"message"}
{"nick":"mmalecki","message":"indutny: sure","date":"2012-10-02T13:59:33.508Z","type":"message"}
{"nick":"indutny","message":"mmalecki: ok, once I'll deploy it","date":"2012-10-02T14:00:02.818Z","type":"message"}
{"nick":"indutny","message":"mmalecki: oh, how slow the build is on smartos 512mb","date":"2012-10-02T14:01:54.930Z","type":"message"}
{"nick":"mmalecki","message":"indutny: pretty damn slow, over 2 mins at least. get binaries maybe?","date":"2012-10-02T14:02:36.700Z","type":"message"}
{"nick":"mmalecki","message":"indutny: get a 1 GB, they are fairly fast","date":"2012-10-02T14:03:37.220Z","type":"message"}
{"nick":"AvianFlu","date":"2012-10-02T14:03:57.443Z","type":"join"}
{"nick":"indutny","message":"mmalecki: no, I don't want to :)","date":"2012-10-02T14:05:39.363Z","type":"message"}
{"nick":"mmalecki","message":"why?","date":"2012-10-02T14:05:52.422Z","type":"message"}
{"nick":"mikeal","date":"2012-10-02T14:06:01.786Z","type":"join"}
{"nick":"indutny","message":"mmalecki: 512mb is cheap","date":"2012-10-02T14:06:24.960Z","type":"message"}
{"nick":"mmalecki","message":"indutny: if it's on nodejitsu account, meh, take 1 GB","date":"2012-10-02T14:06:53.153Z","type":"message"}
{"nick":"indutny","message":"mmalecki: no, it's on my own","date":"2012-10-02T14:10:30.318Z","type":"message"}
{"nick":"mikeal","reason":"Ping timeout: 240 seconds","date":"2012-10-02T14:10:56.217Z","type":"quit"}
{"nick":"mmalecki","message":"ah, cool","date":"2012-10-02T14:11:04.614Z","type":"message"}
{"nick":"indutny","message":"mmalecki: http://165.225.128.15:8080/","date":"2012-10-02T14:11:51.459Z","type":"message"}
{"nick":"indutny","message":"wait","date":"2012-10-02T14:11:58.799Z","type":"message"}
{"nick":"indutny","message":"mmalecki: ok, it's live now","date":"2012-10-02T14:13:14.819Z","type":"message"}
{"nick":"indutny","message":"mmalecki: does it works?","date":"2012-10-02T14:13:59.956Z","type":"message"}
{"nick":"mmalecki","message":"yeah","date":"2012-10-02T14:14:39.035Z","type":"message"}
{"nick":"mmalecki","message":"indutny: looking","date":"2012-10-02T14:17:22.382Z","type":"message"}
{"nick":"mmalecki","message":"indutny: make the links actual links - \"Bundling fresh version of OpenSSL\" should be a link","date":"2012-10-02T14:17:50.719Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: yo, why do you malloc struct signal_ctx? It seems that we could just make it static...","date":"2012-10-02T14:17:54.751Z","type":"message"}
{"nick":"mmalecki","message":"so should be rest of bullet points","date":"2012-10-02T14:18:01.643Z","type":"message"}
{"nick":"mmalecki","message":"\"Several actions were taken\"","date":"2012-10-02T14:18:45.659Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: http://165.225.128.15:8080/0.benchmarking-tls","date":"2012-10-02T14:18:55.571Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: proof read, please","date":"2012-10-02T14:18:59.407Z","type":"message"}
{"nick":"piscisaureus_","message":"ok","date":"2012-10-02T14:19:04.504Z","type":"message"}
{"nick":"indutny","message":"mmalecki: good idea","date":"2012-10-02T14:19:09.159Z","type":"message"}
{"nick":"mmalecki","message":"\"as they told\" -> \"as they said\"","date":"2012-10-02T14:19:29.881Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: is there a github repo where I can comment?","date":"2012-10-02T14:19:35.636Z","type":"message"}
{"nick":"mmalecki","message":"oh, yeah, that ^","date":"2012-10-02T14:19:57.496Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: btw, inlined asm is still off on master","date":"2012-10-02T14:20:10.294Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: hm..","date":"2012-10-02T14:21:25.777Z","type":"message"}
{"nick":"indutny","message":"github repo is private so far","date":"2012-10-02T14:21:33.694Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-10-02T14:21:34.294Z","type":"message"}
{"nick":"indutny","message":"lets publish it","date":"2012-10-02T14:21:35.944Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: I have quite a few comments :-)","date":"2012-10-02T14:21:37.533Z","type":"message"}
{"nick":"indutny","message":"mmalecki: piscisaureus_ https://github.com/indutny/blog","date":"2012-10-02T14:21:56.898Z","type":"message"}
{"nick":"piscisaureus_","message":"meh, why does github not let one comment on markdown files","date":"2012-10-02T14:22:33.464Z","type":"message"}
{"nick":"piscisaureus_","message":":-(","date":"2012-10-02T14:22:34.497Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus_: go to commit","date":"2012-10-02T14:22:41.680Z","type":"message"}
{"nick":"indutny","message":"btw, does style looks good to you?","date":"2012-10-02T14:23:19.834Z","type":"message"}
{"nick":"mmalecki","message":"yeah, it looks nice","date":"2012-10-02T14:23:27.422Z","type":"message"}
{"nick":"indutny","message":"mmalecki: have you pressed +1 button?","date":"2012-10-02T14:23:36.020Z","type":"message"}
{"nick":"mmalecki","message":"indutny: I'll do some gramatical nitpicking :)","date":"2012-10-02T14:23:38.041Z","type":"message"}
{"nick":"mmalecki","message":"indutny: yeah","date":"2012-10-02T14:23:39.468Z","type":"message"}
{"nick":"indutny","message":"mmalecki: ok","date":"2012-10-02T14:23:42.847Z","type":"message"}
{"nick":"indutny","message":"so you better know","date":"2012-10-02T14:23:45.884Z","type":"message"}
{"nick":"indutny","message":"it's calculating sha1 hash in the background","date":"2012-10-02T14:23:52.050Z","type":"message"}
{"nick":"indutny","message":";)","date":"2012-10-02T14:23:55.236Z","type":"message"}
{"nick":"indutny","message":"not something illegal","date":"2012-10-02T14:24:02.209Z","type":"message"}
{"nick":"indutny","message":"just to spend some CPU cycles","date":"2012-10-02T14:24:08.857Z","type":"message"}
{"nick":"mmalecki","message":"hahaha","date":"2012-10-02T14:24:49.652Z","type":"message"}
{"nick":"mmalecki","message":"nice","date":"2012-10-02T14:24:53.681Z","type":"message"}
{"nick":"mmalecki","message":"indutny: there, finished my gramatical nitpicking","date":"2012-10-02T14:27:17.908Z","type":"message"}
{"nick":"TheJH","date":"2012-10-02T14:27:41.475Z","type":"join"}
{"nick":"indutny","message":"mmalecki: thanks","date":"2012-10-02T14:28:40.500Z","type":"message"}
{"nick":"indutny","message":"mmalecki: what about \"its slowness\"","date":"2012-10-02T14:28:49.823Z","type":"message"}
{"nick":"mmalecki","message":"AvianFlu: can you explain that using correct wording?","date":"2012-10-02T14:29:42.545Z","type":"message"}
{"nick":"mmalecki","message":"here http://garyes.stormloader.com/its.html","date":"2012-10-02T14:29:56.125Z","type":"message"}
{"nick":"erickt","date":"2012-10-02T14:33:36.440Z","type":"join"}
{"nick":"stagas","reason":"Quit: ChatZilla 0.9.89-rdmsoft [XULRunner 1.9.0.17/2009122204]","date":"2012-10-02T14:36:52.022Z","type":"quit"}
{"nick":"piscisaureus_","message":"indutny: the blog should give more hints that infact it is not so much better than the builtin tls module","date":"2012-10-02T14:44:09.304Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: most people don't read all text, they could easily overlook the last paragraph","date":"2012-10-02T14:44:44.836Z","type":"message"}
{"nick":"`3rdEden","message":"needs a tl;dr","date":"2012-10-02T14:48:44.542Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: that's what I'm counting on","date":"2012-10-02T14:49:39.703Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: :)","date":"2012-10-02T14:49:42.623Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: it will only lead to disappointment","date":"2012-10-02T14:49:58.986Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: okok","date":"2012-10-02T14:50:50.465Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: if people get the full message they'll think you are serious about this stuff. If they think tlsnappy is fast, and try it, and then it turns out to be slow, they'll just think you're a smug.","date":"2012-10-02T14:50:52.377Z","type":"message"}
{"nick":"mikeal","date":"2012-10-02T14:51:30.427Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2012-10-02T14:51:33.824Z","type":"quit"}
{"nick":"indutny","message":"piscisaureus_: word","date":"2012-10-02T14:52:23.670Z","type":"message"}
{"nick":"piscisaureus__","date":"2012-10-02T14:53:19.430Z","type":"join"}
{"nick":"indutny","action":"mmalecki: piscisaureus_: http://blog.indutny.com/0.benchmarking-tls","date":"2012-10-02T14:55:06.975Z","type":"action"}
{"nick":"indutny","message":"mmalecki: tldr is left","date":"2012-10-02T14:55:17.471Z","type":"message"}
{"nick":"indutny","message":"working on it now","date":"2012-10-02T14:55:20.881Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 246 seconds","date":"2012-10-02T14:55:51.475Z","type":"quit"}
{"nick":"indutny","message":"piscisaureus__: ^","date":"2012-10-02T14:56:51.072Z","type":"message"}
{"nick":"piscisaureus__","reason":"Ping timeout: 248 seconds","date":"2012-10-02T15:00:02.376Z","type":"quit"}
{"nick":"MI6","reason":"Remote host closed the connection","date":"2012-10-02T15:00:21.814Z","type":"quit"}
{"nick":"tjfontaine","new_nick":"mi6","date":"2012-10-02T15:00:26.016Z","type":"nick"}
{"nick":"mi6","new_nick":"tjfontaine","date":"2012-10-02T15:01:43.552Z","type":"nick"}
{"nick":"MI6","date":"2012-10-02T15:02:11.435Z","type":"join"}
{"nick":"indutny","message":"ok, published it","date":"2012-10-02T15:03:00.352Z","type":"message"}
{"nick":"indutny","message":"and posted everywhere","date":"2012-10-02T15:03:03.138Z","type":"message"}
{"nick":"indutny","message":"spread the word :D","date":"2012-10-02T15:03:06.727Z","type":"message"}
{"nick":"indutny","message":"ryah: http://blog.indutny.com/0.benchmarking-tls","date":"2012-10-02T15:03:12.657Z","type":"message"}
{"nick":"piscisaureus__","date":"2012-10-02T15:07:49.401Z","type":"join"}
{"nick":"piscisaureus__","message":"indutny: btw - why did you call the last paragraph \"Foreword\" ?","date":"2012-10-02T15:11:48.732Z","type":"message"}
{"nick":"piscisaureus__","new_nick":"piscisaureus","date":"2012-10-02T15:12:25.208Z","type":"nick"}
{"nick":"rendar","message":"hmm, what is node.js tls? is it ssl?","date":"2012-10-02T15:22:54.022Z","type":"message"}
{"nick":"rendar","message":"oh i see, its new SSL","date":"2012-10-02T15:23:54.244Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-10-02T15:23:58.166Z","type":"quit"}
{"nick":"tjfontaine","message":"almost feels like a troll question, but tls supercedes ssl http://en.wikipedia.org/wiki/Transport_Layer_Security","date":"2012-10-02T15:24:08.433Z","type":"message"}
{"nick":"rendar","message":"tjfontaine: yes, i'm reading, i have asked because i couldn't find anything for a typo error, sorry","date":"2012-10-02T15:27:01.276Z","type":"message"}
{"nick":"rendar","message":":)","date":"2012-10-02T15:27:01.736Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm getting slightly annoyed with pread() inexplicably returning 0 on solaris...","date":"2012-10-02T15:31:27.200Z","type":"message"}
{"nick":"ryah","message":"do you guys use \"j\" ?","date":"2012-10-02T15:34:18.271Z","type":"message"}
{"nick":"ryah","message":"(for jumping around directories?)","date":"2012-10-02T15:34:39.535Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: cd -","date":"2012-10-02T15:35:02.657Z","type":"message"}
{"nick":"piscisaureus","message":"norton commander","date":"2012-10-02T15:35:20.609Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: im a cd - user too","date":"2012-10-02T15:36:27.444Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: zsh dir stacks?","date":"2012-10-02T15:36:39.676Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: i don't use zsh","date":"2012-10-02T15:36:47.277Z","type":"message"}
{"nick":"ryah","message":"hm you seem like the zsh type to me","date":"2012-10-02T15:37:04.915Z","type":"message"}
{"nick":"bnoordhuis","message":"i've been raised on corn bread and bash","date":"2012-10-02T15:38:21.654Z","type":"message"}
{"nick":"bnoordhuis","message":"talking about... dinner time!","date":"2012-10-02T15:38:44.974Z","type":"message"}
{"nick":"tjfontaine","message":"I keep trying to get into zsh, but eventually turn things off to make it more bash like","date":"2012-10-02T15:38:52.628Z","type":"message"}
{"nick":"ryah","message":"don't do it. it's a sad addicition","date":"2012-10-02T15:40:56.185Z","type":"message"}
{"nick":"ryah","message":"best to just use bash","date":"2012-10-02T15:41:01.316Z","type":"message"}
{"nick":"ryah","message":"*addiction","date":"2012-10-02T15:41:20.989Z","type":"message"}
{"nick":"ryah","message":"oh i had it right..","date":"2012-10-02T15:41:34.838Z","type":"message"}
{"nick":"isaacs","message":"ryah: you can do dir stacks in bash","date":"2012-10-02T15:42:04.928Z","type":"message"}
{"nick":"isaacs","message":"i actually have a little php program i wrote ages ago that lets me do full on histories of dirs.","date":"2012-10-02T15:42:27.444Z","type":"message"}
{"nick":"isaacs","message":"cd -3 to go back 3 dirs","date":"2012-10-02T15:42:34.000Z","type":"message"}
{"nick":"isaacs","message":"or cd +2 to go forward 2","date":"2012-10-02T15:42:44.733Z","type":"message"}
{"nick":"ryah","message":"php program?","date":"2012-10-02T15:43:07.017Z","type":"message"}
{"nick":"isaacs","message":"ryah: yeah","date":"2012-10-02T15:43:11.306Z","type":"message"}
{"nick":"ryah","message":"can you use php for non web things?","date":"2012-10-02T15:43:29.086Z","type":"message"}
{"nick":"isaacs","message":"ryah: https://gist.github.com/3820263","date":"2012-10-02T15:44:29.139Z","type":"message"}
{"nick":"isaacs","message":"heall yea.","date":"2012-10-02T15:44:32.579Z","type":"message"}
{"nick":"isaacs","message":"php sucks for web things","date":"2012-10-02T15:44:37.240Z","type":"message"}
{"nick":"isaacs","message":"it's really nice for cli scripting, though","date":"2012-10-02T15:44:47.152Z","type":"message"}
{"nick":"isaacs","message":"it's like bash, but just slightly more structured.","date":"2012-10-02T15:44:52.028Z","type":"message"}
{"nick":"isaacs","message":"this is probably a terrible program, i write way back before i used git for stuff.","date":"2012-10-02T15:45:25.844Z","type":"message"}
{"nick":"isaacs","message":"but it's been working without any modifications since then, so that's something.","date":"2012-10-02T15:45:38.576Z","type":"message"}
{"nick":"isaacs","message":"i guess you could say i use bash, but i've written a bunch of features into my bash environment, so it may as well be a different thing.","date":"2012-10-02T15:46:56.201Z","type":"message"}
{"nick":"isaacs","message":"but that's more respectable, imo, than using zsh.","date":"2012-10-02T15:47:11.099Z","type":"message"}
{"nick":"isaacs","message":"it's like using express, vs using coffee-script","date":"2012-10-02T15:47:23.050Z","type":"message"}
{"nick":"isaacs","message":"one is a framework, the other changes the language entirely","date":"2012-10-02T15:47:33.904Z","type":"message"}
{"nick":"ryah","message":"wow...","date":"2012-10-02T15:48:41.098Z","type":"message"}
{"nick":"codeboost","date":"2012-10-02T16:01:43.396Z","type":"join"}
{"nick":"indutny","message":"philips_: foreword","date":"2012-10-02T16:02:08.240Z","type":"message"}
{"nick":"indutny","message":"oops","date":"2012-10-02T16:02:12.830Z","type":"message"}
{"nick":"indutny","message":"piscisaureus: it should be afterword?","date":"2012-10-02T16:02:18.537Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2012-10-02T16:02:58.249Z","type":"message"}
{"nick":"isaacs","message":"indutny: tlsnappy makes me excited.","date":"2012-10-02T16:03:34.161Z","type":"message"}
{"nick":"isaacs","message":"indutny: i think we should definitely consider just making this the thing that does tls in node.","date":"2012-10-02T16:04:14.602Z","type":"message"}
{"nick":"codeboost","message":"Hello ! I have a question regarding multithreading in a node addon I'm writing. ","date":"2012-10-02T16:04:49.329Z","type":"message"}
{"nick":"indutny","message":"isaacs: it's not as good so far","date":"2012-10-02T16:04:51.155Z","type":"message"}
{"nick":"isaacs","message":"indutny: no, but it's heading in a good direction","date":"2012-10-02T16:05:08.483Z","type":"message"}
{"nick":"isaacs","message":"indutny: if not for 0.10, then for 0.12/1.0","date":"2012-10-02T16:05:17.543Z","type":"message"}
{"nick":"codeboost","message":"So I have this scenario: The C++ code calls a callback from it's own thread.  I use uv_queue_work() to queue a work item and then call the javascript handler when my cbComplete handler is called by libuv. So far so good. ","date":"2012-10-02T16:06:40.287Z","type":"message"}
{"nick":"codeboost","message":"Now the problem: I have a similar callback from C++, only this time, the C++ library expects one of the arguments' data to be modified","date":"2012-10-02T16:07:04.667Z","type":"message"}
{"nick":"codeboost","message":" The function is called GetNextFrame(short* samples, int numberOfSamples) and the lib expects me to fill samples with data.","date":"2012-10-02T16:08:12.996Z","type":"message"}
{"nick":"codeboost","message":"If I queue the javascript handler asynchronously, then the callback thread continues and I can't modify the data. ","date":"2012-10-02T16:08:54.155Z","type":"message"}
{"nick":"indutny","message":"isaacs: yeah","date":"2012-10-02T16:09:18.370Z","type":"message"}
{"nick":"indutny","message":"I hope so","date":"2012-10-02T16:09:20.003Z","type":"message"}
{"nick":"isaacs","action":"commute time","date":"2012-10-02T16:09:41.911Z","type":"action"}
{"nick":"Ralt","reason":"Ping timeout: 245 seconds","date":"2012-10-02T16:11:03.494Z","type":"quit"}
{"nick":"codeboost","message":"so I tried waiting on a semaphore immediately after uv_queue_work() and then posting to that semaphore after I make the call into javascript, but I keep getting this assertion: Assertion failed: uv__has_active_reqs(loop), file c:\\node-v0.8.11\\deps\\uv\\src\\wi n\\../uv-common.h, line 101","date":"2012-10-02T16:11:03.784Z","type":"message"}
{"nick":"codeboost","message":"If there's anyone left who's not totally confused by what I'm writing here, any hints, tips or ideas ?","date":"2012-10-02T16:11:50.483Z","type":"message"}
{"nick":"indutny","message":"codeboost: ok","date":"2012-10-02T16:13:09.767Z","type":"message"}
{"nick":"indutny","message":"so first of all","date":"2012-10-02T16:13:11.432Z","type":"message"}
{"nick":"indutny","message":"are you calling uv_queue_work() from another thread?","date":"2012-10-02T16:13:55.055Z","type":"message"}
{"nick":"codeboost","message":"indutny: yes","date":"2012-10-02T16:13:55.829Z","type":"message"}
{"nick":"mmalecki","new_nick":"mmalecki[brb]","date":"2012-10-02T16:13:55.969Z","type":"nick"}
{"nick":"indutny","message":"codeboost: that's incorrect","date":"2012-10-02T16:14:17.809Z","type":"message"}
{"nick":"indutny","message":"it's not thread safe","date":"2012-10-02T16:14:20.178Z","type":"message"}
{"nick":"indutny","message":"codeboost: you should use uv_async_send to invoke callbacks on event loop's thread","date":"2012-10-02T16:14:32.299Z","type":"message"}
{"nick":"TooTallNate","date":"2012-10-02T16:14:39.290Z","type":"join"}
{"nick":"codeboost","message":"that's a breath of fresh air","date":"2012-10-02T16:15:08.071Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2012-10-02T16:15:49.678Z","type":"message"}
{"nick":"codeboost","message":"so how do I use uv_async_send... is the uv_close_cb the callback I'm looking for ?","date":"2012-10-02T16:16:54.015Z","type":"message"}
{"nick":"brson","date":"2012-10-02T16:17:04.673Z","type":"join"}
{"nick":"piscisaureus","message":"codeboost: http://nikhilm.github.com/uvbook/threads.html#inter-thread-communication","date":"2012-10-02T16:18:17.309Z","type":"message"}
{"nick":"indutny","message":"piscisaureus: ++","date":"2012-10-02T16:19:40.745Z","type":"message"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-10-02T16:20:11.111Z","type":"quit"}
{"nick":"codeboost","message":"wow that's great, didn't know this thing was documented","date":"2012-10-02T16:20:43.140Z","type":"message"}
{"nick":"indutny","message":"it's better","date":"2012-10-02T16:21:56.639Z","type":"message"}
{"nick":"indutny","message":"it's a book","date":"2012-10-02T16:21:58.914Z","type":"message"}
{"nick":"codeboost","message":"ok, I'll read up on uv_async_send() then, but still this doesn't entirely solve my problem: how do you modify the data on the caller thread from the JS world?","date":"2012-10-02T16:22:36.883Z","type":"message"}
{"nick":"indutny","message":"codeboost: you nee","date":"2012-10-02T16:23:11.564Z","type":"message"}
{"nick":"indutny","message":"erm","date":"2012-10-02T16:23:13.828Z","type":"message"}
{"nick":"indutny","message":"you can initialize semaphore","date":"2012-10-02T16:23:24.290Z","type":"message"}
{"nick":"indutny","message":"and do uv_sem_post()","date":"2012-10-02T16:23:28.189Z","type":"message"}
{"nick":"indutny","message":"in another thread - just wait with uv_sem_wait()","date":"2012-10-02T16:23:50.613Z","type":"message"}
{"nick":"indutny","message":"on other hand","date":"2012-10-02T16:23:52.196Z","type":"message"}
{"nick":"codeboost","message":"ok, so I uv_async_send() then immediately wait on a semaphore... then, after the JS call, I post to that semaphore..right ?","date":"2012-10-02T16:23:59.600Z","type":"message"}
{"nick":"indutny","message":"you can just change that thread's data from libuv's thread","date":"2012-10-02T16:24:05.692Z","type":"message"}
{"nick":"indutny","message":"codeboost: yes, that will work","date":"2012-10-02T16:24:14.423Z","type":"message"}
{"nick":"codeboost","message":"that's great, thanks a lot !","date":"2012-10-02T16:24:39.436Z","type":"message"}
{"nick":"indutny","message":"codeboost: you're welcome","date":"2012-10-02T16:24:50.960Z","type":"message"}
{"nick":"erickt","date":"2012-10-02T16:39:37.361Z","type":"join"}
{"nick":"piscisaureus_!~piscisaur@i53004.upc-i.chello.nl","topic":"liberal utopian vacation ~ http://piscisaureus.no.de/libuv ~ http://groups.google.com/group/libuv","date":"2012-10-02T19:26:02.947Z","type":"topic"}
{"nick":"piscisaureus","message":"https://gist.github.com/0030933d015d1e77ae04 <-- note to self","date":"2012-10-02T19:26:21.021Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: hmm","date":"2012-10-02T19:29:42.559Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: actually it also isn't safe across fork()","date":"2012-10-02T19:29:53.093Z","type":"message"}
{"nick":"stagas","date":"2012-10-02T19:31:10.366Z","type":"join"}
{"nick":"EhevuTov_","date":"2012-10-02T19:31:55.289Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus: right","date":"2012-10-02T19:32:19.822Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so that patch that you did lately to make child's stdio blocking is not a great idea ...","date":"2012-10-02T19:32:50.910Z","type":"message"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2012-10-02T19:32:51.799Z","type":"quit"}
{"nick":"EhevuTov","reason":"Ping timeout: 260 seconds","date":"2012-10-02T19:33:24.437Z","type":"quit"}
{"nick":"bnoordhuis","message":"no. but non-blocking stdio isn't a great idea either","date":"2012-10-02T19:33:45.096Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess we'll have to reopen the tty in the child process","date":"2012-10-02T19:33:54.472Z","type":"message"}
{"nick":"bnoordhuis","message":"it's kind of amusing that it works like that and then again not","date":"2012-10-02T19:34:46.867Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so how's that when the child inherits something not-a-tty, e.g. pipe ?","date":"2012-10-02T19:34:47.567Z","type":"message"}
{"nick":"indexzero","date":"2012-10-02T19:36:59.415Z","type":"join"}
{"nick":"Ralt","date":"2012-10-02T19:37:52.594Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus: if the child process is supposed to inherit only one end of the pipe, you can make that end blocking","date":"2012-10-02T19:37:58.597Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: that's not what i mean","date":"2012-10-02T19:38:16.326Z","type":"message"}
{"nick":"bnoordhuis","message":"it doesn't affect the other end, they're separate \"files\"","date":"2012-10-02T19:38:16.937Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: what if you use { stdio: 'inherit' } ?","date":"2012-10-02T19:38:26.264Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, that's a problem","date":"2012-10-02T19:38:44.817Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: it probably doesn't matter much because we make stdout blocking anyway","date":"2012-10-02T19:38:57.107Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: and two processes reading the same stdin is insane","date":"2012-10-02T19:39:11.469Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but if people e.g. try to hook a child process to a socket then we may be in trouble","date":"2012-10-02T19:39:41.133Z","type":"message"}
{"nick":"piscisaureus","message":"problems like these is what make uv-win so troublesome","date":"2012-10-02T19:41:01.570Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I wonder how can I measure time spent in locks and waiting for semaphore","date":"2012-10-02T19:45:06.283Z","type":"message"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-10-02T19:45:30.112Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: mutrace?","date":"2012-10-02T19:47:03.386Z","type":"message"}
{"nick":"bnoordhuis","message":"you can get ballpark figures with gprof or callgrind but mutrace is more exact","date":"2012-10-02T19:47:29.029Z","type":"message"}
{"nick":"EhevuTov_","reason":"Ping timeout: 248 seconds","date":"2012-10-02T19:47:30.266Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: mutrace","date":"2012-10-02T19:47:56.764Z","type":"message"}
{"nick":"indutny","message":"thanks","date":"2012-10-02T19:47:58.369Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: if you just want to know how much time is spent in locks (on linux), `strace -cfe futex`","date":"2012-10-02T19:48:17.187Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-10-02T19:48:26.921Z","type":"message"}
{"nick":"indutny","message":"I can use dtrace powers","date":"2012-10-02T19:48:30.611Z","type":"message"}
{"nick":"indutny","message":"right","date":"2012-10-02T19:48:31.333Z","type":"message"}
{"nick":"bnoordhuis","message":"it's not quite exact if you use adaptive locks, of course","date":"2012-10-02T19:48:47.508Z","type":"message"}
{"nick":"indutny","message":"what's adaptive locks?","date":"2012-10-02T19:49:10.306Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: locks that start out as spinlocks before yielding","date":"2012-10-02T19:50:46.727Z","type":"message"}
{"nick":"indutny","message":"ohhhh","date":"2012-10-02T19:50:51.511Z","type":"message"}
{"nick":"indutny","message":"shit came real","date":"2012-10-02T19:50:54.920Z","type":"message"}
{"nick":"Ralt","reason":"Remote host closed the connection","date":"2012-10-02T19:53:17.998Z","type":"quit"}
{"nick":"Ralt","date":"2012-10-02T19:53:51.376Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: I think we ain't using adaptive mutexes anywhere in libuv, is it correct?","date":"2012-10-02T19:56:53.787Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: not explicitly but pthread_mutex_create() might create adaptive locks by default","date":"2012-10-02T19:57:34.543Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-10-02T19:57:42.929Z","type":"message"}
{"nick":"indutny","message":"even that","date":"2012-10-02T19:57:45.504Z","type":"message"}
{"nick":"indutny","message":"I thought I need to set mutex to something like this PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP for that","date":"2012-10-02T19:58:07.367Z","type":"message"}
{"nick":"Ralt","reason":"Ping timeout: 260 seconds","date":"2012-10-02T19:58:36.154Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: it varies. with glibc you create a pthread_mutex_attr_t and set PTHREAD_MUTEX_ADAPTIVE_NP","date":"2012-10-02T19:59:19.273Z","type":"message"}
{"nick":"indutny","message":"isn't glibc default on ubuntu?","date":"2012-10-02T19:59:36.497Z","type":"message"}
{"nick":"bnoordhuis","message":"the _NP bit stands for non-portable, of course :)","date":"2012-10-02T19:59:42.661Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2012-10-02T19:59:44.040Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-10-02T19:59:50.855Z","type":"message"}
{"nick":"perezd","date":"2012-10-02T20:00:25.833Z","type":"join"}
{"nick":"MI6","date":"2012-10-02T20:03:21.130Z","type":"join"}
{"nick":"tjfontaine","message":"ok I had to change mi6 to be pushed based to be nicer to github, so now we'll have to add a webhook service hook to the repos you want to monitor","date":"2012-10-02T20:04:31.647Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I'll try removing most of the locks from code","date":"2012-10-02T20:06:31.329Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: at least from ring buffers","date":"2012-10-02T20:06:36.360Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: what code? tlsnappy?","date":"2012-10-02T20:06:43.373Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I think I can implement them using instricts","date":"2012-10-02T20:06:43.643Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: libuv and node.js","date":"2012-10-02T20:06:49.898Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: who needs locks there","date":"2012-10-02T20:06:54.834Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: of course, tlsnappy","date":"2012-10-02T20:07:03.797Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-10-02T20:07:30.879Z","type":"quit"}
{"nick":"tjfontaine","message":"so someone with admin privs can add a webhook pointing to http://cass.atxconsulting.com:8000 or use https://gist.github.com/3794720#file_createhooks.js which would allow me to track issues and pull requests as well","date":"2012-10-02T20:09:21.953Z","type":"message"}
{"nick":"piscisaureus","message":"only isaacs can do that","date":"2012-10-02T20:10:09.140Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: ^","date":"2012-10-02T20:10:13.911Z","type":"message"}
{"nick":"isaacs","message":"do what now?","date":"2012-10-02T20:10:51.864Z","type":"message"}
{"nick":"isaacs","message":"from joyent/node?","date":"2012-10-02T20:10:57.801Z","type":"message"}
{"nick":"CoverSlide","message":"the tlsnappy gains don't seem particularly significant","date":"2012-10-02T20:11:01.971Z","type":"message"}
{"nick":"indexzero","date":"2012-10-02T20:11:22.370Z","type":"join"}
{"nick":"tjfontaine","message":"isaacs: yes, joyent/node and joyent/libuv presuming those are the repos you want to show up here","date":"2012-10-02T20:11:40.715Z","type":"message"}
{"nick":"indutny","message":"CoverSlide: for now yes","date":"2012-10-02T20:11:55.866Z","type":"message"}
{"nick":"indutny","message":"CoverSlide: but it wasn't fully using cpus available on server","date":"2012-10-02T20:12:07.382Z","type":"message"}
{"nick":"indutny","message":"CoverSlide: I think the reason is big lock contention","date":"2012-10-02T20:12:17.637Z","type":"message"}
{"nick":"indutny","message":"it was much better on smaller machine (my macbook pro)","date":"2012-10-02T20:12:31.157Z","type":"message"}
{"nick":"CoverSlide","message":"hmm","date":"2012-10-02T20:12:44.408Z","type":"message"}
{"nick":"indutny","message":"I mean relatively better of course","date":"2012-10-02T20:12:47.653Z","type":"message"}
{"nick":"CoverSlide","message":"icic","date":"2012-10-02T20:12:56.713Z","type":"message"}
{"nick":"indutny","message":"CoverSlide: btw, you can give it a try on your machine","date":"2012-10-02T20:14:35.213Z","type":"message"}
{"nick":"indutny","message":"CoverSlide: and benchmark it","date":"2012-10-02T20:14:37.863Z","type":"message"}
{"nick":"indutny","message":"I will be really glad :)","date":"2012-10-02T20:14:42.223Z","type":"message"}
{"nick":"CoverSlide","message":"k i will take a look","date":"2012-10-02T20:14:56.831Z","type":"message"}
{"nick":"indutny","message":"CoverSlide: thanks","date":"2012-10-02T20:15:06.128Z","type":"message"}
{"nick":"creationix","message":"is there a way in node to get a free port synchronously?","date":"2012-10-02T20:18:02.381Z","type":"message"}
{"nick":"creationix","message":"right now I create a new net server, listen, read the port, and close","date":"2012-10-02T20:18:20.036Z","type":"message"}
{"nick":"creationix","message":"1. I feel that's a race condition, and 2. I'd prefer a sync method if possible","date":"2012-10-02T20:18:33.968Z","type":"message"}
{"nick":"indutny","message":"creationix: there're no such way","date":"2012-10-02T20:18:49.462Z","type":"message"}
{"nick":"indutny","message":"unfortunatelly","date":"2012-10-02T20:18:52.471Z","type":"message"}
{"nick":"indutny","message":"though you can get fd out of that listening server","date":"2012-10-02T20:18:59.110Z","type":"message"}
{"nick":"indutny","message":"and reuse it","date":"2012-10-02T20:19:01.185Z","type":"message"}
{"nick":"indutny","message":"listenFD or whatever","date":"2012-10-02T20:19:05.684Z","type":"message"}
{"nick":"indutny","message":"this will fix race condition","date":"2012-10-02T20:19:12.785Z","type":"message"}
{"nick":"creationix","message":"no, I need to use the port in an ssh config flag","date":"2012-10-02T20:19:23.626Z","type":"message"}
{"nick":"creationix","message":"for port forwarding","date":"2012-10-02T20:19:26.791Z","type":"message"}
{"nick":"indutny","message":"ooh","date":"2012-10-02T20:19:33.228Z","type":"message"}
{"nick":"indutny","message":"well","date":"2012-10-02T20:19:37.550Z","type":"message"}
{"nick":"creationix","message":"I wish ssh would just auto-select a free port for me","date":"2012-10-02T20:19:41.200Z","type":"message"}
{"nick":"creationix","message":"but it only seems to work for remote forwards, not local forwards","date":"2012-10-02T20:19:55.826Z","type":"message"}
{"nick":"indutny","message":"that's how I'm doing it in vock https://github.com/indutny/vock/blob/master/lib/vock/socket.js#L49","date":"2012-10-02T20:20:02.673Z","type":"message"}
{"nick":"indutny","message":"find free port and mapping it","date":"2012-10-02T20:20:16.774Z","type":"message"}
{"nick":"indutny","message":"not sure if it's close to your thing","date":"2012-10-02T20:20:24.179Z","type":"message"}
{"nick":"indutny","message":"we should definitely add something like listenSync","date":"2012-10-02T20:20:46.808Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: what do you think? ^","date":"2012-10-02T20:20:53.623Z","type":"message"}
{"nick":"erickt","date":"2012-10-02T20:27:11.604Z","type":"join"}
{"nick":"indexzero_","date":"2012-10-02T20:34:13.562Z","type":"join"}
{"nick":"indexzero","reason":"Ping timeout: 255 seconds","date":"2012-10-02T20:36:36.735Z","type":"quit"}
{"nick":"indexzero_","new_nick":"indexzero","date":"2012-10-02T20:36:36.885Z","type":"nick"}
{"nick":"bnoordhuis","message":"c'mon MI6","date":"2012-10-02T20:41:01.152Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: still requires some plubming from isaacs I think","date":"2012-10-02T20:41:16.841Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: ^","date":"2012-10-02T20:41:34.624Z","type":"message"}
{"nick":"bnoordhuis","message":"https://github.com/joyent/libuv/compare/emul-sendfile <- review anyone?","date":"2012-10-02T20:41:39.858Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T20:42:21.408Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#755 (emul-sendfile - ea72a68 : Ben Noordhuis): The build passed.","date":"2012-10-02T20:42:21.552Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/commit/ea72a689bdd6","date":"2012-10-02T20:42:21.552Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/2642539","date":"2012-10-02T20:42:21.552Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T20:42:21.552Z","type":"part"}
{"nick":"piscisaureus","message":"bnoordhuis: why do you use select?","date":"2012-10-02T20:43:45.022Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: more portable than poll","date":"2012-10-02T20:43:55.530Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: that doesn't work with high fds right?","date":"2012-10-02T20:43:58.460Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2012-10-02T20:44:11.267Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u0002109f8e2\u0002 : node_http_parser: fix whitespace errors (+2 more commits) - http://git.io/jTm-5w","date":"2012-10-02T20:44:49.283Z","type":"message"}
{"nick":"isaacs","message":"just added http://cass.atxconsulting.com:8000","date":"2012-10-02T20:44:56.950Z","type":"message"}
{"nick":"isaacs","message":"seems like it's working","date":"2012-10-02T20:44:59.381Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: whatever - do what you want","date":"2012-10-02T20:45:05.858Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: thanks","date":"2012-10-02T20:45:09.071Z","type":"message"}
{"nick":"isaacs","message":"np","date":"2012-10-02T20:45:20.281Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: the select() stuff looks correct to me","date":"2012-10-02T20:45:42.083Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yeah, but maybe using poll() is better anyway","date":"2012-10-02T20:46:06.253Z","type":"message"}
{"nick":"tjfontaine","message":"sadly the web interface doesn't allow you to modify permissions to enable tracking of issues, pull reqs, or branch and tag creation","date":"2012-10-02T20:46:06.787Z","type":"message"}
{"nick":"bnoordhuis","message":"FD_SETSIZE is large on most unices but not unbounded","date":"2012-10-02T20:46:17.843Z","type":"message"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-10-02T20:46:22.788Z","type":"quit"}
{"nick":"piscisaureus","message":"bnoordhuis: I think 1024 is common","date":"2012-10-02T20:47:02.841Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: fds > 1024 tend to happen :-)","date":"2012-10-02T20:47:18.497Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: it's possible to bump it to 8192 but that's still not really large","date":"2012-10-02T20:47:27.450Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I think poll is almost ubiquitous, except windows","date":"2012-10-02T20:47:29.394Z","type":"message"}
{"nick":"indexzero_","date":"2012-10-02T20:51:10.405Z","type":"join"}
{"nick":"indexzero","reason":"Ping timeout: 260 seconds","date":"2012-10-02T20:53:40.693Z","type":"quit"}
{"nick":"txdv_","message":"MI6 shooting down all the white spaceses","date":"2012-10-02T20:53:57.036Z","type":"message"}
{"nick":"indexzero","date":"2012-10-02T20:54:11.369Z","type":"join"}
{"nick":"travis-ci","date":"2012-10-02T20:54:39.449Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#756 (master - 3977d1b : Ben Noordhuis): The build was broken.","date":"2012-10-02T20:54:39.589Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/2d3760a17c58...3977d1b36c68","date":"2012-10-02T20:54:39.589Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/2642689","date":"2012-10-02T20:54:39.589Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T20:54:39.590Z","type":"part"}
{"nick":"txdv_","message":"don't you want to create a topic branch where you can edit out errors in pas tcommits?","date":"2012-10-02T20:55:10.128Z","type":"message"}
{"nick":"indexzero_","reason":"Ping timeout: 260 seconds","date":"2012-10-02T20:56:21.172Z","type":"quit"}
{"nick":"bnoordhuis","message":"interesting that a completely unrelated test fails...","date":"2012-10-02T20:56:21.321Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis the emu works perfect, test is working again here :-)","date":"2012-10-02T21:01:29.230Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: ah sweet :)","date":"2012-10-02T21:01:43.226Z","type":"message"}
{"nick":"erickt","date":"2012-10-02T21:01:43.368Z","type":"join"}
{"nick":"TooTallNate","date":"2012-10-02T21:01:57.488Z","type":"join"}
{"nick":"bnoordhuis","message":"i dare you, travis-ci","date":"2012-10-02T21:07:52.607Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T21:09:04.110Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#757 (master - b37a0f5 : Ben Noordhuis): The build was fixed.","date":"2012-10-02T21:09:04.259Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/3977d1b36c68...b37a0f5bb3d0","date":"2012-10-02T21:09:04.259Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/2642891","date":"2012-10-02T21:09:04.259Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T21:09:04.259Z","type":"part"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2012-10-02T21:14:49.513Z","type":"quit"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-10-02T21:25:45.606Z","type":"quit"}
{"nick":"mikeal","date":"2012-10-02T21:27:16.214Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: yo","date":"2012-10-02T21:28:03.986Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yo","date":"2012-10-02T21:28:08.814Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: why is the signal context not statically allocated ?","date":"2012-10-02T21:28:13.248Z","type":"message"}
{"nick":"bnoordhuis","message":"there is a good reason for that","date":"2012-10-02T21:28:25.247Z","type":"message"}
{"nick":"bnoordhuis","message":"that i forgot","date":"2012-10-02T21:28:28.089Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: sysconf(_SC_RTSIG_MAX) ?","date":"2012-10-02T21:28:45.775Z","type":"message"}
{"nick":"bnoordhuis","message":"i think it's because i anticipated that it had to change later on and i didn't want to get hampered by abi compatibility","date":"2012-10-02T21:28:47.684Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: realistically 64 is the maximum number of signals right?","date":"2012-10-02T21:29:15.208Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: no","date":"2012-10-02T21:29:25.958Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ok. realistically 8 * sizeof(sigset_t) is the maximum of signals, right?","date":"2012-10-02T21:30:41.743Z","type":"message"}
{"nick":"piscisaureus","message":":-)","date":"2012-10-02T21:30:43.743Z","type":"message"}
{"nick":"mikeal","reason":"Ping timeout: 240 seconds","date":"2012-10-02T21:31:29.062Z","type":"quit"}
{"nick":"mikeal","date":"2012-10-02T21:33:04.601Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus: in practice yes","date":"2012-10-02T21:35:42.445Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: realistically it is not possible to store more than 1 signal per bit :-)","date":"2012-10-02T21:36:45.050Z","type":"message"}
{"nick":"rendar","date":"2012-10-02T21:36:55.317Z","type":"quit"}
{"nick":"piscisaureus","message":"bnoordhuis: I'm wondering if any platform ever had the luminous idea of using 1 char or 1 int per signal","date":"2012-10-02T21:37:16.032Z","type":"message"}
{"nick":"piscisaureus","message":"because in that case we would be vastly overestimating","date":"2012-10-02T21:37:28.153Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-10-02T21:39:23.334Z","type":"quit"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-10-02T21:40:03.890Z","type":"quit"}
{"nick":"bnoordhuis","message":"piscisaureus: i doubt it but does it matter?","date":"2012-10-02T21:40:13.607Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: i might make it all static","date":"2012-10-02T21:40:31.422Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: unix' signal.c is more complicated than warranted by the problem","date":"2012-10-02T21:40:44.899Z","type":"message"}
{"nick":"perezd","date":"2012-10-02T21:40:53.772Z","type":"join"}
{"nick":"mraleph","date":"2012-10-02T21:47:20.037Z","type":"join"}
{"nick":"loladiro","date":"2012-10-02T21:53:34.376Z","type":"join"}
{"nick":"ryah","message":"libuv is more complicated than warrented by the problem :)","date":"2012-10-02T21:56:57.132Z","type":"message"}
{"nick":"piscisaureus","message":":'-(","date":"2012-10-02T21:57:21.164Z","type":"message"}
{"nick":"ryah","message":"but i love it","date":"2012-10-02T21:57:31.328Z","type":"message"}
{"nick":"ryah","message":"because now i can write apps for windows and not worry about it","date":"2012-10-02T21:57:46.731Z","type":"message"}
{"nick":"erickt","date":"2012-10-02T21:57:51.165Z","type":"join"}
{"nick":"ryah","message":"(much)","date":"2012-10-02T21:57:56.975Z","type":"message"}
{"nick":"piscisaureus","message":"haha","date":"2012-10-02T21:58:00.210Z","type":"message"}
{"nick":"piscisaureus","message":"well you worried about it for almost a year","date":"2012-10-02T21:58:12.118Z","type":"message"}
{"nick":"piscisaureus","message":"you just did it all upfront :-)","date":"2012-10-02T21:58:19.784Z","type":"message"}
{"nick":"ryah","message":"paid it forward? haha","date":"2012-10-02T21:59:02.561Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-10-02T21:59:22.333Z","type":"quit"}
{"nick":"tommybergeron","reason":"Quit: Leaving...","date":"2012-10-02T22:01:06.034Z","type":"quit"}
{"nick":"avalanche123|h","date":"2012-10-02T22:08:27.202Z","type":"join"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2012-10-02T22:09:03.690Z","type":"quit"}
{"nick":"isaacs","message":"ok, i'm ready to start putting these stream classes into node, i think","date":"2012-10-02T22:12:31.551Z","type":"message"}
{"nick":"isaacs","message":"zlib looks like it works.","date":"2012-10-02T22:12:36.674Z","type":"message"}
{"nick":"isaacs","message":"using the Transform stream class.","date":"2012-10-02T22:12:46.745Z","type":"message"}
{"nick":"isaacs","message":"and the fs stuff passes a bunch of rudimentary tests.","date":"2012-10-02T22:12:54.428Z","type":"message"}
{"nick":"hz","date":"2012-10-02T22:15:50.352Z","type":"quit"}
{"nick":"isaacs","message":"spekaing of which:","date":"2012-10-02T22:17:36.897Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis, piscisaureus: care to comment on this? https://github.com/joyent/node/pull/2524#issuecomment-9039888","date":"2012-10-02T22:17:42.873Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: *shrug*","date":"2012-10-02T22:19:01.506Z","type":"message"}
{"nick":"indexzero","date":"2012-10-02T22:19:17.554Z","type":"join"}
{"nick":"bnoordhuis","message":"if it fixes things and doesn't break other things","date":"2012-10-02T22:19:18.459Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I am for taking kochi's patch in master","date":"2012-10-02T22:21:25.674Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: and I think we should advocate that all streams always emit 'close' at some point :-)","date":"2012-10-02T22:22:15.518Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: we've been over this :)","date":"2012-10-02T22:23:03.047Z","type":"message"}
{"nick":"isaacs","message":"i'm happy to reopen that discussion.","date":"2012-10-02T22:23:16.018Z","type":"message"}
{"nick":"isaacs","message":"but it's a bigger discussion that it seems at first.","date":"2012-10-02T22:23:21.387Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: we -> who ?","date":"2012-10-02T22:23:22.161Z","type":"message"}
{"nick":"isaacs","message":"we = me, substack, dominictarr, raynos, mikeal, leecoltrane, and a few others","date":"2012-10-02T22:23:47.290Z","type":"message"}
{"nick":"Raynos","message":"oh hi","date":"2012-10-02T22:23:58.195Z","type":"message"}
{"nick":"isaacs","message":"the problem with making everythign emit close is that it's situation-dependent.","date":"2012-10-02T22:24:00.228Z","type":"message"}
{"nick":"isaacs","message":"er, context-dependent","date":"2012-10-02T22:24:06.138Z","type":"message"}
{"nick":"isaacs","message":"as to what it actually means","date":"2012-10-02T22:24:09.692Z","type":"message"}
{"nick":"isaacs","message":"what we ought to say is that writable streams ALL emit 'finish' when they're completely written, ended, anbd flushed","date":"2012-10-02T22:24:27.419Z","type":"message"}
{"nick":"isaacs","message":"and readable streams ALL emit 'end' when there are no more bytes and they've all been consumed.","date":"2012-10-02T22:24:37.479Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: that would be a nice addition I suppose","date":"2012-10-02T22:24:44.112Z","type":"message"}
{"nick":"isaacs","message":"that's sort of how it works already, just inconsistently.","date":"2012-10-02T22:24:45.406Z","type":"message"}
{"nick":"Raynos","message":"I'm happy with writable streams emitting finish","date":"2012-10-02T22:24:45.559Z","type":"message"}
{"nick":"Raynos","message":"im happy with readable streams emitting end","date":"2012-10-02T22:24:53.706Z","type":"message"}
{"nick":"isaacs","message":"i mean, i don't think that's the ideal api, necessarily.","date":"2012-10-02T22:24:54.545Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: that would be a nice addition I suppose","date":"2012-10-02T22:25:00.172Z","type":"message"}
{"nick":"Raynos","message":"I'm happy with any stream emitting error if it's in a corrupted / uncompleted state","date":"2012-10-02T22:25:04.410Z","type":"message"}
{"nick":"isaacs","message":"just paving cowpaths, because they're a lot easier to pave than forests and mountains and such :)","date":"2012-10-02T22:25:11.084Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I think that it would be nice to say that a stream will emit close as it's very last event","date":"2012-10-02T22:25:28.864Z","type":"message"}
{"nick":"isaacs","message":"but you could have a duplex style stream where the readable end is one file descriptor, and the writable end is a different one.","date":"2012-10-02T22:25:35.726Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: so, no more writes can happen, no more data can be read, there will be no 'error' events any more etc","date":"2012-10-02T22:25:46.382Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: yeah, that'd be nice.","date":"2012-10-02T22:25:55.041Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: but it's hard to enforce in the api.  we should try doing it as a gentleman's agreement of sorts.","date":"2012-10-02T22:26:09.920Z","type":"message"}
{"nick":"Raynos","message":"a RW can't emit close","date":"2012-10-02T22:26:22.580Z","type":"message"}
{"nick":"Raynos","message":"because you don't know what end closed","date":"2012-10-02T22:26:28.176Z","type":"message"}
{"nick":"isaacs","message":"Raynos: well.. it could.","date":"2012-10-02T22:26:31.369Z","type":"message"}
{"nick":"piscisaureus","message":"Raynos: no","date":"2012-10-02T22:26:40.209Z","type":"message"}
{"nick":"isaacs","message":"Raynos: for sockets, \"closing\" means both are closed.","date":"2012-10-02T22:26:40.905Z","type":"message"}
{"nick":"Raynos","message":"well it would mean both closed. that's the only sensible thing","date":"2012-10-02T22:26:44.065Z","type":"message"}
{"nick":"piscisaureus","message":"Raynos: for files, too","date":"2012-10-02T22:26:46.207Z","type":"message"}
{"nick":"isaacs","message":"right.","date":"2012-10-02T22:26:47.477Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: well, files aren't RW","date":"2012-10-02T22:26:52.458Z","type":"message"}
{"nick":"piscisaureus","message":"oh we have no duplex files","date":"2012-10-02T22:26:53.114Z","type":"message"}
{"nick":"piscisaureus","message":"we could :-)","date":"2012-10-02T22:26:59.278Z","type":"message"}
{"nick":"isaacs","message":"because unix is a failure, that's why :)","date":"2012-10-02T22:27:01.430Z","type":"message"}
{"nick":"Raynos","message":"but why have close when you know you have end & finish","date":"2012-10-02T22:27:03.273Z","type":"message"}
{"nick":"isaacs","message":"we ought to have duplex files.","date":"2012-10-02T22:27:05.052Z","type":"message"}
{"nick":"isaacs","message":"Raynos: end !== close","date":"2012-10-02T22:27:14.725Z","type":"message"}
{"nick":"Raynos","message":"why do you care about close","date":"2012-10-02T22:27:28.928Z","type":"message"}
{"nick":"isaacs","message":"Raynos: end means that no more data is coming. close means that the entire operation is shut down and cleaned up.","date":"2012-10-02T22:27:29.936Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I think it is not a much-requested feature ...","date":"2012-10-02T22:27:31.423Z","type":"message"}
{"nick":"isaacs","message":"ie, the fd is closed.","date":"2012-10-02T22:27:32.883Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: right, people wnat to know when the behavior will change (ie, \"please stop reading\" or \"all writes are received\")","date":"2012-10-02T22:27:56.505Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: close is more informative than anything else.","date":"2012-10-02T22:28:06.292Z","type":"message"}
{"nick":"isaacs","message":"there are some cases where you're doing funky things with fd's","date":"2012-10-02T22:28:31.226Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: well, it's complicated, when exactly do you envision \"finish\" should be emitted?","date":"2012-10-02T22:28:33.410Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: finish is emitted when all teh chunks that were passed to write() have been consumed by whatever underlying thing the stream is connected to.","date":"2012-10-02T22:29:00.390Z","type":"message"}
{"nick":"Raynos","message":"finish means that everything you wrote to me has been correctly handled","date":"2012-10-02T22:29:04.429Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: ie, if you write() a bunch of times, they'll return false, but buffer up. 'finish' happens when the buffer clears, and you have called end() at some point.","date":"2012-10-02T22:29:25.262Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: in theory the close() syscall could fail with EIO (so the stream would emit error), but after close() reading is also no longer possible","date":"2012-10-02T22:29:29.358Z","type":"message"}
{"nick":"piscisaureus","message":"right, ok","date":"2012-10-02T22:29:38.474Z","type":"message"}
{"nick":"Raynos","message":"https://gist.github.com/32801e0a140657f1e813","date":"2012-10-02T22:30:44.132Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: i think the assumption would be, with very rare exception, when you see an error, that stream is now poisonous","date":"2012-10-02T22:30:44.961Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: so we could emit \"finish\" after all your data was successfully write()'ed and (in case of sockets) shutdown() succeeded","date":"2012-10-02T22:30:45.784Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: sure, that'd be fine.","date":"2012-10-02T22:30:53.893Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: i haven't started in on net streams","date":"2012-10-02T22:31:01.367Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: just did fd and zlib, since they're tricky enough to work the API, but not quite so complicated as to be overly distracting.","date":"2012-10-02T22:31:22.577Z","type":"message"}
{"nick":"tomshreds","date":"2012-10-02T22:31:26.931Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2012-10-02T22:31:36.325Z","type":"quit"}
{"nick":"Raynos","message":"isaacs: Is it valid to emit error after end / finish ?","date":"2012-10-02T22:31:43.953Z","type":"message"}
{"nick":"isaacs","message":"i think it's working well enough to actually attempt to merge into a feature branch.","date":"2012-10-02T22:31:47.001Z","type":"message"}
{"nick":"isaacs","message":"Raynos: it's valid to emit error any time an error occurs.","date":"2012-10-02T22:31:57.589Z","type":"message"}
{"nick":"Raynos","message":"the only benefit close brings is if it had the semantics of \"no error can occur after close\"","date":"2012-10-02T22:32:03.749Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I will not prohibit you from creating feature branches :-)","date":"2012-10-02T22:32:11.604Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: hehe","date":"2012-10-02T22:32:17.140Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: i'll just land all the commits around dinner time US/Pacific","date":"2012-10-02T22:32:41.005Z","type":"message"}
{"nick":"isaacs","message":"\"Good morning!  I fixed streams!  You're welcome!\"","date":"2012-10-02T22:32:51.601Z","type":"message"}
{"nick":"Raynos","message":"isaacs: there is value in an event that signals \"there is will be no more errors in this stream. You can now send the response to the user because you dont need to wait for errors to send instead\"","date":"2012-10-02T22:32:57.706Z","type":"message"}
{"nick":"isaacs","message":"Raynos: sure.","date":"2012-10-02T22:33:07.509Z","type":"message"}
{"nick":"bnoordhuis","message":"[% 100|+ 159|-   2]: Done. <- down to 2 failures running under valgrind","date":"2012-10-02T22:33:08.566Z","type":"message"}
{"nick":"isaacs","message":"Raynos: i mean, effectively, errors can't happen unless something is either done to the stream, or pending some response.","date":"2012-10-02T22:33:30.659Z","type":"message"}
{"nick":"isaacs","message":"Raynos: and close would mean that no more responses are pending","date":"2012-10-02T22:33:44.161Z","type":"message"}
{"nick":"bnoordhuis","message":"btw piscisaureus, you need to stop slacking off","date":"2012-10-02T22:33:45.321Z","type":"message"}
{"nick":"bnoordhuis","message":"$ git shortlog -ns | head -n3 632  Ben Noordhuis 524  Bert Belder 337  Ryan Dahl","date":"2012-10-02T22:33:45.625Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I like slacking off","date":"2012-10-02T22:34:09.330Z","type":"message"}
{"nick":"isaacs","message":"Raynos: finish+end means that you're done with all the reading and writing.  close means that the fd or whatever is done and buried successfully.","date":"2012-10-02T22:34:14.710Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T22:34:32.930Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#758 (master - b88f8b4 : Ben Noordhuis): The build passed.","date":"2012-10-02T22:34:33.075Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/b37a0f5bb3d0...b88f8b40d69b","date":"2012-10-02T22:34:33.075Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/2643777","date":"2012-10-02T22:34:33.075Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T22:34:33.075Z","type":"part"}
{"nick":"isaacs","message":"Raynos: but like, this would cause an error to be emitted:  stream.on('close', function() { stream.write('gotcha!') })","date":"2012-10-02T22:34:38.025Z","type":"message"}
{"nick":"isaacs","message":"Raynos: because presumably close can't come until after end","date":"2012-10-02T22:34:45.711Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I also like bragging about libuv so you better get your ass back to work","date":"2012-10-02T22:37:10.473Z","type":"message"}
{"nick":"c4milo","date":"2012-10-02T22:38:56.071Z","type":"join"}
{"nick":"Raynos","message":"isaacs: errors can happen after end or finish if the stream implementation chooses to do \"resource cleanup\" after those events","date":"2012-10-02T22:40:10.003Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-10-02T22:45:09.491Z","type":"quit"}
{"nick":"isaacs","message":"Raynos: right.","date":"2012-10-02T22:46:50.179Z","type":"message"}
{"nick":"isaacs","message":"Raynos: but assuming that it emits 'close' when those resources are successfully cleaned up, then errors at *that* point should be extremely unlikely.","date":"2012-10-02T22:47:18.919Z","type":"message"}
{"nick":"isaacs","message":"(or else they weren't \"successfully\" cleaned up)","date":"2012-10-02T22:47:28.696Z","type":"message"}
{"nick":"Raynos","message":"yes","date":"2012-10-02T22:50:30.204Z","type":"message"}
{"nick":"Raynos","message":"but writable streams dont emit close do they?","date":"2012-10-02T22:50:35.411Z","type":"message"}
{"nick":"Raynos","message":"i dont know whether fswritestream emits close","date":"2012-10-02T22:50:54.401Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037v0.8\u000f * \u0002f624be4\u0002 : doc: stream: clarify meaning of 'drain' event - http://git.io/8KMChw","date":"2012-10-02T22:51:07.029Z","type":"message"}
{"nick":"TheJH","reason":"Ping timeout: 244 seconds","date":"2012-10-02T22:52:20.004Z","type":"quit"}
{"nick":"isaacs","message":"Raynos: writable streams can emit close, yes.","date":"2012-10-02T22:52:35.254Z","type":"message"}
{"nick":"isaacs","message":"Raynos: but they don't emit end","date":"2012-10-02T22:52:39.445Z","type":"message"}
{"nick":"Raynos","message":"Oh I see.","date":"2012-10-02T22:52:44.323Z","type":"message"}
{"nick":"isaacs","message":"(unless they're also readable)","date":"2012-10-02T22:52:44.652Z","type":"message"}
{"nick":"isaacs","message":"the worst part about streams is that we have every synonym for \"ITS OVER\" in the api somewhere.","date":"2012-10-02T22:52:57.989Z","type":"message"}
{"nick":"isaacs","message":"and they all mean subtly different things","date":"2012-10-02T22:53:06.645Z","type":"message"}
{"nick":"Raynos","message":"ideally we just fix things","date":"2012-10-02T22:53:14.122Z","type":"message"}
{"nick":"Raynos","message":"so that close & end are merged","date":"2012-10-02T22:53:18.594Z","type":"message"}
{"nick":"Raynos","message":"and close & finish are merged","date":"2012-10-02T22:53:23.175Z","type":"message"}
{"nick":"isaacs","message":"close is a different semantic thing, thouhg","date":"2012-10-02T22:53:44.070Z","type":"message"}
{"nick":"Raynos","message":"merge the semantics","date":"2012-10-02T22:53:52.081Z","type":"message"}
{"nick":"isaacs","message":"can't.","date":"2012-10-02T22:53:56.091Z","type":"message"}
{"nick":"Raynos","message":"your not allowed to emit end until its closed","date":"2012-10-02T22:53:59.574Z","type":"message"}
{"nick":"isaacs","message":"they're fundamentally different.","date":"2012-10-02T22:54:01.492Z","type":"message"}
{"nick":"isaacs","message":"that's silly though, because you usually don't care about close.","date":"2012-10-02T22:54:09.395Z","type":"message"}
{"nick":"isaacs","message":"why make everyone wait around logner?","date":"2012-10-02T22:54:13.879Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://github.com/joyent/libuv/commit/f090297f62b834b8904ac1bc4f8c9c969855b1e6 <- complicated?","date":"2012-10-02T22:54:22.546Z","type":"message"}
{"nick":"isaacs","message":"actually, i don't know about usually.  but certainly \"often\" don't care about close.","date":"2012-10-02T22:54:29.527Z","type":"message"}
{"nick":"Raynos","message":"true","date":"2012-10-02T22:54:51.025Z","type":"message"}
{"nick":"Raynos","message":"blargh","date":"2012-10-02T22:55:02.149Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: yes","date":"2012-10-02T22:55:14.663Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: you want me to explain","date":"2012-10-02T22:55:21.436Z","type":"message"}
{"nick":"piscisaureus","message":"?","date":"2012-10-02T22:55:23.013Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes","date":"2012-10-02T22:55:25.059Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ok. runner.h includes <windows.h> because it uses windows functions","date":"2012-10-02T22:55:45.538Z","type":"message"}
{"nick":"TooTallNate","date":"2012-10-02T22:55:56.583Z","type":"join"}
{"nick":"piscisaureus","message":"<windows.h> will, by default, load headers for winsock 1.1 (which is from the windows 3.1 era)","date":"2012-10-02T22:56:13.579Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: unless you fiddle with some preprocessor defines (such as WIN32_LEAN_AND_MEAN) which we don't","date":"2012-10-02T22:56:39.165Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: another way around this is to load <winsock2.h> *before* <windows.h>","date":"2012-10-02T22:57:06.905Z","type":"message"}
{"nick":"piscisaureus","message":"which uv.h does","date":"2012-10-02T22:57:08.429Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so there's your answer","date":"2012-10-02T22:57:24.119Z","type":"message"}
{"nick":"piscisaureus","message":"uv.h must be included first","date":"2012-10-02T22:57:30.223Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: what if runner.h includes <winsock2.h>?","date":"2012-10-02T22:57:40.844Z","type":"message"}
{"nick":"piscisaureus","message":"that also works","date":"2012-10-02T22:57:47.133Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: when you get a chance can you also add the webhook for libuv?","date":"2012-10-02T22:58:29.455Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://github.com/joyent/libuv/commit/d796c3b <- like that?","date":"2012-10-02T23:01:42.437Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: lgtm","date":"2012-10-02T23:04:31.885Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, enough bug fixing for today, i'm off","date":"2012-10-02T23:06:16.597Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T23:06:21.005Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#759 (master - d796c3b : Ben Noordhuis): The build passed.","date":"2012-10-02T23:06:21.148Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/b88f8b40d69b...d796c3b6f414","date":"2012-10-02T23:06:21.148Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/2644014","date":"2012-10-02T23:06:21.148Z","type":"message"}
{"nick":"travis-ci","date":"2012-10-02T23:06:21.148Z","type":"part"}
{"nick":"bnoordhuis","message":"have a good night everyone","date":"2012-10-02T23:06:24.168Z","type":"message"}
{"nick":"piscisaureus","message":"goodnight ben","date":"2012-10-02T23:08:31.426Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: can i see the zlib impl?","date":"2012-10-02T23:08:56.855Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2012-10-02T23:10:49.106Z","type":"quit"}
{"nick":"isaacs","message":"TooTallNate: one sec..","date":"2012-10-02T23:16:13.748Z","type":"message"}
{"nick":"isaacs","message":"it's not quite working.  i'm getting a stream error, which is promising.","date":"2012-10-02T23:16:20.178Z","type":"message"}
{"nick":"isaacs","message":"means that there's a bug somewhere to find and fix :)","date":"2012-10-02T23:16:26.193Z","type":"message"}
{"nick":"isaacs","message":"stream errors, abort traps, this is awesome :)","date":"2012-10-02T23:17:48.499Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f created branch streams2 - http://git.io/6GDaLg","date":"2012-10-02T23:18:05.608Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: pushed to streams2 branch","date":"2012-10-02T23:18:08.708Z","type":"message"}
{"nick":"isaacs","message":"w00t!  i got zlib working.","date":"2012-10-02T23:28:16.088Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037streams2\u000f * \u0002f2fdf23\u0002 : zlib: Bugfix and assertion (+1 more commits) - http://git.io/wfIDdA","date":"2012-10-02T23:29:32.360Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: pushed working zlib impl","date":"2012-10-02T23:29:33.028Z","type":"message"}
{"nick":"piscisaureus","message":"yay","date":"2012-10-02T23:29:45.140Z","type":"message"}
{"nick":"TooTallNate","message":"nice :)","date":"2012-10-02T23:30:18.510Z","type":"message"}
{"nick":"isaacs","message":"zlib.js is way simpler now.  still some necessary complexity in there, to talk to the underlying binding properly, but it's basically just a very thin facade to the zlib binding function","date":"2012-10-02T23:30:38.800Z","type":"message"}
{"nick":"avalanche123|h","reason":"Quit: Computer has gone to sleep.","date":"2012-10-02T23:32:49.903Z","type":"quit"}
{"nick":"isaacs","message":"hm... not passing all zlib tests.","date":"2012-10-02T23:50:57.763Z","type":"message"}
