{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-02-05T00:00:00.602Z","type":"quit"}
{"nick":"ircretary","date":"2013-02-05T00:00:07.935Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: refining it more. one sec.","date":"2013-02-05T00:01:04.587Z","type":"message"}
{"nick":"indutny","message":"isaacs: nvm","date":"2013-02-05T00:01:05.664Z","type":"message"}
{"nick":"indutny","message":"isaacs: I can't stand anymore :) time to sleep","date":"2013-02-05T00:02:21.453Z","type":"message"}
{"nick":"indutny","message":"I would be really pleased if you'll try running `NODE_DEBUG=tls ./node test/simple/test-https-drain.js` with https://github.com/indutny/node/compare/feature-crypto-tls-streams2","date":"2013-02-05T00:02:45.416Z","type":"message"}
{"nick":"indutny","message":"I think some streams2 black magic is happening there","date":"2013-02-05T00:02:56.750Z","type":"message"}
{"nick":"indutny","message":"but I can't figure it out right now","date":"2013-02-05T00:03:05.063Z","type":"message"}
{"nick":"indexzero","date":"2013-02-05T00:03:42.413Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 248 seconds","date":"2013-02-05T00:05:56.017Z","type":"quit"}
{"nick":"isaacs","message":"indutny: ok, i'll dig into it","date":"2013-02-05T00:07:19.445Z","type":"message"}
{"nick":"isaacs","message":"indutny: sorry, i was supposed to review this weekend, but didn't get to i","date":"2013-02-05T00:07:35.724Z","type":"message"}
{"nick":"isaacs","message":"t","date":"2013-02-05T00:07:37.264Z","type":"message"}
{"nick":"indutny","message":"it looks like it stops reading data","date":"2013-02-05T00:07:37.391Z","type":"message"}
{"nick":"indutny","message":"np","date":"2013-02-05T00:07:41.350Z","type":"message"}
{"nick":"isaacs","message":"hm.","date":"2013-02-05T00:07:42.144Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-02-05T00:07:45.103Z","type":"message"}
{"nick":"indutny","message":"so it sends data properly","date":"2013-02-05T00:07:51.014Z","type":"message"}
{"nick":"indutny","message":"but on other side","date":"2013-02-05T00:07:53.172Z","type":"message"}
{"nick":"indutny","message":"it fails to read it","date":"2013-02-05T00:07:55.420Z","type":"message"}
{"nick":"indutny","message":"well, it has some queued data","date":"2013-02-05T00:08:03.187Z","type":"message"}
{"nick":"indutny","message":"but it tries to pull it only few times","date":"2013-02-05T00:08:10.109Z","type":"message"}
{"nick":"indutny","message":"and buffer is still full after those tries","date":"2013-02-05T00:08:19.493Z","type":"message"}
{"nick":"indutny","message":"emittedReadable is true","date":"2013-02-05T00:09:25.389Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-02-05T00:09:33.370Z","type":"message"}
{"nick":"indutny","action":"&","date":"2013-02-05T00:09:36.831Z","type":"action"}
{"nick":"LOUDBOT","message":"THIS...IS DHOSS, COMING TO YOU LIVE FROM ABLEW'S SERVERS, LADIES AND GENTLEMEN, BOYS AND GIRLS, SUCK IIIIIIIIT","date":"2013-02-05T00:09:37.290Z","type":"message"}
{"nick":"TooTallNate","message":"nice one","date":"2013-02-05T00:10:12.900Z","type":"message"}
{"nick":"TooTallNate","message":"LOUDBOT: ","date":"2013-02-05T00:10:15.560Z","type":"message"}
{"nick":"LOUDBOT","message":"TooTallNate: APEIRON YOU ARE BEING MODERATED PLEASE HOLD","date":"2013-02-05T00:10:15.956Z","type":"message"}
{"nick":"trevnorris","message":"whoot! got the regression set: https://gist.github.com/b25221576277c907d1a9","date":"2013-02-05T00:10:24.797Z","type":"message"}
{"nick":"tjfontaine","message":"hm \"Move MakeCallback to JS\" seems like his gut may have been right","date":"2013-02-05T00:11:34.730Z","type":"message"}
{"nick":"indutny","message":"hahahaha!","date":"2013-02-05T00:12:06.069Z","type":"message"}
{"nick":"indutny","message":"I knew it","date":"2013-02-05T00:12:07.711Z","type":"message"}
{"nick":"indutny","message":"I predicted it","date":"2013-02-05T00:12:13.414Z","type":"message"}
{"nick":"indutny","message":"noone believed me","date":"2013-02-05T00:12:17.040Z","type":"message"}
{"nick":"indutny","message":"trevnorris: are you sure?","date":"2013-02-05T00:12:22.454Z","type":"message"}
{"nick":"joshthecoder_","date":"2013-02-05T00:12:28.120Z","type":"join"}
{"nick":"trevnorris","message":"indutny: ran the test 6 times over every commit in that range.","date":"2013-02-05T00:12:37.585Z","type":"message"}
{"nick":"trevnorris","message":"those commits are the cause for regression in raw","date":"2013-02-05T00:12:45.710Z","type":"message"}
{"nick":"indutny","message":"I seen Array::New() calls in flamegraph","date":"2013-02-05T00:13:02.976Z","type":"message"}
{"nick":"indutny","message":"and they lead to the makecallback","date":"2013-02-05T00:13:07.974Z","type":"message"}
{"nick":"indutny","message":"so I think its messing with a lot of stuff","date":"2013-02-05T00:13:17.220Z","type":"message"}
{"nick":"trevnorris","message":"makecallback is really hurting right now. especially using 'splice'","date":"2013-02-05T00:13:23.397Z","type":"message"}
{"nick":"trevnorris","message":"and the try finally","date":"2013-02-05T00:13:27.604Z","type":"message"}
{"nick":"trevnorris","message":"both are kicking the crap out of performance.","date":"2013-02-05T00:13:34.677Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-02-05T00:13:39.679Z","type":"message"}
{"nick":"indutny","message":"time to sleep","date":"2013-02-05T00:13:41.167Z","type":"message"}
{"nick":"indutny","message":"sorry for spontaneous emotions","date":"2013-02-05T00:13:47.102Z","type":"message"}
{"nick":"indutny","action":"> /dev/null &","date":"2013-02-05T00:14:05.231Z","type":"action"}
{"nick":"CoverSlide","action":"/","date":"2013-02-05T00:20:04.570Z","type":"action"}
{"nick":"LOUDBOT","message":"WAS YOUR DAD A SCIENTIST OR A CORNINGWARE SALESMAN","date":"2013-02-05T00:20:05.014Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i'm suspicious that it's not as big an effect as it seems.","date":"2013-02-05T00:20:06.406Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: try checkout out and running http_simple at those two commit points and let me know what you find.","date":"2013-02-05T00:20:40.334Z","type":"message"}
{"nick":"isaacs","message":"kk","date":"2013-02-05T00:22:10.544Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: now it's totally possible that so much has happened since then, reverting those changes won't do anything.","date":"2013-02-05T00:22:47.571Z","type":"message"}
{"nick":"isaacs","message":"of course","date":"2013-02-05T00:22:52.334Z","type":"message"}
{"nick":"isaacs","message":"but it's still useful info","date":"2013-02-05T00:22:57.874Z","type":"message"}
{"nick":"isaacs","message":"also, if we have multiple regressions, then fixing one might not fix all of it","date":"2013-02-05T00:23:13.344Z","type":"message"}
{"nick":"isaacs","message":"or might even make the other worse.","date":"2013-02-05T00:23:17.784Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: what's the incantation you used with tcp_raw?","date":"2013-02-05T00:23:50.753Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: updated the gist with it","date":"2013-02-05T00:25:00.939Z","type":"message"}
{"nick":"trevnorris","message":"though those results are with the experimental changes of spawning child processes. but you should still see a difference.","date":"2013-02-05T00:25:26.454Z","type":"message"}
{"nick":"perezd","date":"2013-02-05T00:26:28.632Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-02-05T00:26:29.612Z","type":"quit"}
{"nick":"isaacs","message":"trevnorris: which gist?","date":"2013-02-05T00:28:23.900Z","type":"message"}
{"nick":"trevnorris","message":"https://gist.github.com/b25221576277c907d1a9","date":"2013-02-05T00:28:29.763Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: you should use public gists so i can just click your name :)","date":"2013-02-05T00:28:33.580Z","type":"message"}
{"nick":"isaacs","message":"when i accidentally close tabs :)","date":"2013-02-05T00:28:47.590Z","type":"message"}
{"nick":"trevnorris","message":"yeah. just feel bad for my followers. freaking githup posts everytime I update one.","date":"2013-02-05T00:28:53.095Z","type":"message"}
{"nick":"trevnorris","message":"(and there are a lot)","date":"2013-02-05T00:29:04.861Z","type":"message"}
{"nick":"isaacs","message":"meh.  whatever.  that's githubs problem","date":"2013-02-05T00:29:20.490Z","type":"message"}
{"nick":"trevnorris","message":"lol ok","date":"2013-02-05T00:29:25.532Z","type":"message"}
{"nick":"isaacs","message":"i paste like a third of all my copies to gist.github.com","date":"2013-02-05T00:29:32.910Z","type":"message"}
{"nick":"isaacs","message":"they can unfollow you if it's a problem for them.","date":"2013-02-05T00:30:04.709Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: so... for those commits in that range, a bunch don't build on smartos","date":"2013-02-05T00:32:16.636Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: can you build 430d94e and 8973c3d","date":"2013-02-05T00:32:47.481Z","type":"message"}
{"nick":"trevnorris","message":"those are the two important ones","date":"2013-02-05T00:32:53.297Z","type":"message"}
{"nick":"trevnorris","message":"(and only 5 commits in between.","date":"2013-02-05T00:33:00.961Z","type":"message"}
{"nick":"karupanerura","reason":"Excess Flood","date":"2013-02-05T00:33:12.431Z","type":"quit"}
{"nick":"karupanerura","date":"2013-02-05T00:33:35.714Z","type":"join"}
{"nick":"isaacs","message":"yeah, none of them build","date":"2013-02-05T00:35:16.096Z","type":"message"}
{"nick":"trevnorris","message":"really? strange.","date":"2013-02-05T00:35:21.987Z","type":"message"}
{"nick":"isaacs","message":"so, i can try on linux, i guess","date":"2013-02-05T00:35:27.094Z","type":"message"}
{"nick":"isaacs","message":"just... linux is so weird.","date":"2013-02-05T00:35:31.344Z","type":"message"}
{"nick":"trevnorris","message":"lol","date":"2013-02-05T00:35:35.859Z","type":"message"}
{"nick":"tjfontaine","message":"what's the error? it was a gyp thing if I recall?","date":"2013-02-05T00:35:45.692Z","type":"message"}
{"nick":"trevnorris","message":"well, to save you the trouble, before it did 8767.42 [#/sec] (mean)  and after it did  8085.72 [#/sec] (mean)","date":"2013-02-05T00:36:02.704Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: it's some ld error","date":"2013-02-05T00:36:04.054Z","type":"message"}
{"nick":"trevnorris","message":"so not huge, but it's there.","date":"2013-02-05T00:36:08.015Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-02-05T00:36:09.321Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: ok","date":"2013-02-05T00:36:10.524Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: that's huge","date":"2013-02-05T00:36:16.703Z","type":"message"}
{"nick":"isaacs","message":"that's 10%","date":"2013-02-05T00:36:19.233Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: does https://github.com/isaacs/node/tree/make-callback-in-js-revert fix it?","date":"2013-02-05T00:37:07.533Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-02-05T00:39:01.480Z","type":"quit"}
{"nick":"perezd","reason":"Quit: perezd","date":"2013-02-05T00:39:40.827Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: https://gist.github.com/b25221576277c907d1a9","date":"2013-02-05T00:41:32.121Z","type":"message"}
{"nick":"trevnorris","message":"fixes it half way","date":"2013-02-05T00:41:36.235Z","type":"message"}
{"nick":"isaacs","message":"wow, i'm getting super terrible http_simple numbers on ubuntuu","date":"2013-02-05T00:42:09.870Z","type":"message"}
{"nick":"isaacs","message":"like, unbelievable bad","date":"2013-02-05T00:42:16.249Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: I bet your smartos fix is 5a5e1281","date":"2013-02-05T00:42:32.851Z","type":"message"}
{"nick":"isaacs","message":"2781.39","date":"2013-02-05T00:42:34.719Z","type":"message"}
{"nick":"isaacs","message":"2406.13","date":"2013-02-05T00:42:34.853Z","type":"message"}
{"nick":"isaacs","message":"2542.47","date":"2013-02-05T00:42:34.853Z","type":"message"}
{"nick":"isaacs","message":"2779.43","date":"2013-02-05T00:42:34.854Z","type":"message"}
{"nick":"isaacs","message":"2613.58","date":"2013-02-05T00:42:34.854Z","type":"message"}
{"nick":"isaacs","message":"2934.24","date":"2013-02-05T00:42:37.239Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: that looks likely","date":"2013-02-05T00:43:21.079Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: now, we should note that the only test that shows serious regression is raw_c2s.js, pipe and s2c are almost the same","date":"2013-02-05T00:44:07.937Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: if it only fixes it halfway, then i suspect that part of the problem is the immediate-nexttick stuff","date":"2013-02-05T00:44:27.638Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: ie, calling tickCallback on every tick","date":"2013-02-05T00:44:37.278Z","type":"message"}
{"nick":"isaacs","message":"s/tick/makeCallback","date":"2013-02-05T00:44:42.278Z","type":"message"}
{"nick":"trevnorris","message":"ah, yeah.","date":"2013-02-05T00:44:52.512Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: i'm having a hard time understanding why only client to server writing is causing such a large regression compared to the others.","date":"2013-02-05T00:49:59.914Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-05T00:51:53.936Z","type":"quit"}
{"nick":"isaacs","message":"trevnorris: so, in http-simple at least, i'm seeing <1% change from make-callback-in-js-revert.  and in either direction randomly.","date":"2013-02-05T00:51:57.242Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: as for c->s vs s->c, i don't know.","date":"2013-02-05T00:52:10.602Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: hm, one sec.","date":"2013-02-05T00:52:37.199Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: think that's because of the js. just ran the same c2s with _net_ and there's only 0.4 Gb/sec difference","date":"2013-02-05T00:54:07.670Z","type":"message"}
{"nick":"EhevuTov","reason":"Ping timeout: 260 seconds","date":"2013-02-05T00:54:15.405Z","type":"quit"}
{"nick":"isaacs","message":"trevnorris: oh, interesting.","date":"2013-02-05T00:54:26.790Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: so the mc-in-js is causing the regression in tcp-raw","date":"2013-02-05T00:54:38.021Z","type":"message"}
{"nick":"isaacs","message":"i guess that kinda maeks sense.","date":"2013-02-05T00:54:41.480Z","type":"message"}
{"nick":"isaacs","message":"it doesn't do muche lse","date":"2013-02-05T00:54:44.770Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: also, i think my linux http.sh tests are getting limited by some os thing.","date":"2013-02-05T00:55:14.720Z","type":"message"}
{"nick":"trevnorris","message":"yeah. that does make sense. calling cc functions from js takes longer.","date":"2013-02-05T00:55:19.726Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: because these numbers are just way way too slow.","date":"2013-02-05T00:55:21.440Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: this would be a case of calling js functions from cc","date":"2013-02-05T00:55:36.100Z","type":"message"}
{"nick":"trevnorris","message":"are you running in a vm?","date":"2013-02-05T00:55:38.297Z","type":"message"}
{"nick":"isaacs","message":"right?","date":"2013-02-05T00:55:39.360Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yeah.  in kvm","date":"2013-02-05T00:55:44.840Z","type":"message"}
{"nick":"isaacs","message":"but i mean.. it's crazy slow.","date":"2013-02-05T00:55:57.610Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: exactly. huge overhead for calling cc from js","date":"2013-02-05T00:56:03.387Z","type":"message"}
{"nick":"isaacs","message":"2k q/s?","date":"2013-02-05T00:56:06.669Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: running the vm in mac?","date":"2013-02-05T00:56:15.576Z","type":"message"}
{"nick":"mmalecki","message":"doesn't kvm try to scale dynamically?","date":"2013-02-05T00:56:18.056Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: no, on jpc","date":"2013-02-05T00:56:20.999Z","type":"message"}
{"nick":"mmalecki","message":"that's never good for benchmarks","date":"2013-02-05T00:56:23.132Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: kvm running inside of a zone on smartos, of course.","date":"2013-02-05T00:56:39.029Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: jpc","date":"2013-02-05T00:56:41.829Z","type":"message"}
{"nick":"isaacs","message":"so it has effectively 100% of the \"machine\" already","date":"2013-02-05T00:56:58.629Z","type":"message"}
{"nick":"mmalecki","message":"ah.","date":"2013-02-05T00:57:15.432Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: we're talking about that 80 GB global zone?","date":"2013-02-05T00:57:33.431Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: no, i'ts a 8GB zone","date":"2013-02-05T00:57:46.858Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: don't know if this is possible, but seems the most optimal solution would be to call any method for makeCallback from C (since that's where they're coming anyways) then send off to js land to process everything in nextTick","date":"2013-02-05T00:59:13.276Z","type":"message"}
{"nick":"trevnorris","message":"(though that's probably how it was being done before)","date":"2013-02-05T00:59:21.300Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: before, nextTick *always* came in off the tick spinner","date":"2013-02-05T01:00:40.967Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok. so wasn't a problem.","date":"2013-02-05T01:00:55.267Z","type":"message"}
{"nick":"isaacs","message":"we moved MakeCallback to JS specifically to avoid all the C++ ugliness of doing the immediate nextTick stuff","date":"2013-02-05T01:01:21.186Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: and why was the try finally added since v0.8?","date":"2013-02-05T01:02:49.430Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: so that our stacks are not stupid","date":"2013-02-05T01:06:21.213Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: ie, so that you see the actual call site, rather than seeing the place in our catch block where we rethrow","date":"2013-02-05T01:06:39.651Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: but we sometimes have stuff we have to clean up if you DID throw","date":"2013-02-05T01:06:53.732Z","type":"message"}
{"nick":"trevnorris","message":"ah, bummer. if I could figure out a work around for that one thing, pretty confident I could make them faster and leave in all the domain stuff.","date":"2013-02-05T01:07:24.781Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2013-02-05T01:09:01.549Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-02-05T01:10:04.669Z","type":"join"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2013-02-05T01:10:07.506Z","type":"quit"}
{"nick":"perezd","date":"2013-02-05T01:11:29.268Z","type":"join"}
{"nick":"sblom","date":"2013-02-05T01:13:13.679Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: again, i'm not convinced that we're actually spending a considerable amoutn of time in tickcallback.  yes, it's getting optimzied and deopted, but so what?  on the --prof output, and in the smartos flamegraphs, it doesn't even register as a time sink","date":"2013-02-05T01:14:32.678Z","type":"message"}
{"nick":"isaacs","message":"so, this is interesting:","date":"2013-02-05T01:15:14.297Z","type":"message"}
{"nick":"isaacs","message":"on centos:","date":"2013-02-05T01:15:17.567Z","type":"message"}
{"nick":"isaacs","message":"v0.8.19-pre: tcp-raw-c2s          : min: 2.5485   avg: 2.9853   max: 4.0903   med: 2.9217","date":"2013-02-05T01:15:23.087Z","type":"message"}
{"nick":"isaacs","message":"master: tcp-raw-c2s          : min: 2.8480   avg: 3.2122   max: 3.8631   med: 3.2024","date":"2013-02-05T01:15:42.847Z","type":"message"}
{"nick":"isaacs","message":"mc-in-js-revert: tcp-raw-c2s          : min: 2.8834   avg: 3.5522   max: 4.2324   med: 3.7408","date":"2013-02-05T01:16:02.087Z","type":"message"}
{"nick":"trevnorris","message":"hm. very interesting.","date":"2013-02-05T01:16:11.959Z","type":"message"}
{"nick":"isaacs","message":"so, master is already faster, but the mc-in-js-revert makes it WAY faster.","date":"2013-02-05T01:16:14.456Z","type":"message"}
{"nick":"isaacs","message":"this is client-to-server only","date":"2013-02-05T01:16:18.256Z","type":"message"}
{"nick":"trevnorris","message":"we need to get someone to run these tests on windows.","date":"2013-02-05T01:16:18.509Z","type":"message"}
{"nick":"trevnorris","message":"so is it something on linux only?","date":"2013-02-05T01:16:35.037Z","type":"message"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-02-05T01:20:06.705Z","type":"quit"}
{"nick":"perezd","reason":"Quit: perezd","date":"2013-02-05T01:20:40.664Z","type":"quit"}
{"nick":"isaacs","message":"i'm not sure","date":"2013-02-05T01:20:56.033Z","type":"message"}
{"nick":"sblom","date":"2013-02-05T01:32:51.831Z","type":"quit"}
{"nick":"loladiro","date":"2013-02-05T01:52:24.469Z","type":"join"}
{"nick":"lohkey_","date":"2013-02-05T02:10:18.871Z","type":"join"}
{"nick":"lohkey_","reason":"Client Quit","date":"2013-02-05T02:10:18.871Z","type":"quit"}
{"nick":"lohkey","reason":"Ping timeout: 248 seconds","date":"2013-02-05T02:12:52.030Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-02-05T02:31:55.791Z","type":"join"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-02-05T02:35:20.761Z","type":"quit"}
{"nick":"c4milo","date":"2013-02-05T02:36:53.517Z","type":"join"}
{"nick":"toothrot","reason":"Ping timeout: 248 seconds","date":"2013-02-05T02:47:16.872Z","type":"quit"}
{"nick":"toothr","date":"2013-02-05T02:50:49.974Z","type":"join"}
{"nick":"kazupon","date":"2013-02-05T02:55:54.908Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-02-05T02:56:15.877Z","type":"quit"}
{"nick":"kazupon","date":"2013-02-05T02:56:32.958Z","type":"join"}
{"nick":"indexzero","date":"2013-02-05T03:08:59.869Z","type":"join"}
{"nick":"hz","date":"2013-02-05T03:13:11.890Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-02-05T03:21:09.088Z","type":"quit"}
{"nick":"stagas_","date":"2013-02-05T03:24:26.922Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 264 seconds","date":"2013-02-05T03:26:30.151Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-02-05T03:26:36.507Z","type":"nick"}
{"nick":"rvagg","message":"isaacs: any idea what causes this with npm: https://travis-ci.org/daleharvey/pouchdb/builds/4585202/#L173","date":"2013-02-05T03:28:42.425Z","type":"message"}
{"nick":"rvagg","message":"isaacs: second time I've seen this, errno@'errno@~0.0.3' instead of errno@~0.0.3","date":"2013-02-05T03:29:01.402Z","type":"message"}
{"nick":"rvagg","message":"doesn't happen for me but was reported by dale harvey a while back on his machine, an npm cache cleaned it up, now it's happening on travis!","date":"2013-02-05T03:29:30.012Z","type":"message"}
{"nick":"rvagg","message":"isaacs: this is a shrinkwrapped package if that makes a difference","date":"2013-02-05T03:29:54.251Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-05T03:37:22.990Z","type":"quit"}
{"nick":"mikeal","date":"2013-02-05T03:39:39.394Z","type":"join"}
{"nick":"lohkey","date":"2013-02-05T03:39:40.374Z","type":"join"}
{"nick":"rvagg","message":"publishing without shrinkwrap has made it go away (for now), perhaps something going on with different versions of npm used for publishing vs fetching..","date":"2013-02-05T03:49:54.089Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-05T03:51:13.039Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 260 seconds","date":"2013-02-05T03:52:31.406Z","type":"quit"}
{"nick":"Chip_Zero","reason":"*.net *.split","date":"2013-02-05T03:53:26.068Z","type":"quit"}
{"nick":"toothr","new_nick":"toothrot","date":"2013-02-05T03:55:42.290Z","type":"nick"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2013-02-05T03:59:23.789Z","type":"quit"}
{"nick":"lohkey","date":"2013-02-05T04:00:30.973Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-02-05T04:02:32.095Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-02-05T04:06:31.374Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-02-05T04:22:14.341Z","type":"quit"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2013-02-05T04:23:39.483Z","type":"quit"}
{"nick":"loladiro","date":"2013-02-05T04:25:01.472Z","type":"join"}
{"nick":"indexzero","date":"2013-02-05T04:37:10.458Z","type":"join"}
{"nick":"brucem","reason":"Ping timeout: 255 seconds","date":"2013-02-05T04:39:41.715Z","type":"quit"}
{"nick":"brucem","date":"2013-02-05T04:43:43.306Z","type":"join"}
{"nick":"trevnorris","date":"2013-02-05T04:43:59.376Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-05T05:07:36.430Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-02-05T05:07:49.005Z","type":"join"}
{"nick":"mikeal","date":"2013-02-05T05:08:57.945Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-02-05T05:29:53.001Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-02-05T05:33:29.254Z","type":"join"}
{"nick":"trevnorris","message":"TooTallNate: have a moment for a streams2 question?","date":"2013-02-05T05:35:19.131Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: possibly","date":"2013-02-05T05:35:35.502Z","type":"message"}
{"nick":"TooTallNate","message":"i'm 2 pints deep","date":"2013-02-05T05:35:38.708Z","type":"message"}
{"nick":"trevnorris","message":"lol ok","date":"2013-02-05T05:35:52.752Z","type":"message"}
{"nick":"TooTallNate","message":"what's the ?","date":"2013-02-05T05:36:30.204Z","type":"message"}
{"nick":"trevnorris","message":"in _stream_readable.js, function onread. before it increments the state length by the chunk length it is is wrapped in a conditional making sure the chunk doesn't exist.","date":"2013-02-05T05:36:55.978Z","type":"message"}
{"nick":"trevnorris","message":"so that will never be reached if a chunk is passed.","date":"2013-02-05T05:37:07.266Z","type":"message"}
{"nick":"trevnorris","message":"am I missing something?","date":"2013-02-05T05:37:10.050Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: can you link me?","date":"2013-02-05T05:38:28.593Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: http://git.io/vLYyrw","date":"2013-02-05T05:39:22.196Z","type":"message"}
{"nick":"trevnorris","message":"that logic must be wrong.","date":"2013-02-05T05:39:51.822Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: you home?","date":"2013-02-05T05:39:54.274Z","type":"message"}
{"nick":"TooTallNate","message":"what's state.decoder.end()?","date":"2013-02-05T05:40:58.421Z","type":"message"}
{"nick":"TooTallNate","message":"it seems to be overwriting `chunk`","date":"2013-02-05T05:41:05.860Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: it will never get there since the chunk must exist for it to be overwritten, but it can only reach it if the chunk doesn't exist.","date":"2013-02-05T05:41:42.078Z","type":"message"}
{"nick":"Chip_Zero","date":"2013-02-05T05:42:06.640Z","type":"join"}
{"nick":"trevnorris","message":"oh wait. mother freaking.","date":"2013-02-05T05:43:07.274Z","type":"message"}
{"nick":"trevnorris","message":"so it's setting chunk if it doesn't exist.","date":"2013-02-05T05:43:23.422Z","type":"message"}
{"nick":"TooTallNate","message":"ya i was about to say","date":"2013-02-05T05:43:52.158Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: but i do agree with the guy in that thread","date":"2013-02-05T05:44:43.494Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: i agree with both of you actually","date":"2013-02-05T05:44:49.547Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: how about this:","date":"2013-02-05T05:45:09.831Z","type":"message"}
{"nick":"trevnorris","message":"https://gist.github.com/trevnorris/4712498","date":"2013-02-05T05:45:10.666Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: but see https://github.com/TooTallNate/node-vorbis/blob/master/test/decoder.js#L25-L26","date":"2013-02-05T05:45:13.645Z","type":"message"}
{"nick":"trevnorris","message":"you have to trigger .read() before the first readable event is emitted.","date":"2013-02-05T05:45:28.708Z","type":"message"}
{"nick":"trevnorris","message":"that's because of the conditional logic that I showed you.","date":"2013-02-05T05:45:44.276Z","type":"message"}
{"nick":"trevnorris","message":"ah, yeah. exactly","date":"2013-02-05T05:45:58.810Z","type":"message"}
{"nick":"TooTallNate","message":"i mean i definitely think there's a bug right now","date":"2013-02-05T05:46:18.764Z","type":"message"}
{"nick":"TooTallNate","message":"as denoted by by … in the comment :p","date":"2013-02-05T05:46:29.210Z","type":"message"}
{"nick":"trevnorris","message":"ok, so it's not just me. thanks for the sanity check.","date":"2013-02-05T05:46:35.832Z","type":"message"}
{"nick":"wolfeidau","reason":"Read error: Connection reset by peer","date":"2013-02-05T05:46:51.457Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-02-05T05:47:02.888Z","type":"join"}
{"nick":"TooTallNate","message":"trevnorris: like, ditch .push() and place the buffer in the _read() callback function","date":"2013-02-05T05:47:11.062Z","type":"message"}
{"nick":"TooTallNate","message":"then i think you'll repro it","date":"2013-02-05T05:47:16.548Z","type":"message"}
{"nick":"trevnorris","message":"well. honestly i'm confused by Readable stream, when you can technically write (push) to it. but that's for another time.","date":"2013-02-05T05:48:08.051Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: ya i'm confused about .push() bth as well","date":"2013-02-05T05:49:05.391Z","type":"message"}
{"nick":"TooTallNate","message":"it doesn't make a lot of sense to me","date":"2013-02-05T05:49:16.217Z","type":"message"}
{"nick":"TooTallNate","message":"s/bth/tbh","date":"2013-02-05T05:49:31.382Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: thanks. time to get into isaacs head and understand why it was implemented this way.","date":"2013-02-05T05:52:54.902Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: i've brought it up to him before… i've said that Readable streams should have *1* implicit _read() call upon nextTick()","date":"2013-02-05T05:54:10.385Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: but i think that ruined a lot of bechmarks or something","date":"2013-02-05T05:54:22.441Z","type":"message"}
{"nick":"trevnorris","message":"honestly I don't get the whole _read() thing anyways.","date":"2013-02-05T05:54:58.503Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: that's just the backing implementation","date":"2013-02-05T05:55:26.619Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: like, here's a Transform example https://github.com/TooTallNate/node-lame/blob/master/lib/decoder.js#L71-L151","date":"2013-02-05T05:56:12.226Z","type":"message"}
{"nick":"TooTallNate","message":"but it's basically the same idea","date":"2013-02-05T05:56:19.082Z","type":"message"}
{"nick":"TooTallNate","message":"oh actually","date":"2013-02-05T05:56:26.554Z","type":"message"}
{"nick":"TooTallNate","message":"i have a better example","date":"2013-02-05T05:56:29.380Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: https://github.com/TooTallNate/node-speaker/blob/master/examples/sine.js#L32-L61","date":"2013-02-05T05:56:54.171Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: so it just allows you to do transformations on the data before it's passed to .read()?","date":"2013-02-05T05:58:03.434Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: well that's what Transform is for","date":"2013-02-05T05:58:15.190Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: look at the sine wave example","date":"2013-02-05T05:58:22.718Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: the idea is that that's the callback function that you return the data from the \"backing store\"","date":"2013-02-05T05:58:39.631Z","type":"message"}
{"nick":"TooTallNate","message":"whatever that store may be","date":"2013-02-05T05:58:45.197Z","type":"message"}
{"nick":"TooTallNate","message":"so for the SineWave generator, the \"backing store\" is the sine wave algorithm","date":"2013-02-05T06:00:15.276Z","type":"message"}
{"nick":"trevnorris","message":"aaah.... wtf. ok. so .read() calls onread() which may call _read() which calls onread()?","date":"2013-02-05T06:02:25.473Z","type":"message"}
{"nick":"trevnorris","message":"ok scratch that. it's read() -> _read() -> onread()","date":"2013-02-05T06:08:11.393Z","type":"message"}
{"nick":"trevnorris","message":"but push() calls onread to, and the state.length is only updated by the chunk.length when read() is called.","date":"2013-02-05T06:09:27.923Z","type":"message"}
{"nick":"trevnorris","message":"s/to/also/","date":"2013-02-05T06:09:40.620Z","type":"message"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-02-05T06:15:07.056Z","type":"quit"}
{"nick":"trevnorris","message":"TooTallNate: yeah, so still don't understand the use of _read. https://gist.github.com/trevnorris/4712498","date":"2013-02-05T06:23:35.391Z","type":"message"}
{"nick":"trevnorris","message":"ran that w/o the counter for the first time...","date":"2013-02-05T06:23:53.409Z","type":"message"}
{"nick":"TooTallNate","message":"i wish push() wasn't there","date":"2013-02-05T06:24:47.149Z","type":"message"}
{"nick":"TooTallNate","message":"i don't think intermingling them is a good idea","date":"2013-02-05T06:25:13.123Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: i don't get what's not to get, haha","date":"2013-02-05T06:26:05.862Z","type":"message"}
{"nick":"TooTallNate","message":"it get's called, you read some data from *something*","date":"2013-02-05T06:26:20.239Z","type":"message"}
{"nick":"TooTallNate","message":"and then invoke the callback","date":"2013-02-05T06:26:25.610Z","type":"message"}
{"nick":"trevnorris","message":"so basically _read()/invoke callback should be equivalent to  .on('readable')/push()?","date":"2013-02-05T06:27:25.606Z","type":"message"}
{"nick":"trevnorris","message":"no no.","date":"2013-02-05T06:27:33.675Z","type":"message"}
{"nick":"TooTallNate","message":"no","date":"2013-02-05T06:27:36.041Z","type":"message"}
{"nick":"TooTallNate","message":"forget about .push()","date":"2013-02-05T06:27:43.074Z","type":"message"}
{"nick":"TooTallNate","message":"it fucking suck","date":"2013-02-05T06:27:46.931Z","type":"message"}
{"nick":"TooTallNate","message":"s","date":"2013-02-05T06:27:47.989Z","type":"message"}
{"nick":"TooTallNate","message":"idk why it was added","date":"2013-02-05T06:27:52.250Z","type":"message"}
{"nick":"TooTallNate","message":"it wasn't part of the original spec","date":"2013-02-05T06:27:56.124Z","type":"message"}
{"nick":"trevnorris","message":"ok. forgotten.","date":"2013-02-05T06:28:12.355Z","type":"message"}
{"nick":"TooTallNate","message":"the idea is \"readable\" gets emitted, you call .read(), rinse and repeat","date":"2013-02-05T06:28:21.478Z","type":"message"}
{"nick":"TooTallNate","message":"not where does this data come from? that's where _read() come in","date":"2013-02-05T06:28:35.829Z","type":"message"}
{"nick":"TooTallNate","message":"s/not/now","date":"2013-02-05T06:28:55.937Z","type":"message"}
{"nick":"TooTallNate","message":"Readable is an abstract class","date":"2013-02-05T06:29:37.142Z","type":"message"}
{"nick":"TooTallNate","message":"so the implementor implements _read()","date":"2013-02-05T06:29:52.848Z","type":"message"}
{"nick":"TooTallNate","message":"and the user calls .read()","date":"2013-02-05T06:29:56.801Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: my only gripe with Readable streams ATM is what this guy is talking about https://github.com/joyent/node/issues/4695#issuecomment-13113979","date":"2013-02-05T06:30:55.677Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: yeah, ok. understand how push() was confusing me. it was allowing me to \"write\" data from remote locations.","date":"2013-02-05T06:31:59.549Z","type":"message"}
{"nick":"trevnorris","message":"(basically giving me the ability to define what data is returned in _read())","date":"2013-02-05T06:32:26.002Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: ya, i tried using .push() one time, and then i was like \"wtf is _read() for now?!\"","date":"2013-02-05T06:32:50.573Z","type":"message"}
{"nick":"TooTallNate","message":"so i get your confusion","date":"2013-02-05T06:32:54.803Z","type":"message"}
{"nick":"trevnorris","message":"so can you help explain: https://gist.github.com/trevnorris/4712498","date":"2013-02-05T06:33:06.762Z","type":"message"}
{"nick":"paddybyers","date":"2013-02-05T06:33:21.906Z","type":"join"}
{"nick":"trevnorris","message":"if I don't call read() the first time, then nothing gets displayed.","date":"2013-02-05T06:33:37.735Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: well _read() gets called until you do fn(null, null)","date":"2013-02-05T06:33:54.505Z","type":"message"}
{"nick":"TooTallNate","message":"which emits \"end\"","date":"2013-02-05T06:33:57.823Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: so it's getting called twice by the time you're calling read() in the \"readable\" callback function","date":"2013-02-05T06:34:20.677Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: the bug is that the .read(0) call is required at the bottom","date":"2013-02-05T06:34:32.204Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: ok, and I just ran it removing the 0 from stream.read(0), and that caused an infinite output loop thing.","date":"2013-02-05T06:34:35.781Z","type":"message"}
{"nick":"TooTallNate","message":"in order for the \"readable\" to happen","date":"2013-02-05T06:34:39.923Z","type":"message"}
{"nick":"TooTallNate","message":"so we're on the same page i think?","date":"2013-02-05T06:35:02.507Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: keep a counter and call fn(null, null) in the _read() callback after a few times","date":"2013-02-05T06:35:24.182Z","type":"message"}
{"nick":"TooTallNate","message":"so it's not an infinite stram","date":"2013-02-05T06:35:40.742Z","type":"message"}
{"nick":"TooTallNate","message":"stream","date":"2013-02-05T06:35:42.088Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-05T06:36:32.890Z","type":"quit"}
{"nick":"trevnorris","message":"um. in your sine.js example there isn't any logic to return fn(null, null) anywhere. oh, but that's why you have the nextTick event.","date":"2013-02-05T06:37:30.597Z","type":"message"}
{"nick":"TooTallNate","message":"oh right, i do it manually there","date":"2013-02-05T06:37:45.960Z","type":"message"}
{"nick":"TooTallNate","message":"so you could do that instead as well","date":"2013-02-05T06:37:53.608Z","type":"message"}
{"nick":"TooTallNate","message":"i should update that example though","date":"2013-02-05T06:37:59.887Z","type":"message"}
{"nick":"TooTallNate","message":"cause I don't think i knew about returning null/undefined to \"end\" the stream","date":"2013-02-05T06:38:19.565Z","type":"message"}
{"nick":"trevnorris","message":"wow. ok I think I mostly understand. problem i'm having now is understanding the why behind the implementation.","date":"2013-02-05T06:38:21.331Z","type":"message"}
{"nick":"trevnorris","message":"I like the api. but the implementation is confusing the crap out of me.","date":"2013-02-05T06:38:32.727Z","type":"message"}
{"nick":"TooTallNate","message":"ya i haven't dug too deep into it","date":"2013-02-05T06:38:55.045Z","type":"message"}
{"nick":"TooTallNate","message":"it's \"black magic\" as indutny says","date":"2013-02-05T06:39:06.656Z","type":"message"}
{"nick":"trevnorris","message":"lol seriously","date":"2013-02-05T06:39:14.116Z","type":"message"}
{"nick":"wolfeidau","date":"2013-02-05T06:39:18.515Z","type":"join"}
{"nick":"TooTallNate","message":"but the .read(0) thing *does* bug me","date":"2013-02-05T06:39:28.073Z","type":"message"}
{"nick":"TooTallNate","message":"ok i'm gonna crash","date":"2013-02-05T06:39:43.804Z","type":"message"}
{"nick":"TooTallNate","message":"'gnight","date":"2013-02-05T06:39:47.200Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-02-05T06:39:50.005Z","type":"quit"}
{"nick":"trevnorris","message":"night","date":"2013-02-05T06:39:53.318Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-02-05T06:41:49.489Z","type":"quit"}
{"nick":"perezd","date":"2013-02-05T06:47:47.462Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-02-05T07:05:38.870Z","type":"quit"}
{"nick":"stagas","reason":"Quit: ChatZilla 0.9.89-rdmsoft [XULRunner 1.9.0.17/2009122204]","date":"2013-02-05T07:13:07.850Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 248 seconds","date":"2013-02-05T07:23:16.049Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-02-05T07:24:17.154Z","type":"quit"}
{"nick":"felixge","date":"2013-02-05T07:25:15.001Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-02-05T07:25:15.347Z","type":"quit"}
{"nick":"felixge","date":"2013-02-05T07:25:15.471Z","type":"join"}
{"nick":"paddybyers","date":"2013-02-05T07:27:21.056Z","type":"join"}
{"nick":"kazupon","date":"2013-02-05T07:28:49.630Z","type":"join"}
{"nick":"rendar","date":"2013-02-05T07:29:39.239Z","type":"join"}
{"nick":"felixge","reason":"Ping timeout: 276 seconds","date":"2013-02-05T07:30:18.829Z","type":"quit"}
{"nick":"indexzero","date":"2013-02-05T07:31:15.568Z","type":"join"}
{"nick":"indexzero","reason":"Client Quit","date":"2013-02-05T07:32:52.160Z","type":"quit"}
{"nick":"`3rdEden","date":"2013-02-05T07:34:31.127Z","type":"join"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-02-05T07:36:13.938Z","type":"quit"}
{"nick":"Ralt","date":"2013-02-05T07:47:14.813Z","type":"join"}
{"nick":"mikeal","date":"2013-02-05T07:51:09.239Z","type":"join"}
{"nick":"stagas","date":"2013-02-05T07:58:36.205Z","type":"join"}
