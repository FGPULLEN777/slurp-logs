{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-05T00:13:46.688Z","type":"quit"}
{"nick":"mikeal","date":"2011-12-05T00:15:14.426Z","type":"join"}
{"nick":"mjr_","message":"I wonder if we are backing up behind http client requests.","date":"2011-12-05T00:16:17.437Z","type":"message"}
{"nick":"mjr_","message":"Speaking of mikeal.","date":"2011-12-05T00:16:20.579Z","type":"message"}
{"nick":"mjr_","message":"Is there an easy way to see how many client requests are waiting for a socket?","date":"2011-12-05T00:16:46.230Z","type":"message"}
{"nick":"mikeal","reason":"Client Quit","date":"2011-12-05T00:20:08.835Z","type":"quit"}
{"nick":"isaacs_","new_nick":"isaacs","date":"2011-12-05T00:22:19.062Z","type":"nick"}
{"nick":"piscisaureus_","reason":"Ping timeout: 240 seconds","date":"2011-12-05T00:22:49.320Z","type":"quit"}
{"nick":"sh1mmer","date":"2011-12-05T00:32:22.392Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 268 seconds","date":"2011-12-05T01:34:48.997Z","type":"quit"}
{"nick":"mikeal","date":"2011-12-05T01:57:15.531Z","type":"join"}
{"nick":"mikeal","message":"mjr_: http.globalAgent.sockets, i think","date":"2011-12-05T01:57:47.847Z","type":"message"}
{"nick":"mjr_","message":"lemme check","date":"2011-12-05T01:58:06.593Z","type":"message"}
{"nick":"mjr_","message":"I've been rolling back to node 0.4, same app code, and the leak doesn't happen","date":"2011-12-05T01:58:20.838Z","type":"message"}
{"nick":"mjr_","message":"prod-nr125.voxer.com> Object.keys(require(\"http\").globalAgent.sockets).length","date":"2011-12-05T02:00:34.869Z","type":"message"}
{"nick":"mjr_","message":"291","date":"2011-12-05T02:00:35.230Z","type":"message"}
{"nick":"mikeal","message":"umm","date":"2011-12-05T02:01:03.748Z","type":"message"}
{"nick":"mikeal","message":"that's the number of remote hosts","date":"2011-12-05T02:01:11.626Z","type":"message"}
{"nick":"mikeal","message":"not the number of pending","date":"2011-12-05T02:01:14.148Z","type":"message"}
{"nick":"mikeal","message":"hold on","date":"2011-12-05T02:01:16.735Z","type":"message"}
{"nick":"mjr_","message":"hmm, globalAgent.maxSockets is 5","date":"2011-12-05T02:01:19.812Z","type":"message"}
{"nick":"mjr_","message":"But we should be making our own agents","date":"2011-12-05T02:01:39.901Z","type":"message"}
{"nick":"mikeal","message":"if you are sending your own agent then you'll need to check on your own agent","date":"2011-12-05T02:02:30.956Z","type":"message"}
{"nick":"mikeal","message":"but looks like somewhere you aren't if the default agent has a ton","date":"2011-12-05T02:02:45.224Z","type":"message"}
{"nick":"mikeal","message":"aslo","date":"2011-12-05T02:02:45.948Z","type":"message"}
{"nick":"mikeal","message":"https://github.com/joyent/node/blob/master/lib/http.js#L925","date":"2011-12-05T02:02:56.376Z","type":"message"}
{"nick":"mikeal","message":"globalAgent.requests[host+","date":"2011-12-05T02:03:05.178Z","type":"message"}
{"nick":"mikeal","message":"\":\"+port]","date":"2011-12-05T02:03:09.966Z","type":"message"}
{"nick":"mikeal","message":".length","date":"2011-12-05T02:03:20.571Z","type":"message"}
{"nick":"mikeal","message":"for the number of pending for that host","date":"2011-12-05T02:03:25.006Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-05T02:05:52.196Z","type":"quit"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-12-05T02:48:19.828Z","type":"quit"}
{"nick":"benvie","date":"2011-12-05T03:08:06.689Z","type":"join"}
{"nick":"paddybyers","date":"2011-12-05T04:14:29.358Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2011-12-05T04:22:33.116Z","type":"quit"}
{"nick":"isaacs","date":"2011-12-05T05:00:30.308Z","type":"join"}
{"nick":"ryah","message":"Ad","date":"2011-12-05T05:01:37.428Z","type":"message"}
{"nick":"bnoordhuis","date":"2011-12-05T05:21:55.331Z","type":"join"}
{"nick":"CIA-111","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307v0.6\u000f * r\u000234e95d1\u000f \u000310\u000f/ src/unix/core.c \u0002:\u000f ","date":"2011-12-05T05:59:09.712Z","type":"message"}
{"nick":"CIA-111","message":"\u0002libuv:\u000f unix: make it safe to delete the default loop","date":"2011-12-05T05:59:09.874Z","type":"message"}
{"nick":"CIA-111","message":"\u0002libuv:\u000f Fixes a potential free() of non-malloc'ed memory. - http://git.io/a9ZZwA","date":"2011-12-05T05:59:09.874Z","type":"message"}
{"nick":"mikeal","date":"2011-12-05T06:25:47.941Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2011-12-05T06:30:41.908Z","type":"quit"}
{"nick":"mraleph","date":"2011-12-05T06:33:07.373Z","type":"join"}
{"nick":"mikeal","date":"2011-12-05T06:47:04.144Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2011-12-05T06:47:42.289Z","type":"quit"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-12-05T07:13:19.411Z","type":"quit"}
{"nick":"sh1mmer","reason":"Quit: sh1mmer","date":"2011-12-05T07:15:54.189Z","type":"quit"}
{"nick":"CIA-111","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307v0.6\u000f * r\u0002a0fdd5f\u000f \u000310\u000f/ (deps/uv/src/unix/core.c deps/uv/src/unix/error.c)\u0002:\u000f uv: upgrade to 34e95d1 - http://git.io/KFodyg","date":"2011-12-05T07:16:10.680Z","type":"message"}
{"nick":"CIA-111","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307v0.6\u000f * r\u0002aeb124f\u000f \u000310\u000f/ test/simple/test-fs-long-path.js \u0002:\u000f test: create test file in temp dir - http://git.io/EpxMYw","date":"2011-12-05T07:16:11.060Z","type":"message"}
{"nick":"sh1mmer","date":"2011-12-05T07:28:39.473Z","type":"join"}
{"nick":"CIA-111","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307v0.6\u000f * r\u0002fdf180f\u000f \u000310\u000f/ src/node.cc \u0002:\u000f cli: fix output of --help - http://git.io/wdkwvA","date":"2011-12-05T07:43:00.770Z","type":"message"}
{"nick":"mraleph","date":"2011-12-05T07:49:02.208Z","type":"join"}
{"nick":"sh1mmer","reason":"Quit: sh1mmer","date":"2011-12-05T07:51:47.056Z","type":"quit"}
{"nick":"mikeal","date":"2011-12-05T07:57:04.061Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-05T08:12:21.960Z","type":"quit"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-12-05T08:16:14.038Z","type":"quit"}
{"nick":"einaros","date":"2011-12-05T08:22:10.996Z","type":"join"}
{"nick":"kuebk","date":"2011-12-05T08:25:15.602Z","type":"join"}
{"nick":"mikeal","date":"2011-12-05T08:33:32.997Z","type":"join"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2011-12-05T08:43:21.237Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-05T08:46:21.198Z","type":"quit"}
{"nick":"mikeal","date":"2011-12-05T08:56:10.751Z","type":"join"}
{"nick":"piscisaureus_","date":"2011-12-05T09:14:12.394Z","type":"join"}
{"nick":"piscisaureus__","date":"2011-12-05T10:56:45.473Z","type":"join"}
{"nick":"piscisaureus__","message":"bnoordhuis: are you trying to figure out matt's leak issue?","date":"2011-12-05T11:02:56.214Z","type":"message"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-12-05T11:07:53.322Z","type":"quit"}
{"nick":"piscisaureus__","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2011-12-05T11:17:55.912Z","type":"quit"}
{"nick":"piscisaureus__","date":"2011-12-05T11:22:50.627Z","type":"join"}
{"nick":"indutny","message":"heya, anyone around?","date":"2011-12-05T12:38:40.491Z","type":"message"}
{"nick":"mmalecki","message":"indutny: define: anyone","date":"2011-12-05T12:43:45.878Z","type":"message"}
{"nick":"indutny","message":"mmalecki: https://spdy2.indutny.com/","date":"2011-12-05T13:21:49.559Z","type":"message"}
{"nick":"indutny","message":"actually, I'm still looking for isaacs","date":"2011-12-05T13:22:06.695Z","type":"message"}
{"nick":"mmalecki","message":"indutny: nice! it uses native zlib?","date":"2011-12-05T13:24:56.767Z","type":"message"}
{"nick":"indutny","message":"mmalecki: yes","date":"2011-12-05T13:25:15.304Z","type":"message"}
{"nick":"indutny","message":"mmalecki: it has no dependencies now :)","date":"2011-12-05T13:25:26.930Z","type":"message"}
{"nick":"indutny","message":"free as bird","date":"2011-12-05T13:25:33.039Z","type":"message"}
{"nick":"mmalecki","message":"indutny: that's awesome :)! any benchmarks?","date":"2011-12-05T13:26:46.135Z","type":"message"}
{"nick":"indutny","message":"mmalecki: not really, hard to benchmark","date":"2011-12-05T13:29:04.222Z","type":"message"}
{"nick":"indutny","message":"mmalecki: I should write fast client first :)","date":"2011-12-05T13:29:18.966Z","type":"message"}
{"nick":"indutny","message":"mmalecki: I'm going to write websocket chat on SPDY :)","date":"2011-12-05T13:31:14.484Z","type":"message"}
{"nick":"indutny","message":"as simple as possible","date":"2011-12-05T13:31:18.454Z","type":"message"}
{"nick":"mmalecki","message":"woot! btw, would it work on nodejitsu?","date":"2011-12-05T13:33:37.934Z","type":"message"}
{"nick":"mmalecki","message":"hah! my onAny implementation has no performance impact!","date":"2011-12-05T13:34:50.805Z","type":"message"}
{"nick":"mmalecki","message":"well, actually, my benchmark was a fail","date":"2011-12-05T13:37:00.984Z","type":"message"}
{"nick":"indutny","message":"mmalecki: :)","date":"2011-12-05T13:45:56.508Z","type":"message"}
{"nick":"indutny","message":"mmalecki: it won't work on nodejitsu","date":"2011-12-05T13:46:08.018Z","type":"message"}
{"nick":"indutny","message":"mmalecki: because it's using NPN","date":"2011-12-05T13:46:16.122Z","type":"message"}
{"nick":"mmalecki","message":"ah, right","date":"2011-12-05T13:47:12.942Z","type":"message"}
{"nick":"mmalecki","message":"optimizing is hard. I gained 600 ms by replacing forEach with for","date":"2011-12-05T13:48:32.716Z","type":"message"}
{"nick":"indutny","message":"wow, really?","date":"2011-12-05T13:49:16.609Z","type":"message"}
{"nick":"indutny","message":"what node version?","date":"2011-12-05T13:49:19.009Z","type":"message"}
{"nick":"indutny","message":"how many items in array?","date":"2011-12-05T13:49:27.998Z","type":"message"}
{"nick":"mmalecki","message":"v0.7.0-pre, one item","date":"2011-12-05T13:49:41.047Z","type":"message"}
{"nick":"mmalecki","message":"with 6 items it's just 400 ms","date":"2011-12-05T13:52:14.397Z","type":"message"}
{"nick":"piscisaureus__","message":"600ms for iterating over 1 item?","date":"2011-12-05T13:52:53.371Z","type":"message"}
{"nick":"piscisaureus__","message":":'(","date":"2011-12-05T13:53:01.640Z","type":"message"}
{"nick":"einaros","message":"that makes a lot of no sense =O","date":"2011-12-05T13:53:09.093Z","type":"message"}
{"nick":"mmalecki","message":"I mean, 1024*1024 iterations","date":"2011-12-05T13:53:26.347Z","type":"message"}
{"nick":"mmalecki","message":"over 1 element","date":"2011-12-05T13:53:31.694Z","type":"message"}
{"nick":"piscisaureus__","message":"aah","date":"2011-12-05T13:53:37.219Z","type":"message"}
{"nick":"mmalecki","message":"yeah XD","date":"2011-12-05T13:53:42.221Z","type":"message"}
{"nick":"einaros","message":":p","date":"2011-12-05T13:53:45.398Z","type":"message"}
{"nick":"einaros","message":"does whatever-the-loop-contains have weird side effects?","date":"2011-12-05T13:54:28.070Z","type":"message"}
{"nick":"mmalecki","message":"that's too much cs for me ;)","date":"2011-12-05T13:55:28.783Z","type":"message"}
{"nick":"einaros","message":"not that I know what exactly v8 does when optimizing forEaches, but ideally it should inline all the calls","date":"2011-12-05T13:55:31.293Z","type":"message"}
{"nick":"mmalecki","message":"it just calls a function","date":"2011-12-05T13:55:45.808Z","type":"message"}
{"nick":"mmalecki","message":"applies to it, actually","date":"2011-12-05T13:56:02.655Z","type":"message"}
{"nick":"einaros","message":"and the body of the for does the same?","date":"2011-12-05T13:56:16.833Z","type":"message"}
{"nick":"mmalecki","message":"yeah","date":"2011-12-05T13:56:34.291Z","type":"message"}
{"nick":"mmalecki","message":"let me gist it","date":"2011-12-05T13:56:49.615Z","type":"message"}
{"nick":"mmalecki","message":"einaros: https://gist.github.com/1433657","date":"2011-12-05T13:57:14.795Z","type":"message"}
{"nick":"mmalecki","message":"einaros: line 59","date":"2011-12-05T13:57:37.704Z","type":"message"}
{"nick":"einaros","message":"sneaky","date":"2011-12-05T14:06:35.576Z","type":"message"}
{"nick":"einaros","message":"https://gist.github.com/9be3d411baa7e8443254","date":"2011-12-05T14:06:53.397Z","type":"message"}
{"nick":"mmalecki","message":"yeah","date":"2011-12-05T14:10:51.756Z","type":"message"}
{"nick":"mmalecki","message":"1768 vs 50 ms","date":"2011-12-05T14:10:58.334Z","type":"message"}
{"nick":"mmalecki","message":"indutny: you may want to look at ^","date":"2011-12-05T14:11:20.798Z","type":"message"}
{"nick":"einaros","message":"~10% increase for global iterator, I didn't expect that","date":"2011-12-05T14:12:02.454Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: yes-ish","date":"2011-12-05T14:12:17.701Z","type":"message"}
{"nick":"mmalecki","message":"btw, why don't we have onAny yet?","date":"2011-12-05T14:12:37.399Z","type":"message"}
{"nick":"bnoordhuis","message":"the stars aren't right yet","date":"2011-12-05T14:13:20.069Z","type":"message"}
{"nick":"mmalecki","message":"my implementation needs some work but I think I'll be able to make it fast","date":"2011-12-05T14:13:28.853Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: uhm, right","date":"2011-12-05T14:13:44.747Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: you shouldn't drink when coding, ya know?","date":"2011-12-05T14:13:54.963Z","type":"message"}
{"nick":"bnoordhuis","message":"actually, i'm drinking tea","date":"2011-12-05T14:14:05.879Z","type":"message"}
{"nick":"bnoordhuis","message":"it's not even spiked","date":"2011-12-05T14:14:09.171Z","type":"message"}
{"nick":"mmalecki","message":"OH NO","date":"2011-12-05T14:14:11.122Z","type":"message"}
{"nick":"bnoordhuis","message":"re: onAny - i don't think anyone really (as in *really*) needs that","date":"2011-12-05T14:14:34.633Z","type":"message"}
{"nick":"mmalecki","message":"100% of people who ever drank tea died later.","date":"2011-12-05T14:14:35.594Z","type":"message"}
{"nick":"bnoordhuis","message":"same goes for the number of oxygen breathers","date":"2011-12-05T14:14:50.402Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: I need it, now.","date":"2011-12-05T14:14:50.894Z","type":"message"}
{"nick":"bnoordhuis","message":"that's why i switched to helium","date":"2011-12-05T14:15:04.182Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: lol","date":"2011-12-05T14:15:08.201Z","type":"message"}
{"nick":"bnoordhuis","message":"one of the nice side effects is that i'm the star of every party i go to","date":"2011-12-05T14:15:15.744Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: I'll describe you my use case","date":"2011-12-05T14:15:16.809Z","type":"message"}
{"nick":"indutny","message":"mmalecki: lets see","date":"2011-12-05T14:15:25.845Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: stop lying, programmers don't go to parties","date":"2011-12-05T14:15:35.029Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: i was a playboy millionaire before i became a programmer","date":"2011-12-05T14:15:54.995Z","type":"message"}
{"nick":"indutny","message":"mmalecki: ok, bind is using try catch block somewhere inside","date":"2011-12-05T14:16:44.696Z","type":"message"}
{"nick":"indutny","message":"mmalecki: so it's bailouting","date":"2011-12-05T14:16:52.663Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: no, you were not","date":"2011-12-05T14:16:53.324Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: it's this tea.","date":"2011-12-05T14:17:02.482Z","type":"message"}
{"nick":"bnoordhuis","message":"do i ever lie?","date":"2011-12-05T14:17:08.822Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: this question is self-recurring.","date":"2011-12-05T14:17:20.243Z","type":"message"}
{"nick":"indutny","message":"mmalecki: if you'll replace .bind(this) with .apply(self) it will work much faster","date":"2011-12-05T14:17:29.867Z","type":"message"}
{"nick":"bnoordhuis","message":"awesome, isn't it?","date":"2011-12-05T14:17:31.507Z","type":"message"}
{"nick":"indutny","message":"mmalecki: I was rockstar","date":"2011-12-05T14:17:40.991Z","type":"message"}
{"nick":"mmalecki","message":"indutny: you still are. nodejitsu people are rockstars :)","date":"2011-12-05T14:18:40.538Z","type":"message"}
{"nick":"indutny","message":"isaacs: where are you?","date":"2011-12-05T14:18:43.644Z","type":"message"}
{"nick":"indutny","message":"mmalecki: hehe :)","date":"2011-12-05T14:18:48.027Z","type":"message"}
{"nick":"piscisaureus__","message":"mmalecki: re 100%","date":"2011-12-05T14:19:08.669Z","type":"message"}
{"nick":"bnoordhuis","message":"hrm, i think i broke github","date":"2011-12-05T14:19:12.540Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: nope, nt you","date":"2011-12-05T14:19:17.545Z","type":"message"}
{"nick":"piscisaureus__","message":"bnoordhuis: not true, bnoordhuis is still alive","date":"2011-12-05T14:19:18.708Z","type":"message"}
{"nick":"indutny","message":"that was me","date":"2011-12-05T14:19:20.371Z","type":"message"}
{"nick":"mmalecki","message":"indutny: shit, you're right","date":"2011-12-05T14:19:54.334Z","type":"message"}
{"nick":"mmalecki","message":"indutny: (this apply)","date":"2011-12-05T14:20:08.965Z","type":"message"}
{"nick":"mmalecki","message":"is bind that price-y?","date":"2011-12-05T14:20:17.962Z","type":"message"}
{"nick":"indutny","message":"mmalecki: yes","date":"2011-12-05T14:20:54.580Z","type":"message"}
{"nick":"indutny","message":"mmalecki: node --trace-bailout ftw","date":"2011-12-05T14:21:00.279Z","type":"message"}
{"nick":"mmalecki","message":"indutny: I haven't known this! thanks","date":"2011-12-05T14:22:09.478Z","type":"message"}
{"nick":"indutny","message":"mmalecki: --trace-deopt, --trace-opt","date":"2011-12-05T14:25:20.198Z","type":"message"}
{"nick":"indutny","message":":)","date":"2011-12-05T14:25:29.191Z","type":"message"}
{"nick":"piscisaureus___","date":"2011-12-05T14:29:30.997Z","type":"join"}
{"nick":"mmalecki","message":"indutny: useful! looks like my onAny can be optimized :)","date":"2011-12-05T14:31:32.811Z","type":"message"}
{"nick":"piscisaureus__","reason":"Ping timeout: 240 seconds","date":"2011-12-05T14:32:18.701Z","type":"quit"}
{"nick":"indutny","message":"mmalecki: haha :)","date":"2011-12-05T14:33:28.800Z","type":"message"}
{"nick":"indutny","message":"mmalecki: if code bailouts - it won't be optimized","date":"2011-12-05T14:33:37.911Z","type":"message"}
{"nick":"indutny","message":"mmalecki: actually, only function that bailouts will be skipped by hydrogen","date":"2011-12-05T14:34:00.128Z","type":"message"}
{"nick":"mmalecki","message":"indutny: right, I mean optimized by hand, not by compiler","date":"2011-12-05T14:34:13.215Z","type":"message"}
{"nick":"indutny","message":"ah , socket.io broke my spdy module","date":"2011-12-05T14:38:26.565Z","type":"message"}
{"nick":"indutny","message":":(","date":"2011-12-05T14:38:27.426Z","type":"message"}
{"nick":"mmalecki","message":"what do you mean by \"broke\"?","date":"2011-12-05T14:39:54.344Z","type":"message"}
{"nick":"indutny","message":"mmalecki: it doesn't work with spdy","date":"2011-12-05T14:42:52.907Z","type":"message"}
{"nick":"indutny","message":"whole connection becomes dirty","date":"2011-12-05T14:43:02.050Z","type":"message"}
{"nick":"indutny","message":"ah, looks like I now","date":"2011-12-05T14:43:15.113Z","type":"message"}
{"nick":"mmalecki","message":"interesting. chrome has some interesting debugging tool for spdy, btw","date":"2011-12-05T14:43:30.651Z","type":"message"}
{"nick":"mmalecki","message":"described here: http://www.chromium.org/spdy/spdy-tools-and-debugging","date":"2011-12-05T14:44:17.671Z","type":"message"}
{"nick":"piscisaureus____","date":"2011-12-05T14:48:03.316Z","type":"join"}
{"nick":"piscisaureus___","reason":"Ping timeout: 248 seconds","date":"2011-12-05T14:48:55.883Z","type":"quit"}
{"nick":"indutny","message":"mmalecki: ah, right","date":"2011-12-05T14:58:07.019Z","type":"message"}
{"nick":"indutny","message":"thanks","date":"2011-12-05T14:58:08.244Z","type":"message"}
{"nick":"indutny","message":"but I'm already using most of them","date":"2011-12-05T14:58:34.890Z","type":"message"}
{"nick":"piscisaureus____","reason":"Read error: Connection reset by peer","date":"2011-12-05T15:12:34.834Z","type":"quit"}
{"nick":"piscisaureus____","date":"2011-12-05T15:12:56.064Z","type":"join"}
{"nick":"indutny","message":"mmalecki: https://spdy2.indutny.com:8081/","date":"2011-12-05T15:35:30.086Z","type":"message"}
{"nick":"indutny","message":"it just fails","date":"2011-12-05T15:35:40.676Z","type":"message"}
{"nick":"indutny","message":":(","date":"2011-12-05T15:36:08.277Z","type":"message"}
{"nick":"mmalecki","message":"indutny: can I see the code somewhere?","date":"2011-12-05T15:37:07.977Z","type":"message"}
{"nick":"indutny","message":"mmalecki: yes, https://github.com/indutny/node-spdy/tree/refactor-0.6.x","date":"2011-12-05T15:40:47.673Z","type":"message"}
{"nick":"mmalecki","message":"indutny: should it display Time: ?","date":"2011-12-05T15:40:50.491Z","type":"message"}
{"nick":"indutny","message":"mmalecki: but you'll need to build node with latest openssl to get full support of spdy","date":"2011-12-05T15:41:05.403Z","type":"message"}
{"nick":"indutny","message":"mmalecki: nope :)","date":"2011-12-05T15:41:11.280Z","type":"message"}
{"nick":"indutny","message":"mmalecki: it should display Time: <%= +new Date %>","date":"2011-12-05T15:41:28.122Z","type":"message"}
{"nick":"mmalecki","message":"indutny: it did","date":"2011-12-05T15:42:06.531Z","type":"message"}
{"nick":"indutny","message":"mmalecki: and should refresh it everysecond","date":"2011-12-05T15:42:16.140Z","type":"message"}
{"nick":"mmalecki","message":"well, it did once","date":"2011-12-05T15:42:24.698Z","type":"message"}
{"nick":"mmalecki","message":"I see that it tries xhr-polling first","date":"2011-12-05T15:42:56.547Z","type":"message"}
{"nick":"indutny","message":"mmalecki: it should use it","date":"2011-12-05T15:43:20.212Z","type":"message"}
{"nick":"indutny","message":"mmalecki: websockets are using https","date":"2011-12-05T15:43:29.863Z","type":"message"}
{"nick":"indutny","message":"mmalecki: not spdy","date":"2011-12-05T15:43:34.528Z","type":"message"}
{"nick":"indutny","message":"so I disabled them","date":"2011-12-05T15:43:45.037Z","type":"message"}
{"nick":"mmalecki","message":"ok","date":"2011-12-05T15:43:51.982Z","type":"message"}
{"nick":"mmalecki","message":"indutny: it refreshes it *sometimes*","date":"2011-12-05T15:44:30.972Z","type":"message"}
{"nick":"indutny","message":"mmalecki: haha :)","date":"2011-12-05T15:44:54.941Z","type":"message"}
{"nick":"indutny","message":"mmalecki: for me it just fails on second refresh","date":"2011-12-05T15:45:08.056Z","type":"message"}
{"nick":"indutny","message":"mmalecki: even nicier when running it locally","date":"2011-12-05T15:45:19.599Z","type":"message"}
{"nick":"indutny","message":"mmalecki: at first refresh image will disapper, at second styles, and then everything","date":"2011-12-05T15:45:37.587Z","type":"message"}
{"nick":"mmalecki","message":"hah. so it refreshed it every 30 seconds or so","date":"2011-12-05T15:47:08.493Z","type":"message"}
{"nick":"erickt","date":"2011-12-05T15:47:27.478Z","type":"join"}
{"nick":"indutny","message":"mmalecki: heh, what web inspectors says for you?","date":"2011-12-05T15:52:19.504Z","type":"message"}
{"nick":"indutny","message":"mmalecki: does other requests fail or what?","date":"2011-12-05T15:52:28.436Z","type":"message"}
{"nick":"mmalecki","message":"indutny: I'll gist you the log, ok?","date":"2011-12-05T15:52:37.136Z","type":"message"}
{"nick":"mmalecki","message":"indutny: this time it didn't work, https://gist.github.com/dce4b5d67ff964aafb48","date":"2011-12-05T15:54:41.906Z","type":"message"}
{"nick":"mmalecki","message":"indutny: and this time it did https://gist.github.com/16ff0c406d1910756772","date":"2011-12-05T15:55:49.339Z","type":"message"}
{"nick":"indutny","message":"mmalecki: only thing that I see is that client sends RST_STREAM frames","date":"2011-12-05T15:58:21.019Z","type":"message"}
{"nick":"indutny","message":"and I don't understand why","date":"2011-12-05T15:58:28.766Z","type":"message"}
{"nick":"mmalecki","message":"reset stream?","date":"2011-12-05T15:59:17.229Z","type":"message"}
{"nick":"indutny","message":"mmalecki: yes, looks like I got it... I can't find SYN_REPLY for 31 stream in 16ff0 gist","date":"2011-12-05T15:59:36.814Z","type":"message"}
{"nick":"mmalecki","message":":)","date":"2011-12-05T16:00:01.877Z","type":"message"}
{"nick":"indutny","message":"mmalecki: but that's odd anyway","date":"2011-12-05T16:00:22.422Z","type":"message"}
{"nick":"indutny","message":":)","date":"2011-12-05T16:00:23.345Z","type":"message"}
{"nick":"mmalecki","message":"indutny: it's called programming, I think ;)","date":"2011-12-05T16:00:51.367Z","type":"message"}
{"nick":"indutny","message":"mmalecki: yeah","date":"2011-12-05T16:01:13.286Z","type":"message"}
{"nick":"indutny","message":"mmalecki: actually, no, but that often happens","date":"2011-12-05T16:01:24.346Z","type":"message"}
{"nick":"mmalecki","message":"it'd be boring if it wouldn't happen!","date":"2011-12-05T16:02:03.009Z","type":"message"}
{"nick":"CIA-111","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307v0.6\u000f * r\u00020db3274\u000f \u000310\u000f/ src/unix/stream.c \u0002:\u000f ","date":"2011-12-05T16:03:07.383Z","type":"message"}
{"nick":"CIA-111","message":"\u0002libuv:\u000f unix: check UV_CLOSING flag in uv__write()","date":"2011-12-05T16:03:07.541Z","type":"message"}
{"nick":"CIA-111","message":"\u0002libuv:\u000f uv__write() runs after the read callbacks have fired. Said callbacks may have","date":"2011-12-05T16:03:07.542Z","type":"message"}
{"nick":"CIA-111","message":"\u0002libuv:\u000f closed the handle, handle that graciously. - http://git.io/xIYovQ","date":"2011-12-05T16:03:07.542Z","type":"message"}
{"nick":"indutny","message":"mmalecki: intersting is that it almost works in firefox nightly","date":"2011-12-05T16:09:40.849Z","type":"message"}
{"nick":"mmalecki","message":"indutny: have you tried chrome dev?","date":"2011-12-05T16:10:04.587Z","type":"message"}
{"nick":"indutny","message":"mmalecki: nope, going to","date":"2011-12-05T16:12:16.842Z","type":"message"}
{"nick":"indutny","message":"mmalecki: do you have canary installed?","date":"2011-12-05T16:12:24.573Z","type":"message"}
{"nick":"mmalecki","message":"indutny: no, 17.0.942.0 dev","date":"2011-12-05T16:12:38.933Z","type":"message"}
{"nick":"indutny","message":"mmalecki: does it works on it?","date":"2011-12-05T16:13:57.384Z","type":"message"}
{"nick":"mmalecki","message":"indutny: kinda-ish","date":"2011-12-05T16:14:09.200Z","type":"message"}
{"nick":"indutny","message":"mmalecki: btw, those resets has type=\"Cancel\"","date":"2011-12-05T16:14:12.236Z","type":"message"}
{"nick":"mmalecki","message":"indutny: it updates things sometimes","date":"2011-12-05T16:14:15.752Z","type":"message"}
{"nick":"indutny","message":"mmalecki: that means that they was canceled by browser w/o errors from server","date":"2011-12-05T16:14:30.115Z","type":"message"}
{"nick":"indutny","message":"mmalecki: not good","date":"2011-12-05T16:14:41.855Z","type":"message"}
{"nick":"mmalecki","message":"indutny: what does it mean? malformed response?","date":"2011-12-05T16:17:47.142Z","type":"message"}
{"nick":"indutny","message":"mmalecki: nope, just canceled reques :)","date":"2011-12-05T16:20:36.322Z","type":"message"}
{"nick":"indutny","message":"request :)","date":"2011-12-05T16:20:42.589Z","type":"message"}
{"nick":"mmalecki","message":"indutny: I fucked up? sorry, let me repeat it","date":"2011-12-05T16:24:40.614Z","type":"message"}
{"nick":"kuebk","reason":"Quit: Leaving.","date":"2011-12-05T16:28:20.190Z","type":"quit"}
{"nick":"indutny","message":"mmalecki: np, looks like I found the case","date":"2011-12-05T16:28:46.322Z","type":"message"}
{"nick":"indutny","message":"mmalecki: I'm able to reproduce it with one hanging connection","date":"2011-12-05T16:28:56.035Z","type":"message"}
{"nick":"isaacs","date":"2011-12-05T16:29:27.232Z","type":"join"}
{"nick":"sh1mmer","date":"2011-12-05T16:29:37.016Z","type":"join"}
{"nick":"mmalecki","message":"indutny: ah, ok","date":"2011-12-05T16:29:52.162Z","type":"message"}
{"nick":"indutny","message":"mmalecki: thanks a lot","date":"2011-12-05T16:31:11.335Z","type":"message"}
{"nick":"sh1mmer","reason":"Client Quit","date":"2011-12-05T16:31:46.641Z","type":"quit"}
{"nick":"mmalecki","message":"indutny: :)","date":"2011-12-05T16:32:18.880Z","type":"message"}
{"nick":"erickt","reason":"Quit: erickt","date":"2011-12-05T16:44:11.616Z","type":"quit"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-12-05T16:53:39.159Z","type":"quit"}
{"nick":"ryah","message":"yo","date":"2011-12-05T17:22:17.497Z","type":"message"}
{"nick":"piscisaureus____","message":"oy","date":"2011-12-05T17:22:48.925Z","type":"message"}
{"nick":"piscisaureus____","new_nick":"piscisaureus","date":"2011-12-05T17:22:55.356Z","type":"nick"}
{"nick":"ryah","message":"how's it going?","date":"2011-12-05T17:23:31.316Z","type":"message"}
{"nick":"piscisaureus","message":"thanks. how are you?","date":"2011-12-05T17:23:46.434Z","type":"message"}
{"nick":"ryah","message":":)","date":"2011-12-05T17:24:18.366Z","type":"message"}
{"nick":"dap","date":"2011-12-05T17:27:13.368Z","type":"join"}
{"nick":"indutny","message":"isaacs: where are you ? :(","date":"2011-12-05T17:28:11.958Z","type":"message"}
{"nick":"mmalecki","message":"isaacs is Scooby Doo ;)","date":"2011-12-05T17:29:47.799Z","type":"message"}
{"nick":"indutny","message":"yay 100 pull requests for node","date":"2011-12-05T17:40:50.241Z","type":"message"}
{"nick":"mmalecki","message":"wow! nice!","date":"2011-12-05T17:41:06.744Z","type":"message"}
{"nick":"mmalecki","message":"indutny: and 91 commits :) http://github-high-scores.heroku.com/joyent/node/high_scores/","date":"2011-12-05T17:42:20.861Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: any ideas about mjr's bug?","date":"2011-12-05T17:42:22.947Z","type":"message"}
{"nick":"piscisaureus","message":"shit bnoordhuis took the second position","date":"2011-12-05T17:42:49.470Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: i'm going to pour over the source today and see if anything seems off","date":"2011-12-05T17:42:55.751Z","type":"message"}
{"nick":"Nohryb","date":"2011-12-05T17:43:15.624Z","type":"join"}
{"nick":"mmalecki","message":"2 more commits and I'll be better than mikeal, nice","date":"2011-12-05T17:43:27.907Z","type":"message"}
{"nick":"isaacs","date":"2011-12-05T17:44:34.902Z","type":"join"}
{"nick":"Nohryb","reason":"Quit: Nohryb","date":"2011-12-05T17:51:37.181Z","type":"quit"}
{"nick":"piscisaureus","message":"I had an idea for igor's problem today","date":"2011-12-05T17:56:18.529Z","type":"message"}
{"nick":"piscisaureus","message":"we just need to leverage readv for sockets","date":"2011-12-05T17:56:32.160Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-05T17:58:27.362Z","type":"quit"}
{"nick":"indutny","message":"isaacs: ohh, yt man!","date":"2011-12-05T18:05:43.317Z","type":"message"}
{"nick":"indutny","message":"hi!","date":"2011-12-05T18:05:44.925Z","type":"message"}
{"nick":"isaacs","message":"hi","date":"2011-12-05T18:05:50.265Z","type":"message"}
{"nick":"indutny","message":"isaacs: zlib zlib zlib! :)","date":"2011-12-05T18:05:59.162Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: and travis :)","date":"2011-12-05T18:07:04.673Z","type":"message"}
{"nick":"mikeal","date":"2011-12-05T18:11:33.421Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 240 seconds","date":"2011-12-05T18:13:09.293Z","type":"quit"}
{"nick":"sh1mmer","date":"2011-12-05T18:13:26.547Z","type":"join"}
{"nick":"erickt","date":"2011-12-05T18:17:18.084Z","type":"join"}
{"nick":"bnoordhuis","message":"ryah: did some tests and some poking, nothing obvious","date":"2011-12-05T18:23:36.894Z","type":"message"}
{"nick":"bnoordhuis","message":"also, mjr noted that it sometimes takes 20 minutes to show up which is odd","date":"2011-12-05T18:24:05.788Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: i wonder if it only happens after seeing a message with long headers","date":"2011-12-05T18:25:46.576Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: hmm, maybe - i'll test that","date":"2011-12-05T18:28:45.813Z","type":"message"}
{"nick":"bnoordhuis","message":"test/simple/test-http-parser.js has a long header test but that doesn't show anything","date":"2011-12-05T18:29:03.835Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-05T18:33:44.173Z","type":"quit"}
{"nick":"ryah","message":"bnoordhuis: can we talk after the scrum call regarding isolates - i want to get some tasks from you to work on","date":"2011-12-05T18:34:51.674Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: sure","date":"2011-12-05T18:35:00.963Z","type":"message"}
{"nick":"ryah","message":"thanks","date":"2011-12-05T18:35:08.977Z","type":"message"}
{"nick":"brson","date":"2011-12-05T18:36:18.384Z","type":"join"}
{"nick":"isaacs","message":"what's the correct incantation to let the event loop die after opening stdin?","date":"2011-12-05T18:48:27.183Z","type":"message"}
{"nick":"isaacs","message":"stdin.pause() doesn't release it","date":"2011-12-05T18:48:32.406Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: stdin.destroy()","date":"2011-12-05T18:49:00.086Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: but that's actually a bug.","date":"2011-12-05T18:49:04.954Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: that works.  but, doesn't that mean it can't ever be opened again?","date":"2011-12-05T18:49:35.885Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: https://github.com/joyent/node/issues/2257","date":"2011-12-05T18:49:57.056Z","type":"message"}
{"nick":"isaacs","message":"like, i want to be able to read n things, and when i have no more to read, let the program die naturally","date":"2011-12-05T18:50:08.891Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: I think it does. that's why it's a bug","date":"2011-12-05T18:50:13.971Z","type":"message"}
{"nick":"ryah","message":"isaacs: how will you know there is nothing more to read?","date":"2011-12-05T18:50:54.544Z","type":"message"}
{"nick":"ryah","message":"the user needs to EOF stdin","date":"2011-12-05T18:51:03.318Z","type":"message"}
{"nick":"ryah","message":"s/user/caller/","date":"2011-12-05T18:51:09.356Z","type":"message"}
{"nick":"ryah","message":"when stdin is EOFed it will decrement the event loop counter","date":"2011-12-05T18:51:36.137Z","type":"message"}
{"nick":"isaacs","message":"ryah: well, let's say you have a shell script or something, you need to read username, read password, do some stuff, maybe read email address, or not.","date":"2011-12-05T18:52:00.922Z","type":"message"}
{"nick":"isaacs","message":"ryah: the way it worked in 0.4, if stdin is paused, it's not blocking the loop","date":"2011-12-05T18:52:13.356Z","type":"message"}
{"nick":"isaacs","message":"so you could just stdin.resume(), get some data, then stdin.pause() and remove your listeners.","date":"2011-12-05T18:52:44.957Z","type":"message"}
{"nick":"isaacs","message":"and maybe some other part of the program might need to read more","date":"2011-12-05T18:52:51.403Z","type":"message"}
{"nick":"isaacs","message":"the issue is that you might have a program with parts that read from stdin one at a time, and don't necessarily know about one another","date":"2011-12-05T18:53:06.908Z","type":"message"}
{"nick":"mmalecki","message":"that's how all prompt modules do it. this bug breaks them hard.","date":"2011-12-05T18:53:21.792Z","type":"message"}
{"nick":"bnoordhuis","message":"we should ref stdin when resumed, unref it when paused","date":"2011-12-05T18:53:25.517Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis++ ^","date":"2011-12-05T18:53:35.633Z","type":"message"}
{"nick":"isaacs","message":"that's how it should work.","date":"2011-12-05T18:53:41.101Z","type":"message"}
{"nick":"isaacs","message":"the issue is that, if you .destroy() it, or get EOF on it, then you can't open it again.","date":"2011-12-05T18:55:39.192Z","type":"message"}
{"nick":"ryah","message":"i'd be fine with that","date":"2011-12-05T18:57:23.754Z","type":"message"}
{"nick":"bnoordhuis","message":"call?","date":"2011-12-05T18:58:44.240Z","type":"message"}
{"nick":"ryah","message":"yep","date":"2011-12-05T18:58:57.971Z","type":"message"}
{"nick":"igorzi","message":"yep","date":"2011-12-05T18:59:00.455Z","type":"message"}
{"nick":"isaacs","message":"skype or phone?","date":"2011-12-05T18:59:26.915Z","type":"message"}
{"nick":"bnoordhuis","message":"skype","date":"2011-12-05T18:59:30.368Z","type":"message"}
{"nick":"ryah","message":"i'll start it","date":"2011-12-05T18:59:35.220Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: call?","date":"2011-12-05T19:00:32.858Z","type":"message"}
{"nick":"bnoordhuis","message":"https://github.com/joyent/node/issues/2254","date":"2011-12-05T19:04:54.843Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: yeah","date":"2011-12-05T19:06:56.451Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: add me","date":"2011-12-05T19:07:26.486Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: aah","date":"2011-12-05T19:08:03.220Z","type":"message"}
{"nick":"piscisaureus","message":"I feel left out","date":"2011-12-05T19:08:08.074Z","type":"message"}
{"nick":"piscisaureus","message":";-(","date":"2011-12-05T19:08:10.537Z","type":"message"}
{"nick":"mjr_","date":"2011-12-05T19:09:11.735Z","type":"join"}
{"nick":"ryah","message":"bnoordhuis: how much longer are you online today?","date":"2011-12-05T19:14:49.698Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: the next hour or so?","date":"2011-12-05T19:15:04.356Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: okay - let's call in like 30 minutes","date":"2011-12-05T19:15:17.711Z","type":"message"}
{"nick":"bnoordhuis","message":"cool","date":"2011-12-05T19:15:20.850Z","type":"message"}
{"nick":"CIA-111","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307v0.6\u000f * r\u00021a89c8d\u000f \u000310\u000f/ doc/template.html \u0002:\u000f Add analytics tracking to docs - http://git.io/M2GG9w","date":"2011-12-05T19:18:34.683Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: something like that? https://gist.github.com/9b9491838fb2c30b68ea","date":"2011-12-05T19:19:50.378Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: yes.","date":"2011-12-05T19:20:38.518Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: okay, because that test works for me","date":"2011-12-05T19:20:48.165Z","type":"message"}
{"nick":"bnoordhuis","message":"which is good, i suppose","date":"2011-12-05T19:20:55.329Z","type":"message"}
{"nick":"isaacs","message":"oh really?  weird.","date":"2011-12-05T19:21:02.951Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: yeah, it works for me as well.","date":"2011-12-05T19:21:47.329Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: oh, maybe it was that you can't pass in [0,1,2] to take over the shell","date":"2011-12-05T19:22:32.255Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: \"we should ref stdin when resumed, unref it when paused\" <-- you're talking about the TTY.unref function?  I don't see any corresponding TTY.ref method.","date":"2011-12-05T19:26:11.725Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: yes and yes","date":"2011-12-05T19:26:45.498Z","type":"message"}
{"nick":"bnoordhuis","message":"(second yes as in \"yes, it's not there\")","date":"2011-12-05T19:27:03.657Z","type":"message"}
{"nick":"pietern","date":"2011-12-05T19:29:02.220Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: i see.  it looks like uv_ref is being called n HandleWrap::Close","date":"2011-12-05T19:30:58.224Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: so, you're suggesting just add another HandleWrap::Ref that calls that?  like the inverse of HandleWrap::Unref?","date":"2011-12-05T19:31:18.090Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: not quite - i think the current approach needs some reworking","date":"2011-12-05T19:32:49.807Z","type":"message"}
{"nick":"isaacs","message":"i see","date":"2011-12-05T19:32:58.317Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: re uv tests broken by indutny's patch, test-tty is broken, it timeouts","date":"2011-12-05T19:33:01.498Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: src/node.js, function createWritableStdioStream()","date":"2011-12-05T19:33:23.996Z","type":"message"}
{"nick":"indutny","message":"mmalecki: bnoordhuis: have we applied my patch?","date":"2011-12-05T19:33:33.906Z","type":"message"}
{"nick":"mmalecki","message":"indutny: no, I'm trying to justify applying it","date":"2011-12-05T19:33:58.491Z","type":"message"}
{"nick":"indutny","message":"I thought it was superficial","date":"2011-12-05T19:34:05.115Z","type":"message"}
{"nick":"indutny","message":"mmalecki: yep, it's not so simple","date":"2011-12-05T19:34:14.603Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: it creates the stream based on what type of fd stdin/stdout is","date":"2011-12-05T19:34:16.736Z","type":"message"}
{"nick":"bnoordhuis","message":"ttys and pipes are unref'd unconditionally - that should probably change","date":"2011-12-05T19:34:30.267Z","type":"message"}
{"nick":"mmalecki","message":"indutny: breaks uv's test-tty","date":"2011-12-05T19:34:31.041Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i see.  so we unref it manually, just to keep `process.stdin` access from opening stdin and keeping the process alive.","date":"2011-12-05T19:34:34.765Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: so, it looks like we should unref it on pause, and ref it on resume.","date":"2011-12-05T19:34:55.789Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: yes","date":"2011-12-05T19:34:59.796Z","type":"message"}
{"nick":"mmalecki","message":"indutny: but I guess it's what isaacs and bnoordhuis are talking about now ;)","date":"2011-12-05T19:35:00.641Z","type":"message"}
{"nick":"isaacs","message":"i think that's doable pretty easily, then","date":"2011-12-05T19:35:03.525Z","type":"message"}
{"nick":"isaacs","message":"lemme try it.  thanks.","date":"2011-12-05T19:35:09.606Z","type":"message"}
{"nick":"indutny","message":"isaacs: but seems to be a bug anyway :)","date":"2011-12-05T19:35:12.835Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: well, more generally, i'm kind of sick of having to have npm call process.exit() manually","date":"2011-12-05T19:35:35.238Z","type":"message"}
{"nick":"isaacs","message":"even on success","date":"2011-12-05T19:35:38.082Z","type":"message"}
{"nick":"Nohryb","date":"2011-12-05T19:35:46.782Z","type":"join"}
{"nick":"indutny","message":"+1","date":"2011-12-05T19:35:50.273Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: I know. that's what we do in our cli tool, but I hate it.","date":"2011-12-05T19:36:02.027Z","type":"message"}
{"nick":"isaacs","message":"and i want to abstract out a nice little read(1) type prompt thing, but it keeps the process open if you ever do anything with stdin","date":"2011-12-05T19:36:03.796Z","type":"message"}
{"nick":"indutny","message":"I'm managing a lot of cli apps","date":"2011-12-05T19:36:05.333Z","type":"message"}
{"nick":"isaacs","message":"and that's dumb.","date":"2011-12-05T19:36:11.751Z","type":"message"}
{"nick":"mmalecki","message":"yeah","date":"2011-12-05T19:36:22.276Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: so, it looks like, if we want to have this for pipes as well, it needs tobe in lib/net.js, not in lib/tty.js","date":"2011-12-05T19:37:08.732Z","type":"message"}
{"nick":"Marak","date":"2011-12-05T19:37:17.483Z","type":"join"}
{"nick":"bnoordhuis","message":"isaacs: yes, possibly","date":"2011-12-05T19:39:08.946Z","type":"message"}
{"nick":"bnoordhuis","message":"at any rate, both tty and pipe wrap classes need to export ref and unref methods to js land","date":"2011-12-05T19:39:30.632Z","type":"message"}
{"nick":"isaacs","message":"sure.","date":"2011-12-05T19:39:41.272Z","type":"message"}
{"nick":"isaacs","message":"seems like we could just Ref in ReadStart and unref in ReadStop","date":"2011-12-05T19:39:53.655Z","type":"message"}
{"nick":"indutny","message":"btw, are you guys going to document timers?","date":"2011-12-05T19:40:46.537Z","type":"message"}
{"nick":"isaacs","message":"i guess we don't need to ref and unref for tcp wraps","date":"2011-12-05T19:40:53.212Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: for tty_wrap.cc that's probably true, not 100% sure about pipes","date":"2011-12-05T19:41:14.948Z","type":"message"}
{"nick":"isaacs","message":"k","date":"2011-12-05T19:41:37.132Z","type":"message"}
{"nick":"bnoordhuis","message":"or rather, regular pipes should keep the event loop alive","date":"2011-12-05T19:41:48.237Z","type":"message"}
{"nick":"mikeal","date":"2011-12-05T19:43:17.259Z","type":"join"}
{"nick":"mmalecki","message":"won't it render stdin.resume() and pause() redundant?","date":"2011-12-05T19:45:13.029Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: wait, process won't terminate until piping is finished?","date":"2011-12-05T19:45:18.634Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: ?","date":"2011-12-05T19:45:28.898Z","type":"message"}
{"nick":"Nohryb","reason":"Quit: Nohryb","date":"2011-12-05T19:45:44.312Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: about ref&unrefing pipes","date":"2011-12-05T19:45:49.472Z","type":"message"}
{"nick":"indutny","message":"looks like I missed point","date":"2011-12-05T19:46:21.628Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: yes :)","date":"2011-12-05T19:46:26.127Z","type":"message"}
{"nick":"indutny","message":":)","date":"2011-12-05T19:46:30.253Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: \"regular pipes should keep the event loop alive\"","date":"2011-12-05T19:46:47.217Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: what is regular pipes?","date":"2011-12-05T19:46:54.532Z","type":"message"}
{"nick":"indutny","message":"in this context","date":"2011-12-05T19:46:58.492Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: e.g. the unix socket you're connected with to your db","date":"2011-12-05T19:47:19.230Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: re test-tty, can you be a little more specific?","date":"2011-12-05T19:47:27.782Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: no, it'll render them much less redundant.","date":"2011-12-05T19:47:57.500Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ah, that pipes :)","date":"2011-12-05T19:48:11.128Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: since stdin.pause() will be how you say \"Ok, i'm done reading from stdin now\"","date":"2011-12-05T19:48:16.112Z","type":"message"}
{"nick":"indutny","message":"isaacs: at least it'll behave like 0.4.x and 0.5.x","date":"2011-12-05T19:48:41.691Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: ah, makes sense.","date":"2011-12-05T19:48:52.020Z","type":"message"}
{"nick":"indutny","message":":)","date":"2011-12-05T19:48:55.404Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: just like 0.4","date":"2011-12-05T19:48:59.607Z","type":"message"}
{"nick":"isaacs","message":"i mean, \"resume\" to start, and pause to end, is a bit odd.","date":"2011-12-05T19:49:12.383Z","type":"message"}
{"nick":"isaacs","message":"we can probably make those like \"open\" and \"close\" or something better, i don't really care. as long as it's *possible* to do the right thing, that's all that matters really.","date":"2011-12-05T19:49:42.708Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: I merged indutny's patch and now test-tty timeouts. I think it's the only test which shouldn't fail. but I guess it doesn't matter now.","date":"2011-12-05T19:50:41.456Z","type":"message"}
{"nick":"indutny","message":"mmalecki: it's just not refing tty's on initialization","date":"2011-12-05T19:52:44.629Z","type":"message"}
{"nick":"mmalecki","message":"indutny: that might be it, I haven't investigated it yet","date":"2011-12-05T19:53:09.122Z","type":"message"}
{"nick":"isaacs","message":"igorzi: maybe you know this… how hard would it be to get the msi to support updating, rather than making the user manually uninstall it to get the new version?","date":"2011-12-05T19:55:07.005Z","type":"message"}
{"nick":"isaacs","message":"igorzi: it'd be super awesome if we could even just push updates","date":"2011-12-05T19:55:14.898Z","type":"message"}
{"nick":"benvie","message":"chrome style","date":"2011-12-05T19:55:36.712Z","type":"message"}
{"nick":"benvie","message":"ninja update","date":"2011-12-05T19:55:43.588Z","type":"message"}
{"nick":"indexzero","date":"2011-12-05T19:55:51.373Z","type":"join"}
{"nick":"mmalecki","message":"benvie: most interesting thing there is the algorithm","date":"2011-12-05T19:56:18.096Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I have to go soon. You want to talk now?","date":"2011-12-05T19:56:32.939Z","type":"message"}
{"nick":"indutny","message":"mmalecki: yeah, chrome is using cool binary diff","date":"2011-12-05T19:56:44.374Z","type":"message"}
{"nick":"igorzi","message":"isaacs: yeah, it should be pretty trivial to do what's called a major update, which is when the new msi just uninstalls the old one if it detects that it's installed","date":"2011-12-05T19:57:36.745Z","type":"message"}
{"nick":"isaacs","message":"igorzi: yeah, it's jsut that havingi to go to control panel: add/remove software, find \"nodejs\" in the list, it's a pain","date":"2011-12-05T19:58:14.298Z","type":"message"}
{"nick":"igorzi","message":"isaacs: or do you mean updating without installing new version of node?","date":"2011-12-05T19:58:15.094Z","type":"message"}
{"nick":"isaacs","message":"igorzi: it could be an uninstall and reinstall, that's fine","date":"2011-12-05T19:58:30.982Z","type":"message"}
{"nick":"isaacs","message":"super doubleplusgood if we can hook into the windows update thingie, though","date":"2011-12-05T19:58:48.568Z","type":"message"}
{"nick":"igorzi","message":"i'll get the update to work for the next release.. i think there's an issue for it?","date":"2011-12-05T19:59:42.682Z","type":"message"}
{"nick":"Nohryb","date":"2011-12-05T20:06:58.083Z","type":"join"}
{"nick":"indutny","message":"isaacs: patch is ready :)","date":"2011-12-05T20:09:29.212Z","type":"message"}
{"nick":"indutny","message":"uploading :D","date":"2011-12-05T20:09:32.155Z","type":"message"}
{"nick":"indutny","message":"isaacs: https://github.com/joyent/node/pull/2276","date":"2011-12-05T20:11:54.936Z","type":"message"}
{"nick":"indutny","message":"running tests","date":"2011-12-05T20:12:02.985Z","type":"message"}
{"nick":"Nohryb","reason":"Read error: Connection reset by peer","date":"2011-12-05T20:12:14.844Z","type":"quit"}
{"nick":"indutny","message":"tests are passing","date":"2011-12-05T20:13:09.290Z","type":"message"}
{"nick":"isaacs","message":"ryah, bnoordhuis: hm… i'm a bit confused about hte significance of the \"wrap->unref\" var.  it looks like it's a boolean saying whether or not the thing needs to be unrefed, and true means we don't have a reference to it...?","date":"2011-12-05T20:14:09.252Z","type":"message"}
{"nick":"isaacs","action":"is confused easily by double negatives","date":"2011-12-05T20:14:26.808Z","type":"action"}
{"nick":"indutny","message":"isaacs: unref => unreferenced","date":"2011-12-05T20:15:04.139Z","type":"message"}
{"nick":"indutny","message":"but it's really confusing","date":"2011-12-05T20:15:28.657Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: ^ what indutny said and yes, confusing","date":"2011-12-05T20:15:40.438Z","type":"message"}
{"nick":"isaacs","message":"yeah.","date":"2011-12-05T20:15:42.504Z","type":"message"}
{"nick":"isaacs","message":"\"foo->X is true if not Y\" <-- antipattern","date":"2011-12-05T20:16:06.451Z","type":"message"}
{"nick":"isaacs","message":"even worse:  foo->notX is true if not X","date":"2011-12-05T20:16:31.743Z","type":"message"}
{"nick":"indutny","message":"hehe","date":"2011-12-05T20:16:58.312Z","type":"message"}
{"nick":"indutny","message":"should I fix that in PR?","date":"2011-12-05T20:17:05.766Z","type":"message"}
{"nick":"isaacs","message":"indutny: nono, i'm digging into this stdin pause/resume thing","date":"2011-12-05T20:17:21.725Z","type":"message"}
{"nick":"indutny","message":"ok, seems to be working for me","date":"2011-12-05T20:17:33.139Z","type":"message"}
{"nick":"indutny","message":"isaacs: https://spdy2.indutny.com/ <- this site runs with my zlib patch support ;)","date":"2011-12-05T20:18:30.600Z","type":"message"}
{"nick":"isaacs","message":"indutny: nice","date":"2011-12-05T20:18:51.264Z","type":"message"}
{"nick":"indutny","action":"is going to sleep","date":"2011-12-05T20:21:24.047Z","type":"action"}
{"nick":"indutny","message":"ttyl!","date":"2011-12-05T20:21:25.898Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: sleep tight","date":"2011-12-05T20:23:20.740Z","type":"message"}
{"nick":"mmalecki","message":"indutny: night","date":"2011-12-05T20:23:29.616Z","type":"message"}
{"nick":"isaacs","reason":"Ping timeout: 248 seconds","date":"2011-12-05T20:27:03.979Z","type":"quit"}
{"nick":"mjr_","message":"Hey guys, I made some progress on our men leak issue with 0.6","date":"2011-12-05T20:29:10.522Z","type":"message"}
{"nick":"piscisaureus","reason":"Ping timeout: 245 seconds","date":"2011-12-05T20:29:12.645Z","type":"quit"}
{"nick":"mjr_","message":"It seems related to aborting http client connections that are still waiting for a socket.","date":"2011-12-05T20:29:38.232Z","type":"message"}
{"nick":"mjr_","message":"Still trying to figure out how to reliably reproduce it.","date":"2011-12-05T20:29:59.941Z","type":"message"}
{"nick":"einaros","message":"do you have an app or scenario which loosely reproduces it?","date":"2011-12-05T20:30:53.391Z","type":"message"}
{"nick":"mjr_","message":"Oh yes.","date":"2011-12-05T20:31:11.047Z","type":"message"}
{"nick":"mjr_","message":"We have probably the busiest node app out there right now, and upgrading to 0.6 was a mixed blessing.","date":"2011-12-05T20:31:32.258Z","type":"message"}
{"nick":"mjr_","message":"Basically, http server gets some incoming connections, and we need to make multiple outgoing http connections to various backend services to handle this request.  If one of those backendn components is slow, the incoming client gives up.","date":"2011-12-05T20:32:43.482Z","type":"message"}
{"nick":"mjr_","message":"So we abort all of the outgoing requests that we made on behalf of this client, and some of them seem to not get cleaned up.","date":"2011-12-05T20:33:08.758Z","type":"message"}
{"nick":"einaros","message":"and you're using plain http; no socket.io or similar?","date":"2011-12-05T20:33:11.103Z","type":"message"}
{"nick":"mjr_","message":"Plain HTTP.","date":"2011-12-05T20:33:16.363Z","type":"message"}
{"nick":"mjr_","message":"Also HTTPS, but I don't think that's the culprit here, for once.","date":"2011-12-05T20:33:37.668Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: sounds plausible","date":"2011-12-05T20:36:13.478Z","type":"message"}
{"nick":"bnoordhuis","message":"do you set req.connection.setTimeout()?","date":"2011-12-05T20:36:27.331Z","type":"message"}
{"nick":"mjr_","message":"just defaults","date":"2011-12-05T20:36:39.688Z","type":"message"}
{"nick":"bnoordhuis","message":"how do you abort the outgoing requests?","date":"2011-12-05T20:37:02.569Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: ^","date":"2011-12-05T20:38:00.958Z","type":"message"}
{"nick":"mjr_","message":"lemme check","date":"2011-12-05T20:38:06.430Z","type":"message"}
{"nick":"paddybyers","date":"2011-12-05T20:39:26.644Z","type":"join"}
{"nick":"bnoordhuis","action":"gets another cup of tea","date":"2011-12-05T20:39:38.138Z","type":"action"}
{"nick":"mjr_","message":"so we do: out_client = http.request();   in_client.on(\"abort\", function () { out_client.abort(); })","date":"2011-12-05T20:41:05.999Z","type":"message"}
{"nick":"mjr_","message":"basically","date":"2011-12-05T20:41:07.455Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: 'abort' or 'aborted'?","date":"2011-12-05T20:42:51.057Z","type":"message"}
{"nick":"mjr_","message":"    this.in_client.req.on(\"aborted\", function () {","date":"2011-12-05T21:05:13.574Z","type":"message"}
{"nick":"mjr_","message":"sorry, phone call","date":"2011-12-05T21:05:21.500Z","type":"message"}
{"nick":"isaacs","date":"2011-12-05T21:11:29.276Z","type":"join"}
{"nick":"bnoordhuis","message":"mjr_: what about the 'close' event? do you abort outstanding connections if 'close' is emitted?","date":"2011-12-05T21:13:22.608Z","type":"message"}
{"nick":"mjr_","message":"oh sure","date":"2011-12-05T21:13:32.790Z","type":"message"}
{"nick":"mjr_","message":"wait, no","date":"2011-12-05T21:13:45.628Z","type":"message"}
{"nick":"mjr_","message":"we listen for aborted, data, end, and drain on incoming http.","date":"2011-12-05T21:14:02.999Z","type":"message"}
{"nick":"mjr_","message":"All at the req level.","date":"2011-12-05T21:14:17.823Z","type":"message"}
{"nick":"mjr_","message":"We also do a lot of chunked uploads, if that's relevant.  I know it's somewhat uncommon.","date":"2011-12-05T21:14:55.184Z","type":"message"}
{"nick":"mjr_","message":"I haven't figured out if the leaking connections are uploads or not","date":"2011-12-05T21:15:27.264Z","type":"message"}
{"nick":"mjr_","message":"what I did figure out is that if we avoid the backlog, then we avoid this leak.  I obviously want to be able to recover from a backlog though.","date":"2011-12-05T21:16:27.154Z","type":"message"}
{"nick":"mjr_","message":"Could it be that if you abort an outgoing request before it has a socket assigned that this somehow gets orphaned?","date":"2011-12-05T21:16:52.460Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: no, it gets queued","date":"2011-12-05T21:17:05.300Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-05T21:17:07.643Z","type":"quit"}
{"nick":"bnoordhuis","message":"you should listen for close, it's what's emitted if the connection is prematurely terminated","date":"2011-12-05T21:17:29.985Z","type":"message"}
{"nick":"mjr_","message":"oh, not aborted?","date":"2011-12-05T21:17:37.950Z","type":"message"}
{"nick":"bnoordhuis","message":"well... that too, it kind of depends on the scenario","date":"2011-12-05T21:17:58.015Z","type":"message"}
{"nick":"mjr_","message":"Are there scenarios where we'd get a close on a request, but not an aborted?","date":"2011-12-05T21:18:22.170Z","type":"message"}
{"nick":"bnoordhuis","action":"double-checks http.js","date":"2011-12-05T21:18:44.858Z","type":"action"}
{"nick":"bnoordhuis","message":"mjr_: yes - timeout, for example","date":"2011-12-05T21:19:45.427Z","type":"message"}
{"nick":"mjr_","message":"oh really","date":"2011-12-05T21:19:54.519Z","type":"message"}
{"nick":"mjr_","message":"Well then","date":"2011-12-05T21:20:01.089Z","type":"message"}
{"nick":"mjr_","message":"So if an incoming chunked post gets a socket timeout, this emits close and not aborted?","date":"2011-12-05T21:20:31.950Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: yes - after two minutes by default","date":"2011-12-05T21:20:57.077Z","type":"message"}
{"nick":"mjr_","message":"oh, this is the node 2 minute idle timer thing, or the kernel returning ETIMEDOUT on read?","date":"2011-12-05T21:21:21.586Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: the former, the idle timer","date":"2011-12-05T21:21:48.793Z","type":"message"}
{"nick":"mjr_","message":"Hmm, I guess we leak those.","date":"2011-12-05T21:22:24.670Z","type":"message"}
{"nick":"mjr_","message":"But doesn't that timer get cleared after the first read?","date":"2011-12-05T21:22:36.982Z","type":"message"}
{"nick":"ryah","message":"it gets reset","date":"2011-12-05T21:22:50.964Z","type":"message"}
{"nick":"mjr_","message":"I thought that http.js cleared that timer after parsing the headers","date":"2011-12-05T21:23:15.520Z","type":"message"}
{"nick":"mjr_","message":"or something like that","date":"2011-12-05T21:23:17.727Z","type":"message"}
{"nick":"ryah","message":"the unspoken rule (cc isaacs) is that all streams *always* get 'close'","date":"2011-12-05T21:23:33.443Z","type":"message"}
{"nick":"ryah","message":"except zlib streams","date":"2011-12-05T21:23:38.606Z","type":"message"}
{"nick":"ryah","message":":)","date":"2011-12-05T21:23:42.003Z","type":"message"}
{"nick":"mikeal","date":"2011-12-05T21:23:57.303Z","type":"join"}
{"nick":"ryah","message":"mjr_: no, i don't think so","date":"2011-12-05T21:24:01.951Z","type":"message"}
{"nick":"mjr_","message":"OK, fair enough, I'll add a close listener.  Did this change in 0.6?","date":"2011-12-05T21:24:23.600Z","type":"message"}
{"nick":"bnoordhuis","message":"don't think so","date":"2011-12-05T21:24:32.863Z","type":"message"}
{"nick":"mjr_","message":"Trying to figure out why it might be different on 0.6.","date":"2011-12-05T21:24:33.914Z","type":"message"}
{"nick":"ryah","message":"i also don't think so","date":"2011-12-05T21:24:43.025Z","type":"message"}
{"nick":"ryah","message":"oh wait, yes this might have changed","date":"2011-12-05T21:25:49.375Z","type":"message"}
{"nick":"ryah","message":"mikeal: maybe you can weigh in on this","date":"2011-12-05T21:25:55.795Z","type":"message"}
{"nick":"ryah","message":"mikeal: is it possible that client http streams used to emit 'aborted' on timeout but now emit 'close' ?","date":"2011-12-05T21:26:37.476Z","type":"message"}
{"nick":"ryah","message":"oh wait - nevermind","date":"2011-12-05T21:28:22.662Z","type":"message"}
{"nick":"ryah","message":"this is server http streams","date":"2011-12-05T21:28:29.085Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2011-12-05T21:29:26.390Z","type":"quit"}
{"nick":"ryah","message":"mjr_: how did you determine that there are outbound client stream leaking?","date":"2011-12-05T21:29:28.323Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-05T21:29:40.975Z","type":"quit"}
{"nick":"mjr_","message":"so there weren't enough outgoing sockets, and I increased the number of outgoing sockets","date":"2011-12-05T21:29:56.835Z","type":"message"}
{"nick":"ryah","message":"(incidentally this is a situation that would be avoided by domains)","date":"2011-12-05T21:29:58.237Z","type":"message"}
{"nick":"mjr_","message":"And the memory didn't go away.","date":"2011-12-05T21:30:05.024Z","type":"message"}
{"nick":"mjr_","message":"Thankfully I had a REPL on everything","date":"2011-12-05T21:30:15.180Z","type":"message"}
{"nick":"mjr_","message":"So basically http client queues were getting behind, but they were still doing work, just not as fast as more work was being added.","date":"2011-12-05T21:30:37.652Z","type":"message"}
{"nick":"mjr_","message":"As the queues drained though, we didn't reclaim the memory.","date":"2011-12-05T21:30:59.019Z","type":"message"}
{"nick":"mjr_","message":"I ASSUME because clients were timing out and we aborted the outgoing requests for them.","date":"2011-12-05T21:31:09.625Z","type":"message"}
{"nick":"ryah","message":"so these outbound clients - do you think they're just timing out?","date":"2011-12-05T21:31:10.389Z","type":"message"}
{"nick":"mjr_","message":"They are talking to a server that's slow","date":"2011-12-05T21:31:20.089Z","type":"message"}
{"nick":"mjr_","message":"They are all grinding along, but doing like 2 req/sec instead of 200 req/sec, for example.","date":"2011-12-05T21:31:41.368Z","type":"message"}
{"nick":"ryah","message":"hm - will you be able to put the fix in that bnoordhuis suggested and let us know?","date":"2011-12-05T21:32:13.910Z","type":"message"}
{"nick":"mjr_","message":"So this backlog, it's obviously bad and we need to push this back pressure all the way down to our clients, which we will soon.","date":"2011-12-05T21:32:19.672Z","type":"message"}
{"nick":"mjr_","message":"But the real issue is that when the backlog clears, some memory was held open forever.","date":"2011-12-05T21:32:36.623Z","type":"message"}
{"nick":"mjr_","message":"Sure, I can add a close listener.","date":"2011-12-05T21:32:49.491Z","type":"message"}
{"nick":"mjr_","message":"To be fair, we are really an exceptionally heavy user of HTTP client, I would guess anyway.  I think yesterday we did around 4B client requests, but I had to turn off that metric because I can't track that many individual requests anymore.","date":"2011-12-05T21:34:33.882Z","type":"message"}
{"nick":"bnoordhuis","message":"that's a lot of requests","date":"2011-12-05T21:35:05.659Z","type":"message"}
{"nick":"ryah","message":"B","date":"2011-12-05T21:35:52.832Z","type":"message"}
{"nick":"mjr_","message":"Yeah, it's really a ton of node processes doing a ton of work.","date":"2011-12-05T21:36:02.042Z","type":"message"}
{"nick":"mjr_","message":"And it's only getting larger every day.","date":"2011-12-05T21:36:07.203Z","type":"message"}
{"nick":"ryah","message":"so do the outbound http start out at 200 req/sec","date":"2011-12-05T21:40:14.239Z","type":"message"}
{"nick":"ryah","message":"and then suddenly get slow?","date":"2011-12-05T21:40:18.704Z","type":"message"}
{"nick":"mjr_","message":"one of the servers gets slow, for various reasons.  Either its waiting for a database, it has a bug and is restarting, or something.","date":"2011-12-05T21:40:58.496Z","type":"message"}
{"nick":"mjr_","message":"This router/proxy app is otherwise doing great.","date":"2011-12-05T21:41:14.331Z","type":"message"}
{"nick":"mjr_","message":"But the destinations can't keep up.","date":"2011-12-05T21:41:25.978Z","type":"message"}
{"nick":"CIA-111","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307v0.6\u000f * r\u000236815e4\u000f \u000310\u000f/ (src/node.js test/simple/test-process-exit.js)\u0002:\u000f process: fix stack overflow when recursively calling process.exit() - http://git.io/eWAEEA","date":"2011-12-05T21:44:27.912Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2011-12-05T22:02:18.249Z","type":"quit"}
{"nick":"dap","date":"2011-12-05T22:03:43.350Z","type":"join"}
{"nick":"mraleph","date":"2011-12-05T22:07:21.403Z","type":"join"}
{"nick":"piscisaureus_","date":"2011-12-05T22:30:39.323Z","type":"join"}
{"nick":"Nohryb","date":"2011-12-05T22:43:47.580Z","type":"join"}
{"nick":"Nohryb","reason":"Client Quit","date":"2011-12-05T22:44:45.035Z","type":"quit"}
{"nick":"piscisaureus__","date":"2011-12-05T22:51:46.332Z","type":"join"}
{"nick":"piscisaureus_","reason":"*.net *.split","date":"2011-12-05T22:53:18.016Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2011-12-05T23:12:29.425Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2011-12-05T23:23:43.265Z","type":"quit"}
{"nick":"isaacs","message":"ryah: that rule is *extremely* unspoken.","date":"2011-12-05T23:39:42.453Z","type":"message"}
{"nick":"isaacs","message":"ryah: in fact, ti's so unspoken, it can hardly be said to really exist.","date":"2011-12-05T23:40:09.476Z","type":"message"}
{"nick":"dap","date":"2011-12-05T23:42:54.640Z","type":"join"}
