{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-01-30T00:00:01.212Z","type":"quit"}
{"nick":"ircretary","date":"2013-01-30T00:00:08.545Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-30T00:00:16.193Z","type":"quit"}
{"nick":"kazupon","date":"2013-01-30T00:03:13.435Z","type":"join"}
{"nick":"loladiro","date":"2013-01-30T00:06:38.747Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-01-30T00:06:40.844Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-01-30T00:07:39.257Z","type":"quit"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-01-30T00:17:50.174Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-30T00:17:52.928Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-30T00:18:31.118Z","type":"join"}
{"nick":"loladiro","date":"2013-01-30T00:19:51.138Z","type":"join"}
{"nick":"jmar777","reason":"Ping timeout: 248 seconds","date":"2013-01-30T00:22:59.906Z","type":"quit"}
{"nick":"isaacs","action":"fg","date":"2013-01-30T00:26:18.855Z","type":"action"}
{"nick":"isaacs","action":"cheeseburgered up","date":"2013-01-30T00:26:24.245Z","type":"action"}
{"nick":"jmar777","date":"2013-01-30T00:27:08.264Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: d'oh!  9bd9c546c87f29e12821de6c2e8bc7fa33903596 breaks the repl","date":"2013-01-30T00:29:24.423Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-01-30T00:32:45.239Z","type":"quit"}
{"nick":"isaacs","message":"TooTallNate: you around?","date":"2013-01-30T00:40:17.425Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: i am","date":"2013-01-30T00:40:31.389Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: i suggest we make \\r behave like \\n in readline, instead of like home","date":"2013-01-30T00:40:35.235Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: TTY inputs give us a \\r, not a \\n","date":"2013-01-30T00:40:50.105Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: because TTYs are jerks","date":"2013-01-30T00:40:59.235Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: i thought that was what we were already doing?","date":"2013-01-30T00:41:12.420Z","type":"message"}
{"nick":"isaacs","message":"no, actually, as of 9bd9c546c87f29e12821de6c2e8bc7fa33903596 we treat \\r like home","date":"2013-01-30T00:41:28.925Z","type":"message"}
{"nick":"isaacs","message":"but that's only what \\r means when it's *written*","date":"2013-01-30T00:41:35.145Z","type":"message"}
{"nick":"isaacs","message":"when you *read* \\r, it should behave like \\n","date":"2013-01-30T00:41:40.445Z","type":"message"}
{"nick":"isaacs","message":"the thing is, if you get \\r\\n, it should behave like a single \\n","date":"2013-01-30T00:41:49.825Z","type":"message"}
{"nick":"isaacs","message":"not like \\n\\n","date":"2013-01-30T00:41:53.419Z","type":"message"}
{"nick":"isaacs","message":"so, 9bd9c546c87f29e12821de6c2e8bc7fa33903596 is half right","date":"2013-01-30T00:42:01.925Z","type":"message"}
{"nick":"TooTallNate","message":"it seems like we need to do a little bookkeeping","date":"2013-01-30T00:42:23.055Z","type":"message"}
{"nick":"TooTallNate","message":"to keep track of if the previous char was \"\\r\"","date":"2013-01-30T00:42:32.376Z","type":"message"}
{"nick":"isaacs","message":"well, it just uses /\\r?\\n/ as the split instead of /\\n/","date":"2013-01-30T00:43:27.034Z","type":"message"}
{"nick":"isaacs","message":"in readline","date":"2013-01-30T00:43:29.734Z","type":"message"}
{"nick":"isaacs","message":"but yes, it could get a \\r and then later a \\n","date":"2013-01-30T00:43:36.303Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: that split part is for the \"normal\" readline though","date":"2013-01-30T00:43:51.818Z","type":"message"}
{"nick":"TooTallNate","message":"not TTY readline","date":"2013-01-30T00:43:54.870Z","type":"message"}
{"nick":"indexzero","date":"2013-01-30T00:46:00.685Z","type":"join"}
{"nick":"isaacs","message":"right","date":"2013-01-30T00:46:37.311Z","type":"message"}
{"nick":"isaacs","message":"what does TTY readline do?","date":"2013-01-30T00:46:40.341Z","type":"message"}
{"nick":"isaacs","message":"/[\\r\\n]/?","date":"2013-01-30T00:46:45.511Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: well this seems to fix it https://gist.github.com/f18ba69d227e103d822e","date":"2013-01-30T00:51:05.669Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: just to double check, benchmark/node_module/bench-timer is fine?","date":"2013-01-30T00:51:38.323Z","type":"message"}
{"nick":"trevnorris","message":"(s)","date":"2013-01-30T00:51:45.646Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: tty readline attempts to treat each \"char\" as it's own event","date":"2013-01-30T00:51:47.022Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: not really sure if that patch needs anything else…","date":"2013-01-30T00:52:18.175Z","type":"message"}
{"nick":"paddybyers","reason":"Ping timeout: 272 seconds","date":"2013-01-30T00:55:04.792Z","type":"quit"}
{"nick":"isaacs","message":"TooTallNate: yeah","date":"2013-01-30T00:56:07.435Z","type":"message"}
{"nick":"isaacs","message":"i think that's the appropriate intention","date":"2013-01-30T00:56:17.125Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: the double \"return\" bookkeeping would be good, but i don't think it would be common for that to happen","date":"2013-01-30T00:56:43.228Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: do you think that RL needs to track if it's seen a \\r at the eol, and if so, ignore a \\n at the start of the next?","date":"2013-01-30T00:56:50.255Z","type":"message"}
{"nick":"kristate","date":"2013-01-30T00:57:05.459Z","type":"join"}
{"nick":"isaacs","message":"TooTallNate: it wouldn't be hard to do","date":"2013-01-30T00:57:08.874Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: i do think it would be good","date":"2013-01-30T00:57:10.170Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: (and i'd already done exactly that same patch in your gist)","date":"2013-01-30T00:57:22.634Z","type":"message"}
{"nick":"isaacs","message":"k, one se","date":"2013-01-30T00:57:24.774Z","type":"message"}
{"nick":"TooTallNate","message":"hahaha","date":"2013-01-30T00:57:26.976Z","type":"message"}
{"nick":"isaacs","message":"*sec","date":"2013-01-30T00:57:27.204Z","type":"message"}
{"nick":"TooTallNate","message":":p","date":"2013-01-30T00:57:27.745Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: pull/4656 has the updated with bench-timer as an external lib","date":"2013-01-30T01:00:46.452Z","type":"message"}
{"nick":"kazupon","date":"2013-01-30T01:03:49.906Z","type":"join"}
{"nick":"AvianFlu","date":"2013-01-30T01:03:53.876Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: it'll probably take me a week or more to hammer out how `make bench` should work. so imho don't think this PR should wait for that.","date":"2013-01-30T01:05:08.042Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-30T01:05:59.208Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-30T01:07:27.522Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 272 seconds","date":"2013-01-30T01:09:00.868Z","type":"quit"}
{"nick":"isaacs","message":"TooTallNate: we don't have to do any bookkeeping for \\r.  we already buffer everything pu until we get a \\n, and since we split on \\r?\\n, it Just Works","date":"2013-01-30T01:21:25.294Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: hmmm… i think you're confusing the \"normal\" code with the TTY code again...","date":"2013-01-30T01:22:03.076Z","type":"message"}
{"nick":"isaacs","message":"oh, maybe","date":"2013-01-30T01:22:09.028Z","type":"message"}
{"nick":"isaacs","message":"ah,yes, indeed.","date":"2013-01-30T01:22:20.428Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-30T01:26:40.858Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-30T01:27:15.826Z","type":"join"}
{"nick":"jmar777","reason":"Ping timeout: 272 seconds","date":"2013-01-30T01:31:48.700Z","type":"quit"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-01-30T01:33:10.769Z","type":"quit"}
{"nick":"isaacs","message":"TooTallNate: so, you think it's reasonable for \\r to only be a relevant line ender in TTY mode?","date":"2013-01-30T01:35:15.350Z","type":"message"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2013-01-30T01:35:30.972Z","type":"quit"}
{"nick":"TooTallNate","message":"isaacs: you mean ignore \"enter\"?","date":"2013-01-30T01:35:49.830Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: no, i mean, foo\\rbar\\r is one \"line\" in non-tty mode","date":"2013-01-30T01:36:06.789Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: but in tty mode, that's \"foo\",\"bar\"","date":"2013-01-30T01:36:12.899Z","type":"message"}
{"nick":"TooTallNate","message":"oh i see","date":"2013-01-30T01:36:24.838Z","type":"message"}
{"nick":"TooTallNate","message":"well then yes","date":"2013-01-30T01:36:29.274Z","type":"message"}
{"nick":"isaacs","message":"otherwise the non-tty splitting code gets more convoluted","date":"2013-01-30T01:36:33.969Z","type":"message"}
{"nick":"TooTallNate","message":"i'd think those would be 2 \"line\" events","date":"2013-01-30T01:36:41.232Z","type":"message"}
{"nick":"TooTallNate","message":"and we should be consistent","date":"2013-01-30T01:36:44.381Z","type":"message"}
{"nick":"isaacs","message":"and right now, it's nicely simple.","date":"2013-01-30T01:36:46.029Z","type":"message"}
{"nick":"isaacs","message":"ugh","date":"2013-01-30T01:36:47.049Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2013-01-30T01:36:47.829Z","type":"message"}
{"nick":"TooTallNate","message":"between the 2 modes","date":"2013-01-30T01:36:48.850Z","type":"message"}
{"nick":"abraxas","date":"2013-01-30T01:37:34.301Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-30T01:38:30.133Z","type":"quit"}
{"nick":"isaacs","message":"got a fix","date":"2013-01-30T01:51:17.199Z","type":"message"}
{"nick":"isaacs","message":"it's not so bad","date":"2013-01-30T01:51:24.459Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: https://github.com/joyent/node/pull/4683","date":"2013-01-30T01:52:18.139Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: the capital T in the commit message is bugging me a tiny bit :p","date":"2013-01-30T01:52:48.632Z","type":"message"}
{"nick":"TooTallNate","action":"</ocd>","date":"2013-01-30T01:52:54.794Z","type":"action"}
{"nick":"isaacs","message":"hahah","date":"2013-01-30T01:53:06.238Z","type":"message"}
{"nick":"isaacs","message":"fixed","date":"2013-01-30T01:53:20.738Z","type":"message"}
{"nick":"TooTallNate","message":"very nice","date":"2013-01-30T01:56:27.192Z","type":"message"}
{"nick":"isaacs","message":"thoughts on the actual content?","date":"2013-01-30T01:58:20.396Z","type":"message"}
{"nick":"TooTallNate","message":"trying it out now","date":"2013-01-30T02:01:00.845Z","type":"message"}
{"nick":"isaacs","message":"k","date":"2013-01-30T02:01:32.144Z","type":"message"}
{"nick":"TooTallNate","message":"damn, have to recompile from scratch","date":"2013-01-30T02:02:41.285Z","type":"message"}
{"nick":"TooTallNate","message":"since i blew away my tree trying to help that guy cross-compile for arm :p","date":"2013-01-30T02:02:54.372Z","type":"message"}
{"nick":"kazupon","date":"2013-01-30T02:04:30.289Z","type":"join"}
{"nick":"piscisaureus_","reason":"Read error: Connection reset by peer","date":"2013-01-30T02:05:10.929Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-01-30T02:05:36.949Z","type":"join"}
{"nick":"kazupon_","date":"2013-01-30T02:07:06.338Z","type":"join"}
{"nick":"kazupon_","reason":"Remote host closed the connection","date":"2013-01-30T02:07:34.443Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 264 seconds","date":"2013-01-30T02:09:42.154Z","type":"quit"}
{"nick":"lohkey","date":"2013-01-30T02:14:03.796Z","type":"part"}
{"nick":"TooTallNate","message":"isaacs: lgtm - pushing","date":"2013-01-30T02:15:14.304Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u000260f18ed\u0002 : readline: treat bare \\r as a line ending  Fixes #3305 - http://git.io/eXwLfw","date":"2013-01-30T02:21:50.865Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: thanks :)","date":"2013-01-30T02:23:58.010Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: so.. turns out crypto streams are still streams1","date":"2013-01-30T02:24:14.530Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: thanks for writing the patch :)","date":"2013-01-30T02:24:17.423Z","type":"message"}
{"nick":"TooTallNate","message":"ya i just saw that, haha","date":"2013-01-30T02:24:22.023Z","type":"message"}
{"nick":"isaacs","message":"ugh.","date":"2013-01-30T02:24:24.939Z","type":"message"}
{"nick":"isaacs","message":"v0.10 keeps pulling away from me.","date":"2013-01-30T02:24:31.239Z","type":"message"}
{"nick":"isaacs","message":"releasing a new stable version of node is so much more work than you think.","date":"2013-01-30T02:24:40.209Z","type":"message"}
{"nick":"isaacs","message":"even when you're right there, there's always like a million more little things","date":"2013-01-30T02:24:56.709Z","type":"message"}
{"nick":"isaacs","message":"exhausting","date":"2013-01-30T02:24:59.652Z","type":"message"}
{"nick":"indexzero","date":"2013-01-30T02:27:05.239Z","type":"join"}
{"nick":"TooTallNate","message":"agree'd","date":"2013-01-30T02:27:11.616Z","type":"message"}
{"nick":"TooTallNate","message":"there's lots of tiny little patches i want to get in","date":"2013-01-30T02:27:18.469Z","type":"message"}
{"nick":"wolfeidau","date":"2013-01-30T02:30:30.486Z","type":"join"}
{"nick":"c4milo","date":"2013-01-30T02:30:52.896Z","type":"join"}
{"nick":"jmar777","date":"2013-01-30T02:34:21.565Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-30T02:34:47.384Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-01-30T02:35:20.324Z","type":"join"}
{"nick":"isaacs","message":"it sucks to stumble onto something like this that i just plain forgot for so long.","date":"2013-01-30T02:35:29.132Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-01-30T02:35:29.965Z","type":"quit"}
{"nick":"isaacs","message":"the tiny patches are not so bad, they're just endless.","date":"2013-01-30T02:35:43.962Z","type":"message"}
{"nick":"isaacs","message":"but this is kind of important.","date":"2013-01-30T02:35:47.225Z","type":"message"}
{"nick":"isaacs","action":"feeling humble atm","date":"2013-01-30T02:35:51.742Z","type":"action"}
{"nick":"googol","date":"2013-01-30T02:36:34.150Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-30T02:36:34.652Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-01-30T02:40:50.854Z","type":"quit"}
{"nick":"piscisaureus_","message":"sblom not here?","date":"2013-01-30T02:42:36.727Z","type":"message"}
{"nick":"piscisaureus_","message":"I need someone to review https://github.com/joyent/libuv/pull/697 (indutny / bnoordhuis maybe?)","date":"2013-01-30T02:43:04.604Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: turns out that i forgot about CryptoStream","date":"2013-01-30T02:48:18.753Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: v0.10 will be a bit longer.","date":"2013-01-30T02:48:24.613Z","type":"message"}
{"nick":"piscisaureus_","message":"ouch","date":"2013-01-30T02:49:39.292Z","type":"message"}
{"nick":"piscisaureus_","message":"ok","date":"2013-01-30T02:49:39.794Z","type":"message"}
{"nick":"piscisaureus_","action":"signs off","date":"2013-01-30T02:49:45.379Z","type":"action"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-30T02:49:45.710Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-01-30T02:49:48.418Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-30T02:50:20.967Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-01-30T02:51:39.956Z","type":"join"}
{"nick":"piscisaureus_","message":"so who pinged sblom?","date":"2013-01-30T02:51:54.101Z","type":"message"}
{"nick":"piscisaureus_","message":"I WANT TO SEE FINGERS!","date":"2013-01-30T02:52:02.976Z","type":"message"}
{"nick":"LOUDBOT","message":"SKYRIM - NOT EVEN ONCE","date":"2013-01-30T02:52:03.327Z","type":"message"}
{"nick":"jmar777","reason":"Ping timeout: 272 seconds","date":"2013-01-30T02:55:24.753Z","type":"quit"}
{"nick":"c4milo","date":"2013-01-30T03:00:29.982Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-01-30T03:11:32.584Z","type":"quit"}
{"nick":"isaacs","message":"fuckit we should just release 0.10 with a streams1 cryptostream","date":"2013-01-30T03:12:51.418Z","type":"message"}
{"nick":"isaacs","message":"no one actually uses that directly anyway","date":"2013-01-30T03:13:08.817Z","type":"message"}
{"nick":"isaacs","action":"half-joking, i hope","date":"2013-01-30T03:13:15.987Z","type":"action"}
{"nick":"isaacs","message":"ok, i'm off for the evening.","date":"2013-01-30T03:13:21.157Z","type":"message"}
{"nick":"isaacs","date":"2013-01-30T03:13:21.854Z","type":"part"}
{"nick":"isaacs","date":"2013-01-30T03:13:25.137Z","type":"join"}
{"nick":"bnoordhuis","message":"ah, i broke the repl","date":"2013-01-30T03:20:37.038Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-01-30T03:21:01.360Z","type":"quit"}
{"nick":"bnoordhuis","message":"piscisaureus_: sblom reviewed it, right?","date":"2013-01-30T03:23:05.957Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u00023fe6aba\u0002 : os: rename tmpDir() to tmpdir() for consistency  Make the casing consiste - http://git.io/1ndWtw","date":"2013-01-30T03:25:23.531Z","type":"message"}
{"nick":"Raynos","message":"isaacs: `Readable.wrap` the old crypto streams :D","date":"2013-01-30T03:28:04.372Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-30T03:29:32.322Z","type":"quit"}
{"nick":"trevnorris","date":"2013-01-30T03:29:32.979Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-30T03:30:28.611Z","type":"quit"}
{"nick":"kazupon","date":"2013-01-30T03:54:03.858Z","type":"join"}
{"nick":"mikeal","date":"2013-01-30T03:59:49.465Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-01-30T04:05:31.191Z","type":"quit"}
{"nick":"abraxas","date":"2013-01-30T04:06:03.692Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 276 seconds","date":"2013-01-30T04:11:15.328Z","type":"quit"}
{"nick":"bnoordhuis","message":"brson_: re async handles, under the hood they're pipes that get written to in one thread and read from in another thread","date":"2013-01-30T04:12:59.539Z","type":"message"}
{"nick":"bnoordhuis","message":"regarding overhead, you incur two syscalls","date":"2013-01-30T04:13:38.184Z","type":"message"}
{"nick":"brson_","message":"bnoordhuis: thanks, and interesting. I don't know how that compares performance wise to a mutex and condition variable but it sounds like it has more overhead. do you agree?","date":"2013-01-30T04:20:18.470Z","type":"message"}
{"nick":"bnoordhuis","message":"brson_: probably yes, though outside of very tight loops it probably won't be noticeable","date":"2013-01-30T04:21:01.139Z","type":"message"}
{"nick":"bnoordhuis","message":"on linux, we could switch to eventfds. you'd still have a read and a write but they'd be operating on fixed-size buffers","date":"2013-01-30T04:22:41.320Z","type":"message"}
{"nick":"kristate","date":"2013-01-30T04:24:46.534Z","type":"join"}
{"nick":"indexzero","date":"2013-01-30T04:25:19.193Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-30T04:26:54.343Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-01-30T04:27:07.822Z","type":"join"}
{"nick":"brson_","message":"bnoordhuis: thanks for the advice. i'm glad this isn't obviously a bad idea. i'll make a point to do some performance comparisions before getting too deep into it","date":"2013-01-30T04:27:35.267Z","type":"message"}
{"nick":"brson_","reason":"Ping timeout: 276 seconds","date":"2013-01-30T04:32:24.849Z","type":"quit"}
{"nick":"c4milo","date":"2013-01-30T04:34:43.899Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: catch any of the earlier conversation on performance regression in tcp_wrap?","date":"2013-01-30T04:37:55.260Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-30T04:38:21.316Z","type":"quit"}
{"nick":"bnoordhuis","message":"trevnorris: yes. it's something i've observed as well. it's some kind of weak interaction between libuv and the slab allocator","date":"2013-01-30T04:38:25.214Z","type":"message"}
{"nick":"bnoordhuis","message":"if you trace syscalls with strace -c, you'll find that things are mostly equal","date":"2013-01-30T04:38:43.661Z","type":"message"}
{"nick":"bnoordhuis","message":"but when you profile it with massif or just /usr/bin/time, you'll find that peak memory usage is a lot higher","date":"2013-01-30T04:39:16.672Z","type":"message"}
{"nick":"bnoordhuis","message":"with a corresponding increase in pagefaults, etc.","date":"2013-01-30T04:39:29.848Z","type":"message"}
{"nick":"bnoordhuis","message":"i haven't been able to pinpoint it exactly but i suspect it's because of libuv's more aggresive approach to fetching events","date":"2013-01-30T04:40:19.476Z","type":"message"}
{"nick":"bnoordhuis","message":"i.e. it's trying to be faster but that increases strain on other parts of node","date":"2013-01-30T04:40:58.632Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: interesting. think there are any specifics I could benchmark?","date":"2013-01-30T04:42:55.194Z","type":"message"}
{"nick":"dap","date":"2013-01-30T04:44:49.795Z","type":"join"}
{"nick":"trevnorris","message":"in my benchmarks it shows that v0.8 is making 20% more calls and 53% more errors.","date":"2013-01-30T04:45:02.150Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, that sounds about right","date":"2013-01-30T04:45:18.637Z","type":"message"}
{"nick":"bnoordhuis","message":"i should've said that master doesn't make _more_ syscalls","date":"2013-01-30T04:45:34.290Z","type":"message"}
{"nick":"bnoordhuis","message":"but try massif and compare the results in massif-visualizer","date":"2013-01-30T04:45:56.857Z","type":"message"}
{"nick":"bnoordhuis","message":"for me, v0.8 heap usage is more or less flat","date":"2013-01-30T04:46:20.712Z","type":"message"}
{"nick":"bnoordhuis","message":"while master has these massive spikes","date":"2013-01-30T04:46:30.292Z","type":"message"}
{"nick":"trevnorris","message":"using strace -c, is the second column avg time spent on that syscall?","date":"2013-01-30T04:47:17.233Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: yes","date":"2013-01-30T04:48:44.677Z","type":"message"}
{"nick":"bnoordhuis","message":"err, third rather","date":"2013-01-30T04:48:57.317Z","type":"message"}
{"nick":"bnoordhuis","message":"second one is total time spent in that syscall","date":"2013-01-30T04:49:06.565Z","type":"message"}
{"nick":"pooya","date":"2013-01-30T04:53:16.210Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: just ran the tests several dozen times to make sure. the write syscall on master is ~34% longer than on v0.8","date":"2013-01-30T05:08:13.258Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: what test/benchmark are you profiling?","date":"2013-01-30T05:08:45.580Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: have a PR for it (4656). here's the dir of tcp tests: http://git.io/0mdWkQ","date":"2013-01-30T05:11:26.414Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: isaacs gave me a gist of these and I extended them.","date":"2013-01-30T05:12:16.561Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, but what test in particular are you benchmarking now?","date":"2013-01-30T05:12:31.761Z","type":"message"}
{"nick":"trevnorris","message":"tcp_raw_c2s.js","date":"2013-01-30T05:12:50.102Z","type":"message"}
{"nick":"wolfeidau","reason":"Ping timeout: 252 seconds","date":"2013-01-30T05:12:54.335Z","type":"quit"}
{"nick":"bnoordhuis","message":"trevnorris: have you checked nr of pagefaults? that could well explain why the write syscall is slower","date":"2013-01-30T05:13:55.236Z","type":"message"}
{"nick":"bnoordhuis","message":"use /usr/bin/time for that btw, the bash builtin is rather basic","date":"2013-01-30T05:14:29.387Z","type":"message"}
{"nick":"loladiro","date":"2013-01-30T05:14:36.843Z","type":"join"}
{"nick":"trevnorris","message":"thanks. one sec","date":"2013-01-30T05:14:57.030Z","type":"message"}
{"nick":"bnoordhuis","message":"_ZTVN2v88internal20FastElementsAccessorINS0_31FastHoleyObjectElementsAccessorENS0_18ElementsKindTraitsILNS0_12ElementsKindE3EEELi4EEE <- c++ name mangling is so awful","date":"2013-01-30T05:17:10.279Z","type":"message"}
{"nick":"trevnorris","message":"heh, seriously. always have a hard time reading those.","date":"2013-01-30T05:20:02.439Z","type":"message"}
{"nick":"mmalecki","new_nick":"mmalecki[zzz]","date":"2013-01-30T05:20:24.077Z","type":"nick"}
{"nick":"trevnorris","message":"bnoordhuis: so not sure what's going on. v0.8 has 61% more minor page faults. neither have major page faults.","date":"2013-01-30T05:20:37.641Z","type":"message"}
{"nick":"bnoordhuis","message":"you actually get less page faults?","date":"2013-01-30T05:21:02.916Z","type":"message"}
{"nick":"bnoordhuis","message":"what's maxresident?","date":"2013-01-30T05:21:14.516Z","type":"message"}
{"nick":"trevnorris","message":"master - 274,352;  v0.8 - 176,424","date":"2013-01-30T05:22:04.788Z","type":"message"}
{"nick":"trevnorris","message":"also master has 72% more \"Voluntary context switches\"","date":"2013-01-30T05:22:27.679Z","type":"message"}
{"nick":"abraxas","date":"2013-01-30T05:22:33.586Z","type":"join"}
{"nick":"trevnorris","message":"minor page faults: master - 115,550;  v0.8 - 299,887","date":"2013-01-30T05:23:28.268Z","type":"message"}
{"nick":"trevnorris","message":"voluntary context switches: master - 68,479;  v0.8 - 18,830","date":"2013-01-30T05:24:07.491Z","type":"message"}
{"nick":"bnoordhuis","message":"right, i've seen that as well","date":"2013-01-30T05:24:26.834Z","type":"message"}
{"nick":"bnoordhuis","message":"but worse, more like 10x","date":"2013-01-30T05:24:49.671Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: var timer = require('bench-timer'); <- what's that?","date":"2013-01-30T05:25:28.024Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: the benchmark api i created for node.","date":"2013-01-30T05:26:34.724Z","type":"message"}
{"nick":"bnoordhuis","message":"ah right","date":"2013-01-30T05:26:50.064Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: isaacs had me make it an external: https://github.com/trevnorris/bench-timer","date":"2013-01-30T05:26:52.174Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-30T05:26:56.260Z","type":"quit"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-01-30T05:32:12.488Z","type":"nick"}
{"nick":"brson","date":"2013-01-30T05:39:59.813Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-30T05:47:16.719Z","type":"quit"}
{"nick":"trevnorris","message":"whoa. that ms_print takes a bit to get used to.","date":"2013-01-30T05:54:51.103Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: ok. so massif is telling me memory peaked at 256MB for master and 162MB for v0.8","date":"2013-01-30T05:55:42.699Z","type":"message"}
{"nick":"trevnorris","message":"(if i'm reading it correctly)","date":"2013-01-30T05:56:13.000Z","type":"message"}
{"nick":"isaacs","message":"Raynos: lolz","date":"2013-01-30T05:58:33.052Z","type":"message"}
{"nick":"isaacs","message":"Raynos: Readable.wrap() is not a good idea here.","date":"2013-01-30T05:58:46.292Z","type":"message"}
{"nick":"mikeal","date":"2013-01-30T05:59:42.879Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: think i might be getting somewhere. bnoordhuis showed me massif, and the results are interesting. (or I could just be way confused by the ascii graphs)","date":"2013-01-30T06:01:31.666Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: install massif-visualizer, it gives you pretty images","date":"2013-01-30T06:02:52.936Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: ah. thanks. those ascii graphs were awesomely retro.","date":"2013-01-30T06:03:20.086Z","type":"message"}
{"nick":"brson","reason":"Read error: Connection reset by peer","date":"2013-01-30T06:04:36.140Z","type":"quit"}
{"nick":"brson","date":"2013-01-30T06:04:44.192Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 255 seconds","date":"2013-01-30T06:08:47.543Z","type":"quit"}
{"nick":"mikeal","reason":"Ping timeout: 248 seconds","date":"2013-01-30T06:10:28.775Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-30T06:12:22.183Z","type":"join"}
{"nick":"isaacs","message":"nice","date":"2013-01-30T06:14:37.232Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: why are you up so early?","date":"2013-01-30T06:14:40.702Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: isn't it about dawn where you'er at?","date":"2013-01-30T06:14:45.512Z","type":"message"}
{"nick":"bnoordhuis","message":"it is and i'm not up early, i'm up late","date":"2013-01-30T06:15:06.829Z","type":"message"}
{"nick":"isaacs","message":"ouch","date":"2013-01-30T06:15:11.252Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: _ZTVN2v88internal20FastElementsAccessorINS0_31FastHoleyObjectElementsAccessorENS0_18ElementsKindTraitsILNS0_12ElementsKindE3EEELi4EEE <--it's like german","date":"2013-01-30T06:15:26.302Z","type":"message"}
{"nick":"isaacs","message":"Java, C++, and Deutsch","date":"2013-01-30T06:15:51.441Z","type":"message"}
{"nick":"isaacs","message":"just mash all the words together","date":"2013-01-30T06:15:57.921Z","type":"message"}
{"nick":"isaacs","message":"AbstractFactoryFactoryBeanSingletonFactoryInterfaceBeanFactory","date":"2013-01-30T06:16:17.201Z","type":"message"}
{"nick":"trevnorris","message":"master is spending a mother load of time in Buffer::Replace, which goes down to uv__stream_io, then uv__io_poll. but seriously don't know if this is useful.","date":"2013-01-30T06:18:57.712Z","type":"message"}
{"nick":"bradleymeck","date":"2013-01-30T06:19:22.541Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: and fwiw, Buffer.byteLength is crazy slow on utf8 string.","date":"2013-01-30T06:22:43.715Z","type":"message"}
{"nick":"bnoordhuis","message":"demangled names are not always an improvement... node::WrappedScript::EvalMachine<(node::WrappedScript::EvalInputFlags)0, (node::WrappedScript::EvalContextFlags)0, (node::WrappedScript::EvalOutputFlags)1>","date":"2013-01-30T06:28:21.363Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: mean anything that master's peaking at 256MB where v0.8 at 162MB?","date":"2013-01-30T06:31:26.071Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: yes, it means something is not okay","date":"2013-01-30T06:31:47.259Z","type":"message"}
{"nick":"bnoordhuis","message":"it might be v8, i've noticed that the gc in 3.15 is a lot more passive","date":"2013-01-30T06:32:04.764Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: http://code.google.com/p/v8/issues/detail?id=2483#c4","date":"2013-01-30T06:32:48.188Z","type":"message"}
{"nick":"paddybyers","date":"2013-01-30T06:32:52.108Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: yeah. that's the same % i'm seeing.","date":"2013-01-30T06:34:17.677Z","type":"message"}
{"nick":"bnoordhuis","message":"so yeah, there's a lot of factors :)","date":"2013-01-30T06:34:41.828Z","type":"message"}
{"nick":"bnoordhuis","message":"the good news is that whatever regression is in v8's gc seems to be fixed in 3.16","date":"2013-01-30T06:35:02.916Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: mean anything that in v0.8 ~70% of time after heap allocation is spent in \"v8::internal::Malloced::New\", but in master it spends 99% time in \"node::Buffer::Replace\"?","date":"2013-01-30T06:35:59.691Z","type":"message"}
{"nick":"trevnorris","message":"that's good to hear.","date":"2013-01-30T06:36:07.731Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, only we're shipping 3.15 so it doesn't help right away","date":"2013-01-30T06:36:53.464Z","type":"message"}
{"nick":"bnoordhuis","message":"re your question, i don't know. i don't think i've observed that","date":"2013-01-30T06:37:14.485Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: https://gist.github.com/4671224","date":"2013-01-30T06:39:07.464Z","type":"message"}
{"nick":"trevnorris","message":"let me updated that with equivalent timings","date":"2013-01-30T06:40:16.990Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: whoops. nm","date":"2013-01-30T06:41:32.682Z","type":"message"}
{"nick":"bnoordhuis","message":"bad benchmark? :)","date":"2013-01-30T06:41:42.413Z","type":"message"}
{"nick":"trevnorris","message":"the parts I posted were at different times. so one shows process startup stuff.","date":"2013-01-30T06:42:09.499Z","type":"message"}
{"nick":"trevnorris","message":"once I jumped to the same time spot they look pretty well the same.","date":"2013-01-30T06:42:22.064Z","type":"message"}
{"nick":"bnoordhuis","message":"right, that makes sense","date":"2013-01-30T06:42:33.626Z","type":"message"}
{"nick":"trevnorris","message":"though the total(B)","date":"2013-01-30T06:42:40.461Z","type":"message"}
{"nick":"trevnorris","message":"is interesting","date":"2013-01-30T06:42:43.696Z","type":"message"}
{"nick":"trevnorris","message":"like you said, in v0.8 it stays a lot more steady","date":"2013-01-30T06:42:51.891Z","type":"message"}
{"nick":"trevnorris","message":"where in master it jumps from 256MB to 25MB","date":"2013-01-30T06:43:02.880Z","type":"message"}
{"nick":"trevnorris","message":"i'll assume that just has to do with v8","date":"2013-01-30T06:44:47.480Z","type":"message"}
{"nick":"bnoordhuis","message":"quite possibly","date":"2013-01-30T06:44:54.144Z","type":"message"}
{"nick":"bnoordhuis","message":"but it could also be something that libuv does","date":"2013-01-30T06:45:01.520Z","type":"message"}
{"nick":"bnoordhuis","message":"iirc i tried downgrading libuv and the issue was less severe","date":"2013-01-30T06:45:34.761Z","type":"message"}
{"nick":"bnoordhuis","message":"though admittedly i'm not 100% sure if i'm remembering this correctly","date":"2013-01-30T06:45:52.796Z","type":"message"}
{"nick":"trevnorris","message":"hm in master it goes: uv__stream_io -> uv__io_poll -> uv_run; in v0.8 it's uv__stream_io -> ev_invoke_pending -> uv__run -> uv_run","date":"2013-01-30T06:46:53.999Z","type":"message"}
{"nick":"trevnorris","message":"that just an api change?","date":"2013-01-30T06:46:56.896Z","type":"message"}
{"nick":"trevnorris","message":"other than that part, the call stack is exactly the same.","date":"2013-01-30T06:48:37.198Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, api change. libev got dropped in master","date":"2013-01-30T06:49:51.914Z","type":"message"}
{"nick":"bnoordhuis","message":"there was much rejoicing","date":"2013-01-30T06:50:03.378Z","type":"message"}
{"nick":"trevnorris","message":"heh, awesome.","date":"2013-01-30T06:50:14.631Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-01-30T06:54:42.943Z","type":"quit"}
{"nick":"bnoordhuis","message":"suspect-read,Object,\"domain\" <- i'm never sure what to make of these","date":"2013-01-30T06:55:23.198Z","type":"message"}
{"nick":"bnoordhuis","message":"it means a LoadIC somehow failed","date":"2013-01-30T06:55:34.550Z","type":"message"}
{"nick":"bnoordhuis","message":"but it also happens for builtins","date":"2013-01-30T06:55:39.421Z","type":"message"}
{"nick":"bnoordhuis","message":"e.g. suspect-read,Array,\"toJSON\" (multiple times usually)","date":"2013-01-30T06:55:54.464Z","type":"message"}
{"nick":"bnoordhuis","message":"there is no Array.prototype.toJSON, of course","date":"2013-01-30T06:56:42.355Z","type":"message"}
{"nick":"bnoordhuis","message":"so i wonder where that comes from","date":"2013-01-30T06:56:46.627Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-30T06:58:32.313Z","type":"quit"}
{"nick":"bnoordhuis","message":"ha, hm. looks like JSON.stringify([]) triggers it","date":"2013-01-30T06:58:54.993Z","type":"message"}
{"nick":"trevnorris","message":"where's that called?","date":"2013-01-30T06:59:58.540Z","type":"message"}
{"nick":"bnoordhuis","message":"not sure where it comes from in the first v8.log where i spotted it","date":"2013-01-30T07:00:27.817Z","type":"message"}
{"nick":"bnoordhuis","message":"but if you run `node --prof --log_all -e 'JSON.stringify({})'` and grep the log for suspect-read","date":"2013-01-30T07:00:51.672Z","type":"message"}
{"nick":"bnoordhuis","message":"you'll find what i mean. replace {} with [] or something else to observe the difference","date":"2013-01-30T07:01:19.802Z","type":"message"}
{"nick":"trevnorris","message":"i'm running tcp_raw_c2s with `--trace-opt --trace-deopt --trace-inlining --code-comments`","date":"2013-01-30T07:01:57.575Z","type":"message"}
{"nick":"trevnorris","message":"in v0.8 just has a lot of happy \"marking ... for recompilation\"","date":"2013-01-30T07:02:13.410Z","type":"message"}
{"nick":"trevnorris","message":"but on master it pukes everywhere","date":"2013-01-30T07:02:20.942Z","type":"message"}
{"nick":"bnoordhuis","message":"in what sense?","date":"2013-01-30T07:02:31.165Z","type":"message"}
{"nick":"trevnorris","message":"**** DEOPT: process._makeCallback at bailout","date":"2013-01-30T07:02:46.094Z","type":"message"}
{"nick":"trevnorris","message":"Did not inline apply called from process._makeCallback","date":"2013-01-30T07:02:53.498Z","type":"message"}
{"nick":"bnoordhuis","message":"ah","date":"2013-01-30T07:02:59.137Z","type":"message"}
{"nick":"bnoordhuis","message":"i think _makeCallback changed quite a bit between v0.8 and now","date":"2013-01-30T07:03:17.899Z","type":"message"}
{"nick":"trevnorris","message":"also the use of call and apply is kicking us in the nuts","date":"2013-01-30T07:03:19.972Z","type":"message"}
{"nick":"isaacs","message":"nice find!","date":"2013-01-30T07:04:10.142Z","type":"message"}
{"nick":"isaacs","message":"yes, if makeCallback is sucking, then that is a huge nut kick","date":"2013-01-30T07:04:18.812Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: yeah. every half screen it's DEOPT","date":"2013-01-30T07:04:44.797Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: interesting","date":"2013-01-30T07:05:00.507Z","type":"message"}
{"nick":"isaacs","message":"what can we do to get that not being deopted?","date":"2013-01-30T07:05:14.051Z","type":"message"}
{"nick":"trevnorris","message":"i'll look at the code. give me a few.","date":"2013-01-30T07:05:26.468Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: also, v8 strangeness. if call or apply is in your function, even if it's not used, it will be marked as not inlineable","date":"2013-01-30T07:06:56.529Z","type":"message"}
{"nick":"indexzero","date":"2013-01-30T07:08:32.939Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: weird.","date":"2013-01-30T07:10:08.318Z","type":"message"}
{"nick":"isaacs","message":"stupid \"this\"","date":"2013-01-30T07:10:26.388Z","type":"message"}
{"nick":"trevnorris","message":"yeah. v8 has really strange things. like the number of characters in your function also determines if it's inlineable","date":"2013-01-30T07:10:38.374Z","type":"message"}
{"nick":"isaacs","message":"wild","date":"2013-01-30T07:11:10.917Z","type":"message"}
{"nick":"isaacs","message":"would it be worth checking the arg count?","date":"2013-01-30T07:11:19.047Z","type":"message"}
{"nick":"isaacs","message":"most of the time, makeCallback is called with 0 or 1 args","date":"2013-01-30T07:11:29.177Z","type":"message"}
{"nick":"trevnorris","message":"probably not. i'm tracing the logic now.","date":"2013-01-30T07:12:26.931Z","type":"message"}
{"nick":"isaacs","message":"i wonder if we could reduce reliance on the obj this-context as well.","date":"2013-01-30T07:12:47.976Z","type":"message"}
{"nick":"`3rdEden","date":"2013-01-30T07:13:20.897Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-01-30T07:14:16.425Z","type":"quit"}
{"nick":"isaacs","message":"trevnorris: oh, i'm dumb.","date":"2013-01-30T07:15:43.134Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: we can get the apply out of there.","date":"2013-01-30T07:15:49.324Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: quite easily, actually.","date":"2013-01-30T07:15:54.094Z","type":"message"}
{"nick":"trevnorris","message":"awesome.","date":"2013-01-30T07:15:58.640Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: we just have to make sure we aren't passing any arbitrary methods in there, that aren't attached to the obj.","date":"2013-01-30T07:16:16.944Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: but most of the time, it's stuff like node::MakeCallback(handleObject, \"oncomplete\", argv);","date":"2013-01-30T07:16:38.724Z","type":"message"}
{"nick":"isaacs","message":"testing now","date":"2013-01-30T07:20:38.721Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: v8 question. why is process_makeCallback a Persistent function when it's returned through scope.Close()?","date":"2013-01-30T07:21:33.849Z","type":"message"}
{"nick":"isaacs","message":"um.  i dunno","date":"2013-01-30T07:21:50.660Z","type":"message"}
{"nick":"isaacs","message":"when is it returned through scope.Close?","date":"2013-01-30T07:22:12.990Z","type":"message"}
{"nick":"isaacs","message":"i thought we just closed over the return value","date":"2013-01-30T07:22:37.270Z","type":"message"}
{"nick":"trevnorris","message":"oh. just saw that process_makeCallback is declared at the top. ","date":"2013-01-30T07:23:32.555Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: try this patch: https://github.com/isaacs/node/commit/mc-noapply","date":"2013-01-30T07:23:53.829Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: does that make things happier?","date":"2013-01-30T07:23:59.469Z","type":"message"}
{"nick":"trevnorris","message":"it's returned through scope.Close() in MakeCallback (node.cc L964)","date":"2013-01-30T07:24:07.260Z","type":"message"}
{"nick":"isaacs","message":"you mean this?   return scope.Close(ret);","date":"2013-01-30T07:25:08.769Z","type":"message"}
{"nick":"felixge","date":"2013-01-30T07:25:13.271Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-01-30T07:25:13.482Z","type":"quit"}
{"nick":"felixge","date":"2013-01-30T07:25:13.611Z","type":"join"}
{"nick":"trevnorris","message":"yeah","date":"2013-01-30T07:26:10.142Z","type":"message"}
{"nick":"trevnorris","message":"wait. nm","date":"2013-01-30T07:26:16.927Z","type":"message"}
{"nick":"trevnorris","message":"freaking. screen's starting to blur","date":"2013-01-30T07:26:26.397Z","type":"message"}
{"nick":"trevnorris","message":"(well, my eyes are at least)","date":"2013-01-30T07:26:35.398Z","type":"message"}
{"nick":"isaacs","message":"probably it's bedtime, i think","date":"2013-01-30T07:26:47.787Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i can't see any massive change from this _makeCallback change, but it doesn't break anything","date":"2013-01-30T07:28:06.567Z","type":"message"}
{"nick":"isaacs","message":"and it does remove a .apply() from some relatively hot code.","date":"2013-01-30T07:28:15.866Z","type":"message"}
{"nick":"isaacs","message":"so that's probably good","date":"2013-01-30T07:28:18.136Z","type":"message"}
{"nick":"isaacs","message":"i'll make an honest PR out of it","date":"2013-01-30T07:28:22.536Z","type":"message"}
{"nick":"trevnorris","message":"yeah. sounds good. it's less noisy, so it's a start.","date":"2013-01-30T07:28:53.236Z","type":"message"}
{"nick":"felixge","reason":"Ping timeout: 252 seconds","date":"2013-01-30T07:29:59.135Z","type":"quit"}
{"nick":"rendar","date":"2013-01-30T07:30:58.679Z","type":"join"}
{"nick":"isaacs","message":"https://github.com/joyent/node/pull/4686","date":"2013-01-30T07:31:32.984Z","type":"message"}
{"nick":"isaacs","message":"and with that, i'm off.","date":"2013-01-30T07:32:57.373Z","type":"message"}
{"nick":"isaacs","action":"&","date":"2013-01-30T07:32:59.223Z","type":"action"}
{"nick":"LOUDBOT","message":"WAR START FROM ADAM WHEN CAIN HE KILLED ABEL UNTIL NOW. IT'S NEVER GONNA STOP KILLING OF PEOPLE.","date":"2013-01-30T07:32:59.605Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: still have .apply in the function. just because it exists it'll mark for deopt. stupid I know.","date":"2013-01-30T07:34:47.805Z","type":"message"}
{"nick":"trevnorris","message":"um. shouldn't the end of node.js be with a `}());` or something (not a `});`) but guess it still works.","date":"2013-01-30T07:39:45.192Z","type":"message"}
{"nick":"felixge","date":"2013-01-30T07:40:12.444Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 264 seconds","date":"2013-01-30T07:41:30.114Z","type":"quit"}
{"nick":"indutny","message":"whoa","date":"2013-01-30T07:43:02.300Z","type":"message"}
{"nick":"indutny","message":"a lot of logs","date":"2013-01-30T07:43:03.893Z","type":"message"}
{"nick":"indutny","message":"good morning","date":"2013-01-30T07:43:06.221Z","type":"message"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2013-01-30T07:51:33.507Z","type":"quit"}
{"nick":"bradleymeck_","date":"2013-01-30T07:52:00.851Z","type":"join"}
{"nick":"kristate","date":"2013-01-30T07:53:34.359Z","type":"join"}
{"nick":"bradleymeck","reason":"Ping timeout: 255 seconds","date":"2013-01-30T07:54:38.465Z","type":"quit"}
{"nick":"bradleymeck_","new_nick":"bradleymeck","date":"2013-01-30T07:54:38.620Z","type":"nick"}
{"nick":"paddybyers","date":"2013-01-30T07:57:02.064Z","type":"join"}
{"nick":"pooya","reason":"Ping timeout: 245 seconds","date":"2013-01-30T07:57:31.057Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u0002f64d1fe\u0002 : lint - http://git.io/adJ09A","date":"2013-01-30T07:57:41.497Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-30T07:59:40.788Z","type":"quit"}
{"nick":"trevnorris","message":"indutny: heh, nice bugzilla link","date":"2013-01-30T08:11:04.133Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-01-30T08:12:44.814Z","type":"quit"}
{"nick":"indutny","message":"trevnorris: that's what I'm doing in my free time","date":"2013-01-30T08:15:43.413Z","type":"message"}
{"nick":"indutny","message":"filing issues everywhere","date":"2013-01-30T08:15:48.890Z","type":"message"}
{"nick":"trevnorris","message":"heh, sounds like a blast.","date":"2013-01-30T08:16:00.391Z","type":"message"}
{"nick":"trevnorris","message":"indutny: you understand _makeCallback?","date":"2013-01-30T08:17:36.697Z","type":"message"}
{"nick":"indutny","message":"I think so","date":"2013-01-30T08:17:42.988Z","type":"message"}
{"nick":"trevnorris","message":"why does it check for domain at the top, then again at the bottom?","date":"2013-01-30T08:17:58.713Z","type":"message"}
{"nick":"indutny","message":"gtg :)","date":"2013-01-30T08:19:10.679Z","type":"message"}
{"nick":"indutny","message":"will reply later","date":"2013-01-30T08:19:13.699Z","type":"message"}
{"nick":"trevnorris","message":"ok np","date":"2013-01-30T08:19:17.925Z","type":"message"}
{"nick":"hz","date":"2013-01-30T08:22:43.422Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 240 seconds","date":"2013-01-30T08:27:11.031Z","type":"quit"}
{"nick":"paddybyers","date":"2013-01-30T08:28:24.050Z","type":"join"}
{"nick":"bradleymeck_","date":"2013-01-30T08:33:21.104Z","type":"join"}
{"nick":"trevnorris","message":"whoot! found most the regression!","date":"2013-01-30T08:34:35.243Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: ^","date":"2013-01-30T08:34:41.202Z","type":"message"}
{"nick":"kristate","reason":"Remote host closed the connection","date":"2013-01-30T08:34:47.060Z","type":"quit"}
{"nick":"bradleymeck","reason":"Ping timeout: 272 seconds","date":"2013-01-30T08:36:46.839Z","type":"quit"}
{"nick":"bradleymeck_","new_nick":"bradleymeck","date":"2013-01-30T08:36:46.972Z","type":"nick"}
{"nick":"trevnorris","message":"isaacs: those domain conditionals are causing a huge amount of bailout. comment those out and you should see a difference.","date":"2013-01-30T08:37:54.308Z","type":"message"}
{"nick":"trevnorris","message":"sorry, shouldn't have said regression. should have said bailout.","date":"2013-01-30T08:39:22.151Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: re _makeCallback and domains, it enters the domain and the top and exits again at, well, exit","date":"2013-01-30T08:41:44.789Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok.","date":"2013-01-30T08:41:59.452Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-01-30T08:52:54.444Z","type":"quit"}
{"nick":"googol","reason":"Ping timeout: 276 seconds","date":"2013-01-30T08:57:36.858Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 240 seconds","date":"2013-01-30T08:58:41.069Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: morning, ben","date":"2013-01-30T08:59:50.849Z","type":"message"}
{"nick":"wolfeidau","date":"2013-01-30T08:59:52.731Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: morning fedor","date":"2013-01-30T08:59:59.914Z","type":"message"}
{"nick":"indutny","message":"how are you?","date":"2013-01-30T09:00:12.213Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm fine. you?","date":"2013-01-30T09:02:21.460Z","type":"message"}
{"nick":"indutny","message":"fine too","date":"2013-01-30T09:03:51.985Z","type":"message"}
{"nick":"brson","date":"2013-01-30T09:08:33.748Z","type":"join"}
{"nick":"trevnorris","message":"wtf? in process.nextTick we push an object to an array, then conditional immediately after to see if it has a length?","date":"2013-01-30T09:15:42.487Z","type":"message"}
{"nick":"indutny","message":"and?","date":"2013-01-30T09:16:32.913Z","type":"message"}
{"nick":"indutny","message":"what's up with this?","date":"2013-01-30T09:16:36.859Z","type":"message"}
{"nick":"trevnorris","message":"if we push and object to it, then it will always have a length","date":"2013-01-30T09:16:42.924Z","type":"message"}
{"nick":"indutny","message":"aah","date":"2013-01-30T09:16:47.548Z","type":"message"}
{"nick":"indutny","message":"I see your point","date":"2013-01-30T09:16:49.670Z","type":"message"}
{"nick":"indutny","message":"yes, pretty odd","date":"2013-01-30T09:17:00.118Z","type":"message"}
{"nick":"trevnorris","message":"and that domain stuff is causing deopt bailouts all over the place.","date":"2013-01-30T09:17:20.662Z","type":"message"}
{"nick":"indutny","message":"also my suggestion would be moving all scope variables inside process","date":"2013-01-30T09:17:30.522Z","type":"message"}
{"nick":"indutny","message":"this should improve performance too","date":"2013-01-30T09:17:35.910Z","type":"message"}
{"nick":"trevnorris","message":"good point","date":"2013-01-30T09:17:39.984Z","type":"message"}
{"nick":"trevnorris","message":"also, we've got to loose splice.","date":"2013-01-30T09:17:48.514Z","type":"message"}
{"nick":"trevnorris","message":"indutny: know what the argument \"fromSpinner\" could be on _tickCallback?","date":"2013-01-30T09:35:35.413Z","type":"message"}
{"nick":"indutny","message":"trevnorris: `true`","date":"2013-01-30T09:37:56.804Z","type":"message"}
{"nick":"trevnorris","message":"i'll assume that gets called from cc land?","date":"2013-01-30T09:38:28.095Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-30T09:44:29.247Z","type":"message"}
{"nick":"indutny","message":"node.cc","date":"2013-01-30T09:44:30.067Z","type":"message"}
{"nick":"indutny","message":"line 182","date":"2013-01-30T09:44:38.766Z","type":"message"}
{"nick":"trevnorris","message":"awesome. thanks.","date":"2013-01-30T09:46:27.158Z","type":"message"}
{"nick":"trevnorris","message":"indutny: also, why are we creating '{ callback: [callback] }'? why not just push the function and call it? don't see that object being used anywhere else.","date":"2013-01-30T09:55:56.328Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 248 seconds","date":"2013-01-30T10:15:48.761Z","type":"quit"}
{"nick":"mmalecki[zzz]","new_nick":"mmalecki","date":"2013-01-30T10:24:51.204Z","type":"nick"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-01-30T10:56:25.998Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-01-30T11:05:24.318Z","type":"quit"}
{"nick":"abraxas","date":"2013-01-30T11:05:59.602Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 264 seconds","date":"2013-01-30T11:11:00.421Z","type":"quit"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-01-30T11:29:56.332Z","type":"quit"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-01-30T11:45:51.569Z","type":"quit"}
{"nick":"`3rdEden","date":"2013-01-30T11:46:23.893Z","type":"join"}
{"nick":"saghul","reason":"Quit: Bye!","date":"2013-01-30T11:46:48.187Z","type":"quit"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-01-30T11:48:04.207Z","type":"nick"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-01-30T11:58:28.598Z","type":"quit"}
{"nick":"hz","reason":"Read error: Connection reset by peer","date":"2013-01-30T12:19:45.945Z","type":"quit"}
{"nick":"hz","date":"2013-01-30T12:22:39.415Z","type":"join"}
{"nick":"sgallagh","date":"2013-01-30T12:50:48.324Z","type":"join"}
{"nick":"bnoordhuis","message":"the v8 people just landed a concurrent gc: https://github.com/v8/v8/commit/666d023","date":"2013-01-30T12:51:15.118Z","type":"message"}
{"nick":"indutny","message":"huuuh","date":"2013-01-30T12:53:31.910Z","type":"message"}
{"nick":"indutny","message":"concurrent gc?","date":"2013-01-30T12:53:33.983Z","type":"message"}
{"nick":"indutny","message":"you kidding","date":"2013-01-30T12:53:35.553Z","type":"message"}
{"nick":"indutny","message":"oh good","date":"2013-01-30T12:53:40.541Z","type":"message"}
{"nick":"indutny","message":"still it needs to run mark-compact periodically","date":"2013-01-30T12:55:02.985Z","type":"message"}
{"nick":"indutny","message":"which basically means synchronization","date":"2013-01-30T13:04:16.164Z","type":"message"}
{"nick":"indutny","message":"whoa","date":"2013-01-30T13:04:21.824Z","type":"message"}
{"nick":"indutny","message":"its still very interesting","date":"2013-01-30T13:04:32.119Z","type":"message"}
{"nick":"stephank","reason":"Ping timeout: 240 seconds","date":"2013-01-30T13:16:40.705Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-30T13:56:31.972Z","type":"join"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-01-30T14:41:03.208Z","type":"quit"}
{"nick":"sgallagh","date":"2013-01-30T14:45:46.079Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-30T15:16:50.644Z","type":"quit"}
{"nick":"c4milo","date":"2013-01-30T15:38:32.007Z","type":"join"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-01-30T15:57:07.409Z","type":"quit"}
{"nick":"sgallagh","date":"2013-01-30T15:57:26.905Z","type":"join"}
{"nick":"kristate","date":"2013-01-30T15:59:04.489Z","type":"join"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-01-30T15:59:38.691Z","type":"quit"}
