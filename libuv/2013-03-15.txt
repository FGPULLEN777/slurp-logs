{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-03-15T00:00:00.676Z","type":"quit"}
{"nick":"ircretary","date":"2013-03-15T00:00:08.567Z","type":"join"}
{"nick":"kazupon","date":"2013-03-15T00:01:09.506Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-15T00:01:51.989Z","type":"quit"}
{"nick":"tjfontaine","message":"bnoordhuis: better? https://github.com/tjfontaine/node/compare/issue4010","date":"2013-03-15T00:04:24.439Z","type":"message"}
{"nick":"tjfontaine","message":"or","date":"2013-03-15T00:05:42.689Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 260 seconds","date":"2013-03-15T00:06:45.292Z","type":"quit"}
{"nick":"bnoordhuis","message":"tjfontaine: better. one final suggestion is to use #ifdef instead of #ifndef (i.e. swap the clauses around)","date":"2013-03-15T00:08:40.051Z","type":"message"}
{"nick":"bnoordhuis","message":"otherwise lgtm","date":"2013-03-15T00:08:42.987Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2013-03-15T00:09:31.360Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #27 \u00037UNSTABLE\u000f windows-x64 (19/561) windows-ia32 (49/561) smartos-x64 (20/561) linux-x64 (5/561) osx-ia32 (33/561) osx-x64 (24/561) smartos-ia32 (81/561) linux-ia32 (59/561) http://jenkins.nodejs.org/job/nodejs-v0.10/27/","date":"2013-03-15T00:10:40.653Z","type":"message"}
{"nick":"tjfontaine","message":"https://github.com/joyent/node/pull/5027","date":"2013-03-15T00:12:41.669Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #26 \u0002ABORTED\u0002 windows-x64 (57/561) windows-ia32 (41/561) smartos-x64 (48/561) linux-x64 (12/561) osx-ia32 (26/561) osx-x64 (60/561) smartos-ia32 (15/561) linux-ia32 (46/561) http://jenkins.nodejs.org/job/nodejs-v0.10/26/","date":"2013-03-15T00:15:13.940Z","type":"message"}
{"nick":"tjfontaine","message":"windows is so fucking weird","date":"2013-03-15T00:15:30.853Z","type":"message"}
{"nick":"AvianFlu","date":"2013-03-15T00:22:42.804Z","type":"join"}
{"nick":"sblom","message":"isaacs: I haven't done much with the Windows failures yet. I'm starting on it now, and a reasonable block of time for this tomorrow also.","date":"2013-03-15T00:24:11.633Z","type":"message"}
{"nick":"Kakera","reason":"Ping timeout: 256 seconds","date":"2013-03-15T00:25:25.034Z","type":"quit"}
{"nick":"isaacs","message":"sblom: awesome, thanks","date":"2013-03-15T00:25:31.415Z","type":"message"}
{"nick":"isaacs","message":"sblom: i'm gonna be afk this weekend, but tuesday, it'd be good to release 10.1","date":"2013-03-15T00:25:43.521Z","type":"message"}
{"nick":"isaacs","message":"Node 10, Service Pack 1","date":"2013-03-15T00:26:10.037Z","type":"message"}
{"nick":"sblom","message":"(Heh--localized for the Windows audience?)","date":"2013-03-15T00:27:22.836Z","type":"message"}
{"nick":"sblom","message":"\"_Everyone_ waits for SP1.\" ^TM","date":"2013-03-15T00:29:01.648Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Timothy J Fontaine\u000f \u00037v0.10\u000f * \u00024432dc8\u0002 : v8: move 32 bit heap hint on sunos  Setting the V8 heap at or near 0x2000 - http://git.io/C6y6Ew","date":"2013-03-15T00:31:33.039Z","type":"message"}
{"nick":"isaacs","message":"sblom: yep :)","date":"2013-03-15T00:31:38.476Z","type":"message"}
{"nick":"isaacs","message":"sblom: https://gist.github.com/5166554","date":"2013-03-15T00:33:01.660Z","type":"message"}
{"nick":"isaacs","message":"indutny: oh, i see.   (re: hashing slowdown)","date":"2013-03-15T00:33:14.086Z","type":"message"}
{"nick":"isaacs","message":"indutny: maybe we should make better methods to just calculate the hash of some known string.","date":"2013-03-15T00:33:35.483Z","type":"message"}
{"nick":"isaacs","message":"indutny: var hash = crypto.md5(data);","date":"2013-03-15T00:33:46.024Z","type":"message"}
{"nick":"isaacs","message":"sblom: also: https://twitter.com/enterprisestack/status/311174975539273729","date":"2013-03-15T00:35:15.404Z","type":"message"}
{"nick":"isaacs","message":"ircretary: tell `3rdEden The speed issue is because you're instantiating a huge number of these things.  What if we just gave you var hash = crypto.md5(data), which never creates an object?","date":"2013-03-15T00:36:36.576Z","type":"message"}
{"nick":"ircretary","message":"isaacs: I'll be sure to tell `3rdeden","date":"2013-03-15T00:36:36.895Z","type":"message"}
{"nick":"c4milo","date":"2013-03-15T00:40:54.955Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #28 \u00037UNSTABLE\u000f windows-x64 (6/561) windows-ia32 (6/561) smartos-ia32 (1/561) http://jenkins.nodejs.org/job/nodejs-v0.10/28/","date":"2013-03-15T00:52:17.475Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: you know, obnoxious as that PR plugin was, it DID get a bunch of pull reqs to be reviewed by people, and many of them closed.","date":"2013-03-15T00:52:20.435Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: maybe we should have it run every so often, and just post annoying comments on all the old pull reqs.","date":"2013-03-15T00:52:40.024Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: ya, but nothing we couldn't have done in a one-off script :)","date":"2013-03-15T00:52:42.063Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: more enterprise this way","date":"2013-03-15T00:52:50.673Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-03-15T00:52:53.973Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 252 seconds","date":"2013-03-15T01:00:06.853Z","type":"quit"}
{"nick":"tjfontaine","message":"isaacs: you are back on tuesday right?","date":"2013-03-15T01:00:12.520Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: yeah","date":"2013-03-15T01:01:42.397Z","type":"message"}
{"nick":"isaacs","message":"no, monday night","date":"2013-03-15T01:01:46.962Z","type":"message"}
{"nick":"tjfontaine","message":"k","date":"2013-03-15T01:01:47.246Z","type":"message"}
{"nick":"isaacs","message":"tuesday gonna release service pack 1","date":"2013-03-15T01:01:51.557Z","type":"message"}
{"nick":"tjfontaine","message":"nod","date":"2013-03-15T01:01:59.940Z","type":"message"}
{"nick":"kazupon","date":"2013-03-15T01:02:36.945Z","type":"join"}
{"nick":"isaacs","action":"off for a bit","date":"2013-03-15T01:03:50.911Z","type":"action"}
{"nick":"isaacs","action":"&","date":"2013-03-15T01:03:53.227Z","type":"action"}
{"nick":"LOUDBOT","message":"COME ON DOWN TO THE OTHER SIDE","date":"2013-03-15T01:03:53.655Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 264 seconds","date":"2013-03-15T01:07:24.717Z","type":"quit"}
{"nick":"sblom","date":"2013-03-15T01:07:46.865Z","type":"quit"}
{"nick":"hz","date":"2013-03-15T01:13:36.120Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-03-15T01:16:26.864Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-15T01:22:10.165Z","type":"join"}
{"nick":"mikeal","date":"2013-03-15T01:32:09.971Z","type":"join"}
{"nick":"kazupon","date":"2013-03-15T01:38:02.068Z","type":"join"}
{"nick":"abraxas","date":"2013-03-15T01:41:47.307Z","type":"join"}
{"nick":"wavded","date":"2013-03-15T01:45:23.695Z","type":"join"}
{"nick":"wavded","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2013-03-15T01:59:47.566Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-15T02:08:23.029Z","type":"quit"}
{"nick":"asdf12","reason":"Remote host closed the connection","date":"2013-03-15T02:11:49.440Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-15T02:26:44.145Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-15T02:28:17.281Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-15T02:32:04.339Z","type":"quit"}
{"nick":"CoverSlide","reason":"Ping timeout: 248 seconds","date":"2013-03-15T02:35:32.999Z","type":"quit"}
{"nick":"CoverSlide","date":"2013-03-15T02:36:33.260Z","type":"join"}
{"nick":"CoverSlide","reason":"Ping timeout: 240 seconds","date":"2013-03-15T02:58:28.014Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 252 seconds","date":"2013-03-15T02:58:50.337Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-15T03:02:14.648Z","type":"join"}
{"nick":"CoverSlide","date":"2013-03-15T03:03:56.737Z","type":"join"}
{"nick":"CoverSlide","reason":"Ping timeout: 264 seconds","date":"2013-03-15T03:08:55.632Z","type":"quit"}
{"nick":"mikeal","reason":"Ping timeout: 264 seconds","date":"2013-03-15T03:11:55.546Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-15T03:13:05.777Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-15T03:28:25.028Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-15T03:38:46.520Z","type":"join"}
{"nick":"kazupon","date":"2013-03-15T03:48:05.936Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-15T03:50:52.378Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-03-15T03:52:48.797Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-15T04:02:36.772Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-03-15T04:03:53.405Z","type":"quit"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-03-15T04:10:43.818Z","type":"nick"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-03-15T04:17:46.922Z","type":"nick"}
{"nick":"stagas","date":"2013-03-15T04:25:58.196Z","type":"join"}
{"nick":"kazupon","date":"2013-03-15T04:28:11.795Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 264 seconds","date":"2013-03-15T04:33:12.728Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-15T04:34:07.282Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-15T04:39:02.842Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-03-15T04:39:04.443Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-15T05:09:11.575Z","type":"join"}
{"nick":"felixge_","date":"2013-03-15T05:09:26.629Z","type":"join"}
{"nick":"felixge_","reason":"Changing host","date":"2013-03-15T05:09:26.629Z","type":"quit"}
{"nick":"felixge_","date":"2013-03-15T05:09:26.630Z","type":"join"}
{"nick":"felixge","reason":"Ping timeout: 260 seconds","date":"2013-03-15T05:11:50.281Z","type":"quit"}
{"nick":"felixge_","new_nick":"felixge","date":"2013-03-15T05:11:50.493Z","type":"nick"}
{"nick":"mikeal","reason":"Ping timeout: 252 seconds","date":"2013-03-15T05:13:35.335Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-03-15T05:15:58.142Z","type":"join"}
{"nick":"bradleymeck","reason":"Client Quit","date":"2013-03-15T05:17:05.081Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-15T05:21:48.189Z","type":"join"}
{"nick":"c4milo","date":"2013-03-15T05:24:15.648Z","type":"join"}
{"nick":"mikeal","date":"2013-03-15T05:45:46.517Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-15T05:46:09.679Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-15T05:47:20.606Z","type":"join"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-03-15T05:48:38.238Z","type":"quit"}
{"nick":"mikeal","reason":"Ping timeout: 276 seconds","date":"2013-03-15T05:50:45.313Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-15T05:51:34.075Z","type":"join"}
{"nick":"wolfeidau","date":"2013-03-15T06:05:26.478Z","type":"join"}
{"nick":"abraxas","date":"2013-03-15T06:17:25.592Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-15T06:25:06.233Z","type":"quit"}
{"nick":"SquirrelCZECH","reason":"\"WeeChat 0.4.0\"","date":"2013-03-15T06:43:59.564Z","type":"part"}
{"nick":"stagas","reason":"Ping timeout: 256 seconds","date":"2013-03-15T06:57:32.978Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-03-15T07:01:37.222Z","type":"nick"}
{"nick":"rendar","date":"2013-03-15T07:30:02.007Z","type":"join"}
{"nick":"dominictarr","reason":"Ping timeout: 255 seconds","date":"2013-03-15T07:42:02.422Z","type":"quit"}
{"nick":"zot","date":"2013-03-15T07:47:12.385Z","type":"join"}
{"nick":"abrener","reason":"Ping timeout: 264 seconds","date":"2013-03-15T07:54:42.460Z","type":"quit"}
{"nick":"abrener","date":"2013-03-15T08:02:48.081Z","type":"join"}
{"nick":"`3rdEden","date":"2013-03-15T08:04:48.420Z","type":"join"}
{"nick":"`3rdEden","message":"isaacs: is the major performance degradation in crypto.createHash something can be addressed? Or should I focus my energy on going with custom crypto bindings","date":"2013-03-15T08:09:48.505Z","type":"message"}
{"nick":"indutny","message":"I think it needs some discussion","date":"2013-03-15T08:17:42.252Z","type":"message"}
{"nick":"indutny","message":"but","date":"2013-03-15T08:17:43.501Z","type":"message"}
{"nick":"indutny","message":"we might probably introduce simplier apis","date":"2013-03-15T08:17:50.034Z","type":"message"}
{"nick":"indutny","message":"to cover such scenarios","date":"2013-03-15T08:18:00.915Z","type":"message"}
{"nick":"indutny","message":"like non-stream hashes","date":"2013-03-15T08:18:16.737Z","type":"message"}
{"nick":"kazupon","date":"2013-03-15T08:26:13.840Z","type":"join"}
{"nick":"`3rdEden","message":"okay, i'll wait with building libhashkit bindings","date":"2013-03-15T08:28:09.400Z","type":"message"}
{"nick":"zot","reason":"Read error: Connection reset by peer","date":"2013-03-15T08:30:11.453Z","type":"quit"}
{"nick":"zot","date":"2013-03-15T08:30:31.327Z","type":"join"}
{"nick":"indexzero","date":"2013-03-15T08:41:14.462Z","type":"join"}
{"nick":"rvagg","reason":"Excess Flood","date":"2013-03-15T08:47:18.941Z","type":"quit"}
{"nick":"rvagg","date":"2013-03-15T08:47:37.630Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-15T08:48:44.442Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-15T08:52:31.577Z","type":"join"}
{"nick":"indutny","message":"`3rdEden: yt?","date":"2013-03-15T08:59:52.086Z","type":"message"}
{"nick":"zot","reason":"Quit: Leaving.","date":"2013-03-15T08:59:52.375Z","type":"quit"}
{"nick":"`3rdEden","message":"indutny: always :)","date":"2013-03-15T09:00:02.728Z","type":"message"}
{"nick":"zot","date":"2013-03-15T09:00:13.364Z","type":"join"}
{"nick":"`3rdEden","message":"what's up","date":"2013-03-15T09:00:26.875Z","type":"message"}
{"nick":"indutny","message":"can you give a try to this patch https://github.com/indutny/node/compare/feature-improve-crypto-performance ?","date":"2013-03-15T09:00:44.912Z","type":"message"}
{"nick":"`3rdEden","message":"sure","date":"2013-03-15T09:01:41.573Z","type":"message"}
{"nick":"indutny","message":"oops","date":"2013-03-15T09:01:56.766Z","type":"message"}
{"nick":"indutny","message":"its buggy","date":"2013-03-15T09:01:58.195Z","type":"message"}
{"nick":"indutny","message":"but you should try it anyway","date":"2013-03-15T09:02:04.056Z","type":"message"}
{"nick":"indutny","message":"it should not fail in your case ;)","date":"2013-03-15T09:02:07.990Z","type":"message"}
{"nick":"`3rdEden","message":"got to compile it first ;)","date":"2013-03-15T09:02:47.327Z","type":"message"}
{"nick":"indutny","message":"heh","date":"2013-03-15T09:05:05.233Z","type":"message"}
{"nick":"indutny","message":"force pushed branch https://github.com/indutny/node/compare/feature-improve-crypto-performance","date":"2013-03-15T09:06:42.449Z","type":"message"}
{"nick":"indutny","message":"just in case","date":"2013-03-15T09:06:43.992Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-15T09:09:43.816Z","type":"quit"}
{"nick":"`3rdEden","message":"rebuilding, this is gonna take a while ;)","date":"2013-03-15T09:10:28.961Z","type":"message"}
{"nick":"abrener","date":"2013-03-15T09:15:10.156Z","type":"part"}
{"nick":"abrener","date":"2013-03-15T09:15:19.816Z","type":"join"}
{"nick":"`3rdEden","message":"indutny: it takes 1sec instead of 2 now","date":"2013-03-15T09:18:24.179Z","type":"message"}
{"nick":"`3rdEden","message":"iterations: 1059ms to be exact","date":"2013-03-15T09:18:42.184Z","type":"message"}
{"nick":"`3rdEden","message":"So it does have some performance improvements","date":"2013-03-15T09:18:57.399Z","type":"message"}
{"nick":"`3rdEden","message":"but still no where near 0.8 ","date":"2013-03-15T09:19:09.794Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-03-15T09:20:56.240Z","type":"message"}
{"nick":"indutny","message":"ok, at least","date":"2013-03-15T09:21:02.944Z","type":"message"}
{"nick":"indutny","message":"lets see if I can improve it even further","date":"2013-03-15T09:21:12.172Z","type":"message"}
{"nick":"Kakera","date":"2013-03-15T09:29:16.809Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-03-15T09:31:38.108Z","type":"join"}
{"nick":"kevireillyy","date":"2013-03-15T09:38:57.605Z","type":"join"}
{"nick":"dominictarr","date":"2013-03-15T09:43:46.522Z","type":"join"}
{"nick":"dominictarr","reason":"Client Quit","date":"2013-03-15T09:48:24.619Z","type":"quit"}
{"nick":"rvagg","reason":"Excess Flood","date":"2013-03-15T09:51:23.980Z","type":"quit"}
{"nick":"rvagg","date":"2013-03-15T09:51:39.538Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-03-15T09:54:09.597Z","type":"quit"}
{"nick":"felixge","reason":"Quit: http://www.debuggable.com/","date":"2013-03-15T09:58:41.175Z","type":"quit"}
{"nick":"rvagg","reason":"Excess Flood","date":"2013-03-15T10:26:59.496Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-15T10:27:01.072Z","type":"join"}
{"nick":"rvagg","date":"2013-03-15T10:27:24.167Z","type":"join"}
{"nick":"stagas","date":"2013-03-15T10:31:58.829Z","type":"join"}
{"nick":"dominictarr","reason":"Ping timeout: 245 seconds","date":"2013-03-15T10:40:24.876Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-03-15T10:41:14.628Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: hoya","date":"2013-03-15T11:02:41.154Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: heya","date":"2013-03-15T11:02:47.795Z","type":"message"}
{"nick":"indutny","message":"what do you think about https://github.com/indutny/node/compare/feature-improve-crypto-performance","date":"2013-03-15T11:02:49.565Z","type":"message"}
{"nick":"bnoordhuis","message":"so far nothing","date":"2013-03-15T11:02:59.128Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: what does it do and why?","date":"2013-03-15T11:03:51.815Z","type":"message"}
{"nick":"indutny","message":"ok, it optimizes the case where we don't need Transform stream initialization to happen","date":"2013-03-15T11:04:09.380Z","type":"message"}
{"nick":"indutny","message":"like","date":"2013-03-15T11:04:13.707Z","type":"message"}
{"nick":"indutny","message":"createHash().update().digest()","date":"2013-03-15T11:04:18.275Z","type":"message"}
{"nick":"bnoordhuis","message":"hm","date":"2013-03-15T11:04:32.611Z","type":"message"}
{"nick":"indutny","message":"100% performance improvement","date":"2013-03-15T11:04:35.935Z","type":"message"}
{"nick":"indutny","message":"https://gist.github.com/3rd-Eden/5162516/raw/108531277e1c7dbc21d282746628300ed9fb33d4/gistfile1.txt","date":"2013-03-15T11:04:39.693Z","type":"message"}
{"nick":"indutny","message":"at this test case ^","date":"2013-03-15T11:04:43.141Z","type":"message"}
{"nick":"bnoordhuis","message":"i'd opt for new api myself probably","date":"2013-03-15T11:04:44.058Z","type":"message"}
{"nick":"bnoordhuis","message":"var output = crypto.hash('md5', input)","date":"2013-03-15T11:04:55.284Z","type":"message"}
{"nick":"hz","date":"2013-03-15T11:05:00.738Z","type":"join"}
{"nick":"bnoordhuis","message":"still slower than v0.8?","date":"2013-03-15T11:05:19.778Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-03-15T11:05:22.587Z","type":"message"}
{"nick":"indutny","message":"x2 0.8","date":"2013-03-15T11:05:27.272Z","type":"message"}
{"nick":"indutny","message":"was x4, though","date":"2013-03-15T11:05:30.744Z","type":"message"}
{"nick":"bnoordhuis","message":":sad panda:","date":"2013-03-15T11:05:35.541Z","type":"message"}
{"nick":"indutny","message":"it seems that we're loosing at converting to buffers","date":"2013-03-15T11:05:41.227Z","type":"message"}
{"nick":"indutny","message":"strings to buffers","date":"2013-03-15T11:05:51.366Z","type":"message"}
{"nick":"indutny","message":"but I'm not really sure","date":"2013-03-15T11:05:57.017Z","type":"message"}
{"nick":"bnoordhuis","message":"benchmark it? :)","date":"2013-03-15T11:06:05.248Z","type":"message"}
{"nick":"indutny","message":"already did it","date":"2013-03-15T11:06:10.757Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm going to write an irc bot","date":"2013-03-15T11:06:19.262Z","type":"message"}
{"nick":"stagas_","date":"2013-03-15T11:06:27.333Z","type":"join"}
{"nick":"bnoordhuis","message":"one the spams you every 5 minutes with a \"have you benchmarked it yet?\" message","date":"2013-03-15T11:06:33.607Z","type":"message"}
{"nick":"bnoordhuis","message":"*that","date":"2013-03-15T11:06:37.323Z","type":"message"}
{"nick":"bnoordhuis","message":"so i don't have to :)","date":"2013-03-15T11:06:49.834Z","type":"message"}
{"nick":"stagas","reason":"Ping timeout: 245 seconds","date":"2013-03-15T11:07:07.135Z","type":"quit"}
{"nick":"bnoordhuis","message":"merry banter aside, what did your benchmarks show?","date":"2013-03-15T11:07:11.517Z","type":"message"}
{"nick":"indutny","message":"http://blog.indutny.com/f/crypto-patched-master.svg","date":"2013-03-15T11:07:15.761Z","type":"message"}
{"nick":"bnoordhuis","message":"or not show, as the case may be","date":"2013-03-15T11:07:17.620Z","type":"message"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-15T11:07:21.404Z","type":"nick"}
{"nick":"indutny","message":"vs","date":"2013-03-15T11:07:22.075Z","type":"message"}
{"nick":"indutny","message":"http://blog.indutny.com/f/crypto-0.8.svg","date":"2013-03-15T11:07:22.797Z","type":"message"}
{"nick":"bnoordhuis","message":"those flame graphs, they just don't work for me","date":"2013-03-15T11:07:53.762Z","type":"message"}
{"nick":"bnoordhuis","message":"have you tried --prof?","date":"2013-03-15T11:08:04.289Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-03-15T11:08:11.168Z","type":"message"}
{"nick":"bnoordhuis","message":"and?","date":"2013-03-15T11:08:15.277Z","type":"message"}
{"nick":"indutny","message":"https://gist.github.com/indutny/fd38ebf0fb88fcad195d","date":"2013-03-15T11:08:36.477Z","type":"message"}
{"nick":"indutny","message":"10.9 % in creating buffers","date":"2013-03-15T11:08:47.183Z","type":"message"}
{"nick":"indutny","message":"interestingly enough, isFinite() occupies a lot","date":"2013-03-15T11:09:06.816Z","type":"message"}
{"nick":"bnoordhuis","message":"1080 ticks total is not a lot","date":"2013-03-15T11:09:16.334Z","type":"message"}
{"nick":"bnoordhuis","message":"how long did that benchmark run?","date":"2013-03-15T11:09:22.238Z","type":"message"}
{"nick":"indutny","message":"2 sec","date":"2013-03-15T11:09:27.963Z","type":"message"}
{"nick":"bnoordhuis","message":"that's on the short side","date":"2013-03-15T11:09:58.536Z","type":"message"}
{"nick":"indutny","message":"ok, will run for 20 sec","date":"2013-03-15T11:10:13.249Z","type":"message"}
{"nick":"bnoordhuis","message":"also, os x","date":"2013-03-15T11:10:14.656Z","type":"message"}
{"nick":"indutny","message":"just wait a bit","date":"2013-03-15T11:10:16.875Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: man :)","date":"2013-03-15T11:10:19.211Z","type":"message"}
{"nick":"indutny","message":"run it yourself","date":"2013-03-15T11:10:21.858Z","type":"message"}
{"nick":"indutny","message":"you're too strict","date":"2013-03-15T11:10:26.834Z","type":"message"}
{"nick":"bnoordhuis","message":"i will :)","date":"2013-03-15T11:10:27.423Z","type":"message"}
{"nick":"indutny","message":"10467 ticks","date":"2013-03-15T11:10:36.686Z","type":"message"}
{"nick":"indutny","message":"is it enough?","date":"2013-03-15T11:10:38.799Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2013-03-15T11:10:41.058Z","type":"message"}
{"nick":"indutny","message":"https://gist.github.com/indutny/fd38ebf0fb88fcad195d","date":"2013-03-15T11:11:14.650Z","type":"message"}
{"nick":"bnoordhuis","message":"how come the c++ section is empty?","date":"2013-03-15T11:12:42.787Z","type":"message"}
{"nick":"bnoordhuis","message":"or doesn't that work on os x?","date":"2013-03-15T11:12:47.546Z","type":"message"}
{"nick":"bnoordhuis","action":"looks at mac-tick-profiler","date":"2013-03-15T11:12:54.186Z","type":"action"}
{"nick":"bnoordhuis","message":"err, mac-tick-processor","date":"2013-03-15T11:13:08.214Z","type":"message"}
{"nick":"bnoordhuis","message":"it _should_ work apparently, it calls out to nm","date":"2013-03-15T11:14:18.092Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: did you use nprof or d8?","date":"2013-03-15T11:14:33.242Z","type":"message"}
{"nick":"bnoordhuis","message":"d8 / mac-tick-processor","date":"2013-03-15T11:14:43.324Z","type":"message"}
{"nick":"indutny","message":"d8?","date":"2013-03-15T11:14:46.493Z","type":"message"}
{"nick":"indutny","message":"npm module","date":"2013-03-15T11:14:51.980Z","type":"message"}
{"nick":"indutny","message":"tick-processor","date":"2013-03-15T11:14:54.005Z","type":"message"}
{"nick":"stagas","reason":"Ping timeout: 246 seconds","date":"2013-03-15T11:15:05.005Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: you're using the test case from https://github.com/joyent/node/issues/5015 ? how many iterations?","date":"2013-03-15T11:16:05.129Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: indutny: did you guys already look into the uv__try_select issue or should I do it?","date":"2013-03-15T11:17:33.160Z","type":"message"}
{"nick":"piscisaureus_","message":"or rather, make an attempt to fix that","date":"2013-03-15T11:17:42.517Z","type":"message"}
{"nick":"bnoordhuis","message":"i thought fedor was looking into that?","date":"2013-03-15T11:19:16.006Z","type":"message"}
{"nick":"bnoordhuis","message":"should be easy to fix though","date":"2013-03-15T11:19:36.975Z","type":"message"}
{"nick":"stagas","date":"2013-03-15T11:21:09.946Z","type":"join"}
{"nick":"sgallagh","date":"2013-03-15T11:23:29.124Z","type":"join"}
{"nick":"stagas_","date":"2013-03-15T11:27:37.873Z","type":"join"}
{"nick":"bnoordhuis","message":"$ D8_PATH=$PWD/deps/v8/out/native deps/v8/tools/linux-tick-processor v8.log","date":"2013-03-15T11:27:59.088Z","type":"message"}
{"nick":"bnoordhuis","message":"Segmentation fault (core dumped)","date":"2013-03-15T11:27:59.922Z","type":"message"}
{"nick":"bnoordhuis","message":"^ grr","date":"2013-03-15T11:28:07.441Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: performance issue?","date":"2013-03-15T11:29:27.109Z","type":"message"}
{"nick":"stagas","reason":"Ping timeout: 252 seconds","date":"2013-03-15T11:30:02.791Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: ^","date":"2013-03-15T11:30:27.073Z","type":"message"}
{"nick":"indutny","message":"wtf","date":"2013-03-15T11:30:30.601Z","type":"message"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-03-15T11:30:39.802Z","type":"quit"}
{"nick":"stagas_","reason":"Ping timeout: 240 seconds","date":"2013-03-15T11:32:27.524Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: it's d8 being stupid. if you replace v8.log with $PWD/v8.log, it works","date":"2013-03-15T11:32:34.361Z","type":"message"}
{"nick":"stagas","date":"2013-03-15T11:33:03.369Z","type":"join"}
{"nick":"bnoordhuis","message":"um, with x64.debug anyway. the release build still segfaults...","date":"2013-03-15T11:33:35.716Z","type":"message"}
{"nick":"bnoordhuis","action":"adds one more thing to his todo list...","date":"2013-03-15T11:34:07.581Z","type":"action"}
{"nick":"bnoordhuis","message":"and if the v8.log is big enough, the debug build crashes too","date":"2013-03-15T11:35:57.021Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: the issue where try_select is called on every accepted tcp socket","date":"2013-03-15T11:37:00.249Z","type":"message"}
{"nick":"sgallagh","date":"2013-03-15T11:40:18.426Z","type":"join"}
{"nick":"stagas_","date":"2013-03-15T11:46:16.613Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 245 seconds","date":"2013-03-15T11:47:57.043Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-15T11:48:11.107Z","type":"nick"}
{"nick":"bnoordhuis","message":"https://gist.github.com/bnoordhuis/5efa131ca3bbf9b3388a <- includes libc/libpthreads symbols in the tick profiler output","date":"2013-03-15T11:53:53.344Z","type":"message"}
{"nick":"bnoordhuis","message":"1550 ticks vs 12751? whaaa?","date":"2013-03-15T11:58:13.282Z","type":"message"}
{"nick":"bnoordhuis","message":"144    1.1%    1.2%  LazyCompile: *ReadableState _stream_readable.js:32 <- i hate how those stream2 things show up everywhere now","date":"2013-03-15T12:05:06.092Z","type":"message"}
{"nick":"bnoordhuis","message":"but i guess the conclusion has to be that v0.10 creates many, many more buffers","date":"2013-03-15T12:05:44.238Z","type":"message"}
{"nick":"bnoordhuis","message":"and spends a lot more time gc'ing as a result","date":"2013-03-15T12:05:49.780Z","type":"message"}
{"nick":"bnoordhuis","message":"[GC] 16.1% vs 3.3%","date":"2013-03-15T12:06:25.633Z","type":"message"}
{"nick":"bnoordhuis","message":":sad panda:","date":"2013-03-15T12:06:30.373Z","type":"message"}
{"nick":"stagas","reason":"Ping timeout: 260 seconds","date":"2013-03-15T12:06:35.241Z","type":"quit"}
{"nick":"indutny","message":":)","date":"2013-03-15T12:09:38.440Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 260 seconds","date":"2013-03-15T12:15:03.855Z","type":"quit"}
{"nick":"stagas","date":"2013-03-15T12:24:33.363Z","type":"join"}
{"nick":"stagas_","date":"2013-03-15T12:29:46.692Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 255 seconds","date":"2013-03-15T12:31:23.472Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-15T12:31:27.285Z","type":"nick"}
{"nick":"stagas","reason":"Ping timeout: 264 seconds","date":"2013-03-15T12:41:30.353Z","type":"quit"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-03-15T12:43:00.743Z","type":"nick"}
{"nick":"indutny","message":"bnoordhuis: yt?","date":"2013-03-15T12:46:34.438Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-15T12:47:16.304Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: ih","date":"2013-03-15T12:49:23.542Z","type":"message"}
{"nick":"indutny","message":"https://github.com/joyent/libuv/pull/745","date":"2013-03-15T12:49:46.780Z","type":"message"}
{"nick":"bnoordhuis","message":" 16  [GC]:                                                                           ","date":"2013-03-15T12:49:52.731Z","type":"message"}
{"nick":"bnoordhuis","message":" 17    ticks  total  nonlib   name                                                   ","date":"2013-03-15T12:49:55.824Z","type":"message"}
{"nick":"bnoordhuis","message":" 18    1974   20.5% ","date":"2013-03-15T12:49:58.847Z","type":"message"}
{"nick":"bnoordhuis","message":"^ ye gods","date":"2013-03-15T12:50:01.282Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-03-15T12:50:07.718Z","type":"message"}
{"nick":"indutny","message":"but its 2x slower","date":"2013-03-15T12:50:17.223Z","type":"message"}
{"nick":"indutny","message":"so there's something more than just GC","date":"2013-03-15T12:50:30.718Z","type":"message"}
{"nick":"indutny","message":"30% more","date":"2013-03-15T12:50:40.286Z","type":"message"}
{"nick":"bnoordhuis","message":"well, i know what's causing it","date":"2013-03-15T12:51:05.445Z","type":"message"}
{"nick":"indutny","message":"what?","date":"2013-03-15T12:51:11.437Z","type":"message"}
{"nick":"bnoordhuis","message":"when you call .update('string'), it converts it to a buffer","date":"2013-03-15T12:51:31.369Z","type":"message"}
{"nick":"bnoordhuis","message":"that's not all but one sec, biab :)","date":"2013-03-15T12:52:07.818Z","type":"message"}
{"nick":"indutny","message":"yeah, that's what I was talking about","date":"2013-03-15T12:52:20.175Z","type":"message"}
{"nick":"indutny","message":"it was handling it internally","date":"2013-03-15T12:52:23.638Z","type":"message"}
{"nick":"indutny","message":"before that","date":"2013-03-15T12:52:25.781Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-03-15T12:52:50.070Z","type":"quit"}
{"nick":"bnoordhuis","message":"okay, back","date":"2013-03-15T12:57:02.726Z","type":"message"}
{"nick":"bnoordhuis","message":"so the thing i don't understand is why crypto.DEFAULT_ENCODING = 'binary' doesn't fix it","date":"2013-03-15T12:57:15.732Z","type":"message"}
{"nick":"bnoordhuis","message":"that should stop it from trying to allocate buffers all the time","date":"2013-03-15T12:57:26.003Z","type":"message"}
{"nick":"indutny","message":"erm","date":"2013-03-15T12:57:42.962Z","type":"message"}
{"nick":"bnoordhuis","message":"you're going to say 'well, it converts the buffer to binary after the fact'","date":"2013-03-15T12:58:33.081Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-15T12:58:57.318Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-03-15T13:01:17.015Z","type":"quit"}
{"nick":"rendar_","date":"2013-03-15T13:03:40.546Z","type":"join"}
{"nick":"rendar","reason":"Ping timeout: 264 seconds","date":"2013-03-15T13:05:30.452Z","type":"quit"}
{"nick":"rendar","date":"2013-03-15T13:06:29.937Z","type":"join"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-03-15T13:07:33.873Z","type":"nick"}
{"nick":"bnoordhuis","message":"indutny: i move we revert crypto to 0.8 because i don't see any way to fix it","date":"2013-03-15T13:07:37.153Z","type":"message"}
{"nick":"bnoordhuis","message":"and don't say \"but with my patch it's only twice as slow\" :-/","date":"2013-03-15T13:08:14.909Z","type":"message"}
{"nick":"rendar_","reason":"Ping timeout: 252 seconds","date":"2013-03-15T13:08:47.478Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-03-15T13:09:02.534Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-03-15T13:11:26.333Z","type":"join"}
{"nick":"`3rdEden","message":"bnoordhuis: i'll be more then happy with an alternate api as well for none streaming crypto","date":"2013-03-15T13:13:45.337Z","type":"message"}
{"nick":"`3rdEden","message":"(if it yields better performance)","date":"2013-03-15T13:14:18.740Z","type":"message"}
{"nick":"bnoordhuis","message":"`3rdEden: the performance regression we have now is not acceptable","date":"2013-03-15T13:15:57.255Z","type":"message"}
{"nick":"bnoordhuis","message":"a better api is something we can consider for v0.12 but it's not something to rush into v0.10","date":"2013-03-15T13:16:13.310Z","type":"message"}
{"nick":"`3rdEden","message":"bnoordhuis: agreed","date":"2013-03-15T13:16:41.827Z","type":"message"}
{"nick":"Kakera","reason":"Ping timeout: 264 seconds","date":"2013-03-15T13:31:07.594Z","type":"quit"}
{"nick":"abrener","reason":"Ping timeout: 260 seconds","date":"2013-03-15T13:34:52.122Z","type":"quit"}
{"nick":"abrener","date":"2013-03-15T13:36:30.763Z","type":"join"}
{"nick":"c4milo","date":"2013-03-15T13:36:57.340Z","type":"join"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-03-15T13:37:24.961Z","type":"nick"}
{"nick":"abrener","reason":"Read error: Connection reset by peer","date":"2013-03-15T13:41:04.498Z","type":"quit"}
{"nick":"abrener","date":"2013-03-15T13:41:16.278Z","type":"join"}
{"nick":"felixge","date":"2013-03-15T13:43:17.117Z","type":"join"}
{"nick":"abrener","reason":"Ping timeout: 256 seconds","date":"2013-03-15T13:49:43.724Z","type":"quit"}
{"nick":"isaacs","message":"`3rdEden: sure.","date":"2013-03-15T13:52:20.008Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: there's not much we can do without making crypto things not stream","date":"2013-03-15T13:52:27.701Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i think maybe we should just try to get result = crypto.md5(input) for .10.1","date":"2013-03-15T13:52:52.382Z","type":"message"}
{"nick":"isaacs","message":"i mean, the overhead is that we call a JavaScript constructor and return a stream","date":"2013-03-15T13:53:14.102Z","type":"message"}
{"nick":"isaacs","message":"if we want to say that you can do fs.createReadStream(file).pipe(crypto.createHash('sha256')) then that means we have to call a constructor","date":"2013-03-15T13:54:00.368Z","type":"message"}
{"nick":"isaacs","message":"set up buffering, etc.  the whole bit","date":"2013-03-15T13:54:05.354Z","type":"message"}
{"nick":"isaacs","message":"the alternative is that crypto streams dont' actually construct until you write or something.","date":"2013-03-15T13:54:29.384Z","type":"message"}
{"nick":"isaacs","message":"but again, we still have the same regression","date":"2013-03-15T13:54:40.282Z","type":"message"}
{"nick":"isaacs","message":"anyway, i've gotta go.  i'll be visiting family for the next few days.","date":"2013-03-15T13:56:05.870Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i think the alternative (making crypto streams not be streams) is also unacceptable.","date":"2013-03-15T13:56:18.019Z","type":"message"}
{"nick":"`3rdEden","message":"but this performance is also unacceptable","date":"2013-03-15T13:56:58.372Z","type":"message"}
{"nick":"`3rdEden","message":"it's a hard problem","date":"2013-03-15T13:57:18.093Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: oh, i think i misread your suggestion.  are you saying, keep the streams stuff, but move the bufferization into C++ like it was?","date":"2013-03-15T13:57:50.436Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: no, i mean simply revert to v0.8's crypto implementation","date":"2013-03-15T13:58:12.049Z","type":"message"}
{"nick":"bnoordhuis","message":"because i don't see any way to fix the current performance regression","date":"2013-03-15T13:58:28.546Z","type":"message"}
{"nick":"isaacs","message":"ugh.  that's terrible.","date":"2013-03-15T13:59:08.398Z","type":"message"}
{"nick":"bnoordhuis","message":"sure. but so is an 8x performance drop","date":"2013-03-15T13:59:28.497Z","type":"message"}
{"nick":"isaacs","message":"can you add a benchmark script to benchmarks/crypto/?","date":"2013-03-15T14:00:34.166Z","type":"message"}
{"nick":"isaacs","message":"right now the only one there is for cipher stream","date":"2013-03-15T14:00:40.893Z","type":"message"}
{"nick":"indutny","message":"isaacs: have you seen my patch?","date":"2013-03-15T14:01:18.979Z","type":"message"}
{"nick":"indutny","message":"I think even with crypto reverting","date":"2013-03-15T14:01:36.700Z","type":"message"}
{"nick":"indutny","message":"we'll need it","date":"2013-03-15T14:01:40.709Z","type":"message"}
{"nick":"indutny","message":"to get desirable speed","date":"2013-03-15T14:01:50.131Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2013-03-15T14:02:22.993Z","type":"message"}
{"nick":"isaacs","message":"i haven't looked at it","date":"2013-03-15T14:02:28.221Z","type":"message"}
{"nick":"isaacs","message":"please don't do anything drastic yet.  i'd like to look at this carefully, but i'm about to get on a plane and go to see family for the weekend.","date":"2013-03-15T14:03:04.679Z","type":"message"}
{"nick":"bnoordhuis","message":"seems you can't go yet, isaac","date":"2013-03-15T14:03:34.924Z","type":"message"}
{"nick":"bnoordhuis","message":"people are complaining npmjs.org is unreachable","date":"2013-03-15T14:03:43.259Z","type":"message"}
{"nick":"c4milo","reason":"Read error: Connection reset by peer","date":"2013-03-15T14:04:06.028Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-15T14:04:33.027Z","type":"join"}
{"nick":"isaacs","message":"fixed","date":"2013-03-15T14:05:09.412Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-03-15T14:06:21.888Z","type":"quit"}
{"nick":"isaacs","message":"hm.  looks like i got dos'ed.","date":"2013-03-15T14:06:28.441Z","type":"message"}
{"nick":"isaacs","message":"by a bot trying to find like a zillion php scripts","date":"2013-03-15T14:06:37.582Z","type":"message"}
{"nick":"isaacs","message":"how interesting :)","date":"2013-03-15T14:06:44.006Z","type":"message"}
{"nick":"isaacs","message":"ok, i'm out.","date":"2013-03-15T14:06:54.252Z","type":"message"}
{"nick":"`3rdEden","message":"have fun","date":"2013-03-15T14:07:05.436Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-15T14:07:12.566Z","type":"join"}
{"nick":"AvianFlu","date":"2013-03-15T14:07:14.145Z","type":"join"}
{"nick":"bnoordhuis","message":"travel safely, don't fly ryan air","date":"2013-03-15T14:08:10.598Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-03-15T14:15:26.393Z","type":"quit"}
{"nick":"bradleymeck","message":"fun time with curl and libuv","date":"2013-03-15T14:19:37.656Z","type":"message"}
{"nick":"bnoordhuis","message":"bradleymeck: sounds like you have a wild party going on","date":"2013-03-15T14:21:47.247Z","type":"message"}
{"nick":"bradleymeck","message":"always ;)","date":"2013-03-15T14:22:00.402Z","type":"message"}
{"nick":"Kakera","date":"2013-03-15T14:32:42.919Z","type":"join"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-03-15T14:40:07.601Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-03-15T14:41:53.389Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-15T14:46:33.234Z","type":"quit"}
{"nick":"felixge","reason":"Quit: http://www.debuggable.com/","date":"2013-03-15T14:48:05.730Z","type":"quit"}
{"nick":"bradleymeck","message":"curl does not like getting told what to write… any way to just pop off x number of bytes from a uv_pipe_t for http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTWRITEFUNCTION","date":"2013-03-15T14:48:34.393Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 256 seconds","date":"2013-03-15T14:50:21.745Z","type":"quit"}
{"nick":"bnoordhuis","message":"bradleymeck: not sure what you mean. what are you trying to do?","date":"2013-03-15T14:50:39.336Z","type":"message"}
{"nick":"bradleymeck","message":"bnoordhuis: trying to pipe a child process's fds to libcurl","date":"2013-03-15T14:51:45.306Z","type":"message"}
{"nick":"bnoordhuis","message":"bradleymeck: you mean connecting the child's stdio to a libcurl socket?","date":"2013-03-15T14:59:15.848Z","type":"message"}
{"nick":"bradleymeck","message":"nope, i need to add line prefixes to tell which fd said which line","date":"2013-03-15T14:59:42.319Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, you lost me","date":"2013-03-15T15:00:11.321Z","type":"message"}
{"nick":"bradleymeck","message":"bnoordhuis: when i get data on stderr/stdout on a child I want to 1. send that up to libcurl 2. specify which fd (stdout/stderr) sent the data when it is recieved by wherever libcurl is sending it","date":"2013-03-15T15:01:09.884Z","type":"message"}
{"nick":"bradleymeck","message":"i have a spec of the thing sec","date":"2013-03-15T15:01:47.376Z","type":"message"}
{"nick":"bradleymeck","message":"https://gist.github.com/bmeck/5162997 <-- in a very resource constrained system","date":"2013-03-15T15:02:11.116Z","type":"message"}
{"nick":"bnoordhuis","message":"ah right, you read the child's stdio and send that to libcurl","date":"2013-03-15T15:02:54.005Z","type":"message"}
{"nick":"bradleymeck","message":"might just have to make a simple uv_buf_t queue structure...","date":"2013-03-15T15:05:14.299Z","type":"message"}
{"nick":"betta","date":"2013-03-15T15:06:56.363Z","type":"join"}
{"nick":"betta","message":"hi","date":"2013-03-15T15:07:03.522Z","type":"message"}
{"nick":"bnoordhuis","message":"hey","date":"2013-03-15T15:08:09.361Z","type":"message"}
{"nick":"betta","message":"can someone spare a minute and help me fix a problem of mine? i just can't find the reason myself :(","date":"2013-03-15T15:09:54.423Z","type":"message"}
{"nick":"betta","message":"I get EXC_BAD_ACCESS for the next pointer in the call to ngx_queue_remove(&handle->handle_queue) in uv_close()","date":"2013-03-15T15:11:16.597Z","type":"message"}
{"nick":"betta","message":"It only happens if I stop a timer and \"restart\" it","date":"2013-03-15T15:11:40.427Z","type":"message"}
{"nick":"betta","message":"if I don't do this everything works just fine :/","date":"2013-03-15T15:11:56.661Z","type":"message"}
{"nick":"bnoordhuis","message":"betta: stop and restart in the timer callback?","date":"2013-03-15T15:12:05.354Z","type":"message"}
{"nick":"betta","message":"no","date":"2013-03-15T15:12:11.976Z","type":"message"}
{"nick":"betta","message":"I wan't to debounce the FSEvents and \"restart\" the timer in the uv_fs_event callback","date":"2013-03-15T15:12:50.148Z","type":"message"}
{"nick":"bnoordhuis","message":"debounce? i'm not following","date":"2013-03-15T15:14:22.429Z","type":"message"}
{"nick":"bnoordhuis","message":"do you have some code i can look at?","date":"2013-03-15T15:14:34.940Z","type":"message"}
{"nick":"betta","message":"ok","date":"2013-03-15T15:15:06.613Z","type":"message"}
{"nick":"betta","message":"(fyi: debouncing the inotify (etc.) events since UV_CHANGE not only happens for a file content change but also if the timestamp of the file changes, which happens normally if you write to a file)","date":"2013-03-15T15:16:27.401Z","type":"message"}
{"nick":"abrener","date":"2013-03-15T15:17:32.212Z","type":"join"}
{"nick":"betta","message":"bnoordhuis http://pastebin.com/PKge2ALZ","date":"2013-03-15T15:19:50.815Z","type":"message"}
{"nick":"betta","message":"(line 39-40)","date":"2013-03-15T15:20:23.654Z","type":"message"}
{"nick":"zot1","date":"2013-03-15T15:21:00.016Z","type":"join"}
{"nick":"bnoordhuis","message":"betta: why do you malloc the timer handle?","date":"2013-03-15T15:21:45.291Z","type":"message"}
{"nick":"zot","reason":"Ping timeout: 252 seconds","date":"2013-03-15T15:21:53.373Z","type":"quit"}
{"nick":"bnoordhuis","message":"also, assert(uv_timer_init(handle->loop, ctx->timer) == 0) is dangerous","date":"2013-03-15T15:22:02.057Z","type":"message"}
{"nick":"bnoordhuis","message":"it gets compiled away when NDEBUG is defined","date":"2013-03-15T15:22:12.973Z","type":"message"}
{"nick":"betta","message":"oh","date":"2013-03-15T15:22:22.990Z","type":"message"}
{"nick":"betta","message":"this file watcher is coupled with a tcp server","date":"2013-03-15T15:23:26.703Z","type":"message"}
{"nick":"betta","message":"of which there are a unknown number of instances","date":"2013-03-15T15:23:44.540Z","type":"message"}
{"nick":"betta","message":"(and handles of some type etc.)","date":"2013-03-15T15:23:58.998Z","type":"message"}
{"nick":"betta","message":"if I want to stop the server I need to close//unref all the handles right?","date":"2013-03-15T15:24:20.068Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2013-03-15T15:24:23.873Z","type":"message"}
{"nick":"betta","message":"currently I'm doing this by allocating everything on the heap","date":"2013-03-15T15:24:41.467Z","type":"message"}
{"nick":"betta","message":"in the asynchornous close callback for this server I will walk through all handles and close them","date":"2013-03-15T15:25:10.905Z","type":"message"}
{"nick":"betta","message":"=> the server loop will \"quit\"","date":"2013-03-15T15:25:33.374Z","type":"message"}
{"nick":"bnoordhuis","message":"that works","date":"2013-03-15T15:26:06.334Z","type":"message"}
{"nick":"betta","message":"yeah","date":"2013-03-15T15:26:13.713Z","type":"message"}
{"nick":"betta","message":"works flawless","date":"2013-03-15T15:26:17.256Z","type":"message"}
{"nick":"betta","message":"but I just don't get why stopping and (re)starting the timer handle crashes my application","date":"2013-03-15T15:26:48.445Z","type":"message"}
{"nick":"bnoordhuis","message":"i suspect you're either not initializing it properly or corrupting it somehow (use after free?)","date":"2013-03-15T15:28:32.851Z","type":"message"}
{"nick":"bnoordhuis","message":"what does valgrind say?","date":"2013-03-15T15:28:37.151Z","type":"message"}
{"nick":"betta","message":"hmm ok... I will try to debug this with valgrind","date":"2013-03-15T15:30:41.078Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-03-15T15:31:47.825Z","type":"join"}
{"nick":"betta","message":"but I'm not so sure about this, since I have set breakpoints in uv__finish_close and there \"shouldn't\" therefore be a call to free","date":"2013-03-15T15:32:22.292Z","type":"message"}
{"nick":"betta","message":"(the one and only delete-function at the end of the snippet is never called (\"assert(0)\")","date":"2013-03-15T15:33:05.566Z","type":"message"}
{"nick":"bnoordhuis","message":"betta: if valgrind doesn't turn up anything and you can turn it into a standalone test case, i'll look into it","date":"2013-03-15T15:33:26.546Z","type":"message"}
{"nick":"betta","message":"ok","date":"2013-03-15T15:33:33.132Z","type":"message"}
{"nick":"AvianFlu","date":"2013-03-15T15:34:17.077Z","type":"join"}
{"nick":"AvianFlu_","date":"2013-03-15T15:38:07.115Z","type":"join"}
{"nick":"AvianFlu","reason":"Disconnected by services","date":"2013-03-15T15:38:57.888Z","type":"quit"}
{"nick":"AvianFlu_","new_nick":"AvianFlu","date":"2013-03-15T15:39:02.088Z","type":"nick"}
{"nick":"dap","date":"2013-03-15T15:41:39.998Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-03-15T15:44:25.111Z","type":"nick"}
{"nick":"betta","message":"bnoordhuis I can't check it with valgrind - it seems valgrind still doesn't play well with OS X 10.8","date":"2013-03-15T15:47:38.309Z","type":"message"}
{"nick":"indutny","message":"it doesn't work at all","date":"2013-03-15T15:50:42.873Z","type":"message"}
{"nick":"AvianFlu","reason":"Ping timeout: 252 seconds","date":"2013-03-15T15:59:32.667Z","type":"quit"}
{"nick":"betta","message":"aha","date":"2013-03-15T16:01:16.400Z","type":"message"}
{"nick":"betta","message":"I think I found the reason for my problem bnoordhuis: http://pastebin.com/PKge2ALZ - line 30/31","date":"2013-03-15T16:02:11.976Z","type":"message"}
{"nick":"betta","message":"(even if uv_close() weren't commented out)","date":"2013-03-15T16:02:30.785Z","type":"message"}
{"nick":"`3rdEden","new_nick":"`3E|GONER","date":"2013-03-15T16:03:43.213Z","type":"nick"}
{"nick":"bnoordhuis","message":"wrong ordering of actions?","date":"2013-03-15T16:03:55.904Z","type":"message"}
{"nick":"betta","message":"I'll test it in a few seconds but I'm pretty sure that \"overwriting\" the handle before it's closed is a bad idea^^","date":"2013-03-15T16:04:47.253Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-15T16:04:57.301Z","type":"quit"}
{"nick":"betta","message":"yup","date":"2013-03-15T16:08:20.147Z","type":"message"}
{"nick":"betta","message":"that was the problem","date":"2013-03-15T16:08:25.338Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-15T16:08:43.126Z","type":"quit"}
{"nick":"betta","message":"god... I am so stupid ._.","date":"2013-03-15T16:08:59.552Z","type":"message"}
{"nick":"betta","message":"well thanks anyways bnoordhuis :)","date":"2013-03-15T16:09:35.621Z","type":"message"}
{"nick":"bnoordhuis","message":"np :)","date":"2013-03-15T16:12:03.929Z","type":"message"}
{"nick":"tjfontaine","message":"so with that stat change, what's next?","date":"2013-03-15T16:12:59.221Z","type":"message"}
{"nick":"benoitc","date":"2013-03-15T16:13:06.771Z","type":"join"}
{"nick":"bnoordhuis","message":"tjfontaine: write the windows side of things and get piscisaureus_ to review it?","date":"2013-03-15T16:15:34.819Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-03-15T16:16:06.514Z","type":"nick"}
{"nick":"tjfontaine","message":"the windows things are written, they're just waiting his stamp then I guess","date":"2013-03-15T16:17:14.688Z","type":"message"}
{"nick":"tjfontaine","message":"or his next notes","date":"2013-03-15T16:17:28.736Z","type":"message"}
{"nick":"betta","reason":"Quit: - nbs-irc 2.39 - www\u000f.nbs-irc\u000f.net -","date":"2013-03-15T16:18:50.594Z","type":"quit"}
{"nick":"zot1","message":"so when adding things to the eventloop in node v0.8.x, i can just use the libuv API directly, with default loop, correct?","date":"2013-03-15T16:19:05.604Z","type":"message"}
{"nick":"bnoordhuis","message":"zot1: yep","date":"2013-03-15T16:20:20.357Z","type":"message"}
{"nick":"zot1","message":"cool.  fijn weekend :)","date":"2013-03-15T16:20:50.898Z","type":"message"}
{"nick":"zot1","reason":"Quit: later :)","date":"2013-03-15T16:21:28.380Z","type":"quit"}
{"nick":"`3E|GONER","reason":"Remote host closed the connection","date":"2013-03-15T16:24:54.836Z","type":"quit"}
{"nick":"brianc1","date":"2013-03-15T16:25:37.139Z","type":"part"}
{"nick":"abrener","reason":"Ping timeout: 245 seconds","date":"2013-03-15T16:26:17.085Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-v0.10\u0002: #2 \u00037UNSTABLE\u000f linux (2/183) osx (1/183) windows (5/184) smartos (5/183) http://jenkins.nodejs.org/job/libuv-v0.10/2/","date":"2013-03-15T16:26:55.900Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-15T16:40:29.464Z","type":"quit"}
{"nick":"trevnorris","date":"2013-03-15T16:43:00.310Z","type":"join"}
{"nick":"benoitc","date":"2013-03-15T16:44:36.476Z","type":"join"}
{"nick":"trevnorris","message":"indutny: hey dude, have a moment?","date":"2013-03-15T16:44:52.219Z","type":"message"}
{"nick":"perezd","date":"2013-03-15T16:45:36.889Z","type":"join"}
{"nick":"perezd","reason":"Client Quit","date":"2013-03-15T16:45:36.889Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-15T16:56:50.184Z","type":"join"}
{"nick":"stagas","date":"2013-03-15T16:57:56.187Z","type":"join"}
{"nick":"indutny","message":"trevnorris: hopefuly yes","date":"2013-03-15T16:59:09.045Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-03-15T17:07:27.588Z","type":"nick"}
{"nick":"piscisaureus_","reason":"Ping timeout: 260 seconds","date":"2013-03-15T17:07:35.195Z","type":"quit"}
{"nick":"mikeal1","date":"2013-03-15T17:09:09.848Z","type":"join"}
{"nick":"mikeal","reason":"Read error: Connection reset by peer","date":"2013-03-15T17:09:31.038Z","type":"quit"}
{"nick":"trevnorris","message":"indutny: i'm trying to create an example for the v8 team that demonstrates that using Persistent and MakeWeak are too expensive for some simpler operations i'm looking for.","date":"2013-03-15T17:12:21.422Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: what simple operations?","date":"2013-03-15T17:12:51.952Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: well, simple in my mind. it's that I want to be able to check at some time in the indeterminate future whether a pointer to a js object has been gc'd (really whether it's still \"reachable\")","date":"2013-03-15T17:13:40.971Z","type":"message"}
{"nick":"trevnorris","message":"i don't need a callback from the object letting me know it's about to be gc'd","date":"2013-03-15T17:13:56.845Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: mraleph1 explained that currently the only way to know when a handle is no longer reachable is to Persist and MakeWeak.","date":"2013-03-15T17:16:18.833Z","type":"message"}
{"nick":"trevnorris","message":"but that's a huge performance hit.","date":"2013-03-15T17:16:26.995Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-15T17:16:39.034Z","type":"quit"}
{"nick":"bnoordhuis","message":"trevnorris: how would that work, implementation-wise?","date":"2013-03-15T17:17:20.192Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: part of the es6 spec has WeakMaps, which allow me to set a key-value pair, but neither will prevent the object from being gc'd.","date":"2013-03-15T17:18:19.528Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: so I can set a key, then check if the value still exists some time in the future.","date":"2013-03-15T17:18:33.007Z","type":"message"}
{"nick":"trevnorris","message":"if it doesn't, then it's been gc'd.","date":"2013-03-15T17:18:44.357Z","type":"message"}
{"nick":"trevnorris","message":"(but that's on the js side, and i'm looking for a cc solution)","date":"2013-03-15T17:18:59.524Z","type":"message"}
{"nick":"benoitc","date":"2013-03-15T17:19:36.632Z","type":"join"}
{"nick":"bnoordhuis","message":"trevnorris: WeakMap means both the key and the value are weak or just the value?","date":"2013-03-15T17:20:14.313Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: i believe both, since anything can be a key, including functions/object/etc.","date":"2013-03-15T17:22:09.723Z","type":"message"}
{"nick":"qmx","new_nick":"qmx|lunch","date":"2013-03-15T17:24:11.993Z","type":"nick"}
{"nick":"trevnorris","message":"bnoordhuis: as I understand, v8 doesn't currently have a way to store such a reference to a Local Handle, so i want to open a discussion with the v8 team about a possible api extension.","date":"2013-03-15T17:27:00.299Z","type":"message"}
{"nick":"indutny","message":"trevnorris: there're no other way to check it","date":"2013-03-15T17:29:38.271Z","type":"message"}
{"nick":"indutny","message":"you need to keep list of handles you want to persist or check if they're alive","date":"2013-03-15T17:29:51.061Z","type":"message"}
{"nick":"indutny","message":"I don't think there're any other way of receiving before-gc callbacks","date":"2013-03-15T17:30:05.665Z","type":"message"}
{"nick":"indutny","message":"because GCed data is just discarded","date":"2013-03-15T17:30:11.809Z","type":"message"}
{"nick":"trevnorris","message":"indutny: how does v8 keep track of all js objects internally so cheaply?","date":"2013-03-15T17:31:31.284Z","type":"message"}
{"nick":"indutny","message":"it doesn't","date":"2013-03-15T17:31:39.903Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-03-15T17:31:42.282Z","type":"message"}
{"nick":"_ritch","date":"2013-03-15T17:31:48.162Z","type":"join"}
{"nick":"indutny","message":"that's called copying garbage collector","date":"2013-03-15T17:31:55.669Z","type":"message"}
{"nick":"indutny","message":"(its actually only half of that, but anyway)","date":"2013-03-15T17:32:07.540Z","type":"message"}
{"nick":"indutny","message":"it just creates new heap","date":"2013-03-15T17:32:24.539Z","type":"message"}
{"nick":"indutny","message":"and copies everything alive to it","date":"2013-03-15T17:32:42.696Z","type":"message"}
{"nick":"indutny","message":"and discard everything else","date":"2013-03-15T17:32:46.122Z","type":"message"}
{"nick":"indutny","message":"and to figure out what is alive it must follow references","date":"2013-03-15T17:33:00.969Z","type":"message"}
{"nick":"indutny","message":"from global and current scope","date":"2013-03-15T17:33:06.853Z","type":"message"}
{"nick":"indutny","message":"recursively","date":"2013-03-15T17:33:14.431Z","type":"message"}
{"nick":"indutny","message":"is that clear?","date":"2013-03-15T17:33:18.044Z","type":"message"}
{"nick":"trevnorris","message":"indutny: well, maybe it'd be simpler to explain the issue and you can correct my question.","date":"2013-03-15T17:33:29.638Z","type":"message"}
{"nick":"trevnorris","message":"and yeah.","date":"2013-03-15T17:33:33.564Z","type":"message"}
{"nick":"trevnorris","message":"indutny: right now with buffer pools we have no way of knowing when a chunk of the pool has been freed up for reallocation.","date":"2013-03-15T17:33:58.722Z","type":"message"}
{"nick":"trevnorris","message":"indutny: and persisting each chunk is way too expensive","date":"2013-03-15T17:34:14.483Z","type":"message"}
{"nick":"indutny","message":"hm....","date":"2013-03-15T17:34:45.890Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't think a Persistent is in itself all that expensive","date":"2013-03-15T17:34:47.069Z","type":"message"}
{"nick":"bnoordhuis","message":"MakeWeak however is","date":"2013-03-15T17:34:49.767Z","type":"message"}
{"nick":"bnoordhuis","message":"the gc has to special-case for that","date":"2013-03-15T17:35:00.599Z","type":"message"}
{"nick":"indutny","message":"heh","date":"2013-03-15T17:35:09.030Z","type":"message"}
{"nick":"indutny","message":"that's fun :)","date":"2013-03-15T17:35:11.483Z","type":"message"}
{"nick":"indutny","message":"but Ben is right","date":"2013-03-15T17:35:29.230Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: in case you're wondering, a Persistent is just an artificial gc root","date":"2013-03-15T17:35:51.945Z","type":"message"}
{"nick":"trevnorris","message":"hm. interesting.","date":"2013-03-15T17:36:02.713Z","type":"message"}
{"nick":"trevnorris","message":"so it seems i'm asking the wrong question. either of you have an idea?","date":"2013-03-15T17:37:10.737Z","type":"message"}
{"nick":"bnoordhuis","message":"well, not to discourage you, but i don't think what you want is possible","date":"2013-03-15T17:37:35.985Z","type":"message"}
{"nick":"bnoordhuis","message":"i have some ideas about adding a native ByteArray type to v8","date":"2013-03-15T17:38:04.841Z","type":"message"}
{"nick":"bnoordhuis","message":"even did some experiments","date":"2013-03-15T17:38:07.970Z","type":"message"}
{"nick":"bnoordhuis","message":"but that's an incremental improvement at best","date":"2013-03-15T17:38:15.100Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-03-15T17:38:42.503Z","type":"message"}
{"nick":"indutny","message":"this won't work well","date":"2013-03-15T17:38:47.623Z","type":"message"}
{"nick":"indutny","message":"believe me","date":"2013-03-15T17:38:50.628Z","type":"message"}
{"nick":"indutny","message":"only if it will be located in non-moving heap","date":"2013-03-15T17:38:57.967Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-15T17:39:07.655Z","type":"quit"}
{"nick":"indutny","message":"otherwise using it from C would be a hell","date":"2013-03-15T17:39:07.863Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, that's what i did - a separate large object heap","date":"2013-03-15T17:39:11.544Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: does v8 support non-moving GC?","date":"2013-03-15T17:39:21.002Z","type":"message"}
{"nick":"indutny","message":"I believe it should be as slow as Persistent + MakeWeak","date":"2013-03-15T17:39:43.571Z","type":"message"}
{"nick":"indutny","message":"since it'll need to keep freelists and everything","date":"2013-03-15T17:39:51.539Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't think so but i didn't get that far yet :)","date":"2013-03-15T17:40:07.483Z","type":"message"}
{"nick":"indutny","message":"heh","date":"2013-03-15T17:40:19.910Z","type":"message"}
{"nick":"indutny","message":"well, what I want to say","date":"2013-03-15T17:40:26.243Z","type":"message"}
{"nick":"indutny","message":"is that in O(fn) fn will be the same for this two solutions","date":"2013-03-15T17:40:39.180Z","type":"message"}
{"nick":"indutny","message":"it might be just a (* c) difference","date":"2013-03-15T17:40:53.887Z","type":"message"}
{"nick":"indutny","message":"where c is not that big","date":"2013-03-15T17:40:59.251Z","type":"message"}
{"nick":"bnoordhuis","message":"well, it doesn't keep a reference to a SlowBuffer","date":"2013-03-15T17:41:11.127Z","type":"message"}
{"nick":"indutny","message":"so does it support this?","date":"2013-03-15T17:41:12.245Z","type":"message"}
{"nick":"bnoordhuis","message":"so that's a win","date":"2013-03-15T17:41:14.083Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-03-15T17:41:21.518Z","type":"message"}
{"nick":"indutny","message":"but what about non-moving","date":"2013-03-15T17:41:26.205Z","type":"message"}
{"nick":"bnoordhuis","message":"a ByteArray doesn't have to be non-moving all the time, only when some async c code has a reference to its memory","date":"2013-03-15T17:41:59.438Z","type":"message"}
{"nick":"indutny","message":"and?","date":"2013-03-15T17:42:12.227Z","type":"message"}
{"nick":"indutny","message":"how it could be \"not non-moving all the time\"","date":"2013-03-15T17:42:24.740Z","type":"message"}
{"nick":"bnoordhuis","message":"so you'd need something like ByteArray::Freeze()","date":"2013-03-15T17:42:26.474Z","type":"message"}
{"nick":"indutny","message":"gosh :)","date":"2013-03-15T17:42:35.368Z","type":"message"}
{"nick":"bnoordhuis","message":"or Pin() or DontTouchImBusy()","date":"2013-03-15T17:42:41.403Z","type":"message"}
{"nick":"indutny","message":"so it's like mark-compact with non-moving parts","date":"2013-03-15T17:42:42.042Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2013-03-15T17:42:44.495Z","type":"message"}
{"nick":"indutny","message":"pretty interesting","date":"2013-03-15T17:42:52.884Z","type":"message"}
{"nick":"indutny","message":"and does v8 support it?","date":"2013-03-15T17:42:59.185Z","type":"message"}
{"nick":"bnoordhuis","message":"not yet","date":"2013-03-15T17:43:05.929Z","type":"message"}
{"nick":"indutny","message":"hehe","date":"2013-03-15T17:43:09.016Z","type":"message"}
{"nick":"indutny","message":"are they considering it?","date":"2013-03-15T17:43:14.216Z","type":"message"}
{"nick":"bnoordhuis","message":"but it's code, we can beat it into submission","date":"2013-03-15T17:43:14.431Z","type":"message"}
{"nick":"bnoordhuis","message":"no. i haven't sent anything upstream yet","date":"2013-03-15T17:43:22.886Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-03-15T17:43:26.064Z","type":"message"}
{"nick":"indutny","message":"lets create it ourselves","date":"2013-03-15T17:43:31.085Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm not sure if i will either. it's still up for debate how effective it is :)","date":"2013-03-15T17:43:37.702Z","type":"message"}
{"nick":"indutny","message":"this is not that hard, actually","date":"2013-03-15T17:43:39.793Z","type":"message"}
{"nick":"indutny","message":"well, mark-compact works quite well","date":"2013-03-15T17:43:55.738Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: returning to libuv on osx","date":"2013-03-15T17:44:45.116Z","type":"message"}
{"nick":"indutny","message":"does UV_TRY_SELECT flag works for you?","date":"2013-03-15T17:44:51.416Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i've commented on the issue","date":"2013-03-15T17:45:05.109Z","type":"message"}
{"nick":"bnoordhuis","message":"there are only two places where we need to check for problematic fds","date":"2013-03-15T17:45:18.474Z","type":"message"}
{"nick":"bnoordhuis","message":"so that's where you need to check for them :)","date":"2013-03-15T17:45:32.224Z","type":"message"}
{"nick":"indutny","message":"ahhh","date":"2013-03-15T17:48:23.536Z","type":"message"}
{"nick":"trevnorris","message":"i'm checking out how v8 currently does it for WeakMaps (runtime.cc WeakMapInitialize)","date":"2013-03-15T17:48:41.842Z","type":"message"}
{"nick":"trevnorris","message":"they're using NewObjectHashTable(), which sounds pretty much like what i'm looking for.","date":"2013-03-15T17:49:34.986Z","type":"message"}
{"nick":"trevnorris","message":"anyways. need to run, but thanks for the chat. i've replicated buffer pooling in cc and am now just looking for a better way to manage the memory.","date":"2013-03-15T17:51:18.156Z","type":"message"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-03-15T17:52:36.183Z","type":"quit"}
{"nick":"hij1nx","reason":"Ping timeout: 256 seconds","date":"2013-03-15T17:54:31.869Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: https://github.com/joyent/libuv/pull/745/files","date":"2013-03-15T17:55:44.904Z","type":"message"}
{"nick":"hij1nx","date":"2013-03-15T17:55:47.945Z","type":"join"}
{"nick":"indutny","message":"time to fix tls","date":"2013-03-15T17:56:44.035Z","type":"message"}
{"nick":"Ralt","date":"2013-03-15T17:58:02.993Z","type":"join"}
{"nick":"sblom","date":"2013-03-15T18:00:12.539Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-15T18:00:38.566Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-03-15T18:04:14.231Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: fixed","date":"2013-03-15T18:05:52.303Z","type":"message"}
{"nick":"indutny","message":"-1","date":"2013-03-15T18:05:54.024Z","type":"message"}
{"nick":"`3rdEden","date":"2013-03-15T18:06:23.950Z","type":"join"}
{"nick":"benoitc","date":"2013-03-15T18:06:36.790Z","type":"join"}
{"nick":"`3rdEden","new_nick":"Guest69806","date":"2013-03-15T18:06:47.548Z","type":"nick"}
{"nick":"Guest69806","new_nick":"V1","date":"2013-03-15T18:07:39.051Z","type":"nick"}
{"nick":"V1","new_nick":"`3rdEden","date":"2013-03-15T18:08:03.312Z","type":"nick"}
{"nick":"perezd","date":"2013-03-15T18:09:30.288Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: good?","date":"2013-03-15T18:16:08.750Z","type":"message"}
{"nick":"c4milo","date":"2013-03-15T18:16:11.385Z","type":"join"}
{"nick":"CoverSlide","date":"2013-03-15T18:19:05.344Z","type":"join"}
{"nick":"brson","date":"2013-03-15T18:21:23.938Z","type":"join"}
{"nick":"qmx|lunch","new_nick":"qmx","date":"2013-03-15T18:22:53.108Z","type":"nick"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-03-15T18:28:56.009Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-03-15T18:32:00.639Z","type":"quit"}
{"nick":"bajtos","date":"2013-03-15T18:33:12.970Z","type":"join"}
{"nick":"bradleymeck","date":"2013-03-15T18:36:45.566Z","type":"join"}
{"nick":"bradleymeck","message":"best way to copy and resize a uv_buf_t? unsure since alloc_cb seems to be the proper way to alloc them","date":"2013-03-15T18:38:21.208Z","type":"message"}
{"nick":"indutny","message":"isaacs: https://github.com/joyent/node/pull/5034 ?","date":"2013-03-15T18:51:41.717Z","type":"message"}
{"nick":"indutny","message":"review please","date":"2013-03-15T18:51:45.814Z","type":"message"}
{"nick":"stagas_","date":"2013-03-15T19:10:10.818Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 255 seconds","date":"2013-03-15T19:11:53.548Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-15T19:11:54.769Z","type":"nick"}
{"nick":"stagas","reason":"Ping timeout: 260 seconds","date":"2013-03-15T19:21:07.901Z","type":"quit"}
{"nick":"V1","date":"2013-03-15T19:43:37.403Z","type":"join"}
{"nick":"perezd","reason":"Quit: perezd","date":"2013-03-15T19:45:05.150Z","type":"quit"}
{"nick":"bajtos","reason":"Quit: Leaving","date":"2013-03-15T19:50:46.811Z","type":"quit"}
{"nick":"V1","new_nick":"`3rdEden","date":"2013-03-15T19:58:28.536Z","type":"nick"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-03-15T20:00:55.902Z","type":"nick"}
{"nick":"qmx","new_nick":"qmx|afk","date":"2013-03-15T20:05:18.988Z","type":"nick"}
{"nick":"AvianFlu","date":"2013-03-15T20:06:38.204Z","type":"join"}
{"nick":"qmx|afk","new_nick":"qmx","date":"2013-03-15T20:08:02.325Z","type":"nick"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-15T20:09:12.392Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-15T20:10:08.567Z","type":"join"}
{"nick":"bradleymeck","message":"any clue why a trylock and then unlock loop only works once on uv_mutex_t (mac)?","date":"2013-03-15T20:14:03.623Z","type":"message"}
{"nick":"bradleymeck","message":"ptr stays the same the whole time, destroy is never called but i see an EINVAL","date":"2013-03-15T20:14:33.374Z","type":"message"}
{"nick":"bajtos","date":"2013-03-15T20:18:44.705Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-03-15T20:30:33.594Z","type":"nick"}
{"nick":"trevnorris","date":"2013-03-15T20:38:33.719Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 245 seconds","date":"2013-03-15T20:40:33.173Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-15T20:42:39.897Z","type":"join"}
{"nick":"Ralt","reason":"Remote host closed the connection","date":"2013-03-15T20:46:58.492Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-15T20:51:21.540Z","type":"quit"}
{"nick":"Ralt","date":"2013-03-15T20:52:36.585Z","type":"join"}
{"nick":"benoitc","date":"2013-03-15T20:57:09.531Z","type":"join"}
{"nick":"bajtos","reason":"Quit: Leaving","date":"2013-03-15T21:00:26.467Z","type":"quit"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-03-15T21:03:24.903Z","type":"quit"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-03-15T21:11:51.786Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-15T21:12:09.852Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-03-15T21:33:45.025Z","type":"quit"}
{"nick":"rendar","date":"2013-03-15T21:37:52.539Z","type":"quit"}
{"nick":"trevnorris","message":"ugh, well that's annoying. so there's v8::Object and v8::internal::Object.  that took me 20 mins to realize.","date":"2013-03-15T21:41:41.196Z","type":"message"}
{"nick":"indexzero","date":"2013-03-15T21:46:33.267Z","type":"join"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-03-15T21:48:16.087Z","type":"quit"}
{"nick":"hz","reason":"Read error: No route to host","date":"2013-03-15T21:49:38.637Z","type":"quit"}
{"nick":"Ralt","reason":"Remote host closed the connection","date":"2013-03-15T21:58:04.159Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-03-15T21:59:11.990Z","type":"join"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-03-15T22:05:40.922Z","type":"nick"}
{"nick":"trevnorris","message":"isaacs: ping","date":"2013-03-15T22:05:53.732Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-15T22:12:31.965Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-15T22:14:51.571Z","type":"quit"}
{"nick":"bradleymeck","reason":"Client Quit","date":"2013-03-15T22:16:30.677Z","type":"quit"}
{"nick":"tjfontaine","message":"trevnorris: he's going to be rather afk this weekend","date":"2013-03-15T22:16:59.418Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok.","date":"2013-03-15T22:17:11.522Z","type":"message"}
{"nick":"tjfontaine","message":"need anyhting in particular?","date":"2013-03-15T22:17:20.861Z","type":"message"}
{"nick":"bnoordhuis","date":"2013-03-15T22:18:09.060Z","type":"join"}
{"nick":"trevnorris","message":"not really.","date":"2013-03-15T22:18:09.746Z","type":"message"}
{"nick":"trevnorris","message":"just bashing my skull against this memory allocation crap.","date":"2013-03-15T22:18:24.043Z","type":"message"}
{"nick":"tjfontaine","message":"don't hurt yourself :)","date":"2013-03-15T22:18:43.676Z","type":"message"}
{"nick":"trevnorris","message":"heh, thanks.","date":"2013-03-15T22:19:09.301Z","type":"message"}
{"nick":"trevnorris","message":"also, any plans on upgrading to 3.17.latest?","date":"2013-03-15T22:19:20.127Z","type":"message"}
{"nick":"tjfontaine","message":"when it interests someone probably","date":"2013-03-15T22:19:39.615Z","type":"message"}
{"nick":"tjfontaine","message":"if you try and see gains then do a PR, just remember to reapply our patches","date":"2013-03-15T22:20:09.024Z","type":"message"}
{"nick":"trevnorris","message":"yeah. figuring out it it'll be worth it.","date":"2013-03-15T22:20:52.243Z","type":"message"}
{"nick":"benoitc","date":"2013-03-15T22:23:11.214Z","type":"join"}
{"nick":"rvagg","reason":"Excess Flood","date":"2013-03-15T22:24:03.382Z","type":"quit"}
{"nick":"rvagg","date":"2013-03-15T22:24:18.883Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-15T22:28:34.666Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-15T22:29:00.691Z","type":"join"}
{"nick":"sblom","reason":"Ping timeout: 245 seconds","date":"2013-03-15T22:30:27.085Z","type":"quit"}
{"nick":"c4milo","reason":"Ping timeout: 264 seconds","date":"2013-03-15T22:34:54.464Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-03-15T22:45:36.264Z","type":"quit"}
{"nick":"trevnorris","message":"can't find any documentation on it, but anyone know if it's possible to re-use a Persistent Handle?","date":"2013-03-15T22:46:06.579Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-15T22:47:58.604Z","type":"join"}
{"nick":"bnoordhuis","message":"trevnorris: you can reassign the variable with Persistent<T>::New() after you call Dispose() but that's about it","date":"2013-03-15T22:54:17.968Z","type":"message"}
{"nick":"bnoordhuis","message":"doesn't really get you anything, the Persistent itself is just a pointer to Handle","date":"2013-03-15T22:54:49.891Z","type":"message"}
{"nick":"bnoordhuis","message":"bradleymeck: re trylock, have some code i can look at?","date":"2013-03-15T22:55:10.206Z","type":"message"}
{"nick":"bradleymeck","message":"bnoordhuis: i found it, but it was a realloc on an entirely diff structure","date":"2013-03-15T22:55:30.070Z","type":"message"}
{"nick":"bradleymeck","message":"was weird to have 2 structs freak eachother out","date":"2013-03-15T22:55:50.042Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: hm. ok.","date":"2013-03-15T22:56:56.888Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: so the ideal of what i'm looking for is an array-like structure to which I can \"push\" references to local handles. then later loop through and do a HasBeenGCd().","date":"2013-03-15T23:03:56.634Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: i guess that type of thing is what you and indutny were discussing earlier.","date":"2013-03-15T23:04:24.278Z","type":"message"}
{"nick":"Kakera","reason":"Ping timeout: 260 seconds","date":"2013-03-15T23:13:03.892Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-03-15T23:13:08.751Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-15T23:15:57.998Z","type":"quit"}
{"nick":"bnoordhuis","message":"trevnorris: that's a pretty accurate description of a Persistent handle, actually :)","date":"2013-03-15T23:22:44.299Z","type":"message"}
{"nick":"bnoordhuis","message":"when you create one, v8 adds an artificial gc root to a list","date":"2013-03-15T23:23:13.172Z","type":"message"}
{"nick":"bnoordhuis","message":"and MakeWeak tells v8 it's okay to gc it anyway, as long as you notify the owner","date":"2013-03-15T23:24:02.406Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: interesting. thanks. just trying to figure out if an inexpensive way of doing this is even theoretically possible.","date":"2013-03-15T23:29:00.953Z","type":"message"}
{"nick":"wolfeidau","date":"2013-03-15T23:29:15.038Z","type":"join"}
{"nick":"trevnorris","message":"if it's not then not going to take the time finishing PR 4964","date":"2013-03-15T23:29:16.109Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-15T23:30:45.087Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: tried to make a base case for this, mind giving it a quick review? https://gist.github.com/trevnorris/5140676","date":"2013-03-15T23:31:14.098Z","type":"message"}
{"nick":"wolfeidau","reason":"Ping timeout: 252 seconds","date":"2013-03-15T23:34:43.937Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-03-15T23:36:37.045Z","type":"join"}
{"nick":"bnoordhuis","message":"trevnorris: -sizeof(data) == sizeof(void*), not the size of the memory chunk it points to","date":"2013-03-15T23:37:09.578Z","type":"message"}
{"nick":"bnoordhuis","message":"but i see the point of your test case, if that's what you're asking :)","date":"2013-03-15T23:38:02.129Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: awesome, thanks. =)","date":"2013-03-15T23:39:11.434Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: the one that really gets me is w/ persisting each chunk '/usr/bin/time' shows 688492maxresident, but w/o shows 11984maxresident.","date":"2013-03-15T23:39:53.563Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: seems like a massive difference to me.","date":"2013-03-15T23:39:59.762Z","type":"message"}
{"nick":"bnoordhuis","message":"it is","date":"2013-03-15T23:40:45.425Z","type":"message"}
{"nick":"bnoordhuis","message":"it's possible that persistent handles are only gc'ed on full sweeps","date":"2013-03-15T23:41:14.208Z","type":"message"}
{"nick":"trevnorris","message":"ah yeah. think you're right. either mraleph1 or indutny had me do a --trace_gc to demonstrate that.","date":"2013-03-15T23:41:56.733Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: thanks much for the help. going to keep digging into the v8 source to better understand how the gc works. any tips on which src files to look at?","date":"2013-03-15T23:43:52.922Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-15T23:56:42.903Z","type":"quit"}
{"nick":"mikeal1","reason":"Quit: Leaving.","date":"2013-03-15T23:58:12.633Z","type":"quit"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-03-15T23:59:27.247Z","type":"quit"}
{"nick":"bnoordhuis","message":"trevnorris: the meat of the gc code is in src/mark-compact.*","date":"2013-03-15T23:59:40.530Z","type":"message"}
{"nick":"bnoordhuis","message":"oh and src/mark-compact-inl.h","date":"2013-03-15T23:59:53.212Z","type":"message"}
