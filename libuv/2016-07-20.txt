{"nick":"zhangyq","date":"2016-07-20T00:17:14.721Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T00:19:11.723Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 250 seconds","date":"2016-07-20T00:23:25.693Z","type":"quit"}
{"nick":"tunniclm_","reason":"Ping timeout: 244 seconds","date":"2016-07-20T00:24:02.038Z","type":"quit"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2016-07-20T00:49:42.603Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2016-07-20T01:03:32.559Z","type":"quit"}
{"nick":"rmg_","date":"2016-07-20T02:20:44.163Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 240 seconds","date":"2016-07-20T02:24:51.162Z","type":"quit"}
{"nick":"terinjokes","reason":"Ping timeout: 240 seconds","date":"2016-07-20T03:05:11.171Z","type":"quit"}
{"nick":"terinjokes","date":"2016-07-20T03:09:06.398Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T04:22:11.553Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 250 seconds","date":"2016-07-20T04:26:31.523Z","type":"quit"}
{"nick":"zju_x","date":"2016-07-20T04:27:00.809Z","type":"join"}
{"nick":"zju3","reason":"Ping timeout: 250 seconds","date":"2016-07-20T04:28:15.585Z","type":"quit"}
{"nick":"rgrinberg","reason":"Ping timeout: 250 seconds","date":"2016-07-20T04:29:07.587Z","type":"quit"}
{"nick":"zju_x","reason":"Ping timeout: 260 seconds","date":"2016-07-20T05:06:52.732Z","type":"quit"}
{"nick":"phao","reason":"\"Leaving\"","date":"2016-07-20T05:32:43.330Z","type":"part"}
{"nick":"seishun","date":"2016-07-20T06:23:15.034Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T06:23:41.300Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 272 seconds","date":"2016-07-20T06:28:22.186Z","type":"quit"}
{"nick":"rendar","date":"2016-07-20T07:19:43.828Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T07:24:28.536Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 252 seconds","date":"2016-07-20T07:28:55.599Z","type":"quit"}
{"nick":"seishun","reason":"Ping timeout: 240 seconds","date":"2016-07-20T07:51:51.162Z","type":"quit"}
{"nick":"thefourtheye","date":"2016-07-20T07:56:31.312Z","type":"join"}
{"nick":"Fishrock123","date":"2016-07-20T08:37:08.267Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T09:25:57.573Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 252 seconds","date":"2016-07-20T09:30:28.452Z","type":"quit"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2016-07-20T10:31:27.192Z","type":"quit"}
{"nick":"davi","date":"2016-07-20T10:40:25.195Z","type":"join"}
{"nick":"davi","reason":"Changing host","date":"2016-07-20T10:40:25.464Z","type":"quit"}
{"nick":"davi","date":"2016-07-20T10:40:25.519Z","type":"join"}
{"nick":"thealphanerd","reason":"Quit: farewell for now","date":"2016-07-20T10:51:52.974Z","type":"quit"}
{"nick":"thealphanerd","date":"2016-07-20T10:52:23.634Z","type":"join"}
{"nick":"zhangyq","reason":"Ping timeout: 244 seconds","date":"2016-07-20T11:21:44.963Z","type":"quit"}
{"nick":"Fishrock123","date":"2016-07-20T11:22:30.295Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T11:27:26.294Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 258 seconds","date":"2016-07-20T11:31:55.186Z","type":"quit"}
{"nick":"Jacob843","reason":"Remote host closed the connection","date":"2016-07-20T12:02:47.814Z","type":"quit"}
{"nick":"Jacob843","date":"2016-07-20T12:03:43.168Z","type":"join"}
{"nick":"PerilousApricot","date":"2016-07-20T12:14:04.764Z","type":"join"}
{"nick":"davi","reason":"Ping timeout: 240 seconds","date":"2016-07-20T12:18:11.168Z","type":"quit"}
{"nick":"PerilousApricot","reason":"Remote host closed the connection","date":"2016-07-20T12:20:44.715Z","type":"quit"}
{"nick":"rgrinberg","date":"2016-07-20T12:22:24.261Z","type":"join"}
{"nick":"rgrinberg","reason":"Client Quit","date":"2016-07-20T12:26:03.993Z","type":"quit"}
{"nick":"rgrinberg","date":"2016-07-20T12:26:26.949Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T13:28:58.795Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 260 seconds","date":"2016-07-20T13:33:47.730Z","type":"quit"}
{"nick":"tunniclm_","date":"2016-07-20T14:10:26.948Z","type":"join"}
{"nick":"zju3","date":"2016-07-20T14:19:19.744Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T14:29:39.615Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 252 seconds","date":"2016-07-20T14:34:04.591Z","type":"quit"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2016-07-20T14:45:55.465Z","type":"quit"}
{"nick":"Fishrock123","date":"2016-07-20T14:47:40.160Z","type":"join"}
{"nick":"zju3","reason":"Ping timeout: 276 seconds","date":"2016-07-20T15:01:03.779Z","type":"quit"}
{"nick":"importantshock","date":"2016-07-20T15:30:00.388Z","type":"join"}
{"nick":"rgrinberg","reason":"Ping timeout: 240 seconds","date":"2016-07-20T15:31:34.087Z","type":"quit"}
{"nick":"zju3","date":"2016-07-20T15:41:39.235Z","type":"join"}
{"nick":"brson","date":"2016-07-20T15:42:38.797Z","type":"join"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-07-20T15:43:08.075Z","type":"quit"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2016-07-20T15:47:03.817Z","type":"quit"}
{"nick":"dap_","date":"2016-07-20T15:52:38.082Z","type":"join"}
{"nick":"rgrinberg","date":"2016-07-20T16:00:28.491Z","type":"join"}
{"nick":"importantshock","date":"2016-07-20T16:02:50.144Z","type":"join"}
{"nick":"seishun","date":"2016-07-20T16:06:23.327Z","type":"join"}
{"nick":"Fishrock123","date":"2016-07-20T16:19:30.994Z","type":"join"}
{"nick":"PerilousApricot","date":"2016-07-20T16:25:22.730Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T16:31:08.161Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 240 seconds","date":"2016-07-20T16:35:11.161Z","type":"quit"}
{"nick":"davi","date":"2016-07-20T16:48:24.055Z","type":"join"}
{"nick":"davi","reason":"Changing host","date":"2016-07-20T16:48:24.146Z","type":"quit"}
{"nick":"davi","date":"2016-07-20T16:48:24.147Z","type":"join"}
{"nick":"PerilousApricot","reason":"Remote host closed the connection","date":"2016-07-20T16:53:53.978Z","type":"quit"}
{"nick":"daurnimator","reason":"Quit: WeeChat 1.4","date":"2016-07-20T16:54:02.267Z","type":"quit"}
{"nick":"PerilousApricot","date":"2016-07-20T16:56:14.743Z","type":"join"}
{"nick":"PerilousApricot","reason":"Read error: Connection reset by peer","date":"2016-07-20T17:05:47.290Z","type":"quit"}
{"nick":"PerilousApricot","date":"2016-07-20T17:06:25.272Z","type":"join"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-07-20T17:18:53.222Z","type":"quit"}
{"nick":"rgrinberg","reason":"Ping timeout: 252 seconds","date":"2016-07-20T17:27:52.501Z","type":"quit"}
{"nick":"importantshock","date":"2016-07-20T17:28:09.672Z","type":"join"}
{"nick":"rgrinberg","date":"2016-07-20T17:30:20.842Z","type":"join"}
{"nick":"rgrinberg","reason":"Client Quit","date":"2016-07-20T17:30:24.682Z","type":"quit"}
{"nick":"rgrinberg","date":"2016-07-20T17:30:46.697Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 240 seconds","date":"2016-07-20T17:37:31.161Z","type":"quit"}
{"nick":"davi","reason":"Ping timeout: 264 seconds","date":"2016-07-20T17:37:40.082Z","type":"quit"}
{"nick":"seishun","date":"2016-07-20T17:55:33.533Z","type":"join"}
{"nick":"qard-appneta","date":"2016-07-20T18:13:56.164Z","type":"join"}
{"nick":"rgrinberg","reason":"Ping timeout: 250 seconds","date":"2016-07-20T18:14:10.600Z","type":"quit"}
{"nick":"happy-dude","date":"2016-07-20T18:17:52.455Z","type":"join"}
{"nick":"zju3","reason":"Ping timeout: 258 seconds","date":"2016-07-20T18:21:42.265Z","type":"quit"}
{"nick":"daurnimator","date":"2016-07-20T18:24:48.583Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T18:32:40.602Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 250 seconds","date":"2016-07-20T18:37:08.515Z","type":"quit"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2016-07-20T18:39:33.558Z","type":"quit"}
{"nick":"zju3","date":"2016-07-20T18:41:20.108Z","type":"join"}
{"nick":"rendar","reason":"Ping timeout: 272 seconds","date":"2016-07-20T18:44:18.196Z","type":"quit"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-07-20T19:06:49.965Z","type":"quit"}
{"nick":"rendar","date":"2016-07-20T19:12:52.036Z","type":"join"}
{"nick":"rgrinberg","date":"2016-07-20T19:26:51.713Z","type":"join"}
{"nick":"addaleax","date":"2016-07-20T19:30:50.232Z","type":"join"}
{"nick":"Fishrock123","date":"2016-07-20T19:31:50.384Z","type":"join"}
{"nick":"importantshock","date":"2016-07-20T19:37:56.227Z","type":"join"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2016-07-20T20:07:08.733Z","type":"quit"}
{"nick":"Fishrock123","date":"2016-07-20T20:08:17.170Z","type":"join"}
{"nick":"Fishrock123","reason":"Client Quit","date":"2016-07-20T20:09:18.372Z","type":"quit"}
{"nick":"Dirkson","message":"Just a quick sanity check - There are no known problems with having a large number of mutexes in your program, correct? On the order of tens of thousands?","date":"2016-07-20T20:09:59.233Z","type":"message"}
{"nick":"rmg_","date":"2016-07-20T20:34:12.677Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 276 seconds","date":"2016-07-20T20:39:03.731Z","type":"quit"}
{"nick":"zju_x","date":"2016-07-20T20:51:12.265Z","type":"join"}
{"nick":"zju3","reason":"Ping timeout: 264 seconds","date":"2016-07-20T20:53:16.078Z","type":"quit"}
{"nick":"Fishrock123","date":"2016-07-20T21:01:10.201Z","type":"join"}
{"nick":"piscisaureus","date":"2016-07-20T21:32:21.042Z","type":"join"}
{"nick":"rgrinberg","reason":"Ping timeout: 276 seconds","date":"2016-07-20T21:39:30.804Z","type":"quit"}
{"nick":"piscisaureus","reason":"Quit: Leaving.","date":"2016-07-20T21:44:12.475Z","type":"quit"}
{"nick":"seishun","reason":"Ping timeout: 240 seconds","date":"2016-07-20T21:47:51.170Z","type":"quit"}
{"nick":"Ralith_","message":"Dirkson: that's generally overwhelming evidence that there's a problem with your *design*, but it shouldn't present a difficulty for the OS","date":"2016-07-20T21:56:59.055Z","type":"message"}
{"nick":"Dirkson","message":"Ralith_: I'm reasonably certain that I've located the cause of the problem - I don't appear to lock the overarching structures properly when I destroy mutexes. Oops! The large number of them are because they're guarding a large octree-like structure. If performance ever becomes an issue, I could probably move them up a level in the tree structure and not notice much of a difference, but so far I haven't seen","date":"2016-07-20T22:11:05.799Z","type":"message"}
{"nick":"Dirkson","message":"mutex locks/unlocks taking up a large amount of cpu time.","date":"2016-07-20T22:11:08.675Z","type":"message"}
{"nick":"Ralith_","message":"large quantities of shared memory like that are generally considered a serious design smell, yes","date":"2016-07-20T22:12:20.322Z","type":"message"}
{"nick":"Ralith_","message":"performance isn't the worry so much as safety and predictability","date":"2016-07-20T22:13:03.759Z","type":"message"}
{"nick":"Ralith_","message":"if you're locking individual tree nodes like that my immediate concern would be that you haven't taken any measures to ensure that tree-processing code sees a consistent view, for example","date":"2016-07-20T22:14:25.647Z","type":"message"}
{"nick":"Dirkson","action":"considers, \"I don't see any other way around it. I have extremely large structures that the whole game centers around. The only other design that'd make any kind of sense would be to have one thread own the large structures, and have all other threads communicate with it for reads and writes. And it seems likely that -that- solution is going to have a really horrible effect on performance.","date":"2016-07-20T22:17:25.087Z","type":"action"}
{"nick":"Dirkson","message":"Currently I'm making heavy use of asan, tsan, valgrind, and recently helgrind to locate and debug threading/mutex issues. But apparently none of them notice use-after-destroy errors : )","date":"2016-07-20T22:20:40.696Z","type":"message"}
{"nick":"Dirkson","message":"It's definitely -not- fun to debug. I'd strongly prefer a more message based approach, if I could work out how to do it efficiently. ","date":"2016-07-20T22:23:57.249Z","type":"message"}
{"nick":"rendar","message":"Dirkson: 10k mutexes = your program sucks","date":"2016-07-20T22:27:55.230Z","type":"message"}
{"nick":"rendar","message":"you must change the design","date":"2016-07-20T22:28:04.708Z","type":"message"}
{"nick":"Dirkson","message":"rendar: It functions at a good clip, and threading issues are rare. What metric are you using for 'suck'?","date":"2016-07-20T22:29:05.942Z","type":"message"}
{"nick":"rendar","message":"Dirkson: the metric which says mutexes weren't made for such a purpose..maybe you want to consider spinlocks, but not 10k either","date":"2016-07-20T22:29:51.629Z","type":"message"}
{"nick":"rendar","message":"as far as i understand, you have a mutex for each octree-like leaf?","date":"2016-07-20T22:30:19.624Z","type":"message"}
{"nick":"Dirkson","message":"rendar: I have one mutex per 1000 leaves.","date":"2016-07-20T22:31:05.629Z","type":"message"}
{"nick":"Dirkson","message":"Depending on how you define a leaf. You could argue the number is a lot higher.","date":"2016-07-20T22:31:23.244Z","type":"message"}
{"nick":"rendar","message":"still, having 10k mutexes is not practical by any measure of good design, i think what you're looking for is lock-free data structures, or, N thread unsafe octree, 1 per-thread and those threads communicates by lock-free queues, which are *very* fast","date":"2016-07-20T22:32:10.675Z","type":"message"}
{"nick":"rendar","message":"so each thread will modify its \"part\" or subset of the tree without locking and waiting","date":"2016-07-20T22:33:06.358Z","type":"message"}
{"nick":"Dirkson","message":"I've considered lock free data structures. As I understand them, they take about half the time of a mutex operation. Which seems like a nice benefit... But again, profiling does not indicate that my mutex locks are a significant source of slowdown.","date":"2016-07-20T22:33:44.419Z","type":"message"}
{"nick":"rendar","message":"it's not the time benefit, it's the design benefit","date":"2016-07-20T22:34:09.415Z","type":"message"}
{"nick":"rendar","message":"having 10k mutexes is not good design, check this on the web if you don't trust me","date":"2016-07-20T22:34:24.396Z","type":"message"}
{"nick":"rmg_","date":"2016-07-20T22:35:42.615Z","type":"join"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2016-07-20T22:38:09.885Z","type":"quit"}
{"nick":"rendar","message":"Dirkson: i know that you now feel awesome because your pogram finally woks, but you don't have write code to \"make it works\", you must love the intellectual challenge it needs to be well designed, if Linus Torvalds would have seen 10k mutexes in some code i'm sure he started yelling at you in all-caps email or something :P","date":"2016-07-20T22:38:47.049Z","type":"message"}
{"nick":"Dirkson","message":"The LF alternative would basically force me into designing even the simplest function as a series of async functions. (or figuring out how to do coroutines in C) This might end up being as fast, or even mildly faster, than my current solution. But it's certainly not going to make the code a lot more readable. I'd just be trading one difficult-to-reason-about abstraction for another. Again - I really don't like","date":"2016-07-20T22:40:02.874Z","type":"message"}
{"nick":"Dirkson","message":"using mutexes. Where at all possible, I strongly prefer to send messages. But I haven't been able to come up with a message passing system with -this- data that makes as much sense as just doing the mutex locks.","date":"2016-07-20T22:40:05.099Z","type":"message"}
{"nick":"rmg_","reason":"Ping timeout: 252 seconds","date":"2016-07-20T22:40:16.425Z","type":"quit"}
{"nick":"rendar","message":"let me guess, is this an octree structure to store virtual objects in a real space like that pokemon go app?","date":"2016-07-20T22:41:10.490Z","type":"message"}
{"nick":"Dirkson","message":"And if the -number- of mutexes is your only objection... Shucks, that's easy to cheat. I could easily just move the mutexes up several layers in the octree-like structure, and suddenly I have like 10 of them. But why bother? I'd still have to reason about the same number of concurrent mutexes, which is where all the real complexity comes in. Except now whenever one thread wants -anything- in one of the","date":"2016-07-20T22:43:14.189Z","type":"message"}
{"nick":"Dirkson","message":"octrees, it's got to lock down the whole octree.","date":"2016-07-20T22:43:16.066Z","type":"message"}
{"nick":"Dirkson","message":"rendar: No? I'm storing ships in space. It's a voxel space game.","date":"2016-07-20T22:43:35.133Z","type":"message"}
{"nick":"rendar","message":"cool","date":"2016-07-20T22:43:50.409Z","type":"message"}
{"nick":"Dirkson","message":"I can totally see your guys' objections if I were trying to grab a bunch of mutexes concurrently. Anything more than 2-3 mutexes grabbed at the same time and I start trying to find ways to fix my design :D ","date":"2016-07-20T22:45:05.679Z","type":"message"}
{"nick":"Dirkson","message":"(At the same time on the same thread)","date":"2016-07-20T22:45:18.497Z","type":"message"}
{"nick":"rendar","message":"Dirkson:  my point is: i could write an hashtable with 10k mutexes, where i have 1 mutex for each row of the table, but that would suck because lock-free hash table do exist.. it's not the high number of mutexes, it's just maybe you want to design it in another way and reconsider the overall design.. e.g. check this out: https://github.com/tunabrain/sparse-voxel-octrees","date":"2016-07-20T22:45:33.461Z","type":"message"}
{"nick":"rendar","message":"https://github.com/adriankrupa/Octree","date":"2016-07-20T22:45:39.765Z","type":"message"}
{"nick":"rendar","message":"http://stackoverflow.com/questions/11184734/threading-an-octree","date":"2016-07-20T22:45:53.309Z","type":"message"}
{"nick":"Dirkson","message":"rendar: C++ :-/","date":"2016-07-20T22:46:12.403Z","type":"message"}
{"nick":"rendar","message":"so?","date":"2016-07-20T22:47:27.968Z","type":"message"}
{"nick":"rendar","message":"v8 and node.js are in C++","date":"2016-07-20T22:47:40.520Z","type":"message"}
{"nick":"Dirkson","message":"rendar: I'm currently coding in C, and don't know C++. I don't know v8 or node.js either. These are not insurmountable issues, but they do increase the amount of time it'd take me to make headway. Particularly C++ - It's huge beyond belief.","date":"2016-07-20T22:48:40.454Z","type":"message"}
{"nick":"rendar","message":"Dirkson: a l33t coder doesn't just say \":/\" for a language, he just learns it..i hate java but i can read it, and i enjoy to spot differences with C++, for instance - what you need practically now to know is that C++ data structures are almost C code, i mean the big part you need to understand-the algo-is basically plain C","date":"2016-07-20T22:49:32.710Z","type":"message"}
{"nick":"rendar","message":"just ignore the other stuff","date":"2016-07-20T22:49:40.172Z","type":"message"}
{"nick":"Fishrock123","reason":"Quit: Leaving...","date":"2016-07-20T22:49:49.561Z","type":"quit"}
{"nick":"Dirkson","message":"rendar: I am definitely not any kind of l33t :D","date":"2016-07-20T22:50:00.583Z","type":"message"}
{"nick":"rendar","message":"lol","date":"2016-07-20T22:50:06.981Z","type":"message"}
{"nick":"rendar","message":"i need to sleep now, but if you want we can discuss this tomorow, i like to discuss more about octrees, since it's a topic i'm working on","date":"2016-07-20T22:50:38.658Z","type":"message"}
{"nick":"rendar","message":"good night","date":"2016-07-20T22:50:41.286Z","type":"message"}
{"nick":"Dirkson","message":"Night","date":"2016-07-20T22:50:44.299Z","type":"message"}
{"nick":"rendar","reason":"Quit: std::lower_bound + std::less_equal *works* with a vector without duplicates!","date":"2016-07-20T22:50:53.730Z","type":"quit"}
{"nick":"Dirkson","message":"Well damn. I seem to be wrong about what was causing my error anyway.","date":"2016-07-20T23:00:42.250Z","type":"message"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-07-20T23:04:59.720Z","type":"quit"}
{"nick":"addaleax","reason":"Remote host closed the connection","date":"2016-07-20T23:05:45.655Z","type":"quit"}
{"nick":"importantshock","date":"2016-07-20T23:28:43.558Z","type":"join"}
{"nick":"rmg_","date":"2016-07-20T23:36:23.066Z","type":"join"}
{"nick":"addaleax","date":"2016-07-20T23:38:29.043Z","type":"join"}
{"nick":"rgrinberg","date":"2016-07-20T23:39:22.192Z","type":"join"}
{"nick":"rmg_","reason":"Ping timeout: 244 seconds","date":"2016-07-20T23:40:34.954Z","type":"quit"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-07-20T23:42:03.468Z","type":"quit"}
{"nick":"PerilousApricot","reason":"Remote host closed the connection","date":"2016-07-20T23:52:23.006Z","type":"quit"}
{"nick":"PerilousApricot","date":"2016-07-20T23:56:56.198Z","type":"join"}
