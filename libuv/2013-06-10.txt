{"nick":"ircretary","date":"2013-06-10T00:00:09.245Z","type":"join"}
{"nick":"bnoordhuis","message":"no netdb.h either..","date":"2013-06-10T00:06:56.992Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: why don't you understand how unit tests work?","date":"2013-06-10T00:13:00.269Z","type":"message"}
{"nick":"bnoordhuis","message":"hah, my god","date":"2013-06-10T00:20:35.083Z","type":"message"}
{"nick":"bnoordhuis","message":"src\\uv-common.c(478): error C2196: case value '11001' already used <- interesting...","date":"2013-06-10T00:26:37.246Z","type":"message"}
{"nick":"bnoordhuis","message":"esp. because mingw has no beef with it","date":"2013-06-10T00:26:57.477Z","type":"message"}
{"nick":"bnoordhuis","message":"fixed, huzzah!","date":"2013-06-10T00:33:15.906Z","type":"message"}
{"nick":"amartens","date":"2013-06-10T00:35:02.949Z","type":"join"}
{"nick":"brson","date":"2013-06-10T00:40:35.163Z","type":"join"}
{"nick":"trapito","date":"2013-06-10T00:43:10.275Z","type":"join"}
{"nick":"trapito","message":"hi","date":"2013-06-10T00:43:21.804Z","type":"message"}
{"nick":"loladiro","date":"2013-06-10T00:45:40.950Z","type":"join"}
{"nick":"bnoordhuis","message":"trapito: hi","date":"2013-06-10T00:46:49.658Z","type":"message"}
{"nick":"trapito","message":"please excuse the lame question, but i've written a program in linux using libuv and it works well, now, i tried to compile and run it on osx (switched to clang along the way) and i get an error as soon as i call uv_tcp_connect (ENOTSOCK)","date":"2013-06-10T00:49:01.269Z","type":"message"}
{"nick":"trapito","message":"i was trying to figure out why would it do such thing but thought about asking before","date":"2013-06-10T00:49:52.199Z","type":"message"}
{"nick":"bnoordhuis","message":"trapito: could be anything. can you link me to the source?","date":"2013-06-10T00:51:18.577Z","type":"message"}
{"nick":"trapito","message":"bnoordhuis: http://pastie.org/pastes/8028233/text?key=4m1dbqjxhtegwiapn9ysw","date":"2013-06-10T00:54:36.163Z","type":"message"}
{"nick":"bnoordhuis","message":"trapito: what is link in global_server_context.geoip_client.base.link?","date":"2013-06-10T00:56:39.925Z","type":"message"}
{"nick":"bnoordhuis","message":"or rather, what type does it have","date":"2013-06-10T00:56:51.188Z","type":"message"}
{"nick":"trapito","message":"uv_tcp_t","date":"2013-06-10T01:01:32.686Z","type":"message"}
{"nick":"bnoordhuis","message":"trapito: hm, okay. not sure then. what do you see with dtruss?","date":"2013-06-10T01:03:56.301Z","type":"message"}
{"nick":"kazupon","date":"2013-06-10T01:04:41.170Z","type":"join"}
{"nick":"trapito","message":"didn't use dtruss, it's strange because the whole system works perfectly on linux","date":"2013-06-10T01:04:44.481Z","type":"message"}
{"nick":"trapito","message":"oh, connect is actually returning the error","date":"2013-06-10T01:06:05.157Z","type":"message"}
{"nick":"trapito","message":"connect(0x0, 0x7FFF57F9B970, 0x10)               = -1 Err#38","date":"2013-06-10T01:06:11.456Z","type":"message"}
{"nick":"trapito","message":"open(\"/\\0\", 0x0, 0xC)            = 10 0 << not sure why","date":"2013-06-10T01:06:47.938Z","type":"message"}
{"nick":"trapito","message":"i wonder if it comes with the gcc -> clang switch","date":"2013-06-10T01:08:03.452Z","type":"message"}
{"nick":"trapito","message":"i'll check that out","date":"2013-06-10T01:08:12.480Z","type":"message"}
{"nick":"trapito","message":"ok, same error","date":"2013-06-10T01:15:05.974Z","type":"message"}
{"nick":"trapito","message":"btw, the open i pasted happens just because of the loop statis if i'm correct, not because of the operation itself","date":"2013-06-10T01:19:46.541Z","type":"message"}
{"nick":"trapito","message":"uhm, it's quite weird, i've followed the code and didn't see anything weird, also, the assert on top of uv__connect doesn't trigger","date":"2013-06-10T01:24:11.537Z","type":"message"}
{"nick":"trapito","message":"ugh, kind of found the error but i'm still not sure what could be causing it, maybe_new_socket is exiting on the uv__stream_fd check","date":"2013-06-10T01:29:22.348Z","type":"message"}
{"nick":"AvianFlu","date":"2013-06-10T01:30:00.665Z","type":"join"}
{"nick":"trapito","message":"definitely found the error","date":"2013-06-10T01:33:13.771Z","type":"message"}
{"nick":"st_luke","date":"2013-06-10T01:35:24.131Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-06-10T01:36:55.640Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-10T01:38:10.344Z","type":"nick"}
{"nick":"AvianFlu","date":"2013-06-10T01:40:40.668Z","type":"join"}
{"nick":"trapito","message":"this is getting weirder and weirder","date":"2013-06-10T01:58:57.295Z","type":"message"}
{"nick":"trapito","message":"i think it's not code but something else, still not sure about it","date":"2013-06-10T02:02:40.290Z","type":"message"}
{"nick":"trapito","message":"it's probably something stupid","date":"2013-06-10T02:02:53.737Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-06-10T02:02:58.528Z","type":"quit"}
{"nick":"bnoordhuis","message":"trapito: try to trim it down to a standalone test case","date":"2013-06-10T02:03:06.225Z","type":"message"}
{"nick":"bnoordhuis","message":"if you post it in an issue, i'll take a look at it tomorrow","date":"2013-06-10T02:03:36.124Z","type":"message"}
{"nick":"abraxas","date":"2013-06-10T02:04:15.569Z","type":"join"}
{"nick":"kazupon","date":"2013-06-10T02:07:26.488Z","type":"join"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-06-10T02:24:14.994Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 255 seconds","date":"2013-06-10T02:28:26.408Z","type":"quit"}
{"nick":"c4milo","date":"2013-06-10T02:44:26.505Z","type":"join"}
{"nick":"trapito","reason":"Quit: Page closed","date":"2013-06-10T02:46:05.184Z","type":"quit"}
{"nick":"qard","date":"2013-06-10T02:50:46.223Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-06-10T03:02:52.635Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-06-10T03:12:50.567Z","type":"quit"}
{"nick":"qard","reason":"Quit: Leaving.","date":"2013-06-10T03:16:31.483Z","type":"quit"}
{"nick":"groundwater","date":"2013-06-10T03:30:57.508Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-06-10T03:34:08.033Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-10T03:36:34.300Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 276 seconds","date":"2013-06-10T03:39:16.031Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-06-10T03:52:51.015Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-06-10T03:54:48.520Z","type":"join"}
{"nick":"olalonde","reason":"Quit: olalonde","date":"2013-06-10T04:17:14.997Z","type":"quit"}
{"nick":"timoxley","date":"2013-06-10T04:32:04.977Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-10T04:37:52.705Z","type":"nick"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-10T04:43:25.338Z","type":"nick"}
{"nick":"groundwater","reason":"Quit: groundwater","date":"2013-06-10T04:49:25.045Z","type":"quit"}
{"nick":"kazupon","date":"2013-06-10T04:53:11.470Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 240 seconds","date":"2013-06-10T04:57:54.007Z","type":"quit"}
{"nick":"kazupon","date":"2013-06-10T04:59:04.497Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-06-10T05:11:22.687Z","type":"quit"}
{"nick":"kazupon","date":"2013-06-10T05:12:57.172Z","type":"join"}
{"nick":"mikeal","date":"2013-06-10T05:28:23.486Z","type":"join"}
{"nick":"bajtos","date":"2013-06-10T05:30:56.098Z","type":"join"}
{"nick":"paddybyers","date":"2013-06-10T05:32:39.405Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 248 seconds","date":"2013-06-10T05:32:49.284Z","type":"quit"}
{"nick":"pooya","date":"2013-06-10T05:32:49.495Z","type":"join"}
{"nick":"wmil","date":"2013-06-10T05:32:50.191Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-06-10T05:34:51.414Z","type":"quit"}
{"nick":"mikeal","date":"2013-06-10T05:38:59.132Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-10T05:53:19.851Z","type":"nick"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-10T06:02:49.231Z","type":"nick"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-06-10T06:04:19.209Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 255 seconds","date":"2013-06-10T06:16:08.405Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-10T06:23:23.119Z","type":"nick"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-10T06:31:33.124Z","type":"nick"}
{"nick":"wmil","reason":"Remote host closed the connection","date":"2013-06-10T06:35:57.505Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-10T06:37:10.065Z","type":"nick"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-10T06:39:39.731Z","type":"nick"}
{"nick":"`3rdEden","date":"2013-06-10T06:40:03.028Z","type":"join"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-06-10T06:45:40.531Z","type":"quit"}
{"nick":"paddybyers","date":"2013-06-10T06:50:13.891Z","type":"join"}
{"nick":"rendar","date":"2013-06-10T06:51:12.266Z","type":"join"}
{"nick":"wmil","date":"2013-06-10T06:54:01.520Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 240 seconds","date":"2013-06-10T06:54:23.928Z","type":"quit"}
{"nick":"bajtos","date":"2013-06-10T06:54:44.109Z","type":"join"}
{"nick":"wmil","reason":"Remote host closed the connection","date":"2013-06-10T07:05:43.290Z","type":"quit"}
{"nick":"paddybyers","date":"2013-06-10T07:14:27.268Z","type":"join"}
{"nick":"csaoh","date":"2013-06-10T07:35:14.163Z","type":"join"}
{"nick":"philips_","reason":"Ping timeout: 245 seconds","date":"2013-06-10T08:05:33.192Z","type":"quit"}
{"nick":"csaoh","reason":"Ping timeout: 245 seconds","date":"2013-06-10T08:09:18.164Z","type":"quit"}
{"nick":"csaoh","date":"2013-06-10T08:15:29.440Z","type":"join"}
{"nick":"olalonde","date":"2013-06-10T08:22:55.384Z","type":"join"}
{"nick":"csaoh_","date":"2013-06-10T08:23:55.756Z","type":"join"}
{"nick":"csaoh","reason":"Ping timeout: 264 seconds","date":"2013-06-10T08:24:31.369Z","type":"quit"}
{"nick":"csaoh_","new_nick":"csaoh","date":"2013-06-10T08:24:31.583Z","type":"nick"}
{"nick":"csaoh","reason":"Ping timeout: 245 seconds","date":"2013-06-10T08:28:53.163Z","type":"quit"}
{"nick":"csaoh","date":"2013-06-10T08:29:38.275Z","type":"join"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-06-10T08:39:05.155Z","type":"quit"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-06-10T08:39:21.835Z","type":"quit"}
{"nick":"timoxley","date":"2013-06-10T08:56:58.946Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-06-10T08:57:54.329Z","type":"join"}
{"nick":"dominictarr","date":"2013-06-10T08:58:05.278Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-06-10T09:44:45.233Z","type":"quit"}
{"nick":"dominictarr","date":"2013-06-10T10:05:44.043Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-06-10T10:18:03.328Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-06-10T10:24:34.576Z","type":"quit"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-06-10T10:28:09.313Z","type":"quit"}
{"nick":"csaoh","reason":"Quit: csaoh","date":"2013-06-10T10:29:26.275Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-06-10T10:36:40.739Z","type":"quit"}
{"nick":"csaoh","date":"2013-06-10T10:43:31.270Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-06-10T10:44:30.235Z","type":"quit"}
{"nick":"dominictarr","date":"2013-06-10T10:51:51.114Z","type":"join"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-06-10T11:12:56.371Z","type":"quit"}
{"nick":"bajtos","date":"2013-06-10T11:47:21.158Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-06-10T11:50:30.416Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 255 seconds","date":"2013-06-10T11:54:59.416Z","type":"quit"}
{"nick":"olalonde","reason":"Quit: olalonde","date":"2013-06-10T11:56:14.121Z","type":"quit"}
{"nick":"hz","date":"2013-06-10T11:58:17.872Z","type":"join"}
{"nick":"hz","reason":"Ping timeout: 240 seconds","date":"2013-06-10T12:02:24.009Z","type":"quit"}
{"nick":"timoxley","date":"2013-06-10T12:03:00.166Z","type":"join"}
{"nick":"hz","date":"2013-06-10T12:04:49.945Z","type":"join"}
{"nick":"abraxas","date":"2013-06-10T12:36:57.454Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 240 seconds","date":"2013-06-10T12:41:23.989Z","type":"quit"}
{"nick":"philips","date":"2013-06-10T13:02:12.427Z","type":"join"}
{"nick":"c4milo","date":"2013-06-10T13:08:19.173Z","type":"join"}
{"nick":"hz","reason":"Ping timeout: 240 seconds","date":"2013-06-10T13:16:23.876Z","type":"quit"}
{"nick":"hz","date":"2013-06-10T13:31:10.905Z","type":"join"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-06-10T13:32:43.461Z","type":"quit"}
{"nick":"hz","reason":"Read error: Connection reset by peer","date":"2013-06-10T13:39:17.783Z","type":"quit"}
{"nick":"hz","date":"2013-06-10T13:40:41.423Z","type":"join"}
{"nick":"timoxley","reason":"Ping timeout: 245 seconds","date":"2013-06-10T13:41:23.191Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-06-10T13:41:29.261Z","type":"join"}
{"nick":"papertigers","date":"2013-06-10T13:51:14.136Z","type":"join"}
{"nick":"loladiro","date":"2013-06-10T13:51:33.293Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-06-10T13:53:37.460Z","type":"join"}
{"nick":"pachet","date":"2013-06-10T14:06:16.262Z","type":"join"}
{"nick":"bajtos","date":"2013-06-10T14:11:28.993Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-10T14:28:24.926Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-06-10T14:32:00.859Z","type":"quit"}
{"nick":"leonvv","date":"2013-06-10T14:33:12.757Z","type":"join"}
{"nick":"pooya","date":"2013-06-10T14:33:19.682Z","type":"join"}
{"nick":"c4milo","date":"2013-06-10T14:34:36.242Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-06-10T14:44:06.579Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-10T14:47:48.630Z","type":"nick"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-06-10T14:50:12.209Z","type":"quit"}
{"nick":"pachet_","date":"2013-06-10T14:56:45.514Z","type":"join"}
{"nick":"pachet","reason":"Ping timeout: 240 seconds","date":"2013-06-10T14:58:53.946Z","type":"quit"}
{"nick":"wmil","date":"2013-06-10T15:06:56.409Z","type":"join"}
{"nick":"bajtos","date":"2013-06-10T15:11:24.094Z","type":"join"}
{"nick":"wmil","reason":"Ping timeout: 255 seconds","date":"2013-06-10T15:11:38.413Z","type":"quit"}
{"nick":"trevnorris","message":"morning","date":"2013-06-10T15:12:23.431Z","type":"message"}
{"nick":"leonvv","reason":"Remote host closed the connection","date":"2013-06-10T15:19:07.655Z","type":"quit"}
{"nick":"groundwater","date":"2013-06-10T15:24:31.995Z","type":"join"}
{"nick":"pachet_","reason":"Quit: leaving","date":"2013-06-10T15:27:56.657Z","type":"quit"}
{"nick":"timoxley","date":"2013-06-10T15:28:11.913Z","type":"join"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-06-10T15:29:42.339Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-06-10T15:32:55.401Z","type":"quit"}
{"nick":"HenryR","date":"2013-06-10T15:44:35.163Z","type":"join"}
{"nick":"dap","date":"2013-06-10T15:46:55.164Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-06-10T15:48:44.722Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: ping","date":"2013-06-10T16:02:05.954Z","type":"message"}
{"nick":"tjfontaine","message":"good day good sirs","date":"2013-06-10T16:02:38.776Z","type":"message"}
{"nick":"trevnorris","message":"hey hey","date":"2013-06-10T16:02:44.149Z","type":"message"}
{"nick":"juliangruber","reason":"Ping timeout: 256 seconds","date":"2013-06-10T16:09:34.928Z","type":"quit"}
{"nick":"bajtos","date":"2013-06-10T16:09:37.010Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 264 seconds","date":"2013-06-10T16:10:43.419Z","type":"quit"}
{"nick":"juliangruber","date":"2013-06-10T16:10:52.383Z","type":"join"}
{"nick":"mmalecki","date":"2013-06-10T16:10:53.623Z","type":"join"}
{"nick":"loladiro","date":"2013-06-10T16:16:02.027Z","type":"join"}
{"nick":"Benvie","date":"2013-06-10T16:19:04.225Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-06-10T16:22:10.584Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-10T16:28:00.647Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-06-10T16:38:29.208Z","type":"join"}
{"nick":"csaoh","reason":"Quit: csaoh","date":"2013-06-10T16:40:38.606Z","type":"quit"}
{"nick":"trevnorris","message":"how do you disable -Werror at compile time? always forget the param","date":"2013-06-10T16:41:14.938Z","type":"message"}
{"nick":"tjfontaine","message":"you mean -Wno-error","date":"2013-06-10T16:41:51.404Z","type":"message"}
{"nick":"trevnorris","message":"ah yeah. forgot to set my *FLAGS","date":"2013-06-10T16:42:39.635Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-06-10T16:43:18.291Z","type":"quit"}
{"nick":"amartens","date":"2013-06-10T16:43:21.449Z","type":"join"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-06-10T16:52:57.128Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-06-10T16:57:31.947Z","type":"quit"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-06-10T16:58:10.151Z","type":"quit"}
{"nick":"mikeal","date":"2013-06-10T17:06:20.128Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: have a moment, and a linux box?","date":"2013-06-10T17:07:46.867Z","type":"message"}
{"nick":"tjfontaine","message":"what's up?","date":"2013-06-10T17:08:17.672Z","type":"message"}
{"nick":"tjfontaine","message":"#5181?","date":"2013-06-10T17:08:45.601Z","type":"message"}
{"nick":"trevnorris","message":"i'm getting some strange ass stuff. first, i'm getting a segfault on tip of v0.8 branch running #5015 OP's code.","date":"2013-06-10T17:08:54.108Z","type":"message"}
{"nick":"trevnorris","message":"yeah, and 5181.","date":"2013-06-10T17:09:01.872Z","type":"message"}
{"nick":"c4milo","date":"2013-06-10T17:09:15.247Z","type":"join"}
{"nick":"trevnorris","message":"just want to see if someone else is crashing as well.","date":"2013-06-10T17:09:20.387Z","type":"message"}
{"nick":"tjfontaine","message":"so you want me to test v0.8 HEAD on linux?","date":"2013-06-10T17:10:04.790Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: yeah, running the OP's code from 5015. I can't figure out why it's crashing.","date":"2013-06-10T17:10:32.675Z","type":"message"}
{"nick":"tjfontaine","message":"when you say OP you mean Original Poster?","date":"2013-06-10T17:10:55.898Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: thing is both crashes are occurring around the time node is exiting. which doesn't make sense.","date":"2013-06-10T17:10:56.625Z","type":"message"}
{"nick":"trevnorris","message":"yeah :)","date":"2013-06-10T17:10:59.901Z","type":"message"}
{"nick":"trevnorris","message":"but I can't get either to crash w/ a Debug build. which is really annoying.","date":"2013-06-10T17:12:20.876Z","type":"message"}
{"nick":"trevnorris","message":"whoa. don't do (gdb) p <TAB> <TAB>","date":"2013-06-10T17:14:16.157Z","type":"message"}
{"nick":"tjfontaine","message":"heh there are a lot of symbols","date":"2013-06-10T17:14:39.967Z","type":"message"}
{"nick":"brson","date":"2013-06-10T17:14:42.028Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: ok, it must be something w/ my machine. i'm seg faulting on a build I know used to work. going to restart my box.","date":"2013-06-10T17:15:48.387Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-06-10T17:17:24.024Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-06-10T17:19:09.013Z","type":"quit"}
{"nick":"tjfontaine","message":"trevnorris: it's working here","date":"2013-06-10T17:21:41.965Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: well. restarting didn't fix it. i'm still seg faulting.","date":"2013-06-10T17:22:04.194Z","type":"message"}
{"nick":"tjfontaine","message":"I did 100 iterations without fail","date":"2013-06-10T17:22:48.262Z","type":"message"}
{"nick":"paddybyers","reason":"Ping timeout: 248 seconds","date":"2013-06-10T17:23:13.294Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: just so you know i'm not crazy: https://gist.github.com/trevnorris/5750606","date":"2013-06-10T17:23:49.713Z","type":"message"}
{"nick":"tjfontaine","message":"I have no problem believing you're seeing a segfault, I just can't reproduce it :)","date":"2013-06-10T17:24:55.894Z","type":"message"}
{"nick":"trevnorris","message":"thanks for trusting me. :)","date":"2013-06-10T17:25:34.157Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so that's happening on the tip of both v0.8 and v0.10, but I can't reproduce on master.","date":"2013-06-10T17:26:32.669Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: I guess based on that backtrace you can turn on some v8 options and see where the optimizer is killing you","date":"2013-06-10T17:26:48.724Z","type":"message"}
{"nick":"trevnorris","message":"true. now to figure out which options those are.","date":"2013-06-10T17:27:18.712Z","type":"message"}
{"nick":"tjfontaine","message":"--trace-deopts at the very least","date":"2013-06-10T17:27:26.995Z","type":"message"}
{"nick":"tjfontaine","message":"but it's odd that this is happening during shutdown","date":"2013-06-10T17:27:40.069Z","type":"message"}
{"nick":"trevnorris","message":"yeah, right.","date":"2013-06-10T17:27:49.327Z","type":"message"}
{"nick":"trevnorris","message":"it's after everything's run properly.","date":"2013-06-10T17:27:55.503Z","type":"message"}
{"nick":"pachet","date":"2013-06-10T17:28:05.300Z","type":"join"}
{"nick":"pachet","reason":"Changing host","date":"2013-06-10T17:28:05.520Z","type":"quit"}
{"nick":"pachet","date":"2013-06-10T17:28:05.520Z","type":"join"}
{"nick":"tjfontaine","message":"in context.dispose no less","date":"2013-06-10T17:28:13.074Z","type":"message"}
{"nick":"tjfontaine","message":"could be a miscompile I guess","date":"2013-06-10T17:28:41.791Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: oh shit. yeah. I just upgraded to clang 3.3","date":"2013-06-10T17:29:16.420Z","type":"message"}
{"nick":"TooTallNate","date":"2013-06-10T17:29:17.522Z","type":"join"}
{"nick":"tjfontaine","message":"trevnorris: if you have gcc or older clang give them a shot","date":"2013-06-10T17:29:41.688Z","type":"message"}
{"nick":"trevnorris","message":"wow. hard core brain fart. can't remember the vars to set to compile w/ gcc.","date":"2013-06-10T17:31:12.770Z","type":"message"}
{"nick":"trevnorris","message":"nm","date":"2013-06-10T17:31:31.912Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: yup.","date":"2013-06-10T17:35:06.243Z","type":"message"}
{"nick":"tjfontaine","message":"ok, so we'll need some fun debugging skills to try and figure that one out","date":"2013-06-10T17:35:49.872Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: well, it's not happening in master. do we want to say that v0.10 just supports 3.2?","date":"2013-06-10T17:36:27.987Z","type":"message"}
{"nick":"trevnorris","message":"(mainly because this just sounds like a world of hurt)","date":"2013-06-10T17:36:41.598Z","type":"message"}
{"nick":"chilts_","date":"2013-06-10T17:36:48.317Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: well, actually what's strange is that it doesn't always occur. just sometimes. haven't been able to figure out the criterion for it to happen.","date":"2013-06-10T17:37:41.185Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: it's probably related to the v8 version + clang + compiler optimizations turned on","date":"2013-06-10T17:38:14.439Z","type":"message"}
{"nick":"trevnorris","message":"yeah","date":"2013-06-10T17:38:25.997Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: so you can start by tweaking those like start with -O0 and work back up to where we are","date":"2013-06-10T17:38:31.669Z","type":"message"}
{"nick":"tjfontaine","message":"if we can reproduce at -O0 then we're really in good shape to track it down (though seems unlikely because of debug build not failing)","date":"2013-06-10T17:39:11.502Z","type":"message"}
{"nick":"trevnorris","message":"well, it's not happening in Debug builds","date":"2013-06-10T17:39:29.133Z","type":"message"}
{"nick":"tjfontaine","message":"that's what I said","date":"2013-06-10T17:39:35.021Z","type":"message"}
{"nick":"tjfontaine","message":"chances are we can track it down to a specific optimization that we can disable","date":"2013-06-10T17:39:44.087Z","type":"message"}
{"nick":"trevnorris","message":"heh, typing too many places at once. :)","date":"2013-06-10T17:39:52.627Z","type":"message"}
{"nick":"trevnorris","message":"ok, if it's from an optimization and not from a race condition then it'll be a lot easier.","date":"2013-06-10T17:40:11.618Z","type":"message"}
{"nick":"trevnorris","message":"lemme try something.","date":"2013-06-10T17:40:16.042Z","type":"message"}
{"nick":"tjfontaine","message":"release builds at -O0..3 will probably indicate if it's an optimization miscompile","date":"2013-06-10T17:40:51.401Z","type":"message"}
{"nick":"skebcio_","date":"2013-06-10T17:41:35.163Z","type":"join"}
{"nick":"mikeal","reason":"*.net *.split","date":"2013-06-10T17:42:24.495Z","type":"quit"}
{"nick":"bajtos","reason":"*.net *.split","date":"2013-06-10T17:42:25.375Z","type":"quit"}
{"nick":"skebcio","reason":"*.net *.split","date":"2013-06-10T17:42:29.955Z","type":"quit"}
{"nick":"chilts","reason":"*.net *.split","date":"2013-06-10T17:42:34.755Z","type":"quit"}
{"nick":"tellnes","reason":"*.net *.split","date":"2013-06-10T17:42:37.725Z","type":"quit"}
{"nick":"tjfontaine","message":"\"you're scripts might\"","date":"2013-06-10T17:43:40.050Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-06-10T17:43:40.743Z","type":"message"}
{"nick":"tellnes","date":"2013-06-10T17:44:58.201Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: updated 5657 w/ some strace output.","date":"2013-06-10T17:46:12.887Z","type":"message"}
{"nick":"trevnorris","message":"but i'm still new at reading all that. :)","date":"2013-06-10T17:46:26.281Z","type":"message"}
{"nick":"tjfontaine","message":"sure, but your gdb backtrace is the most useful","date":"2013-06-10T17:48:20.424Z","type":"message"}
{"nick":"trevnorris","message":"yeah. i'm just throwing every cpp debugging skill I have at it (which aren't many :P","date":"2013-06-10T17:49:35.452Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: fwiw, ran strace -f, last command is madvise(..., ..., MADV_DONTNEED)","date":"2013-06-10T18:00:45.175Z","type":"message"}
{"nick":"trevnorris","message":"followed by exit(0)","date":"2013-06-10T18:00:50.199Z","type":"message"}
{"nick":"trevnorris","message":"then get a process detached.","date":"2013-06-10T18:01:04.476Z","type":"message"}
{"nick":"tjfontaine","message":"have you done the -O0 tests yet?","date":"2013-06-10T18:04:49.873Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: you mean besides a straight up Debug build?","date":"2013-06-10T18:06:41.343Z","type":"message"}
{"nick":"tjfontaine","message":"yes, more htan just the debug build","date":"2013-06-10T18:06:55.223Z","type":"message"}
{"nick":"trevnorris","message":"ok","date":"2013-06-10T18:07:00.709Z","type":"message"}
{"nick":"trevnorris","message":"i'll step through em","date":"2013-06-10T18:07:06.184Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: ok. only happens w/ -O2","date":"2013-06-10T18:10:54.048Z","type":"message"}
{"nick":"tjfontaine","message":"ok that's good","date":"2013-06-10T18:11:12.721Z","type":"message"}
{"nick":"tjfontaine","message":"so basically just want to see the difference optimizations enabled between the two","date":"2013-06-10T18:11:36.702Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: ok. so from the strace output. a futext is resuming after the process has detached.","date":"2013-06-10T18:12:01.898Z","type":"message"}
{"nick":"trevnorris","message":"think that's a thread race?","date":"2013-06-10T18:12:07.404Z","type":"message"}
{"nick":"trevnorris","message":"ah yeah. PID 28580 is resuming a futex, and 28581 is detaching the process.","date":"2013-06-10T18:12:41.074Z","type":"message"}
{"nick":"trevnorris","message":"and they just happen to overlap","date":"2013-06-10T18:13:00.532Z","type":"message"}
{"nick":"EhevuTov","date":"2013-06-10T18:16:13.014Z","type":"join"}
{"nick":"trevnorris","message":"isaacs out today?","date":"2013-06-10T18:17:13.670Z","type":"message"}
{"nick":"tjfontaine","message":"I believe he has yoga in the morning now","date":"2013-06-10T18:23:23.108Z","type":"message"}
{"nick":"trevnorris","message":"heh, cool","date":"2013-06-10T18:23:28.412Z","type":"message"}
{"nick":"trevnorris","message":"and bnoordhuis must be hiding from me. promised a review last week. :P","date":"2013-06-10T18:24:26.355Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: feel like reviewing some code. :)","date":"2013-06-10T18:25:13.372Z","type":"message"}
{"nick":"AvianFlu","date":"2013-06-10T18:29:13.407Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 276 seconds","date":"2013-06-10T18:31:04.082Z","type":"quit"}
{"nick":"brson","date":"2013-06-10T18:44:23.789Z","type":"join"}
{"nick":"mikeal","date":"2013-06-10T18:49:15.001Z","type":"join"}
{"nick":"mraleph1","date":"2013-06-10T18:54:04.530Z","type":"join"}
{"nick":"mraleph","reason":"Read error: Connection reset by peer","date":"2013-06-10T18:54:10.348Z","type":"quit"}
{"nick":"HenryRawas","date":"2013-06-10T18:56:01.027Z","type":"join"}
{"nick":"HenryR","reason":"Read error: Connection reset by peer","date":"2013-06-10T18:56:09.972Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Ping timeout: 248 seconds","date":"2013-06-10T19:12:37.729Z","type":"quit"}
{"nick":"trevnorris","message":"anyone? anyone?","date":"2013-06-10T19:14:56.706Z","type":"message"}
{"nick":"trevnorris","action":"sees a tumbleweed roll by","date":"2013-06-10T19:15:06.507Z","type":"action"}
{"nick":"txdv","reason":"Read error: Operation timed out","date":"2013-06-10T19:46:17.355Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-06-10T19:46:28.631Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-06-10T20:05:44.642Z","type":"join"}
{"nick":"EhevuTov_","date":"2013-06-10T20:07:28.402Z","type":"join"}
{"nick":"EhevuTov","reason":"Ping timeout: 248 seconds","date":"2013-06-10T20:10:45.972Z","type":"quit"}
{"nick":"isaacs","message":"fg","date":"2013-06-10T20:13:19.764Z","type":"message"}
{"nick":"tjfontaine","message":"wb","date":"2013-06-10T20:13:24.285Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: you're alive!","date":"2013-06-10T20:15:30.124Z","type":"message"}
{"nick":"isaacs","message":"yep","date":"2013-06-10T20:16:21.623Z","type":"message"}
{"nick":"isaacs","message":"i have been kinda heads down trying to finish this email change security feature for npmjs.org","date":"2013-06-10T20:16:42.990Z","type":"message"}
{"nick":"isaacs","message":"step 2 of my ridiculously circuitous plan to implement package signing in such a way that everyone actually does it.","date":"2013-06-10T20:17:06.224Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 255 seconds","date":"2013-06-10T20:17:11.411Z","type":"quit"}
{"nick":"trevnorris","message":"heh, sounds like a challenge.","date":"2013-06-10T20:17:56.646Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: what's your scheme?","date":"2013-06-10T20:18:15.186Z","type":"message"}
{"nick":"tjfontaine","message":"to take over the world","date":"2013-06-10T20:18:21.503Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: fyi, got external strings working: 5641","date":"2013-06-10T20:18:28.288Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: ad :)","date":"2013-06-10T20:18:34.490Z","type":"message"}
{"nick":"isaacs","message":"*rad","date":"2013-06-10T20:18:36.345Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: so, the idea is, package signing should save us, even if the user's account is hijacked, yes?","date":"2013-06-10T20:18:53.648Z","type":"message"}
{"nick":"isaacs","message":"but where do you store the pubkeys?","date":"2013-06-10T20:18:57.813Z","type":"message"}
{"nick":"isaacs","message":"it is completely unreasonable to use PGP keys, and put them in MIT or some other public keyserver.","date":"2013-06-10T20:19:17.725Z","type":"message"}
{"nick":"isaacs","message":"they're all super slow, and it's Yet Another thing that can go down and then you're as good as if you didn't have keys.","date":"2013-06-10T20:19:31.477Z","type":"message"}
{"nick":"isaacs","message":"putting them in your npm account is ok, but if i have your password, why don't i just add my key to your account?","date":"2013-06-10T20:19:52.722Z","type":"message"}
{"nick":"isaacs","message":"so, to mitigate that risk, whenever a key is added to the account, it emails you to say that this happened, and let you revert it.","date":"2013-06-10T20:20:14.966Z","type":"message"}
{"nick":"bnoordhuis","message":"right, makes sense","date":"2013-06-10T20:20:27.768Z","type":"message"}
{"nick":"isaacs","message":"so, now, if i have your password, i have to change your email address, and then add my key.","date":"2013-06-10T20:20:31.226Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: no idea how this could work, but could you enforce adding keys by using a key already in the account?","date":"2013-06-10T20:20:38.778Z","type":"message"}
{"nick":"isaacs","message":"to mitigate THAT risk, email can only be changed by admins","date":"2013-06-10T20:20:51.072Z","type":"message"}
{"nick":"isaacs","message":"to chnage your email address, you request the change, 2 tokens are minted.  one to the new address to confirm the change, and one to the old address to revert it.","date":"2013-06-10T20:21:10.324Z","type":"message"}
{"nick":"bnoordhuis","message":"circuitous indeed :)","date":"2013-06-10T20:21:53.359Z","type":"message"}
{"nick":"bnoordhuis","message":"the plan is to have everyone use gpg?","date":"2013-06-10T20:22:04.010Z","type":"message"}
{"nick":"trevnorris","message":"here's an insane idea. key store is a git repo. remote doesn't allow force push. each commit must be signed by a key who's public is in the repo.","date":"2013-06-10T20:22:14.193Z","type":"message"}
{"nick":"trevnorris","message":"then only existing keys can add new keys.","date":"2013-06-10T20:22:36.080Z","type":"message"}
{"nick":"isaacs","message":"so now, if i steal your account password, i have to request an email change, AND not get reverted, and i think at that point, while we're not at the KGB/CIA level of security, it's enough for our dumb little package manager webapp thingie","date":"2013-06-10T20:22:38.343Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: the plan is for everyone to use ssh keys.","date":"2013-06-10T20:22:44.189Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: gpg is too unix-only","date":"2013-06-10T20:22:51.809Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, and a pain to set up","date":"2013-06-10T20:23:01.330Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: but github has already gotten everyone to have ssh keys.","date":"2013-06-10T20:23:02.568Z","type":"message"}
{"nick":"tjfontaine","message":"there is that js implementation of it, brr","date":"2013-06-10T20:23:12.750Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: and then we can have a \"Login with github to import your keys\"","date":"2013-06-10T20:23:14.831Z","type":"message"}
{"nick":"isaacs","message":"and, i mean, with gpg, you still have all the same problems with key storage.","date":"2013-06-10T20:23:35.233Z","type":"message"}
{"nick":"creationix","message":"ssh in js isn't bad","date":"2013-06-10T20:23:37.999Z","type":"message"}
{"nick":"creationix","message":"especially since node exports rsa primitives","date":"2013-06-10T20:23:44.906Z","type":"message"}
{"nick":"isaacs","message":"we can do signing and verifying using ssh keys in node already with the crypto stuff.","date":"2013-06-10T20:23:56.173Z","type":"message"}
{"nick":"isaacs","message":"that part is actually pretty easy","date":"2013-06-10T20:24:00.033Z","type":"message"}
{"nick":"tjfontaine","message":"creationix: I was actually referring to the gpg implementation","date":"2013-06-10T20:24:02.371Z","type":"message"}
{"nick":"isaacs","message":"the tricky bit was decoding passphrase-encrypted keys.","date":"2013-06-10T20:24:10.790Z","type":"message"}
{"nick":"isaacs","message":"but i did that.","date":"2013-06-10T20:24:12.347Z","type":"message"}
{"nick":"isaacs","message":"this could also set the stage for a \"login to couchdb with your ssh keys\" feature, or a \"publish over ssh\" feature.","date":"2013-06-10T20:24:46.648Z","type":"message"}
{"nick":"isaacs","message":"i dunno","date":"2013-06-10T20:24:49.642Z","type":"message"}
{"nick":"isaacs","message":"pie in the sky thinking, there","date":"2013-06-10T20:24:54.444Z","type":"message"}
{"nick":"creationix","message":"well, if you need any custom git stuff, I may be able to help out","date":"2013-06-10T20:25:12.667Z","type":"message"}
{"nick":"isaacs","message":"creationix: actually, luk brought up the idea of using js-git for the places where npm shells out to the git executable.","date":"2013-06-10T20:26:43.046Z","type":"message"}
{"nick":"isaacs","message":"creationix: i kinda shrugged.  for my purposes, shelling out to git is actually pretty ok","date":"2013-06-10T20:26:57.297Z","type":"message"}
{"nick":"creationix","message":"so I have code today if you just want to get the files","date":"2013-06-10T20:26:57.522Z","type":"message"}
{"nick":"creationix","message":"clone at a tag or branch","date":"2013-06-10T20:27:02.145Z","type":"message"}
{"nick":"creationix","message":"I haven't added shallow clone yet, but it shouldn't be much harder (if desired)","date":"2013-06-10T20:27:19.395Z","type":"message"}
{"nick":"creationix","message":"I guess the value is for windows users (or anyone really) who installs node, but not git","date":"2013-06-10T20:27:59.126Z","type":"message"}
{"nick":"creationix","message":"git is a little harder to get","date":"2013-06-10T20:28:02.495Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: any smalloc lately? ;-)","date":"2013-06-10T20:31:20.674Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: and thanks for the 5641 review. did manage to get that into a template class.","date":"2013-06-10T20:32:34.054Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: oh, and interestingly. binary encoding went from the slowest to now the fastest.","date":"2013-06-10T20:33:36.752Z","type":"message"}
{"nick":"trevnorris","message":"and by a hefty margin for anything over 8kb","date":"2013-06-10T20:33:55.561Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: nice","date":"2013-06-10T20:34:28.434Z","type":"message"}
{"nick":"isaacs","action":"foresees a day when we abandon buffers and return to binary strings...","date":"2013-06-10T20:34:49.717Z","type":"action"}
{"nick":"trevnorris","message":"....","date":"2013-06-10T20:35:29.605Z","type":"message"}
{"nick":"creationix","message":"though binary strings still use twice the ram?","date":"2013-06-10T20:35:38.695Z","type":"message"}
{"nick":"creationix","message":"or does v8 optimize them?","date":"2013-06-10T20:35:44.321Z","type":"message"}
{"nick":"isaacs","message":"creationix: that's another problem we'll have to solve :)","date":"2013-06-10T20:36:42.832Z","type":"message"}
{"nick":"trevnorris","message":"this is a problem i'm not familiar with.","date":"2013-06-10T20:36:56.666Z","type":"message"}
{"nick":"isaacs","message":"creationix: that was like a dreamy unrealistic \"foresee\", not a \"this will happen tomorrow\" kind","date":"2013-06-10T20:37:09.058Z","type":"message"}
{"nick":"creationix","message":"isaacs: tomorrow would be insane :P","date":"2013-06-10T20:37:39.386Z","type":"message"}
{"nick":"creationix","message":"or even \"next major release\"","date":"2013-06-10T20:37:53.651Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: well, technically it's possible to convert any Buffer to a binary string fairly cheaply (using external strings)","date":"2013-06-10T20:38:15.310Z","type":"message"}
{"nick":"trevnorris","message":"and back","date":"2013-06-10T20:38:35.689Z","type":"message"}
{"nick":"creationix","message":"trevnorris: so buffer.toString('binary') and new Buffer(string, 'binary')?","date":"2013-06-10T20:38:47.911Z","type":"message"}
{"nick":"creationix","message":"I assume the \"and back\" part is only fast for actual external strings","date":"2013-06-10T20:39:18.429Z","type":"message"}
{"nick":"trevnorris","message":"creationix: sort of. right now for any buffer < 0xfbee9 it's copied into the v8 heap.","date":"2013-06-10T20:39:27.282Z","type":"message"}
{"nick":"trevnorris","message":"creationix: this impl would explicitly use the external data","date":"2013-06-10T20:39:50.502Z","type":"message"}
{"nick":"EhevuTov_","reason":"Quit: This computer has gone to sleep","date":"2013-06-10T20:40:01.317Z","type":"quit"}
{"nick":"trevnorris","message":"creationix: though the strange strange thing is that using external strings means you can also create mutable strings in v8","date":"2013-06-10T20:40:09.670Z","type":"message"}
{"nick":"trevnorris","message":"(on the js side)","date":"2013-06-10T20:40:14.996Z","type":"message"}
{"nick":"trevnorris","message":"been playing around w/ them, and you can sort of create a view into the buffer as a binary string, and the contents can change as you manipulate the buffer.","date":"2013-06-10T20:41:29.021Z","type":"message"}
{"nick":"creationix","message":"trevnorris: that can't be good for v8","date":"2013-06-10T20:41:57.458Z","type":"message"}
{"nick":"trevnorris","message":"creationix: can you define \"[not] good for\"","date":"2013-06-10T20:42:36.114Z","type":"message"}
{"nick":"creationix","message":"doesn't it make assumptions on the fact that strings are immutable","date":"2013-06-10T20:42:50.668Z","type":"message"}
{"nick":"creationix","message":"so you might get cached old data sometimes","date":"2013-06-10T20:43:03.494Z","type":"message"}
{"nick":"trevnorris","message":"not as far as I know. they're treated more or less the same as the data attached to an array buffer","date":"2013-06-10T20:43:59.000Z","type":"message"}
{"nick":"creationix","message":"I guess that makes sense","date":"2013-06-10T20:44:18.791Z","type":"message"}
{"nick":"creationix","message":"can't think of any meaningful optimization it would make","date":"2013-06-10T20:44:27.939Z","type":"message"}
{"nick":"trevnorris","message":"just external memory attached to a js object. except in this case it's interpreted into a string instead of a data array.","date":"2013-06-10T20:44:30.033Z","type":"message"}
{"nick":"trevnorris","message":"oh. no idea if it's even useful.","date":"2013-06-10T20:44:43.485Z","type":"message"}
{"nick":"trevnorris","message":"just wanted to see if it was possible. :)","date":"2013-06-10T20:44:49.852Z","type":"message"}
{"nick":"trevnorris","message":"creationix: though there is a crazy cliff when writing in strings. so much I filed a bug: http://code.google.com/p/v8/issues/detail?id=2721","date":"2013-06-10T20:45:36.198Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-06-10T20:46:18.470Z","type":"join"}
{"nick":"creationix","message":"I see","date":"2013-06-10T20:47:19.257Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: also, might interest you. seems there are cases in node ( >= v0.10.x) compiled w/ clang 3.3 where there's a thread race closing the process: 5657","date":"2013-06-10T20:47:55.706Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: are you sure it's a node bug, not a v8 bug?","date":"2013-06-10T20:49:08.159Z","type":"message"}
{"nick":"tjfontaine","message":"I think it's v8+clang3.3","date":"2013-06-10T20:50:34.601Z","type":"message"}
{"nick":"tjfontaine","message":"and actually a miscompile seems more likely since it goes away with -O1","date":"2013-06-10T20:51:00.547Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: could be. still trying to create a v8 stand alone test that reproduces the error.","date":"2013-06-10T20:54:54.889Z","type":"message"}
{"nick":"tjfontaine","message":"does `node -e ''` crash as well?","date":"2013-06-10T20:56:05.589Z","type":"message"}
{"nick":"AvianFlu_","date":"2013-06-10T20:56:38.856Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 245 seconds","date":"2013-06-10T20:58:17.176Z","type":"quit"}
{"nick":"othiym23","reason":"*.net *.split","date":"2013-06-10T20:58:37.906Z","type":"quit"}
{"nick":"felixge","reason":"*.net *.split","date":"2013-06-10T20:58:38.866Z","type":"quit"}
{"nick":"trevnorris","message":"sec","date":"2013-06-10T20:58:39.637Z","type":"message"}
{"nick":"felixge","date":"2013-06-10T20:58:43.325Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-06-10T20:58:43.771Z","type":"quit"}
{"nick":"felixge","date":"2013-06-10T20:58:43.986Z","type":"join"}
{"nick":"othiym23","date":"2013-06-10T20:59:18.196Z","type":"join"}
{"nick":"EhevuTov","date":"2013-06-10T21:00:46.555Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: this will: ./node -e \"for(var i = 0; i < 1e3; i++) require('crypto').createHash('md5').update('a').digest();\"","date":"2013-06-10T21:01:59.802Z","type":"message"}
{"nick":"trevnorris","message":"that's on latest v0.10","date":"2013-06-10T21:02:18.562Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: trying to establish the minimum, so I guess '' doesn't fail?","date":"2013-06-10T21:02:34.042Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: no. but if I run \"make test\" then a certain subset fail.","date":"2013-06-10T21:03:04.570Z","type":"message"}
{"nick":"trevnorris","message":"i'll run though those and see if I can find a minimal case.","date":"2013-06-10T21:03:13.630Z","type":"message"}
{"nick":"tjfontaine","message":"what about just making a large buffer in the eval","date":"2013-06-10T21:03:30.290Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: did clang print any warnings when building node / v8?","date":"2013-06-10T21:04:06.252Z","type":"message"}
{"nick":"bnoordhuis","message":"btw, are you testing with a release version of clang or is it from svn/git?","date":"2013-06-10T21:04:32.453Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: i built it, but it's from their release_33","date":"2013-06-10T21:05:09.072Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: oh hell. ok yeah. that's the release branch, but they haven't created the actual release tag.","date":"2013-06-10T21:05:51.452Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: this will seg fault: ./node -e \"for (i=0;i<1e3;i++) new Buffer(0xf);\"","date":"2013-06-10T21:08:07.354Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-06-10T21:09:08.995Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: ok. so is this a non-issue since 3.3 hasn't been officially released?","date":"2013-06-10T21:09:47.509Z","type":"message"}
{"nick":"tjfontaine","message":"if it is a miscompile we'll want to tell them asap","date":"2013-06-10T21:10:05.038Z","type":"message"}
{"nick":"tjfontaine","message":"especially since I would expect it to be released shortly as part of the new xcode for ios7","date":"2013-06-10T21:10:20.117Z","type":"message"}
{"nick":"trevnorris","message":"it doesn't happen on latest v8, only 3.14 or before. not sure what that means though","date":"2013-06-10T21:10:50.641Z","type":"message"}
{"nick":"mikeal","reason":"Ping timeout: 252 seconds","date":"2013-06-10T21:13:17.547Z","type":"quit"}
{"nick":"mikeal","date":"2013-06-10T21:13:33.220Z","type":"join"}
{"nick":"trevnorris","message":"i'm trying to figure out what caused which threads to spawn.","date":"2013-06-10T21:14:20.427Z","type":"message"}
{"nick":"trevnorris","message":"any tips here? last time I found a bug in clang, bnoordhuis was actually the one that figured it out. :)","date":"2013-06-10T21:15:44.010Z","type":"message"}
{"nick":"trevnorris","message":"it's easily reproducible, and always fails the same way.","date":"2013-06-10T21:16:46.003Z","type":"message"}
{"nick":"trevnorris","message":"one thread exits the process while another is in the middle of resuming a futex.","date":"2013-06-10T21:17:07.025Z","type":"message"}
{"nick":"tjfontaine","message":"look at the differences in the optimizations enabled/disabled, compile with O1 and enable each one, find the offending pass (hopefully its just one and not a combination) and then you can compare the assembly around the failure","date":"2013-06-10T21:17:32.672Z","type":"message"}
{"nick":"tjfontaine","message":"presuming you can't just eyeball the assembly around the failure right now and see the problem","date":"2013-06-10T21:17:59.546Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: ah hell. ok so I have no idea how to read strace output.","date":"2013-06-10T21:19:56.591Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-10T21:20:04.652Z","type":"nick"}
{"nick":"trevnorris","message":"tjfontaine: just did the same and the calls are exactly the same, except the good one just continues w/ a mmap call","date":"2013-06-10T21:20:15.943Z","type":"message"}
{"nick":"tjfontaine","message":"I'm not convinced the strace output is helping you anyway","date":"2013-06-10T21:20:18.054Z","type":"message"}
{"nick":"trevnorris","message":"yeah...","date":"2013-06-10T21:20:26.939Z","type":"message"}
{"nick":"dannycoates","date":"2013-06-10T21:20:32.065Z","type":"join"}
{"nick":"trevnorris","message":"so.... what's a good tool for examining the assembly (sorry, i'm entering total newbish area)","date":"2013-06-10T21:21:01.497Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: gdb disassemble/m","date":"2013-06-10T21:21:17.347Z","type":"message"}
{"nick":"trevnorris","message":"thanks :)","date":"2013-06-10T21:21:25.605Z","type":"message"}
{"nick":"tjfontaine","message":"gdb can do it, basically you want to break in the function that's failing but in the clean path with O1","date":"2013-06-10T21:21:29.097Z","type":"message"}
{"nick":"bnoordhuis","message":"you don't even have to break","date":"2013-06-10T21:21:58.094Z","type":"message"}
{"nick":"tjfontaine","message":"sure","date":"2013-06-10T21:22:04.084Z","type":"message"}
{"nick":"tjfontaine","message":"anyway ben can help you :)","date":"2013-06-10T21:22:18.032Z","type":"message"}
{"nick":"qard","date":"2013-06-10T21:24:00.318Z","type":"join"}
{"nick":"qard","date":"2013-06-10T21:24:49.988Z","type":"part"}
{"nick":"papertigers","reason":"Ping timeout: 246 seconds","date":"2013-06-10T21:25:10.962Z","type":"quit"}
{"nick":"bnoordhuis","message":"pummel/test-regress-GH-892 is borked in v0.10","date":"2013-06-10T21:38:36.800Z","type":"message"}
{"nick":"bnoordhuis","message":"(node) warning: Recursive process.nextTick detected. This will break in the next version of node. Please use setImmediate for recursive deferral.","date":"2013-06-10T21:38:42.839Z","type":"message"}
{"nick":"bnoordhuis","message":"RangeError: Maximum call stack size exceeded","date":"2013-06-10T21:38:45.815Z","type":"message"}
{"nick":"bnoordhuis","message":"got 22216601 bytes","date":"2013-06-10T21:38:48.355Z","type":"message"}
{"nick":"bnoordhuis","message":"deja vu, i remember bringing this up","date":"2013-06-10T21:38:58.690Z","type":"message"}
{"nick":"trevnorris","message":"i feel like a big kid now. examining the disassembly of cc functions and all. :)","date":"2013-06-10T21:40:05.249Z","type":"message"}
{"nick":"tjfontaine","message":"pummels are all kinds of fubard","date":"2013-06-10T21:40:36.687Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-06-10T21:41:09.386Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-10T21:41:10.748Z","type":"quit"}
{"nick":"rendar","date":"2013-06-10T21:43:05.774Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: so. the assembly of -O1 and -O2 aren't that close.","date":"2013-06-10T21:43:23.951Z","type":"message"}
{"nick":"tjfontaine","message":"optimizations can do a lot of crazy things","date":"2013-06-10T21:44:09.351Z","type":"message"}
{"nick":"tjfontaine","message":"whcih is why it's easier to try and identify a single optimization that triggers it","date":"2013-06-10T21:44:21.500Z","type":"message"}
{"nick":"AlbireoX_","date":"2013-06-10T21:44:28.639Z","type":"join"}
{"nick":"trevnorris","message":"yeah. and it's a lot of crazy. i'm just going to break on it and step through each machine instruction","date":"2013-06-10T21:44:40.215Z","type":"message"}
{"nick":"tjfontaine","message":"so look at which optimizations that O2 enables that O1 doesn't, and try one by one to compile node and see which causes it to fail","date":"2013-06-10T21:44:49.609Z","type":"message"}
{"nick":"papertigers","date":"2013-06-10T21:44:51.061Z","type":"join"}
{"nick":"trevnorris","message":"i know you're speaking english, but to me -O2 == \"magic that makes things go faster\"","date":"2013-06-10T21:45:29.484Z","type":"message"}
{"nick":"trevnorris","message":"i didn't realize you could break apart each optimization.","date":"2013-06-10T21:45:41.038Z","type":"message"}
{"nick":"tjfontaine","message":"\"Try using the -debug-pass=Arguments options to see what passes are being run at each optimization level. \"","date":"2013-06-10T21:48:29.612Z","type":"message"}
{"nick":"tjfontaine","message":"hm that may not be valid for clang but only for llvm","date":"2013-06-10T21:49:08.224Z","type":"message"}
{"nick":"tjfontaine","message":"ah there we go, wit -mllvm","date":"2013-06-10T21:49:24.131Z","type":"message"}
{"nick":"tjfontaine","message":"https://gist.github.com/tjfontaine/5752706","date":"2013-06-10T21:50:03.834Z","type":"message"}
{"nick":"tjfontaine","message":"shows on my clang the difference optimizations being enabled at each pass","date":"2013-06-10T21:50:15.804Z","type":"message"}
{"nick":"trevnorris","message":"interesting. thanks. :)","date":"2013-06-10T21:50:22.974Z","type":"message"}
{"nick":"tjfontaine","message":"anyway #llvm on oftc can offer plenty more advice on tracking it down","date":"2013-06-10T21:51:20.309Z","type":"message"}
{"nick":"trevnorris","message":"ok. found the instruction that fails, no idea how to interpret it: \"<_ZN2v88internal15MemoryAllocator4FreeEPNS0_11MemoryChunkE+64>:     mov    0xd(%rax),%cl\"","date":"2013-06-10T21:51:27.245Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-10T21:53:37.835Z","type":"nick"}
{"nick":"kevinswiber","date":"2013-06-10T21:55:42.346Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: ok. so in your opinion i'll find the issue much quicker if I figure out how to check each pass arguments for the method that's failing?","date":"2013-06-10T21:58:02.456Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-06-10T21:58:13.762Z","type":"quit"}
{"nick":"chilts_","new_nick":"chilts","date":"2013-06-10T21:58:58.998Z","type":"nick"}
{"nick":"tjfontaine","message":"trevnorris: it's suspect that it works fine at O1 and fails at O2, so there's likely an optimization being greedy and throwing away information that it needs","date":"2013-06-10T21:59:38.297Z","type":"message"}
{"nick":"papertigers","reason":"Quit: papertigers","date":"2013-06-10T21:59:45.879Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: oh. so you're saying check the differences between the two optimizations.","date":"2013-06-10T22:00:02.912Z","type":"message"}
{"nick":"tjfontaine","message":"yes.","date":"2013-06-10T22:00:07.083Z","type":"message"}
{"nick":"EhevuTov","date":"2013-06-10T22:00:21.424Z","type":"join"}
{"nick":"tjfontaine","message":"start with O1, and then add the first missing optimization","date":"2013-06-10T22:00:22.143Z","type":"message"}
{"nick":"trevnorris","message":"ok. in that case i'm just going to go compile v8 instead of all of node.","date":"2013-06-10T22:00:27.993Z","type":"message"}
{"nick":"tjfontaine","message":"best if you can get a standalone test case for d8 as well then","date":"2013-06-10T22:00:49.294Z","type":"message"}
{"nick":"tjfontaine","message":"so you can do a small script to work through the permutations","date":"2013-06-10T22:00:58.698Z","type":"message"}
{"nick":"trevnorris","message":"yeah. still haven't been able to figure that out.","date":"2013-06-10T22:01:25.752Z","type":"message"}
{"nick":"mikeal","date":"2013-06-10T22:02:24.284Z","type":"join"}
{"nick":"tjfontaine","message":"trevnorris: it feels like you just need to have the gc suitably primed with data and then let it exit","date":"2013-06-10T22:02:42.592Z","type":"message"}
{"nick":"trevnorris","message":"hm. true. ok, I'll give that a go.","date":"2013-06-10T22:02:58.879Z","type":"message"}
{"nick":"tjfontaine","message":"but it may be that it's the method optimization cache that needs to be primed","date":"2013-06-10T22:03:23.428Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: print $rax","date":"2013-06-10T22:07:19.500Z","type":"message"}
{"nick":"bnoordhuis","message":"\"mov 0xd(%rax),%cl\" means \"move the byte that's at position $rax+0xd into %cl\", the low 8 bits of %rcx","date":"2013-06-10T22:08:07.054Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: tried to trace that register through the entire method: https://gist.github.com/trevnorris/5752902","date":"2013-06-10T22:16:27.426Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: did you use disassemble/m? it prints source + disassembly","date":"2013-06-10T22:18:30.097Z","type":"message"}
{"nick":"trevnorris","message":"oh. spaced the /m. sec","date":"2013-06-10T22:18:51.230Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: sorry, couple clarifications. should I be running this on the build that fails, or on a debug build? and do I run disassemble/m on the frame that fails?","date":"2013-06-10T22:22:18.337Z","type":"message"}
{"nick":"trevnorris","message":"sorry again. once I get what i'm actually looking for won't need all the hand holding. :)","date":"2013-06-10T22:23:37.882Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: on both builds and like this: disassemble/m <name_of_function_that_fails>","date":"2013-06-10T22:25:13.520Z","type":"message"}
{"nick":"trevnorris","message":"cool. can do","date":"2013-06-10T22:25:21.869Z","type":"message"}
{"nick":"bnoordhuis","message":"then just put them side-by-side and check the differences","date":"2013-06-10T22:25:40.316Z","type":"message"}
{"nick":"c4milo","date":"2013-06-10T22:27:30.005Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: so there's one thing that sticks out that's removed before the failing instruction runs:","date":"2013-06-10T22:35:04.358Z","type":"message"}
{"nick":"trevnorris","message":"callq  0x848e20 <_ZNK2v88internal11MemoryChunk5ownerEv>","date":"2013-06-10T22:35:04.932Z","type":"message"}
{"nick":"trevnorris","message":"and the line that follows:","date":"2013-06-10T22:36:33.834Z","type":"message"}
{"nick":"trevnorris","message":"test   %rax,%rax","date":"2013-06-10T22:36:34.270Z","type":"message"}
{"nick":"bnoordhuis","message":"that's missing from the optimized build?","date":"2013-06-10T22:36:40.081Z","type":"message"}
{"nick":"trevnorris","message":"yeah","date":"2013-06-10T22:36:54.700Z","type":"message"}
{"nick":"trevnorris","message":"they're here: https://gist.github.com/trevnorris/5752992","date":"2013-06-10T22:37:05.340Z","type":"message"}
{"nick":"bnoordhuis","message":"the \"test %rax,%rax\" is a return_value==0 check btw","date":"2013-06-10T22:37:06.021Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok :)","date":"2013-06-10T22:37:13.467Z","type":"message"}
{"nick":"trevnorris","message":"in -O1.out line 21","date":"2013-06-10T22:37:54.841Z","type":"message"}
{"nick":"bnoordhuis","message":"apparently clang thinks chunk->owner() is never NULL","date":"2013-06-10T22:38:39.869Z","type":"message"}
{"nick":"kevinswiber","reason":"Remote host closed the connection","date":"2013-06-10T22:38:56.578Z","type":"quit"}
{"nick":"trevnorris","message":"so, how do you know it's checking NULL?","date":"2013-06-10T22:40:33.287Z","type":"message"}
{"nick":"bnoordhuis","message":"because that's what the \"test %rax,%rax\" corresponds with, right?","date":"2013-06-10T22:42:17.069Z","type":"message"}
{"nick":"trevnorris","action":"goes looking for his assembly instructions manual","date":"2013-06-10T22:42:49.288Z","type":"action"}
{"nick":"dominictarr","date":"2013-06-10T22:43:14.308Z","type":"join"}
{"nick":"kevinswiber","date":"2013-06-10T22:43:49.958Z","type":"join"}
{"nick":"bnoordhuis","message":"trevnorris: anyway, if that's what it's doing, then it's a clang bug","date":"2013-06-10T22:44:03.352Z","type":"message"}
{"nick":"bnoordhuis","message":"looking at your asm dump, it seems clang altogether optimizes away the call to chunk->owner() ","date":"2013-06-10T22:44:35.621Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: ah ok. so \"test %rax,rax\" followed by \"je ...\" means to jump past the instructions.","date":"2013-06-10T22:45:06.512Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: oh wait, maybe not","date":"2013-06-10T22:46:22.123Z","type":"message"}
{"nick":"EhevuTov_","date":"2013-06-10T22:46:23.298Z","type":"join"}
{"nick":"bnoordhuis","message":"   0x00000000008520af <+47>:    mov    0x40(%r14),%rax","date":"2013-06-10T22:46:30.099Z","type":"message"}
{"nick":"bnoordhuis","message":"   0x00000000008520b3 <+51>:    mov    %rax,%rcx","date":"2013-06-10T22:46:30.317Z","type":"message"}
{"nick":"bnoordhuis","message":"   0x00000000008520b6 <+54>:    and    $0x3,%rcx","date":"2013-06-10T22:46:30.317Z","type":"message"}
{"nick":"bnoordhuis","message":"   0x00000000008520ba <+58>:    cmp    $0x3,%rcx","date":"2013-06-10T22:46:31.641Z","type":"message"}
{"nick":"bnoordhuis","message":"that looks like an inlined version of chunk->owner()","date":"2013-06-10T22:46:42.065Z","type":"message"}
{"nick":"bnoordhuis","message":"so never mind what i said :)","date":"2013-06-10T22:47:25.001Z","type":"message"}
{"nick":"trevnorris","message":"ah ok. see it now.","date":"2013-06-10T22:47:37.537Z","type":"message"}
{"nick":"EhevuTov","reason":"Ping timeout: 256 seconds","date":"2013-06-10T22:49:39.217Z","type":"quit"}
{"nick":"kazupon","date":"2013-06-10T22:50:15.866Z","type":"join"}
{"nick":"trevnorris","message":"well, whatever. i'll keep poking at it. bnoordhuis your library of knowledge is better elsewhere. thanks for all the debugging tips. :)","date":"2013-06-10T22:50:31.221Z","type":"message"}
{"nick":"bnoordhuis","message":"no problem :)","date":"2013-06-10T22:52:09.515Z","type":"message"}
{"nick":"tjfontaine","message":"sigh. path.js should really let the user normalize for a specific platform","date":"2013-06-10T22:52:42.978Z","type":"message"}
{"nick":"kevinswiber","reason":"Remote host closed the connection","date":"2013-06-10T22:53:48.590Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-06-10T23:01:25.504Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-10T23:02:05.878Z","type":"nick"}
{"nick":"piscisaureus_","reason":"Ping timeout: 245 seconds","date":"2013-06-10T23:02:27.246Z","type":"quit"}
{"nick":"mikeal","date":"2013-06-10T23:04:06.671Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: so are you or is indutny working on the \"short circuit\" of stream_wrap converting data to a Buffer?","date":"2013-06-10T23:04:32.388Z","type":"message"}
{"nick":"pachet","reason":"Quit: leaving","date":"2013-06-10T23:05:03.080Z","type":"quit"}
{"nick":"tjfontaine","message":"trevnorris: we've both done a mechasim for it","date":"2013-06-10T23:05:45.981Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: coolio. I want to see!","date":"2013-06-10T23:05:56.587Z","type":"message"}
{"nick":"bnoordhuis","message":"signing off. have a good night, guys","date":"2013-06-10T23:06:29.998Z","type":"message"}
{"nick":"trevnorris","message":"night","date":"2013-06-10T23:06:34.000Z","type":"message"}
{"nick":"tjfontaine","message":"the start of what I did https://github.com/tjfontaine/node/commit/a7b88e691a4961611ca45013d0a67b5ce639d4e3","date":"2013-06-10T23:06:34.910Z","type":"message"}
{"nick":"tjfontaine","message":"https://github.com/indutny/node/commit/67be8ed1ae65563e5a5374d4bad51bc1e6917cfc looks like the start of indutny's","date":"2013-06-10T23:09:01.765Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: awesome. if my first set of buffer patches get in then i'll be able to move on removing the slab allocator.","date":"2013-06-10T23:09:38.887Z","type":"message"}
{"nick":"trevnorris","message":"already have those patches ready, waiting for the first ones to be reviewed.","date":"2013-06-10T23:09:50.197Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 256 seconds","date":"2013-06-10T23:11:12.598Z","type":"quit"}
{"nick":"tjfontaine","message":"trevnorris: so one of the side effects of this would be that you don't necessarily need to rip out the slab allocator entirely, you could just override Alloc/Shrink in your descendent class","date":"2013-06-10T23:11:33.125Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: well, the slab allocator removal is for performance and stability.","date":"2013-06-10T23:12:08.010Z","type":"message"}
{"nick":"trevnorris","message":"and to remove the memory leaks that users keep complaining about.","date":"2013-06-10T23:12:19.806Z","type":"message"}
{"nick":"tjfontaine","message":"\"leaks\"","date":"2013-06-10T23:12:26.005Z","type":"message"}
{"nick":"trevnorris","message":"the gotcha that devs hang onto a chunk of the request Buffer, which forces the entire slab to stick around.","date":"2013-06-10T23:13:05.532Z","type":"message"}
{"nick":"tjfontaine","message":"right which is why it's a \"leak\" and not a Leak","date":"2013-06-10T23:13:18.349Z","type":"message"}
{"nick":"trevnorris","message":"ah. got it. :)","date":"2013-06-10T23:13:27.386Z","type":"message"}
{"nick":"trevnorris","message":"but still. it super complicates understanding how stuff works.","date":"2013-06-10T23:13:52.329Z","type":"message"}
{"nick":"trevnorris","message":"and part of the reason for the Buffer changes to begin w/.","date":"2013-06-10T23:14:06.401Z","type":"message"}
{"nick":"tjfontaine","message":"but anyway, this sort of mechanism which is being used for tls_wrap might be able to be reused into an http_wrap","date":"2013-06-10T23:14:08.900Z","type":"message"}
{"nick":"trevnorris","message":"i like it.","date":"2013-06-10T23:14:24.400Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-06-10T23:14:30.897Z","type":"join"}
{"nick":"tjfontaine","message":"I'm still more in favor of a js http parser, but that won't happen before 1.0","date":"2013-06-10T23:14:52.234Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: shouldn't you declare \"virtual ~StreamWrap\" since you've declared other virtual methods?","date":"2013-06-10T23:16:02.327Z","type":"message"}
{"nick":"tjfontaine","message":"there's no real state associated with the base class is there?","date":"2013-06-10T23:17:47.436Z","type":"message"}
{"nick":"trevnorris","message":"i dunno. just repeating what i've read on SO. :)","date":"2013-06-10T23:18:03.378Z","type":"message"}
{"nick":"tjfontaine","message":"anyway mine shouldn't be used for much more than an idea, as fedors was more fleshed out","date":"2013-06-10T23:18:14.672Z","type":"message"}
{"nick":"tjfontaine","message":"there's not as much reuse as I'd like in his, but the concept is quite similar","date":"2013-06-10T23:18:29.611Z","type":"message"}
{"nick":"trevnorris","message":"fwiw, created a hook so you can pass around the js object, extract it and add a callback after the fact: https://github.com/trevnorris/node/commit/56e5bbf","date":"2013-06-10T23:19:52.876Z","type":"message"}
{"nick":"trevnorris","message":"super nasty right now, so please don't judge.","date":"2013-06-10T23:20:16.634Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-06-10T23:29:01.838Z","type":"quit"}
{"nick":"loladiro","date":"2013-06-10T23:30:27.073Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-06-10T23:33:03.413Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-06-10T23:39:12.892Z","type":"quit"}
{"nick":"EhevuTov__","date":"2013-06-10T23:47:13.726Z","type":"join"}
{"nick":"trevnorris","message":"ircretary: tell bnoordhuis fprintf'd &id_ usually has values like 0xfc8540, but just before seg fault has 0x10.","date":"2013-06-10T23:49:03.028Z","type":"message"}
{"nick":"ircretary","message":"trevnorris: I'll be sure to tell bnoordhuis","date":"2013-06-10T23:49:03.245Z","type":"message"}
{"nick":"EhevuTov_","reason":"Ping timeout: 246 seconds","date":"2013-06-10T23:50:04.907Z","type":"quit"}
{"nick":"trevnorris","message":"ircretary: tell bnoordhuis and printed \"this\", right before crashing this == (nil).","date":"2013-06-10T23:51:44.832Z","type":"message"}
{"nick":"ircretary","message":"trevnorris: I'll be sure to tell bnoordhuis","date":"2013-06-10T23:51:45.104Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-10T23:52:06.629Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: so seems the class is being destructed before that operation has a chance to run.","date":"2013-06-10T23:52:12.638Z","type":"message"}
{"nick":"EhevuTov__","reason":"Quit: This computer has gone to sleep","date":"2013-06-10T23:55:51.468Z","type":"quit"}
{"nick":"hz","date":"2013-06-10T23:58:12.086Z","type":"quit"}
