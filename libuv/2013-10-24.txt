{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-10-24T00:00:01.427Z","type":"quit"}
{"nick":"ircretary","date":"2013-10-24T00:00:10.428Z","type":"join"}
{"nick":"Petka","reason":"Quit: L�hd�ss�","date":"2013-10-24T00:05:00.057Z","type":"quit"}
{"nick":"trevnorris","message":"groundwater_: ok, the number of cases it getting to me. we don't fire uncaughtException if the Error was handled by an error callback, right?","date":"2013-10-24T00:05:49.506Z","type":"message"}
{"nick":"groundwater_","message":"yes, by returning 'true'","date":"2013-10-24T00:06:13.874Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok.","date":"2013-10-24T00:06:22.140Z","type":"message"}
{"nick":"groundwater_","message":"which i think is tested in test-asynclistener-error-multiple-handled.js","date":"2013-10-24T00:06:59.656Z","type":"message"}
{"nick":"jmar777","date":"2013-10-24T00:09:47.305Z","type":"join"}
{"nick":"c4milo_","date":"2013-10-24T00:11:47.074Z","type":"join"}
{"nick":"c4milo","reason":"Read error: Connection reset by peer","date":"2013-10-24T00:12:11.617Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-10-24T00:13:14.015Z","type":"quit"}
{"nick":"jmar777","date":"2013-10-24T00:13:51.363Z","type":"join"}
{"nick":"trevnorris","message":"ok guys. sorry. this is getting too complex. because in the case that one of the before's throws then i'd have to do something ridiculous like run it through the error callbacks, then also through the uncaughtExceptions, then finish executing the other before callbacks and do the same. then once they're all done executing allow the program to fail.","date":"2013-10-24T00:14:43.196Z","type":"message"}
{"nick":"trevnorris","message":"so, i'll allow uncaughtException to run _once_ for the _first_ listener/before/after callback that throws, then the application dies.","date":"2013-10-24T00:16:21.168Z","type":"message"}
{"nick":"trevnorris","message":"groundwater_, othiym23: ^","date":"2013-10-24T00:16:31.405Z","type":"message"}
{"nick":"othiym23","message":"sounds pretty good","date":"2013-10-24T00:17:49.263Z","type":"message"}
{"nick":"jmar777","reason":"Ping timeout: 252 seconds","date":"2013-10-24T00:18:00.119Z","type":"quit"}
{"nick":"trevnorris","message":"ok","date":"2013-10-24T00:18:01.226Z","type":"message"}
{"nick":"groundwater_","message":"and i think we should slap a big \"don't rely on error-in-error behavior\" badge to this","date":"2013-10-24T00:22:28.211Z","type":"message"}
{"nick":"groundwater_","message":"just in case we realize something needs to change","date":"2013-10-24T00:22:36.329Z","type":"message"}
{"nick":"trevnorris","message":"how do you mean?","date":"2013-10-24T00:22:52.269Z","type":"message"}
{"nick":"groundwater_","message":"when we document async-listeners","date":"2013-10-24T00:23:13.561Z","type":"message"}
{"nick":"groundwater_","message":"we should make it clear that you should not be throwing errors in the middle of your asynclistener ","date":"2013-10-24T00:23:42.288Z","type":"message"}
{"nick":"trevnorris","message":"throwning and error from and error callback is equivalent to Sub-zero ripping out your spinal cord.","date":"2013-10-24T00:23:47.543Z","type":"message"}
{"nick":"c4milo_","reason":"Remote host closed the connection","date":"2013-10-24T00:24:45.250Z","type":"quit"}
{"nick":"c4milo","date":"2013-10-24T00:25:21.980Z","type":"join"}
{"nick":"groundwater_","message":"i just had a flashback to '95","date":"2013-10-24T00:25:30.322Z","type":"message"}
{"nick":"trevnorris","message":":)","date":"2013-10-24T00:25:38.159Z","type":"message"}
{"nick":"othiym23","message":"I was pretty explicit about throwing from error handlers being a bad plan when I was teaching everybody domains","date":"2013-10-24T00:26:27.036Z","type":"message"}
{"nick":"groundwater_","message":"okay i'm gonna digest all this tonight, but it looks good","date":"2013-10-24T00:26:40.153Z","type":"message"}
{"nick":"groundwater_","message":"if any of the tests fail, please let me know","date":"2013-10-24T00:26:51.326Z","type":"message"}
{"nick":"c4milo","reason":"Ping timeout: 248 seconds","date":"2013-10-24T00:29:57.749Z","type":"quit"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-10-24T00:32:51.357Z","type":"quit"}
{"nick":"trevnorris","message":"will do","date":"2013-10-24T00:34:45.928Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-10-24T00:35:43.966Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-10-24T00:36:13.296Z","type":"join"}
{"nick":"octetcloud","reason":"Ping timeout: 264 seconds","date":"2013-10-24T00:38:02.832Z","type":"quit"}
{"nick":"Ralith","reason":"Ping timeout: 248 seconds","date":"2013-10-24T00:51:17.749Z","type":"quit"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-10-24T00:51:48.533Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-24T00:55:54.056Z","type":"quit"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2013-10-24T01:02:12.626Z","type":"quit"}
{"nick":"kazupon","date":"2013-10-24T01:04:11.297Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-10-24T01:04:52.546Z","type":"quit"}
{"nick":"dominictarr_","reason":"Quit: dominictarr_","date":"2013-10-24T01:05:26.051Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-10-24T01:07:03.636Z","type":"join"}
{"nick":"Ralith","date":"2013-10-24T01:14:40.188Z","type":"join"}
{"nick":"dshaw_","date":"2013-10-24T01:16:50.243Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-10-24T01:19:44.014Z","type":"quit"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2013-10-24T01:31:45.983Z","type":"quit"}
{"nick":"jmar777","date":"2013-10-24T01:36:34.446Z","type":"join"}
{"nick":"c4milo","date":"2013-10-24T01:43:13.295Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-10-24T01:45:37.043Z","type":"quit"}
{"nick":"abraxas","date":"2013-10-24T01:51:05.472Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-10-24T01:53:18.631Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-24T01:56:01.311Z","type":"quit"}
{"nick":"inolen","date":"2013-10-24T02:12:20.206Z","type":"join"}
{"nick":"inolen1","date":"2013-10-24T02:15:13.819Z","type":"join"}
{"nick":"inolen","reason":"Read error: Connection reset by peer","date":"2013-10-24T02:15:14.281Z","type":"quit"}
{"nick":"julianduque","reason":"Remote host closed the connection","date":"2013-10-24T02:28:17.540Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-10-24T02:34:25.866Z","type":"join"}
{"nick":"Benvie","date":"2013-10-24T02:35:21.255Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-10-24T02:47:13.861Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-10-24T03:06:28.178Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-10-24T03:06:57.956Z","type":"join"}
{"nick":"Domenic_","reason":"Ping timeout: 248 seconds","date":"2013-10-24T03:17:15.838Z","type":"quit"}
{"nick":"Domenic_","date":"2013-10-24T03:18:53.139Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-10-24T03:36:12.913Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-10-24T03:36:46.226Z","type":"join"}
{"nick":"dshaw_","date":"2013-10-24T03:41:53.275Z","type":"join"}
{"nick":"paulfryzel","reason":"Remote host closed the connection","date":"2013-10-24T03:43:10.757Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-10-24T03:50:59.034Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-10-24T03:51:37.981Z","type":"join"}
{"nick":"kazupon","date":"2013-10-24T04:08:27.516Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 245 seconds","date":"2013-10-24T04:15:36.322Z","type":"quit"}
{"nick":"c4milo","date":"2013-10-24T04:24:41.971Z","type":"join"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2013-10-24T04:49:41.067Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-24T04:51:14.255Z","type":"quit"}
{"nick":"c4milo","date":"2013-10-24T04:51:44.052Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 248 seconds","date":"2013-10-24T04:56:27.815Z","type":"quit"}
{"nick":"dshaw_","date":"2013-10-24T04:56:52.460Z","type":"join"}
{"nick":"dominictarr_","date":"2013-10-24T05:13:15.230Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2013-10-24T05:32:23.165Z","type":"quit"}
{"nick":"paddybyers","date":"2013-10-24T05:34:17.065Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-10-24T05:39:55.571Z","type":"quit"}
{"nick":"abraxas","date":"2013-10-24T05:43:07.205Z","type":"join"}
{"nick":"groundwater_","message":"trevnorris: ping","date":"2013-10-24T05:58:04.374Z","type":"message"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-10-24T06:04:12.655Z","type":"quit"}
{"nick":"c4milo","date":"2013-10-24T06:16:07.044Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 272 seconds","date":"2013-10-24T06:20:57.927Z","type":"quit"}
{"nick":"bajtos","date":"2013-10-24T06:25:51.677Z","type":"join"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-10-24T06:32:21.836Z","type":"quit"}
{"nick":"mikeal","date":"2013-10-24T06:41:06.366Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #279 \u00037UNSTABLE\u000f windows-ia32 (11/603) windows-x64 (10/603) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/279/","date":"2013-10-24T06:41:44.869Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-10-24T06:43:17.911Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-10-24T06:43:46.945Z","type":"join"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-10-24T06:45:41.692Z","type":"quit"}
{"nick":"rendar","date":"2013-10-24T06:47:11.251Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 248 seconds","date":"2013-10-24T06:48:27.787Z","type":"quit"}
{"nick":"groundwater_","message":"trevnorris: this is a longer-term idea, but what do you think of this for error handling https://gist.github.com/jacobgroundwater/2b4203a18926ff051064","date":"2013-10-24T06:51:01.328Z","type":"message"}
{"nick":"hz","date":"2013-10-24T07:01:02.721Z","type":"join"}
{"nick":"FROGGS","date":"2013-10-24T07:08:04.217Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-10-24T07:50:41.502Z","type":"join"}
{"nick":"piscisaureus_","reason":"Read error: Connection reset by peer","date":"2013-10-24T07:52:32.962Z","type":"quit"}
{"nick":"c4milo","date":"2013-10-24T08:04:18.757Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 265 seconds","date":"2013-10-24T08:09:08.982Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-10-24T08:23:34.871Z","type":"quit"}
{"nick":"indutny","message":"morning","date":"2013-10-24T08:30:32.276Z","type":"message"}
{"nick":"bnoordhuis","date":"2013-10-24T08:37:44.743Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-10-24T08:41:45.385Z","type":"quit"}
{"nick":"abraxas","date":"2013-10-24T08:42:48.235Z","type":"join"}
{"nick":"kazupon","date":"2013-10-24T09:06:06.997Z","type":"join"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2013-10-24T09:07:26.537Z","type":"quit"}
{"nick":"kazupon","date":"2013-10-24T09:07:45.287Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-10-24T09:19:11.320Z","type":"quit"}
{"nick":"kazupon","date":"2013-10-24T09:29:32.441Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: hi","date":"2013-10-24T09:30:03.590Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: how are you?","date":"2013-10-24T09:30:05.860Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: hey fedor. i'm fine. you?","date":"2013-10-24T09:35:00.913Z","type":"message"}
{"nick":"indutny","message":"good too","date":"2013-10-24T09:35:04.950Z","type":"message"}
{"nick":"bnoordhuis","message":"good","date":"2013-10-24T09:35:10.095Z","type":"message"}
{"nick":"indutny","message":"I think I've an idea on how to fix stale events problem","date":"2013-10-24T09:35:25.018Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: do you have a minute to discuss it?","date":"2013-10-24T09:35:35.892Z","type":"message"}
{"nick":"bnoordhuis","message":"sure","date":"2013-10-24T09:35:38.483Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I'm going to add clean-up code to uv__io_stop","date":"2013-10-24T09:35:50.048Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: it'll remove all stale events","date":"2013-10-24T09:36:02.690Z","type":"message"}
{"nick":"indutny","message":"but that will require storing some info in loop","date":"2013-10-24T09:36:28.145Z","type":"message"}
{"nick":"bnoordhuis","message":"what kind of cleanup code?","date":"2013-10-24T09:36:39.267Z","type":"message"}
{"nick":"indutny","message":"which complicates with ABI compatibility","date":"2013-10-24T09:36:39.622Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: well, code will walk through all epoll/kqueue/port events","date":"2013-10-24T09:36:54.459Z","type":"message"}
{"nick":"indutny","message":"and remove ones with the same fd","date":"2013-10-24T09:36:59.158Z","type":"message"}
{"nick":"indutny","message":"is it incorrect?","date":"2013-10-24T09:37:12.380Z","type":"message"}
{"nick":"bnoordhuis","message":"not sure i follow. how is uv__io_stop() going to walk the list of events?","date":"2013-10-24T09:37:31.868Z","type":"message"}
{"nick":"indutny","message":"well, it'll be stored in loop","date":"2013-10-24T09:37:40.243Z","type":"message"}
{"nick":"indutny","message":"the list","date":"2013-10-24T09:37:41.506Z","type":"message"}
{"nick":"bnoordhuis","message":"right","date":"2013-10-24T09:37:52.616Z","type":"message"}
{"nick":"indutny","message":"perhaps not _stop()","date":"2013-10-24T09:38:01.233Z","type":"message"}
{"nick":"indutny","message":"but rather uv__io_close","date":"2013-10-24T09:38:06.458Z","type":"message"}
{"nick":"bnoordhuis","message":"that's a better place for it","date":"2013-10-24T09:38:13.174Z","type":"message"}
{"nick":"indutny","message":"anyway, that's the only reasonable way to fight it","date":"2013-10-24T09:38:26.316Z","type":"message"}
{"nick":"indutny","message":"there're no information about it in other places","date":"2013-10-24T09:38:34.588Z","type":"message"}
{"nick":"indutny","message":"regarding ABI compatibility","date":"2013-10-24T09:39:04.050Z","type":"message"}
{"nick":"bnoordhuis","message":"yes?","date":"2013-10-24T09:39:29.450Z","type":"message"}
{"nick":"indutny","message":"it could be solved with hacks :P","date":"2013-10-24T09:39:34.985Z","type":"message"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-10-24T09:39:37.760Z","type":"quit"}
{"nick":"indutny","message":"like storing pointer to events in loop->watchers[loop->nfds]","date":"2013-10-24T09:40:01.305Z","type":"message"}
{"nick":"indutny","message":"and growing watchers to loop->nfds + 1 length","date":"2013-10-24T09:40:08.240Z","type":"message"}
{"nick":"abraxas","date":"2013-10-24T09:40:13.307Z","type":"join"}
{"nick":"bnoordhuis","message":"hrm, that's an option","date":"2013-10-24T09:40:24.442Z","type":"message"}
{"nick":"indutny","message":"yep","date":"2013-10-24T09:40:31.560Z","type":"message"}
{"nick":"indutny","message":"do you like the plan?","date":"2013-10-24T09:40:35.765Z","type":"message"}
{"nick":"bnoordhuis","message":"for v0.10? i guess it's workable. just remove that hack in master, will you? :)","date":"2013-10-24T09:40:55.304Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-10-24T09:41:13.270Z","type":"message"}
{"nick":"indutny","message":"ok, after landing to v0.10","date":"2013-10-24T09:41:18.868Z","type":"message"}
{"nick":"indutny","message":"starting doing it now then","date":"2013-10-24T09:41:39.412Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: mind reviewing yesterday's patch?","date":"2013-10-24T09:44:43.356Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't but not now","date":"2013-10-24T09:45:01.216Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-10-24T09:49:24.301Z","type":"message"}
{"nick":"indutny","message":"thanks","date":"2013-10-24T09:49:26.832Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: btw, another solution to stale event problem","date":"2013-10-24T09:49:34.610Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: would be to store events in watchers","date":"2013-10-24T09:49:40.592Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: and execute them after processing all received events","date":"2013-10-24T09:49:51.404Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: though, it could lead to starvation","date":"2013-10-24T09:50:14.246Z","type":"message"}
{"nick":"indutny","message":"ah, it can't","date":"2013-10-24T09:50:16.735Z","type":"message"}
{"nick":"indutny","message":"yeah, it might work","date":"2013-10-24T09:50:28.433Z","type":"message"}
{"nick":"indutny","message":"probably has higher performance cost, though","date":"2013-10-24T09:50:54.722Z","type":"message"}
{"nick":"indutny","message":"and memory","date":"2013-10-24T09:51:08.758Z","type":"message"}
{"nick":"c4milo","date":"2013-10-24T09:52:36.842Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: thoughts?","date":"2013-10-24T09:53:26.028Z","type":"message"}
{"nick":"Kakera","date":"2013-10-24T09:53:44.787Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: you mean don't dispatch directly from uv__backend_poll()?","date":"2013-10-24T09:56:13.165Z","type":"message"}
{"nick":"indutny","message":"sort of","date":"2013-10-24T09:56:26.435Z","type":"message"}
{"nick":"indutny","message":"actually, dispatch in it","date":"2013-10-24T09:56:31.583Z","type":"message"}
{"nick":"indutny","message":"but in separate loop","date":"2013-10-24T09:56:38.392Z","type":"message"}
{"nick":"bnoordhuis","message":"i have a patch to that effect somewhere","date":"2013-10-24T09:56:41.307Z","type":"message"}
{"nick":"bnoordhuis","message":"where uv__backend_poll() just polls for events and leaves it to uv_run() to actually dispatch them","date":"2013-10-24T09:57:02.523Z","type":"message"}
{"nick":"c4milo","reason":"Ping timeout: 245 seconds","date":"2013-10-24T09:57:16.187Z","type":"quit"}
{"nick":"bnoordhuis","message":"the idea behind it is to coalesce events on kqueue-based platforms","date":"2013-10-24T09:57:24.550Z","type":"message"}
{"nick":"indutny","message":"oh, that's nice","date":"2013-10-24T09:57:37.682Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: why kqueue?","date":"2013-10-24T09:57:42.770Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2013-10-24T09:57:47.040Z","type":"message"}
{"nick":"indutny","message":"its reporting separate read/write events?","date":"2013-10-24T09:57:51.737Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-10-24T09:57:53.857Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2013-10-24T09:57:54.070Z","type":"message"}
{"nick":"indutny","message":"yes, idea is good","date":"2013-10-24T09:58:01.119Z","type":"message"}
{"nick":"indutny","message":"and better than my approach","date":"2013-10-24T09:58:04.395Z","type":"message"}
{"nick":"bnoordhuis","message":"let me look up that commit","date":"2013-10-24T09:58:17.547Z","type":"message"}
{"nick":"bnoordhuis","message":"https://github.com/bnoordhuis/libuv/commit/bfa1b64","date":"2013-10-24T09:59:17.711Z","type":"message"}
{"nick":"bnoordhuis","message":"\"bnoordhuis authored 3 months ago\" - i should learn to finish things","date":"2013-10-24T09:59:35.752Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-10-24T10:00:10.526Z","type":"quit"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2013-10-24T10:00:39.791Z","type":"quit"}
{"nick":"indutny","message":"haha","date":"2013-10-24T10:03:08.507Z","type":"message"}
{"nick":"indutny","message":"not ABI compatible","date":"2013-10-24T10:03:17.398Z","type":"message"}
{"nick":"bnoordhuis","message":"no, it's purely for master","date":"2013-10-24T10:03:54.857Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ok","date":"2013-10-24T10:04:35.968Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: does it work?","date":"2013-10-24T10:04:45.730Z","type":"message"}
{"nick":"indutny","message":"seems to be generally looking good, but I may be unaware of some paths","date":"2013-10-24T10:05:01.525Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i only proof my code correct, i never test it","date":"2013-10-24T10:05:45.044Z","type":"message"}
{"nick":"bnoordhuis","message":"(of course it works)","date":"2013-10-24T10:05:48.643Z","type":"message"}
{"nick":"indutny","message":"why not landed then?","date":"2013-10-24T10:06:27.316Z","type":"message"}
{"nick":"bnoordhuis","message":"that commit is an upbeat to usable edge triggered i/o support","date":"2013-10-24T10:06:39.361Z","type":"message"}
{"nick":"bnoordhuis","message":"which i haven't finished yet","date":"2013-10-24T10:06:45.576Z","type":"message"}
{"nick":"indutny","message":"aah","date":"2013-10-24T10:06:46.698Z","type":"message"}
{"nick":"indutny","message":"well, better land it in parts","date":"2013-10-24T10:06:54.762Z","type":"message"}
{"nick":"indutny","message":";)","date":"2013-10-24T10:06:56.563Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, i guess i could land it now","date":"2013-10-24T10:07:05.285Z","type":"message"}
{"nick":"indutny","message":"I think we could try to use higher bits of events","date":"2013-10-24T10:07:15.386Z","type":"message"}
{"nick":"indutny","message":"or break it into two uint16","date":"2013-10-24T10:07:23.131Z","type":"message"}
{"nick":"indutny","message":"to keep it ABI compatible","date":"2013-10-24T10:07:32.598Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: what do you think?","date":"2013-10-24T10:07:43.380Z","type":"message"}
{"nick":"bnoordhuis","message":"that's making assumptions about the values of POLLIN/POLLOUT/etc.","date":"2013-10-24T10:08:05.972Z","type":"message"}
{"nick":"indutny","message":"well, we're in charge of them","date":"2013-10-24T10:08:19.927Z","type":"message"}
{"nick":"indutny","message":"ain't we?","date":"2013-10-24T10:08:22.255Z","type":"message"}
{"nick":"indutny","message":"UV__POLLIN","date":"2013-10-24T10:08:24.421Z","type":"message"}
{"nick":"indutny","message":"UV__POLLOUT","date":"2013-10-24T10:08:29.171Z","type":"message"}
{"nick":"bnoordhuis","message":"they're mapped to the platform values now","date":"2013-10-24T10:08:43.243Z","type":"message"}
{"nick":"indutny","message":"we can change it","date":"2013-10-24T10:08:51.358Z","type":"message"}
{"nick":"indutny","message":"with no performance cost","date":"2013-10-24T10:09:06.869Z","type":"message"}
{"nick":"indutny","message":"well, I agree that they way you did it - it is ok for master","date":"2013-10-24T10:09:16.109Z","type":"message"}
{"nick":"indutny","message":"not even ok","date":"2013-10-24T10:09:26.118Z","type":"message"}
{"nick":"indutny","message":"great","date":"2013-10-24T10:09:27.093Z","type":"message"}
{"nick":"bnoordhuis","message":"thanks :)","date":"2013-10-24T10:09:31.771Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-10-24T10:09:33.691Z","type":"message"}
{"nick":"indutny","message":"but for v0.10","date":"2013-10-24T10:09:36.746Z","type":"message"}
{"nick":"indutny","message":"it won't work out","date":"2013-10-24T10:09:41.169Z","type":"message"}
{"nick":"indutny","message":"as uv__io_t is part of many handles","date":"2013-10-24T10:09:48.312Z","type":"message"}
{"nick":"indutny","message":"and will definitely break some code","date":"2013-10-24T10:09:57.210Z","type":"message"}
{"nick":"bnoordhuis","message":"indeed","date":"2013-10-24T10:10:10.126Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess your trick of storing the list in loop->watchers[loop->nwatchers] is our best option","date":"2013-10-24T10:10:51.223Z","type":"message"}
{"nick":"bnoordhuis","message":"linear scans make me sad though :-/","date":"2013-10-24T10:11:02.908Z","type":"message"}
{"nick":"dshaw_","date":"2013-10-24T10:11:20.936Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: well, yeah","date":"2013-10-24T10:11:24.723Z","type":"message"}
{"nick":"indutny","message":"or","date":"2013-10-24T10:11:27.440Z","type":"message"}
{"nick":"indutny","message":"ah, yeah","date":"2013-10-24T10:11:32.388Z","type":"message"}
{"nick":"bnoordhuis","message":"i was thinking about adding a generation counter but that won't work without abi changes either","date":"2013-10-24T10:11:35.054Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-10-24T10:11:43.642Z","type":"message"}
{"nick":"indutny","message":"probably we can try to merge events?","date":"2013-10-24T10:11:49.351Z","type":"message"}
{"nick":"indutny","message":"in the array","date":"2013-10-24T10:12:00.353Z","type":"message"}
{"nick":"bnoordhuis","message":"you mean the kevent list or?","date":"2013-10-24T10:12:12.252Z","type":"message"}
{"nick":"indutny","message":"without taking up more storage","date":"2013-10-24T10:12:13.263Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-10-24T10:12:15.445Z","type":"message"}
{"nick":"indutny","message":"epoll/kevent/port list","date":"2013-10-24T10:12:19.136Z","type":"message"}
{"nick":"bnoordhuis","message":"epoll reports events just once for a fd","date":"2013-10-24T10:12:36.956Z","type":"message"}
{"nick":"indutny","message":"hrm","date":"2013-10-24T10:12:45.271Z","type":"message"}
{"nick":"bnoordhuis","message":"at least, i'm reasonably sure it does","date":"2013-10-24T10:12:50.680Z","type":"message"}
{"nick":"indutny","message":"aaaaaaaah","date":"2013-10-24T10:13:06.107Z","type":"message"}
{"nick":"indutny","message":"yeah, got i","date":"2013-10-24T10:13:08.460Z","type":"message"}
{"nick":"indutny","message":"that won't help :)","date":"2013-10-24T10:13:15.353Z","type":"message"}
{"nick":"indutny","message":"merging events","date":"2013-10-24T10:13:20.429Z","type":"message"}
{"nick":"indutny","message":"sorry","date":"2013-10-24T10:13:29.107Z","type":"message"}
{"nick":"indutny","message":"ok, I'll work out that bugfix","date":"2013-10-24T10:13:37.568Z","type":"message"}
{"nick":"bnoordhuis","message":"cool :)","date":"2013-10-24T10:13:41.743Z","type":"message"}
{"nick":"indutny","message":"with +1 watcher","date":"2013-10-24T10:13:43.018Z","type":"message"}
{"nick":"dshaw_","reason":"Ping timeout: 272 seconds","date":"2013-10-24T10:15:55.781Z","type":"quit"}
{"nick":"bnoordhuis","message":"FATAL ERROR: Heap::ReserveSpace Allocation failed - process out of memory <- trying to create 10k vm contexts...","date":"2013-10-24T10:17:53.594Z","type":"message"}
{"nick":"bnoordhuis","message":"takes almost a minute for it to hit that","date":"2013-10-24T10:18:22.882Z","type":"message"}
{"nick":"bnoordhuis","message":"with v0.10, the test not only passes but it passes in under five seconds","date":"2013-10-24T10:18:46.642Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't know about vm2... it's not all roses","date":"2013-10-24T10:19:15.091Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-10-24T10:19:17.450Z","type":"message"}
{"nick":"indutny","message":"wait","date":"2013-10-24T10:19:27.605Z","type":"message"}
{"nick":"indutny","message":"I believe we fixed it?","date":"2013-10-24T10:19:32.409Z","type":"message"}
{"nick":"bnoordhuis","message":"it's happening with today's master","date":"2013-10-24T10:19:43.272Z","type":"message"}
{"nick":"indutny","message":"creating 10k contexts....","date":"2013-10-24T10:19:44.120Z","type":"message"}
{"nick":"indutny","message":"god, not again","date":"2013-10-24T10:19:47.503Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll open an issue :)","date":"2013-10-24T10:19:53.341Z","type":"message"}
{"nick":"indutny","message":"that'll be Inbox 13 for me","date":"2013-10-24T10:20:14.849Z","type":"message"}
{"nick":"indutny","message":":P","date":"2013-10-24T10:20:15.446Z","type":"message"}
{"nick":"indutny","message":"in fact I don't have much interest in it","date":"2013-10-24T10:20:33.647Z","type":"message"}
{"nick":"indutny","message":"but I'll fix it anyway","date":"2013-10-24T10:20:36.922Z","type":"message"}
{"nick":"indutny","message":"just because I understand this code and see that other people want it to be there","date":"2013-10-24T10:20:47.481Z","type":"message"}
{"nick":"hz","date":"2013-10-24T10:25:28.035Z","type":"quit"}
{"nick":"bnoordhuis","message":"i have a fix that makes v8 more likely to clean up the full context","date":"2013-10-24T10:26:54.035Z","type":"message"}
{"nick":"bnoordhuis","message":"but it doesn't help with this particular test :-/","date":"2013-10-24T10:27:04.348Z","type":"message"}
{"nick":"bnoordhuis","message":"https://gist.github.com/bnoordhuis/8530cceca335b7a0469c <- that","date":"2013-10-24T10:28:05.631Z","type":"message"}
{"nick":"dshaw_","date":"2013-10-24T10:31:44.959Z","type":"join"}
{"nick":"mraleph1","date":"2013-10-24T10:35:02.826Z","type":"join"}
{"nick":"mraleph","reason":"Read error: Connection reset by peer","date":"2013-10-24T10:35:03.039Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 248 seconds","date":"2013-10-24T10:36:11.757Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #1553 \u00034FAILURE\u000f http://jenkins.nodejs.org/job/nodejs-v0.10/1553/","date":"2013-10-24T10:43:06.152Z","type":"message"}
{"nick":"dshaw_","reason":"Ping timeout: 248 seconds","date":"2013-10-24T10:56:37.790Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-10-24T11:07:38.071Z","type":"join"}
{"nick":"c4milo","date":"2013-10-24T11:40:47.028Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 264 seconds","date":"2013-10-24T11:45:50.811Z","type":"quit"}
{"nick":"dshaw_","date":"2013-10-24T11:51:39.544Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-10-24T11:55:47.928Z","type":"quit"}
{"nick":"dshaw_","reason":"Ping timeout: 256 seconds","date":"2013-10-24T11:56:32.263Z","type":"quit"}
{"nick":"abraxas","date":"2013-10-24T11:57:04.773Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 268 seconds","date":"2013-10-24T12:02:04.120Z","type":"quit"}
{"nick":"Kakera","reason":"Read error: Connection reset by peer","date":"2013-10-24T12:37:29.827Z","type":"quit"}
{"nick":"Kakera","date":"2013-10-24T12:38:08.880Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-10-24T12:40:29.952Z","type":"join"}
{"nick":"dshaw_","date":"2013-10-24T12:49:01.566Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 246 seconds","date":"2013-10-24T12:49:40.995Z","type":"quit"}
{"nick":"dshaw_","reason":"Ping timeout: 246 seconds","date":"2013-10-24T12:53:10.884Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-10-24T12:54:08.774Z","type":"quit"}
{"nick":"dominictarr_","reason":"Quit: dominictarr_","date":"2013-10-24T13:23:39.611Z","type":"quit"}
{"nick":"dominictarr","date":"2013-10-24T13:24:14.777Z","type":"join"}
{"nick":"c4milo","date":"2013-10-24T13:28:59.662Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 240 seconds","date":"2013-10-24T13:33:29.008Z","type":"quit"}
{"nick":"pachet","date":"2013-10-24T13:56:36.335Z","type":"join"}
{"nick":"pachet","reason":"Changing host","date":"2013-10-24T13:56:37.456Z","type":"quit"}
{"nick":"pachet","date":"2013-10-24T13:56:37.674Z","type":"join"}
{"nick":"c4milo","date":"2013-10-24T14:01:44.562Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-10-24T14:03:41.864Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Zarko Stankovic\u000f \u00037v0.10\u000f * \u0002eb291de\u0002 : doc: add nodejs.rs to the community page - http://git.io/0aKbDw","date":"2013-10-24T14:18:41.759Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #1554 \u00034FAILURE\u000f http://jenkins.nodejs.org/job/nodejs-v0.10/1554/","date":"2013-10-24T14:23:52.815Z","type":"message"}
{"nick":"bnoordhuis","message":"make: *** No rule to make target `test/gc/node_modules/weak/build/'.  Stop. <- wut?","date":"2013-10-24T14:29:21.175Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #280 \u00037UNSTABLE\u000f windows-ia32 (12/603) windows-x64 (10/603) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/280/","date":"2013-10-24T14:33:27.990Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037v0.10\u000f * \u0002808a968\u0002 : build: fix test-gc weakref build rule - http://git.io/p9VzYg","date":"2013-10-24T14:33:39.023Z","type":"message"}
{"nick":"bnoordhuis","message":"ircretary: tell piscisaureus https://github.com/joyent/libuv/pull/969 <- you should PTAL (Probably Take A Look)","date":"2013-10-24T14:38:14.309Z","type":"message"}
{"nick":"ircretary","message":"bnoordhuis: I'll be sure to tell piscisaureus","date":"2013-10-24T14:38:14.521Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #1555 \u00034FAILURE\u000f http://jenkins.nodejs.org/job/nodejs-v0.10/1555/","date":"2013-10-24T14:38:47.100Z","type":"message"}
{"nick":"bnoordhuis","message":"hrm, i guess it's up to tjfontaine to fix that","date":"2013-10-24T14:41:12.279Z","type":"message"}
{"nick":"bnoordhuis","message":"i reckon it's the jenkins script that's executing that makefile rule","date":"2013-10-24T14:41:41.753Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #281 \u00037UNSTABLE\u000f windows-ia32 (11/603) windows-x64 (11/603) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/281/","date":"2013-10-24T14:48:35.293Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-24T14:50:05.130Z","type":"quit"}
{"nick":"c4milo","date":"2013-10-24T14:50:40.375Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 245 seconds","date":"2013-10-24T14:54:46.181Z","type":"quit"}
{"nick":"abraxas","date":"2013-10-24T14:54:48.807Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 252 seconds","date":"2013-10-24T14:59:39.184Z","type":"quit"}
{"nick":"paulfryzel","date":"2013-10-24T15:01:26.340Z","type":"join"}
{"nick":"superjoe","date":"2013-10-24T15:11:28.381Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #639 \u00037UNSTABLE\u000f osx-x64 (1/649) smartos-ia32 (6/649) smartos-x64 (8/649) osx-ia32 (1/649) http://jenkins.nodejs.org/job/nodejs-master/639/","date":"2013-10-24T15:19:57.823Z","type":"message"}
{"nick":"AvianFlu","date":"2013-10-24T15:29:39.836Z","type":"join"}
{"nick":"FROGGS","reason":"Quit: Verlassend","date":"2013-10-24T15:30:38.031Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: is #968 still the PR you want me to review for that stale event thing?","date":"2013-10-24T15:32:46.116Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033maksqwe\u000f \u00037master\u000f * \u0002d964b53\u0002 : windows: incorrect check for SOCKET_ERROR (+2 more commits) - http://git.io/nKX2Hg","date":"2013-10-24T15:44:02.338Z","type":"message"}
{"nick":"bnoordhuis","message":"ai","date":"2013-10-24T15:45:00.546Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Maks Naumov\u000f \u00037master\u000f * \u0002d170c91\u0002 : windows: incorrect check for SOCKET_ERROR (+2 more commits) - http://git.io/ZvU34Q","date":"2013-10-24T15:46:36.398Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master\u0002: #301 \u00037UNSTABLE\u000f windows (3/196) smartos (2/195) http://jenkins.nodejs.org/job/libuv-master/301/","date":"2013-10-24T15:47:48.433Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #242 \u00034FAILURE\u000f windows-x64 (3/196) windows-ia32 (3/196) http://jenkins.nodejs.org/job/libuv-master-gyp/242/","date":"2013-10-24T15:49:38.452Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-node-integration\u0002: #286 \u00034FAILURE\u000f http://jenkins.nodejs.org/job/libuv-node-integration/286/","date":"2013-10-24T15:50:19.465Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master\u0002: #302 \u00037UNSTABLE\u000f osx (1/196) windows (3/196) smartos (2/195) http://jenkins.nodejs.org/job/libuv-master/302/","date":"2013-10-24T15:51:24.481Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #243 \u00034FAILURE\u000f windows-x64 (3/196) linux-ia32 (1/195) windows-ia32 (3/196) http://jenkins.nodejs.org/job/libuv-master-gyp/243/","date":"2013-10-24T15:54:50.543Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-10-24T15:55:26.849Z","type":"quit"}
{"nick":"inolen1","reason":"Quit: Leaving.","date":"2013-10-24T15:55:42.703Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-node-integration\u0002: #287 \u00034FAILURE\u000f http://jenkins.nodejs.org/job/libuv-node-integration/287/","date":"2013-10-24T15:58:38.618Z","type":"message"}
{"nick":"jmar777","date":"2013-10-24T16:11:20.148Z","type":"join"}
{"nick":"dshaw_","date":"2013-10-24T16:13:28.037Z","type":"join"}
{"nick":"bajtos","date":"2013-10-24T16:15:28.458Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-10-24T16:17:26.830Z","type":"quit"}
{"nick":"jmar777","date":"2013-10-24T16:18:02.031Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-24T16:18:59.551Z","type":"quit"}
{"nick":"jmar777","reason":"Ping timeout: 272 seconds","date":"2013-10-24T16:22:37.838Z","type":"quit"}
{"nick":"Ralith","reason":"Read error: Connection reset by peer","date":"2013-10-24T16:25:02.444Z","type":"quit"}
{"nick":"FROGGS","date":"2013-10-24T16:28:45.995Z","type":"join"}
{"nick":"sblom","date":"2013-10-24T16:30:15.261Z","type":"join"}
{"nick":"sblom","message":"tjfontaine: I just saw your twitter batlight.","date":"2013-10-24T16:30:25.358Z","type":"message"}
{"nick":"sblom","message":"(I'm slow.)","date":"2013-10-24T16:30:31.524Z","type":"message"}
{"nick":"sblom","message":"(Sorry.)","date":"2013-10-24T16:30:34.221Z","type":"message"}
{"nick":"sblom","message":"Happy to help.","date":"2013-10-24T16:30:36.349Z","type":"message"}
{"nick":"sblom","message":"And free all day.","date":"2013-10-24T16:30:39.028Z","type":"message"}
{"nick":"sblom","action":"starts looking through the logs to get caught up in the meanwhile.","date":"2013-10-24T16:32:03.770Z","type":"action"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-24T16:32:39.309Z","type":"nick"}
{"nick":"tjfontaine","message":"sblom: try and build master please and thank you :)","date":"2013-10-24T16:33:03.216Z","type":"message"}
{"nick":"sblom","message":"roger","date":"2013-10-24T16:33:19.471Z","type":"message"}
{"nick":"tjfontaine","message":"sblom: there's something we're doing with persistents in object wrap and env-inl that's making msvc very cranky","date":"2013-10-24T16:33:49.838Z","type":"message"}
{"nick":"isaacs","message":"anyone interested in merging v0.10 into master?","date":"2013-10-24T16:35:27.811Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037v0.10\u000f * \u0002f6f176e\u0002 : npm@1.3.12 - http://git.io/hDefLw","date":"2013-10-24T16:35:53.400Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: I am already doing it","date":"2013-10-24T16:36:06.337Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: you rock, sir","date":"2013-10-24T16:36:18.849Z","type":"message"}
{"nick":"tjfontaine","message":"I started last night, have one failure that I introduced in the merge that I need to track down","date":"2013-10-24T16:36:24.759Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: make sure to get the new npms i just landed (sorry, probably bad timing)","date":"2013-10-24T16:36:39.449Z","type":"message"}
{"nick":"tjfontaine","message":"it's fine, I'm probably going to re-start the merge anyway","date":"2013-10-24T16:36:50.915Z","type":"message"}
{"nick":"tjfontaine","message":"also -- merges are easier if our changes come with test cases :/","date":"2013-10-24T16:37:12.127Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #1556 \u00034FAILURE\u000f http://jenkins.nodejs.org/job/nodejs-v0.10/1556/","date":"2013-10-24T16:41:08.482Z","type":"message"}
{"nick":"tjfontaine","message":"argh","date":"2013-10-24T16:42:45.261Z","type":"message"}
{"nick":"bnoordhuis","date":"2013-10-24T16:45:15.795Z","type":"join"}
{"nick":"amartens","date":"2013-10-24T16:45:34.781Z","type":"join"}
{"nick":"tjfontaine","message":"ugh. Ben Noordhuis v0.10 * 808a968 : build: fix test-gc weakref build rule","date":"2013-10-24T16:46:00.124Z","type":"message"}
{"nick":"tjfontaine","message":"well my detection for that in the build scripts was relying ont he v8 upgrade","date":"2013-10-24T16:46:15.391Z","type":"message"}
{"nick":"mikeal","date":"2013-10-24T16:46:25.159Z","type":"join"}
{"nick":"tjfontaine","message":"so I guess I will need to figure out a different way to differentiate when a build may have the old version vs the new","date":"2013-10-24T16:46:41.146Z","type":"message"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-10-24T16:46:57.619Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #282 \u00037UNSTABLE\u000f windows-ia32 (10/603) windows-x64 (11/603) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/282/","date":"2013-10-24T16:51:05.678Z","type":"message"}
{"nick":"abraxas","date":"2013-10-24T16:56:10.504Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 265 seconds","date":"2013-10-24T16:56:57.577Z","type":"quit"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2013-10-24T16:58:01.802Z","type":"quit"}
{"nick":"abraxas","reason":"Ping timeout: 246 seconds","date":"2013-10-24T17:00:37.940Z","type":"quit"}
{"nick":"brson","date":"2013-10-24T17:00:44.867Z","type":"join"}
{"nick":"dshaw_","date":"2013-10-24T17:02:42.419Z","type":"join"}
{"nick":"dshaw_","reason":"Client Quit","date":"2013-10-24T17:04:58.858Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-10-24T17:07:58.990Z","type":"join"}
{"nick":"bajtos","date":"2013-10-24T17:10:04.374Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #1557 \u00037UNSTABLE\u000f smartos-x64 (6/603) smartos-ia32 (4/603) osx-ia32 (1/603) http://jenkins.nodejs.org/job/nodejs-v0.10/1557/","date":"2013-10-24T17:10:38.048Z","type":"message"}
{"nick":"julianduque","date":"2013-10-24T17:15:12.728Z","type":"join"}
{"nick":"trevnorris","message":"morning","date":"2013-10-24T17:22:10.744Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-24T17:30:15.800Z","type":"quit"}
{"nick":"mcavage","reason":"Remote host closed the connection","date":"2013-10-24T17:36:34.678Z","type":"quit"}
{"nick":"mcavage","date":"2013-10-24T17:37:01.122Z","type":"join"}
{"nick":"trevnorris","message":"groundwater_: ping","date":"2013-10-24T17:39:55.065Z","type":"message"}
{"nick":"mcavage","reason":"Ping timeout: 260 seconds","date":"2013-10-24T17:41:47.987Z","type":"quit"}
{"nick":"mcavage","date":"2013-10-24T17:43:10.140Z","type":"join"}
{"nick":"dshaw_","date":"2013-10-24T17:43:25.409Z","type":"join"}
{"nick":"trevnorris","message":"i'm really getting tired of figuring out this stupid error handling in my error handlers.","date":"2013-10-24T17:50:23.535Z","type":"message"}
{"nick":"trevnorris","message":"if your code is so bad that your error handlers are throwing then there's something seriously fucked up with your code","date":"2013-10-24T17:50:39.486Z","type":"message"}
{"nick":"mcavage","reason":"Remote host closed the connection","date":"2013-10-24T17:52:41.101Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-master\u0002: #303 \u00037UNSTABLE\u000f windows (4/196) smartos (2/195) http://jenkins.nodejs.org/job/libuv-master/303/","date":"2013-10-24T17:53:13.944Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: ping","date":"2013-10-24T17:53:45.166Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-10-24T17:54:05.169Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: <3","date":"2013-10-24T17:54:07.663Z","type":"message"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-10-24T17:59:17.682Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-node-integration\u0002: #288 \u00034FAILURE\u000f http://jenkins.nodejs.org/job/libuv-node-integration/288/","date":"2013-10-24T18:00:35.133Z","type":"message"}
{"nick":"sblom","reason":"Ping timeout: 245 seconds","date":"2013-10-24T18:03:06.248Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-10-24T18:06:09.290Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-10-24T18:07:44.212Z","type":"join"}
{"nick":"sblom","date":"2013-10-24T18:09:06.257Z","type":"join"}
{"nick":"c4milo","date":"2013-10-24T18:09:33.291Z","type":"join"}
{"nick":"jmar777","date":"2013-10-24T18:13:15.200Z","type":"join"}
{"nick":"sblom","message":"tjfontaine: I found a wire to clip that makes it compile. Unfortunately, it's in v8.h.","date":"2013-10-24T18:15:08.305Z","type":"message"}
{"nick":"sblom","message":"Doing some blame-spelunking to figure out what changed to break this.","date":"2013-10-24T18:15:18.937Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2013-10-24T18:27:02.832Z","type":"message"}
{"nick":"julianduque","reason":"Ping timeout: 240 seconds","date":"2013-10-24T18:34:18.112Z","type":"quit"}
{"nick":"julianduque","date":"2013-10-24T18:37:19.503Z","type":"join"}
{"nick":"sblom","message":"Starting to look like the notion of non-copyable `Persistent`s has been introduced in v8 recently, and that's the default behavior. I think we must be copying Persistents.","date":"2013-10-24T18:39:15.869Z","type":"message"}
{"nick":"sblom","message":"I don't know why only VC++ is refusing to compile this. I have a set of changes to some of our own code that fixes the compile failures now, at least. Now I need to understand what's going on.","date":"2013-10-24T18:39:20.635Z","type":"message"}
{"nick":"sblom","message":"(My fix depends on updating v8 to at least 16891, also. That's when they introduced `CopyablePersistentTrait`s, which is key to my fix.)","date":"2013-10-24T18:40:17.618Z","type":"message"}
{"nick":"tjfontaine","message":"sblom: thanks so much for looking into this","date":"2013-10-24T18:40:19.142Z","type":"message"}
{"nick":"sblom","message":"No problem. We're not out of the woods yet. :)","date":"2013-10-24T18:40:28.072Z","type":"message"}
{"nick":"tjfontaine","message":":)","date":"2013-10-24T18:40:35.691Z","type":"message"}
{"nick":"sblom","message":"I'll grab my C++-ringer neighbor to make sure I've got this template crap deciphered correctly. :)","date":"2013-10-24T18:40:47.613Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-10-24T18:40:57.589Z","type":"message"}
{"nick":"Domenic_","message":"wat messages.js","date":"2013-10-24T18:41:28.991Z","type":"message"}
{"nick":"tjfontaine","message":"inorite?","date":"2013-10-24T18:41:33.529Z","type":"message"}
{"nick":"tjfontaine","message":"honestly though ... who's making 10k contexts in a single process ... :)","date":"2013-10-24T18:42:51.938Z","type":"message"}
{"nick":"trevnorris","message":"who wants the ability to catch errors being thrown from their error handlers?","date":"2013-10-24T18:46:30.037Z","type":"message"}
{"nick":"trevnorris","message":"there's a lot of crazy crap people want.","date":"2013-10-24T18:46:46.972Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-master-windows\u0002: #432 \u00034FAILURE\u000f http://jenkins.nodejs.org/job/nodejs-master-windows/432/","date":"2013-10-24T18:46:52.116Z","type":"message"}
{"nick":"mikeal","date":"2013-10-24T18:52:11.921Z","type":"join"}
{"nick":"sblom","message":"Who knows much about the lifecycle of ownership of `v8::Persistent`s?","date":"2013-10-24T18:52:42.178Z","type":"message"}
{"nick":"sblom","message":"It looks like my fix hasn't broken the hell out of unit tests or anything, but for all I know I'm now leaking Persistents all over the place.","date":"2013-10-24T18:53:20.267Z","type":"message"}
{"nick":"trevnorris","message":"sblom: have a diff?","date":"2013-10-24T18:54:03.839Z","type":"message"}
{"nick":"sblom","message":"Posting that now.","date":"2013-10-24T18:54:09.542Z","type":"message"}
{"nick":"sblom","message":"trevnorris: https://github.com/MSOpenTech/node/commit/af12cebcbdc39878e05510128b3fc6c923588de2","date":"2013-10-24T19:00:06.048Z","type":"message"}
{"nick":"sblom","message":"I _think_ this change exactly preserves our previous behavior.","date":"2013-10-24T19:00:39.514Z","type":"message"}
{"nick":"sblom","message":"My read of v8's changes is that they're trying to make it hard to accidentally copy persistents, but it looks to me like we're signed up to deal with the consequences.","date":"2013-10-24T19:01:10.606Z","type":"message"}
{"nick":"sblom","message":"And just to help you decipher what this is doing, v8::CopyablePersistentTraits<> doesn't actually have any runtime behavior, just compile time template fu.","date":"2013-10-24T19:02:17.616Z","type":"message"}
{"nick":"trevnorris","message":"sblom: i'm not all that up w/ c++, but don't you need a space between the last >>; in node_object_wrap, at the top?","date":"2013-10-24T19:02:47.842Z","type":"message"}
{"nick":"sblom","message":"v8::NonCopyablePersistentTraits<> is the default second parameter to v8::Persistent<>, and disables copying at compile time.","date":"2013-10-24T19:02:50.873Z","type":"message"}
{"nick":"sblom","message":"trevnorris: good catch--you do in some compilers.","date":"2013-10-24T19:03:10.347Z","type":"message"}
{"nick":"sblom","message":"Not in C++11, tho.","date":"2013-10-24T19:03:17.291Z","type":"message"}
{"nick":"trevnorris","message":"i.e. clang :)","date":"2013-10-24T19:03:20.035Z","type":"message"}
{"nick":"sblom","message":"Fair enough.","date":"2013-10-24T19:03:25.050Z","type":"message"}
{"nick":"trevnorris","message":"sblom: so, i'm jumping into the middle of this. what's the issue?","date":"2013-10-24T19:03:57.831Z","type":"message"}
{"nick":"sblom","message":"Main issue was that MSVC won't compile node#master after we updated deps/v8.","date":"2013-10-24T19:04:38.111Z","type":"message"}
{"nick":"sblom","message":"Now it will.","date":"2013-10-24T19:04:41.606Z","type":"message"}
{"nick":"sblom","message":"And I _think_ I haven't changed node's behavior at all.","date":"2013-10-24T19:04:53.677Z","type":"message"}
{"nick":"trevnorris","message":"just curious, can MSVC compile v8 itself?","date":"2013-10-24T19:05:01.531Z","type":"message"}
{"nick":"sblom","message":"Yes.","date":"2013-10-24T19:05:08.719Z","type":"message"}
{"nick":"sblom","message":"All of the compile failures are happening in places where we include node_object_wrap.h","date":"2013-10-24T19:05:23.263Z","type":"message"}
{"nick":"trevnorris","message":"well, imho if we need to float a patch to deps/v8 then our code is wrong.","date":"2013-10-24T19:05:29.084Z","type":"message"}
{"nick":"tjfontaine","message":"or env-inl.h","date":"2013-10-24T19:05:31.978Z","type":"message"}
{"nick":"tjfontaine","message":"?","date":"2013-10-24T19:05:32.824Z","type":"message"}
{"nick":"sblom","message":"We don't have to patch v8.","date":"2013-10-24T19:05:40.380Z","type":"message"}
{"nick":"trevnorris","message":"um... we shouldn't be including object_wrap anywhere","date":"2013-10-24T19:05:42.504Z","type":"message"}
{"nick":"sblom","message":"I copied/pasted that struct from latest v8 trunk.","date":"2013-10-24T19:05:58.630Z","type":"message"}
{"nick":"sblom","message":"So if we update v8, we're good.","date":"2013-10-24T19:06:03.362Z","type":"message"}
{"nick":"tjfontaine","message":"we need to message that to v8, I think","date":"2013-10-24T19:06:13.583Z","type":"message"}
{"nick":"trevnorris","message":"yeah. latest trunk is 3.22, this was a 3.21 upgrade","date":"2013-10-24T19:06:28.894Z","type":"message"}
{"nick":"sblom","message":"Or to be more specific, if we update v8, we have struct CopyablePersistentTraits, which we need to re-enable copying of Persistents.","date":"2013-10-24T19:06:57.795Z","type":"message"}
{"nick":"tjfontaine","message":"right ok so we'll need to figure out what the fuck we're doing :)","date":"2013-10-24T19:07:37.645Z","type":"message"}
{"nick":"trevnorris","message":"sblom: so. is this not happening w/ weak-object-inl.h?","date":"2013-10-24T19:08:13.482Z","type":"message"}
{"nick":"sblom","message":"trevnorris: node_object_wrap.h is included in node.h itself.","date":"2013-10-24T19:08:14.837Z","type":"message"}
{"nick":"trevnorris","message":"oy. tjfontaine do we do that so users get access to ObjectWrap just by including node.h, or should they need to include node_object_wrap?","date":"2013-10-24T19:08:58.439Z","type":"message"}
{"nick":"trevnorris","message":"sblom: because ObjectWrap is no longer being used by core. so if the later is the case then it can just be removed from node.h","date":"2013-10-24T19:09:52.796Z","type":"message"}
{"nick":"sblom","message":"also removed from node_contextify, node_crypto, and node_stat_watcher?","date":"2013-10-24T19:10:26.142Z","type":"message"}
{"nick":"trevnorris","message":"yeah. ObjectWrap is now no longer used by core","date":"2013-10-24T19:10:47.575Z","type":"message"}
{"nick":"sblom","message":"okay.","date":"2013-10-24T19:10:58.560Z","type":"message"}
{"nick":"trevnorris","message":"we switched it over to WeakObject class a little while ago.","date":"2013-10-24T19:11:02.098Z","type":"message"}
{"nick":"sblom","message":"trevnorris: now I understand your previous question. This does _not_ seem to happen in weak-object-inl.h.","date":"2013-10-24T19:11:49.558Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok. then there's something strange, because that code you changed is the exact same in weak-object-inl.h","date":"2013-10-24T19:12:18.087Z","type":"message"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2013-10-24T19:12:19.684Z","type":"quit"}
{"nick":"trevnorris","message":"so first we should remove the node_object_wrap.h includes from anywhere in core","date":"2013-10-24T19:12:37.745Z","type":"message"}
{"nick":"sblom","message":"I'll double-check that it's participating in this build.","date":"2013-10-24T19:12:41.465Z","type":"message"}
{"nick":"sblom","message":"Yeah--I'll try that change now.","date":"2013-10-24T19:12:45.866Z","type":"message"}
{"nick":"sblom","message":"trevnorris: The offending code doesn't exist in weak-object-inl.h","date":"2013-10-24T19:15:24.597Z","type":"message"}
{"nick":"sblom","message":"It's mostly dealing with Locals, not Persistents.","date":"2013-10-24T19:15:35.404Z","type":"message"}
{"nick":"sblom","message":"There's only one mention of Persistent, but it's the one that I didn't have to patch in ObjectWrap.","date":"2013-10-24T19:16:01.222Z","type":"message"}
{"nick":"trevnorris","message":"oh wait. man. been spending too much time in my 6011 patch. it's all the same to me now.","date":"2013-10-24T19:16:31.459Z","type":"message"}
{"nick":"trevnorris","message":"well, that persistent() syntax is pretty much all over core","date":"2013-10-24T19:16:42.402Z","type":"message"}
{"nick":"sblom","message":"Heh--no sweat.","date":"2013-10-24T19:16:48.708Z","type":"message"}
{"nick":"sblom","message":"So very high chance that simply deleting node_object_wrap.h refs will fix this. Build is nearly done to prove that.","date":"2013-10-24T19:17:03.534Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-10-24T19:23:16.384Z","type":"quit"}
{"nick":"jmar777","date":"2013-10-24T19:23:52.505Z","type":"join"}
{"nick":"dap_","date":"2013-10-24T19:27:08.404Z","type":"join"}
{"nick":"trevnorris","message":"sblom: so for node_object_wrap, there're only two differences between that and other uses of the same code. first is NODE_EXTERN, the second is that node_object_wrap isn't in node.gyp","date":"2013-10-24T19:27:29.314Z","type":"message"}
{"nick":"jmar777_","date":"2013-10-24T19:28:04.674Z","type":"join"}
{"nick":"jmar777","reason":"Ping timeout: 256 seconds","date":"2013-10-24T19:28:10.260Z","type":"quit"}
{"nick":"dshaw_","date":"2013-10-24T19:28:32.474Z","type":"join"}
{"nick":"trevnorris","message":"i'm sure ben would have some sage wisdom about the linker and the new way persistent's work, but he's not here. :(","date":"2013-10-24T19:29:41.406Z","type":"message"}
{"nick":"jmar777_","reason":"Remote host closed the connection","date":"2013-10-24T19:31:30.694Z","type":"quit"}
{"nick":"sblom","message":"Deleting node_object_wrap.h mentions _almost_ fixes things. env.h still declares Persistents.","date":"2013-10-24T19:31:34.344Z","type":"message"}
{"nick":"sblom","message":"And they need to be CopyablePersistents.","date":"2013-10-24T19:31:43.004Z","type":"message"}
{"nick":"trevnorris","message":"...","date":"2013-10-24T19:32:06.153Z","type":"message"}
{"nick":"trevnorris","message":"what's the difference w/ CopyablePersistents?","date":"2013-10-24T19:32:34.273Z","type":"message"}
{"nick":"trevnorris","message":"groundwater_, othiym23: here are your revised tests, I just squashed my changed onto your tests. hope that's ok :) http://git.io/5ovRRg","date":"2013-10-24T19:33:03.056Z","type":"message"}
{"nick":"sblom","message":"trevnorris: I haven't hunted down our exact usage yet, but I think we're invoking the copy constructor in Persistent. Probably when we're assigning to the places that we store them? I think the copy constructor increments a reference count. And presumably we're being responsible and releasing them later.","date":"2013-10-24T19:34:25.940Z","type":"message"}
{"nick":"sblom","message":"It looks like v8 made a change to Persistent to make them non-copyable by default.","date":"2013-10-24T19:34:44.149Z","type":"message"}
{"nick":"sblom","message":"Probably to keep people like me who aren't v8 wizards from doing something stupid. :)","date":"2013-10-24T19:35:00.665Z","type":"message"}
{"nick":"trevnorris","message":"sblom: ok. so you're getting a compiler error. what's the error exactly?","date":"2013-10-24T19:35:27.545Z","type":"message"}
{"nick":"trevnorris","message":"sorry, I probably should already be caught up on this.","date":"2013-10-24T19:35:39.565Z","type":"message"}
{"nick":"sblom","message":"It's possible to override declarations of v8::Persistent<> to be copyable (old behavior)","date":"2013-10-24T19:35:40.087Z","type":"message"}
{"nick":"sblom","message":"Nah--it's fine.","date":"2013-10-24T19:35:47.533Z","type":"message"}
{"nick":"trevnorris","message":"that's the compiler error?","date":"2013-10-24T19:36:02.211Z","type":"message"}
{"nick":"sblom","message":"No.","date":"2013-10-24T19:36:14.112Z","type":"message"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2013-10-24T19:36:48.293Z","type":"quit"}
{"nick":"sblom","message":"The compiler error is the nonsense caused by line 477 in v8.h.","date":"2013-10-24T19:37:20.738Z","type":"message"}
{"nick":"sblom","message":"(With a TODO of \"come up with a good compile error here.\"","date":"2013-10-24T19:37:37.189Z","type":"message"}
{"nick":"trevnorris","message":"hahaha, thanks v8","date":"2013-10-24T19:37:47.045Z","type":"message"}
{"nick":"sblom","message":"I'll paste the real error into a gist, but it's not really important here.","date":"2013-10-24T19:37:49.786Z","type":"message"}
{"nick":"sblom","message":"https://gist.github.com/sblom/18223965e31eda6ff89b","date":"2013-10-24T19:38:57.408Z","type":"message"}
{"nick":"sblom","message":"The intention of the code (and the forced nonsense error) is simply to prevent code from compiling that's using Copy().","date":"2013-10-24T19:39:54.060Z","type":"message"}
{"nick":"sblom","message":"What's failing to compile is \"NonCopyablePersistentTraits::Copy() { Uncompilable<Object>(); }\", whose meaning is fairly clear. :)","date":"2013-10-24T19:40:56.428Z","type":"message"}
{"nick":"trevnorris","message":"sblom: wtf. why does that error message still have node_object_wrap in the stack?","date":"2013-10-24T19:41:47.261Z","type":"message"}
{"nick":"sblom","message":"yeah--very good question.","date":"2013-10-24T19:42:33.240Z","type":"message"}
{"nick":"sblom","message":"I've been trying to figure that out for 30 minutes at this point.","date":"2013-10-24T19:42:41.515Z","type":"message"}
{"nick":"sblom","message":"I'm going to scorch and rebuild.","date":"2013-10-24T19:42:47.259Z","type":"message"}
{"nick":"sblom","message":"I still smell a pch cache or some damn thing.","date":"2013-10-24T19:42:55.612Z","type":"message"}
{"nick":"sblom","message":"But pretty sure I fixed it by adding CopyablePersistentTraits to line 295 in env.h.","date":"2013-10-24T19:43:24.861Z","type":"message"}
{"nick":"sblom","message":"Ooh.","date":"2013-10-24T19:43:57.297Z","type":"message"}
{"nick":"sblom","message":"I figured it out.","date":"2013-10-24T19:43:59.338Z","type":"message"}
{"nick":"sblom","message":"Not a cache.","date":"2013-10-24T19:44:00.857Z","type":"message"}
{"nick":"sblom","message":"You said that node_object_wrap.h was in gyp?","date":"2013-10-24T19:44:11.905Z","type":"message"}
{"nick":"trevnorris","message":"it's not in node.gyp","date":"2013-10-24T19:44:23.473Z","type":"message"}
{"nick":"sblom","message":"Oh.","date":"2013-10-24T19:44:27.747Z","type":"message"}
{"nick":"sblom","message":"Dang.","date":"2013-10-24T19:44:29.229Z","type":"message"}
{"nick":"sblom","message":"There are a couple of template types that are instantiated in it.","date":"2013-10-24T19:44:39.352Z","type":"message"}
{"nick":"sblom","message":"trevnorris: Alright--I'm back to my original theory of bogus cache. Let's see how this clean build goes.","date":"2013-10-24T19:45:20.631Z","type":"message"}
{"nick":"sblom","message":"(I don't think I've ever seen pch cache problems before, though.)","date":"2013-10-24T19:46:13.798Z","type":"message"}
{"nick":"trevnorris","message":"sblom: so the error has node_file.cc, but doesn't give a line number. or at least I don't see one.","date":"2013-10-24T19:50:17.243Z","type":"message"}
{"nick":"trevnorris","message":"sblom: and i'll assume this is being generated by MSVC? c:\\src\\node\\node\\node.vcxproj","date":"2013-10-24T19:51:25.723Z","type":"message"}
{"nick":"sblom","message":"trevnorris: yeah--that's a generated file (by GYP_GENERATOR=msvs).","date":"2013-10-24T19:51:59.363Z","type":"message"}
{"nick":"sblom","message":"trevnorris: I also don't see a line number, but it's line 28.","date":"2013-10-24T19:52:15.627Z","type":"message"}
{"nick":"sblom","message":"(Where env.h is being included.)","date":"2013-10-24T19:52:23.675Z","type":"message"}
{"nick":"sblom","message":"That's what gets us onto that set of include hops.","date":"2013-10-24T19:52:47.948Z","type":"message"}
{"nick":"sblom","message":"I need to go grab lunch. clean build is running.","date":"2013-10-24T19:54:18.102Z","type":"message"}
{"nick":"trevnorris","message":"cool.","date":"2013-10-24T19:54:26.434Z","type":"message"}
{"nick":"sblom","message":"thanks for your help","date":"2013-10-24T19:54:37.815Z","type":"message"}
{"nick":"trevnorris","message":"sblom: np.","date":"2013-10-24T19:54:53.033Z","type":"message"}
{"nick":"trevnorris","message":"i have a possible idea","date":"2013-10-24T19:54:55.831Z","type":"message"}
{"nick":"trevnorris","message":"but i'll hash it out while you're away","date":"2013-10-24T19:55:15.202Z","type":"message"}
{"nick":"st_luke","date":"2013-10-24T19:57:39.434Z","type":"join"}
{"nick":"trevnorris","message":"sblom: so, the only way env.h could get included into node_object_wrap.h is via node.h. so if it's been removed there then it should be impossible for that error to happen.","date":"2013-10-24T20:03:38.898Z","type":"message"}
{"nick":"sblom","message":"trevnorris: Found the problem by deleting node_object_wrap.h. There was one more place that it was being included. node_stat_watcher.h.","date":"2013-10-24T20:09:00.940Z","type":"message"}
{"nick":"sblom","message":"Removing the #include there was causing node_stat_watcher.cc to break.","date":"2013-10-24T20:09:12.250Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-24T20:09:14.158Z","type":"quit"}
{"nick":"sblom","message":"But it turns out that was because node_stat_watcher.cc was getting node.h by way of node_object_wrap.h","date":"2013-10-24T20:09:29.196Z","type":"message"}
{"nick":"sblom","message":"So switching it out has fixed things.","date":"2013-10-24T20:09:34.871Z","type":"message"}
{"nick":"sblom","message":"I'll post my new changes as a PR.","date":"2013-10-24T20:09:47.574Z","type":"message"}
{"nick":"sblom","message":"(Just deleting headers.)","date":"2013-10-24T20:09:53.391Z","type":"message"}
{"nick":"trevnorris","message":"awesome.","date":"2013-10-24T20:09:54.939Z","type":"message"}
{"nick":"sblom","message":"trevnorris: So do we need to keep node_object_wrap.h around at all?","date":"2013-10-24T20:12:51.804Z","type":"message"}
{"nick":"sblom","message":"For module authors?","date":"2013-10-24T20:13:04.357Z","type":"message"}
{"nick":"trevnorris","message":"yeah","date":"2013-10-24T20:13:07.439Z","type":"message"}
{"nick":"trevnorris","message":"for that","date":"2013-10-24T20:13:08.343Z","type":"message"}
{"nick":"sblom","message":"So we still need to make it compile.","date":"2013-10-24T20:13:23.514Z","type":"message"}
{"nick":"sblom","message":"On Windows.","date":"2013-10-24T20:13:26.099Z","type":"message"}
{"nick":"trevnorris","message":"eh, users should stop using ObjectWrap anyways. this will be a good incentive. :P","date":"2013-10-24T20:14:06.903Z","type":"message"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-24T20:14:26.935Z","type":"quit"}
{"nick":"sblom","message":"Well, thing is I know how to make it compile. If its template fu were working like it's designed, it would be breaking everywhere else, too.","date":"2013-10-24T20:14:42.659Z","type":"message"}
{"nick":"st_luke","date":"2013-10-24T20:14:55.128Z","type":"join"}
{"nick":"trevnorris","message":"i guess we can test build a module?","date":"2013-10-24T20:15:12.200Z","type":"message"}
{"nick":"trevnorris","message":"problem is I don't know of any modules that work w/ the latest v8 AND use ObjectWrap.","date":"2013-10-24T20:15:54.528Z","type":"message"}
{"nick":"sblom","message":"Yeah--I suppose we could.","date":"2013-10-24T20:15:54.871Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: do you?","date":"2013-10-24T20:15:58.833Z","type":"message"}
{"nick":"sblom","message":"Okay.","date":"2013-10-24T20:15:59.964Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: i do not","date":"2013-10-24T20:16:32.929Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-24T20:18:04.397Z","type":"quit"}
{"nick":"st_luke","reason":"Ping timeout: 265 seconds","date":"2013-10-24T20:19:28.846Z","type":"quit"}
{"nick":"trevnorris","message":"sblom: hm. ok guess I could write one up real quick. one minute.","date":"2013-10-24T20:23:16.586Z","type":"message"}
{"nick":"c4milo","date":"2013-10-24T20:24:56.944Z","type":"join"}
{"nick":"trevnorris","message":"ircretary: tell bnoordhuis will we need to start parsing http headers in utf8 now? http://www.computerworld.com.au/article/529955/first_new_gtlds_added_root/","date":"2013-10-24T20:29:19.708Z","type":"message"}
{"nick":"ircretary","message":"trevnorris: I'll be sure to tell bnoordhuis","date":"2013-10-24T20:29:20.199Z","type":"message"}
{"nick":"sblom","message":"trevnorris: Won't they use punycode like unicode domains currently do?","date":"2013-10-24T20:35:17.940Z","type":"message"}
{"nick":"trevnorris","message":"oh yeah. you're probably right.","date":"2013-10-24T20:36:07.220Z","type":"message"}
{"nick":"st_luke","date":"2013-10-24T20:37:14.090Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: ok, this is dumb. so first thing I did after reinstalling my os was to do an npm install -g node-gyp, and it made ~/tmp root:root","date":"2013-10-24T20:37:15.752Z","type":"message"}
{"nick":"trevnorris","message":"wtf","date":"2013-10-24T20:37:16.510Z","type":"message"}
{"nick":"sblom","message":"trevnorris: Rubber stamp? https://github.com/joyent/node/pull/6411","date":"2013-10-24T20:39:43.292Z","type":"message"}
{"nick":"trevnorris","message":"sblom: ah suck. docs show you only need to include node.h to get ObjectWrap: http://nodejs.org/api/addons.html","date":"2013-10-24T20:41:03.976Z","type":"message"}
{"nick":"sblom","message":"d'oh","date":"2013-10-24T20:41:15.730Z","type":"message"}
{"nick":"trevnorris","message":"what happens if you just include it in node.h?","date":"2013-10-24T20:41:24.069Z","type":"message"}
{"nick":"sblom","message":"Pretty sure we go back to failing because it's included everywhere.","date":"2013-10-24T20:41:46.451Z","type":"message"}
{"nick":"trevnorris","message":"I  guess we could change that for v0.12","date":"2013-10-24T20:41:47.237Z","type":"message"}
{"nick":"sblom","message":"I'll double-check that, but pretty sure.","date":"2013-10-24T20:41:50.919Z","type":"message"}
{"nick":"trevnorris","message":"not like we haven't broken enough anyways.","date":"2013-10-24T20:41:59.050Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine, isaacs: feedback?","date":"2013-10-24T20:42:04.768Z","type":"message"}
{"nick":"sblom","message":"confirmed that we resume failing","date":"2013-10-24T20:43:55.211Z","type":"message"}
{"nick":"trevnorris","message":"well suck it.","date":"2013-10-24T20:44:02.335Z","type":"message"}
{"nick":"trevnorris","message":"same error in env.h?","date":"2013-10-24T20:45:01.893Z","type":"message"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2013-10-24T20:48:48.565Z","type":"quit"}
{"nick":"tjfontaine","message":"sorry checking in from futurestack, looking into the pullreq now","date":"2013-10-24T20:48:58.201Z","type":"message"}
{"nick":"sblom","message":"trevnorris: same error, different include stack.","date":"2013-10-24T20:49:03.764Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: well. won't work because we have documented that you only need node.h to get ObjectWrap. unless we change that for v0.12?","date":"2013-10-24T20:49:32.132Z","type":"message"}
{"nick":"sblom","message":"trevnorris: I'm pretty confident that the v8::CopyablePersistentTraits fix was correct.","date":"2013-10-24T20:50:06.263Z","type":"message"}
{"nick":"sblom","message":"I just haven't proven it.","date":"2013-10-24T20:50:13.653Z","type":"message"}
{"nick":"sblom","message":"And it requires copying in a Traits struct from v8->next()","date":"2013-10-24T20:50:29.063Z","type":"message"}
{"nick":"trevnorris","message":"sblom: so, would you say there's some sort of interaction between object_wrap and env that is causing this issue?","date":"2013-10-24T20:50:44.003Z","type":"message"}
{"nick":"sblom","message":"trevnorris: I think the env thing was a red herring.","date":"2013-10-24T20:51:03.146Z","type":"message"}
{"nick":"trevnorris","message":"ok. so there's just bad code in object_wrap","date":"2013-10-24T20:51:46.387Z","type":"message"}
{"nick":"trevnorris","message":"because seriously, the exact same code in object_wrap exists elsewhere in core.","date":"2013-10-24T20:52:00.211Z","type":"message"}
{"nick":"trevnorris","message":"that's why we were able to get rid of it","date":"2013-10-24T20:52:09.272Z","type":"message"}
{"nick":"trevnorris","message":"sblom: and line 139 in object_wrap is nothing.","date":"2013-10-24T20:53:17.541Z","type":"message"}
{"nick":"trevnorris","message":"it's a bracket","date":"2013-10-24T20:53:20.155Z","type":"message"}
{"nick":"trevnorris","message":"sblom: also, for kicks. will it compile if you remove the #ifdef at the top of node_object_wrap?","date":"2013-10-24T20:54:31.333Z","type":"message"}
{"nick":"inolen","date":"2013-10-24T20:59:37.954Z","type":"join"}
{"nick":"trevnorris","message":"sblom: so, if I remove the ifdef in node_object_wrap, but leave the template class statements in, I get the exact same error.","date":"2013-10-24T21:00:24.343Z","type":"message"}
{"nick":"trevnorris","message":"sblom: so it's because of the \"template class NODE_EXTERN v8::Persistent<T>\" statements that 's giving you the error.","date":"2013-10-24T21:01:30.257Z","type":"message"}
{"nick":"tjfontaine","message":"so, I'm basically ok to drop object_wrap.h from node.h, as long as we update the documentation","date":"2013-10-24T21:02:20.445Z","type":"message"}
{"nick":"inolen","reason":"Client Quit","date":"2013-10-24T21:02:23.695Z","type":"quit"}
{"nick":"tjfontaine","message":"it's not too unacceptable for people to have to include a separate header for it","date":"2013-10-24T21:02:37.682Z","type":"message"}
{"nick":"mikeal","date":"2013-10-24T21:02:48.942Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: well, if we can just remove the template statements at the top of object_wrap then we should be in the clear.","date":"2013-10-24T21:02:50.280Z","type":"message"}
{"nick":"trevnorris","message":"i can reproduce the same error he's getting w/ clang.","date":"2013-10-24T21:03:10.479Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2013-10-24T21:03:16.632Z","type":"message"}
{"nick":"tjfontaine","message":"my cycles are limited atm talking with groundwater_ ","date":"2013-10-24T21:03:47.675Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: about what? tell that hoser I need to speak w/ him.","date":"2013-10-24T21:04:11.828Z","type":"message"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-24T21:04:42.973Z","type":"quit"}
{"nick":"st_luke","date":"2013-10-24T21:05:11.442Z","type":"join"}
{"nick":"tjfontaine","message":"trevnorris: right message delivered","date":"2013-10-24T21:07:27.216Z","type":"message"}
{"nick":"trevnorris","message":"thanks","date":"2013-10-24T21:08:29.394Z","type":"message"}
{"nick":"trevnorris","message":"sblom: so, I still want most of that PR you posted, but just including node_object_wrap in node.h. it's good to not have it scattered throughout core if we're not using it.","date":"2013-10-24T21:09:04.356Z","type":"message"}
{"nick":"st_luke","reason":"Ping timeout: 241 seconds","date":"2013-10-24T21:09:22.711Z","type":"quit"}
{"nick":"trevnorris","message":"sblom: then also, if you could let me know if you can compile just fine w/o those two template statements at the top of node_object_wrap.h then it should be done.","date":"2013-10-24T21:09:34.197Z","type":"message"}
{"nick":"inolen","date":"2013-10-24T21:14:07.892Z","type":"join"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2013-10-24T21:19:10.866Z","type":"quit"}
{"nick":"st_luke","date":"2013-10-24T21:21:00.428Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-10-24T21:23:59.578Z","type":"quit"}
{"nick":"dshaw_","date":"2013-10-24T21:24:06.756Z","type":"join"}
{"nick":"sblom","message":"trevnorris: the other failure that I get if I remove those two lines is on line 138 where handle_ is declared.","date":"2013-10-24T21:24:23.195Z","type":"message"}
{"nick":"trevnorris","message":"sblom: ok, well we're getting somewhere. again, storing the persistent that way is done all over core. do you think not being added to node.gyp could be affecting it?","date":"2013-10-24T21:31:10.110Z","type":"message"}
{"nick":"sblom","message":"_possibly_, but that's not making my spidey sense tingle.","date":"2013-10-24T21:32:24.427Z","type":"message"}
{"nick":"sblom","message":"It's pretty rare to have a header explicitly in gyp.","date":"2013-10-24T21:32:35.028Z","type":"message"}
{"nick":"sblom","message":"I think.","date":"2013-10-24T21:32:37.553Z","type":"message"}
{"nick":"hz","date":"2013-10-24T21:33:00.142Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-10-24T21:33:07.388Z","type":"quit"}
{"nick":"tjfontaine","message":"having a header in gyp doesn't really matter, it's just to inform build system to watch if the file changes, or","date":"2013-10-24T21:33:39.611Z","type":"message"}
{"nick":"tjfontaine","message":"for vs to be able to include it in the project","date":"2013-10-24T21:33:50.020Z","type":"message"}
{"nick":"AvianFlu","date":"2013-10-24T21:38:40.400Z","type":"join"}
{"nick":"rendar","reason":"Quit: Leaving","date":"2013-10-24T21:43:57.237Z","type":"quit"}
{"nick":"AvianFlu","reason":"Ping timeout: 272 seconds","date":"2013-10-24T21:50:09.185Z","type":"quit"}
{"nick":"trevnorris","message":"ok. well I'm going to go with we're simply using it wrong in this case. since we do the same thing elsewhere and it doesn't fail.","date":"2013-10-24T21:51:27.733Z","type":"message"}
{"nick":"st_luke","reason":"Ping timeout: 272 seconds","date":"2013-10-24T22:02:49.213Z","type":"quit"}
{"nick":"sblom","message":"trevnorris: I'll fiddle around with this and see if I can figure out how to make it work without the Copyable trait.","date":"2013-10-24T22:02:52.653Z","type":"message"}
{"nick":"trevnorris","message":"sblom: what's the error you get with handle_ ?","date":"2013-10-24T22:03:27.168Z","type":"message"}
{"nick":"sblom","message":"tjfontaine: Is it worth checking one of our imperfect fixes just to make it build again?","date":"2013-10-24T22:03:35.338Z","type":"message"}
{"nick":"sblom","message":"trevnorris: It's the same one. That Uncompilable<Object> thing.","date":"2013-10-24T22:03:51.533Z","type":"message"}
{"nick":"sblom","message":"With most of the include stack being in v8.h","date":"2013-10-24T22:04:15.451Z","type":"message"}
{"nick":"sblom","message":"I'll add it to that gist.","date":"2013-10-24T22:04:21.543Z","type":"message"}
{"nick":"trevnorris","message":"thanks.","date":"2013-10-24T22:04:24.961Z","type":"message"}
{"nick":"sblom","message":"Added error2.txt to taht gist.","date":"2013-10-24T22:08:43.152Z","type":"message"}
{"nick":"Kakera_","date":"2013-10-24T22:09:04.352Z","type":"join"}
{"nick":"sblom","message":"https://gist.github.com/sblom/18223965e31eda6ff89b","date":"2013-10-24T22:09:15.872Z","type":"message"}
{"nick":"trevnorris","message":"sblom: sorry, mind trying one more thing for me? remove the two template class lines, and remove the NODE_EXTERN in the class declaration.","date":"2013-10-24T22:10:01.502Z","type":"message"}
{"nick":"sblom","message":"trevnorris: build started--this is promising...","date":"2013-10-24T22:11:25.223Z","type":"message"}
{"nick":"luxigo","date":"2013-10-24T22:11:28.429Z","type":"join"}
{"nick":"sblom","message":"trevnorris: bingo","date":"2013-10-24T22:12:16.023Z","type":"message"}
{"nick":"Kakera","reason":"Ping timeout: 260 seconds","date":"2013-10-24T22:12:27.972Z","type":"quit"}
{"nick":"Kakera_","new_nick":"Kaker","date":"2013-10-24T22:12:59.020Z","type":"nick"}
{"nick":"Kaker","new_nick":"Kakera","date":"2013-10-24T22:13:00.756Z","type":"nick"}
{"nick":"st_luke","date":"2013-10-24T22:13:15.158Z","type":"join"}
{"nick":"trevnorris","message":"ok/ unfortunately I don't think users can build modules using it w/o that. let me post my test module.","date":"2013-10-24T22:13:15.968Z","type":"message"}
{"nick":"st_luke","reason":"Ping timeout: 259 seconds","date":"2013-10-24T22:18:00.024Z","type":"quit"}
{"nick":"dominictarr","date":"2013-10-24T22:18:45.953Z","type":"join"}
{"nick":"st_luke","date":"2013-10-24T22:21:16.756Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-10-24T22:24:35.434Z","type":"join"}
{"nick":"mcavage","date":"2013-10-24T22:27:47.014Z","type":"join"}
{"nick":"bnoordhuis","message":"oh dear. the internet just grew four non-ascii tlds?","date":"2013-10-24T22:29:32.482Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: ah, the sage of wisdom. maybe you can shed light on this persistent handle issue in node_object_wrap on windows","date":"2013-10-24T22:30:06.426Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: so, if we remove the template stuff at the top, and remove NODE_EXTERN from the class, node'll build on windows.","date":"2013-10-24T22:31:00.604Z","type":"message"}
{"nick":"trevnorris","message":"I can't figure out what it is about NODE_EXTERN that would cause that error. here are sblom's compile errors: https://gist.github.com/sblom/18223965e31eda6ff89b","date":"2013-10-24T22:31:29.190Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: truth be told, i was always rather surprised msvs required us to declare the templates upfront","date":"2013-10-24T22:31:49.830Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: so if they go, great","date":"2013-10-24T22:32:01.451Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: how about the NODE_EXTERN part? it give those strange errors if the class has it.","date":"2013-10-24T22:32:24.797Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm not sure. it marks the class as dllimport/dllexport, depending on whether you build an add-on","date":"2013-10-24T22:33:20.221Z","type":"message"}
{"nick":"bnoordhuis","message":"removing it will probably break things but i don't pretend to understand the finer details","date":"2013-10-24T22:34:01.108Z","type":"message"}
{"nick":"pachet","reason":"Quit: leaving","date":"2013-10-24T22:42:45.166Z","type":"quit"}
{"nick":"bnoordhuis","message":"#6411 looks fine to me btw","date":"2013-10-24T22:42:46.792Z","type":"message"}
{"nick":"trevnorris","message":"sblom: ok, don't know if you want to try this, but here's a basic module using latest master and ObjectWrap https://gist.github.com/trevnorris/7146409","date":"2013-10-24T22:43:18.410Z","type":"message"}
{"nick":"trevnorris","message":"sblom: if you can compile that w/ node-gyp and run run.js, then i'd say we're in the clear.","date":"2013-10-24T22:43:36.416Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: ok. that'll require update to documentation","date":"2013-10-24T22:44:02.761Z","type":"message"}
{"nick":"AvianFlu","date":"2013-10-24T22:44:07.179Z","type":"join"}
{"nick":"trevnorris","message":"right now it's documented that you get ObjectWrap from node.h","date":"2013-10-24T22:44:15.975Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: err. why>","date":"2013-10-24T22:44:18.852Z","type":"message"}
{"nick":"bnoordhuis","message":"eh. mac keyboard","date":"2013-10-24T22:44:28.091Z","type":"message"}
{"nick":"trevnorris","message":"i dunno. :P","date":"2013-10-24T22:44:37.859Z","type":"message"}
{"nick":"bnoordhuis","message":"oh sorry. your second-to-last comment took a while to arrive here","date":"2013-10-24T22:44:58.748Z","type":"message"}
{"nick":"bnoordhuis","message":"seems my connection to freenode is laggy","date":"2013-10-24T22:45:10.384Z","type":"message"}
{"nick":"trevnorris","message":"oh, hah","date":"2013-10-24T22:45:53.627Z","type":"message"}
{"nick":"bnoordhuis","message":"if we document that node.h includes node_object_wrap.h, then yes, we should update that :)","date":"2013-10-24T22:45:54.532Z","type":"message"}
{"nick":"trevnorris","message":"cool. but we'll still need to check if users can compile modules using node_object_wrap.h on windows.","date":"2013-10-24T22:46:23.290Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah. that's what the NODE_EXPORT thing is for","date":"2013-10-24T22:46:37.041Z","type":"message"}
{"nick":"trevnorris","message":"i just can't understand why NODE_EXTERN is causing that error.","date":"2013-10-24T22:46:47.977Z","type":"message"}
{"nick":"bnoordhuis","message":"me neither. but i have only a dim understanding of msvc's model of compilation/linking","date":"2013-10-24T22:47:12.868Z","type":"message"}
{"nick":"sblom","message":"trevnorris, bnoordhuis: NODE_EXTERN is telling the compiler to make the class available to the consumer of a DLL, and it has no way to know that no one will want to use the assignment operator on v8::Persistent.","date":"2013-10-24T22:49:19.587Z","type":"message"}
{"nick":"sblom","message":"So it's failing to compile now that v8 guards against uses of the assignment operator.","date":"2013-10-24T22:49:42.451Z","type":"message"}
{"nick":"trevnorris","message":"ah.... well, that sucks.","date":"2013-10-24T22:50:01.737Z","type":"message"}
{"nick":"Kakera_","date":"2013-10-24T22:50:08.878Z","type":"join"}
{"nick":"trevnorris","message":"sblom: awesome though. great we actually know why it's happening :)","date":"2013-10-24T22:50:24.186Z","type":"message"}
{"nick":"trevnorris","message":"sblom: so, is there a way to tell MSVC not to worry about it?","date":"2013-10-24T22:51:33.736Z","type":"message"}
{"nick":"Kakera","reason":"Ping timeout: 256 seconds","date":"2013-10-24T22:52:10.464Z","type":"quit"}
{"nick":"sblom","message":"trevnorris: The options I can come up with are: 1) determine that we don't need this to be a NODE_EXPORT, 2) don't expose v8::Persistent pointers or references over a DLL boundary, 3) patch v8 to make this a runtime crash instead of a compile time failure, 4) use the CopyablePersistentTraits trait to ask the compiler to not guard against this (need v8 3.22 or a copied/pasted `struct CopyablePe","date":"2013-10-24T22:54:26.109Z","type":"message"}
{"nick":"sblom","message":"rsistentTraits`).","date":"2013-10-24T22:54:26.325Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: your thoughts?","date":"2013-10-24T22:55:11.351Z","type":"message"}
{"nick":"sblom","message":"I'm thinking 4), frankly. Although it would be safest to sanity check that with some v8 developer who understands their intention behind the NonCopyable/Copyable traits thing.","date":"2013-10-24T22:55:17.345Z","type":"message"}
{"nick":"bnoordhuis","message":"i think i agree","date":"2013-10-24T22:55:42.873Z","type":"message"}
{"nick":"bnoordhuis","message":"1 and 2 don't seem very viable","date":"2013-10-24T22:55:49.627Z","type":"message"}
{"nick":"bnoordhuis","message":"3 is probably out because we'd rather not carry v8 patches","date":"2013-10-24T22:56:12.458Z","type":"message"}
{"nick":"bnoordhuis","message":"which leaves us with option 4","date":"2013-10-24T22:56:26.516Z","type":"message"}
{"nick":"tjfontaine","message":"ya 3 is pretty much out","date":"2013-10-24T22:56:30.235Z","type":"message"}
{"nick":"trevnorris","message":"so, does that mean we're upgrading to 3.22, or are we going to float a patch?","date":"2013-10-24T22:57:15.396Z","type":"message"}
{"nick":"tjfontaine","message":"we can't really upgrade to 3.22 yet","date":"2013-10-24T22:57:35.229Z","type":"message"}
{"nick":"tjfontaine","message":"and floating a patch we really really really don't want to do in general :)","date":"2013-10-24T22:57:56.534Z","type":"message"}
{"nick":"trevnorris","message":"so it's between we don't want to, and we really really don't want to?","date":"2013-10-24T22:58:11.025Z","type":"message"}
{"nick":"Kakera_","reason":"Ping timeout: 260 seconds","date":"2013-10-24T22:58:11.916Z","type":"quit"}
{"nick":"bnoordhuis","message":"i guess we could also revert the upgrade","date":"2013-10-24T22:58:21.327Z","type":"message"}
{"nick":"sblom","message":"So we'll have to carry CopyablePersistentTraits on our own until then. Not awesome, but doesn't seem like the end of the world.","date":"2013-10-24T22:58:21.762Z","type":"message"}
{"nick":"tjfontaine","message":"reverting the upgrade is probably the short term solution","date":"2013-10-24T22:58:31.170Z","type":"message"}
{"nick":"abraxas","date":"2013-10-24T22:58:38.114Z","type":"join"}
{"nick":"sblom","message":"Interesting.","date":"2013-10-24T22:58:40.956Z","type":"message"}
{"nick":"sblom","message":"I'm okay with that.","date":"2013-10-24T22:58:47.008Z","type":"message"}
{"nick":"tjfontaine","message":"we should talk to somebody","date":"2013-10-24T22:58:52.579Z","type":"message"}
{"nick":"sblom","message":"But if we're motivated to upgrade, I think we have options...","date":"2013-10-24T22:58:56.755Z","type":"message"}
{"nick":"trevnorris","message":"well, wait. if object_wrap is a self contained header file that just depends on v8, then why does it need NODE_EXTERN?","date":"2013-10-24T22:58:58.438Z","type":"message"}
{"nick":"bnoordhuis","message":"good question. sblom?","date":"2013-10-24T22:59:15.410Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: if module authors want to use it, and be on windows, the symbol will need to be resolved?","date":"2013-10-24T22:59:21.774Z","type":"message"}
{"nick":"sblom","message":"But I don't think it'll need to resolve across DLL boundaries, right?","date":"2013-10-24T22:59:39.544Z","type":"message"}
{"nick":"trevnorris","message":"what symbol? node isn't using ObjectWrap anymore.","date":"2013-10-24T22:59:45.875Z","type":"message"}
{"nick":"trevnorris","message":"yeah, shouldn't have to.","date":"2013-10-24T22:59:50.248Z","type":"message"}
{"nick":"sblom","message":"Yeah--it really might not need to be NODE_EXPORT any more.","date":"2013-10-24T23:00:13.637Z","type":"message"}
{"nick":"sblom","message":"I'll try trevnorris's test module.","date":"2013-10-24T23:00:21.963Z","type":"message"}
{"nick":"bnoordhuis","message":"could there be an issue for add-ons that compile down to multiple dlls?","date":"2013-10-24T23:00:23.434Z","type":"message"}
{"nick":"sblom","message":"bnoordhuis: Perhaps. Does that exist?","date":"2013-10-24T23:00:43.326Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm not 100% sure","date":"2013-10-24T23:00:51.883Z","type":"message"}
{"nick":"trevnorris","message":"i say we run w/ this and wait for an issue to pop up. so far this seems like the best solution to me :)","date":"2013-10-24T23:01:13.006Z","type":"message"}
{"nick":"tjfontaine","message":"plugging your ears and saying \"la la la\" is not really a solution :)","date":"2013-10-24T23:01:29.362Z","type":"message"}
{"nick":"sblom","message":"tjfontaine: This isn't _quite_ that bad.","date":"2013-10-24T23:01:40.788Z","type":"message"}
{"nick":"sblom","message":":p","date":"2013-10-24T23:01:49.951Z","type":"message"}
{"nick":"tjfontaine","message":":)","date":"2013-10-24T23:01:52.309Z","type":"message"}
{"nick":"trevnorris","message":"hey, if the dude that actually works at microsoft is willing to go this route, who am I to argue?","date":"2013-10-24T23:02:43.229Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-10-24T23:02:49.661Z","type":"message"}
{"nick":"abraxas","reason":"Ping timeout: 240 seconds","date":"2013-10-24T23:03:02.546Z","type":"quit"}
{"nick":"bnoordhuis","message":"well... if it turns out after v0.12 that there is some unforeseen corner case, then we have an issue","date":"2013-10-24T23:03:11.593Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: by the time they get done upgrading their modules to the new v8 api, we'll be out with v1.0 :P","date":"2013-10-24T23:04:03.598Z","type":"message"}
{"nick":"sblom","message":"Just saw tjfontaine and isaacs in the New Relic on Node video.","date":"2013-10-24T23:05:01.309Z","type":"message"}
{"nick":"bnoordhuis","message":"that made me laugh but the point still stands :)","date":"2013-10-24T23:05:06.873Z","type":"message"}
{"nick":"tjfontaine","message":"sblom: dun dun dun","date":"2013-10-24T23:05:11.649Z","type":"message"}
{"nick":"sblom","message":"Alright--so here's what I'm going to do. I'm going to try building the test module without NODE_EXPORT and if it fails, we know this won't fly.","date":"2013-10-24T23:06:00.127Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-10-24T23:06:09.836Z","type":"message"}
{"nick":"trevnorris","message":"*la la la*","date":"2013-10-24T23:06:13.247Z","type":"message"}
{"nick":"sblom","message":"If it succeeds, we'll think harder.","date":"2013-10-24T23:06:13.721Z","type":"message"}
{"nick":"tjfontaine","message":"indeed","date":"2013-10-24T23:06:21.414Z","type":"message"}
{"nick":"bnoordhuis","message":"s/think/snore/ for me personally. signing off, sleep tight folks :)","date":"2013-10-24T23:06:44.489Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: night!","date":"2013-10-24T23:06:50.674Z","type":"message"}
{"nick":"trevnorris","message":"night ben","date":"2013-10-24T23:06:54.347Z","type":"message"}
{"nick":"trevnorris","message":"sblom: oh wait. if you're not using NODE_EXTERN you'll need to #include <node_object_wrap.h> at the top of basic.cc","date":"2013-10-24T23:07:40.898Z","type":"message"}
{"nick":"trevnorris","message":"or else it'll definitely not compile.","date":"2013-10-24T23:07:52.458Z","type":"message"}
{"nick":"luxigo","reason":"Ping timeout: 272 seconds","date":"2013-10-24T23:09:57.217Z","type":"quit"}
{"nick":"AvianFlu_","date":"2013-10-24T23:10:31.760Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-10-24T23:10:33.328Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2013-10-24T23:10:48.377Z","type":"quit"}
{"nick":"trevnorris","message":"heh, that was funny. sblom so I applied your 6411 patch to test it out, compiled, then made a change and compiled again. told me nothing to be done.","date":"2013-10-24T23:12:30.793Z","type":"message"}
{"nick":"trevnorris","message":"makes sense, but just wasn't expecting it.","date":"2013-10-24T23:12:36.119Z","type":"message"}
{"nick":"hz","date":"2013-10-24T23:16:08.580Z","type":"quit"}
{"nick":"trevnorris","message":"sblom: also, you'll probably want to remove #include \"node.h\" from node_object_wrap.h.","date":"2013-10-24T23:16:10.339Z","type":"message"}
{"nick":"trevnorris","message":"it shouldn't be needed anymore.","date":"2013-10-24T23:16:15.267Z","type":"message"}
{"nick":"trevnorris","message":"ah crap. other than they share the same namespace.","date":"2013-10-24T23:16:41.752Z","type":"message"}
{"nick":"trevnorris","message":"but I guess that wouldn't cause any damage?","date":"2013-10-24T23:17:01.711Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-24T23:18:58.988Z","type":"nick"}
{"nick":"trevnorris","message":"tjfontaine: you still around groundwater_?","date":"2013-10-24T23:20:11.317Z","type":"message"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-24T23:35:29.657Z","type":"quit"}
{"nick":"st_luke","date":"2013-10-24T23:35:58.901Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-24T23:39:01.103Z","type":"quit"}
{"nick":"c4milo","date":"2013-10-24T23:39:33.290Z","type":"join"}
{"nick":"st_luke","reason":"Ping timeout: 240 seconds","date":"2013-10-24T23:40:07.327Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-24T23:40:50.274Z","type":"quit"}
{"nick":"st_luke","date":"2013-10-24T23:40:57.539Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 240 seconds","date":"2013-10-24T23:43:50.552Z","type":"quit"}
{"nick":"c4milo_","date":"2013-10-24T23:43:55.409Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-24T23:46:09.433Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 240 seconds","date":"2013-10-24T23:51:07.621Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-10-24T23:51:16.146Z","type":"quit"}
{"nick":"sblom","message":"trevnorris: I'm having trouble getting this to build using node-gyp and have to run for now, but I'll pick up again later. Looking like NODE_EXTERN is going to be required.","date":"2013-10-24T23:56:00.329Z","type":"message"}
{"nick":"sblom","message":"In which case, we're back to only option 4 being possible.","date":"2013-10-24T23:56:08.382Z","type":"message"}
{"nick":"trevnorris","message":"sblom: ok. we'll talk later. I don't get why NODE_EXTERN would be required since I can just remove \"node.h\" from node_object_wrap completely","date":"2013-10-24T23:56:42.403Z","type":"message"}
{"nick":"trevnorris","message":"it's basically a sand alone header file.","date":"2013-10-24T23:56:47.923Z","type":"message"}
{"nick":"trevnorris","message":"also, that module is using your PR that's removed node_object_wrap from core","date":"2013-10-24T23:57:23.302Z","type":"message"}
{"nick":"trevnorris","message":"just to be clear","date":"2013-10-24T23:57:27.597Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-24T23:58:59.764Z","type":"nick"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #244 \u00034FAILURE\u000f windows-x64 (3/196) windows-ia32 (3/196) http://jenkins.nodejs.org/job/libuv-master-gyp/244/","date":"2013-10-24T23:59:55.715Z","type":"message"}
