{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-02-20T00:00:01.584Z","type":"quit"}
{"nick":"ircretary","date":"2013-02-20T00:00:08.597Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: hm.  another case where it just cannot possibly be the issue.","date":"2013-02-20T00:06:11.110Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i think bisect is not going to give us the answer here.","date":"2013-02-20T00:06:19.850Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: and i'm growing suspicious of your disk encryption.","date":"2013-02-20T00:06:27.190Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: just because it's an added variable.","date":"2013-02-20T00:06:37.839Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: yeah. just wonder how I can solidify that's the issue.","date":"2013-02-20T00:07:36.083Z","type":"message"}
{"nick":"isaacs","message":"i'm not sure","date":"2013-02-20T00:07:43.972Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-20T00:17:22.820Z","type":"quit"}
{"nick":"mikeal","date":"2013-02-20T00:22:39.567Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: know what the --gdb option is for ./configure?","date":"2013-02-20T00:23:59.313Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: nope","date":"2013-02-20T00:24:21.791Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: that's for the gdbjit stuff","date":"2013-02-20T00:26:04.582Z","type":"message"}
{"nick":"tjfontaine","message":"iirc","date":"2013-02-20T00:26:06.062Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: cool. i'm working on that make-sure-all-statistical-analysis-is-working-properly.js script.","date":"2013-02-20T00:26:09.958Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: hahah","date":"2013-02-20T00:26:19.958Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: cool. i'm going to try that out.","date":"2013-02-20T00:26:25.124Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: nice filename","date":"2013-02-20T00:26:29.937Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: I'm not sure what you expect to glean with it","date":"2013-02-20T00:26:34.377Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i'm sure the other committers will all love it","date":"2013-02-20T00:26:34.996Z","type":"message"}
{"nick":"trevnorris","message":"=)","date":"2013-02-20T00:26:36.010Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: you might try adding -O0 or -g to CFLAGS to see if that will make it easier for you to debug","date":"2013-02-20T00:27:03.040Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: no idea, just feeling around in the dark at this point.","date":"2013-02-20T00:27:10.185Z","type":"message"}
{"nick":"trevnorris","message":"ok, i'll try that.","date":"2013-02-20T00:27:12.645Z","type":"message"}
{"nick":"tjfontaine","message":"(CFLAGS and CXXFLAGS I guess)","date":"2013-02-20T00:27:12.831Z","type":"message"}
{"nick":"tjfontaine","message":"I mean, gdbjit is probably not related to what you want at all","date":"2013-02-20T00:27:28.086Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: docs say it doesn't compact when jit. no idea what that means really.","date":"2013-02-20T00:28:04.788Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: well it's http://code.google.com/p/v8/wiki/GDBJITInterface","date":"2013-02-20T00:29:20.744Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: hm. i'm able to reproduce the error with flags like --prof. would that information help?","date":"2013-02-20T00:31:16.263Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: well, people won't wonder what that file is for. ;-)","date":"2013-02-20T00:31:30.228Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: er, I'm not sure","date":"2013-02-20T00:35:04.328Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: well. most that has told me is it's definitely when trying to open the write stream. bugger.","date":"2013-02-20T00:35:45.614Z","type":"message"}
{"nick":"trevnorris","message":"thanks for all the help btw.","date":"2013-02-20T00:35:50.997Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: for shits and giggles is it possible for you to try without luks in the mix?","date":"2013-02-20T00:36:32.737Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: hm. it's full disk encryption. know if there would be a way to emulate that out? like use a vm or something? or maybe I can run from a usb.","date":"2013-02-20T00:37:33.414Z","type":"message"}
{"nick":"tjfontaine","message":"we don't want to emulate it out really, do you have a secondary drive you could stick in and run the build and benchmark from it?","date":"2013-02-20T00:38:01.505Z","type":"message"}
{"nick":"trevnorris","message":"ugh. using -O0 i can't reproduce it.","date":"2013-02-20T00:38:21.397Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: hm, not a full other drive. think a thumb stick would work?","date":"2013-02-20T00:43:19.815Z","type":"message"}
{"nick":"tjfontaine","message":"ugh maybe, but not really an apples to apples comparison","date":"2013-02-20T00:43:42.936Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: but you do you understand why I'm kinda wary of LUKS+FS bound benchmarks?","date":"2013-02-20T00:44:25.482Z","type":"message"}
{"nick":"trevnorris","message":"nope. this is all really new to me.","date":"2013-02-20T00:44:47.837Z","type":"message"}
{"nick":"trevnorris","message":"i've been programming for the browser for many years, and just started picking this stuff up in nov. to work on node.","date":"2013-02-20T00:45:10.257Z","type":"message"}
{"nick":"tjfontaine","message":"sure","date":"2013-02-20T00:46:13.231Z","type":"message"}
{"nick":"tjfontaine","message":"well you're going through 3 layers of indirection to get to your disk","date":"2013-02-20T00:47:31.876Z","type":"message"}
{"nick":"tjfontaine","message":"fs -> lvm -> luks -> disk","date":"2013-02-20T00:47:43.700Z","type":"message"}
{"nick":"tjfontaine","message":"I mean you're running them enough times that your data is useful, it's just probably not what I would consider finding the maximum throughput for your system :)","date":"2013-02-20T00:48:17.603Z","type":"message"}
{"nick":"trevnorris","message":"sorry, what do you mean by maximum throughput?","date":"2013-02-20T00:49:08.505Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: in terms of the number of gbits you push to/from the disk, you're adding 2 more layers of cpu time to the task","date":"2013-02-20T00:50:53.838Z","type":"message"}
{"nick":"TheJH","reason":"Ping timeout: 252 seconds","date":"2013-02-20T00:51:02.607Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: yeah, and i'm ok with that. what i'm wondering about is why the abort?","date":"2013-02-20T00:51:37.440Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-02-20T00:51:49.341Z","type":"quit"}
{"nick":"trevnorris","message":"i mean, i'm placing the write stream and the pipe in setTimeout's to try and remove any race condition and it's still happening. but guess it's occurring at a lower level.","date":"2013-02-20T00:52:11.008Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: well, I dunno, but so far it's the only piece I've seen that might be adding to this race","date":"2013-02-20T00:52:21.766Z","type":"message"}
{"nick":"hz","date":"2013-02-20T00:56:53.262Z","type":"quit"}
{"nick":"trevnorris","message":"yeah. ugh. just don't want to see that failure occur half the time while running my tests.","date":"2013-02-20T00:57:16.480Z","type":"message"}
{"nick":"tjfontaine","message":"well, I don't want to lose the configuration either as it's helpful, would just be better if you could reproduce it with either less optimization or more debug information","date":"2013-02-20T00:58:26.400Z","type":"message"}
{"nick":"trevnorris","message":"yeah. that's what i'm trying to do now.","date":"2013-02-20T00:58:48.877Z","type":"message"}
{"nick":"isaacs","message":"ok, fuckit.  i'mma land this benchmark-2 thing.","date":"2013-02-20T00:59:29.064Z","type":"message"}
{"nick":"isaacs","message":"otherwise we'll just bikeshed it more.","date":"2013-02-20T00:59:33.419Z","type":"message"}
{"nick":"tjfontaine","message":"it builds, ship it","date":"2013-02-20T00:59:45.814Z","type":"message"}
{"nick":"trevnorris","message":"cool w/ me","date":"2013-02-20T01:00:08.880Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: ok, just noticed something. the abort always comes between a [New Thread ...] and a [Thread ... exited]. anything?","date":"2013-02-20T01:04:43.829Z","type":"message"}
{"nick":"trevnorris","message":"(and if this incessant questioning is driving you mad, let me know)","date":"2013-02-20T01:05:15.783Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: nah, it's my job now I think :) but I'm not sure that indicates much aside from reinforcing that this is happening from an FS operation (fs ops happen on the thread pool)","date":"2013-02-20T01:05:50.849Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: you might try lowering the max thread pool size and see if that makes it more reproducible I guess","date":"2013-02-20T01:06:35.982Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: how often are you hitting it now?","date":"2013-02-20T01:06:42.463Z","type":"message"}
{"nick":"trevnorris","message":"shows up 4 times. but always aborts on the first.","date":"2013-02-20T01:07:03.213Z","type":"message"}
{"nick":"trevnorris","message":"sorry, 5 times.","date":"2013-02-20T01:07:11.326Z","type":"message"}
{"nick":"tjfontaine","message":"I'm looking to see where the thread stuff is","date":"2013-02-20T01:08:11.886Z","type":"message"}
{"nick":"tjfontaine","message":"in deps/uv/src/unix/threadpool.c has a threads[4], you might try changing that to 2","date":"2013-02-20T01:10:17.502Z","type":"message"}
{"nick":"bradleymeck","date":"2013-02-20T01:11:59.874Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: ok, just playing around. declared the fd as volatile and got this from the dump: $1 = 12","date":"2013-02-20T01:12:12.542Z","type":"message"}
{"nick":"tjfontaine","message":"are you able to get it to fail while you're in gdb?","date":"2013-02-20T01:12:32.098Z","type":"message"}
{"nick":"tjfontaine","message":"because we might be able to get some useful information with lsof or /proc ","date":"2013-02-20T01:12:53.194Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: yeah.","date":"2013-02-20T01:13:00.235Z","type":"message"}
{"nick":"tjfontaine","message":"but 12 seems like it should be a valid fd","date":"2013-02-20T01:13:04.097Z","type":"message"}
{"nick":"trevnorris","message":"it fails in gdb.","date":"2013-02-20T01:13:22.678Z","type":"message"}
{"nick":"tjfontaine","message":"or at least an fd I would expect","date":"2013-02-20T01:13:40.430Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: did ben have you add a breakpoint before the abort?","date":"2013-02-20T01:14:37.598Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: nope.","date":"2013-02-20T01:16:34.365Z","type":"message"}
{"nick":"tjfontaine","message":"so you were just doing post mortem after it died?","date":"2013-02-20T01:17:12.948Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: pretty much. just loading the core file.","date":"2013-02-20T01:17:27.889Z","type":"message"}
{"nick":"tjfontaine","message":"basically I would say `break deps/uv/src/unix/linux/linux-core.c:224`","date":"2013-02-20T01:17:47.106Z","type":"message"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-02-20T01:17:53.353Z","type":"nick"}
{"nick":"tjfontaine","message":"which should hold the process open before the abort happens","date":"2013-02-20T01:17:59.639Z","type":"message"}
{"nick":"tjfontaine","message":"then we could see what lsof has to say about that fd","date":"2013-02-20T01:18:25.010Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: cool. have to run, but i'm trying that later.","date":"2013-02-20T01:19:03.971Z","type":"message"}
{"nick":"tjfontaine","message":"enjoy","date":"2013-02-20T01:19:12.668Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: oh, and for some reason whenever it aborts I always get \"224     ../deps/uv/src/unix/linux/linux-core.c: No such file or directory.\"","date":"2013-02-20T01:19:14.373Z","type":"message"}
{"nick":"trevnorris","message":"that doesn't make sense to me.","date":"2013-02-20T01:19:24.672Z","type":"message"}
{"nick":"tjfontaine","message":"that's because of the way node is built","date":"2013-02-20T01:19:32.216Z","type":"message"}
{"nick":"tjfontaine","message":"just run gdb from one directory inside your checkout","date":"2013-02-20T01:19:43.488Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok.","date":"2013-02-20T01:19:47.722Z","type":"message"}
{"nick":"tjfontaine","message":"such that ../ is a valid path","date":"2013-02-20T01:19:49.413Z","type":"message"}
{"nick":"MI61","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u0002f1780a6\u0002 : Merge branch 'benchmark-refactor-2' (+45 more commits) - http://git.io/faRHCw","date":"2013-02-20T01:20:10.870Z","type":"message"}
{"nick":"isaacs","message":"alright, benchmark-refactor-2 landing","date":"2013-02-20T01:20:11.219Z","type":"message"}
{"nick":"isaacs","message":"--no-ff so that we can remove if necessary, since it's many commits.","date":"2013-02-20T01:20:23.910Z","type":"message"}
{"nick":"isaacs","message":"but should be fine.","date":"2013-02-20T01:20:26.112Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: just ran the breakpoint and got this: p fd -> \"$1 = 17\"","date":"2013-02-20T01:20:31.546Z","type":"message"}
{"nick":"c4milo","date":"2013-02-20T01:20:50.118Z","type":"join"}
{"nick":"tjfontaine","message":"ok, and you should see the process id and then you can use lsof to see what it has to say about that fd","date":"2013-02-20T01:21:03.559Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: not sure what i'm looking for. so many entries: http://git.io/3VgGLA","date":"2013-02-20T01:23:57.958Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: thanks. i'll try to get that script to you tomorrow.","date":"2013-02-20T01:24:18.680Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: take your time.  and a nap.  srsly. ;)","date":"2013-02-20T01:24:32.787Z","type":"message"}
{"nick":"isaacs","message":"don't want you burning out :)","date":"2013-02-20T01:24:44.346Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: heh, thanks. =)","date":"2013-02-20T01:24:44.542Z","type":"message"}
{"nick":"isaacs","message":"there might be bugs in your code that i want you to fix ;)","date":"2013-02-20T01:24:52.541Z","type":"message"}
{"nick":"trevnorris","message":"heh, i'll keep that in mind.","date":"2013-02-20T01:26:00.395Z","type":"message"}
{"nick":"tjfontaine","message":"well, if fd is 17, it doesn't appear that that file is still open","date":"2013-02-20T01:26:47.369Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: oh, and bnoordhuis had me do: '$p (int) __errno_location()' -> '$2 = -134392128'","date":"2013-02-20T01:27:33.888Z","type":"message"}
{"nick":"trevnorris","message":"no idea what that's about, but eh.","date":"2013-02-20T01:27:39.988Z","type":"message"}
{"nick":"trevnorris","message":"ok, out for real.","date":"2013-02-20T01:27:52.512Z","type":"message"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-02-20T01:27:53.317Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-20T01:30:28.592Z","type":"quit"}
{"nick":"Raynos","message":"mr isaacs!","date":"2013-02-20T01:33:07.667Z","type":"message"}
{"nick":"Raynos","message":"does _read always happen in the next tick after push() === false ?","date":"2013-02-20T01:33:07.802Z","type":"message"}
{"nick":"Raynos","message":"isaacs: given a Readable stream that is source, s and a Writable stream that is a destination, w.","date":"2013-02-20T01:35:36.920Z","type":"message"}
{"nick":"Raynos","message":"Let's say I pipe data from s to w and n minutes later unpipe w from s","date":"2013-02-20T01:35:49.091Z","type":"message"}
{"nick":"Raynos","message":"What happens to the data in s's internal buffer?","date":"2013-02-20T01:35:56.536Z","type":"message"}
{"nick":"Raynos","message":"When does that get GC'd? Is there any way to nuke that memory out of the buffer?","date":"2013-02-20T01:36:11.202Z","type":"message"}
{"nick":"sblom","reason":"Quit: Leaving.","date":"2013-02-20T01:36:12.829Z","type":"quit"}
{"nick":"isaacs","message":"Raynos: so, are you saying that there's data that was not written to w yet?","date":"2013-02-20T01:36:44.156Z","type":"message"}
{"nick":"abraxas","date":"2013-02-20T01:36:46.340Z","type":"join"}
{"nick":"Raynos","message":"yes","date":"2013-02-20T01:36:49.683Z","type":"message"}
{"nick":"isaacs","message":"Raynos: once it's read() out, it's out of s's purview","date":"2013-02-20T01:36:55.497Z","type":"message"}
{"nick":"Raynos","message":"i.e. the buffer is full upto the high watermark","date":"2013-02-20T01:36:55.908Z","type":"message"}
{"nick":"Raynos","message":"and w is drained mode","date":"2013-02-20T01:36:58.779Z","type":"message"}
{"nick":"isaacs","message":"Raynos: when s is gc'ed, so is s's buffer","date":"2013-02-20T01:37:04.879Z","type":"message"}
{"nick":"Raynos","message":"I mean","date":"2013-02-20T01:37:06.608Z","type":"message"}
{"nick":"Raynos","message":"in draining mode","date":"2013-02-20T01:37:08.130Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-02-20T01:37:11.833Z","type":"message"}
{"nick":"isaacs","message":"hte data in s's buffer will not be gc'ed until s is gc'ed, or it's read() out","date":"2013-02-20T01:37:24.955Z","type":"message"}
{"nick":"Raynos","message":"should I be ocd about s not being able to be GC'd","date":"2013-02-20T01:37:29.394Z","type":"message"}
{"nick":"Raynos","message":"im finally fixing read-stream to not suck","date":"2013-02-20T01:38:07.202Z","type":"message"}
{"nick":"isaacs","message":"why would s not be gc'ed?","date":"2013-02-20T01:38:08.620Z","type":"message"}
{"nick":"isaacs","message":"Raynos: you should probably hang onto a reference to s just to make sure you can make sure that it gets GC'ed ;P","date":"2013-02-20T01:38:25.845Z","type":"message"}
{"nick":"Raynos","message":"something is currently causing my stream to not be gc'd and this array ( https://github.com/Raynos/read-stream/blob/master/lib/queue.js#L6 ) is leaking GB's of memory","date":"2013-02-20T01:38:37.445Z","type":"message"}
{"nick":"Raynos","message":"i'm starting to dislike layers / abstractions","date":"2013-02-20T01:39:24.795Z","type":"message"}
{"nick":"isaacs","message":"Raynos: yeah, i don't really have brainspace to analyze that right now","date":"2013-02-20T01:39:25.344Z","type":"message"}
{"nick":"isaacs","message":"but yeah, that's normal","date":"2013-02-20T01:39:30.694Z","type":"message"}
{"nick":"Raynos","message":"that's fine.","date":"2013-02-20T01:39:31.809Z","type":"message"}
{"nick":"isaacs","message":"probably you should just use streams2 or something :)","date":"2013-02-20T01:39:47.414Z","type":"message"}
{"nick":"Raynos","message":"im fixing my own bugs","date":"2013-02-20T01:39:47.697Z","type":"message"}
{"nick":"Raynos","message":"> does _read always happen in the next tick after push() === false ?","date":"2013-02-20T01:39:59.819Z","type":"message"}
{"nick":"isaacs","message":"Raynos: not necessarily","date":"2013-02-20T01:43:24.324Z","type":"message"}
{"nick":"isaacs","message":"Raynos: depends on when read() happens","date":"2013-02-20T01:43:29.081Z","type":"message"}
{"nick":"Raynos","message":"then ill do process.nextTick myself","date":"2013-02-20T01:43:35.212Z","type":"message"}
{"nick":"isaacs","message":"well, if you do push() (ret false) then read(), i'tll eventually call _read synchronously","date":"2013-02-20T01:43:56.761Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-02-20T02:00:09.330Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-02-20T02:06:58.220Z","type":"quit"}
{"nick":"Benvie","date":"2013-02-20T02:11:44.689Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-02-20T02:18:13.274Z","type":"quit"}
{"nick":"jmar777","date":"2013-02-20T02:18:49.312Z","type":"join"}
{"nick":"jmar777","reason":"Ping timeout: 264 seconds","date":"2013-02-20T02:23:30.136Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-02-20T02:26:02.182Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-02-20T02:29:54.687Z","type":"join"}
{"nick":"bradleymeck","reason":"Client Quit","date":"2013-02-20T02:31:04.941Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-20T02:34:19.605Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-02-20T02:36:09.034Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-02-20T02:43:07.505Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-02-20T02:46:18.451Z","type":"join"}
{"nick":"bradleymeck","reason":"Client Quit","date":"2013-02-20T02:49:51.414Z","type":"quit"}
{"nick":"Benvie","date":"2013-02-20T02:57:07.330Z","type":"join"}
{"nick":"c4milo","date":"2013-02-20T03:00:09.166Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-02-20T03:02:37.687Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-20T03:18:08.693Z","type":"quit"}
{"nick":"c4milo","date":"2013-02-20T03:24:20.024Z","type":"join"}
{"nick":"dap1","reason":"Quit: Leaving.","date":"2013-02-20T03:25:20.867Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-20T03:33:09.072Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-02-20T03:43:34.601Z","type":"quit"}
{"nick":"kazupon","date":"2013-02-20T03:48:00.594Z","type":"join"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-02-20T03:48:08.462Z","type":"nick"}
{"nick":"c4milo","date":"2013-02-20T03:54:07.020Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-02-20T03:57:40.975Z","type":"quit"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-02-20T04:09:42.398Z","type":"quit"}
{"nick":"c4milo","reason":"Ping timeout: 248 seconds","date":"2013-02-20T04:16:35.832Z","type":"quit"}
{"nick":"indexzero_","date":"2013-02-20T04:51:49.154Z","type":"join"}
{"nick":"c4milo","date":"2013-02-20T04:53:15.504Z","type":"join"}
{"nick":"indexzero","reason":"Ping timeout: 252 seconds","date":"2013-02-20T04:54:52.523Z","type":"quit"}
{"nick":"indexzero_","new_nick":"indexzero","date":"2013-02-20T04:54:53.110Z","type":"nick"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-20T04:56:23.503Z","type":"quit"}
{"nick":"TheJH","date":"2013-02-20T05:11:36.455Z","type":"join"}
{"nick":"TooTallNate","date":"2013-02-20T05:17:24.232Z","type":"join"}
{"nick":"TheJH","reason":"Ping timeout: 276 seconds","date":"2013-02-20T05:17:30.359Z","type":"quit"}
{"nick":"mikeal","date":"2013-02-20T05:18:55.962Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-02-20T05:40:33.400Z","type":"quit"}
{"nick":"CoverSlide","reason":"Ping timeout: 252 seconds","date":"2013-02-20T05:46:12.562Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-02-20T05:51:15.541Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-20T05:51:32.019Z","type":"quit"}
{"nick":"loladiro","date":"2013-02-20T05:54:50.547Z","type":"join"}
{"nick":"indexzero","date":"2013-02-20T06:05:50.550Z","type":"join"}
{"nick":"philips_","reason":"Excess Flood","date":"2013-02-20T06:14:12.886Z","type":"quit"}
{"nick":"philips_","date":"2013-02-20T06:15:31.356Z","type":"join"}
{"nick":"toothrot","reason":"Ping timeout: 260 seconds","date":"2013-02-20T06:19:11.475Z","type":"quit"}
{"nick":"mikeal","date":"2013-02-20T06:22:15.409Z","type":"join"}
{"nick":"stagas","date":"2013-02-20T06:25:23.048Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 252 seconds","date":"2013-02-20T06:32:45.255Z","type":"quit"}
{"nick":"mikeal","date":"2013-02-20T06:49:26.558Z","type":"join"}
{"nick":"toothr","date":"2013-02-20T06:59:33.146Z","type":"join"}
{"nick":"toothr","reason":"Ping timeout: 260 seconds","date":"2013-02-20T07:16:35.489Z","type":"quit"}
{"nick":"trevnorris","date":"2013-02-20T07:22:52.012Z","type":"join"}
{"nick":"toothr","date":"2013-02-20T07:27:03.109Z","type":"join"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2013-02-20T08:03:35.277Z","type":"quit"}
{"nick":"kazupon","date":"2013-02-20T08:04:06.254Z","type":"join"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2013-02-20T08:07:19.222Z","type":"quit"}
{"nick":"kazupon","date":"2013-02-20T08:07:39.282Z","type":"join"}
{"nick":"toothr","reason":"Ping timeout: 248 seconds","date":"2013-02-20T08:08:01.131Z","type":"quit"}
{"nick":"rendar","date":"2013-02-20T08:08:23.461Z","type":"join"}
{"nick":"toothr","date":"2013-02-20T08:18:03.215Z","type":"join"}
{"nick":"sgallagh","date":"2013-02-20T08:20:19.733Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-02-20T08:20:35.460Z","type":"quit"}
{"nick":"`3rdEden","date":"2013-02-20T08:32:55.987Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-02-20T08:42:48.388Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-02-20T08:54:52.398Z","type":"quit"}
{"nick":"loladiro","date":"2013-02-20T08:57:26.030Z","type":"join"}
{"nick":"benoitc","date":"2013-02-20T09:05:01.407Z","type":"join"}
{"nick":"trevnorris","message":"ircretary: tell bnoordhuis updated GH-4558 with more information about the epoll problem you were helping me with.","date":"2013-02-20T09:09:44.718Z","type":"message"}
{"nick":"ircretary","message":"trevnorris: I'll be sure to tell bnoordhuis","date":"2013-02-20T09:09:45.256Z","type":"message"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-02-20T09:38:08.110Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-02-20T09:38:41.693Z","type":"quit"}
{"nick":"kazupon","date":"2013-02-20T09:41:13.397Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-02-20T09:42:07.110Z","type":"quit"}
{"nick":"indutny","message":"morning","date":"2013-02-20T09:52:27.928Z","type":"message"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-02-20T09:58:55.705Z","type":"nick"}
{"nick":"sgallagh","reason":"Ping timeout: 255 seconds","date":"2013-02-20T10:23:29.543Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-02-20T10:26:00.176Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-02-20T11:10:25.224Z","type":"quit"}
{"nick":"sgallagh","date":"2013-02-20T11:17:08.540Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 255 seconds","date":"2013-02-20T11:18:56.485Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-02-20T11:55:47.465Z","type":"quit"}
{"nick":"benoitc","date":"2013-02-20T12:05:02.621Z","type":"join"}
{"nick":"hz","date":"2013-02-20T12:42:27.434Z","type":"join"}
{"nick":"stagas_","date":"2013-02-20T12:46:55.709Z","type":"join"}
{"nick":"stagas__","date":"2013-02-20T12:48:26.756Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 256 seconds","date":"2013-02-20T12:49:40.018Z","type":"quit"}
{"nick":"stagas_","reason":"Ping timeout: 256 seconds","date":"2013-02-20T12:51:29.177Z","type":"quit"}
{"nick":"stagas__","reason":"Ping timeout: 244 seconds","date":"2013-02-20T12:53:11.046Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-02-20T12:53:21.910Z","type":"join"}
{"nick":"perezd","reason":"Ping timeout: 252 seconds","date":"2013-02-20T12:54:27.226Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-02-20T12:58:51.343Z","type":"quit"}
{"nick":"MI61","message":"\u0002joyent/node:\u0002 \u00033Bert Belder\u000f \u00037master\u000f * \u0002eb29c4b\u0002 : openssl: disable HT sidechannel attack mitigation  It used to be off befo (+1 more commits) - http://git.io/GLRz7A","date":"2013-02-20T12:58:59.680Z","type":"message"}
{"nick":"benoitc","date":"2013-02-20T13:01:04.075Z","type":"join"}
{"nick":"MI61","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u00020dcbecd\u0002 : crypto: fix uninitialized memory access in openssl  ASN1_STRING_to_UTF8() (+1 more commits) - http://git.io/comvTQ","date":"2013-02-20T13:04:07.087Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: hoya","date":"2013-02-20T13:04:48.556Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so I did experiment","date":"2013-02-20T13:04:52.428Z","type":"message"}
{"nick":"indutny","message":"and epoll is affected by thunder effect","date":"2013-02-20T13:05:01.845Z","type":"message"}
{"nick":"indutny","message":"that I was talking about yesterday","date":"2013-02-20T13:05:06.386Z","type":"message"}
{"nick":"indutny","message":"if you're not seeing it - it most definitely mean that connection was accepted before other forks has started epoll_wait","date":"2013-02-20T13:05:36.050Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: heya","date":"2013-02-20T13:06:01.826Z","type":"message"}
{"nick":"bnoordhuis","message":"how did you test it? (executive summary please)","date":"2013-02-20T13:06:10.846Z","type":"message"}
{"nick":"indutny","message":"I've patched my fork-accept repo","date":"2013-02-20T13:06:20.989Z","type":"message"}
{"nick":"indutny","message":"and added 2s sleep() before accept call","date":"2013-02-20T13:06:27.185Z","type":"message"}
{"nick":"indutny","message":"then I added logging before accept call","date":"2013-02-20T13:06:34.730Z","type":"message"}
{"nick":"indutny","message":"and did one connection with curl","date":"2013-02-20T13:06:41.745Z","type":"message"}
{"nick":"indutny","message":"all 24 forks were notified about it","date":"2013-02-20T13:06:46.540Z","type":"message"}
{"nick":"bnoordhuis","message":"ah, like that","date":"2013-02-20T13:06:48.509Z","type":"message"}
{"nick":"indutny","message":"and have tried to accept it","date":"2013-02-20T13:06:50.112Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, that would trigger it","date":"2013-02-20T13:06:53.843Z","type":"message"}
{"nick":"indutny","message":"ok, that's what I call thunder effect :)","date":"2013-02-20T13:07:16.278Z","type":"message"}
{"nick":"indutny","message":"I was thinking about adding some sort of api","date":"2013-02-20T13:07:33.403Z","type":"message"}
{"nick":"bnoordhuis","message":"it mostly works okay in practice because one thread wakes up and consumes the events before the others do","date":"2013-02-20T13:07:36.008Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-02-20T13:07:40.138Z","type":"message"}
{"nick":"indutny","message":"I know","date":"2013-02-20T13:07:42.568Z","type":"message"}
{"nick":"indutny","message":"so API would allow developers to \"sort of\" run accept() in epoll_wait()","date":"2013-02-20T13:08:04.821Z","type":"message"}
{"nick":"perezd","date":"2013-02-20T13:08:23.686Z","type":"join"}
{"nick":"indutny","message":"i.e. epoll_wait() will report availability of listening socket only once per incoming connection","date":"2013-02-20T13:08:29.170Z","type":"message"}
{"nick":"indutny","message":"not to every fork","date":"2013-02-20T13:08:31.770Z","type":"message"}
{"nick":"indutny","message":"this should help us balancing requests between forks","date":"2013-02-20T13:08:54.650Z","type":"message"}
{"nick":"bnoordhuis","message":"eh? you mean it's oneshot?","date":"2013-02-20T13:08:56.281Z","type":"message"}
{"nick":"indutny","message":"yes, sort of","date":"2013-02-20T13:09:02.684Z","type":"message"}
{"nick":"indutny","message":"so its like not level-triggered","date":"2013-02-20T13:09:13.606Z","type":"message"}
{"nick":"indutny","message":"and not really edge-triggered","date":"2013-02-20T13:09:19.780Z","type":"message"}
{"nick":"indutny","message":"because it notifies only one listener of many","date":"2013-02-20T13:09:27.784Z","type":"message"}
{"nick":"indutny","message":"its like epoll_wait() should wait until backlog will be non-empty","date":"2013-02-20T13:10:00.725Z","type":"message"}
{"nick":"indutny","message":"lock, if it's > 0 then decrement it and interrupt, otherwise continue, unlock","date":"2013-02-20T13:10:23.927Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm not sure i follow","date":"2013-02-20T13:10:37.882Z","type":"message"}
{"nick":"indutny","message":"in other words:","date":"2013-02-20T13:10:47.775Z","type":"message"}
{"nick":"indutny","message":"1. server fd has backlog (some integer value)","date":"2013-02-20T13:10:58.130Z","type":"message"}
{"nick":"indutny","message":"2. epoll_wait() should wait until it'll be greater than zero","date":"2013-02-20T13:11:20.591Z","type":"message"}
{"nick":"indutny","message":"3. decrement it and return to user","date":"2013-02-20T13:11:33.554Z","type":"message"}
{"nick":"bnoordhuis","message":"wait, you're talking about a kernel patch?","date":"2013-02-20T13:11:51.421Z","type":"message"}
{"nick":"indutny","message":"4. user should accept connection and run epoll_wait() again","date":"2013-02-20T13:11:54.670Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-02-20T13:11:54.805Z","type":"message"}
{"nick":"indutny","message":"not like I want to change default behaviour","date":"2013-02-20T13:12:02.797Z","type":"message"}
{"nick":"bnoordhuis","message":"hah okay, now it starts making sense","date":"2013-02-20T13:12:03.972Z","type":"message"}
{"nick":"indutny","message":"but it could be implemented under some flags","date":"2013-02-20T13:12:16.853Z","type":"message"}
{"nick":"indutny","message":"I think listen()/accept() model doesn't really fit into all existing polling conventions","date":"2013-02-20T13:12:40.491Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: what do you think?","date":"2013-02-20T13:14:05.459Z","type":"message"}
{"nick":"indutny","message":"I mean, it should be benchmarked and performance improvement should be verified","date":"2013-02-20T13:14:27.833Z","type":"message"}
{"nick":"indutny","message":"but if it's ok... is it a good API?","date":"2013-02-20T13:14:38.331Z","type":"message"}
{"nick":"MI61","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u000257ef659\u0002 : node: code cleanup, make tick_infobox static  It's not used outside of sr - http://git.io/b_CWrQ","date":"2013-02-20T13:15:43.749Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't know, guess i'd have to see it first","date":"2013-02-20T13:15:50.738Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-02-20T13:16:25.451Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-02-20T13:16:27.231Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't quite understand how the backlog makes it different from how it currently works","date":"2013-02-20T13:16:43.829Z","type":"message"}
{"nick":"bnoordhuis","message":"i mean, when epoll_wait wakes up, it's because there's a pending connection","date":"2013-02-20T13:16:54.976Z","type":"message"}
{"nick":"bnoordhuis","message":"i.e. that connection is in the backlog","date":"2013-02-20T13:17:10.419Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-02-20T13:17:15.100Z","type":"message"}
{"nick":"indutny","message":"imagine that backlog=1","date":"2013-02-20T13:17:21.929Z","type":"message"}
{"nick":"indutny","message":"and there're 24 threads waiting for epoll_wait() to return","date":"2013-02-20T13:17:29.665Z","type":"message"}
{"nick":"indutny","message":"in my implementation only one epoll_wait() will return","date":"2013-02-20T13:17:39.594Z","type":"message"}
{"nick":"indutny","message":"and all other won't see this event","date":"2013-02-20T13:17:44.945Z","type":"message"}
{"nick":"indutny","message":"and \"some internal\" epoll's backlog counter will be decremented","date":"2013-02-20T13:18:06.227Z","type":"message"}
{"nick":"bnoordhuis","message":"are you sure EPOLLONESHOT doesn't already do that?","date":"2013-02-20T13:18:42.633Z","type":"message"}
{"nick":"bnoordhuis","action":"checks kernel tree","date":"2013-02-20T13:18:56.997Z","type":"action"}
{"nick":"indutny","message":"hm...","date":"2013-02-20T13:19:09.939Z","type":"message"}
{"nick":"indutny","message":"probably yes","date":"2013-02-20T13:20:21.304Z","type":"message"}
{"nick":"bnoordhuis","message":"a quick glance at fs/eventpoll.c suggests it does","date":"2013-02-20T13:20:36.547Z","type":"message"}
{"nick":"indutny","message":"but not exactly similar to what I've in mind","date":"2013-02-20T13:20:37.036Z","type":"message"}
{"nick":"bnoordhuis","message":"what's the difference?","date":"2013-02-20T13:21:00.834Z","type":"message"}
{"nick":"indutny","message":"well, it should be re-armed now, isn't it?","date":"2013-02-20T13:21:25.211Z","type":"message"}
{"nick":"indutny","message":"and that means other listeners won't see any connections before it","date":"2013-02-20T13:21:37.090Z","type":"message"}
{"nick":"indutny","message":"which will definitely result in performance loss","date":"2013-02-20T13:21:45.035Z","type":"message"}
{"nick":"indutny","message":"oh, btw","date":"2013-02-20T13:21:50.081Z","type":"message"}
{"nick":"indutny","message":"I forgot to mention, I've tried calling blocking accept() in off-thread in libuv","date":"2013-02-20T13:22:09.690Z","type":"message"}
{"nick":"indutny","message":"and performance was awful","date":"2013-02-20T13:22:13.430Z","type":"message"}
{"nick":"indutny","message":"I suppose that was because of synchronization","date":"2013-02-20T13:22:20.544Z","type":"message"}
{"nick":"bnoordhuis","message":"did you profile it? :)","date":"2013-02-20T13:22:40.143Z","type":"message"}
{"nick":"indutny","message":"no, it wasn't really fully working","date":"2013-02-20T13:23:05.875Z","type":"message"}
{"nick":"indutny","message":"there were a lot of subtle problems with it","date":"2013-02-20T13:23:13.032Z","type":"message"}
{"nick":"indutny","message":"like closing socket","date":"2013-02-20T13:23:22.740Z","type":"message"}
{"nick":"indutny","message":"to fully implement it - uv_thread_cancel should be used","date":"2013-02-20T13:23:38.556Z","type":"message"}
{"nick":"indutny","message":"otherwise there're will be either races","date":"2013-02-20T13:23:47.445Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm, seems registry.npmjs.org is down","date":"2013-02-20T13:23:52.649Z","type":"message"}
{"nick":"indutny","message":"or undefined behaviour","date":"2013-02-20T13:23:52.822Z","type":"message"}
{"nick":"indutny","message":"great","date":"2013-02-20T13:23:59.281Z","type":"message"}
{"nick":"indutny","message":"glad, I've a mirror for it","date":"2013-02-20T13:24:07.279Z","type":"message"}
{"nick":"bnoordhuis","message":"ah, thread cancellation - talk about brain damage","date":"2013-02-20T13:24:20.340Z","type":"message"}
{"nick":"indutny","message":"http://isaacs.iriscouch.com/_utils/","date":"2013-02-20T13:24:22.588Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: well, it should be quite safe here","date":"2013-02-20T13:24:30.578Z","type":"message"}
{"nick":"indutny","message":"it will just terminate accept() call","date":"2013-02-20T13:24:40.110Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, no doubt. accept() is a cancellation point","date":"2013-02-20T13:24:48.266Z","type":"message"}
{"nick":"indutny","message":"heh","date":"2013-02-20T13:24:56.891Z","type":"message"}
{"nick":"indutny","message":"its rather complex thing","date":"2013-02-20T13:25:03.562Z","type":"message"}
{"nick":"indutny","message":"and I'm afraid trying to make it work is not worth it","date":"2013-02-20T13:25:11.054Z","type":"message"}
{"nick":"bnoordhuis","message":"still, almost all pthreads implementations have or have had bugs in their cancellation code","date":"2013-02-20T13:25:11.216Z","type":"message"}
{"nick":"indutny","message":"well, anyway","date":"2013-02-20T13:25:21.295Z","type":"message"}
{"nick":"indutny","message":"I'm not working with it anymore","date":"2013-02-20T13:25:35.497Z","type":"message"}
{"nick":"indutny","message":"https://github.com/indutny/libuv/compare/feature-accept-thread","date":"2013-02-20T13:25:50.929Z","type":"message"}
{"nick":"indutny","message":"but if you're interested ^","date":"2013-02-20T13:25:54.295Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: that reminds me, openssl performance","date":"2013-02-20T13:26:20.141Z","type":"message"}
{"nick":"indutny","message":"heh","date":"2013-02-20T13:26:24.184Z","type":"message"}
{"nick":"indutny","message":"btw, I've updated openssl in master","date":"2013-02-20T13:26:28.747Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, i noticed","date":"2013-02-20T13:26:34.243Z","type":"message"}
{"nick":"indutny","message":"and do you mean tls.js performance?","date":"2013-02-20T13:26:41.557Z","type":"message"}
{"nick":"indutny","message":"or openssl?","date":"2013-02-20T13:26:43.502Z","type":"message"}
{"nick":"bnoordhuis","message":"both","date":"2013-02-20T13:26:46.802Z","type":"message"}
{"nick":"indutny","message":"great","date":"2013-02-20T13:26:51.975Z","type":"message"}
{"nick":"indutny","message":"and what's up with openssl?","date":"2013-02-20T13:26:58.212Z","type":"message"}
{"nick":"bnoordhuis","message":"you were experimenting with moving stuff to the threadpool right?","date":"2013-02-20T13:26:58.976Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-02-20T13:27:16.064Z","type":"message"}
{"nick":"indutny","message":"but","date":"2013-02-20T13:27:20.116Z","type":"message"}
{"nick":"indutny","message":"it's hard to tell whether it helped or not","date":"2013-02-20T13:27:28.606Z","type":"message"}
{"nick":"indutny","message":"because","date":"2013-02-20T13:27:29.547Z","type":"message"}
{"nick":"indutny","message":"I do everything in C++ land","date":"2013-02-20T13:27:36.402Z","type":"message"}
{"nick":"indutny","message":"and also","date":"2013-02-20T13:27:45.801Z","type":"message"}
{"nick":"indutny","message":"using my own BIO implementation","date":"2013-02-20T13:27:52.589Z","type":"message"}
{"nick":"indutny","message":"so... if we'll just move our code around and off-load work to threads","date":"2013-02-20T13:28:08.482Z","type":"message"}
{"nick":"indutny","message":"that might not help much","date":"2013-02-20T13:28:16.460Z","type":"message"}
{"nick":"indutny","message":"I guess we should just make tlsnappy as stable as possible","date":"2013-02-20T13:28:32.616Z","type":"message"}
{"nick":"indutny","message":"and then eventually replace tls.js with it","date":"2013-02-20T13:28:37.942Z","type":"message"}
{"nick":"bnoordhuis","message":"offloading computation to other cores should have a positive impact, i imagine","date":"2013-02-20T13:29:01.926Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-02-20T13:29:10.502Z","type":"message"}
{"nick":"indutny","message":"it depends","date":"2013-02-20T13:29:11.797Z","type":"message"}
{"nick":"bnoordhuis","message":"the problem now is that crypt/decrypt blocks the main thread for lengthy periods of time","date":"2013-02-20T13:29:25.907Z","type":"message"}
{"nick":"indutny","message":"you still need a couple of cores to get good rps","date":"2013-02-20T13:29:33.707Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: yes, this adds variance to response times","date":"2013-02-20T13:29:47.217Z","type":"message"}
{"nick":"bnoordhuis","message":"it's something i'd like to address in v0.12","date":"2013-02-20T13:31:02.390Z","type":"message"}
{"nick":"bnoordhuis","message":"i just don't know how yet :/","date":"2013-02-20T13:31:06.641Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-02-20T13:31:10.532Z","type":"message"}
{"nick":"indutny","message":"well, listen to me","date":"2013-02-20T13:31:15.428Z","type":"message"}
{"nick":"indutny","message":"it would be simplier to just pull tlsnappy in","date":"2013-02-20T13:31:20.590Z","type":"message"}
{"nick":"indutny","message":"the code is pretty good ;)","date":"2013-02-20T13:31:25.595Z","type":"message"}
{"nick":"bnoordhuis","message":"what does tlsnappy do that src/node_crypto.cc doesn't?","date":"2013-02-20T13:31:39.255Z","type":"message"}
{"nick":"indutny","message":"off-loading work to threads","date":"2013-02-20T13:31:53.806Z","type":"message"}
{"nick":"indutny","message":"cycling clearOut/encOut in threads","date":"2013-02-20T13:32:05.368Z","type":"message"}
{"nick":"bnoordhuis","message":"right","date":"2013-02-20T13:32:32.610Z","type":"message"}
{"nick":"indutny","message":"everything else is the same","date":"2013-02-20T13:32:45.065Z","type":"message"}
{"nick":"indutny","message":"except I haven't started working on SNI support yet","date":"2013-02-20T13:32:55.449Z","type":"message"}
{"nick":"bnoordhuis","message":"the major issue i see is that you cannot really divine how many threads you should have","date":"2013-02-20T13:33:03.879Z","type":"message"}
{"nick":"bnoordhuis","message":"say you're running on a 16 core machine","date":"2013-02-20T13:33:11.161Z","type":"message"}
{"nick":"bnoordhuis","message":"how many cores are actually available for work?","date":"2013-02-20T13:33:20.284Z","type":"message"}
{"nick":"jmar777","date":"2013-02-20T13:33:42.064Z","type":"join"}
{"nick":"bnoordhuis","message":"maybe we should make it a requirement that node is the only process besides init running on your machine :)","date":"2013-02-20T13:33:42.399Z","type":"message"}
{"nick":"indutny","message":"heh","date":"2013-02-20T13:33:45.009Z","type":"message"}
{"nick":"indutny","message":"yes, context switching","date":"2013-02-20T13:34:01.449Z","type":"message"}
{"nick":"indutny","message":"bad thing","date":"2013-02-20T13:34:04.366Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, balls","date":"2013-02-20T13:34:35.508Z","type":"message"}
{"nick":"bnoordhuis","message":"you could do some ad-hoc sampling with getrusage","date":"2013-02-20T13:34:46.341Z","type":"message"}
{"nick":"bnoordhuis","message":"but that won't be 100% accurate","date":"2013-02-20T13:34:59.695Z","type":"message"}
{"nick":"bnoordhuis","message":"something to ponder while i do the groceries","date":"2013-02-20T13:35:34.563Z","type":"message"}
{"nick":"indutny","message":"unforunatelly, I'm unable to benchmark tlsnappy","date":"2013-02-20T13:35:59.829Z","type":"message"}
{"nick":"indutny","message":"as I don't have any box for doing it","date":"2013-02-20T13:36:04.909Z","type":"message"}
{"nick":"indutny","message":"also, benchmarking https server is quite hard","date":"2013-02-20T13:36:27.499Z","type":"message"}
{"nick":"bnoordhuis","message":"joyent can set you up with machines right?","date":"2013-02-20T13:37:01.821Z","type":"message"}
{"nick":"bnoordhuis","message":"though you'll have to make sure they're physical machines, not virtualized","date":"2013-02-20T13:37:21.205Z","type":"message"}
{"nick":"indutny","message":"нуы","date":"2013-02-20T13:38:10.296Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-02-20T13:38:11.123Z","type":"message"}
{"nick":"indutny","message":"exactly","date":"2013-02-20T13:38:12.413Z","type":"message"}
{"nick":"indutny","message":"it seems to be pretty important for unknown reason","date":"2013-02-20T13:38:29.321Z","type":"message"}
{"nick":"indutny","message":"probably because openssl is using a lot of inlined assembly","date":"2013-02-20T13:38:39.829Z","type":"message"}
{"nick":"indutny","message":"and context switching kills cache","date":"2013-02-20T13:38:51.997Z","type":"message"}
{"nick":"indutny","message":"miserably","date":"2013-02-20T13:38:55.085Z","type":"message"}
{"nick":"indutny","message":"but that's not something I'm sure in","date":"2013-02-20T13:39:09.109Z","type":"message"}
{"nick":"indutny","message":"the thing is that I wasn't able to load 24-core smartos thing","date":"2013-02-20T13:39:22.837Z","type":"message"}
{"nick":"indutny","message":"load was around 30-40%","date":"2013-02-20T13:39:40.045Z","type":"message"}
{"nick":"indutny","message":"of possible maximum","date":"2013-02-20T13:39:45.755Z","type":"message"}
{"nick":"bnoordhuis","message":"duly noted","date":"2013-02-20T13:40:54.456Z","type":"message"}
{"nick":"bnoordhuis","message":"threads are hard, let's go shopping","date":"2013-02-20T13:41:10.397Z","type":"message"}
{"nick":"bnoordhuis","action":"is off to the supermarket","date":"2013-02-20T13:41:14.276Z","type":"action"}
{"nick":"CoverSlide","date":"2013-02-20T13:41:21.261Z","type":"join"}
{"nick":"indutny","message":"yes","date":"2013-02-20T13:42:40.433Z","type":"message"}
{"nick":"txdv","message":"he is here","date":"2013-02-20T13:43:07.449Z","type":"message"}
{"nick":"txdv","message":"And he is gone","date":"2013-02-20T13:43:12.431Z","type":"message"}
{"nick":"txdv","message":"bnoordhuis: do you have time?","date":"2013-02-20T13:43:22.109Z","type":"message"}
{"nick":"bnoordhuis","message":"not now but i'm back in an hour or so","date":"2013-02-20T13:43:46.766Z","type":"message"}
{"nick":"indutny","message":"txdv: closest groceries to ben are in another city","date":"2013-02-20T13:48:26.647Z","type":"message"}
{"nick":"indutny","message":"and since ben is using his bike to get there it takes a lot of time","date":"2013-02-20T13:48:40.163Z","type":"message"}
{"nick":"txdv","message":"so dutch","date":"2013-02-20T13:48:49.026Z","type":"message"}
{"nick":"indutny","message":"thankfuly netherlands is small","date":"2013-02-20T13:48:55.295Z","type":"message"}
{"nick":"indutny","message":"and cities are close to each other","date":"2013-02-20T13:48:59.359Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: is it like 40 km from you to AMS?","date":"2013-02-20T13:49:38.563Z","type":"message"}
{"nick":"txdv","message":"what the fuck","date":"2013-02-20T13:50:10.216Z","type":"message"}
{"nick":"indutny","message":"txdv: https://maps.google.com/maps?q=gouda&hl=en&ll=52.012254,4.708672&spn=0.029267,0.181789&sll=37.0625,-95.677068&sspn=42.310334,93.076172&hnear=Gouda,+South+Holland,+The+Netherlands&t=m&z=13&layer=c&cbll=52.012237,4.70871&panoid=SfqreGqpfhy8Caou_glHlQ&cbp=11,264.31,,0,7.14","date":"2013-02-20T13:51:12.435Z","type":"message"}
{"nick":"txdv","message":"what is this","date":"2013-02-20T13:51:43.409Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: please explain it to me once you'll return","date":"2013-02-20T13:51:50.035Z","type":"message"}
{"nick":"indutny","message":"txdv: idk","date":"2013-02-20T13:51:51.658Z","type":"message"}
{"nick":"indutny","message":"the most scariest thing is that cars are almost in cannal","date":"2013-02-20T13:52:01.731Z","type":"message"}
{"nick":"CoverSlide","message":"a city cheese was named after?","date":"2013-02-20T13:52:07.766Z","type":"message"}
{"nick":"indutny","message":"canal*","date":"2013-02-20T13:52:11.836Z","type":"message"}
{"nick":"indutny","message":"CoverSlide: yes!","date":"2013-02-20T13:52:15.232Z","type":"message"}
{"nick":"indutny","message":"you know that cheese too?","date":"2013-02-20T13:52:21.072Z","type":"message"}
{"nick":"txdv","message":"one bad move and you break your car","date":"2013-02-20T13:52:22.319Z","type":"message"}
{"nick":"indutny","message":"txdv: yeah, obviously","date":"2013-02-20T13:52:28.687Z","type":"message"}
{"nick":"txdv","message":"NO, IT IS NOT OBVIOUS","date":"2013-02-20T13:52:36.942Z","type":"message"}
{"nick":"LOUDBOT","message":"WHY PROVE A POINT THAT EVERYONE ALREADY UNDERSTANDS, YOU IDIOT?","date":"2013-02-20T13:52:37.348Z","type":"message"}
{"nick":"txdv","message":"that markov chain is good","date":"2013-02-20T13:52:49.536Z","type":"message"}
{"nick":"CoverSlide","message":"I'm no cheese expert, but I generally am a fan of most cheeses","date":"2013-02-20T13:53:06.175Z","type":"message"}
{"nick":"txdv","message":"everything with > 10% fat","date":"2013-02-20T13:53:19.827Z","type":"message"}
{"nick":"CoverSlide","message":"I don't think it's a markov chain","date":"2013-02-20T13:53:26.825Z","type":"message"}
{"nick":"CoverSlide","message":"it's just a database of things people have said loudly","date":"2013-02-20T13:54:50.365Z","type":"message"}
{"nick":"CoverSlide","action":"&","date":"2013-02-20T13:54:59.799Z","type":"action"}
{"nick":"LOUDBOT","message":"THERE'S NO LOUDS LIKE APEIRON LOUDS, THEY'RE THE BEST LOUDS THAT I KNOW","date":"2013-02-20T13:55:00.200Z","type":"message"}
{"nick":"CoverSlide","message":"LOUDBOT: whosaid","date":"2013-02-20T13:55:11.848Z","type":"message"}
{"nick":"LOUDBOT","message":"bucknkd in ##church-of-loudbot on freenode","date":"2013-02-20T13:55:12.099Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 248 seconds","date":"2013-02-20T13:58:59.894Z","type":"quit"}
{"nick":"qmx","new_nick":"qmx|brb","date":"2013-02-20T14:06:41.254Z","type":"nick"}
{"nick":"toothr","new_nick":"toothrot","date":"2013-02-20T14:18:11.768Z","type":"nick"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-02-20T14:24:53.007Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-02-20T14:25:02.107Z","type":"join"}
{"nick":"jmar777","date":"2013-02-20T14:25:29.175Z","type":"join"}
{"nick":"jmar777","reason":"Ping timeout: 260 seconds","date":"2013-02-20T14:30:09.999Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 248 seconds","date":"2013-02-20T14:33:37.110Z","type":"quit"}
{"nick":"stagas","date":"2013-02-20T14:37:17.289Z","type":"join"}
{"nick":"csaoh","date":"2013-02-20T14:46:54.009Z","type":"join"}
{"nick":"jmar777","date":"2013-02-20T14:47:36.285Z","type":"join"}
{"nick":"qmx|brb","new_nick":"qmx","date":"2013-02-20T14:52:58.011Z","type":"nick"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-02-20T14:54:04.961Z","type":"quit"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-02-20T14:59:01.663Z","type":"nick"}
{"nick":"txdv","message":"hm","date":"2013-02-20T15:00:53.705Z","type":"message"}
{"nick":"txdv","message":"one hour is over","date":"2013-02-20T15:00:56.453Z","type":"message"}
{"nick":"txdv","message":"where is bnoord","date":"2013-02-20T15:01:00.064Z","type":"message"}
{"nick":"stagas_","date":"2013-02-20T15:03:24.767Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 256 seconds","date":"2013-02-20T15:04:34.387Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-02-20T15:04:48.842Z","type":"nick"}
{"nick":"erickt","date":"2013-02-20T15:09:56.263Z","type":"join"}
{"nick":"erickt","reason":"Client Quit","date":"2013-02-20T15:10:32.314Z","type":"quit"}
{"nick":"erickt","date":"2013-02-20T15:10:56.851Z","type":"join"}
{"nick":"TheJH","date":"2013-02-20T15:19:22.279Z","type":"join"}
{"nick":"erickt_","date":"2013-02-20T15:23:21.476Z","type":"join"}
{"nick":"erickt","reason":"Ping timeout: 276 seconds","date":"2013-02-20T15:23:39.816Z","type":"quit"}
{"nick":"erickt_","new_nick":"erickt","date":"2013-02-20T15:23:40.513Z","type":"nick"}
{"nick":"bnoordhuis","date":"2013-02-20T15:24:48.108Z","type":"join"}
{"nick":"loladiro","date":"2013-02-20T15:25:21.125Z","type":"join"}
{"nick":"bnoordhuis","message":"back","date":"2013-02-20T15:25:39.199Z","type":"message"}
{"nick":"bnoordhuis","message":"hm, i guess you can't rely on os x to keep a connection alive when you're afk","date":"2013-02-20T15:26:16.442Z","type":"message"}
{"nick":"bnoordhuis","message":"txdv: you were saying?","date":"2013-02-20T15:27:59.516Z","type":"message"}
{"nick":"txdv","message":"https://github.com/joyent/libuv/pull/712, https://github.com/joyent/libuv/pull/710","date":"2013-02-20T15:28:37.987Z","type":"message"}
{"nick":"txdv","message":"very simple commits","date":"2013-02-20T15:28:41.890Z","type":"message"}
{"nick":"txdv","message":"and review https://github.com/joyent/libuv/pull/709, https://github.com/joyent/libuv/pull/708","date":"2013-02-20T15:29:25.388Z","type":"message"}
{"nick":"bnoordhuis","message":"actually, i was thinking of changing the types of timeout and repeat to uint64_t","date":"2013-02-20T15:31:24.966Z","type":"message"}
{"nick":"bnoordhuis","message":"negative timeouts / repeats don't make sense anyway","date":"2013-02-20T15:31:38.909Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess we can do that before v0.10","date":"2013-02-20T15:31:44.520Z","type":"message"}
{"nick":"txdv","message":"do it now","date":"2013-02-20T15:31:49.239Z","type":"message"}
{"nick":"txdv","message":"so i can adjust","date":"2013-02-20T15:31:50.837Z","type":"message"}
{"nick":"bnoordhuis","message":"adjust to what?","date":"2013-02-20T15:32:31.970Z","type":"message"}
{"nick":"bnoordhuis","message":"or adjust in a general sense","date":"2013-02-20T15:32:37.942Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-02-20T15:36:19.869Z","type":"quit"}
{"nick":"MI61","message":"\u0002joyent/libuv:\u0002 \u00033Andrius Bentkus\u000f \u00037master\u000f * \u00026bf1a56\u0002 : Return the errorcode provided by uv_set_artificial_error.  This reduces t (+1 more commits) - http://git.io/xdwhYg","date":"2013-02-20T15:37:05.382Z","type":"message"}
{"nick":"erickt","reason":"Quit: erickt","date":"2013-02-20T15:38:18.631Z","type":"quit"}
{"nick":"benoitc","date":"2013-02-20T15:40:07.213Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-02-20T15:51:33.495Z","type":"quit"}
{"nick":"loladiro","date":"2013-02-20T15:52:15.816Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-02-20T15:54:51.571Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-02-20T15:57:05.690Z","type":"join"}
