{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-09-23T00:00:00.532Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #191 \u00034FAILURE\u000f windows-x64 (3/195) smartos-ia32 (2/194) windows-ia32 (4/195) linux-x64 (1/194) smartos-x64 (2/194) http://jenkins.nodejs.org/job/libuv-master-gyp/191/","date":"2013-09-23T00:00:08.653Z","type":"message"}
{"nick":"ircretary","date":"2013-09-23T00:00:09.337Z","type":"join"}
{"nick":"dshaw_","reason":"Ping timeout: 245 seconds","date":"2013-09-23T00:00:25.122Z","type":"quit"}
{"nick":"Ralt","reason":"*.net *.split","date":"2013-09-23T00:23:58.791Z","type":"quit"}
{"nick":"creationix","reason":"*.net *.split","date":"2013-09-23T00:23:59.452Z","type":"quit"}
{"nick":"Damn3d","reason":"*.net *.split","date":"2013-09-23T00:23:59.452Z","type":"quit"}
{"nick":"chobie4","reason":"*.net *.split","date":"2013-09-23T00:23:59.672Z","type":"quit"}
{"nick":"Damn3d","date":"2013-09-23T00:33:18.248Z","type":"join"}
{"nick":"hz","date":"2013-09-23T00:35:08.537Z","type":"quit"}
{"nick":"AvianFlu","reason":"Read error: Connection reset by peer","date":"2013-09-23T00:46:24.156Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-09-23T00:47:02.873Z","type":"join"}
{"nick":"dshaw_","date":"2013-09-23T00:55:36.650Z","type":"join"}
{"nick":"dshaw_","reason":"Ping timeout: 264 seconds","date":"2013-09-23T01:05:16.446Z","type":"quit"}
{"nick":"amartens","date":"2013-09-23T01:50:54.949Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 260 seconds","date":"2013-09-23T01:55:27.846Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-09-23T01:55:49.258Z","type":"join"}
{"nick":"dshaw_","date":"2013-09-23T02:01:15.026Z","type":"join"}
{"nick":"dshaw_","reason":"Ping timeout: 264 seconds","date":"2013-09-23T02:06:14.803Z","type":"quit"}
{"nick":"AvianFlu","reason":"Read error: Connection reset by peer","date":"2013-09-23T02:16:30.329Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-09-23T02:17:12.159Z","type":"join"}
{"nick":"Ralt","date":"2013-09-23T02:17:28.710Z","type":"join"}
{"nick":"creationix","date":"2013-09-23T02:17:28.710Z","type":"join"}
{"nick":"othiym23","message":"this has been my most Node-free weekend in months, and it feels both good and like I need to get my ass back in gear","date":"2013-09-23T02:23:16.473Z","type":"message"}
{"nick":"othiym23","message":"so I guess it's served its weekendy puprose","date":"2013-09-23T02:23:23.419Z","type":"message"}
{"nick":"tjfontaine","message":"well rested?","date":"2013-09-23T02:23:39.008Z","type":"message"}
{"nick":"othiym23","message":"almost!","date":"2013-09-23T02:24:00.064Z","type":"message"}
{"nick":"tjfontaine","message":":)","date":"2013-09-23T02:24:17.100Z","type":"message"}
{"nick":"othiym23","message":"so I'm blathering on a Node ticket (#6254) about how evaluating modules inside vm contexts isn't gonna happen because it's slow and I was curious if I was talking a big load of BS","date":"2013-09-23T02:25:07.425Z","type":"message"}
{"nick":"tjfontaine","message":"no that's still true, and probably especially more so in vm2 at the moment","date":"2013-09-23T02:25:32.800Z","type":"message"}
{"nick":"othiym23","message":"(leaving aside, for the time being, that what the OP is asking for is not as hugely disruptive as it would actually be)","date":"2013-09-23T02:25:52.079Z","type":"message"}
{"nick":"tjfontaine","message":"it's a slightly interesting idea","date":"2013-09-23T02:26:29.486Z","type":"message"}
{"nick":"othiym23","message":"it is, and maybe I'd be more sympathetic to it if I weren't so entrenched in the node worldview, but a module closure's a not equalling global.a just doesn't feel like an actuall issue to me","date":"2013-09-23T02:27:32.169Z","type":"message"}
{"nick":"othiym23","message":"nor does exposing __dirname__ et al via arguments","date":"2013-09-23T02:27:47.204Z","type":"message"}
{"nick":"othiym23","message":"not to mention that every NOde module I write starts with 'use strict', so I never even see arguments.callee","date":"2013-09-23T02:28:12.754Z","type":"message"}
{"nick":"othiym23","message":"if I can do all the crazy shit I do without it, I submit it's probably not necessary except for things you shouldn't be doing anyway, but I'm not the lord of npm","date":"2013-09-23T02:28:42.260Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: how would mutual requre() work if the modules were weing evaluated inside contexts? would nothing change?","date":"2013-09-23T02:29:51.208Z","type":"message"}
{"nick":"othiym23","message":"seems like the current implementation depends on each module having its own isolated (closure) scope, with global being a universal escape hatch","date":"2013-09-23T02:30:34.547Z","type":"message"}
{"nick":"tjfontaine","message":"maybe I'm confused, are we talking about something like NODE_MODULE_CONTEXTS","date":"2013-09-23T02:31:23.286Z","type":"message"}
{"nick":"othiym23","message":"so you'd have to evaluate each module in its own context, passing the shared global to each of them, which seems semantically different from how it works now","date":"2013-09-23T02:31:25.360Z","type":"message"}
{"nick":"othiym23","message":"it's not really clear to me what the OP wants, except for the runtime to work more like the REPL","date":"2013-09-23T02:31:53.245Z","type":"message"}
{"nick":"tjfontaine","message":"right, that's what it sounds like as well","date":"2013-09-23T02:32:03.223Z","type":"message"}
{"nick":"othiym23","message":"and the node REPL doesn't really strike me as being much like, say, a scheme REPL, where you're more or less guaranteed to have the REPL and runtime behavior kept identical","date":"2013-09-23T02:33:10.868Z","type":"message"}
{"nick":"othiym23","message":"node's REPL doesn't have subcontexts for dealing with errors, for instance","date":"2013-09-23T02:33:38.533Z","type":"message"}
{"nick":"TooTallNate","date":"2013-09-23T02:35:01.093Z","type":"join"}
{"nick":"TooTallNate","reason":"Client Quit","date":"2013-09-23T02:35:07.880Z","type":"quit"}
{"nick":"chobie4","date":"2013-09-23T02:39:21.161Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-09-23T02:47:54.912Z","type":"quit"}
{"nick":"amartens","date":"2013-09-23T02:51:19.955Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 260 seconds","date":"2013-09-23T02:55:39.883Z","type":"quit"}
{"nick":"dshaw_","date":"2013-09-23T03:01:56.953Z","type":"join"}
{"nick":"dshaw_","reason":"Ping timeout: 260 seconds","date":"2013-09-23T03:06:23.916Z","type":"quit"}
{"nick":"AvianFlu","reason":"Read error: Connection reset by peer","date":"2013-09-23T03:17:18.600Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-09-23T03:17:59.428Z","type":"join"}
{"nick":"julianduque","date":"2013-09-23T03:34:42.582Z","type":"join"}
{"nick":"amartens","date":"2013-09-23T03:51:36.414Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 256 seconds","date":"2013-09-23T03:55:57.521Z","type":"quit"}
{"nick":"dshaw_","date":"2013-09-23T04:02:49.582Z","type":"join"}
{"nick":"dshaw_1","date":"2013-09-23T04:06:45.102Z","type":"join"}
{"nick":"dshaw_","reason":"Ping timeout: 276 seconds","date":"2013-09-23T04:07:36.372Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-09-23T04:19:42.187Z","type":"quit"}
{"nick":"mikeal","date":"2013-09-23T04:25:48.334Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-09-23T04:32:49.058Z","type":"quit"}
{"nick":"dominictarr","date":"2013-09-23T04:45:01.605Z","type":"join"}
{"nick":"amartens","date":"2013-09-23T04:51:54.161Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 245 seconds","date":"2013-09-23T04:56:23.161Z","type":"quit"}
{"nick":"julianduque","reason":"Quit: leaving","date":"2013-09-23T04:58:38.249Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-09-23T05:17:39.067Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-09-23T05:22:53.777Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-09-23T05:23:20.708Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-09-23T05:37:19.756Z","type":"quit"}
{"nick":"amartens","date":"2013-09-23T05:52:14.943Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 260 seconds","date":"2013-09-23T05:56:43.840Z","type":"quit"}
{"nick":"bajtos","date":"2013-09-23T06:03:00.915Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-09-23T06:22:59.919Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-09-23T06:30:10.860Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #222 \u00037UNSTABLE\u000f windows-ia32 (9/600) windows-x64 (8/600) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/222/","date":"2013-09-23T06:45:01.217Z","type":"message"}
{"nick":"hz","date":"2013-09-23T06:48:26.747Z","type":"join"}
{"nick":"dshaw_1","reason":"Quit: Leaving.","date":"2013-09-23T06:50:22.688Z","type":"quit"}
{"nick":"dshaw_","date":"2013-09-23T06:51:12.825Z","type":"join"}
{"nick":"amartens","date":"2013-09-23T06:52:34.613Z","type":"join"}
{"nick":"dshaw_","reason":"Ping timeout: 264 seconds","date":"2013-09-23T06:56:02.776Z","type":"quit"}
{"nick":"amartens","reason":"Ping timeout: 245 seconds","date":"2013-09-23T06:56:41.621Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-09-23T07:16:38.942Z","type":"nick"}
{"nick":"dshaw_","date":"2013-09-23T07:24:03.403Z","type":"join"}
{"nick":"dshaw_","reason":"Read error: Connection reset by peer","date":"2013-09-23T07:25:19.791Z","type":"quit"}
{"nick":"dshaw_","date":"2013-09-23T07:25:26.333Z","type":"join"}
{"nick":"amartens","date":"2013-09-23T07:52:56.969Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 240 seconds","date":"2013-09-23T07:57:02.602Z","type":"quit"}
{"nick":"hueniverse","reason":"Quit: Leaving.","date":"2013-09-23T07:59:57.857Z","type":"quit"}
{"nick":"dominictarr","date":"2013-09-23T08:11:26.261Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-09-23T08:20:51.704Z","type":"quit"}
{"nick":"dominictarr","date":"2013-09-23T08:43:17.146Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-09-23T08:46:56.777Z","type":"join"}
{"nick":"tooxie","date":"2013-09-23T08:50:19.462Z","type":"join"}
{"nick":"rendar","date":"2013-09-23T08:50:59.072Z","type":"join"}
{"nick":"amartens","date":"2013-09-23T08:53:15.313Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 256 seconds","date":"2013-09-23T08:57:44.330Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Bert Belder\u000f \u00037master\u000f * \u0002eba3cbb\u0002 : Update readme - http://git.io/tVd9IA","date":"2013-09-23T09:18:55.618Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-09-23T09:21:28.603Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: you signed it off","date":"2013-09-23T09:22:02.253Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but I think this commit log is totally fine","date":"2013-09-23T09:22:12.810Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but feel free to make use of the 5 minute rule","date":"2013-09-23T09:23:05.802Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #192 \u00034FAILURE\u000f windows-x64 (3/195) smartos-ia32 (2/194) windows-ia32 (3/195) smartos-x64 (2/194) http://jenkins.nodejs.org/job/libuv-master-gyp/192/","date":"2013-09-23T09:23:33.712Z","type":"message"}
{"nick":"saghul","message":"when is the 0.12 window closing? I wanted to try and get something for 0.12 but I'm not sure I'll have the time...","date":"2013-09-23T09:31:38.207Z","type":"message"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2013-09-23T09:35:14.772Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Bert Belder\u000f \u00037master\u000f * \u0002581e8c9\u0002 : doc: update readme - http://git.io/ZfB6BQ","date":"2013-09-23T09:38:13.977Z","type":"message"}
{"nick":"bnoordhuis","message":"bam!","date":"2013-09-23T09:38:17.649Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: what are you working on?","date":"2013-09-23T09:38:24.550Z","type":"message"}
{"nick":"saghul","message":"I wanted to have uv_fsevent and uv_fspoll have the same API","date":"2013-09-23T09:38:47.589Z","type":"message"}
{"nick":"saghul","message":"so uv_fsevent_start / stop","date":"2013-09-23T09:38:53.812Z","type":"message"}
{"nick":"bnoordhuis","message":"ah, okay","date":"2013-09-23T09:39:01.275Z","type":"message"}
{"nick":"bnoordhuis","message":"i was thinking of starting the unofficial code freeze this week, actually :)","date":"2013-09-23T09:39:20.078Z","type":"message"}
{"nick":"bnoordhuis","message":"a lot depends on the releasability of node though. i'm not sure if we're there yet","date":"2013-09-23T09:39:39.236Z","type":"message"}
{"nick":"saghul","message":"ok, I'll try to get it bay the end of the week then :-)","date":"2013-09-23T09:39:47.640Z","type":"message"}
{"nick":"saghul","message":"*by","date":"2013-09-23T09:39:51.566Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #193 \u00034FAILURE\u000f windows-x64 (3/195) smartos-ia32 (2/194) windows-ia32 (3/195) smartos-x64 (2/194) http://jenkins.nodejs.org/job/libuv-master-gyp/193/","date":"2013-09-23T09:42:49.118Z","type":"message"}
{"nick":"bnoordhuis","message":"ah, jenkins is broken again...","date":"2013-09-23T09:47:29.751Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: uv_fs_truncate lgtm if it works","date":"2013-09-23T09:48:37.927Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: +1 for doing the windows stuff. Did you actually test it?","date":"2013-09-23T09:48:52.285Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: or are you using the \"hope\" strategy?","date":"2013-09-23T09:49:18.094Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 248 seconds","date":"2013-09-23T09:52:59.817Z","type":"quit"}
{"nick":"amartens","date":"2013-09-23T09:53:33.381Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 276 seconds","date":"2013-09-23T09:58:36.377Z","type":"quit"}
{"nick":"Kakera","date":"2013-09-23T10:03:20.828Z","type":"join"}
{"nick":"dshaw_","date":"2013-09-23T10:06:01.855Z","type":"join"}
{"nick":"dshaw_1","date":"2013-09-23T10:07:45.558Z","type":"join"}
{"nick":"dshaw_","reason":"Read error: Connection reset by peer","date":"2013-09-23T10:07:45.769Z","type":"quit"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-09-23T10:11:14.636Z","type":"quit"}
{"nick":"dshaw_1","reason":"Ping timeout: 256 seconds","date":"2013-09-23T10:12:32.251Z","type":"quit"}
{"nick":"indutny","message":"ohai","date":"2013-09-23T10:23:02.030Z","type":"message"}
{"nick":"indutny","message":"howdy?","date":"2013-09-23T10:23:04.351Z","type":"message"}
{"nick":"dshaw_","date":"2013-09-23T10:37:50.347Z","type":"join"}
{"nick":"dshaw_","reason":"Ping timeout: 252 seconds","date":"2013-09-23T10:47:00.235Z","type":"quit"}
{"nick":"amartens","date":"2013-09-23T10:53:55.374Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 276 seconds","date":"2013-09-23T10:59:03.376Z","type":"quit"}
{"nick":"`3E","new_nick":"`3E|BRB","date":"2013-09-23T11:14:41.697Z","type":"nick"}
{"nick":"julianduque","date":"2013-09-23T11:51:58.922Z","type":"join"}
{"nick":"amartens","date":"2013-09-23T11:54:14.926Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 246 seconds","date":"2013-09-23T11:58:31.915Z","type":"quit"}
{"nick":"julianduque","reason":"Quit: leaving","date":"2013-09-23T12:01:18.844Z","type":"quit"}
{"nick":"felixge","date":"2013-09-23T12:12:09.026Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-09-23T12:12:09.026Z","type":"quit"}
{"nick":"felixge","date":"2013-09-23T12:12:09.026Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-09-23T12:28:46.846Z","type":"join"}
{"nick":"bnoordhuis","message":"and back","date":"2013-09-23T12:28:58.476Z","type":"message"}
{"nick":"bnoordhuis","message":"hrm, is github.com:443 down?","date":"2013-09-23T12:32:19.078Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, not just website apparently","date":"2013-09-23T12:32:41.035Z","type":"message"}
{"nick":"bnoordhuis","message":"and back again","date":"2013-09-23T12:37:21.485Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u000275ea566\u0002 : src: fix v8 PRNG entropy seeding - http://git.io/ZPfCgQ","date":"2013-09-23T12:37:27.551Z","type":"message"}
{"nick":"`3E|BRB","new_nick":"`3rdEden","date":"2013-09-23T12:39:56.227Z","type":"nick"}
{"nick":"Kakera","reason":"Ping timeout: 248 seconds","date":"2013-09-23T12:41:31.833Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #569 \u00034FAILURE\u000f smartos-ia32 (1/641) smartos-x64 (5/641) http://jenkins.nodejs.org/job/nodejs-master/569/","date":"2013-09-23T12:47:07.697Z","type":"message"}
{"nick":"Kakera","date":"2013-09-23T12:50:15.222Z","type":"join"}
{"nick":"amartens","date":"2013-09-23T12:54:33.263Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-09-23T12:59:02.772Z","type":"quit"}
{"nick":"amartens","reason":"Read error: Operation timed out","date":"2013-09-23T12:59:20.141Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-master-windows\u0002: #363 \u00037UNSTABLE\u000f windows-x64 (20/641) windows-ia32 (21/641) http://jenkins.nodejs.org/job/nodejs-master-windows/363/","date":"2013-09-23T12:59:34.929Z","type":"message"}
{"nick":"jmar777","date":"2013-09-23T13:21:15.542Z","type":"join"}
{"nick":"bajtos","date":"2013-09-23T13:27:30.369Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 264 seconds","date":"2013-09-23T13:28:04.411Z","type":"quit"}
{"nick":"dshaw_","date":"2013-09-23T13:44:36.387Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-09-23T13:45:09.197Z","type":"join"}
{"nick":"bajtos","message":"bnoordhuis: is there a way how to run require('net') from a script injected via V8 debugger? (This means the script is not running inside a require() wrapper that exposes a local variable called require.)","date":"2013-09-23T13:47:24.430Z","type":"message"}
{"nick":"bajtos","message":"I was thinking about `global.module.require`, but will is `global.module` always defined?","date":"2013-09-23T13:47:51.473Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: no. neither is global","date":"2013-09-23T13:48:43.537Z","type":"message"}
{"nick":"dshaw_","reason":"Ping timeout: 245 seconds","date":"2013-09-23T13:48:45.132Z","type":"quit"}
{"nick":"bajtos","message":"bnoordhuis: Hmm, that's bad.","date":"2013-09-23T13:49:04.153Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: What's my goal: we want to instrument console.log, so that it sends a copy of all log messages to Node Inspector backend","date":"2013-09-23T13:49:27.732Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: it depends on where exactly you inject the script","date":"2013-09-23T13:49:54.113Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: To do that, we need to inject the instrumenting code to the running process using V8 debugger protocol","date":"2013-09-23T13:49:59.998Z","type":"message"}
{"nick":"bnoordhuis","message":"as a wise man once said, context is everything","date":"2013-09-23T13:50:03.401Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: yes, of course","date":"2013-09-23T13:50:11.148Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: so the current approach is to inject an artificial breakpoint and inject the instrumenting code when the breakpoint is hit","date":"2013-09-23T13:50:31.515Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-09-23T13:50:41.904Z","type":"join"}
{"nick":"bajtos","message":"bnoordhuis: which seem like unnecessary complication to me.","date":"2013-09-23T13:50:47.949Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: what would you propose? the thing with 'global' is that it may be shadowed by a local variable with the same name","date":"2013-09-23T13:51:16.963Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: Is there a good reason why require() and/or Module() and/or NativeModule() is not exposed as a global variable?","date":"2013-09-23T13:51:18.142Z","type":"message"}
{"nick":"bnoordhuis","message":"require is a function that's passed to a module, i.e. it's for all practical purposes a local var","date":"2013-09-23T13:51:57.977Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: well, if there is always one implementation of require() used in node, then shadowing is not a big problem, right?","date":"2013-09-23T13:52:01.637Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: even if it was, you can always workaround by calling explicitly `global.require`, right?","date":"2013-09-23T13:52:25.366Z","type":"message"}
{"nick":"bnoordhuis","message":"no, what i mean is this -> (function() { var global = { foo: 42 }; ... })()","date":"2013-09-23T13:52:26.684Z","type":"message"}
{"nick":"bnoordhuis","message":"if you inject your code inside that function, it'll pick up the wrong global","date":"2013-09-23T13:52:46.692Z","type":"message"}
{"nick":"bajtos","message":"oh. bugger","date":"2013-09-23T13:52:58.898Z","type":"message"}
{"nick":"bajtos","message":"well","date":"2013-09-23T13:54:36.402Z","type":"message"}
{"nick":"amartens","date":"2013-09-23T13:54:53.582Z","type":"join"}
{"nick":"bajtos","message":"if I execute the injected code in the global context (i.e. not in the scope of a particular call frame)","date":"2013-09-23T13:55:03.036Z","type":"message"}
{"nick":"bajtos","message":"then the global variables (incl. global itself) cannot be shadowed, is that assumption correct?","date":"2013-09-23T13:55:44.404Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: yes, that's correct. someone could've monkey-patched or stamped on it, of course","date":"2013-09-23T13:56:52.109Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: yes, but that's an acceptable risk","date":"2013-09-23T13:57:17.118Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: so here is my proposal: expose require() on the global object (in addition to the local variable passed into required() scripts)","date":"2013-09-23T13:58:14.131Z","type":"message"}
{"nick":"bajtos","message":"btw this seems what's happening now when you require a script","date":"2013-09-23T13:58:33.410Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: not necessary, it's already there. try this: node -p 'global.module.require(\"net\")'","date":"2013-09-23T13:58:39.294Z","type":"message"}
{"nick":"amartens","reason":"Ping timeout: 240 seconds","date":"2013-09-23T13:59:02.566Z","type":"quit"}
{"nick":"bajtos","message":"bnoordhuis: that's because the code behind '-p' is run from a module","date":"2013-09-23T14:00:12.473Z","type":"message"}
{"nick":"bajtos","message":"see lib/module.js: ~407: sandbox.require = require","date":"2013-09-23T14:00:40.151Z","type":"message"}
{"nick":"bajtos","message":"sandbox.module = self","date":"2013-09-23T14:00:49.304Z","type":"message"}
{"nick":"bajtos","message":"and for the root module (few lines below)","date":"2013-09-23T14:01:01.410Z","type":"message"}
{"nick":"bajtos","message":"global.module = self","date":"2013-09-23T14:01:06.767Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, you mean it's not defined when run as a script","date":"2013-09-23T14:01:09.373Z","type":"message"}
{"nick":"bajtos","message":"yes, when I run an arbitrary script via V8 debugger API inside the node process","date":"2013-09-23T14:01:28.250Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: it's the request 'evaluate' to be more specific","date":"2013-09-23T14:02:06.607Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: don't tell anyone but you can force that with `NODE_MODULE_CONTEXTS=1 node script.js`","date":"2013-09-23T14:02:53.783Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: well, I don't want to tell people to use that thing when they want to debug using Node Inspector","date":"2013-09-23T14:03:24.092Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm not against exposing the module object per se but...","date":"2013-09-23T14:03:36.093Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: I didn't realise the code I pointed to was wrapped by NODE_MODULE_CONTEXTS, hmm. ","date":"2013-09-23T14:04:48.165Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: well, if there isn't an acceptable way how to expose the module object then we will have to use the workaround where console.log triggers a breakpoint so that we can run the injection from inside a module context","date":"2013-09-23T14:06:52.698Z","type":"message"}
{"nick":"bnoordhuis","message":"the thing with exposing the module object is: what module object exactly?","date":"2013-09-23T14:07:56.641Z","type":"message"}
{"nick":"bnoordhuis","message":"btw, what's the downside of a console.log breakpoint? seems reasonably elegant to me","date":"2013-09-23T14:08:18.501Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: what to expose - require() is good enough for me. Alternative: expose the main module of the process, e.g. via 'global.process.main' or 'global.process.mainModule'?","date":"2013-09-23T14:09:41.826Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: downside of breakpoint is that you have to watch for this breakpoint in the node inspector, inject the source then, plus you want to remove the breakpoint so that it is not hit anymore","date":"2013-09-23T14:10:21.576Z","type":"message"}
{"nick":"bnoordhuis","message":"and? i don't see an issue with that","date":"2013-09-23T14:10:46.533Z","type":"message"}
{"nick":"bnoordhuis","message":"if that's all it takes, then there's no need to change node","date":"2013-09-23T14:11:06.369Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: and I don't know an exact location of the breakpoint, which makes things harder","date":"2013-09-23T14:11:26.625Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: oh","date":"2013-09-23T14:11:41.287Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: so we can actually inject the code when any breakpoint was triggered","date":"2013-09-23T14:11:55.805Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, exactly","date":"2013-09-23T14:12:29.184Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: btw here is the pull request that started my thinking about the problem: https://github.com/node-inspector/node-inspector/pull/219","date":"2013-09-23T14:12:35.071Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: and since the breakpoint is set via 'debugger;' statement, we can replace the 'debugger;' version of console.log with the version that reports logs to Node Inspector.","date":"2013-09-23T14:13:15.236Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: ok, I agree that's not a bad solution","date":"2013-09-23T14:13:22.437Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: thanks!","date":"2013-09-23T14:13:33.004Z","type":"message"}
{"nick":"bnoordhuis","message":"nice :)","date":"2013-09-23T14:13:35.576Z","type":"message"}
{"nick":"c4milo","date":"2013-09-23T14:19:59.715Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus_: hubertus, what are you working on?","date":"2013-09-23T14:23:15.658Z","type":"message"}
{"nick":"dshaw_","date":"2013-09-23T14:32:24.620Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-09-23T14:34:30.474Z","type":"quit"}
{"nick":"piscisaureus_","message":"bnoordhuis: I'm cornering the harkonnen harvester","date":"2013-09-23T14:35:36.786Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: you?","date":"2013-09-23T14:36:01.557Z","type":"message"}
{"nick":"dshaw_","reason":"Read error: Operation timed out","date":"2013-09-23T14:36:03.825Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-09-23T14:36:20.568Z","type":"quit"}
{"nick":"piscisaureus_","message":"bnoordhuis: did you see my text about r+ open mode and uv_fs_truncate?","date":"2013-09-23T14:36:45.997Z","type":"message"}
{"nick":"AvianFlu","date":"2013-09-23T14:47:19.385Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-09-23T14:49:54.301Z","type":"quit"}
{"nick":"kenperkins","date":"2013-09-23T14:54:43.273Z","type":"join"}
{"nick":"amartens","date":"2013-09-23T14:55:11.167Z","type":"join"}
{"nick":"c4milo","date":"2013-09-23T14:57:00.872Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 245 seconds","date":"2013-09-23T14:59:18.168Z","type":"quit"}
{"nick":"julianduque","date":"2013-09-23T14:59:47.947Z","type":"join"}
{"nick":"bradleymeck","date":"2013-09-23T15:05:18.629Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #570 \u00034FAILURE\u000f smartos-ia32 (1/641) smartos-x64 (6/641) http://jenkins.nodejs.org/job/nodejs-master/570/","date":"2013-09-23T15:18:22.411Z","type":"message"}
{"nick":"tooxie","reason":"Ping timeout: 252 seconds","date":"2013-09-23T15:19:15.281Z","type":"quit"}
{"nick":"tooxie","date":"2013-09-23T15:20:02.048Z","type":"join"}
{"nick":"dominictarr","date":"2013-09-23T15:31:30.172Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 245 seconds","date":"2013-09-23T15:31:41.659Z","type":"quit"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-09-23T15:32:16.129Z","type":"quit"}
{"nick":"`3rdEden","new_nick":"`3E|FOOD","date":"2013-09-23T15:34:50.873Z","type":"nick"}
{"nick":"julianduque","reason":"Quit: leaving","date":"2013-09-23T15:37:29.962Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-09-23T15:39:27.162Z","type":"join"}
{"nick":"mikeal","date":"2013-09-23T15:47:59.859Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-09-23T15:56:21.172Z","type":"join"}
{"nick":"amartens","date":"2013-09-23T15:57:14.811Z","type":"join"}
