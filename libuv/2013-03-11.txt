{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-03-11T00:00:01.400Z","type":"quit"}
{"nick":"ircretary","date":"2013-03-11T00:00:08.580Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-11T00:06:11.703Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-11T00:08:11.596Z","type":"join"}
{"nick":"`3rdEden","date":"2013-03-11T00:12:44.324Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 248 seconds","date":"2013-03-11T00:12:49.394Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f created branch v0.10.0-release - http://git.io/R5Oaug","date":"2013-03-11T00:13:27.161Z","type":"message"}
{"nick":"`3rdEden","reason":"Ping timeout: 250 seconds","date":"2013-03-11T00:21:14.070Z","type":"quit"}
{"nick":"loladiro","date":"2013-03-11T00:21:32.359Z","type":"join"}
{"nick":"mikeal","date":"2013-03-11T00:21:46.230Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-03-11T00:24:51.966Z","type":"quit"}
{"nick":"isaacs","message":"asdf12: what's your name?","date":"2013-03-11T00:34:27.325Z","type":"message"}
{"nick":"isaacs","message":"asdf12: that is, what would you like to be in the \"AUTHORS\" file in node?","date":"2013-03-11T00:35:20.930Z","type":"message"}
{"nick":"isaacs","message":"asdf12: oh, i forgot i have it in the CLA signers file.  nvm :)","date":"2013-03-11T00:35:56.211Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037v0.10.0-release\u000f * \u0002163ca27\u0002 : 2013.03.11, Version 0.10.0 (Stable)  * npm: Upgrade to 1.2.14  * core: Ap - http://git.io/3sKc1A","date":"2013-03-11T00:38:54.740Z","type":"message"}
{"nick":"dostoyev1ky","date":"2013-03-11T00:39:21.357Z","type":"join"}
{"nick":"stephank_","date":"2013-03-11T00:39:35.008Z","type":"join"}
{"nick":"rvagg_","date":"2013-03-11T00:43:07.520Z","type":"join"}
{"nick":"rvagg","reason":"*.net *.split","date":"2013-03-11T00:44:17.580Z","type":"quit"}
{"nick":"benoitc","reason":"*.net *.split","date":"2013-03-11T00:44:17.792Z","type":"quit"}
{"nick":"dostoyevsky","reason":"*.net *.split","date":"2013-03-11T00:44:18.001Z","type":"quit"}
{"nick":"stephank","reason":"*.net *.split","date":"2013-03-11T00:44:18.001Z","type":"quit"}
{"nick":"DrPizza","reason":"*.net *.split","date":"2013-03-11T00:44:18.210Z","type":"quit"}
{"nick":"rvagg_","new_nick":"rvagg","date":"2013-03-11T00:44:19.030Z","type":"nick"}
{"nick":"stephank_","new_nick":"stephank","date":"2013-03-11T00:44:19.240Z","type":"nick"}
{"nick":"benoitc","date":"2013-03-11T00:48:22.084Z","type":"join"}
{"nick":"isaacs","message":"building binaries","date":"2013-03-11T00:49:41.596Z","type":"message"}
{"nick":"DrPizza","date":"2013-03-11T00:52:55.878Z","type":"join"}
{"nick":"kazupon","date":"2013-03-11T01:08:54.959Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 240 seconds","date":"2013-03-11T01:15:04.757Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-11T01:22:29.282Z","type":"join"}
{"nick":"abraxas","date":"2013-03-11T01:36:43.895Z","type":"join"}
{"nick":"c4milo","date":"2013-03-11T01:38:53.534Z","type":"join"}
{"nick":"dominictarr","date":"2013-03-11T01:44:40.571Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-11T02:10:19.000Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-11T02:17:49.826Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-03-11T02:18:40.624Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-11T02:19:46.745Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-11T02:23:09.829Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-11T02:24:08.633Z","type":"join"}
{"nick":"ryah","date":"2013-03-11T02:24:31.013Z","type":"join"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-03-11T02:31:13.331Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-11T03:05:39.165Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-11T03:05:52.343Z","type":"join"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-03-11T03:06:23.964Z","type":"nick"}
{"nick":"qmx","reason":"Excess Flood","date":"2013-03-11T03:06:28.970Z","type":"quit"}
{"nick":"qmx","date":"2013-03-11T03:10:19.726Z","type":"join"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-03-11T03:10:50.416Z","type":"nick"}
{"nick":"kevireilly","date":"2013-03-11T03:29:36.561Z","type":"join"}
{"nick":"brson","date":"2013-03-11T03:34:17.378Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-11T03:38:09.688Z","type":"quit"}
{"nick":"kevireilly","reason":"Remote host closed the connection","date":"2013-03-11T03:53:23.096Z","type":"quit"}
{"nick":"kevireilly","date":"2013-03-11T03:53:47.350Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 255 seconds","date":"2013-03-11T04:03:47.350Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-11T04:11:50.452Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-11T04:12:23.851Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-11T04:30:23.583Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-11T04:30:35.477Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-11T04:46:09.706Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-03-11T04:47:16.721Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-11T05:14:43.072Z","type":"join"}
{"nick":"pquerna","message":"wolfeidau: i mean, at some level, its called a compacting garbage collector :)","date":"2013-03-11T05:16:51.519Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 245 seconds","date":"2013-03-11T05:19:09.890Z","type":"quit"}
{"nick":"isaacs","message":"pquerna: that's awesome;","date":"2013-03-11T05:26:15.381Z","type":"message"}
{"nick":"isaacs","message":"pquerna: i mean, awesome write-up","date":"2013-03-11T05:26:23.830Z","type":"message"}
{"nick":"isaacs","message":"pquerna: it would be nice to figure out a way to have something smarter.  the assumption that the data will be flowing through and not sticking around forever, is clearly not a valid assumption.","date":"2013-03-11T05:27:51.797Z","type":"message"}
{"nick":"tjfontaine","message":"that project is attached to the issue","date":"2013-03-11T05:29:04.052Z","type":"message"}
{"nick":"isaacs","message":"pquerna: the overhead in fixing that is that right now, the slabs don't know about the views.","date":"2013-03-11T05:29:13.714Z","type":"message"}
{"nick":"isaacs","message":"pretty soon, we're reinventing malloc and free","date":"2013-03-11T05:29:40.781Z","type":"message"}
{"nick":"brucem","message":"can you use a separate memory manager for the slabs / whatever if you want compacting / copying? or does it need to go through v8 memory management or anything?","date":"2013-03-11T05:30:14.833Z","type":"message"}
{"nick":"isaacs","message":"ircretary: tell trevnorris https://github.com/jmatthewsr-ms/node-slab-memory-issues","date":"2013-03-11T05:31:04.307Z","type":"message"}
{"nick":"ircretary","message":"isaacs: I'll be sure to tell trevnorris","date":"2013-03-11T05:31:04.524Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: he should be aware of it from https://github.com/joyent/node/pull/4660","date":"2013-03-11T05:31:20.210Z","type":"message"}
{"nick":"tjfontaine","message":"I think it's part of hte reason he started his quest","date":"2013-03-11T05:31:33.374Z","type":"message"}
{"nick":"isaacs","message":"ah, oic","date":"2013-03-11T05:32:02.815Z","type":"message"}
{"nick":"isaacs","message":"ircretary: tell trevnorris Oh, I guess you already know about that :)","date":"2013-03-11T05:32:18.202Z","type":"message"}
{"nick":"ircretary","message":"isaacs: I'll be sure to tell trevnorris","date":"2013-03-11T05:32:18.414Z","type":"message"}
{"nick":"loladiro","date":"2013-03-11T05:37:04.986Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-03-11T05:38:55.800Z","type":"quit"}
{"nick":"wolfeidau","message":"pquerna: With buffers you can peal back a few layers though right?","date":"2013-03-11T05:40:53.429Z","type":"message"}
{"nick":"TooTallNate","date":"2013-03-11T05:44:16.638Z","type":"join"}
{"nick":"mikeal","date":"2013-03-11T05:44:21.608Z","type":"join"}
{"nick":"TooTallNate","reason":"Client Quit","date":"2013-03-11T05:44:27.824Z","type":"quit"}
{"nick":"pquerna","message":"isaacs: agree;  though i think the biggest problem with it right now are the 'owenership' rules that make moving he memory really hard, becaause it can be handed off to a worker thread","date":"2013-03-11T05:44:53.619Z","type":"message"}
{"nick":"abraxas","date":"2013-03-11T05:47:03.436Z","type":"join"}
{"nick":"CoverSlide","reason":"Remote host closed the connection","date":"2013-03-11T05:57:59.851Z","type":"quit"}
{"nick":"CoverSlide","date":"2013-03-11T06:10:50.935Z","type":"join"}
{"nick":"kazupon","date":"2013-03-11T06:26:48.018Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 256 seconds","date":"2013-03-11T06:31:30.472Z","type":"quit"}
{"nick":"dostoyev1ky","reason":"Quit: leaving","date":"2013-03-11T07:14:25.104Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-11T07:27:53.889Z","type":"join"}
{"nick":"`3rdEden","date":"2013-03-11T07:28:40.528Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-03-11T07:32:06.797Z","type":"quit"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-03-11T08:17:49.859Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-11T08:28:15.161Z","type":"join"}
{"nick":"csaoh","date":"2013-03-11T08:30:15.521Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 248 seconds","date":"2013-03-11T08:32:52.980Z","type":"quit"}
{"nick":"csaoh","reason":"Remote host closed the connection","date":"2013-03-11T08:34:12.390Z","type":"quit"}
{"nick":"csaoh","date":"2013-03-11T08:37:01.341Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-11T08:40:24.430Z","type":"quit"}
{"nick":"stagas","date":"2013-03-11T08:41:41.464Z","type":"join"}
{"nick":"indexzero","date":"2013-03-11T09:07:13.633Z","type":"join"}
{"nick":"hz","date":"2013-03-11T09:14:32.712Z","type":"join"}
{"nick":"dominictarr","date":"2013-03-11T09:23:05.555Z","type":"join"}
{"nick":"dominictarr","reason":"Client Quit","date":"2013-03-11T09:25:13.184Z","type":"quit"}
{"nick":"`3rdEden","date":"2013-03-11T09:28:23.452Z","type":"join"}
{"nick":"`3rdEden","reason":"Ping timeout: 276 seconds","date":"2013-03-11T09:33:24.389Z","type":"quit"}
{"nick":"rendar","date":"2013-03-11T09:56:01.459Z","type":"join"}
{"nick":"`3rdEden","date":"2013-03-11T10:05:44.684Z","type":"join"}
{"nick":"kazupon","date":"2013-03-11T10:29:31.484Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-03-11T10:31:03.177Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 276 seconds","date":"2013-03-11T10:35:09.342Z","type":"quit"}
{"nick":"`3rdEden","new_nick":"`3E|BRB","date":"2013-03-11T10:54:49.827Z","type":"nick"}
{"nick":"sgallagh","date":"2013-03-11T11:05:46.246Z","type":"join"}
{"nick":"Kakera","date":"2013-03-11T11:08:01.495Z","type":"join"}
{"nick":"indutny","message":"morning","date":"2013-03-11T11:18:18.425Z","type":"message"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-03-11T11:18:48.268Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-11T11:30:58.074Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 245 seconds","date":"2013-03-11T11:35:24.856Z","type":"quit"}
{"nick":"`3E|BRB","new_nick":"`3rdEden","date":"2013-03-11T11:40:11.432Z","type":"nick"}
{"nick":"csaoh","reason":"Quit: csaoh","date":"2013-03-11T11:45:35.397Z","type":"quit"}
{"nick":"csaoh","date":"2013-03-11T11:54:07.238Z","type":"join"}
{"nick":"sgallagh","date":"2013-03-11T12:06:04.799Z","type":"join"}
{"nick":"kazupon","date":"2013-03-11T12:32:05.279Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 248 seconds","date":"2013-03-11T12:36:37.012Z","type":"quit"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-03-11T12:52:16.571Z","type":"nick"}
{"nick":"qmx","reason":"Changing host","date":"2013-03-11T12:52:32.297Z","type":"quit"}
{"nick":"qmx","date":"2013-03-11T12:52:32.509Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-03-11T13:02:24.426Z","type":"join"}
{"nick":"indexzero_","date":"2013-03-11T13:09:10.112Z","type":"join"}
{"nick":"indexzero","reason":"Ping timeout: 248 seconds","date":"2013-03-11T13:09:21.300Z","type":"quit"}
{"nick":"indexzero_","new_nick":"indexzero","date":"2013-03-11T13:09:21.520Z","type":"nick"}
{"nick":"bradleymeck","date":"2013-03-11T13:22:48.295Z","type":"join"}
{"nick":"kazupon","date":"2013-03-11T13:32:59.220Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-11T13:37:37.211Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 248 seconds","date":"2013-03-11T13:42:13.042Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-11T13:50:39.422Z","type":"join"}
{"nick":"AvianFlu","date":"2013-03-11T14:24:36.593Z","type":"join"}
{"nick":"piscisaureus_","message":"pquerna: your idea of having a compacting garbage collector is neat but the fact that multiple buffers can reference the same backing store makes it quite complicated.","date":"2013-03-11T14:26:54.352Z","type":"message"}
{"nick":"kevireilly","reason":"*.net *.split","date":"2013-03-11T14:30:55.500Z","type":"quit"}
{"nick":"wavded_","reason":"*.net *.split","date":"2013-03-11T14:30:55.500Z","type":"quit"}
{"nick":"niska","reason":"*.net *.split","date":"2013-03-11T14:30:55.842Z","type":"quit"}
{"nick":"creationix","reason":"*.net *.split","date":"2013-03-11T14:30:56.230Z","type":"quit"}
{"nick":"creationix","date":"2013-03-11T14:31:14.420Z","type":"join"}
{"nick":"wavded_","date":"2013-03-11T14:31:30.602Z","type":"join"}
{"nick":"bradleymeck","date":"2013-03-11T14:32:30.509Z","type":"join"}
{"nick":"niska","date":"2013-03-11T14:32:30.509Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 250 seconds","date":"2013-03-11T14:36:38.188Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-11T14:38:57.106Z","type":"join"}
{"nick":"kevireilly","date":"2013-03-11T14:40:08.175Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 245 seconds","date":"2013-03-11T14:43:19.921Z","type":"quit"}
{"nick":"nsm","date":"2013-03-11T14:46:36.378Z","type":"join"}
{"nick":"nsm","reason":"Client Quit","date":"2013-03-11T14:46:37.964Z","type":"quit"}
{"nick":"nsm","date":"2013-03-11T14:47:01.216Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-03-11T14:50:52.229Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-11T14:51:24.299Z","type":"quit"}
{"nick":"Kakera","reason":"Ping timeout: 248 seconds","date":"2013-03-11T14:53:21.384Z","type":"quit"}
{"nick":"loladiro","date":"2013-03-11T14:54:01.271Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-03-11T14:58:04.496Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-11T14:59:32.340Z","type":"quit"}
{"nick":"isaacs","message":"about ot push live in a little bit","date":"2013-03-11T15:07:06.647Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-11T15:08:00.741Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus_, pquerna: we could always implement explicit memory management ;)","date":"2013-03-11T15:08:35.476Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: like, in an hour?","date":"2013-03-11T15:09:02.554Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: 16:00 yes","date":"2013-03-11T15:09:11.426Z","type":"message"}
{"nick":"isaacs","message":"all hte tests that were passing last night still pass","date":"2013-03-11T15:09:24.413Z","type":"message"}
{"nick":"piscisaureus_","message":"ehm. That'd be 1700. You guys went to DST :)","date":"2013-03-11T15:09:29.739Z","type":"message"}
{"nick":"piscisaureus_","message":"but we didn't","date":"2013-03-11T15:09:33.247Z","type":"message"}
{"nick":"isaacs","message":"1600 UTC","date":"2013-03-11T15:09:40.681Z","type":"message"}
{"nick":"LOUDBOT","message":"I DON'T HAVE AN ATTITUDE. I'M JUST RIGHT.","date":"2013-03-11T15:09:40.891Z","type":"message"}
{"nick":"isaacs","message":"that's the release time","date":"2013-03-11T15:09:42.114Z","type":"message"}
{"nick":"piscisaureus_","message":"aah","date":"2013-03-11T15:09:44.958Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-03-11T15:09:50.391Z","type":"quit"}
{"nick":"isaacs","message":"listen man, i'm not a part of your backwater farming clock system","date":"2013-03-11T15:10:05.006Z","type":"message"}
{"nick":"isaacs","message":";)","date":"2013-03-11T15:10:08.677Z","type":"message"}
{"nick":"isaacs","message":"srsly, though, standup tomorrow is an hour earlier in Actual Time","date":"2013-03-11T15:10:42.462Z","type":"message"}
{"nick":"isaacs","message":"then i thikn the week after that, we're back in sync, yes?","date":"2013-03-11T15:10:55.919Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-11T15:10:56.131Z","type":"join"}
{"nick":"kazupon","date":"2013-03-11T15:11:36.420Z","type":"join"}
{"nick":"piscisaureus_","message":"Yes it's going to be at 5 for me","date":"2013-03-11T15:11:53.083Z","type":"message"}
{"nick":"piscisaureus_","message":"which is great!","date":"2013-03-11T15:11:55.255Z","type":"message"}
{"nick":"piscisaureus_","message":"I wish it could always be like this","date":"2013-03-11T15:12:01.125Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: we tried, but 8:00 AM is too early for this longitude","date":"2013-03-11T15:12:20.206Z","type":"message"}
{"nick":"piscisaureus_","message":"Yes, I totally understand.","date":"2013-03-11T15:12:40.838Z","type":"message"}
{"nick":"piscisaureus_","message":"That's why I'm happy that we can both be happy","date":"2013-03-11T15:12:48.614Z","type":"message"}
{"nick":"piscisaureus_","message":"even if it's only for a week","date":"2013-03-11T15:12:53.154Z","type":"message"}
{"nick":"bradleymeck","reason":"Client Quit","date":"2013-03-11T15:14:40.412Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus_: anyway... don't we already have some weakref stuff on buffers to know when to free() the actual memory?","date":"2013-03-11T15:14:58.122Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: yes but that's on SlowBuffer slabs and not on individual buffers","date":"2013-03-11T15:15:39.564Z","type":"message"}
{"nick":"piscisaureus_","message":"for performance reasons","date":"2013-03-11T15:15:43.248Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: it'd be complicated to do compacting, but i don't think the \"worker threads own the buffer\" makes it worse","date":"2013-03-11T15:15:44.543Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-03-11T15:15:47.542Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: you'd probably want to \"loc","date":"2013-03-11T15:16:04.928Z","type":"message"}
{"nick":"piscisaureus_","message":"er","date":"2013-03-11T15:16:06.596Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-11T15:16:39.448Z","type":"join"}
{"nick":"piscisaureus_","message":"\"pin\" buffers when they are sent to the threadpool and \"unpin\" them when libuv is done","date":"2013-03-11T15:16:42.652Z","type":"message"}
{"nick":"isaacs","message":"yeah.","date":"2013-03-11T15:17:35.630Z","type":"message"}
{"nick":"isaacs","message":"not just libuv.","date":"2013-03-11T15:17:37.742Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: that'd work - we'd still rotate slabs so compaction would only happen for very old slabs which are still referenced by one of a few Buffer objects. It'd be unlikely for those to be pinned by the time you want to compact them.","date":"2013-03-11T15:17:39.428Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-03-11T15:18:07.172Z","type":"message"}
{"nick":"piscisaureus_","message":"But this is still very complicated :-)","date":"2013-03-11T15:18:11.219Z","type":"message"}
{"nick":"isaacs","message":"yes","date":"2013-03-11T15:18:13.271Z","type":"message"}
{"nick":"piscisaureus_","message":"especially finding an o(reasonable) algorithm for finding which parts of a SlowBuffer can be discarded","date":"2013-03-11T15:18:35.996Z","type":"message"}
{"nick":"isaacs","message":"could we possibly free just PART of the slab?","date":"2013-03-11T15:18:39.375Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: no, out of the question","date":"2013-03-11T15:18:47.392Z","type":"message"}
{"nick":"isaacs","message":"like, if we have a contiguous space of >=n bytes, tell the system to have it back","date":"2013-03-11T15:18:51.952Z","type":"message"}
{"nick":"isaacs","message":"hahahh, ok","date":"2013-03-11T15:18:55.774Z","type":"message"}
{"nick":"piscisaureus_","message":"can't do that in C","date":"2013-03-11T15:18:58.226Z","type":"message"}
{"nick":"piscisaureus_","message":"sorry","date":"2013-03-11T15:19:01.752Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: the other hairy issue is to decide when to compact.","date":"2013-03-11T15:19:21.886Z","type":"message"}
{"nick":"rendar","message":"well,  what about a chunk allocator, where each chunk = 1 buffer?","date":"2013-03-11T15:19:24.346Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-03-11T15:19:25.200Z","type":"message"}
{"nick":"rendar","message":"sorry, each chunk = N little buffers","date":"2013-03-11T15:19:34.574Z","type":"message"}
{"nick":"piscisaureus_","message":"well we have that but a chunk is called a slab","date":"2013-03-11T15:19:53.429Z","type":"message"}
{"nick":"rendar","message":"oh, ok, sorry :)","date":"2013-03-11T15:20:00.318Z","type":"message"}
{"nick":"rendar","message":"piscisaureus_: but this system of slab works only in windows, or overall libuv?","date":"2013-03-11T15:20:22.525Z","type":"message"}
{"nick":"isaacs","message":"rendar: wait, so, you mean that new Buffer(1024) actually creates a bunch of Buffer(8)'s or something?","date":"2013-03-11T15:20:25.905Z","type":"message"}
{"nick":"isaacs","message":"rendar: it's a node-ism","date":"2013-03-11T15:20:31.806Z","type":"message"}
{"nick":"piscisaureus_","message":"rendar: the problem is that if most buffers are garbage collected but not all of them, the slab (\"chunk\") stays around","date":"2013-03-11T15:20:32.819Z","type":"message"}
{"nick":"rendar","message":"hmmm","date":"2013-03-11T15:20:41.399Z","type":"message"}
{"nick":"piscisaureus_","message":"rendar: everywhere","date":"2013-03-11T15:20:43.647Z","type":"message"}
{"nick":"isaacs","message":"rendar: so, we don't want to create a bunch of tiny mallocs","date":"2013-03-11T15:20:50.457Z","type":"message"}
{"nick":"isaacs","message":"rendar: because it gets slow","date":"2013-03-11T15:20:53.898Z","type":"message"}
{"nick":"piscisaureus_","message":"actually the mallocs are slow but it's not the biggest issue","date":"2013-03-11T15:21:09.044Z","type":"message"}
{"nick":"isaacs","message":"rendar: so, instead, we allocate a big 8*1024 \"slab\"","date":"2013-03-11T15:21:09.255Z","type":"message"}
{"nick":"rendar","message":"isaacs: no basically i was thinking to: allocate(1024*N) where N = little buffers i want to allocate, then using them, and pin/unpin them with a bitmap (piece of memory where each bits is 0 (pinned) or 1 (unpinned))","date":"2013-03-11T15:21:40.529Z","type":"message"}
{"nick":"piscisaureus_","message":"the biggest problem is calling into c++, adding the buffer to the v8 roots, setting up the weakref callbacks etc","date":"2013-03-11T15:21:45.945Z","type":"message"}
{"nick":"rendar","message":"hmm i see","date":"2013-03-11T15:21:59.052Z","type":"message"}
{"nick":"isaacs","message":"yeah, so then each new Buffer(n) just takes a slice of that big \"SlowBuffer\" slab","date":"2013-03-11T15:22:19.973Z","type":"message"}
{"nick":"rendar","message":"yeah","date":"2013-03-11T15:22:28.328Z","type":"message"}
{"nick":"rendar","message":"and bitmap[n] is 0 if its used (pinned) or 1 for free (unpinned)","date":"2013-03-11T15:22:44.028Z","type":"message"}
{"nick":"piscisaureus_","message":"It'd be an interesting experiment to actually hack v8 and see if we can add Buffer as a native type","date":"2013-03-11T15:22:53.719Z","type":"message"}
{"nick":"piscisaureus_","message":"in a specialized space that supports pinning and unpinning","date":"2013-03-11T15:23:02.795Z","type":"message"}
{"nick":"piscisaureus_","message":"(wink mraleph)","date":"2013-03-11T15:23:07.515Z","type":"message"}
{"nick":"rendar","message":"piscisaureus_: so the biggest issue is to interface that to v8?","date":"2013-03-11T15:23:08.299Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah","date":"2013-03-11T15:23:13.096Z","type":"message"}
{"nick":"piscisaureus_","message":"The interface is nice. It's just not very efficient :)","date":"2013-03-11T15:23:21.318Z","type":"message"}
{"nick":"rendar","message":"i see..","date":"2013-03-11T15:23:32.685Z","type":"message"}
{"nick":"Kakera","date":"2013-03-11T15:24:43.535Z","type":"join"}
{"nick":"rendar","message":"0-|slab0         |slab1            ... |slab n         |-4096     <- here i have a block of memory of 4096 which can be divided in N little buffers,   then i have N entrypoints (slab0, slab1, slabN) for each little buffer, and the problem now is to make v8 efficently work with memory instanced like that, if i got the problem","date":"2013-03-11T15:26:12.220Z","type":"message"}
{"nick":"mikeal","date":"2013-03-11T15:29:30.391Z","type":"join"}
{"nick":"piscisaureus_","message":"rendar: the problem we're dealing with is that when buffer 2-4096 are gone but 1 is still referenced, we must retain the entire slab","date":"2013-03-11T15:32:57.947Z","type":"message"}
{"nick":"qmx","new_nick":"qmx|brb","date":"2013-03-11T15:33:27.238Z","type":"nick"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-11T15:34:20.989Z","type":"quit"}
{"nick":"mmalecki","new_nick":"mmalecki[away]","date":"2013-03-11T15:40:08.408Z","type":"nick"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-11T15:40:35.045Z","type":"quit"}
{"nick":"piscisaureus__","date":"2013-03-11T15:43:07.886Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 260 seconds","date":"2013-03-11T15:46:40.330Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f created tag v0.10.0 - http://git.io/kJcyrA","date":"2013-03-11T15:49:13.480Z","type":"message"}
{"nick":"piscisaureus__","message":"isaacs: release! \\o/","date":"2013-03-11T15:49:40.942Z","type":"message"}
{"nick":"isaacs","message":"doing it","date":"2013-03-11T15:49:51.181Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037v0.10\u000f * \u0002e2b293c\u0002 : Now working on 0.10.1 (+2 more commits) - http://git.io/Sog8_A","date":"2013-03-11T15:49:54.516Z","type":"message"}
{"nick":"piscisaureus__","new_nick":"piscisaureus","date":"2013-03-11T15:53:26.943Z","type":"nick"}
{"nick":"isaacs","message":"ugh, some errors on the joyeur blog cross-post.","date":"2013-03-11T15:53:50.328Z","type":"message"}
{"nick":"qmx|brb","new_nick":"qmx","date":"2013-03-11T15:57:48.848Z","type":"nick"}
