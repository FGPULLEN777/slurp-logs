{"nick":"bnoordhuis","reason":"Ping timeout: 272 seconds","date":"2012-04-17T00:20:27.238Z","type":"quit"}
{"nick":"dylukes","date":"2012-04-17T00:33:03.641Z","type":"join"}
{"nick":"theCole","date":"2012-04-17T00:39:42.244Z","type":"join"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-17T00:40:40.232Z","type":"quit"}
{"nick":"orlandovftw","reason":"Ping timeout: 244 seconds","date":"2012-04-17T00:41:28.455Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-04-17T00:49:03.805Z","type":"quit"}
{"nick":"orlandovftw","date":"2012-04-17T01:20:42.521Z","type":"join"}
{"nick":"pijewski","reason":"Quit: Leaving.","date":"2012-04-17T01:34:36.516Z","type":"quit"}
{"nick":"theCole","reason":"Quit: theCole","date":"2012-04-17T01:34:56.085Z","type":"quit"}
{"nick":"coderarity","reason":"Quit: coderarity","date":"2012-04-17T01:35:30.125Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2012-04-17T01:36:13.836Z","type":"quit"}
{"nick":"coderarity","date":"2012-04-17T01:37:16.167Z","type":"join"}
{"nick":"orlandovftw","reason":"Ping timeout: 246 seconds","date":"2012-04-17T01:49:28.622Z","type":"quit"}
{"nick":"abraxas","date":"2012-04-17T01:55:52.219Z","type":"join"}
{"nick":"orlandovftw","date":"2012-04-17T02:09:11.560Z","type":"join"}
{"nick":"stephank","reason":"Ping timeout: 272 seconds","date":"2012-04-17T02:18:15.185Z","type":"quit"}
{"nick":"stephank","date":"2012-04-17T02:19:49.417Z","type":"join"}
{"nick":"orlandovftw","reason":"Ping timeout: 246 seconds","date":"2012-04-17T02:27:37.653Z","type":"quit"}
{"nick":"isaacs","date":"2012-04-17T03:17:38.419Z","type":"join"}
{"nick":"coderarity","reason":"Quit: coderarity","date":"2012-04-17T03:27:09.758Z","type":"quit"}
{"nick":"mikeal","date":"2012-04-17T03:51:29.394Z","type":"join"}
{"nick":"dylukes","reason":"Quit: Computer has gone to sleep.","date":"2012-04-17T03:54:34.988Z","type":"quit"}
{"nick":"dylukes","date":"2012-04-17T03:59:35.494Z","type":"join"}
{"nick":"dylukes","reason":"Remote host closed the connection","date":"2012-04-17T03:59:38.916Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-17T04:10:02.718Z","type":"quit"}
{"nick":"bulatshakirzyano","date":"2012-04-17T04:13:39.017Z","type":"join"}
{"nick":"mikeal","date":"2012-04-17T04:25:08.657Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-17T04:41:48.667Z","type":"quit"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-04-17T04:46:55.200Z","type":"quit"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-17T04:49:44.803Z","type":"quit"}
{"nick":"orlandovftw","date":"2012-04-17T04:54:03.487Z","type":"join"}
{"nick":"isaacs","date":"2012-04-17T04:58:58.511Z","type":"join"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-17T05:13:42.556Z","type":"quit"}
{"nick":"mikeal","date":"2012-04-17T05:17:18.420Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Leaving...","date":"2012-04-17T05:32:10.121Z","type":"quit"}
{"nick":"paddybyers","date":"2012-04-17T06:02:29.495Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-17T06:13:37.128Z","type":"quit"}
{"nick":"stephank","reason":"Quit: *Poof!*","date":"2012-04-17T06:45:05.815Z","type":"quit"}
{"nick":"orlandovftw","reason":"Ping timeout: 244 seconds","date":"2012-04-17T07:43:04.531Z","type":"quit"}
{"nick":"rendar","date":"2012-04-17T07:49:53.465Z","type":"join"}
{"nick":"bulatshakirzyano","reason":"Quit: Computer has gone to sleep.","date":"2012-04-17T09:48:44.241Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-04-17T10:24:20.884Z","type":"join"}
{"nick":"piscisaureus_","message":"hello","date":"2012-04-17T10:24:25.849Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-04-17T10:49:24.959Z","type":"quit"}
{"nick":"coderarity","date":"2012-04-17T10:54:14.420Z","type":"join"}
{"nick":"mjr_","reason":"Read error: Connection reset by peer","date":"2012-04-17T10:59:18.396Z","type":"quit"}
{"nick":"mjr_","date":"2012-04-17T10:59:38.632Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-04-17T11:30:40.386Z","type":"quit"}
{"nick":"abraxas","date":"2012-04-17T11:31:12.604Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 248 seconds","date":"2012-04-17T11:35:51.001Z","type":"quit"}
{"nick":"bnoordhuis","date":"2012-04-17T12:05:32.631Z","type":"join"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303domenic\u000f \u000307master\u000f * r\u00025bc07cc\u000f \u000310\u000f/ doc/api/stream.markdown \u0002:\u000f doc: note that `stream.pause` is advisory - http://git.io/cgELdg","date":"2012-04-17T12:19:52.800Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303Kyle Robinson Young\u000f \u000307master\u000f * r\u00027cd1690\u000f \u000310\u000f/ doc/api/fs.markdown \u0002:\u000f doc: add cache argument to fs.realpath() - http://git.io/vmqwHQ","date":"2012-04-17T12:19:53.020Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: what are you working on, bertje?","date":"2012-04-17T12:30:33.813Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: uv__slow_poll_process_poll_req","date":"2012-04-17T12:30:47.592Z","type":"message"}
{"nick":"bnoordhuis","message":"sounds intriguing","date":"2012-04-17T12:30:55.189Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: for more details, join the standup :-p","date":"2012-04-17T12:31:33.637Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: i'll probably land your dns patch in 0.9","date":"2012-04-17T12:31:37.828Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: maybe i will","date":"2012-04-17T12:31:47.548Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: after this I will work on the spawn fds stings","date":"2012-04-17T12:31:55.523Z","type":"message"}
{"nick":"piscisaureus_","message":"*thing","date":"2012-04-17T12:31:58.451Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: why do we still have IOWatcher in node?","date":"2012-04-17T12:32:04.682Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: i'm not sure actually, i find it surprising too","date":"2012-04-17T12:32:57.245Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I think node_mdns uses it. But, sigh","date":"2012-04-17T12:33:37.086Z","type":"message"}
{"nick":"wankdanker","reason":"Ping timeout: 276 seconds","date":"2012-04-17T12:38:01.659Z","type":"quit"}
{"nick":"pfox___","message":"hey.. is the behavior defined for calling uv_async_send on a uv_async_t*, post-uv_close, and before/after the uv_close_cb is invoked .. as long as its not deallocated?","date":"2012-04-17T12:40:43.318Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox___: i don't think so","date":"2012-04-17T12:43:42.466Z","type":"message"}
{"nick":"bnoordhuis","message":"it will probably work on unices but i'm not sure about windows","date":"2012-04-17T12:44:00.733Z","type":"message"}
{"nick":"piscisaureus_","message":"pfox___: doing so would probably club some seals.","date":"2012-04-17T12:44:48.995Z","type":"message"}
{"nick":"piscisaureus_","message":"pfox___: on windows","date":"2012-04-17T12:44:51.647Z","type":"message"}
{"nick":"pfox___","message":"well i guess ill find out soon enough. thanks :)","date":"2012-04-17T12:44:53.747Z","type":"message"}
{"nick":"piscisaureus_","message":"pfox___: I would not recommend doing it","date":"2012-04-17T12:44:57.123Z","type":"message"}
{"nick":"pfox___","message":"like segfault-level seal clubbing?","date":"2012-04-17T12:45:20.321Z","type":"message"}
{"nick":"pfox___","message":"i don't care if the loop wakes up","date":"2012-04-17T12:45:24.727Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2012-04-17T12:45:25.682Z","type":"message"}
{"nick":"piscisaureus_","message":"oh h,,","date":"2012-04-17T12:45:30.902Z","type":"message"}
{"nick":"piscisaureus_","message":"hmm","date":"2012-04-17T12:45:33.047Z","type":"message"}
{"nick":"piscisaureus_","message":"let's look at the code","date":"2012-04-17T12:45:39.683Z","type":"message"}
{"nick":"piscisaureus_","message":"pfox___: yes, bad","date":"2012-04-17T12:46:46.221Z","type":"message"}
{"nick":"pfox___","message":"ok. thanks.","date":"2012-04-17T12:47:36.194Z","type":"message"}
{"nick":"pfox___","reason":"Ping timeout: 246 seconds","date":"2012-04-17T12:52:01.582Z","type":"quit"}
{"nick":"paddybyers","date":"2012-04-17T13:04:38.493Z","type":"join"}
{"nick":"bnoordhuis","message":"test-async doesn't strike me as a great test, lots of things that only work accidentally","date":"2012-04-17T13:20:06.182Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: it has race conditions","date":"2012-04-17T13:20:52.354Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: that's why it fails intermittently on windows","date":"2012-04-17T13:21:04.184Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: maybe you can improve the test :-)","date":"2012-04-17T13:22:02.087Z","type":"message"}
{"nick":"bnoordhuis","message":"working on it","date":"2012-04-17T13:23:39.860Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: https://github.com/bnoordhuis/libuv/commit/5345ee3","date":"2012-04-17T14:00:10.783Z","type":"message"}
{"nick":"wankdanker","date":"2012-04-17T14:16:39.485Z","type":"join"}
{"nick":"mmalecki[zzz]","new_nick":"mmalecki","date":"2012-04-17T14:25:11.681Z","type":"nick"}
{"nick":"pfox___","date":"2012-04-17T14:32:12.439Z","type":"join"}
{"nick":"tjfontaine","message":"bnoordhuis: oh excellent","date":"2012-04-17T14:33:21.945Z","type":"message"}
{"nick":"isaacs","date":"2012-04-17T14:40:11.732Z","type":"join"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u00025345ee3\u000f \u000310\u000f/ (4 files)\u0002:\u000f test: fix race conditions in test-async - http://git.io/m-cKlg","date":"2012-04-17T14:45:13.438Z","type":"message"}
{"nick":"CoverSlide","date":"2012-04-17T14:46:12.829Z","type":"join"}
{"nick":"travis-ci","date":"2012-04-17T14:47:13.292Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#201 (master - 5345ee3 : Ben Noordhuis): The build is still failing.","date":"2012-04-17T14:47:13.490Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/d5e7786...5345ee3","date":"2012-04-17T14:47:13.491Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1112416","date":"2012-04-17T14:47:13.491Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-17T14:47:13.491Z","type":"part"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303Kyle Robinson Young\u000f \u000307master\u000f * r\u0002718aa50\u000f \u000310\u000f/ doc/api/globals.markdown \u0002:\u000f ","date":"2012-04-17T15:11:55.379Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f doc: add require.extensions to globals","date":"2012-04-17T15:11:55.583Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f Closes #3028 - http://git.io/RZe3ow","date":"2012-04-17T15:11:55.584Z","type":"message"}
{"nick":"isaacs","message":"good morning","date":"2012-04-17T15:34:10.008Z","type":"message"}
{"nick":"isaacs","message":"going to do a 0.7.8 release today","date":"2012-04-17T15:34:13.934Z","type":"message"}
{"nick":"creationix","message":"isaacs, cool","date":"2012-04-17T15:41:49.291Z","type":"message"}
{"nick":"creationix","message":"that has domains in it right?","date":"2012-04-17T15:41:53.815Z","type":"message"}
{"nick":"creationix","action":"doesn't follow the 0.7.x releases as close","date":"2012-04-17T15:42:17.390Z","type":"action"}
{"nick":"isaacs","message":"creationix: haven't gotten a lgtm from any core committers on that yet.","date":"2012-04-17T15:42:35.311Z","type":"message"}
{"nick":"isaacs","message":"but it could!","date":"2012-04-17T15:42:39.324Z","type":"message"}
{"nick":"creationix","message":"I wonder if I could do something like domains for luvit","date":"2012-04-17T15:42:57.804Z","type":"message"}
{"nick":"creationix","message":"I have multiple lua states that are kinda like isolates, and I have all of libuv","date":"2012-04-17T15:43:15.572Z","type":"message"}
{"nick":"creationix","message":"is there anything else I need?","date":"2012-04-17T15:43:21.026Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis, igorzi, TooTallNate, piscisaureus_: Can I get a LGTM on domains?  (I'd smoosh some of the commits a little bit, or maybe do a --no-ff so it's easier to revert if we have issues later)","date":"2012-04-17T15:43:22.027Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: the issues you brought up should be fixed now.","date":"2012-04-17T15:43:37.561Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: okay, give me a sec to review it","date":"2012-04-17T15:44:10.023Z","type":"message"}
{"nick":"bnoordhuis","message":"btw, did you guys know that plan9 has a graphical installer? it was so ahead of its time!","date":"2012-04-17T15:44:32.903Z","type":"message"}
{"nick":"isaacs","message":"rad!","date":"2012-04-17T15:44:51.634Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: thanks for fixing the openssl link issue.","date":"2012-04-17T15:45:48.506Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, np","date":"2012-04-17T15:45:57.510Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: the three commits at the bottom are new since your last review https://github.com/joyent/node/pull/3109#commits-pushed-0585224","date":"2012-04-17T15:47:04.454Z","type":"message"}
{"nick":"stephank","date":"2012-04-17T15:47:38.630Z","type":"join"}
{"nick":"isaacs","message":"oh, whoops, and d74e6508c5fbc3f2dba877c6b8977b8539fe9212 is wrong.  should return after FatalException","date":"2012-04-17T15:47:38.832Z","type":"message"}
{"nick":"isaacs","message":"ok, fixed on 09f5816224158e6f7b2afab3766b61ad9e400cb2","date":"2012-04-17T15:48:44.834Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: silly question: how do you know that all actions in the domain have completed?","date":"2012-04-17T15:51:53.926Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: you don't","date":"2012-04-17T15:52:04.702Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: okay. when would one call domain.dispose()?","date":"2012-04-17T15:52:33.294Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: there's really no way to get that, without them somehow registering themselves on teh domain object (instead ofjust saving a reference to the domain object), and that's way too expensive.","date":"2012-04-17T15:52:41.397Z","type":"message"}
{"nick":"isaacs","message":"you'd call domain.dispose() when you want to clear/close/destroy all the *explicitly* added EEs and timers, and prevent any more activity from happening on that domain","date":"2012-04-17T15:53:33.318Z","type":"message"}
{"nick":"isaacs","message":"so, any other stuff that comes back, when it sees that the domain is disposed, will just stop.","date":"2012-04-17T15:53:55.254Z","type":"message"}
{"nick":"isaacs","message":"i suspect that we can go a bit further with uv_walk, but i'm not sure.","date":"2012-04-17T15:54:15.746Z","type":"message"}
{"nick":"bnoordhuis","message":"okay. you've probably thought more about this than i did so i assume it's sound","date":"2012-04-17T15:55:01.516Z","type":"message"}
{"nick":"isaacs","message":"hahah","date":"2012-04-17T15:55:05.233Z","type":"message"}
{"nick":"isaacs","message":"that's so dangerous!","date":"2012-04-17T15:55:08.528Z","type":"message"}
{"nick":"isaacs","message":"honestly, i figure we'll find out all sorts of problems with it and have to change it significantly in v0.9","date":"2012-04-17T15:55:36.045Z","type":"message"}
{"nick":"isaacs","message":"i'm ok with that.","date":"2012-04-17T15:55:37.579Z","type":"message"}
{"nick":"isaacs","message":"we just have to deliver *something*","date":"2012-04-17T15:55:41.869Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: another question: is there a reason that domains.stack is public?","date":"2012-04-17T15:57:00.015Z","type":"message"}
{"nick":"isaacs","action":"shrug","date":"2012-04-17T15:57:28.094Z","type":"action"}
{"nick":"isaacs","message":"inspection?","date":"2012-04-17T15:57:30.392Z","type":"message"}
{"nick":"bnoordhuis","message":"just wondering","date":"2012-04-17T15:57:38.668Z","type":"message"}
{"nick":"isaacs","message":"i guess it could be hidden, or at least _pseudoprivate","date":"2012-04-17T15:57:44.492Z","type":"message"}
{"nick":"isaacs","message":"there was some reason why it needed to be exposed originally, but that idea ended up being scrapped","date":"2012-04-17T15:58:18.503Z","type":"message"}
{"nick":"bnoordhuis","message":"it doesn't bother me, just wondered if there's a reason","date":"2012-04-17T15:58:43.590Z","type":"message"}
{"nick":"isaacs","message":"nope.  no reason.","date":"2012-04-17T16:00:24.198Z","type":"message"}
{"nick":"isaacs","message":"in fact, dinking around with it is very hazardous","date":"2012-04-17T16:00:36.629Z","type":"message"}
{"nick":"isaacs","message":"it should be hidden, i think","date":"2012-04-17T16:00:42.802Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: hid it on c2743b165ee39d949d59e3f68b590f8ad8e42025","date":"2012-04-17T16:02:06.201Z","type":"message"}
{"nick":"mikeal","date":"2012-04-17T16:04:42.310Z","type":"join"}
{"nick":"bnoordhuis","message":"isaacs: abort() instead of exit(1), that makes it easier to debug, get core dumps, etc.","date":"2012-04-17T16:05:34.357Z","type":"message"}
{"nick":"isaacs","message":"oh, ok","date":"2012-04-17T16:05:45.681Z","type":"message"}
{"nick":"isaacs","message":"sure","date":"2012-04-17T16:05:47.804Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: done","date":"2012-04-17T16:07:23.482Z","type":"message"}
{"nick":"isaacs","message":"604a39d3c5a8aee4ec4f80b2022ea3e229d8a3fc","date":"2012-04-17T16:07:26.467Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: running tests now but essentially lgtm","date":"2012-04-17T16:10:44.852Z","type":"message"}
{"nick":"isaacs","message":"kewl.","date":"2012-04-17T16:10:55.088Z","type":"message"}
{"nick":"isaacs","message":"lemme know if any tests fail.  i'll brb.","date":"2012-04-17T16:11:00.208Z","type":"message"}
{"nick":"bnoordhuis","message":"simple/test-regress-GH-1697 but it passed on the second run","date":"2012-04-17T16:12:45.713Z","type":"message"}
{"nick":"bnoordhuis","message":"spotty test","date":"2012-04-17T16:13:10.839Z","type":"message"}
{"nick":"orlandovftw","date":"2012-04-17T16:17:18.760Z","type":"join"}
{"nick":"piscisaureus_","message":"yay, uv_poll_t done","date":"2012-04-17T16:25:48.142Z","type":"message"}
{"nick":"piscisaureus_","message":"writing a test now","date":"2012-04-17T16:25:50.047Z","type":"message"}
{"nick":"saghul","message":"piscisaureus_ oh! :-)","date":"2012-04-17T16:28:25.747Z","type":"message"}
{"nick":"saghul","message":"sweet","date":"2012-04-17T16:28:32.467Z","type":"message"}
{"nick":"brson","date":"2012-04-17T16:28:38.113Z","type":"join"}
{"nick":"piscisaureus_","message":"isaacs: hey","date":"2012-04-17T16:29:46.392Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: process.env.* is expensive,  you should not call that in hot code. Cache the result instead.","date":"2012-04-17T16:30:10.030Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: woot","date":"2012-04-17T16:38:19.983Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: good call.  pushed update","date":"2012-04-17T16:39:54.531Z","type":"message"}
{"nick":"benvie","message":"process.env also has some missing implementation in it or something","date":"2012-04-17T16:40:21.221Z","type":"message"}
{"nick":"benvie","message":"I think it's like it doesn't return anything for Object.getOwnPropertyDescriptor","date":"2012-04-17T16:40:38.531Z","type":"message"}
{"nick":"benvie","message":"I have to special case it in all the introspection stuff I write =X","date":"2012-04-17T16:41:09.637Z","type":"message"}
{"nick":"benvie","message":"and then I forgot to file a bug","date":"2012-04-17T16:41:38.081Z","type":"message"}
{"nick":"mmalecki","message":"hm, jslint throws some errors in test directory, should that be a case?","date":"2012-04-17T16:41:48.689Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: we are kinda lax about linting the test dir","date":"2012-04-17T16:43:45.441Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: lib and src get linted religiously","date":"2012-04-17T16:43:53.394Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: all right","date":"2012-04-17T16:43:59.321Z","type":"message"}
{"nick":"mmalecki","message":"node kinda uses process.env without caring about caching","date":"2012-04-17T16:44:58.015Z","type":"message"}
{"nick":"mmalecki","message":"at least that's the impression I got","date":"2012-04-17T16:45:07.434Z","type":"message"}
{"nick":"isaacs","action":"commutes","date":"2012-04-17T16:45:21.728Z","type":"action"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-17T16:45:23.983Z","type":"quit"}
{"nick":"bnoordhuis","message":"piscisaureus_: refresh my memory","date":"2012-04-17T16:48:02.454Z","type":"message"}
{"nick":"bnoordhuis","message":"prepare handlers run before the event loop is entered","date":"2012-04-17T16:48:15.196Z","type":"message"}
{"nick":"benvie","message":"maybe it could cache internally","date":"2012-04-17T16:48:17.439Z","type":"message"}
{"nick":"bnoordhuis","message":"check handlers run after","date":"2012-04-17T16:48:18.718Z","type":"message"}
{"nick":"bnoordhuis","message":"idle handlers only if there are no pending requests or handles?","date":"2012-04-17T16:48:28.495Z","type":"message"}
{"nick":"bnoordhuis","message":"there was a zero timeout poll involved somewhere but i forgot where :)","date":"2012-04-17T16:48:54.740Z","type":"message"}
{"nick":"isaacs","date":"2012-04-17T16:49:00.583Z","type":"join"}
{"nick":"bnoordhuis","message":"also, we can probably merge most of the unix and win loop handling code soon","date":"2012-04-17T16:49:17.670Z","type":"message"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-17T16:49:59.267Z","type":"quit"}
{"nick":"tjfontaine","message":"oh that's cute, c-ares allows you to specify name servers with specific ports but doesn't actually use the specific port","date":"2012-04-17T16:51:33.720Z","type":"message"}
{"nick":"bnoordhuis","action":"is off to dinner","date":"2012-04-17T16:51:42.900Z","type":"action"}
{"nick":"piscisaureus_","message":"bnoordhuis: prepare runs just before the epoll/select/... call, check runs right after","date":"2012-04-17T16:56:06.525Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: the presence of active idle handles forces the timeout for select/epoll to be 0","date":"2012-04-17T16:56:31.847Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: idle runs right after the check handles, but only if there are no other callbacks pending","date":"2012-04-17T16:56:58.529Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: if my dns stuff gets merged, it's likely that ares would still be built in libuv right? for people doing C lookups and what not?","date":"2012-04-17T16:59:05.371Z","type":"message"}
{"nick":"mmalecki","message":"https://gist.github.com/49097cb2d400e22e91d3 <- does this patch look safe enough? got some minor startup speed up with it","date":"2012-04-17T17:02:20.844Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 250 seconds","date":"2012-04-17T17:08:34.803Z","type":"quit"}
{"nick":"saghul","message":"tjfontaine what is that dns patch? i'm curious :-)","date":"2012-04-17T17:10:40.897Z","type":"message"}
{"nick":"bulatshakirzyano","date":"2012-04-17T17:11:53.963Z","type":"join"}
{"nick":"orlandovftw","reason":"Ping timeout: 252 seconds","date":"2012-04-17T17:13:38.685Z","type":"quit"}
{"nick":"saghul","message":"ah, I see the dns patch on node","date":"2012-04-17T17:14:21.866Z","type":"message"}
{"nick":"brson","date":"2012-04-17T17:18:38.365Z","type":"join"}
{"nick":"TooTallNate","date":"2012-04-17T17:22:50.164Z","type":"join"}
{"nick":"piscisaureus_","message":"mmalecki: how big was the difference?","date":"2012-04-17T17:25:15.285Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus_: 1 ms - ~0.5 ms depending on disk cache and music in the background :)","date":"2012-04-17T17:25:42.523Z","type":"message"}
{"nick":"TooTallNate","message":"review? https://github.com/TooTallNate/node/commit/disable-raw-on-pause","date":"2012-04-17T17:25:46.065Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: what is Interface.pause supposed to do?","date":"2012-04-17T17:27:17.902Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: (and why should it set raw mode?)","date":"2012-04-17T17:27:30.305Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: for the \"terminal\" mode, readline sets raw mode at the beginning, and pauses it at the end","date":"2012-04-17T17:30:27.704Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: also it gets paused and resumed during tab-completion","date":"2012-04-17T17:30:42.814Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: hmmm.","date":"2012-04-17T17:30:58.270Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: switching between raw and non-raw is not really preferable","date":"2012-04-17T17:31:18.998Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: it was really just a copy-paste fail on my part","date":"2012-04-17T17:31:23.357Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: but that's how it was before","date":"2012-04-17T17:31:32.086Z","type":"message"}
{"nick":"coderarity","reason":"Quit: coderarity","date":"2012-04-17T17:31:40.569Z","type":"quit"}
{"nick":"piscisaureus_","message":"TooTallNate: ok - I don't blame you :-)","date":"2012-04-17T17:31:41.518Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: if it clears the raw flag when the interface stops, that's fine","date":"2012-04-17T17:32:18.750Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: but IMHO it makes no sense to do this all the time. If anything, it should just pause stdin","date":"2012-04-17T17:32:33.687Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: I don't really know how this works on linux, but the transition from buffered to raw is kind of expensive and blunt","date":"2012-04-17T17:33:15.610Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: so do you think readline should only call setRawMode() at the beginning and when it's \"done\" then?","date":"2012-04-17T17:33:21.532Z","type":"message"}
{"nick":"piscisaureus_","message":"It involves killing a thread etc","date":"2012-04-17T17:33:23.458Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: yeah, I don't really see why this is needed at all","date":"2012-04-17T17:33:43.867Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: because \"terminal\" mode echos the characters","date":"2012-04-17T17:33:59.541Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: so, why would we want that to happen during tab completion?","date":"2012-04-17T17:34:39.899Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: i think it was something about buffering the input chars until the async tab completion functions completed. but i agree, that's probably wrong (i didn't add that part ;) )","date":"2012-04-17T17:35:25.528Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: well, at least on windows the effect is exactly the opposite","date":"2012-04-17T17:35:52.652Z","type":"message"}
{"nick":"TooTallNate","message":"lol","date":"2012-04-17T17:36:05.409Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: a transition actually flushes the buffer","date":"2012-04-17T17:36:13.109Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: I think it would be best to just pause the underlying stream","date":"2012-04-17T17:36:57.139Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: i agree, so then i think we only call setRawMode() during createInterface() and Interface#close()","date":"2012-04-17T17:37:31.630Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: yeah","date":"2012-04-17T17:37:40.967Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: agreed","date":"2012-04-17T17:37:47.470Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: then tab completion won't call setRawMode()","date":"2012-04-17T17:37:48.059Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: yep","date":"2012-04-17T17:37:54.497Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: ok, i'll adjust the patch","date":"2012-04-17T17:38:06.628Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: I don't know if tab completion involves any async calls","date":"2012-04-17T17:38:08.212Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: if it does you may want to pause the stream while doing that","date":"2012-04-17T17:38:18.695Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: not for the repl, but it *can* according to the docs","date":"2012-04-17T17:38:29.176Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: otherwise even pausing is not necessary","date":"2012-04-17T17:38:29.372Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: i.e. if you're using readline for your own custom stuff","date":"2012-04-17T17:38:46.095Z","type":"message"}
{"nick":"piscisaureus_","message":"ah, right","date":"2012-04-17T17:38:58.551Z","type":"message"}
{"nick":"isaacs","date":"2012-04-17T17:39:10.542Z","type":"join"}
{"nick":"TooTallNate","message":"piscisaureus_: but should be able to adjust the tab-completion code to be smart about calling pause()","date":"2012-04-17T17:39:38.061Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: maybe you want to call SetRawMode(true) after eval()ing a user command","date":"2012-04-17T17:39:42.114Z","type":"message"}
{"nick":"TooTallNate","message":"but checking if the function is async","date":"2012-04-17T17:39:44.393Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: yeah well.","date":"2012-04-17T17:40:02.729Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: I think pause() is cheap on any platform","date":"2012-04-17T17:40:12.396Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: maybe it is good to leave the SetRawMode(true) there","date":"2012-04-17T17:40:36.641Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: so if the user does stdin.setRawMode(false) then it won't break the reapl","date":"2012-04-17T17:40:54.961Z","type":"message"}
{"nick":"piscisaureus_","message":"*repl","date":"2012-04-17T17:40:56.460Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: haha, you can do that in the repl now :p","date":"2012-04-17T17:41:17.916Z","type":"message"}
{"nick":"TooTallNate","message":"it's *sorta* breaks","date":"2012-04-17T17:41:24.775Z","type":"message"}
{"nick":"TooTallNate","message":"but fixes itself when you tab-complete something :D","date":"2012-04-17T17:41:39.335Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: oh well, if it doesn't break too badly then I also don't care","date":"2012-04-17T17:41:40.328Z","type":"message"}
{"nick":"piscisaureus_","message":"heh","date":"2012-04-17T17:41:50.062Z","type":"message"}
{"nick":"TooTallNate","message":"(since tab-complete calls pause()/resume())","date":"2012-04-17T17:42:00.404Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: well if I do that then <tab> no longer works so","date":"2012-04-17T17:42:02.248Z","type":"message"}
{"nick":"TooTallNate","message":"oh right","date":"2012-04-17T17:42:08.042Z","type":"message"}
{"nick":"TooTallNate","message":"heh","date":"2012-04-17T17:42:08.795Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: you know what, screw it. If the user wants to fuck up stdin, he should do it","date":"2012-04-17T17:42:32.649Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus_: ++","date":"2012-04-17T17:42:49.424Z","type":"message"}
{"nick":"kohai","message":"piscisaureus_ has 8 beers","date":"2012-04-17T17:42:49.913Z","type":"message"}
{"nick":"piscisaureus_","message":"it still somewhat works, so he can always rever","date":"2012-04-17T17:42:50.708Z","type":"message"}
{"nick":"piscisaureus_","message":"t","date":"2012-04-17T17:42:57.303Z","type":"message"}
{"nick":"TooTallNate","message":"lol","date":"2012-04-17T17:43:11.726Z","type":"message"}
{"nick":"TooTallNate","message":"we have readline#close() in the docs","date":"2012-04-17T17:43:17.576Z","type":"message"}
{"nick":"TooTallNate","message":"but it doens't exist :\\","date":"2012-04-17T17:43:21.654Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: well, time for a real patch, then :-)","date":"2012-04-17T17:43:35.882Z","type":"message"}
{"nick":"TooTallNate","message":":)","date":"2012-04-17T17:43:56.655Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate++","date":"2012-04-17T17:44:25.683Z","type":"message"}
{"nick":"kohai","message":"TooTallNate has 12 beers","date":"2012-04-17T17:44:26.328Z","type":"message"}
{"nick":"orlandovftw","date":"2012-04-17T17:44:32.524Z","type":"join"}
{"nick":"piscisaureus_","message":"One point for the \"The Exterminator Award for best bug crusher. \"","date":"2012-04-17T17:44:53.139Z","type":"message"}
{"nick":"TooTallNate","message":"niceeeeee","date":"2012-04-17T17:45:03.332Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-17T17:45:23.164Z","type":"quit"}
{"nick":"TooTallNate","message":"bnoordhuis deserves some \"most patches from others Award\"","date":"2012-04-17T17:45:25.958Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis deserver the \"most awkwardly bad jokes\" award","date":"2012-04-17T17:49:42.826Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: i'm not sure that's something we want to reward","date":"2012-04-17T17:53:49.862Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: well giving someone a reward for *that* is a good way of signaling that, right?","date":"2012-04-17T17:54:50.662Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis's jokes are awkward? oh come on.","date":"2012-04-17T17:56:02.014Z","type":"message"}
{"nick":"tjfontaine","message":"saghul: yes, js dns implementation","date":"2012-04-17T17:56:32.969Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: \"most bugs closed for any or no reason\" ;)","date":"2012-04-17T17:57:51.929Z","type":"message"}
{"nick":"isaacs","message":"now THAT's a service to the node project, for reals.","date":"2012-04-17T17:58:10.764Z","type":"message"}
{"nick":"isaacs","message":"\"most patches merged\"","date":"2012-04-17T17:58:17.688Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: LOL","date":"2012-04-17T17:58:36.564Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: most UNIX users upset <-- that one's for me","date":"2012-04-17T17:58:52.658Z","type":"message"}
{"nick":"mmalecki","message":"top libuv committer?","date":"2012-04-17T17:59:08.471Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: so http://nodejs.org/dist/v0.7.7/docs/api/readline.html","date":"2012-04-17T17:59:10.234Z","type":"message"}
{"nick":"mmalecki","message":"http://github-high-scores.heroku.com/joyent/libuv/high_scores","date":"2012-04-17T17:59:12.914Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: pause() is how you say you're \"done\"","date":"2012-04-17T17:59:18.540Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: but maybe we should just put .close() back","date":"2012-04-17T17:59:27.509Z","type":"message"}
{"nick":"piscisaureus_","message":"> rl.write()#","date":"2012-04-17T18:00:29.065Z","type":"message"}
{"nick":"piscisaureus_","message":"> Writes to output stream.","date":"2012-04-17T18:00:29.262Z","type":"message"}
{"nick":"piscisaureus_","message":"> This will also resume the input stream if it has been paused.","date":"2012-04-17T18:00:29.262Z","type":"message"}
{"nick":"piscisaureus_","message":"EH?","date":"2012-04-17T18:00:31.444Z","type":"message"}
{"nick":"`3rdEden","date":"2012-04-17T18:01:00.529Z","type":"join"}
{"nick":"piscisaureus_","message":"TooTallNate: *shrug* Whatever you think is best.","date":"2012-04-17T18:01:24.740Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: But +1 for documentation consistent with implementation :-)","date":"2012-04-17T18:01:43.279Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: and another +1 for not calling setRawMode often","date":"2012-04-17T18:01:59.990Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: it turns out the missing .close() function was cause I was looking at the 0.6.15 docs","date":"2012-04-17T18:02:11.136Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 245 seconds","date":"2012-04-17T18:11:51.144Z","type":"quit"}
{"nick":"dap","date":"2012-04-17T18:12:10.133Z","type":"join"}
{"nick":"coderarity","date":"2012-04-17T18:15:46.610Z","type":"join"}
{"nick":"mikeal","date":"2012-04-17T18:20:25.546Z","type":"join"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-17T18:29:08.579Z","type":"quit"}
{"nick":"isaacs","date":"2012-04-17T18:30:32.026Z","type":"join"}
{"nick":"TooTallNate","message":"piscisaureus_: review round 2? https://github.com/TooTallNate/node/compare/disable-raw-on-pause","date":"2012-04-17T18:46:07.085Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: fyi test-fs-watch is still failing on OS X (do we need to update libuv in node?)","date":"2012-04-17T18:47:59.774Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: please lcase the test filename","date":"2012-04-17T18:49:06.760Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: you mean setRawMode?","date":"2012-04-17T18:49:27.232Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2012-04-17T18:49:29.975Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: set-raw-mode?","date":"2012-04-17T18:49:31.075Z","type":"message"}
{"nick":"isaacs","message":"sure","date":"2012-04-17T18:49:33.879Z","type":"message"}
{"nick":"TooTallNate","message":"ok","date":"2012-04-17T18:49:35.753Z","type":"message"}
{"nick":"isaacs","message":"uppercase filenames are landminew","date":"2012-04-17T18:49:49.348Z","type":"message"}
{"nick":"isaacs","message":"*landmines","date":"2012-04-17T18:49:51.969Z","type":"message"}
{"nick":"isaacs","message":"with notable exceptions: README, Makefile, etc.","date":"2012-04-17T18:50:06.497Z","type":"message"}
{"nick":"isaacs","message":"ok, i'm gonna clean up the domains3 branch a little bit, and land it","date":"2012-04-17T18:52:15.355Z","type":"message"}
{"nick":"isaacs","message":"with --no-ff","date":"2012-04-17T18:52:18.065Z","type":"message"}
{"nick":"kohai","message":"with has -1 beer","date":"2012-04-17T18:52:18.511Z","type":"message"}
{"nick":"isaacs","message":"with -- indeed","date":"2012-04-17T18:52:24.197Z","type":"message"}
{"nick":"kohai","message":"with has -2 beers","date":"2012-04-17T18:52:24.734Z","type":"message"}
{"nick":"isaacs","message":"so slow and hard to optimize","date":"2012-04-17T18:52:31.423Z","type":"message"}
{"nick":"mmalecki","message":"hahaha","date":"2012-04-17T18:52:33.000Z","type":"message"}
{"nick":"TooTallNate","message":"lol","date":"2012-04-17T18:52:46.542Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs++","date":"2012-04-17T18:52:54.033Z","type":"message"}
{"nick":"kohai","message":"isaacs has 14 beers","date":"2012-04-17T18:52:54.648Z","type":"message"}
{"nick":"mmalecki","message":"kohai is more clever than you think!","date":"2012-04-17T18:53:02.301Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: lgtm if it works and passes the tests","date":"2012-04-17T18:53:11.998Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: thanks","date":"2012-04-17T18:53:34.030Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: I agree about the case change btw","date":"2012-04-17T18:53:39.921Z","type":"message"}
{"nick":"piscisaureus_","message":"should be lowered","date":"2012-04-17T18:53:51.458Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: yup, done already :)","date":"2012-04-17T18:53:53.052Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303Nathan Rajlich\u000f \u000307master\u000f * r\u0002e621250\u000f \u000310\u000f/ (2 files)\u0002:\u000f test: lowercase setRawMode() test case filename (+5 more commits...) - http://git.io/jQCATw","date":"2012-04-17T18:54:34.578Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-17T18:57:13.253Z","type":"quit"}
{"nick":"brson","date":"2012-04-17T19:03:15.729Z","type":"join"}
{"nick":"`3rdEden","reason":"Quit: Leaving...","date":"2012-04-17T19:12:22.176Z","type":"quit"}
{"nick":"`3rdEden","date":"2012-04-17T19:17:52.473Z","type":"join"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-04-17T19:44:24.302Z","type":"quit"}
{"nick":"bulatshakirzyano","reason":"Quit: Computer has gone to sleep.","date":"2012-04-17T19:44:32.601Z","type":"quit"}
{"nick":"coderarity","reason":"Quit: coderarity","date":"2012-04-17T19:45:40.547Z","type":"quit"}
{"nick":"dylukes","date":"2012-04-17T19:46:46.358Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-04-17T19:59:18.913Z","type":"join"}
{"nick":"piscisaureus_","message":"igorzi: hey","date":"2012-04-17T20:00:10.297Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: yt?","date":"2012-04-17T20:00:30.101Z","type":"message"}
{"nick":"`3rdEden","reason":"Quit: Leaving...","date":"2012-04-17T20:08:41.125Z","type":"quit"}
{"nick":"coderarity","date":"2012-04-17T20:31:53.021Z","type":"join"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u00028673a4a\u000f \u000310\u000f/ (31 files in 6 dirs)\u0002:\u000f Merge branch 'domains3' (+13 more commits...) - http://git.io/-g49gw","date":"2012-04-17T20:37:23.448Z","type":"message"}
{"nick":"isaacs","message":"bam.","date":"2012-04-17T20:37:26.592Z","type":"message"}
{"nick":"TooTallNate","message":"nice :)","date":"2012-04-17T20:39:13.755Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: close? https://github.com/joyent/node/issues/2134","date":"2012-04-17T20:40:23.297Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: ++ !!!","date":"2012-04-17T20:45:26.668Z","type":"message"}
{"nick":"kohai","message":"isaacs has 15 beers","date":"2012-04-17T20:45:27.429Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs++","date":"2012-04-17T20:49:41.424Z","type":"message"}
{"nick":"kohai","message":"isaacs has 16 beers","date":"2012-04-17T20:49:41.620Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-17T20:52:49.325Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] Skomski/node#10 (master - e9ad453 : Karl Skomski): The build is still failing.","date":"2012-04-17T20:52:49.525Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/Skomski/node/compare/a30013a...e9ad453","date":"2012-04-17T20:52:49.525Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/Skomski/node/builds/1115214","date":"2012-04-17T20:52:49.525Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-17T20:52:49.525Z","type":"part"}
{"nick":"igorzi","message":"piscisaureus_: hey.. what's up?","date":"2012-04-17T20:53:28.582Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: hey","date":"2012-04-17T20:53:35.944Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: do you know if it is possible to figure out somehow which iocp is associated with a file handle?","date":"2012-04-17T20:53:54.961Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: nope..","date":"2012-04-17T20:54:39.996Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: you don't know, or it is not possible?","date":"2012-04-17T20:54:54.108Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: sorry, don't know","date":"2012-04-17T20:55:17.591Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: ah, right","date":"2012-04-17T20:55:26.573Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: i can find out","date":"2012-04-17T20:55:50.866Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: if it is not too much effort :-)","date":"2012-04-17T20:56:14.189Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: I can try to figure it out myself","date":"2012-04-17T20:56:24.108Z","type":"message"}
{"nick":"piscisaureus_","message":"I wonder if I am being reasonable for wanting to know these things...","date":"2012-04-17T20:57:52.559Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: how will you use that info?","date":"2012-04-17T21:00:12.474Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: so here's the thing","date":"2012-04-17T21:00:38.771Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: for uv_poll_t I try to associate the socket with an iocp","date":"2012-04-17T21:00:52.232Z","type":"message"}
{"nick":"piscisaureus_","message":"so I can use the overlapped select mechanism","date":"2012-04-17T21:01:03.020Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: but that might fail if the socket is already associated with an iocp","date":"2012-04-17T21:01:40.337Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: so then I'd switch to fallback mode","date":"2012-04-17T21:01:54.587Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: but - under some circumstances the user might create the poll watcher, then destroy it again, then create a new one for the same socket","date":"2012-04-17T21:02:20.947Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: e.g. a naive user that wants to use uv_poll_t to integrate cares would do that","date":"2012-04-17T21:02:56.081Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: so you'll want to know that it was already associated to your iocp?","date":"2012-04-17T21:03:27.745Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: so the second time the poll watcher is created, CreateIoCompletionPort fails because it is already associated with a completion port","date":"2012-04-17T21:03:27.949Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: yes","date":"2012-04-17T21:03:34.453Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: i presume that CreateIoCompletionPort fails if you try to associate it to iocp that it is already associated with?","date":"2012-04-17T21:04:38.986Z","type":"message"}
{"nick":"rendar","message":"the associated IOC port is somewhere in the FileObject, don't know if you can access it, in usermode","date":"2012-04-17T21:04:45.281Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: yes, I tried","date":"2012-04-17T21:04:47.986Z","type":"message"}
{"nick":"rendar","message":"piscisaureus_: uhm, why you want to associate a handle both to overlapped select and iocp?","date":"2012-04-17T21:07:37.196Z","type":"message"}
{"nick":"rendar","message":"i mean, you want to associate it on one of them, but why not stick using only iocps?","date":"2012-04-17T21:07:54.444Z","type":"message"}
{"nick":"piscisaureus_","message":"rendar: huh","date":"2012-04-17T21:08:09.876Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: actually I suddenly have an enlightment moment","date":"2012-04-17T21:08:50.474Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: so no hurry","date":"2012-04-17T21:08:59.837Z","type":"message"}
{"nick":"rendar","message":"sorry, i've expressed myself very badly :) i meant: why not just using only io completion ports, instead of using also overlapped select?","date":"2012-04-17T21:09:02.360Z","type":"message"}
{"nick":"piscisaureus_","message":"rendar: this is just for external libraries that use \"readyness notifications\" to integrate with the main event loop. Like c-ares does.","date":"2012-04-17T21:09:52.477Z","type":"message"}
{"nick":"rendar","message":"i see","date":"2012-04-17T21:10:03.638Z","type":"message"}
{"nick":"rendar","message":"yes, iocp don't have readyness, and this would be a problem i guess","date":"2012-04-17T21:10:20.458Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: I think that this overlapped select thing always posts to the iocp of the first socket in the select set.","date":"2012-04-17T21:10:54.414Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: so if I can create another socket and associate that, we'd be set :-)","date":"2012-04-17T21:11:50.044Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: oh.. that works :)","date":"2012-04-17T21:12:02.057Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: the only problem is now that the socket needs to be of the same type (e.g. managed by the same LSP) as the polled socket. So I don't know exactly how to go about that.","date":"2012-04-17T21:12:47.064Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303Dave Pacheco\u000f \u000307master\u000f * r\u00028559a4a\u000f \u000310\u000f/ node.gyp \u0002:\u000f Fix 64-bit SmartOS build - http://git.io/J5a3qg","date":"2012-04-17T21:35:04.115Z","type":"message"}
{"nick":"pfox___","reason":"Read error: Operation timed out","date":"2012-04-17T21:38:34.235Z","type":"quit"}
{"nick":"orlandovftw","reason":"Ping timeout: 276 seconds","date":"2012-04-17T21:41:25.603Z","type":"quit"}
{"nick":"mjr_","message":"What's the current thinking on the idle notifications and whether they are ruining performance?","date":"2012-04-17T21:43:39.059Z","type":"message"}
{"nick":"mjr_","message":"Because I kind of think they are.","date":"2012-04-17T21:43:44.693Z","type":"message"}
{"nick":"mjr_","message":"http://ranney.com/hs1.svg","date":"2012-04-17T21:44:12.836Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: they're used to kick off the gc when the system is supposedly idle","date":"2012-04-17T21:46:52.349Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: nobody knows really","date":"2012-04-17T21:47:04.322Z","type":"message"}
{"nick":"bnoordhuis","message":"though the algorithm can probably be improved","date":"2012-04-17T21:47:07.157Z","type":"message"}
{"nick":"mjr_","message":"So there was that blog post about disabling idle notifications using some flag that I don't see in 0.6.","date":"2012-04-17T21:47:23.081Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: but typically those callbacks should only be made after the system has been idle for 2 seconds","date":"2012-04-17T21:47:31.160Z","type":"message"}
{"nick":"mjr_","message":"And I think ryah had a patch a while back against 0.6 for that.","date":"2012-04-17T21:47:33.209Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: it's kind of sad that the flame graph does not show the time spent in epoll","date":"2012-04-17T21:48:26.849Z","type":"message"}
{"nick":"piscisaureus_","message":"or what have you on solaris","date":"2012-04-17T21:48:33.208Z","type":"message"}
{"nick":"piscisaureus_","message":"port_getn","date":"2012-04-17T21:48:35.522Z","type":"message"}
{"nick":"mjr_","message":"It looks to me like things can go over a cliff with GC, and I'm wondering if that's because the idle notification gets out of control.","date":"2012-04-17T21:48:45.760Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: because now we cannot see how busy that process really is","date":"2012-04-17T21:48:47.871Z","type":"message"}
{"nick":"mjr_","message":"And perhaps time spent in GC counts against idle time, so it fires immediately?","date":"2012-04-17T21:48:55.850Z","type":"message"}
{"nick":"dap","message":"piscisaureus_: what do you mean?","date":"2012-04-17T21:49:02.320Z","type":"message"}
{"nick":"mjr_","message":"Anyway, none of my processes will ever be idle for 2 seconds, ever.","date":"2012-04-17T21:49:15.155Z","type":"message"}
{"nick":"dap","message":"mjr_: how long a sample was that flame graph?","date":"2012-04-17T21:49:21.778Z","type":"message"}
{"nick":"mjr_","message":"dap: 30","date":"2012-04-17T21:49:25.232Z","type":"message"}
{"nick":"dap","message":"love it, btw :)","date":"2012-04-17T21:49:25.431Z","type":"message"}
{"nick":"dap","message":"mjr_: what's the profiling rate?","date":"2012-04-17T21:49:32.683Z","type":"message"}
{"nick":"mjr_","message":"root@prod-2134:~# dtrace -n 'profile-97 /pid == 4453 || pid == 5246 || pid == 3638 || pid == 4057/ { @[jstack(100, 8000)] = count(); } tick-30s { exit(0); }' -o out.stacks-hs1","date":"2012-04-17T21:49:43.255Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: then maybe the algorithm in node is broken?","date":"2012-04-17T21:49:48.298Z","type":"message"}
{"nick":"mjr_","message":"So that was 4 processes that were all stuck at 100% CPU, but still slowly doing actual work.","date":"2012-04-17T21:50:02.695Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: we've been there before :-)","date":"2012-04-17T21:50:03.297Z","type":"message"}
{"nick":"mjr_","message":"Heap size was 400MB, not THAT large.","date":"2012-04-17T21:50:11.100Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: the timeout is 5 seconds even, not 2","date":"2012-04-17T21:51:12.361Z","type":"message"}
{"nick":"mjr_","message":"Is it safe to disable idle notification?","date":"2012-04-17T21:51:19.355Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: yes","date":"2012-04-17T21:51:25.768Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: completely safe","date":"2012-04-17T21:51:28.769Z","type":"message"}
{"nick":"mjr_","message":"Wonderful.  I think I'm going to comment it out of our node build and see if that helps.","date":"2012-04-17T21:51:44.469Z","type":"message"}
{"nick":"bnoordhuis","message":"TooTallNate: yes, libuv needs an update","date":"2012-04-17T21:52:35.148Z","type":"message"}
{"nick":"bnoordhuis","message":"but don't do that right now","date":"2012-04-17T21:52:42.983Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: careful though. The code is messy and intricate.","date":"2012-04-17T21:52:56.045Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: probably best to make node::Idle a no-op and see what that does.","date":"2012-04-17T21:53:11.408Z","type":"message"}
{"nick":"mjr_","message":"BTW, we are still suffering with around 3 process lockups / day with this TLS thing.  It's more painful than this GC thing, if you can believe it.","date":"2012-04-17T21:53:25.009Z","type":"message"}
{"nick":"coderarity","reason":"Quit: coderarity","date":"2012-04-17T21:53:36.647Z","type":"quit"}
{"nick":"piscisaureus_","message":"that is bnoordhuis' territory","date":"2012-04-17T21:54:00.998Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: let me know if disabling the idle stuff makes it better for you","date":"2012-04-17T21:54:24.327Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: I would not mind ripping it out of node entirely.","date":"2012-04-17T21:54:35.452Z","type":"message"}
{"nick":"mjr_","message":"I can see why it's there, if you have a really idle process, you might be surprised why your heap doesn't compact as often as you might expect.","date":"2012-04-17T21:54:59.552Z","type":"message"}
{"nick":"mjr_","message":"But it will once you do more work with it, so it seems kind of pointless to have in there at all.","date":"2012-04-17T21:55:25.967Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: tls is on my to do list","date":"2012-04-17T21:55:31.669Z","type":"message"}
{"nick":"bnoordhuis","message":"but so are a lot of other things, i'm afraid","date":"2012-04-17T21:55:40.833Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm catching up on my backlog though!","date":"2012-04-17T21:55:53.558Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: I think at the very least we should not trigger it unless the process is really idle for 5 seconds or so","date":"2012-04-17T21:55:54.261Z","type":"message"}
{"nick":"mjr_","message":"piscisaureus_: It would be a lot less code and mystery though if you just removed it completely.","date":"2012-04-17T21:56:40.365Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: so one of the problems I can spot in there is that V8::IdleNotification keeps getting called until it returns true","date":"2012-04-17T21:58:15.490Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: that is - there is no interval between calls any more","date":"2012-04-17T21:58:29.982Z","type":"message"}
{"nick":"mjr_","message":"I was just looking at that, thinking of adding some logging there.","date":"2012-04-17T21:58:34.103Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: I think at the very least it should call uv_idle_stop regardless of the result of v8::IdleNotification()","date":"2012-04-17T22:00:06.264Z","type":"message"}
{"nick":"mjr_","message":"I'm just going to put \"return;\" as the first line of node::Idle()","date":"2012-04-17T22:00:30.699Z","type":"message"}
{"nick":"piscisaureus_","message":"kk","date":"2012-04-17T22:00:38.442Z","type":"message"}
{"nick":"piscisaureus_","message":"again, let me know what it does","date":"2012-04-17T22:00:45.999Z","type":"message"}
{"nick":"piscisaureus_","message":"I will be offline now.","date":"2012-04-17T22:00:53.416Z","type":"message"}
{"nick":"mjr_","message":"woah","date":"2012-04-17T22:01:08.059Z","type":"message"}
{"nick":"mjr_","message":"OK, well that's it","date":"2012-04-17T22:01:12.412Z","type":"message"}
{"nick":"mjr_","message":"I put a log line in there, and it's firing about 200 times / sec","date":"2012-04-17T22:01:28.467Z","type":"message"}
{"nick":"piscisaureus_","message":"aha","date":"2012-04-17T22:01:35.339Z","type":"message"}
{"nick":"piscisaureus_","message":"not good","date":"2012-04-17T22:01:41.549Z","type":"message"}
{"nick":"piscisaureus_","message":"weird though - we've had that before but it was fixed","date":"2012-04-17T22:01:49.623Z","type":"message"}
{"nick":"mjr_","message":"I'm on 0.6.  Maybe it's fixed in master","date":"2012-04-17T22:02:05.169Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: no it was in 0.5.4 or something :_)","date":"2012-04-17T22:02:14.166Z","type":"message"}
{"nick":"bnoordhuis","message":"no, master does the same thing","date":"2012-04-17T22:02:15.054Z","type":"message"}
{"nick":"piscisaureus_","message":"ah","date":"2012-04-17T22:02:21.738Z","type":"message"}
{"nick":"piscisaureus_","message":"this warrants a 0.6.16","date":"2012-04-17T22:02:26.509Z","type":"message"}
{"nick":"piscisaureus_","message":":-)","date":"2012-04-17T22:02:28.801Z","type":"message"}
{"nick":"mjr_","message":"yeah, pretty broken.  I wonder how nobody noticed this?","date":"2012-04-17T22:03:15.152Z","type":"message"}
{"nick":"mjr_","message":"I guess with small heaps it ends up being OK.","date":"2012-04-17T22:03:23.567Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: what are your thoughts on exposing ares_get_servers through cares_wrap?","date":"2012-04-17T22:03:27.853Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: to what purpose?","date":"2012-04-17T22:04:05.035Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe if ares_set_servers was exposed too","date":"2012-04-17T22:04:35.034Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: it's about the only sane way I'm ever going to get the win32 platform nameservers :)","date":"2012-04-17T22:04:38.747Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: when would you care about what nameservers you're talking to?","date":"2012-04-17T22:05:12.592Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: my native-dns needs to determine where requests should go, and ares_library_init already does the needful fallback through different NT methods, and registry hacks","date":"2012-04-17T22:06:44.587Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: okay. i accept patches :)","date":"2012-04-17T22:07:17.312Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: not for lib/dns.js but for src/cares_wrap.cc so \"private\"","date":"2012-04-17T22:07:18.377Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2012-04-17T22:07:26.849Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: that could also explain why we spend so much time in gc in benchmarks...","date":"2012-04-17T22:09:52.770Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: possibly. the benchmarks should never give the idle watcher a chance to run though","date":"2012-04-17T22:10:56.590Z","type":"message"}
{"nick":"bnoordhuis","message":"that's easy to verify of course","date":"2012-04-17T22:12:00.141Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, i don't think that actually happens","date":"2012-04-17T22:13:06.446Z","type":"message"}
{"nick":"piscisaureus_","message":"ah wait","date":"2012-04-17T22:13:21.217Z","type":"message"}
{"nick":"piscisaureus_","message":"there is logic in there that starts the gc always if heap usage exceeds 128M\\","date":"2012-04-17T22:13:36.261Z","type":"message"}
{"nick":"piscisaureus_","message":"See CheckStatus","date":"2012-04-17T22:13:44.560Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- mjr_","date":"2012-04-17T22:13:47.385Z","type":"message"}
{"nick":"mjr_","message":"Yeah, in there now.","date":"2012-04-17T22:14:05.179Z","type":"message"}
{"nick":"bnoordhuis","message":"hrm, indeed - disabling the 128M check makes the idle watcher run","date":"2012-04-17T22:14:43.346Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: huh","date":"2012-04-17T22:15:19.338Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: oh, you removed the if(","date":"2012-04-17T22:15:37.815Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: yeah, like this: https://gist.github.com/05a5ab4ae10dcdeea8ed","date":"2012-04-17T22:15:49.293Z","type":"message"}
{"nick":"piscisaureus_","message":"right","date":"2012-04-17T22:16:06.237Z","type":"message"}
{"nick":"piscisaureus_","message":"omg","date":"2012-04-17T22:16:08.739Z","type":"message"}
{"nick":"piscisaureus_","message":"I think this is going to be important for c9 as well","date":"2012-04-17T22:16:23.350Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2012-04-17T22:16:26.872Z","type":"message"}
{"nick":"piscisaureus_","message":"we should come up with another algorithm","date":"2012-04-17T22:16:49.557Z","type":"message"}
{"nick":"piscisaureus_","message":"I am thinking","date":"2012-04-17T22:16:52.743Z","type":"message"}
{"nick":"piscisaureus_","message":"why not just start a 1s timer and reset it every time in uv_prepare_t","date":"2012-04-17T22:17:24.847Z","type":"message"}
{"nick":"piscisaureus_","message":"and run the idleNotification only if the timer expires?","date":"2012-04-17T22:17:45.625Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: ^ ?","date":"2012-04-17T22:17:48.627Z","type":"message"}
{"nick":"mjr_","message":"I still don't see why you want to deal with this at all.  Won't V8 compact itself through normal use?","date":"2012-04-17T22:17:59.240Z","type":"message"}
{"nick":"bnoordhuis","message":"i suppose that could work","date":"2012-04-17T22:18:00.506Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: yeah, but you may get random big delays","date":"2012-04-17T22:18:18.645Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: yeah but only if it has to","date":"2012-04-17T22:18:21.995Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: but if node is blocked in epoll/port_getn it won't","date":"2012-04-17T22:18:52.877Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: but we can simplify and make it happen only if node is really idle for 1 second or so","date":"2012-04-17T22:21:03.759Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: so for you it would never really kick in","date":"2012-04-17T22:21:11.700Z","type":"message"}
{"nick":"pfox___","date":"2012-04-17T22:21:44.738Z","type":"join"}
{"nick":"bnoordhuis","message":"also, it shouldn't do while (!V8::IdleNotification())","date":"2012-04-17T22:21:52.507Z","type":"message"}
{"nick":"mjr_","message":"heh","date":"2012-04-17T22:22:16.662Z","type":"message"}
{"nick":"mjr_","message":"Indeed","date":"2012-04-17T22:22:19.373Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u0002079b813\u000f \u000310\u000f/ test/message/undefined_reference_in_new_context.out \u0002:\u000f test: Minor change to message/undefined_reference_in_new_context - http://git.io/gWxV0Q","date":"2012-04-17T22:31:07.333Z","type":"message"}
{"nick":"isaacs","message":"anything else that need to get in 0.7.8?","date":"2012-04-17T22:31:16.151Z","type":"message"}
{"nick":"isaacs","message":"we really need to get this ENOSYS working.  I'm going to temporarily just revert the 10.5 thing on the v0.7.8-release branch, unless that libuv merge can come sooner.","date":"2012-04-17T22:32:02.414Z","type":"message"}
{"nick":"TooTallNate","message":"i got mine from this morning in","date":"2012-04-17T22:32:13.098Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: rad","date":"2012-04-17T22:32:18.589Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: that's fine with me","date":"2012-04-17T22:32:18.935Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: opinions?  are we minutes away from merging in libuv master?  or keep waiting for refcount?","date":"2012-04-17T22:32:50.305Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: you can cherry-pick joyent/libuv@3c41597","date":"2012-04-17T22:34:54.445Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: sure.","date":"2012-04-17T22:35:03.483Z","type":"message"}
{"nick":"bnoordhuis","message":"that's the fix, it should apply cleanly","date":"2012-04-17T22:35:04.763Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2012-04-17T22:35:08.352Z","type":"message"}
{"nick":"rendar","date":"2012-04-17T22:36:56.970Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Ping timeout: 276 seconds","date":"2012-04-17T22:41:13.649Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-04-17T22:42:25.784Z","type":"join"}
{"nick":"piscisaureus_","message":"mjr_: maybe you should stop trying to be cool and switch to java or erlang","date":"2012-04-17T22:44:07.775Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: it does not. https://gist.github.com/2409585#L128","date":"2012-04-17T22:44:12.382Z","type":"message"}
{"nick":"mjr_","message":"piscisaureus_: Hmm, OK.  I'll think about it.  We did just hire an erlang programmer.","date":"2012-04-17T22:44:37.987Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: c# is actually a nice language too","date":"2012-04-17T22:45:48.836Z","type":"message"}
{"nick":"bnoordhuis","message":"i hear good things about clojure","date":"2012-04-17T22:46:41.179Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: want me to fix that?","date":"2012-04-17T22:46:59.015Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: wanna review? https://github.com/isaacs/node/commit/37fd953378ecdfcbe8e3656e1827b17fdc4fd969","date":"2012-04-17T22:47:15.521Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: yep, looks good","date":"2012-04-17T22:47:34.244Z","type":"message"}
{"nick":"isaacs","message":"the fix was obvious, i hope.  there's no #if for the #else to hook onto, so i presume it's fixed right to remove it","date":"2012-04-17T22:47:41.073Z","type":"message"}
{"nick":"isaacs","message":"kk testing","date":"2012-04-17T22:47:57.013Z","type":"message"}
{"nick":"isaacs","message":"thanks","date":"2012-04-17T22:47:57.818Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: does unref_in_prepare_cb pass on windows?","date":"2012-04-17T22:48:35.062Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: trying","date":"2012-04-17T22:51:09.880Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: is die test niew?","date":"2012-04-17T22:51:18.797Z","type":"message"}
{"nick":"piscisaureus_","message":"*nieuw?","date":"2012-04-17T22:51:22.336Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: async faalt. ergens wordt uv_async_send op een closed handle aangeroepen","date":"2012-04-17T22:52:00.131Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: maar voor de rest geen failures (latest master)","date":"2012-04-17T22:52:10.366Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: okay. if it passes, it's accidental. look closely at test-ref.c:prepare_cb :)","date":"2012-04-17T22:52:39.355Z","type":"message"}
{"nick":"pfox___","reason":"Ping timeout: 240 seconds","date":"2012-04-17T22:53:41.693Z","type":"quit"}
{"nick":"piscisaureus_","message":"bnoordhuis: ja, wat is daar mee?","date":"2012-04-17T22:54:02.003Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: looks good to me","date":"2012-04-17T22:54:12.176Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: uv_unref((uv_handle_t*)&h); <- it's taking the address of a pointer","date":"2012-04-17T22:54:40.820Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: huh, not here","date":"2012-04-17T22:54:55.149Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: unlikely also, since uv_unref is supposed to take an uv_loop_t","date":"2012-04-17T22:55:20.065Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, duh - it's only in my branch","date":"2012-04-17T22:55:28.782Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: so I think we're looking at one of your infamous fuckups here :-p","date":"2012-04-17T22:55:33.185Z","type":"message"}
{"nick":"bnoordhuis","message":"the effect was... interesting","date":"2012-04-17T22:55:58.678Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah, you end up clobbering the stack","date":"2012-04-17T22:56:15.792Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307v0.7.8-release\u000f * r\u000256bb4c2\u000f \u000310\u000f/ (4 files in 3 dirs)\u0002:\u000f (log message trimmed)","date":"2012-04-17T22:56:39.444Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f unix: don't conditionally compile kqueue fs watcher","date":"2012-04-17T22:56:39.642Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f Always compile in the kqueue-based fs event watcher and handle it at run-time","date":"2012-04-17T22:56:39.643Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f if the kernel doesn't actually support it.","date":"2012-04-17T22:56:39.643Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f Works around build issues when -mmacosx-version-min is not set properly.","date":"2012-04-17T22:56:39.643Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f Fixes joyent/node#3075.","date":"2012-04-17T22:56:40.139Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f Conflicts:","date":"2012-04-17T22:56:41.139Z","type":"message"}
{"nick":"isaacs","message":"os x: [02:00|% 100|+ 393|-   0]: Done                                                ","date":"2012-04-17T22:57:19.868Z","type":"message"}
{"nick":"piscisaureus_","message":"cool","date":"2012-04-17T22:58:06.864Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-17T22:58:32.255Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#202 (v0.7.8-release - 56bb4c2 : Ben Noordhuis): The build failed.","date":"2012-04-17T22:58:32.456Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/commit/56bb4c2","date":"2012-04-17T22:58:32.456Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1116269","date":"2012-04-17T22:58:32.456Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-17T22:58:32.456Z","type":"part"}
{"nick":"mmalecki","message":"isaacs: how do you like https://gist.github.com/49097cb2d400e22e91d3 ?","date":"2012-04-17T22:58:32.456Z","type":"message"}
{"nick":"mmalecki","message":"I guess I should just submit it as a pull request :)","date":"2012-04-17T22:59:48.110Z","type":"message"}
{"nick":"TooTallNate","message":"mmalecki: +1, but why don't you set the variables at the top?","date":"2012-04-17T22:59:50.146Z","type":"message"}
{"nick":"mmalecki","message":"TooTallNate: I like this syntax better, but yeah, I guess I could :)","date":"2012-04-17T23:00:18.104Z","type":"message"}
{"nick":"TooTallNate","message":"^ would be more readable IMO","date":"2012-04-17T23:00:20.772Z","type":"message"}
{"nick":"TooTallNate","message":"mmalecki: frankly i don't like it. it almost looks like an accident (like you're *wanting* to compare the values but typo'd)","date":"2012-04-17T23:01:01.640Z","type":"message"}
{"nick":"mmalecki","message":"TooTallNate: you know what jshint calls it?","date":"2012-04-17T23:01:25.822Z","type":"message"}
{"nick":"TooTallNate","message":"no, what?","date":"2012-04-17T23:01:34.075Z","type":"message"}
{"nick":"mmalecki","message":"TooTallNate: boss :D","date":"2012-04-17T23:01:40.530Z","type":"message"}
{"nick":"piscisaureus_","message":"but it's off by default","date":"2012-04-17T23:02:37.459Z","type":"message"}
{"nick":"piscisaureus_","message":"I agree with TooTallNate","date":"2012-04-17T23:02:57.248Z","type":"message"}
{"nick":"TooTallNate","message":"the mode \"only for people who know what they're doing\" :p","date":"2012-04-17T23:02:58.251Z","type":"message"}
{"nick":"TooTallNate","message":"a.k.a less readable?","date":"2012-04-17T23:03:11.745Z","type":"message"}
{"nick":"piscisaureus_","message":"mmalecki: I think you should wait for a green flag from isaac and fix it then","date":"2012-04-17T23:03:21.230Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: parens around assignment, signals intent","date":"2012-04-17T23:04:25.578Z","type":"message"}
{"nick":"bnoordhuis","message":"but not doing assignment in an if statement is even better","date":"2012-04-17T23:04:56.757Z","type":"message"}
{"nick":"isaacs","message":"what's this?","date":"2012-04-17T23:05:02.771Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: oh, that","date":"2012-04-17T23:05:29.603Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: nah.  no need.  those functions are called exactly once.","date":"2012-04-17T23:05:36.653Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: k, fair enough","date":"2012-04-17T23:05:52.374Z","type":"message"}
{"nick":"isaacs","message":"mmalecki, piscisaureus_: also, i couldn't even detect any diff from removing the process.env in http_simple","date":"2012-04-17T23:06:18.219Z","type":"message"}
{"nick":"isaacs","message":"it's not THAT expensive.","date":"2012-04-17T23:06:23.655Z","type":"message"}
{"nick":"isaacs","message":"at least, not on unix ;)","date":"2012-04-17T23:06:26.437Z","type":"message"}
{"nick":"isaacs","message":"maybe on windows :)","date":"2012-04-17T23:06:29.437Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: yeah, I think it is slightly more expensive on windows because of the structure of the env block","date":"2012-04-17T23:07:24.517Z","type":"message"}
{"nick":"mmalecki","message":"btw, I think the code for getting an env variable could be moved to libuv","date":"2012-04-17T23:07:50.735Z","type":"message"}
{"nick":"mmalecki","message":"there's this big ifdef block in node","date":"2012-04-17T23:08:09.934Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: piscisaureus_ what do you think?","date":"2012-04-17T23:10:11.346Z","type":"message"}
{"nick":"piscisaureus_","message":"mmalecki: it's harder than you think","date":"2012-04-17T23:10:31.815Z","type":"message"}
{"nick":"piscisaureus_","message":"mmalecki: but if you can come up with something nice, go ahead","date":"2012-04-17T23:10:41.170Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus_: that's what she said!","date":"2012-04-17T23:10:43.352Z","type":"message"}
{"nick":"piscisaureus_","message":"mmalecki: I've wanted this for a long time","date":"2012-04-17T23:10:47.711Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus_: why is it that hard?","date":"2012-04-17T23:11:04.380Z","type":"message"}
{"nick":"piscisaureus_","message":"mmalecki: but it's hard to deal with stuff like, who allocates the buffer, and how big should it be?","date":"2012-04-17T23:11:18.014Z","type":"message"}
{"nick":"mmalecki","message":"oh, yeah, that's always hard","date":"2012-04-17T23:11:51.400Z","type":"message"}
{"nick":"piscisaureus_","message":"mmalecki: and - do we care about updating the libcrt shadow copy of the env, or just ignore the problem and update only the win32 copy","date":"2012-04-17T23:12:04.276Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus_: I sense some great fun to be made of windows.","date":"2012-04-17T23:12:46.604Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus_: there are 2 environment copies in windows?","date":"2012-04-17T23:13:04.524Z","type":"message"}
{"nick":"piscisaureus_","message":"mmalecki: well","date":"2012-04-17T23:13:12.189Z","type":"message"}
{"nick":"piscisaureus_","message":"mmalecki: there can be as much as 4","date":"2012-04-17T23:13:18.557Z","type":"message"}
{"nick":"mmalecki","action":"chuckles","date":"2012-04-17T23:13:59.084Z","type":"action"}
{"nick":"mmalecki","message":"I guess I can look into it :)","date":"2012-04-17T23:14:36.958Z","type":"message"}
{"nick":"mmalecki","message":"but now, I'm going to sleep","date":"2012-04-17T23:15:22.540Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307reviewme\u000f * r\u0002fa12bb9\u000f \u000310\u000f/ test/test-async.c \u0002:\u000f Test: fix a race condition in 'async' test - http://git.io/l0vgOQ","date":"2012-04-17T23:15:53.441Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307reviewme\u000f * r\u00027ae14e0\u000f \u000310\u000f/ src/win/async.c \u0002:\u000f Windows: a closing async watcher should not call it's callback - http://git.io/OK275Q","date":"2012-04-17T23:15:53.667Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- bnoordhuis: review?","date":"2012-04-17T23:15:56.555Z","type":"message"}
{"nick":"piscisaureus_","message":"x2","date":"2012-04-17T23:15:58.813Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-17T23:17:45.002Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#203 (reviewme - 7ae14e0 : Bert Belder): The build is still failing.","date":"2012-04-17T23:17:45.201Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/fa12bb9^...7ae14e0","date":"2012-04-17T23:17:45.202Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1116391","date":"2012-04-17T23:17:45.202Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-17T23:17:45.202Z","type":"part"}
{"nick":"piscisaureus_","message":"I wish that the windows crt was not such an incredible piece of shit","date":"2012-04-17T23:18:29.249Z","type":"message"}
{"nick":"piscisaureus_","message":"There's a lot to complain about, but the state of the crt beats everything","date":"2012-04-17T23:18:54.348Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: lgtm but lowercase Test and Windows","date":"2012-04-17T23:23:36.096Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis taking nitpicking to the next level :-/","date":"2012-04-17T23:28:07.229Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u000220879c1\u000f \u000310\u000f/ test/test-async.c \u0002:\u000f test: fix a race condition in 'async' test - http://git.io/gXEL1w","date":"2012-04-17T23:29:29.328Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u000213b8ebd\u000f \u000310\u000f/ src/win/async.c \u0002:\u000f windows: a closing async watcher should not call it's callback - http://git.io/KLuyAA","date":"2012-04-17T23:29:29.589Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: OCD is not an acronym, it's a lifestyle","date":"2012-04-17T23:29:47.096Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: semantics arguing time, this time about write_unref_cb","date":"2012-04-17T23:30:05.520Z","type":"message"}
{"nick":"piscisaureus_","message":"bring it on","date":"2012-04-17T23:30:20.311Z","type":"message"}
{"nick":"bnoordhuis","message":"tcp_ref4 calls uv_write in a callback, then unrefs the write req","date":"2012-04-17T23:30:50.431Z","type":"message"}
{"nick":"piscisaureus_","message":"eh","date":"2012-04-17T23:31:06.745Z","type":"message"}
{"nick":"piscisaureus_","message":"it unrefs, you mean?","date":"2012-04-17T23:31:16.256Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-17T23:31:17.698Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#204 (master - 13b8ebd : Bert Belder): The build is still failing.","date":"2012-04-17T23:31:17.899Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/5345ee3...13b8ebd","date":"2012-04-17T23:31:17.900Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1116492","date":"2012-04-17T23:31:17.900Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-17T23:31:17.900Z","type":"part"}
{"nick":"bnoordhuis","message":"piscisaureus_: yeah. in master it unrefs the loop","date":"2012-04-17T23:31:35.127Z","type":"message"}
{"nick":"bnoordhuis","message":"the intent is that the write req cb should not fire","date":"2012-04-17T23:31:47.681Z","type":"message"}
{"nick":"bnoordhuis","message":"but it does because the write() succeeded immediately","date":"2012-04-17T23:32:09.376Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe unref'ing requests is just a silly thing to do","date":"2012-04-17T23:32:31.549Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: yes, I don't think we ever planned to allow that","date":"2012-04-17T23:32:48.788Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I though it was just something you used for testing","date":"2012-04-17T23:32:58.199Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, but not it's working against me :)","date":"2012-04-17T23:33:26.834Z","type":"message"}
{"nick":"piscisaureus_","message":":-)","date":"2012-04-17T23:33:40.969Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll change it to unref the handle instead, that makes more sense","date":"2012-04-17T23:33:51.946Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I would not consider calling a callback a bug when the handle is unrefed","date":"2012-04-17T23:34:10.638Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-04-17T23:34:23.274Z","type":"quit"}
{"nick":"bnoordhuis","message":"no, i suppose not. the loop is active at that time","date":"2012-04-17T23:34:50.361Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: unref is not there to avoid callbacks being made - it should just make sure that the loop doesn't block waiting for events","date":"2012-04-17T23:35:14.741Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: if you can test that uv_unref works properly any other way, just change the test and I am fine with it","date":"2012-04-17T23:35:45.731Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, bad test. i'll scrap it","date":"2012-04-17T23:35:51.552Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: otherwise we'd have to test for refcount==0 after every callback. I don't want to do that.","date":"2012-04-17T23:36:18.173Z","type":"message"}
{"nick":"piscisaureus_","message":"it makes no sense","date":"2012-04-17T23:36:20.463Z","type":"message"}
{"nick":"bnoordhuis","message":"no. there are a couple of similar tests, i suppose i should scrap those as well","date":"2012-04-17T23:36:42.717Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: yeah, but try to keep coverage okay","date":"2012-04-17T23:37:31.540Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: this is hairy territory so having tests for that is important","date":"2012-04-17T23:37:49.056Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: typically these tests were there to ensure that an uv_tcp_t would ref but an uv_write_t would not ref it again","date":"2012-04-17T23:38:39.205Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: so as long as we have tests that test the semantics that we decided on I am fine","date":"2012-04-17T23:39:01.967Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: i'll see if i can rework them into something more sensible","date":"2012-04-17T23:39:05.671Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: good","date":"2012-04-17T23:39:50.043Z","type":"message"}
{"nick":"mmalecki","new_nick":"mmalecki[zzz]","date":"2012-04-17T23:41:14.198Z","type":"nick"}
{"nick":"bnoordhuis","message":"piscisaureus_: to recap, if i uv_unref(handle), then uv_write(req, handle), then call uv_run(), is the loop supposed to block or not?","date":"2012-04-17T23:41:53.857Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: good question. I think not.","date":"2012-04-17T23:42:37.751Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but whatever is easier I guess","date":"2012-04-17T23:42:43.962Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: both have their merits","date":"2012-04-17T23:43:17.462Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: yeah, that's what i was thinking - you can argue both ways","date":"2012-04-17T23:43:28.667Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I like to let all reqs run to completion before the loop unblocks (so the req places a ref on the loop)","date":"2012-04-17T23:43:41.380Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but otoh we could argue that an uv_write should make the handle active, but if the handle is unrefed it should not block the loop","date":"2012-04-17T23:44:05.334Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I think I'd prefer option 1","date":"2012-04-17T23:44:39.408Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: yeah, i think i agree","date":"2012-04-17T23:45:03.494Z","type":"message"}
{"nick":"bnoordhuis","message":"easier to reason about","date":"2012-04-17T23:45:17.256Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: the only risk is for example the situation where you write to a pipe that has a full buffer","date":"2012-04-17T23:45:29.676Z","type":"message"}
{"nick":"piscisaureus_","message":"since that could block indefinately","date":"2012-04-17T23:45:36.926Z","type":"message"}
{"nick":"piscisaureus_","message":"but I don't really think that would cause any problems in practice","date":"2012-04-17T23:45:47.343Z","type":"message"}
{"nick":"piscisaureus_","message":"*indefinitely","date":"2012-04-17T23:45:54.988Z","type":"message"}
{"nick":"bnoordhuis","message":"no. you'd set a timer and close the pipe","date":"2012-04-17T23:45:56.216Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah","date":"2012-04-17T23:45:59.427Z","type":"message"}
{"nick":"piscisaureus_","message":"that's much better :-)","date":"2012-04-17T23:46:03.661Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: ok, so option 1 it is","date":"2012-04-17T23:46:10.594Z","type":"message"}
{"nick":"bnoordhuis","message":"cool","date":"2012-04-17T23:46:13.230Z","type":"message"}
{"nick":"piscisaureus_","message":"ok I am really checking out now.","date":"2012-04-17T23:51:01.128Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis and everyone: ttyl","date":"2012-04-17T23:51:09.831Z","type":"message"}
{"nick":"piscisaureus_","message":"oh, btw","date":"2012-04-17T23:52:35.608Z","type":"message"}
{"nick":"piscisaureus_","message":"https://github.com/piscisaureus/libuv/blob/poll/src/win/poll.c","date":"2012-04-17T23:52:36.135Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-04-17T23:52:40.020Z","type":"quit"}
