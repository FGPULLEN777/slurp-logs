{"nick":"ircretary","reason":"Remote host closed the connection","date":"2014-08-04T00:00:01.274Z","type":"quit"}
{"nick":"ircretary","date":"2014-08-04T00:00:12.075Z","type":"join"}
{"nick":"guybrush","reason":"Excess Flood","date":"2014-08-04T00:01:03.229Z","type":"quit"}
{"nick":"guybrush","date":"2014-08-04T00:01:38.173Z","type":"join"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2014-08-04T00:02:54.968Z","type":"quit"}
{"nick":"toothrot","date":"2014-08-04T00:03:52.579Z","type":"join"}
{"nick":"inolen","date":"2014-08-04T00:04:09.904Z","type":"join"}
{"nick":"zz_karupa","new_nick":"karupa","date":"2014-08-04T00:26:20.610Z","type":"nick"}
{"nick":"thlorenz","reason":"Remote host closed the connection","date":"2014-08-04T00:34:42.160Z","type":"quit"}
{"nick":"bengl","reason":"Ping timeout: 240 seconds","date":"2014-08-04T00:59:32.601Z","type":"quit"}
{"nick":"kazupon","date":"2014-08-04T01:03:03.279Z","type":"join"}
{"nick":"jgi","message":"chrisdickinson: hi Chris!","date":"2014-08-04T01:07:38.469Z","type":"message"}
{"nick":"chrisdickinson","message":"hi!","date":"2014-08-04T01:07:43.830Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: I’m looking at https://github.com/joyent/node/pull/8067","date":"2014-08-04T01:07:48.964Z","type":"message"}
{"nick":"chrisdickinson","message":"cool, thanks!","date":"2014-08-04T01:08:06.968Z","type":"message"}
{"nick":"jgi","message":"where does “ befbbad switch all comparisons over to unsigned integer comparisons”?","date":"2014-08-04T01:08:40.936Z","type":"message"}
{"nick":"chrisdickinson","message":"https://github.com/joyent/node/commit/befbbad0513c5f1075c573570a678d148b645a82#diff-a7a2d51d79b1c80c7458e0d056e3d86fR171 + https://github.com/joyent/node/commit/befbbad0513c5f1075c573570a678d148b645a82#diff-0a5d4868b2b9b17cf9e2c11f1bd1311eR54 + https://github.com/joyent/node/commit/befbbad0513c5f1075c573570a678d148b645a82#diff-0a5d4868b2b9b17cf9e2c11f1bd1311eL88","date":"2014-08-04T01:10:48.113Z","type":"message"}
{"nick":"chrisdickinson","message":"(is the sequence)","date":"2014-08-04T01:10:51.524Z","type":"message"}
{"nick":"chrisdickinson","message":"first, the uint is coerced to double, then monotonicStartTime grabs it, then the difference comparison is performed against monotonicStartTime instead of idleStart","date":"2014-08-04T01:11:40.732Z","type":"message"}
{"nick":"bengl","date":"2014-08-04T01:12:26.041Z","type":"join"}
{"nick":"jgi","message":"ah right uv_now returns an uint_64, I had missed that","date":"2014-08-04T01:13:21.632Z","type":"message"}
{"nick":"chrisdickinson","message":"the way this manifests is that https://github.com/joyent/node/blob/befbbad0513c5f1075c573570a678d148b645a82/lib/timers.js#L91-L95 diff will never be less than `msecs`, since msecs has a fractional component","date":"2014-08-04T01:14:48.648Z","type":"message"}
{"nick":"chrisdickinson","message":"so, if you have NODE_DEBUG=timer, it eventually only outputs https://gist.github.com/chrisdickinson/78a36e742f9d5f31c56b, for example","date":"2014-08-04T01:15:48.706Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: in my tests, it actually called the callback several times","date":"2014-08-04T01:16:35.489Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: sometimes a few times, sometimes even more","date":"2014-08-04T01:17:09.569Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: it didn’t really look like an unsigned/signed issue to me, but I may be wrong of course. I’m just trying to understand what’s the real issue here.","date":"2014-08-04T01:17:39.296Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: which platform are you using for your tests? and what test code are you using? The one posted here: https://github.com/joyent/node/issues/8065 ?","date":"2014-08-04T01:18:22.128Z","type":"message"}
{"nick":"chrisdickinson","message":"OSX, and the code I added to the PR","date":"2014-08-04T01:18:57.724Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: ok","date":"2014-08-04T01:19:17.795Z","type":"message"}
{"nick":"chrisdickinson","message":"also, the hapi tests hang","date":"2014-08-04T01:19:18.719Z","type":"message"}
{"nick":"chrisdickinson","message":"(which is why I started looking into this issue)","date":"2014-08-04T01:19:28.863Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: let me try that code","date":"2014-08-04T01:19:30.639Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: thank you very much for looking into it","date":"2014-08-04T01:19:51.521Z","type":"message"}
{"nick":"chrisdickinson","message":"no problem!","date":"2014-08-04T01:19:54.653Z","type":"message"}
{"nick":"chrisdickinson","message":"https://github.com/hapijs/hapi/blob/master/lib/request.js are the specific tests that were breaking.","date":"2014-08-04T01:20:06.117Z","type":"message"}
{"nick":"chrisdickinson","message":"the entire suite has to be run to cause the error -- and you'd have to check out a commit earlier: https://github.com/hapijs/hapi/commit/119047ef897c3edf2ebcc927f161475bdab63fbd","date":"2014-08-04T01:20:30.048Z","type":"message"}
{"nick":"sh1mmer","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-08-04T01:20:37.230Z","type":"quit"}
{"nick":"chrisdickinson","message":"jgi: one thing to note: depending on when the process starts, the example code I added to my PR *may* run to completion. It doesn't do it often, but I've seen it get all the way through. Similarly, the pre-bugfix-applied hapi tests *occasionally* finish, but not often","date":"2014-08-04T01:23:10.136Z","type":"message"}
{"nick":"jgi","message":"yes, that’s what I was about to mention","date":"2014-08-04T01:23:31.506Z","type":"message"}
{"nick":"a3f","reason":"Ping timeout: 240 seconds","date":"2014-08-04T01:25:03.811Z","type":"quit"}
{"nick":"avalanche123","date":"2014-08-04T01:34:22.171Z","type":"join"}
{"nick":"avalanche123","reason":"Remote host closed the connection","date":"2014-08-04T01:47:13.784Z","type":"quit"}
{"nick":"avalanche123","date":"2014-08-04T01:47:41.510Z","type":"join"}
{"nick":"thlorenz","date":"2014-08-04T01:49:16.104Z","type":"join"}
{"nick":"AvianFlu","date":"2014-08-04T01:50:30.144Z","type":"join"}
{"nick":"avalanche123","reason":"Ping timeout: 255 seconds","date":"2014-08-04T01:52:02.876Z","type":"quit"}
{"nick":"jgi","message":"chrisdickinson: after a bit more investigation, I have another theory to propose to explain the bug. When the value ‘diff’ in listOnTimeout() is > 0 and < 1, for some reason I couldn’t determine the ‘time’ property of the default uv loop is not updated anymore by uv_update_time. OnTimeout in timer_wrap.cc is called as usual but Timer.now() will always return the exact same value, because loop->time on which it’s based never change","date":"2014-08-04T02:15:46.483Z","type":"message"}
{"nick":"jgi","message":"On the other hand, at the same time, Date.now() returned value continues to grow, and thus eventually the timer would be expired if it was based on Date.now().","date":"2014-08-04T02:15:47.071Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: adding a call to uv_update_time(uv_default_loop()) in the Now static method in timer_wrap.cc “fixes” the issue, but of course, we don’t want to do that. However, I think it could validate this theory.","date":"2014-08-04T02:16:56.005Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: unfortunately, I can’t reproduce the bug in a debug build right now, which makes investigating a bit of a pain.","date":"2014-08-04T02:17:47.777Z","type":"message"}
{"nick":"chrisdickinson","action":"nods","date":"2014-08-04T02:17:54.959Z","type":"action"}
{"nick":"chrisdickinson","message":"per https://github.com/joyent/libuv/blob/master/include/uv.h#L351-L353 the time property is cached at the beginning of the event loop tick","date":"2014-08-04T02:22:57.979Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: what I don’t understand is why there’s no more event loop tick","date":"2014-08-04T02:24:10.698Z","type":"message"}
{"nick":"Left_Turn","reason":"Remote host closed the connection","date":"2014-08-04T02:29:43.598Z","type":"quit"}
{"nick":"jgi","message":"chrisdickinson: ah, maybe OnTimeout in timer_wrap.cc fires so often that it just doesn’t let uv_run perform a tick? is that possible?","date":"2014-08-04T02:31:02.183Z","type":"message"}
{"nick":"chrisdickinson","message":"that's what i'm looking into now","date":"2014-08-04T02:31:10.661Z","type":"message"}
{"nick":"chrisdickinson","message":"it repeatedly calls uv_start on the timer handle, at least","date":"2014-08-04T02:31:21.384Z","type":"message"}
{"nick":"chrisdickinson","message":"i.e., line 92, `list.start(<float of (-1, 0) bound>, 0)`","date":"2014-08-04T02:32:35.521Z","type":"message"}
{"nick":"jgi","message":"right","date":"2014-08-04T02:34:20.120Z","type":"message"}
{"nick":"chrisdickinson","message":"i think since it's getting started again, it's replacing it on the queue, and https://github.com/joyent/libuv/blob/master/src/unix/timer.c#L147-L164 never exits","date":"2014-08-04T02:35:01.277Z","type":"message"}
{"nick":"c4milo","date":"2014-08-04T02:35:36.771Z","type":"join"}
{"nick":"chrisdickinson","message":"jgi: yep, i think that's it","date":"2014-08-04T02:36:50.775Z","type":"message"}
{"nick":"chrisdickinson","message":"https://gist.github.com/chrisdickinson/edb96ee141064b1875c8 -- if the problem is triggered, it will explode with a wall of dots","date":"2014-08-04T02:37:26.032Z","type":"message"}
{"nick":"jgi","message":"right","date":"2014-08-04T02:37:48.138Z","type":"message"}
{"nick":"jgi","message":"I think you found it :)","date":"2014-08-04T02:37:53.201Z","type":"message"}
{"nick":"chrisdickinson","message":"woo!","date":"2014-08-04T02:37:59.239Z","type":"message"}
{"nick":"jgi","message":"timeout is truncated to 0","date":"2014-08-04T02:37:59.979Z","type":"message"}
{"nick":"jgi","message":"and thus infinite loop","date":"2014-08-04T02:38:05.035Z","type":"message"}
{"nick":"jgi","message":"awesome!","date":"2014-08-04T02:38:42.767Z","type":"message"}
{"nick":"chrisdickinson","message":"sweet. so, my initial approach was to make it so that `msecs` would get converted to int as well, so we couldn't end up in the infinite loop -- do you think that's still an acceptable route?","date":"2014-08-04T02:40:43.828Z","type":"message"}
{"nick":"chrisdickinson","message":"(it might also be worthwhile to check with negative timeouts, on that note)","date":"2014-08-04T02:41:01.480Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: let me take a look at it again","date":"2014-08-04T02:41:09.578Z","type":"message"}
{"nick":"chrisdickinson","message":"cool. I've gotta run off for dinner here in a minute, so I may be afk. thanks for taking a look!","date":"2014-08-04T02:44:41.740Z","type":"message"}
{"nick":"jgi","message":"chrisdickinson: sure no problem, thank you!","date":"2014-08-04T02:44:59.134Z","type":"message"}
{"nick":"toothrot","reason":"Ping timeout: 255 seconds","date":"2014-08-04T02:59:13.224Z","type":"quit"}
{"nick":"jgi","reason":"Quit: jgi","date":"2014-08-04T03:04:46.830Z","type":"quit"}
{"nick":"jgi","date":"2014-08-04T03:11:09.770Z","type":"join"}
{"nick":"brett19","reason":"Ping timeout: 260 seconds","date":"2014-08-04T03:17:36.210Z","type":"quit"}
{"nick":"brett19","date":"2014-08-04T03:19:19.771Z","type":"join"}
{"nick":"sh1mmer","date":"2014-08-04T03:21:06.159Z","type":"join"}
{"nick":"avalanche123","date":"2014-08-04T03:30:05.063Z","type":"join"}
{"nick":"jgi","reason":"Quit: jgi","date":"2014-08-04T03:30:35.960Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2014-08-04T03:32:25.154Z","type":"quit"}
{"nick":"kazupon","date":"2014-08-04T03:32:52.162Z","type":"join"}
{"nick":"jgi","date":"2014-08-04T03:32:58.000Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 256 seconds","date":"2014-08-04T03:37:45.093Z","type":"quit"}
{"nick":"avalanche123","reason":"Remote host closed the connection","date":"2014-08-04T03:43:07.665Z","type":"quit"}
{"nick":"avalanche123","date":"2014-08-04T03:43:34.434Z","type":"join"}
{"nick":"avalanche123","reason":"Ping timeout: 264 seconds","date":"2014-08-04T03:48:34.966Z","type":"quit"}
{"nick":"a_le","date":"2014-08-04T03:52:59.080Z","type":"join"}
{"nick":"kazupon","date":"2014-08-04T04:03:31.941Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 245 seconds","date":"2014-08-04T04:08:07.383Z","type":"quit"}
{"nick":"thlorenz","reason":"Remote host closed the connection","date":"2014-08-04T04:17:47.873Z","type":"quit"}
{"nick":"kazupon","date":"2014-08-04T04:20:58.280Z","type":"join"}
{"nick":"thlorenz_","date":"2014-08-04T04:22:35.545Z","type":"join"}
{"nick":"thlorenz_","reason":"Ping timeout: 250 seconds","date":"2014-08-04T04:26:54.171Z","type":"quit"}
{"nick":"jgi","reason":"Quit: jgi","date":"2014-08-04T04:30:49.345Z","type":"quit"}
{"nick":"jgi","date":"2014-08-04T04:33:06.830Z","type":"join"}
{"nick":"jgi","reason":"Quit: jgi","date":"2014-08-04T04:50:09.838Z","type":"quit"}
{"nick":"jgi","date":"2014-08-04T04:52:07.771Z","type":"join"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2014-08-04T04:52:10.717Z","type":"quit"}
{"nick":"a_le","date":"2014-08-04T04:52:48.394Z","type":"join"}
{"nick":"sh1mmer","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-08-04T04:55:27.248Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2014-08-04T04:56:01.410Z","type":"quit"}
{"nick":"a_le","reason":"Ping timeout: 245 seconds","date":"2014-08-04T04:56:55.601Z","type":"quit"}
{"nick":"jgi","reason":"Quit: jgi","date":"2014-08-04T04:59:10.648Z","type":"quit"}
{"nick":"a3f","date":"2014-08-04T05:02:01.665Z","type":"join"}
{"nick":"jgi","date":"2014-08-04T05:08:23.650Z","type":"join"}
{"nick":"a3f","reason":"Ping timeout: 240 seconds","date":"2014-08-04T05:22:33.782Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-04T05:56:04.656Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 255 seconds","date":"2014-08-04T06:00:26.911Z","type":"quit"}
{"nick":"SexyBunny","reason":"Ping timeout: 260 seconds","date":"2014-08-04T06:11:54.723Z","type":"quit"}
{"nick":"WalrusPony","date":"2014-08-04T06:16:22.941Z","type":"join"}
{"nick":"pquerna","reason":"Ping timeout: 245 seconds","date":"2014-08-04T06:18:57.365Z","type":"quit"}
{"nick":"pquerna","date":"2014-08-04T06:19:54.276Z","type":"join"}
{"nick":"pquerna","reason":"Changing host","date":"2014-08-04T06:19:59.963Z","type":"quit"}
{"nick":"pquerna","date":"2014-08-04T06:20:00.079Z","type":"join"}
{"nick":"rendar","date":"2014-08-04T06:38:57.715Z","type":"join"}
{"nick":"avalanche123","date":"2014-08-04T06:45:30.682Z","type":"join"}
{"nick":"Ralith","reason":"Ping timeout: 244 seconds","date":"2014-08-04T06:47:01.970Z","type":"quit"}
{"nick":"avalanche123","reason":"Ping timeout: 255 seconds","date":"2014-08-04T06:49:56.920Z","type":"quit"}
{"nick":"jgi","reason":"Quit: jgi","date":"2014-08-04T07:02:25.862Z","type":"quit"}
{"nick":"jgi","date":"2014-08-04T07:05:33.351Z","type":"join"}
{"nick":"Soarez|afk","new_nick":"Soarez","date":"2014-08-04T07:07:06.395Z","type":"nick"}
{"nick":"jgi","reason":"Quit: jgi","date":"2014-08-04T07:16:23.052Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033lilohuang\u000f \u00037master\u000f * \u000289fc7d8\u0002 : windows: fix buffer overflow on uv__getnameinfo_work() - http://git.io/RxF81g","date":"2014-08-04T07:22:41.388Z","type":"message"}
{"nick":"Soarez","new_nick":"Soarez|afk","date":"2014-08-04T07:30:45.605Z","type":"nick"}
{"nick":"jan____","date":"2014-08-04T07:32:50.490Z","type":"join"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2014-08-04T07:34:34.559Z","type":"quit"}
{"nick":"inolen","date":"2014-08-04T07:34:49.777Z","type":"join"}
{"nick":"inolen","reason":"Read error: Connection reset by peer","date":"2014-08-04T07:35:15.582Z","type":"quit"}
{"nick":"inolen","date":"2014-08-04T07:35:32.651Z","type":"join"}
{"nick":"jan____","reason":"Changing host","date":"2014-08-04T07:38:57.314Z","type":"quit"}
{"nick":"jan____","date":"2014-08-04T07:38:57.430Z","type":"join"}
{"nick":"c4milo","date":"2014-08-04T07:44:12.136Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 240 seconds","date":"2014-08-04T07:48:52.839Z","type":"quit"}
{"nick":"avalanche123","date":"2014-08-04T07:54:33.869Z","type":"join"}
{"nick":"avalanche123","reason":"Ping timeout: 260 seconds","date":"2014-08-04T07:59:14.642Z","type":"quit"}
