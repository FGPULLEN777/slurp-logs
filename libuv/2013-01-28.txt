{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-01-28T00:00:01.232Z","type":"quit"}
{"nick":"ircretary","date":"2013-01-28T00:00:08.627Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 256 seconds","date":"2013-01-28T00:04:55.154Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-01-28T00:15:35.249Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-28T00:16:32.943Z","type":"quit"}
{"nick":"c4milo_","reason":"Remote host closed the connection","date":"2013-01-28T00:17:58.645Z","type":"quit"}
{"nick":"mikeal","reason":"Read error: Connection reset by peer","date":"2013-01-28T00:20:13.942Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-28T00:24:05.555Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-01-28T00:25:11.436Z","type":"quit"}
{"nick":"karupanerura","reason":"Excess Flood","date":"2013-01-28T00:30:55.233Z","type":"quit"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-01-28T00:31:42.356Z","type":"nick"}
{"nick":"qmx","reason":"Changing host","date":"2013-01-28T00:32:17.195Z","type":"quit"}
{"nick":"qmx","date":"2013-01-28T00:32:17.322Z","type":"join"}
{"nick":"karupanerura","date":"2013-01-28T00:34:26.098Z","type":"join"}
{"nick":"jerickson__","date":"2013-01-28T00:35:29.807Z","type":"join"}
{"nick":"jerickson_","reason":"Read error: Connection reset by peer","date":"2013-01-28T00:35:30.034Z","type":"quit"}
{"nick":"pietern","date":"2013-01-28T00:37:14.245Z","type":"join"}
{"nick":"bnoordhuis","message":"man, ret insns cause massive pipeline stalls: 75.73 6f2758: c3 ret","date":"2013-01-28T00:40:59.476Z","type":"message"}
{"nick":"bnoordhuis","message":"that's percentage of a single function","date":"2013-01-28T00:41:35.114Z","type":"message"}
{"nick":"brson","date":"2013-01-28T00:45:12.518Z","type":"join"}
{"nick":"pietern","reason":"Quit: pietern","date":"2013-01-28T00:56:32.643Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-28T01:11:31.396Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-01-28T01:20:46.083Z","type":"quit"}
{"nick":"isaacs","message":"bnoordhuis: neat.  thanks for the heads up.","date":"2013-01-28T01:25:22.074Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: backporting a patch would be fine","date":"2013-01-28T01:25:30.744Z","type":"message"}
{"nick":"rump","date":"2013-01-28T01:26:07.976Z","type":"join"}
{"nick":"rump","date":"2013-01-28T01:26:22.375Z","type":"part"}
{"nick":"bnoordhuis","message":"-   1.34%  node  perf-9795.map        [.] LoadIC:A load IC from the snapshot                                                                                                                  ▒","date":"2013-01-28T01:27:43.454Z","type":"message"}
{"nick":"bnoordhuis","message":"   - LoadIC:A load IC from the snapshot                                                                                                                                                       ▒","date":"2013-01-28T01:27:47.561Z","type":"message"}
{"nick":"bnoordhuis","message":"      + 12.28% Builtin:A builtin from the snapshot                                                                                                                                            ▒","date":"2013-01-28T01:27:51.502Z","type":"message"}
{"nick":"bnoordhuis","message":"      + 10.75% Builtin:A builtin from the snapshot                                                                                                                                            ▒","date":"2013-01-28T01:27:55.576Z","type":"message"}
{"nick":"bnoordhuis","message":"      + 10.75% Builtin:A builtin from the snapshot                                                                                                                                            ▒","date":"2013-01-28T01:27:59.442Z","type":"message"}
{"nick":"bnoordhuis","message":"      + 10.75% LazyCompile:*Stream stream.js:42                                                                                                                                               ▒","date":"2013-01-28T01:28:03.442Z","type":"message"}
{"nick":"bnoordhuis","message":"      + 9.87% LazyCompile:*Readable.on _stream_readable.js:577                                                                                                                                ▒","date":"2013-01-28T01:28:07.616Z","type":"message"}
{"nick":"bnoordhuis","message":"      + 6.58% Builtin:A builtin from the snapshot                                                                                                                                             ▒","date":"2013-01-28T01:28:11.484Z","type":"message"}
{"nick":"bnoordhuis","message":"      + 4.82% LazyCompile:*exports.active timers.js:160                                                                                                                                       ▒","date":"2013-01-28T01:28:15.539Z","type":"message"}
{"nick":"bnoordhuis","message":"      + 3.95% LazyCompile:*OutgoingMessage.end http.js:787 ","date":"2013-01-28T01:28:19.510Z","type":"message"}
{"nick":"c4milo","date":"2013-01-28T01:28:21.145Z","type":"join"}
{"nick":"bnoordhuis","message":"^ this is so awesome","date":"2013-01-28T01:28:22.120Z","type":"message"}
{"nick":"bnoordhuis","message":"i instrumented v8 to make it create a perf.map file","date":"2013-01-28T01:28:24.557Z","type":"message"}
{"nick":"tjfontaine","message":"nice","date":"2013-01-28T01:28:38.723Z","type":"message"}
{"nick":"tjfontaine","message":"I also notice you have a very wide terminal at the moment :)","date":"2013-01-28T01:29:06.038Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-28T01:31:59.480Z","type":"quit"}
{"nick":"bnoordhuis","message":"isaacs: so i have been benchmarking all the things","date":"2013-01-28T01:41:14.935Z","type":"message"}
{"nick":"bnoordhuis","message":"particularly net-pipe.js","date":"2013-01-28T01:42:04.498Z","type":"message"}
{"nick":"bnoordhuis","message":"the short of it is that the bindings layer and v8 have become faster","date":"2013-01-28T01:42:25.903Z","type":"message"}
{"nick":"bnoordhuis","message":"the slowdown is all in js land","date":"2013-01-28T01:42:34.377Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: hm.  ok.","date":"2013-01-28T01:43:17.632Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: how come http.sh is faster with v0.8 than with streams1?","date":"2013-01-28T01:43:27.472Z","type":"message"}
{"nick":"isaacs","message":"that seems to contradict the \"all in js land\" theory","date":"2013-01-28T01:43:38.152Z","type":"message"}
{"nick":"isaacs","message":"i gotta run.","date":"2013-01-28T01:43:47.111Z","type":"message"}
{"nick":"bnoordhuis","message":"i haven't looked at that yet, just net-pipe.js","date":"2013-01-28T01:43:48.203Z","type":"message"}
{"nick":"bnoordhuis","message":"but that one i have studied in microscopic detail :)","date":"2013-01-28T01:44:03.576Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: https://docs.google.com/spreadsheet/ccc?key=0AganzoeqkiHddE9uRlA5WS0xSF9NTGN1QS0zZ3FRSWc#gid=1","date":"2013-01-28T01:44:18.761Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: could be http_parser is to blame, then?","date":"2013-01-28T01:44:30.461Z","type":"message"}
{"nick":"isaacs","message":"net-pipe is indeed likely to  be affected by js more than http.sh","date":"2013-01-28T01:44:43.731Z","type":"message"}
{"nick":"isaacs","message":"ok, i have to go get dinner now or i'll be in trouble.  good evening :)","date":"2013-01-28T01:45:03.391Z","type":"message"}
{"nick":"isaacs","action":"&","date":"2013-01-28T01:45:05.980Z","type":"action"}
{"nick":"LOUDBOT","message":"I'M GONNA POUR A BEER IN MY PUSSY SO THAT I'LL GET A YEAST INFECTION!","date":"2013-01-28T01:45:06.363Z","type":"message"}
{"nick":"bnoordhuis","message":"bon appetite :)","date":"2013-01-28T01:45:10.860Z","type":"message"}
{"nick":"c4milo","date":"2013-01-28T01:57:32.141Z","type":"join"}
{"nick":"EhevuTov","date":"2013-01-28T02:37:44.972Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 244 seconds","date":"2013-01-28T02:41:03.178Z","type":"quit"}
{"nick":"hz","date":"2013-01-28T02:41:16.154Z","type":"quit"}
{"nick":"abraxas","date":"2013-01-28T02:42:01.270Z","type":"join"}
{"nick":"AvianFlu","date":"2013-01-28T02:44:09.619Z","type":"join"}
{"nick":"jerickson__","reason":"Ping timeout: 245 seconds","date":"2013-01-28T02:45:51.807Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-28T02:53:59.245Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-01-28T02:55:03.552Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-28T03:07:37.687Z","type":"quit"}
{"nick":"trevnorris","date":"2013-01-28T03:31:42.977Z","type":"join"}
{"nick":"trevnorris","message":"anyone home?","date":"2013-01-28T03:40:24.126Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 255 seconds","date":"2013-01-28T03:41:38.730Z","type":"quit"}
{"nick":"indexzero","date":"2013-01-28T03:53:24.677Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-01-28T04:23:22.350Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-28T04:34:55.617Z","type":"join"}
{"nick":"brson","date":"2013-01-28T04:40:15.802Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-28T04:42:27.703Z","type":"quit"}
{"nick":"snoj","date":"2013-01-28T05:42:28.778Z","type":"join"}
{"nick":"snoj","reason":"Ping timeout: 246 seconds","date":"2013-01-28T05:48:13.784Z","type":"quit"}
{"nick":"pfox__","date":"2013-01-28T05:50:35.099Z","type":"join"}
{"nick":"pfox__","message":"any maintainers awake?","date":"2013-01-28T05:50:42.250Z","type":"message"}
{"nick":"mikeal","date":"2013-01-28T06:08:47.243Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-01-28T06:12:29.484Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-28T06:16:14.922Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-01-28T06:16:32.206Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-01-28T06:18:21.160Z","type":"join"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-01-28T06:21:25.734Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-28T06:28:01.185Z","type":"join"}
{"nick":"qmx","reason":"Ping timeout: 256 seconds","date":"2013-01-28T06:32:38.048Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-01-28T06:35:37.671Z","type":"quit"}
{"nick":"brson","date":"2013-01-28T06:35:51.857Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-28T06:38:57.810Z","type":"quit"}
{"nick":"paddybyers","date":"2013-01-28T06:39:17.980Z","type":"join"}
{"nick":"qmx|away","date":"2013-01-28T06:46:19.676Z","type":"join"}
{"nick":"indutny","message":"yes","date":"2013-01-28T06:49:07.000Z","type":"message"}
{"nick":"indutny","message":"morning","date":"2013-01-28T06:49:14.696Z","type":"message"}
{"nick":"indutny","message":"pfox__: sup?","date":"2013-01-28T06:50:22.976Z","type":"message"}
{"nick":"indexzero","date":"2013-01-28T07:02:35.349Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 245 seconds","date":"2013-01-28T07:06:16.809Z","type":"quit"}
{"nick":"brson","date":"2013-01-28T07:06:52.134Z","type":"join"}
{"nick":"felixge","date":"2013-01-28T07:25:12.618Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-01-28T07:25:12.748Z","type":"quit"}
{"nick":"felixge","date":"2013-01-28T07:25:12.749Z","type":"join"}
{"nick":"Ralt","reason":"Ping timeout: 276 seconds","date":"2013-01-28T07:28:42.461Z","type":"quit"}
{"nick":"felixge","reason":"Ping timeout: 252 seconds","date":"2013-01-28T07:29:42.490Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 260 seconds","date":"2013-01-28T07:31:24.997Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-28T07:37:41.659Z","type":"quit"}
{"nick":"paddybyers","date":"2013-01-28T07:38:07.343Z","type":"join"}
{"nick":"felixge","date":"2013-01-28T07:41:13.651Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 244 seconds","date":"2013-01-28T07:45:22.468Z","type":"quit"}
{"nick":"rendar","date":"2013-01-28T07:46:23.158Z","type":"join"}
{"nick":"`3rdEden","date":"2013-01-28T07:47:34.118Z","type":"join"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-01-28T08:05:02.521Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-01-28T08:09:59.823Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-28T08:22:46.119Z","type":"quit"}
{"nick":"indexzero","date":"2013-01-28T08:23:26.611Z","type":"join"}
{"nick":"indexzero","reason":"Client Quit","date":"2013-01-28T08:25:18.112Z","type":"quit"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-01-28T08:40:08.171Z","type":"nick"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-01-28T08:49:39.562Z","type":"nick"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-28T08:55:23.123Z","type":"quit"}
{"nick":"paddybyers_","date":"2013-01-28T08:58:59.977Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 276 seconds","date":"2013-01-28T09:02:57.334Z","type":"quit"}
{"nick":"paddybyers_","new_nick":"paddybyers","date":"2013-01-28T09:02:57.571Z","type":"nick"}
{"nick":"googol","reason":"Remote host closed the connection","date":"2013-01-28T09:11:07.363Z","type":"quit"}
{"nick":"saghul","message":"hello","date":"2013-01-28T09:29:16.366Z","type":"message"}
{"nick":"saghul","message":"which of the uv_loop_t fields are supposed to be private? all but data?","date":"2013-01-28T09:29:50.499Z","type":"message"}
{"nick":"stagas","date":"2013-01-28T09:46:15.422Z","type":"join"}
{"nick":"`3rdEden","date":"2013-01-28T09:52:00.539Z","type":"join"}
{"nick":"Ralt","date":"2013-01-28T10:08:33.886Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-28T10:20:31.033Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-01-28T10:30:32.622Z","type":"quit"}
{"nick":"indutny","message":"hello","date":"2013-01-28T11:04:07.699Z","type":"message"}
{"nick":"bnoordhuis","date":"2013-01-28T11:15:15.854Z","type":"join"}
{"nick":"stagas","message":"hi indutny","date":"2013-01-28T11:15:17.149Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: hey man","date":"2013-01-28T11:15:23.472Z","type":"message"}
{"nick":"indutny","message":"stagas: hi","date":"2013-01-28T11:15:25.601Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: ho man","date":"2013-01-28T11:15:33.515Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: lets fix da awful bugs https://github.com/joyent/node/pull/4671","date":"2013-01-28T11:16:03.052Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: but only if they come with regression tests :)","date":"2013-01-28T11:16:30.548Z","type":"message"}
{"nick":"indutny","message":"oh noes","date":"2013-01-28T11:16:35.958Z","type":"message"}
{"nick":"indutny","message":"btw","date":"2013-01-28T11:16:49.397Z","type":"message"}
{"nick":"indutny","message":"I've been at notary office today","date":"2013-01-28T11:16:53.439Z","type":"message"}
{"nick":"indutny","message":"they're very rich in Moscow","date":"2013-01-28T11:17:01.673Z","type":"message"}
{"nick":"indutny","message":"whole office in wood and leather","date":"2013-01-28T11:17:09.959Z","type":"message"}
{"nick":"indutny","message":"big tables and everything like this","date":"2013-01-28T11:17:17.308Z","type":"message"}
{"nick":"indutny","message":"and also","date":"2013-01-28T11:17:18.938Z","type":"message"}
{"nick":"indutny","message":"there was radio","date":"2013-01-28T11:17:25.115Z","type":"message"}
{"nick":"indutny","message":"and song from Pulp Fiction","date":"2013-01-28T11:17:33.322Z","type":"message"}
{"nick":"bnoordhuis","message":"being a notary is a sweet job","date":"2013-01-28T11:18:25.590Z","type":"message"}
{"nick":"bnoordhuis","message":"all you do is copy/paste word documents all day","date":"2013-01-28T11:18:42.978Z","type":"message"}
{"nick":"bnoordhuis","message":"but you charge outrageous rates","date":"2013-01-28T11:18:48.849Z","type":"message"}
{"nick":"indutny","message":"well, rates are not that big","date":"2013-01-28T11:19:05.620Z","type":"message"}
{"nick":"indutny","message":"they've different source of money","date":"2013-01-28T11:19:11.617Z","type":"message"}
{"nick":"indutny","message":"at least, in russia","date":"2013-01-28T11:19:14.654Z","type":"message"}
{"nick":"bnoordhuis","message":"oh dear, what source?","date":"2013-01-28T11:19:27.801Z","type":"message"}
{"nick":"indutny","message":"I suppose that furniture in their office costs ~ 1m$","date":"2013-01-28T11:19:44.643Z","type":"message"}
{"nick":"indutny","message":"probably less, but something around it","date":"2013-01-28T11:19:55.336Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: you better not ask","date":"2013-01-28T11:20:04.388Z","type":"message"}
{"nick":"rendar","message":"indutny: is russia so corrupted?","date":"2013-01-28T11:24:27.311Z","type":"message"}
{"nick":"indutny","message":"yeah, some parts are","date":"2013-01-28T11:25:33.157Z","type":"message"}
{"nick":"indutny","message":"mostly related to business","date":"2013-01-28T11:25:39.132Z","type":"message"}
{"nick":"rendar","message":"also here in italy","date":"2013-01-28T11:25:43.300Z","type":"message"}
{"nick":"indutny","message":"well, I think we're on the same level here","date":"2013-01-28T11:26:02.735Z","type":"message"}
{"nick":"rendar","message":"now i see why berlusconi and putin are so close friends, lol","date":"2013-01-28T11:26:05.301Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-01-28T11:26:10.334Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-01-28T11:26:11.248Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: interesting thing","date":"2013-01-28T11:32:52.679Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: if I'll use net.Server - that thing is not reproducible...","date":"2013-01-28T11:33:02.895Z","type":"message"}
{"nick":"indutny","message":"if I'll remove net.Server code - it'll appear again","date":"2013-01-28T11:33:13.392Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2013-01-28T11:33:14.764Z","type":"message"}
{"nick":"creationix","reason":"Ping timeout: 264 seconds","date":"2013-01-28T11:36:42.225Z","type":"quit"}
{"nick":"creationix","date":"2013-01-28T11:38:53.571Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u0002a39f669\u0002 : test: move simple/test-http-dns-fail to test/internet  The test times out - http://git.io/joMEIA","date":"2013-01-28T11:43:59.123Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ok, figured it out","date":"2013-01-28T11:49:31.812Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: enjoy https://github.com/joyent/node/pull/4671","date":"2013-01-28T11:49:51.117Z","type":"message"}
{"nick":"indutny","message":";)","date":"2013-01-28T11:49:51.882Z","type":"message"}
{"nick":"hz","date":"2013-01-28T11:50:00.448Z","type":"join"}
{"nick":"saghul","message":"I'll ask again, since there are more people here now :-) which of the uv_loop_t fields are supposed to be private? all but data?","date":"2013-01-28T11:55:56.523Z","type":"message"}
{"nick":"indutny","message":"I think all that're visible in uv.h","date":"2013-01-28T11:56:48.262Z","type":"message"}
{"nick":"indutny","message":"but yeah, data is the only one that makes sense","date":"2013-01-28T11:56:55.750Z","type":"message"}
{"nick":"indutny","message":"for external use","date":"2013-01-28T11:57:00.657Z","type":"message"}
{"nick":"saghul","message":"I don't think one is supposed to touch the handle_queue","date":"2013-01-28T11:57:16.680Z","type":"message"}
{"nick":"saghul","message":"xD","date":"2013-01-28T11:57:18.023Z","type":"message"}
{"nick":"saghul","message":"the one I'm interested in is active_handles, more precisely","date":"2013-01-28T11:57:50.171Z","type":"message"}
{"nick":"saghul","message":"not interested, but wondering about, more precisely","date":"2013-01-28T11:58:08.651Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so, hm... lgtm?","date":"2013-01-28T12:11:27.286Z","type":"message"}
{"nick":"indutny","message":"s/lgtm/lgty/","date":"2013-01-28T12:11:31.098Z","type":"message"}
{"nick":"mmalecki[fly]","new_nick":"mmalecki","date":"2013-01-28T12:12:27.991Z","type":"nick"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-01-28T12:21:25.260Z","type":"nick"}
{"nick":"bnoordhuis","message":"saghul: only data, active_handles and active_reqs may change","date":"2013-01-28T12:21:34.710Z","type":"message"}
{"nick":"qmx","reason":"Changing host","date":"2013-01-28T12:21:38.927Z","type":"quit"}
{"nick":"qmx","date":"2013-01-28T12:21:39.059Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: may be move them to PRIVATE_FIELDS then?","date":"2013-01-28T12:21:51.162Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, maybe","date":"2013-01-28T12:22:06.036Z","type":"message"}
{"nick":"bnoordhuis","message":"also, we could presumably add api functions for them","date":"2013-01-28T12:22:16.902Z","type":"message"}
{"nick":"indutny","message":"active handles?","date":"2013-01-28T12:22:23.920Z","type":"message"}
{"nick":"indutny","message":"I thought we have one","date":"2013-01-28T12:22:27.178Z","type":"message"}
{"nick":"bnoordhuis","message":"we do, active_handles","date":"2013-01-28T12:22:36.723Z","type":"message"}
{"nick":"indutny","message":"uv_walk","date":"2013-01-28T12:22:44.419Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, like that","date":"2013-01-28T12:22:49.375Z","type":"message"}
{"nick":"indutny","message":"I mean API","date":"2013-01-28T12:22:51.789Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, that's true. we don't have one for reqs though","date":"2013-01-28T12:23:15.553Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-01-28T12:23:32.998Z","type":"message"}
{"nick":"bnoordhuis","message":"also, uv_walk is kind of overkill if all you want to know is the # of active handles","date":"2013-01-28T12:23:40.278Z","type":"message"}
{"nick":"indutny","message":"agree","date":"2013-01-28T12:23:49.401Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: do you have a minute?","date":"2013-01-28T12:27:30.890Z","type":"message"}
{"nick":"indutny","message":"for this https://github.com/joyent/node/pull/4671","date":"2013-01-28T12:27:38.579Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: 60, 59, 58...","date":"2013-01-28T12:27:40.070Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: why the setTimeout in the test?","date":"2013-01-28T12:28:51.557Z","type":"message"}
{"nick":"indutny","message":"because I want child to receive handle","date":"2013-01-28T12:29:08.605Z","type":"message"}
{"nick":"indutny","message":"and do not want to synchronize","date":"2013-01-28T12:29:14.224Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-01-28T12:29:17.113Z","type":"message"}
{"nick":"indutny","message":"too lazy for it","date":"2013-01-28T12:29:20.205Z","type":"message"}
{"nick":"bnoordhuis","message":"so instead you're opting for timing sensitive tests?","date":"2013-01-28T12:30:42.595Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-28T12:31:03.841Z","type":"message"}
{"nick":"indutny","message":"I'll do it","date":"2013-01-28T12:31:06.675Z","type":"message"}
{"nick":"indutny","message":"just for you","date":"2013-01-28T12:31:08.343Z","type":"message"}
{"nick":"bnoordhuis","message":"good :)","date":"2013-01-28T12:31:10.118Z","type":"message"}
{"nick":"bnoordhuis","message":"but not just for me, for all the people coming after you","date":"2013-01-28T12:31:21.338Z","type":"message"}
{"nick":"bnoordhuis","message":"the process.exit shouldn't be necessary, should it?","date":"2013-01-28T12:31:39.819Z","type":"message"}
{"nick":"bnoordhuis","message":"the worker should exit automatically once the server is stopped","date":"2013-01-28T12:31:59.762Z","type":"message"}
{"nick":"sgallagh","date":"2013-01-28T12:32:02.304Z","type":"join"}
{"nick":"bnoordhuis","message":"apart from that, lgtm","date":"2013-01-28T12:32:25.294Z","type":"message"}
{"nick":"indutny","message":"great","date":"2013-01-28T12:32:29.237Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: no, it won't exit","date":"2013-01-28T12:32:34.926Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: believe me :)","date":"2013-01-28T12:32:40.329Z","type":"message"}
{"nick":"bnoordhuis","message":"no? why not","date":"2013-01-28T12:32:41.793Z","type":"message"}
{"nick":"indutny","message":"probably because I'm using child_process.fork","date":"2013-01-28T12:32:49.968Z","type":"message"}
{"nick":"bnoordhuis","message":"seems to work for me","date":"2013-01-28T12:32:52.777Z","type":"message"}
{"nick":"indutny","message":"not cluster.fork()","date":"2013-01-28T12:32:55.675Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: even when master crashes?","date":"2013-01-28T12:33:02.590Z","type":"message"}
{"nick":"indutny","message":"test it on non-patched node","date":"2013-01-28T12:33:17.962Z","type":"message"}
{"nick":"bnoordhuis","message":"well, duh - the idea is to fix that, right? :)","date":"2013-01-28T12:33:53.694Z","type":"message"}
{"nick":"bnoordhuis","message":"still, when the master process crashes, it takes the process group with it","date":"2013-01-28T12:34:13.114Z","type":"message"}
{"nick":"bnoordhuis","message":"eind goed, al goed","date":"2013-01-28T12:34:23.768Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-01-28T12:35:24.355Z","type":"message"}
{"nick":"indutny","message":"can't confrim it","date":"2013-01-28T12:35:29.414Z","type":"message"}
{"nick":"indutny","message":"s/confrim/confirm/","date":"2013-01-28T12:35:34.590Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis thanks for confirming","date":"2013-01-28T12:36:33.769Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Fedor Indutny\u000f \u00037master\u000f * \u00020d7a021\u0002 : net: initialize TCPWrap when receiving socket  TCPWrap::Initialize() and  - http://git.io/KOuLJQ","date":"2013-01-28T12:37:28.346Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so where are we now with performance testing?","date":"2013-01-28T12:40:50.195Z","type":"message"}
{"nick":"indutny","message":"any new ideas? results?","date":"2013-01-28T12:40:54.943Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i bisected benchmark/net-pipe.js at the microscopic level","date":"2013-01-28T12:41:13.274Z","type":"message"}
{"nick":"indutny","message":"and?","date":"2013-01-28T12:41:22.439Z","type":"message"}
{"nick":"bnoordhuis","message":"and the conclusion there was that v8 and the binding layer have become faster","date":"2013-01-28T12:41:25.087Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2013-01-28T12:41:30.399Z","type":"message"}
{"nick":"bnoordhuis","message":"the slowdown is pure js","date":"2013-01-28T12:41:30.529Z","type":"message"}
{"nick":"bnoordhuis","message":"next up is http","date":"2013-01-28T12:41:36.487Z","type":"message"}
{"nick":"indutny","message":"interesting","date":"2013-01-28T12:41:37.054Z","type":"message"}
{"nick":"indutny","message":"you was running git bisect?","date":"2013-01-28T12:42:02.269Z","type":"message"}
{"nick":"indutny","message":"or just resetting commits one by one and running benchmarks?","date":"2013-01-28T12:42:20.193Z","type":"message"}
{"nick":"bnoordhuis","message":"ah no, bisect as in split into teensy weensy chunks and benchmark the crap out of that","date":"2013-01-28T12:42:27.674Z","type":"message"}
{"nick":"bnoordhuis","message":"and check generated assembly, code stubs, etc.","date":"2013-01-28T12:42:45.145Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2013-01-28T12:42:45.379Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-28T12:42:53.234Z","type":"message"}
{"nick":"indutny","message":"I think I may setup automatical script","date":"2013-01-28T12:42:59.270Z","type":"message"}
{"nick":"indutny","message":"to check every commit since 0.8","date":"2013-01-28T12:43:10.069Z","type":"message"}
{"nick":"hz","date":"2013-01-28T12:43:15.278Z","type":"quit"}
{"nick":"indutny","message":"and graph performance","date":"2013-01-28T12:43:16.091Z","type":"message"}
{"nick":"bnoordhuis","message":"you'll find at least one or two big dips","date":"2013-01-28T12:43:30.725Z","type":"message"}
{"nick":"bnoordhuis","message":"where a certain person who shall rename unnamed forgot to reapply certain v8 patches :)","date":"2013-01-28T12:43:44.329Z","type":"message"}
{"nick":"bnoordhuis","message":"but yeah, good idea","date":"2013-01-28T12:44:00.126Z","type":"message"}
{"nick":"indutny","message":"ahha","date":"2013-01-28T12:44:00.999Z","type":"message"}
{"nick":"indutny","message":"you blame me again","date":"2013-01-28T12:44:08.198Z","type":"message"}
{"nick":"bnoordhuis","message":"no, i'm just teasing you","date":"2013-01-28T12:44:22.322Z","type":"message"}
{"nick":"bnoordhuis","message":"and it's very fulfilling, i must say","date":"2013-01-28T12:44:37.176Z","type":"message"}
{"nick":"bnoordhuis","message":"i got an email from a google recruiter saying she's interested in my combination of c++ and python skills","date":"2013-01-28T12:45:19.469Z","type":"message"}
{"nick":"bnoordhuis","message":"what does she know about me that i don't?","date":"2013-01-28T12:45:27.109Z","type":"message"}
{"nick":"indutny","message":"may be she's interested in you","date":"2013-01-28T12:47:23.236Z","type":"message"}
{"nick":"AvianFlu","date":"2013-01-28T12:57:19.592Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: so what should sane person run in order to get one number representing benchmark result?","date":"2013-01-28T13:04:41.708Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: depends on what you want to measure","date":"2013-01-28T13:05:04.539Z","type":"message"}
{"nick":"indutny","message":"http rps","date":"2013-01-28T13:05:09.842Z","type":"message"}
{"nick":"indutny","message":"for some response body","date":"2013-01-28T13:05:14.903Z","type":"message"}
{"nick":"indutny","message":"doesn't matter much","date":"2013-01-28T13:05:19.001Z","type":"message"}
{"nick":"bnoordhuis","message":"but trying to distill it into 'one number' is usually the wrong approach","date":"2013-01-28T13:05:24.230Z","type":"message"}
{"nick":"bnoordhuis","message":"if nothing else, outliers will skew the result","date":"2013-01-28T13:05:30.860Z","type":"message"}
{"nick":"bnoordhuis","message":"re http, run e.g. benchmark/http_simple_auto with -c 1000 -n 200000 bytes/1024","date":"2013-01-28T13:06:04.787Z","type":"message"}
{"nick":"bnoordhuis","message":"compare the master and v0.8 results, see what needs improving","date":"2013-01-28T13:06:17.540Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-28T13:06:59.908Z","type":"message"}
{"nick":"indutny","message":"lets see :)","date":"2013-01-28T13:07:07.998Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: btw, when you're running benchmarks close everything that's non-essential","date":"2013-01-28T13:11:04.944Z","type":"message"}
{"nick":"bnoordhuis","message":"i.e. browsers, media players, chat apps, etc.","date":"2013-01-28T13:11:13.055Z","type":"message"}
{"nick":"bnoordhuis","message":"ssh sessions too","date":"2013-01-28T13:11:19.293Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I'll run them on server","date":"2013-01-28T13:11:32.956Z","type":"message"}
{"nick":"bnoordhuis","message":"i have had more than one benchmark screwed up because ssh dediced to renegotiate the session","date":"2013-01-28T13:11:38.493Z","type":"message"}
{"nick":"indutny","message":"aha","date":"2013-01-28T13:11:43.195Z","type":"message"}
{"nick":"bnoordhuis","message":"*decided","date":"2013-01-28T13:11:43.772Z","type":"message"}
{"nick":"indutny","message":"apr_socket_connect(): Connection refused (146)","date":"2013-01-28T13:16:04.385Z","type":"message"}
{"nick":"indutny","message":"Total of 8532 requests completed","date":"2013-01-28T13:16:04.515Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2013-01-28T13:16:04.998Z","type":"message"}
{"nick":"indutny","message":"smartos, please no","date":"2013-01-28T13:16:12.234Z","type":"message"}
{"nick":"indutny","message":"I guess I'll need sane server for his","date":"2013-01-28T13:18:23.382Z","type":"message"}
{"nick":"indutny","message":"s/his/this/","date":"2013-01-28T13:18:26.279Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-01-28T13:21:55.140Z","type":"join"}
{"nick":"indutny","message":"ah, obviously problem was with -c 1000","date":"2013-01-28T13:25:16.659Z","type":"message"}
{"nick":"indutny","message":"that's too much","date":"2013-01-28T13:25:18.837Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: for future generations and you https://gist.github.com/4655489","date":"2013-01-28T13:28:58.186Z","type":"message"}
{"nick":"snoj","date":"2013-01-28T13:29:23.828Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: hah, i would've done that in a couple of lines of shell","date":"2013-01-28T13:33:00.338Z","type":"message"}
{"nick":"indutny","message":"yes, but what for? :)","date":"2013-01-28T13:33:21.210Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: btw, can you run it on your box?","date":"2013-01-28T13:33:41.882Z","type":"message"}
{"nick":"indutny","message":"or anywhere else","date":"2013-01-28T13:33:43.931Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, but not now","date":"2013-01-28T13:33:49.278Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: btw, https://github.com/bnoordhuis/node/compare/perf-map - if/when you're profiling with perf","date":"2013-01-28T13:37:19.744Z","type":"message"}
{"nick":"bnoordhuis","message":"it creates a map file that lets perf map generated code to symbolic names","date":"2013-01-28T13:37:38.258Z","type":"message"}
{"nick":"indutny","message":"kewl","date":"2013-01-28T13:37:51.403Z","type":"message"}
{"nick":"bnoordhuis","message":"the one downside is that the map format doesn't let you specify code moves/deletions","date":"2013-01-28T13:38:15.586Z","type":"message"}
{"nick":"jmar777","date":"2013-01-28T13:38:16.153Z","type":"join"}
{"nick":"bnoordhuis","message":"you might get somewhat skewed numbers but it doesn't seem to be a big issue so far","date":"2013-01-28T13:38:35.828Z","type":"message"}
{"nick":"bnoordhuis","message":"v8 doesn't move/delete that often","date":"2013-01-28T13:38:45.961Z","type":"message"}
{"nick":"bnoordhuis","message":"still, i've sent an email to the perf maintainers asking if they're interested in a patch","date":"2013-01-28T13:39:07.428Z","type":"message"}
{"nick":"Guest__","date":"2013-01-28T13:50:02.247Z","type":"join"}
{"nick":"indutny","message":"yeah","date":"2013-01-28T13:50:45.673Z","type":"message"}
{"nick":"indutny","message":"it's pretty cool thing that v8 removes dead code, though","date":"2013-01-28T13:50:54.573Z","type":"message"}
{"nick":"indutny","message":"btw, I was thinking about one interesting thing","date":"2013-01-28T13:51:06.249Z","type":"message"}
{"nick":"indutny","message":"what if VM's stack might be placed inside heap","date":"2013-01-28T13:51:27.118Z","type":"message"}
{"nick":"indutny","message":"well, it might be non-movable","date":"2013-01-28T13:51:32.053Z","type":"message"}
{"nick":"indutny","message":"and not really GCed, since parts of it die rarely","date":"2013-01-28T13:51:45.910Z","type":"message"}
{"nick":"indutny","message":"but you'll get much deeper recursion","date":"2013-01-28T13:51:58.035Z","type":"message"}
{"nick":"indutny","message":"only limited with your memory","date":"2013-01-28T13:52:05.961Z","type":"message"}
{"nick":"felixge","reason":"Ping timeout: 255 seconds","date":"2013-01-28T13:53:44.425Z","type":"quit"}
{"nick":"felixge","date":"2013-01-28T13:54:19.005Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-01-28T13:54:19.271Z","type":"quit"}
{"nick":"felixge","date":"2013-01-28T13:54:19.395Z","type":"join"}
{"nick":"snoj","reason":"Quit: Leaving","date":"2013-01-28T14:06:32.742Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-01-28T14:24:38.649Z","type":"quit"}
{"nick":"c4milo","date":"2013-01-28T14:26:15.270Z","type":"join"}
{"nick":"AvianFlu","date":"2013-01-28T14:31:56.977Z","type":"quit"}
{"nick":"piscisaureus_","message":"hmm","date":"2013-01-28T14:39:02.710Z","type":"message"}
{"nick":"piscisaureus_","message":"when using cluster, how are tcp handles disconnected as workers disconnect themselves?","date":"2013-01-28T14:39:29.095Z","type":"message"}
{"nick":"piscisaureus_","message":"I can tell it works, only I can't find the code that does it...","date":"2013-01-28T14:39:39.617Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-28T14:44:29.857Z","type":"quit"}
{"nick":"piscisaureus_","message":"hmm something is off about udp handle reference counting I'm afraid","date":"2013-01-28T14:49:17.913Z","type":"message"}
{"nick":"cjd","message":"just to take a straw poll, if I were to write a patch to make available the entropy collected in each call to uv_hrtime(), would it have a reasonable chance of getting pulled?","date":"2013-01-28T14:50:46.252Z","type":"message"}
{"nick":"piscisaureus_","message":"cjd: ?","date":"2013-01-28T15:02:40.750Z","type":"message"}
{"nick":"loladiro","date":"2013-01-28T15:04:41.214Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-01-28T15:05:32.928Z","type":"quit"}
{"nick":"cjd","message":"I am working on a random generator for my application and I need to supply it with a feed of entropy, I know node.js uses openssl so it's not needed for node but I don't want to pull in openssl.","date":"2013-01-28T15:05:34.307Z","type":"message"}
{"nick":"cjd","message":"Just thinking of storing a uint64_t in the event loop and adding the current hrtime to it each time hrtime is called, then making it accessable","date":"2013-01-28T15:06:34.453Z","type":"message"}
{"nick":"cjd","message":"And each time it's accessed, zeroing it so the reader can tell if no entropy has been collected since the last access","date":"2013-01-28T15:07:11.841Z","type":"message"}
{"nick":"saghul","message":"cjd you could store that in loop->data","date":"2013-01-28T15:07:13.138Z","type":"message"}
{"nick":"saghul","message":"ah, wait, no","date":"2013-01-28T15:07:24.229Z","type":"message"}
{"nick":"cjd","message":"I'll need to modify hrtime() to feed it","date":"2013-01-28T15:07:34.366Z","type":"message"}
{"nick":"bradleymeck","date":"2013-01-28T15:16:59.147Z","type":"join"}
{"nick":"c4milo","date":"2013-01-28T15:31:08.150Z","type":"join"}
{"nick":"piscisaureus_","message":"cjd: ah - no that patch won't be taken","date":"2013-01-28T15:44:21.103Z","type":"message"}
{"nick":"cjd","message":"ok","date":"2013-01-28T15:44:41.378Z","type":"message"}
{"nick":"piscisaureus_","message":"cjd: I mean, that's *extremely* specific to your use case","date":"2013-01-28T15:44:52.634Z","type":"message"}
{"nick":"piscisaureus_","message":"cjd: what you could do is add an uv_prepare_t or uv_idle_t and call uv_hrtime() from there","date":"2013-01-28T15:45:08.991Z","type":"message"}
{"nick":"cjd","message":"/nod","date":"2013-01-28T15:46:20.103Z","type":"message"}
{"nick":"Guest__","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-01-28T15:51:20.588Z","type":"quit"}
{"nick":"bnoordhuis","message":"cjd: uv_hrtime() is not necessarily a great source of entropy","date":"2013-01-28T15:52:34.266Z","type":"message"}
{"nick":"bnoordhuis","message":"if the system doesn't have high-res timers, you may be stuck with a granularity of e.g. 10 ms","date":"2013-01-28T15:52:49.678Z","type":"message"}
{"nick":"cjd","message":"yeap, I'm using a 128 byte buffer and it's mixed 128 times before being introduced into the generator","date":"2013-01-28T15:53:59.239Z","type":"message"}
{"nick":"cjd","message":"128 *bit","date":"2013-01-28T15:54:16.985Z","type":"message"}
{"nick":"cjd","message":"so each sample is worth 1 bit","date":"2013-01-28T15:54:30.523Z","type":"message"}
{"nick":"cjd","message":"I could also write a patch to node so it's added using RAND_add() :)","date":"2013-01-28T15:55:12.511Z","type":"message"}
{"nick":"cjd","message":"same algorithm","date":"2013-01-28T15:55:19.495Z","type":"message"}
{"nick":"cjd","message":"oops nope, 256 bit buffer.. so each sample == 2 bits of added entropy assuming I stick with the 128 number","date":"2013-01-28T15:57:15.943Z","type":"message"}
{"nick":"isaacs","message":"good morning","date":"2013-01-28T15:57:50.696Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-28T15:57:50.870Z","type":"quit"}
{"nick":"isaacs","action":"waves","date":"2013-01-28T15:57:53.746Z","type":"action"}
{"nick":"cjd","message":"gm","date":"2013-01-28T15:57:56.711Z","type":"message"}
{"nick":"jmar777","date":"2013-01-28T15:58:25.268Z","type":"join"}
{"nick":"jmar777_","date":"2013-01-28T15:59:56.367Z","type":"join"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-01-28T15:59:59.538Z","type":"quit"}
{"nick":"jmar777_","reason":"Remote host closed the connection","date":"2013-01-28T16:00:21.016Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-28T16:00:57.987Z","type":"join"}
{"nick":"qmx","new_nick":"qmx|lunch","date":"2013-01-28T16:01:49.525Z","type":"nick"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-01-28T16:03:54.375Z","type":"quit"}
{"nick":"jmar777","reason":"Ping timeout: 246 seconds","date":"2013-01-28T16:05:16.799Z","type":"quit"}
{"nick":"`3rdEden","new_nick":"`3E|Cooking","date":"2013-01-28T16:10:33.936Z","type":"nick"}
{"nick":"hz","date":"2013-01-28T16:13:03.473Z","type":"join"}
{"nick":"pfox__","message":"morning","date":"2013-01-28T16:14:11.888Z","type":"message"}
{"nick":"indutny","message":"morning","date":"2013-01-28T16:14:18.931Z","type":"message"}
{"nick":"pfox__","message":"so, i'm working on updating rust's libuv bindings, which are pretty ancient (witha  few patches applied)","date":"2013-01-28T16:14:28.341Z","type":"message"}
{"nick":"pfox__","message":"we have a patch, for android compatibility, that applies a bunch of changes against src/unix/eio and src/unix/ev","date":"2013-01-28T16:14:47.559Z","type":"message"}
{"nick":"pfox__","message":"those dirs aren't in tree, anymore","date":"2013-01-28T16:14:53.410Z","type":"message"}
{"nick":"pfox__","message":"and i don't see them in uv.gyp","date":"2013-01-28T16:14:57.361Z","type":"message"}
{"nick":"pfox__","message":"are they still deps? are they taken as linked dependencies, or what?","date":"2013-01-28T16:15:09.458Z","type":"message"}
{"nick":"indutny","message":"nope","date":"2013-01-28T16:15:22.298Z","type":"message"}
{"nick":"pfox__","message":"they're gone?","date":"2013-01-28T16:15:27.060Z","type":"message"}
{"nick":"indutny","message":"they were removed","date":"2013-01-28T16:15:27.723Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-28T16:15:29.616Z","type":"message"}
{"nick":"pfox__","message":"nice.","date":"2013-01-28T16:15:29.906Z","type":"message"}
{"nick":"pfox__","message":"ok, that makes my job easier :)","date":"2013-01-28T16:15:36.575Z","type":"message"}
{"nick":"indutny","message":"yeah, can you show me your patches?","date":"2013-01-28T16:15:37.342Z","type":"message"}
{"nick":"pfox__","message":"sure, one moment","date":"2013-01-28T16:15:47.615Z","type":"message"}
{"nick":"pfox__","message":"https://github.com/graydon/libuv/commit/1d6aec9d54c7a684ade521f71a4d538a6a88b14f","date":"2013-01-28T16:16:07.530Z","type":"message"}
{"nick":"indutny","message":"replacement code is completely new, but I'd like to be sure that your patches shoudn't be applied to fix any issues","date":"2013-01-28T16:16:12.176Z","type":"message"}
{"nick":"pfox__","message":"and https://github.com/graydon/libuv/commit/4d392c86feb6389f550d8110d36fa90d66c09251","date":"2013-01-28T16:16:13.559Z","type":"message"}
{"nick":"pfox__","message":"(i'm not graydon, btw.. going to do a pull req to this repo once complete though)","date":"2013-01-28T16:16:40.637Z","type":"message"}
{"nick":"pfox__","message":"graydon/libuv is the submodule that rust builds against","date":"2013-01-28T16:16:50.528Z","type":"message"}
{"nick":"pfox__","message":"my local work is in olsonjeffery/libuv branch libuv_update","date":"2013-01-28T16:17:05.778Z","type":"message"}
{"nick":"pfox__","message":"i skipped those two commits in the rebase","date":"2013-01-28T16:17:10.276Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: thoughts ^","date":"2013-01-28T16:17:16.077Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-28T16:17:20.362Z","type":"message"}
{"nick":"indutny","message":"first question - does it work? :)","date":"2013-01-28T16:17:26.941Z","type":"message"}
{"nick":"indutny","message":"on android","date":"2013-01-28T16:17:28.221Z","type":"message"}
{"nick":"pfox__","message":"this is the one patch that i did apply, though","date":"2013-01-28T16:17:30.084Z","type":"message"}
{"nick":"pfox__","message":"https://github.com/graydon/libuv/commit/1170ffba3ac5191930b40c897d4569a9d8a296a3","date":"2013-01-28T16:17:30.751Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: i noticed a while ago that rust has platform-specific code for mutexes, semaphores, etc.","date":"2013-01-28T16:17:36.970Z","type":"message"}
{"nick":"bnoordhuis","message":"you may be able to replace those with the libuv ones","date":"2013-01-28T16:17:47.664Z","type":"message"}
{"nick":"pfox__","message":"yeah. my hope-beyond-hope is that rust can build from a clean libuv tree","date":"2013-01-28T16:18:06.306Z","type":"message"}
{"nick":"pfox__","message":"indutny: re: android.. i don't know, i was inactive in the project when this patch came ni and don't really understand the context","date":"2013-01-28T16:19:09.504Z","type":"message"}
{"nick":"bradleymeck","date":"2013-01-28T16:19:21.978Z","type":"join"}
{"nick":"pfox__","message":"brson, who'll probably be around later, could answer that question","date":"2013-01-28T16:19:22.381Z","type":"message"}
{"nick":"bnoordhuis","message":"IPV6_HOPLIMIT <- that should probably become a #define in src/win/winapi.h","date":"2013-01-28T16:19:23.615Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: sony was working on porting libuv/node to android. they said they'd follow up with patches sometime in february","date":"2013-01-28T16:20:02.405Z","type":"message"}
{"nick":"bnoordhuis","message":"in case you have build issues and don't want to look into it yourself :)","date":"2013-01-28T16:20:13.518Z","type":"message"}
{"nick":"pfox__","message":"yeah. i can't speak for graydon or brson, but im not sure that android is actually a priority build target atm.","date":"2013-01-28T16:21:04.512Z","type":"message"}
{"nick":"pfox__","message":"but ill file that away, for sure.","date":"2013-01-28T16:21:14.099Z","type":"message"}
{"nick":"indutny","message":"great","date":"2013-01-28T16:21:48.320Z","type":"message"}
{"nick":"indutny","message":"delegation of work :)","date":"2013-01-28T16:21:51.057Z","type":"message"}
{"nick":"`3E|Cooking","reason":"Remote host closed the connection","date":"2013-01-28T16:22:03.253Z","type":"quit"}
{"nick":"pfox__","message":"anywho. it sounds like we're ok for now, re: eio and ev changes. i'll just move on to the next phase of my integration work. thanks for answering my questions.","date":"2013-01-28T16:23:00.267Z","type":"message"}
{"nick":"trevnorris","date":"2013-01-28T16:32:51.991Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: sup?","date":"2013-01-28T16:38:04.134Z","type":"message"}
{"nick":"dap","date":"2013-01-28T16:40:06.079Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u0002e26622b\u0002 : stream: Correct Transform class backpressure  The refactor in b43e544140c - http://git.io/kjgB7A","date":"2013-01-28T16:41:02.631Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i'm going to dig into profiling the js in net-pipe","date":"2013-01-28T16:41:28.607Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: already there. been doing it all weekend. =)","date":"2013-01-28T16:41:40.776Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: can you turn your attention to the http_simple benchmarks?","date":"2013-01-28T16:41:43.407Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: kewl!  what'd you find?","date":"2013-01-28T16:41:48.597Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: or should we just pull your `make bench` stuff?","date":"2013-01-28T16:42:02.987Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i'd like to get bnoordhuis and indutny to sign off on it first.","date":"2013-01-28T16:42:23.867Z","type":"message"}
{"nick":"trevnorris","message":"I can have it ready in the next few hours. but there are a couple cleanups I need to do.","date":"2013-01-28T16:42:34.748Z","type":"message"}
{"nick":"indutny","message":"wha?","date":"2013-01-28T16:42:37.187Z","type":"message"}
{"nick":"isaacs","message":"indutny: trevnorris has been working on a `make bench` target that will produce more useful and consistent output","date":"2013-01-28T16:45:43.915Z","type":"message"}
{"nick":"isaacs","message":"indutny: rather than our current set of benchmarks that all make completely different output","date":"2013-01-28T16:46:01.334Z","type":"message"}
{"nick":"indutny","message":"aaah!","date":"2013-01-28T16:46:17.711Z","type":"message"}
{"nick":"indutny","message":"great","date":"2013-01-28T16:46:18.383Z","type":"message"}
{"nick":"trevnorris","message":"(plus things like command line parameterization, arguments parsing, async test support, completion hooks to write to file, etc. think it's all in there. =)","date":"2013-01-28T16:46:46.963Z","type":"message"}
{"nick":"indutny","message":"btw, I'm running http benchmark across all commits since v0.8","date":"2013-01-28T16:47:20.242Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: what profiling have you been doing of net-pipe?","date":"2013-01-28T16:47:22.977Z","type":"message"}
{"nick":"isaacs","message":"indutny: awesome :)","date":"2013-01-28T16:47:32.519Z","type":"message"}
{"nick":"indutny","message":"to find out if there was some commits that degraded performance significantly","date":"2013-01-28T16:47:37.237Z","type":"message"}
{"nick":"isaacs","message":"that's good","date":"2013-01-28T16:48:02.173Z","type":"message"}
{"nick":"qmx|lunch","new_nick":"qmx","date":"2013-01-28T16:49:34.773Z","type":"nick"}
{"nick":"isaacs","message":"there's one last API change that i think we ought to make before 0.10, and then it's just all about the performance regressions.","date":"2013-01-28T16:49:43.252Z","type":"message"}
{"nick":"isaacs","message":"(minor.  duplex streams should take 2 options objects, so you can configure the readable and writable sides separately)","date":"2013-01-28T16:50:00.642Z","type":"message"}
{"nick":"bradleymeck","reason":"Read error: Connection reset by peer","date":"2013-01-28T16:54:42.207Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-01-28T16:55:04.611Z","type":"join"}
{"nick":"isaacs","message":"Can someone review these two minor obvious fixes? https://github.com/isaacs/node/compare/master","date":"2013-01-28T16:55:17.408Z","type":"message"}
{"nick":"indutny","message":"isaacs: lgtm, btw, can you initialize ._handle on socket too?","date":"2013-01-28T16:56:11.375Z","type":"message"}
{"nick":"indutny","message":"please","date":"2013-01-28T16:56:12.261Z","type":"message"}
{"nick":"indutny","message":"I think we should look through code's lines","date":"2013-01-28T16:56:25.739Z","type":"message"}
{"nick":"indutny","message":"and find other properties that are added to classes dynamically","date":"2013-01-28T16:56:36.695Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: I think context switching is hurting. .call() is being called almost 40% more.","date":"2013-01-28T16:56:44.160Z","type":"message"}
{"nick":"indutny","message":"its pretty bad thing - hidden class creation, etc","date":"2013-01-28T16:56:45.130Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: check this: https://gist.github.com/4657156","date":"2013-01-28T16:56:53.058Z","type":"message"}
{"nick":"trevnorris","message":"a lot of node is hurt by context switching.","date":"2013-01-28T16:57:02.684Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yeah, we .call in EventEmitter.emit","date":"2013-01-28T16:57:33.467Z","type":"message"}
{"nick":"isaacs","message":"i believe","date":"2013-01-28T16:57:35.127Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: but Date.now() is not reliable enough, i think","date":"2013-01-28T16:57:51.347Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: must. I ran net-tcp for 1 sec and .call was called 40k times.","date":"2013-01-28T16:58:02.121Z","type":"message"}
{"nick":"trevnorris","message":"that's insane","date":"2013-01-28T16:58:05.569Z","type":"message"}
{"nick":"indutny","message":"so far everything is pretty stable","date":"2013-01-28T16:58:18.242Z","type":"message"}
{"nick":"indutny","message":"0d7a021 - 2280.4","date":"2013-01-28T16:58:18.718Z","type":"message"}
{"nick":"indutny","message":"a39f669 - 2443.96","date":"2013-01-28T16:58:18.905Z","type":"message"}
{"nick":"indutny","message":"acd0df4 - 2354.13","date":"2013-01-28T16:58:19.030Z","type":"message"}
{"nick":"indutny","message":"2e371b8 - 2308.07","date":"2013-01-28T16:58:19.030Z","type":"message"}
{"nick":"indutny","message":"0972acb - 2247.25","date":"2013-01-28T16:58:19.160Z","type":"message"}
{"nick":"indutny","message":"7f2a78b - 2286.37","date":"2013-01-28T16:58:19.160Z","type":"message"}
{"nick":"indutny","message":"bdc7251 - 2387.51","date":"2013-01-28T16:58:20.210Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: Date.now() is reliable for benchmarks over 1 sec.","date":"2013-01-28T16:58:24.043Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yeah, i guess","date":"2013-01-28T16:58:31.266Z","type":"message"}
{"nick":"trevnorris","message":"i'll swap it. give me a moment","date":"2013-01-28T16:58:43.180Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: btw, i usually prefer to report benchmarks as ops/time rather than time/N-opts","date":"2013-01-28T16:59:06.476Z","type":"message"}
{"nick":"trevnorris","message":"cool. easy change","date":"2013-01-28T16:59:25.469Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: that way, a \"40% regression\" is actually \"40% fewer operations per second\" rather than being \"40% more seconds per operation\" which is the inverse of what you care about.","date":"2013-01-28T16:59:40.085Z","type":"message"}
{"nick":"indexzero","date":"2013-01-28T17:00:05.909Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: then it's a measure of speed rather than a measure of 1/speed","date":"2013-01-28T17:00:13.635Z","type":"message"}
{"nick":"trevnorris","message":"ah, got it.","date":"2013-01-28T17:00:20.130Z","type":"message"}
{"nick":"isaacs","message":"it gets really weird around the extreme fast end.","date":"2013-01-28T17:00:31.215Z","type":"message"}
{"nick":"isaacs","message":"on master:","date":"2013-01-28T17:02:30.614Z","type":"message"}
{"nick":"isaacs","message":"=== release test-cluster-net-send ===                    ","date":"2013-01-28T17:02:33.424Z","type":"message"}
{"nick":"isaacs","message":"Path: simple/test-cluster-net-send","date":"2013-01-28T17:02:33.548Z","type":"message"}
{"nick":"isaacs","message":"[91906] master","date":"2013-01-28T17:02:33.548Z","type":"message"}
{"nick":"isaacs","message":"[91907] worker","date":"2013-01-28T17:02:33.548Z","type":"message"}
{"nick":"isaacs","message":"Assertion failed: (tcpConstructor.IsEmpty() == false), function Instantiate, file ../src/tcp_wrap.cc, line 63.","date":"2013-01-28T17:02:33.548Z","type":"message"}
{"nick":"isaacs","message":"Command: out/Release/node /Users/isaacs/dev/js/node-master/test/simple/test-cluster-net-send.js","date":"2013-01-28T17:02:36.684Z","type":"message"}
{"nick":"isaacs","message":"but only when run through the test runner.","date":"2013-01-28T17:02:45.914Z","type":"message"}
{"nick":"isaacs","message":"indutny: i'm suspicious of 0d7a021","date":"2013-01-28T17:03:09.674Z","type":"message"}
{"nick":"indutny","message":"isaacs: erm?","date":"2013-01-28T17:03:32.595Z","type":"message"}
{"nick":"indutny","message":"it works for me","date":"2013-01-28T17:03:36.421Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: updated the gist to use hrtime(). same results.","date":"2013-01-28T17:03:53.605Z","type":"message"}
{"nick":"isaacs","message":"indutny: are you runing make test, or ./node test/simple/test-cluster-net-send.js?","date":"2013-01-28T17:03:55.203Z","type":"message"}
{"nick":"indutny","message":"latter one","date":"2013-01-28T17:04:01.586Z","type":"message"}
{"nick":"isaacs","message":"indutny: try `python tools/test.py simple/test-cluster-net-send`","date":"2013-01-28T17:04:13.603Z","type":"message"}
{"nick":"indutny","message":"huuuh??","date":"2013-01-28T17:05:00.914Z","type":"message"}
{"nick":"indutny","message":"wtf","date":"2013-01-28T17:05:02.757Z","type":"message"}
{"nick":"indutny","message":"it works 100% of time when run from repl","date":"2013-01-28T17:05:23.710Z","type":"message"}
{"nick":"isaacs","message":"indutny: https://gist.github.com/4657227","date":"2013-01-28T17:05:55.642Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-01-28T17:05:56.951Z","type":"message"}
{"nick":"isaacs","message":"same here","date":"2013-01-28T17:05:59.276Z","type":"message"}
{"nick":"isaacs","message":"something odd with the python runner's stdio maybe?","date":"2013-01-28T17:06:13.891Z","type":"message"}
{"nick":"isaacs","message":"oh, i guess it has to be 0d7a021 that's the culprit, since the test doesn't exist before then ;)","date":"2013-01-28T17:07:17.640Z","type":"message"}
{"nick":"indutny","message":"erm?","date":"2013-01-28T17:08:33.010Z","type":"message"}
{"nick":"indutny","message":"interesting thing...","date":"2013-01-28T17:10:05.638Z","type":"message"}
{"nick":"indutny","message":"will figure it out soon","date":"2013-01-28T17:10:09.190Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2013-01-28T17:10:29.098Z","type":"message"}
{"nick":"isaacs","message":"thanks :)","date":"2013-01-28T17:10:31.328Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u00024c78a52\u0002 : net: Initialize _connection, _handle in Socket ctor  The better to reduce (+1 more commits) - http://git.io/uMEeXw","date":"2013-01-28T17:10:32.257Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 260 seconds","date":"2013-01-28T17:12:25.005Z","type":"quit"}
{"nick":"isaacs","message":"trevnorris: i'm not sure how we could get around using .call in EE.emit","date":"2013-01-28T17:14:09.446Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: since the function is actually attached to emitter._events","date":"2013-01-28T17:14:24.116Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: the alternative would be to create a buttload of hidden classes, or swap out a temp field, which is probably worse.","date":"2013-01-28T17:14:48.326Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: ie, instead of handler.call(emitter, ...) we could do emitter.__tmpHandler = handler; emitter.__tmpHandler(...)","date":"2013-01-28T17:15:20.045Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: might be worth investigating, at least, i guess","date":"2013-01-28T17:15:40.255Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: haven't taken a look yet. just know it's being called 40% more and .call is 20% slower than calling the function right out.","date":"2013-01-28T17:15:56.693Z","type":"message"}
{"nick":"trevnorris","message":"just something to keep in mind.","date":"2013-01-28T17:16:03.610Z","type":"message"}
{"nick":"trevnorris","message":"fixing up the benchmarks now for review.","date":"2013-01-28T17:16:26.141Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2013-01-28T17:17:11.634Z","type":"message"}
{"nick":"isaacs","message":"i'll see what effect the __tmpHandler has on http-simple, if any","date":"2013-01-28T17:17:27.724Z","type":"message"}
{"nick":"indutny","message":"isaacs: bnoordhuis: https://gist.github.com/ac8b471e51ae80069fda","date":"2013-01-28T17:24:24.418Z","type":"message"}
{"nick":"indutny","message":"fixes python test","date":"2013-01-28T17:24:27.588Z","type":"message"}
{"nick":"isaacs","message":"indutny: lgtm","date":"2013-01-28T17:25:54.258Z","type":"message"}
{"nick":"indutny","message":"isaacs: do we have big ubuntu drone?","date":"2013-01-28T17:25:54.408Z","type":"message"}
{"nick":"indutny","message":"gret","date":"2013-01-28T17:25:57.317Z","type":"message"}
{"nick":"isaacs","message":"indutny: yes.","date":"2013-01-28T17:25:58.688Z","type":"message"}
{"nick":"isaacs","message":"indutny: make sure that `make test` passes now","date":"2013-01-28T17:26:04.489Z","type":"message"}
{"nick":"indutny","message":"huuuh?","date":"2013-01-28T17:26:04.617Z","type":"message"}
{"nick":"indutny","message":"where is it?","date":"2013-01-28T17:26:06.342Z","type":"message"}
{"nick":"isaacs","message":"indutny: 165.225.130.75","date":"2013-01-28T17:26:22.598Z","type":"message"}
{"nick":"isaacs","message":"indutny: it's not *that* big","date":"2013-01-28T17:26:28.318Z","type":"message"}
{"nick":"isaacs","message":"but it's pretty big","date":"2013-01-28T17:26:29.918Z","type":"message"}
{"nick":"indutny","message":"and I was spending my money on it....","date":"2013-01-28T17:26:33.585Z","type":"message"}
{"nick":"indutny","message":"shit :)","date":"2013-01-28T17:26:35.825Z","type":"message"}
{"nick":"indutny","message":"ok, I'm going to restart benchmarks on it","date":"2013-01-28T17:26:49.096Z","type":"message"}
{"nick":"isaacs","message":"dude, don't spend your own money on servers.  that's what employers are for","date":"2013-01-28T17:26:50.808Z","type":"message"}
{"nick":"indutny","message":"this basically means that it better not get touched in 24h","date":"2013-01-28T17:27:09.961Z","type":"message"}
{"nick":"indutny","message":"a lot of commits to check","date":"2013-01-28T17:27:15.920Z","type":"message"}
{"nick":"indutny","message":"isaacs: np, I've some cash","date":"2013-01-28T17:27:51.982Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-01-28T17:27:52.582Z","type":"message"}
{"nick":"isaacs","message":"indutny: that's fine.  i only use it for builds","date":"2013-01-28T17:28:19.517Z","type":"message"}
{"nick":"isaacs","message":"indutny: go nuts on it :)","date":"2013-01-28T17:28:22.907Z","type":"message"}
{"nick":"indutny","message":"haha :)","date":"2013-01-28T17:28:27.163Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-28T17:28:28.025Z","type":"message"}
{"nick":"indutny","message":"deal","date":"2013-01-28T17:28:28.329Z","type":"message"}
{"nick":"indutny","message":"tomorrow I'll be tortured","date":"2013-01-28T17:30:04.894Z","type":"message"}
{"nick":"indutny","message":"by dentist","date":"2013-01-28T17:30:06.443Z","type":"message"}
{"nick":"indutny","message":"so I'll probably be offline for a lot","date":"2013-01-28T17:30:15.094Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Fedor Indutny\u000f \u00037master\u000f * \u0002c13354e\u0002 : child_process: move binding init in constructor  Doing this in net.Socket - http://git.io/oTV8Bw","date":"2013-01-28T17:30:16.506Z","type":"message"}
{"nick":"indutny","message":"of time","date":"2013-01-28T17:30:16.948Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: using a temp method is way slower than .call()","date":"2013-01-28T17:33:29.343Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: in real usage, anyway","date":"2013-01-28T17:33:36.714Z","type":"message"}
{"nick":"trevnorris","message":"hm interesting. thanks.","date":"2013-01-28T17:33:46.957Z","type":"message"}
{"nick":"AndreasMadsen","date":"2013-01-28T17:34:14.470Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: oh, actually.  not way slower.  just fluctuating more.","date":"2013-01-28T17:36:09.742Z","type":"message"}
{"nick":"isaacs","message":"but about the same, actually","date":"2013-01-28T17:36:24.171Z","type":"message"}
{"nick":"trevnorris","message":"even stranger. only reason I can think of is gc is going nuts.","date":"2013-01-28T17:37:24.150Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-01-28T17:42:01.303Z","type":"quit"}
{"nick":"isaacs","message":"maybe","date":"2013-01-28T17:47:22.304Z","type":"message"}
{"nick":"isaacs","message":"i'm runninga more thorough test now","date":"2013-01-28T17:47:31.064Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: https://docs.google.com/spreadsheet/ccc?key=0AganzoeqkiHddE9uRlA5WS0xSF9NTGN1QS0zZ3FRSWc#gid=8","date":"2013-01-28T18:00:41.836Z","type":"message"}
{"nick":"trevnorris","message":"thx","date":"2013-01-28T18:01:26.146Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: so, yes, elimitating .call() is slightly faster overall","date":"2013-01-28T18:02:02.025Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: but there's probably still a context switch somewhere. saw the same problem when working with buffers.","date":"2013-01-28T18:02:27.537Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: oh, wait.  i think i might have had them switched...","date":"2013-01-28T18:02:42.354Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: writeFloat/writeDouble are 20% faster when done directly on a slow buffer.","date":"2013-01-28T18:02:43.434Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: oh, yes, i did","date":"2013-01-28T18:02:53.754Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: .call() is slightly faster overall.  3% faster.","date":"2013-01-28T18:03:07.784Z","type":"message"}
{"nick":"trevnorris","message":"ah. ok. but yeah. much higher stdev","date":"2013-01-28T18:03:09.057Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: .call() is 3% faster, with a 6% lower st dev","date":"2013-01-28T18:03:48.483Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-28T18:05:41.889Z","type":"quit"}
{"nick":"`3E|Cooking","date":"2013-01-28T18:10:37.146Z","type":"join"}
{"nick":"`3rdEden","date":"2013-01-28T18:11:21.136Z","type":"join"}
{"nick":"`3E|Cooking","reason":"Ping timeout: 256 seconds","date":"2013-01-28T18:15:18.038Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-01-28T18:17:48.224Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: for some reason when I change a few of the test parameters I get:","date":"2013-01-28T18:19:37.371Z","type":"message"}
{"nick":"trevnorris","message":"(node) warning: Recursive process.nextTick detected. This will break in the next version of node.","date":"2013-01-28T18:19:38.064Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: are you calling process.nextTick from a process.nextTick callback?","date":"2013-01-28T18:21:17.452Z","type":"message"}
{"nick":"nsm","date":"2013-01-28T18:22:16.438Z","type":"join"}
{"nick":"TooTallNate","date":"2013-01-28T18:23:27.830Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: um. only thing I can think would be http://git.io/OTVHvQ","date":"2013-01-28T18:24:29.951Z","type":"message"}
{"nick":"bnoordhuis","message":"back","date":"2013-01-28T18:26:03.569Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: yeah, i'll look at http (already was, a little)","date":"2013-01-28T18:26:18.271Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: also, there is a 20% regression between v0.8 and master for tcp_net.js, but only 2% for tcp_netclient.js","date":"2013-01-28T18:27:38.200Z","type":"message"}
{"nick":"jmar777","date":"2013-01-28T18:29:14.697Z","type":"join"}
{"nick":"isaacs","message":"awesome.","date":"2013-01-28T18:34:41.873Z","type":"message"}
{"nick":"isaacs","message":"you guys are the best.","date":"2013-01-28T18:34:44.823Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i don't see why http://git.io/OTVHvQ would cause a nextTick recursion","date":"2013-01-28T18:35:32.983Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: your stuff is in benchmark-refactor branch, yes?","date":"2013-01-28T18:37:07.712Z","type":"message"}
{"nick":"qmx","new_nick":"qmx|brb","date":"2013-01-28T18:38:17.362Z","type":"nick"}
{"nick":"trevnorris","message":"isaacs: yeah it is. still updating tests from your gist, but a few are there.","date":"2013-01-28T18:38:22.068Z","type":"message"}
{"nick":"nsm","reason":"Quit: nsm","date":"2013-01-28T18:39:40.240Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: if you grab it. run the following from benchmark/ : `../node net/tcp_netclient.js --port 3000 --write 0xfffff --size 0xffffff --len 5`","date":"2013-01-28T18:39:43.349Z","type":"message"}
{"nick":"trevnorris","message":"that should spew the messages.","date":"2013-01-28T18:39:53.519Z","type":"message"}
{"nick":"isaacs","message":"k","date":"2013-01-28T18:39:55.700Z","type":"message"}
{"nick":"trevnorris","message":"actually, just the `--size 0xfffff` param is the important one.","date":"2013-01-28T18:40:34.996Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: oh, and fyi. 0 regression for tcp_raw.js","date":"2013-01-28T18:46:29.043Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yeah, it's coming out of Socket.write","date":"2013-01-28T18:46:30.539Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: fantastic.","date":"2013-01-28T18:46:34.766Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2013-01-28T18:46:35.456Z","type":"message"}
{"nick":"isaacs","message":"it's like a see-saw.  we make things a little faster, then find a bug, and fix the bug, and the bugfix makes things slower.","date":"2013-01-28T18:47:08.015Z","type":"message"}
{"nick":"trevnorris","message":"heh","date":"2013-01-28T18:47:32.638Z","type":"message"}
{"nick":"isaacs","message":"the tick warnings are coming from the fact that our write() is being flushed entirely in the first tick, so the cb gets called on nextTick rather than immediately","date":"2013-01-28T18:49:15.294Z","type":"message"}
{"nick":"isaacs","message":"myabe we should get rid of that guarantee","date":"2013-01-28T18:51:02.471Z","type":"message"}
{"nick":"`3rdEden","reason":"Quit: BRBLULZ","date":"2013-01-28T18:51:41.490Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: what would be the usage impact?","date":"2013-01-28T18:52:55.180Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: we can't get rid of that guarantee :)","date":"2013-01-28T18:53:11.882Z","type":"message"}
{"nick":"isaacs","message":"actually","date":"2013-01-28T18:53:13.682Z","type":"message"}
{"nick":"isaacs","message":"the trade-off is that you get a stack overflow instead.","date":"2013-01-28T18:53:24.422Z","type":"message"}
{"nick":"isaacs","message":"actualy, Socket.write() should not ever be sync, since the writeReq should not allow that anyway","date":"2013-01-28T18:53:47.752Z","type":"message"}
{"nick":"isaacs","message":"so i think something is wrong","date":"2013-01-28T18:53:50.951Z","type":"message"}
{"nick":"trevnorris","message":"is the callback called in a nextTick?","date":"2013-01-28T18:54:20.583Z","type":"message"}
{"nick":"`3E|Cooking","date":"2013-01-28T18:54:29.146Z","type":"join"}
{"nick":"`3E|Cooking","new_nick":"`3rdEden","date":"2013-01-28T18:54:29.146Z","type":"nick"}
{"nick":"loladiro","date":"2013-01-28T18:54:46.853Z","type":"join"}
{"nick":"qmx|brb","new_nick":"qmx","date":"2013-01-28T18:55:09.800Z","type":"nick"}
{"nick":"isaacs","message":"trevnorris: you realize that new Buffer(bufSize).length === 8 here?","date":"2013-01-28T18:55:37.980Z","type":"message"}
{"nick":"isaacs","message":"> new Buffer(\"0xffffff\")","date":"2013-01-28T18:55:59.400Z","type":"message"}
{"nick":"isaacs","message":"<Buffer 30 78 66 66 66 66 66 66>","date":"2013-01-28T18:56:00.150Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: ah mother. parser fail. i'll fix that. thanks.","date":"2013-01-28T18:56:21.523Z","type":"message"}
{"nick":"AvianFlu","date":"2013-01-28T18:56:33.025Z","type":"join"}
{"nick":"isaacs","message":"np","date":"2013-01-28T18:56:51.229Z","type":"message"}
{"nick":"isaacs","message":"that's why it's flushing entirely.","date":"2013-01-28T18:56:56.220Z","type":"message"}
{"nick":"trevnorris","message":"ok, so it's because the buffer is so small?","date":"2013-01-28T18:57:23.923Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: right","date":"2013-01-28T18:57:47.519Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: and net.js has an optimization where it checks to see if the socket was able to eat all the data, and then calls cb() right now, instead of waiting for libuv to come back with the afterWrite function","date":"2013-01-28T18:58:11.039Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: in 0.8, we always waited","date":"2013-01-28T18:58:15.979Z","type":"message"}
{"nick":"nsm","date":"2013-01-28T18:58:16.203Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: but _stream_writable.js will *always* wait until nextTick, so with a zillion tiny writes, you get this nexttick recursion","date":"2013-01-28T18:58:48.858Z","type":"message"}
{"nick":"trevnorris","message":"ah... ok. interesting. so think there's a fix somewhere, or good as is?","date":"2013-01-28T18:59:16.435Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: oddly enough, it's *faster* to do it this way (wit hteh nt recursion) because we're letting it write more in a tight loop instead of waiting until the event loop does stuff.","date":"2013-01-28T18:59:31.758Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i think we do have to fix this, yes.","date":"2013-01-28T18:59:49.747Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: but i am not happy about removing the optimization :)","date":"2013-01-28T19:00:06.737Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: especialy, for stdio sync streams, it's not ideal.","date":"2013-01-28T19:00:33.927Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: seriously. sorry. not familiar enough with that part to have any ideas. but it's got to be in there somewhere.","date":"2013-01-28T19:02:30.659Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-01-28T19:02:48.605Z","type":"message"}
{"nick":"isaacs","message":"it seems like there's a few use cases for knowing process.tickDepth","date":"2013-01-28T19:03:03.885Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-28T19:04:12.340Z","type":"quit"}
{"nick":"indutny","message":"isaacs: my benchmark has checked commits up to 3d7818f :)","date":"2013-01-28T19:11:45.012Z","type":"message"}
{"nick":"brson","date":"2013-01-28T19:14:40.254Z","type":"join"}
{"nick":"lohkey","date":"2013-01-28T19:15:15.266Z","type":"join"}
{"nick":"isaacs","message":"indutny: kewl","date":"2013-01-28T19:16:14.726Z","type":"message"}
{"nick":"isaacs","message":"indutny: any interesting tidbits?","date":"2013-01-28T19:16:22.226Z","type":"message"}
{"nick":"nsm","reason":"Quit: nsm","date":"2013-01-28T19:19:13.155Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-01-28T19:26:33.846Z","type":"quit"}
{"nick":"indutny","message":"isaacs: not yet","date":"2013-01-28T19:26:40.574Z","type":"message"}
{"nick":"indutny","message":"it's pretty the same thing for now","date":"2013-01-28T19:26:47.411Z","type":"message"}
{"nick":"EhevuTov","date":"2013-01-28T19:26:49.440Z","type":"join"}
{"nick":"isaacs","message":"k","date":"2013-01-28T19:27:54.169Z","type":"message"}
{"nick":"isaacs","message":"indutny: what benchmark are you checking?  net-pipe?","date":"2013-01-28T19:28:04.719Z","type":"message"}
{"nick":"indutny","message":"http_auto","date":"2013-01-28T19:28:10.670Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2013-01-28T19:28:13.136Z","type":"message"}
{"nick":"isaacs","message":"indutny: with which args?","date":"2013-01-28T19:28:52.048Z","type":"message"}
{"nick":"loladiro","date":"2013-01-28T19:28:55.642Z","type":"join"}
{"nick":"indutny","message":"benchmark/http_simple_auto -c 250 -n 200000 bytes/1024","date":"2013-01-28T19:29:05.216Z","type":"message"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-01-28T19:29:10.424Z","type":"quit"}
{"nick":"isaacs","message":"indutny: throw a -k on there","date":"2013-01-28T19:29:14.978Z","type":"message"}
{"nick":"indutny","message":"oh, its too late :)","date":"2013-01-28T19:29:26.197Z","type":"message"}
{"nick":"indutny","message":"https://gist.github.com/4655489","date":"2013-01-28T19:29:28.018Z","type":"message"}
{"nick":"indutny","message":"^ that's the script I'm using","date":"2013-01-28T19:29:35.145Z","type":"message"}
{"nick":"isaacs","message":"indutny: pk","date":"2013-01-28T19:30:55.017Z","type":"message"}
{"nick":"isaacs","message":"indutny: maybe tomorrow when it finally finishes :)","date":"2013-01-28T19:31:02.017Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-01-28T19:31:05.222Z","type":"message"}
{"nick":"indutny","message":"hopefully it'll be tomorrow :)","date":"2013-01-28T19:31:10.235Z","type":"message"}
{"nick":"isaacs","message":"indutny: also, -c 250 is too much for mac ab","date":"2013-01-28T19:31:10.427Z","type":"message"}
{"nick":"indutny","message":"so far it's going pretty slow","date":"2013-01-28T19:31:14.300Z","type":"message"}
{"nick":"isaacs","message":"i usually use -c 50","date":"2013-01-28T19:31:20.937Z","type":"message"}
{"nick":"indutny","message":"that's running on your ubuntu drone","date":"2013-01-28T19:31:21.300Z","type":"message"}
{"nick":"isaacs","message":"k","date":"2013-01-28T19:31:24.816Z","type":"message"}
{"nick":"indutny","message":"and I wanted to have sort of stable results","date":"2013-01-28T19:31:33.093Z","type":"message"}
{"nick":"indutny","message":"anyway","date":"2013-01-28T19:31:38.910Z","type":"message"}
{"nick":"indutny","message":"yeah, it's too big, but ok","date":"2013-01-28T19:31:45.181Z","type":"message"}
{"nick":"`3rdEden","reason":"Quit: brb","date":"2013-01-28T19:32:36.272Z","type":"quit"}
{"nick":"isaacs","message":"i gotta run.  i'll be back in a few hours.","date":"2013-01-28T19:32:55.896Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: care to review? https://github.com/joyent/node/pull/4676","date":"2013-01-28T19:33:11.455Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: fixes your tickDepth warning woes ^","date":"2013-01-28T19:33:24.116Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: hey. I could have been intentionally running w/ a small buffer. ;-)","date":"2013-01-28T19:34:04.180Z","type":"message"}
{"nick":"`3rdEden","date":"2013-01-28T19:34:28.167Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-28T19:36:14.469Z","type":"quit"}
{"nick":"trevnorris","message":"about to test","date":"2013-01-28T19:36:15.497Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-01-28T19:37:09.880Z","type":"quit"}
{"nick":"bnoordhuis","message":"isaacs: hm, i don't know. i understand the motivation but it still seems somewhat hacky","date":"2013-01-28T19:38:13.506Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: works, but performance is worse than crap: --size 4 -> 0.0015 Gbits/sec","date":"2013-01-28T19:38:52.106Z","type":"message"}
{"nick":"trevnorris","message":"but it was always like that.","date":"2013-01-28T19:39:51.410Z","type":"message"}
{"nick":"trevnorris","message":"nothing to do w/ your patch","date":"2013-01-28T19:40:00.495Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-28T19:40:01.816Z","type":"quit"}
{"nick":"loladiro","date":"2013-01-28T19:42:22.486Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: so what's up with queen in netherlands?","date":"2013-01-28T19:42:36.046Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: she's stepping down :/","date":"2013-01-28T19:42:44.465Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: why?","date":"2013-01-28T19:42:52.937Z","type":"message"}
{"nick":"bnoordhuis","message":"because she turns 75 this year","date":"2013-01-28T19:43:02.074Z","type":"message"}
{"nick":"indutny","message":"but you'll have a king soon","date":"2013-01-28T19:43:42.198Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2013-01-28T19:44:31.807Z","type":"message"}
{"nick":"indutny","message":"hm... he doesn't look as good as she too me","date":"2013-01-28T19:45:15.160Z","type":"message"}
{"nick":"indutny","message":"though, I know little about him and her majesty","date":"2013-01-28T19:45:31.665Z","type":"message"}
{"nick":"bnoordhuis","message":"ah well, he'll do fine","date":"2013-01-28T19:46:54.346Z","type":"message"}
{"nick":"bnoordhuis","message":"it's mostly ceremonial anyway","date":"2013-01-28T19:47:01.987Z","type":"message"}
{"nick":"bnoordhuis","message":"1a91a9e24560 15a StoreIC: connection <- why is that event upsetting perf so bad?","date":"2013-01-28T19:48:10.341Z","type":"message"}
{"nick":"CoverSlide","message":"maxima looks kinda hot","date":"2013-01-28T19:48:16.126Z","type":"message"}
{"nick":"CoverSlide","message":"oh she's from argentina","date":"2013-01-28T19:48:41.187Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: interesting thing","date":"2013-01-28T19:49:04.618Z","type":"message"}
{"nick":"indutny","message":"do you have line number?","date":"2013-01-28T19:49:14.942Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: it's a perf map file generated from a v8.log","date":"2013-01-28T19:49:31.616Z","type":"message"}
{"nick":"indutny","message":"em... no line numbers, I guess? :)","date":"2013-01-28T19:49:42.918Z","type":"message"}
{"nick":"bnoordhuis","message":"nope","date":"2013-01-28T19:49:46.448Z","type":"message"}
{"nick":"indutny","message":"too bad","date":"2013-01-28T19:50:11.273Z","type":"message"}
{"nick":"bnoordhuis","message":"if i move it a few lines up, it works...","date":"2013-01-28T19:50:51.250Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: is it http benchmark?","date":"2013-01-28T19:50:52.512Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2013-01-28T19:50:55.529Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: fixed that bug. thanks for pointing that out. the net benchmarks are still incomplete, but think there are enough there to be helpful.","date":"2013-01-28T19:51:06.745Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: what if you'll add .connection property to OutgoingMessage?","date":"2013-01-28T19:51:23.471Z","type":"message"}
{"nick":"indutny","message":"say","date":"2013-01-28T19:51:24.234Z","type":"message"}
{"nick":"indutny","message":"this.connection = null;","date":"2013-01-28T19:51:28.053Z","type":"message"}
{"nick":"bnoordhuis","message":"nah, i just want to know why perf won't parse it","date":"2013-01-28T19:51:49.065Z","type":"message"}
{"nick":"indutny","message":"what do you mean by won't parse it?","date":"2013-01-28T19:52:04.309Z","type":"message"}
{"nick":"indutny","message":"aah","date":"2013-01-28T19:52:15.094Z","type":"message"}
{"nick":"indutny","message":"you know it's address","date":"2013-01-28T19:52:17.145Z","type":"message"}
{"nick":"indutny","message":"but it didn't take it","date":"2013-01-28T19:52:20.122Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2013-01-28T19:52:27.090Z","type":"message"}
{"nick":"indutny","message":"btw, have you seen my callgrind.js thingy?","date":"2013-01-28T19:52:28.290Z","type":"message"}
{"nick":"indutny","message":"https://github.com/indutny/callgrind.js","date":"2013-01-28T19:52:36.653Z","type":"message"}
{"nick":"indutny","message":"it does pretty the same thing, but for callgrind results","date":"2013-01-28T19:52:44.967Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, i've seen that :)","date":"2013-01-28T19:53:03.170Z","type":"message"}
{"nick":"bnoordhuis","message":"but perf lets me drill down into the actual code","date":"2013-01-28T19:53:13.399Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis, trevnorris: Maybe should be just a regular property instead of a getter.","date":"2013-01-28T19:53:18.192Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-28T19:53:37.703Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: sorry, where?","date":"2013-01-28T19:53:40.485Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, i guess i should get some dinner before it's too late","date":"2013-01-28T19:53:42.327Z","type":"message"}
{"nick":"bnoordhuis","action":"is biab","date":"2013-01-28T19:53:45.838Z","type":"action"}
{"nick":"trevnorris","message":"isaacs: quick overview: tcp_net.js - ~20% regression; tcp_netclient.js - ~5% regression; tcp_raw.js - 0 regression","date":"2013-01-28T19:55:05.941Z","type":"message"}
{"nick":"AvianFlu","date":"2013-01-28T19:55:12.227Z","type":"join"}
{"nick":"indutny","message":"trevnorris: and http_auto ?","date":"2013-01-28T19:55:34.558Z","type":"message"}
{"nick":"trevnorris","message":"indutny: haven't done that one yet. been adding some net tests isaacs gist'd and testing w/ the new benchmark api.","date":"2013-01-28T19:56:40.664Z","type":"message"}
{"nick":"trevnorris","message":"haven't actually made any code changes. just trying to benchmark the tiny bits.","date":"2013-01-28T19:58:00.472Z","type":"message"}
{"nick":"indutny","message":"oh god","date":"2013-01-28T19:58:05.642Z","type":"message"}
{"nick":"indutny","message":"I've counted","date":"2013-01-28T19:58:07.445Z","type":"message"}
{"nick":"indutny","message":"with current speed I'll need 42 days to benchmark all commits since v0.8","date":"2013-01-28T19:58:21.234Z","type":"message"}
{"nick":"trevnorris","message":"indutny: lol, awesome.","date":"2013-01-28T19:58:33.197Z","type":"message"}
{"nick":"c4milo","date":"2013-01-28T19:58:49.125Z","type":"join"}
{"nick":"trevnorris","message":"indutny: how long is a single benchmark taking?","date":"2013-01-28T20:19:12.395Z","type":"message"}
{"nick":"indutny","message":"30sec","date":"2013-01-28T20:19:53.244Z","type":"message"}
{"nick":"indutny","message":"including build time","date":"2013-01-28T20:20:00.411Z","type":"message"}
{"nick":"indutny","message":"I'm using stepping now","date":"2013-01-28T20:20:11.580Z","type":"message"}
{"nick":"indutny","message":"building every third commit","date":"2013-01-28T20:20:17.195Z","type":"message"}
{"nick":"indutny","message":"so it should take much less time now","date":"2013-01-28T20:20:30.354Z","type":"message"}
{"nick":"indutny","message":"hopefully around 5 hours","date":"2013-01-28T20:20:42.622Z","type":"message"}
{"nick":"trevnorris","message":"um. like 1/3 the time?","date":"2013-01-28T20:20:54.799Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-01-28T20:21:32.364Z","type":"message"}
{"nick":"indutny","message":"I've made benchmarks smaller too","date":"2013-01-28T20:21:38.504Z","type":"message"}
{"nick":"indutny","message":"it was around 1.5 minutes","date":"2013-01-28T20:21:42.054Z","type":"message"}
{"nick":"indutny","message":"now 30 seconds","date":"2013-01-28T20:21:46.896Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok.","date":"2013-01-28T20:21:49.085Z","type":"message"}
{"nick":"indutny","message":"err","date":"2013-01-28T20:21:50.063Z","type":"message"}
{"nick":"indutny","message":"something likes this","date":"2013-01-28T20:21:55.125Z","type":"message"}
{"nick":"indutny","message":"do not want to waste much time on it","date":"2013-01-28T20:22:28.578Z","type":"message"}
{"nick":"indutny","message":"since I'm not sure if we'll get anything useful out of it","date":"2013-01-28T20:22:35.362Z","type":"message"}
{"nick":"trevnorris","message":"indutny: if you have a spare min, mind looking over GH-4656. still needs work, but the basic api is there.","date":"2013-01-28T20:23:20.155Z","type":"message"}
{"nick":"trevnorris","message":"it's meant to ease this benchmark pain.","date":"2013-01-28T20:23:30.883Z","type":"message"}
{"nick":"loladiro","date":"2013-01-28T20:31:01.110Z","type":"join"}
{"nick":"qmx","new_nick":"qmx|brb","date":"2013-01-28T20:37:48.867Z","type":"nick"}
{"nick":"bradleymeck","date":"2013-01-28T20:39:41.965Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: mind giving me a hint if any of the following is worth taking note? https://gist.github.com/4658797","date":"2013-01-28T20:42:15.777Z","type":"message"}
{"nick":"trevnorris","message":"just ran valgrind -q ...","date":"2013-01-28T20:42:50.908Z","type":"message"}
{"nick":"sgallagh","date":"2013-01-28T20:46:12.852Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-28T20:47:45.448Z","type":"quit"}
{"nick":"qmx|brb","new_nick":"qmx","date":"2013-01-28T20:52:47.860Z","type":"nick"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-28T20:54:51.839Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-01-28T20:55:20.638Z","type":"join"}
{"nick":"AndreasMadsen","reason":"Remote host closed the connection","date":"2013-01-28T21:00:16.335Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-01-28T21:16:41.027Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033piscisaureus\u000f created branch dgram-cluster - http://git.io/xBCPZQ","date":"2013-01-28T21:16:54.820Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: ^-- can you review? https://github.com/joyent/node/compare/dgram-cluster","date":"2013-01-28T21:17:10.190Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: the only delta between the cluster commit and what you reviewed earlier are the tests btw. The other is a small fix.","date":"2013-01-28T21:17:53.912Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Bert Belder\u000f \u00037dgram-cluster\u000f * \u00026311f1c\u0002 : dgram: avoid EventEmitter leak warning  When a datagram socket hasn't bee - http://git.io/y6k8YA","date":"2013-01-28T21:19:21.946Z","type":"message"}
{"nick":"piscisaureus_","message":"node -e \"c=require('cluster');if (c.isMaster)for(i=0;i<8;i++)c.fork();else while(true);\"    <-- ... comfortable warmth for your lap","date":"2013-01-28T21:35:21.328Z","type":"message"}
{"nick":"indexzero","date":"2013-01-28T21:35:48.558Z","type":"join"}
{"nick":"indutny","message":"why not spinning in master too?","date":"2013-01-28T21:36:51.447Z","type":"message"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-01-28T21:36:58.971Z","type":"quit"}
{"nick":"piscisaureus_","message":"ah that","date":"2013-01-28T21:37:02.430Z","type":"message"}
{"nick":"hz","date":"2013-01-28T21:37:02.558Z","type":"join"}
{"nick":"indutny","message":"remove `else`","date":"2013-01-28T21:37:06.580Z","type":"message"}
{"nick":"piscisaureus_","message":"that'd be shorter for sure","date":"2013-01-28T21:37:06.984Z","type":"message"}
{"nick":"piscisaureus_","message":"but it wouldn't help","date":"2013-01-28T21:37:16.114Z","type":"message"}
{"nick":"indutny","message":"depends","date":"2013-01-28T21:37:22.213Z","type":"message"}
{"nick":"indutny","message":"if i<3","date":"2013-01-28T21:37:25.628Z","type":"message"}
{"nick":"piscisaureus_","message":"I need a way to make my gpu sweat as well :-)","date":"2013-01-28T21:37:25.978Z","type":"message"}
{"nick":"indutny","message":"oooh","date":"2013-01-28T21:37:30.495Z","type":"message"}
{"nick":"piscisaureus_","message":"of cours I can just run far cry 3 in the background :-p","date":"2013-01-28T21:37:55.790Z","type":"message"}
{"nick":"indutny","message":"and or just webgl application","date":"2013-01-28T21:39:36.194Z","type":"message"}
{"nick":"indutny","message":"with lets say 10k rotating gears","date":"2013-01-28T21:39:42.913Z","type":"message"}
{"nick":"indutny","message":"but... that'll sweat CPU...","date":"2013-01-28T21:40:05.959Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2013-01-28T21:40:07.091Z","type":"message"}
{"nick":"indutny","message":"better mine bitcoins","date":"2013-01-28T21:40:11.830Z","type":"message"}
{"nick":"indutny","message":"on GPU","date":"2013-01-28T21:40:14.413Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-01-28T21:40:15.383Z","type":"message"}
{"nick":"indutny","message":"anyway","date":"2013-01-28T21:40:22.214Z","type":"message"}
{"nick":"indutny","message":"is it that cold in Netherlands right now?","date":"2013-01-28T21:40:29.862Z","type":"message"}
{"nick":"rendar","date":"2013-01-28T21:40:31.838Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: what's the difference between raw and raw-singlewrite?","date":"2013-01-28T21:40:58.330Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: well it's cold enough :-)","date":"2013-01-28T21:42:41.526Z","type":"message"}
{"nick":"piscisaureus_","message":"yes, far cry is pretty effective. :-p","date":"2013-01-28T21:44:24.351Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-28T21:45:52.168Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-01-28T21:46:20.563Z","type":"join"}
{"nick":"mikeal","date":"2013-01-28T21:46:58.603Z","type":"join"}
{"nick":"EhevuTov_","date":"2013-01-28T21:47:50.386Z","type":"join"}
{"nick":"EhevuTov_","reason":"Remote host closed the connection","date":"2013-01-28T21:48:09.532Z","type":"quit"}
{"nick":"sgallagh","reason":"Read error: Operation timed out","date":"2013-01-28T21:51:43.271Z","type":"quit"}
{"nick":"EhevuTov","reason":"Ping timeout: 264 seconds","date":"2013-01-28T21:51:48.416Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-01-28T21:54:42.994Z","type":"quit"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-01-28T21:57:51.209Z","type":"nick"}
{"nick":"hz","date":"2013-01-28T22:00:55.703Z","type":"quit"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-01-28T22:01:09.310Z","type":"quit"}
{"nick":"felixge","reason":"Quit: felixge","date":"2013-01-28T22:04:03.223Z","type":"quit"}
{"nick":"trevnorris","message":"indutny: how's the benchmarks going?","date":"2013-01-28T22:08:06.273Z","type":"message"}
{"nick":"felixge","date":"2013-01-28T22:09:29.652Z","type":"join"}
{"nick":"bnoordhuis","message":"trevnorris: left a comment on the gist","date":"2013-01-28T22:09:40.084Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: awesome dude. thanks.","date":"2013-01-28T22:10:15.980Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: hey, how busy are you? mind looking at your PM?","date":"2013-01-28T22:11:59.642Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: my guess would be that raw-singlewrite only writes once?","date":"2013-01-28T22:12:45.130Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: is this going to be on the test?","date":"2013-01-28T22:12:50.269Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: i've posted all the tests in the gist except that singewrite.","date":"2013-01-28T22:13:23.035Z","type":"message"}
{"nick":"trevnorris","message":"and they've produced interesting results.","date":"2013-01-28T22:13:43.478Z","type":"message"}
{"nick":"isaacs","message":"nice","date":"2013-01-28T22:13:59.598Z","type":"message"}
{"nick":"trevnorris","message":"segmenting each one that way has made it hecka easy to perf check","date":"2013-01-28T22:14:07.897Z","type":"message"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-01-28T22:14:23.220Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-01-28T22:16:52.698Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-28T22:17:21.062Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-28T22:17:57.818Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-28T22:19:32.458Z","type":"quit"}
{"nick":"wolfeidau","reason":"Ping timeout: 252 seconds","date":"2013-01-28T22:21:44.120Z","type":"quit"}
{"nick":"jmar777","reason":"Ping timeout: 256 seconds","date":"2013-01-28T22:22:39.112Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-01-28T22:24:28.485Z","type":"join"}
{"nick":"trevnorris","message":"suck. need to watch out for which trace options I use when running a benchmark. =/","date":"2013-01-28T22:25:16.294Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: know what's going on here:","date":"2013-01-28T22:28:59.669Z","type":"message"}
{"nick":"trevnorris","message":"`../node net/tcp_raw.js --size 0xf --iter 5 2> /dev/null` 0.008 Gb/sec (1200 kb / 1129259 �s)","date":"2013-01-28T22:29:00.300Z","type":"message"}
{"nick":"trevnorris","message":"when the buffer is super small, performance is ridonculously slow","date":"2013-01-28T22:29:19.207Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: so... you're writing a very small bufer?","date":"2013-01-28T22:30:05.087Z","type":"message"}
{"nick":"trevnorris","message":"and it's only a tiny faster in v0.8: \"0.020 Gb/sec (2816 kb / 1099408 �s)\"","date":"2013-01-28T22:30:10.117Z","type":"message"}
{"nick":"trevnorris","message":"yeah. the buffer is only 16 bytes.","date":"2013-01-28T22:30:18.009Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yeah.  well, you're using the write cb for this","date":"2013-01-28T22:30:26.387Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: it's going to be slowe.","date":"2013-01-28T22:30:30.617Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: write() in a tight loop until it returns false, then listen for drain, and do it again","date":"2013-01-28T22:31:02.897Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: that'll be much faster, and it's more like what we actually do","date":"2013-01-28T22:31:16.897Z","type":"message"}
{"nick":"trevnorris","message":"cool. i'll update the bench to reflect that.","date":"2013-01-28T22:31:29.476Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: um... sorry. how would I do that when writing directly to the tcp wrap?","date":"2013-01-28T22:36:45.498Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: look at handle.writeQueueSize.  if that's > 0, then attach a callback and wait for the afterwrite function","date":"2013-01-28T22:41:49.800Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: otherwise, just go again","date":"2013-01-28T22:41:55.599Z","type":"message"}
{"nick":"isaacs","message":"omg, the wifi in this cafe gets worse every time i come here.","date":"2013-01-28T22:43:26.779Z","type":"message"}
{"nick":"isaacs","message":"srsly","date":"2013-01-28T22:43:27.879Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: did you mean to go again if > 0?","date":"2013-01-28T22:43:54.178Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: no, the writeQueueSize > 0 means that something is queued up","date":"2013-01-28T22:52:04.153Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: that's like a return false from write()","date":"2013-01-28T22:52:14.203Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: ok, cool. i'm getting it. just  trying to understand what's going on in StreamWrap::WriteBuffer.","date":"2013-01-28T22:52:54.381Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2013-01-28T22:53:06.712Z","type":"message"}
{"nick":"isaacs","message":"anyone else having problems pushing to github right now?","date":"2013-01-28T22:53:49.512Z","type":"message"}
{"nick":"trevnorris","message":"works for me","date":"2013-01-28T22:55:14.238Z","type":"message"}
{"nick":"isaacs","message":"ugh.  ok, fed up.  going home.  if it wasn't for the couches and perfect location, I'd never come to this cafe.  bad coffee, bad internet.","date":"2013-01-28T22:57:37.799Z","type":"message"}
{"nick":"isaacs","message":"bbiab","date":"2013-01-28T22:57:40.819Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Bert Belder\u000f \u00037master\u000f * \u00026311f1c\u0002 : dgram: avoid EventEmitter leak warning  When a datagram socket hasn't bee (+1 more commits) - http://git.io/xo3wIQ","date":"2013-01-28T23:01:04.004Z","type":"message"}
{"nick":"pfox__","message":"anyone here who can talk about libuv gyp devil magic?","date":"2013-01-28T23:03:47.609Z","type":"message"}
{"nick":"pfox__","message":"curious if all of the unix/linux, unix/freebsd stuff went away and if its all in unix, now","date":"2013-01-28T23:03:52.109Z","type":"message"}
{"nick":"TooTallNate","message":"pfox__: gyp hasn't changed much","date":"2013-01-28T23:04:05.810Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: you think it should be Duplex(readOpts, writeOpts) or Duplex(writeOpts, readOpts)?","date":"2013-01-28T23:04:47.360Z","type":"message"}
{"nick":"pfox__","message":"how about since before the refcount refactor?","date":"2013-01-28T23:04:50.545Z","type":"message"}
{"nick":"TooTallNate","message":"\\/cc Raynos ","date":"2013-01-28T23:04:54.247Z","type":"message"}
{"nick":"pfox__","message":"like in the past year+","date":"2013-01-28T23:04:56.909Z","type":"message"}
{"nick":"TooTallNate","message":"pfox__: what are you trying to do?","date":"2013-01-28T23:05:33.069Z","type":"message"}
{"nick":"pfox__","message":"TooTallNate: update the libuv submodule in rust","date":"2013-01-28T23:05:50.849Z","type":"message"}
{"nick":"pfox__","message":"so build nightmare stuff","date":"2013-01-28T23:05:56.372Z","type":"message"}
{"nick":"TooTallNate","message":"pfox__: can't you just use the existing libuv.gyp file?","date":"2013-01-28T23:06:14.225Z","type":"message"}
{"nick":"pfox__","message":"TooTallNate: we do, sorta. this is the script i'm working from for updating the libuv makefiles that rust uses: https://github.com/mozilla/rust/blob/master/src/etc/gyp-uv","date":"2013-01-28T23:08:45.971Z","type":"message"}
{"nick":"pfox__","message":"it's terrible and everyone hates it","date":"2013-01-28T23:08:59.503Z","type":"message"}
{"nick":"pfox__","message":"so if you'd like to school on a Better Way, i'm totally receptive to that.","date":"2013-01-28T23:09:11.981Z","type":"message"}
{"nick":"EhevuTov","date":"2013-01-28T23:09:30.404Z","type":"join"}
{"nick":"TooTallNate","message":"pfox__: do you use gyp for the Rust build system?","date":"2013-01-28T23:09:49.896Z","type":"message"}
{"nick":"TooTallNate","message":"i mean ideally you do it like node does","date":"2013-01-28T23:09:58.360Z","type":"message"}
{"nick":"TooTallNate","message":"adding libuv as a gyp dependency","date":"2013-01-28T23:10:12.003Z","type":"message"}
{"nick":"pfox__","message":"no","date":"2013-01-28T23:10:13.865Z","type":"message"}
{"nick":"TooTallNate","message":"can't say i really have any better advice then","date":"2013-01-28T23:10:46.686Z","type":"message"}
{"nick":"felixge","reason":"Quit: felixge","date":"2013-01-28T23:15:04.409Z","type":"quit"}
{"nick":"trevnorris","message":"ok. just to solidify. net doesn't use buffers directly. it uses the slaballocator, right?","date":"2013-01-28T23:16:17.701Z","type":"message"}
{"nick":"isaacs","action":"back","date":"2013-01-28T23:20:41.664Z","type":"action"}
{"nick":"isaacs","message":"TooTallNate: Duplex(options, writeOptions)","date":"2013-01-28T23:20:56.284Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: writeOptions = writeOptions || options","date":"2013-01-28T23:21:04.628Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: also, make sure to update Transform, PassThrough, and all descendents (Socket, Zlib, etc.)","date":"2013-01-28T23:21:24.434Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: yup, i mean i kinda agree, except that it looks backwards when you write it out","date":"2013-01-28T23:21:43.986Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: since the writable side is the \"left-hand side\"","date":"2013-01-28T23:22:02.083Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: read, write?","date":"2013-01-28T23:22:03.062Z","type":"message"}
{"nick":"isaacs","message":"oh.. i guess.","date":"2013-01-28T23:22:08.753Z","type":"message"}
{"nick":"TooTallNate","message":"if you're thinking about it in terms of unix pipes","date":"2013-01-28T23:22:14.848Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: not always!  if you use <() it can be on the right","date":"2013-01-28T23:22:46.882Z","type":"message"}
{"nick":"isaacs","message":"totobut yoer' right, it's writable.pipe(readable)","date":"2013-01-28T23:22:56.735Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: ^","date":"2013-01-28T23:23:02.542Z","type":"message"}
{"nick":"isaacs","action":"uses \"toot<tab>\" to address TooTallNate ","date":"2013-01-28T23:23:16.582Z","type":"action"}
{"nick":"TooTallNate","message":"hahaha","date":"2013-01-28T23:23:23.405Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: so you changed you mind then?","date":"2013-01-28T23:23:30.775Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: sure.","date":"2013-01-28T23:23:37.392Z","type":"message"}
{"nick":"isaacs","message":"whatever.  as long as one-option object makes it default to both","date":"2013-01-28T23:23:47.392Z","type":"message"}
{"nick":"TooTallNate","message":"yup, of course","date":"2013-01-28T23:23:56.635Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis, trevnorris: New commit pushed to https://github.com/joyent/node/pull/4676","date":"2013-01-28T23:32:56.856Z","type":"message"}
{"nick":"isaacs","message":"as a plain-old-property, it doesn't degrade performance, afaict","date":"2013-01-28T23:33:06.535Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: what's the issue?","date":"2013-01-28T23:33:57.435Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: lgtm. and if there's a performance hit, it's in the microseconds.","date":"2013-01-28T23:34:42.445Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i'm showing <1% chagne to net-pipe, and the direction seems to switch back and forth","date":"2013-01-28T23:35:05.624Z","type":"message"}
{"nick":"isaacs","message":"just jitter","date":"2013-01-28T23:35:11.574Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: any concerns about exposing tickDepth?","date":"2013-01-28T23:35:22.284Z","type":"message"}
{"nick":"isaacs","message":"from a philosophical pov?","date":"2013-01-28T23:35:26.564Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: maybe not exposing it. but using it in lib/net.js...","date":"2013-01-28T23:35:52.103Z","type":"message"}
{"nick":"isaacs","message":"well, that means it has to be exposed.  may as well be documented with a scary \"don't touch! undefined behavior!\" warning","date":"2013-01-28T23:36:15.643Z","type":"message"}
{"nick":"pfox__","message":"bnoordhuis: i've taken on the enviable task of migrating rust's libuv submodule forward to joyent/master . we haven't updated since well before the refcount refactor","date":"2013-01-28T23:36:36.723Z","type":"message"}
{"nick":"isaacs","message":"or are you saying that using it in net.js is bad, but exposing it is fine?","date":"2013-01-28T23:36:42.203Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: yes, that","date":"2013-01-28T23:36:59.903Z","type":"message"}
{"nick":"pfox__","message":"bnoordhuis: part of this is that we have to regen the makefiles that rust uses, whenever we update","date":"2013-01-28T23:37:11.982Z","type":"message"}
{"nick":"pfox__","message":"the automation around this is probably badly out of date and this is my first go at this problem","date":"2013-01-28T23:37:25.042Z","type":"message"}
{"nick":"pfox__","message":"so i'm just trying to get my arms around the issue. thrashing.","date":"2013-01-28T23:37:39.620Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: i could land some patches that let you use the old, non-gyp makefile","date":"2013-01-28T23:38:12.441Z","type":"message"}
{"nick":"pfox__","message":"there's some scripting to spit out a bunch of mk/makefile stuff based on the libuv gyp file","date":"2013-01-28T23:38:12.929Z","type":"message"}
{"nick":"bnoordhuis","message":"e.g. make ARCH=ia32","date":"2013-01-28T23:38:19.031Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: how do you propose we handle stream.write(smallbuffer, function w() { stream.write(smallBuffer, w) })?","date":"2013-01-28T23:38:42.292Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: we could just always defer the cb, like 0.8 does","date":"2013-01-28T23:39:04.249Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: i would suggest you do that, yes","date":"2013-01-28T23:39:16.590Z","type":"message"}
{"nick":"pfox__","message":"bnoordhuis: i appreciate it, but i don't know if that's the right answer.","date":"2013-01-28T23:39:28.800Z","type":"message"}
{"nick":"isaacs","message":"that's kind of an unnecessary delay, though","date":"2013-01-28T23:39:32.841Z","type":"message"}
{"nick":"pfox__","message":"well i don't know much at all. kind of fumbling about blindly, atm.","date":"2013-01-28T23:39:37.554Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: i have a feeling of deja vu. have we discussed this before?","date":"2013-01-28T23:39:43.750Z","type":"message"}
{"nick":"isaacs","message":"but i suppose it doesnt' affect the most common case.","date":"2013-01-28T23:39:44.102Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: no, i don't think this one specifically","date":"2013-01-28T23:40:15.121Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: if there's anything in particular you run into, let me know","date":"2013-01-28T23:41:26.910Z","type":"message"}
{"nick":"pfox__","message":"bnoordhuis: did you see the gyp-uv script i pasted, above?","date":"2013-01-28T23:41:55.174Z","type":"message"}
{"nick":"pfox__","message":"that's what we use to generate the makefiles","date":"2013-01-28T23:42:01.742Z","type":"message"}
{"nick":"pfox__","message":"does the general flow strike you as Super Wrong?","date":"2013-01-28T23:42:12.418Z","type":"message"}
{"nick":"bnoordhuis","message":"well... maybe Slightly Wrong","date":"2013-01-28T23:42:23.979Z","type":"message"}
{"nick":"bnoordhuis","message":"but it's not the worst build system atrocity ever","date":"2013-01-28T23:42:42.747Z","type":"message"}
{"nick":"bnoordhuis","message":"what do you need to regenerate the makefiles for?","date":"2013-01-28T23:43:11.227Z","type":"message"}
{"nick":"pfox__","message":"well if the source tree layout changes, we need new makefiles (like, say, if ares, ev and eio all exit the src tree)","date":"2013-01-28T23:43:40.547Z","type":"message"}
{"nick":"pfox__","message":"i don't know why the build doesn't do `make` from the /Makefile in the the root of the libuv repo","date":"2013-01-28T23:44:03.176Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe you can inquire if that's a limitation that can be lifted","date":"2013-01-28T23:45:22.104Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: is there an example of using net.connect with the new streams2 api (not using the 'data' event)?","date":"2013-01-28T23:45:45.124Z","type":"message"}
{"nick":"pfox__","message":"is the Makefile arch agnostic?","date":"2013-01-28T23:45:45.446Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, insofar that it sniffs the arch/platform it's running on and proceeds to do the Right Thing","date":"2013-01-28T23:46:15.728Z","type":"message"}
{"nick":"bnoordhuis","message":"(hopefully)","date":"2013-01-28T23:46:18.735Z","type":"message"}
{"nick":"bnoordhuis","message":"i could add ARCH and PLATFORM or OS overrides","date":"2013-01-28T23:46:56.198Z","type":"message"}
{"nick":"pfox__","message":"graydon is coming","date":"2013-01-28T23:47:11.159Z","type":"message"}
{"nick":"bnoordhuis","message":"that sounds so ominous","date":"2013-01-28T23:47:20.730Z","type":"message"}
{"nick":"pfox__","message":"heh. he's the nicest BDFL ive ever met.","date":"2013-01-28T23:47:34.499Z","type":"message"}
{"nick":"pfox__","message":"anywho, he has way more insight into the build system than i do and can ask better questions.","date":"2013-01-28T23:47:59.123Z","type":"message"}
{"nick":"graydon","date":"2013-01-28T23:48:16.720Z","type":"join"}
{"nick":"graydon","message":"bnoordhuis: 'lo","date":"2013-01-28T23:48:40.710Z","type":"message"}
{"nick":"bnoordhuis","message":"graydon: hi","date":"2013-01-28T23:48:45.844Z","type":"message"}
{"nick":"graydon","message":"so erm, you've been chatting with pfox?","date":"2013-01-28T23:49:10.320Z","type":"message"}
{"nick":"graydon","message":"concerning the libuv rust has in its build","date":"2013-01-28T23:49:18.166Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2013-01-28T23:49:21.767Z","type":"message"}
{"nick":"pfox__","message":"graydon: yeah.. ive shown the gyp-uv script","date":"2013-01-28T23:49:28.141Z","type":"message"}
{"nick":"graydon","message":"which is old and also has a hilariously wonky inter-relationship between the builds","date":"2013-01-28T23:49:30.535Z","type":"message"}
{"nick":"CoverSlide","message":"brace yourself ... graydon is coming","date":"2013-01-28T23:49:31.241Z","type":"message"}
{"nick":"bnoordhuis","message":"i suggested he use the plain makefile and stop horsing around with gyp","date":"2013-01-28T23:49:41.690Z","type":"message"}
{"nick":"graydon","message":"I would like to do that!","date":"2013-01-28T23:49:49.605Z","type":"message"}
{"nick":"graydon","message":"um","date":"2013-01-28T23:49:56.494Z","type":"message"}
{"nick":"graydon","message":"I am just trying to reconstruct why we aren't doing so regularly, and try to figure out what we might gain or lose by that adventure","date":"2013-01-28T23:50:14.518Z","type":"message"}
{"nick":"graydon","message":"we do out-of-tree builds. this is ok?","date":"2013-01-28T23:50:32.924Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess so","date":"2013-01-28T23:50:59.987Z","type":"message"}
{"nick":"bnoordhuis","message":"you mean you copy the tree verbatim or?","date":"2013-01-28T23:51:09.387Z","type":"message"}
{"nick":"graydon","message":"like presently we do make -C place/with/libuv/sources builddir_name=place/we/are/building/it","date":"2013-01-28T23:51:21.558Z","type":"message"}
{"nick":"pfox__","message":"we don't keep the build artifacts in the repo","date":"2013-01-28T23:51:25.013Z","type":"message"}
{"nick":"bnoordhuis","message":"ah right","date":"2013-01-28T23:51:36.531Z","type":"message"}
{"nick":"bnoordhuis","message":"the current makefile doesn't support that","date":"2013-01-28T23:51:43.716Z","type":"message"}
{"nick":"graydon","message":"and that builds out-of-tree. that should work with the .. eh","date":"2013-01-28T23:51:47.352Z","type":"message"}
{"nick":"graydon","message":"oh","date":"2013-01-28T23:51:48.055Z","type":"message"}
{"nick":"graydon","message":"but the makefiles generated by gyp do?","date":"2013-01-28T23:51:56.072Z","type":"message"}
{"nick":"graydon","message":"(are these makefiles different, i.e. not-generated-by-gyp?)","date":"2013-01-28T23:52:11.623Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, they build in out/ or however you configure gyp","date":"2013-01-28T23:52:20.885Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, the makefiles are hand-written","date":"2013-01-28T23:52:25.817Z","type":"message"}
{"nick":"bnoordhuis","message":"i could add an out-of-tree option, that's not the issue","date":"2013-01-28T23:52:46.916Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-28T23:52:57.864Z","type":"quit"}
{"nick":"bnoordhuis","message":"*an issue","date":"2013-01-28T23:53:05.368Z","type":"message"}
{"nick":"graydon","message":"ok","date":"2013-01-28T23:53:32.547Z","type":"message"}
{"nick":"graydon","message":"I'm curious why there are two sets","date":"2013-01-28T23:53:41.044Z","type":"message"}
{"nick":"graydon","message":"I mean, gyp is a bit of a struggle but it makes some amount of sense too..","date":"2013-01-28T23:54:01.062Z","type":"message"}
{"nick":"bnoordhuis","message":"it's mostly because node and v8 use gyp","date":"2013-01-28T23:54:07.852Z","type":"message"}
{"nick":"graydon","message":"at some point we'll probably shift to packaged binary builds of libuv and this will all get easier","date":"2013-01-28T23:54:26.299Z","type":"message"}
{"nick":"bnoordhuis","message":"the plain makefiles are for people who want to compile a .a or .so quickly without monkeying around with meta build systems","date":"2013-01-28T23:54:44.903Z","type":"message"}
{"nick":"bnoordhuis","message":"alternatively, rust could switch to gyp and all these problems will go away :)","date":"2013-01-28T23:55:03.102Z","type":"message"}
{"nick":"graydon","message":"right. well I've no love in my heart for monkeying with meta build systems.","date":"2013-01-28T23:55:07.714Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: ok, removing that automatic cb() call doesn't affect net-pipe or http_simple in any bad way.","date":"2013-01-28T23:55:18.182Z","type":"message"}
{"nick":"graydon","message":"yeah, we're .. not likely to do that. more likely to back away from 3rd party build tools altogether.","date":"2013-01-28T23:55:21.808Z","type":"message"}
{"nick":"bnoordhuis","message":"sensible","date":"2013-01-28T23:55:34.086Z","type":"message"}
{"nick":"graydon","message":"but each thing in order. are the hand-written makefiles relatively easy to understand?","date":"2013-01-28T23:55:41.970Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, they're maybe 100 lines tops","date":"2013-01-28T23:55:50.468Z","type":"message"}
{"nick":"bnoordhuis","message":"but if you tell me what you need, i'll add it","date":"2013-01-28T23:56:01.437Z","type":"message"}
{"nick":"bnoordhuis","message":"out of tree builds, arch and platform overrides, anything else?","date":"2013-01-28T23:56:12.348Z","type":"message"}
{"nick":"graydon","message":"so if we copy that into our sources for the time being and hack on it for any local adaptations, that's probably just as easy as anything?","date":"2013-01-28T23:56:14.812Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2013-01-28T23:56:20.740Z","type":"message"}
{"nick":"graydon","message":"ok","date":"2013-01-28T23:56:23.872Z","type":"message"}
{"nick":"graydon","message":"that should be it. um, oh, a long-ish term thing would be to build in \"minimal\" mode, like not sniff the host's capabilities. I guess that comes along with arch/platform override.","date":"2013-01-28T23:56:59.586Z","type":"message"}
{"nick":"bnoordhuis","message":"yes. i've been meaning to add that but i never got around to it","date":"2013-01-28T23:57:27.851Z","type":"message"}
{"nick":"graydon","message":"we do cross compiling / self hosting, and bundle the libuv with a snapshot build, so if we build on a fancy new linux it makes it less portable to old ones.","date":"2013-01-28T23:57:30.304Z","type":"message"}
{"nick":"bnoordhuis","message":"now at least i have a reason to stop putting it off","date":"2013-01-28T23:57:38.145Z","type":"message"}
{"nick":"graydon","message":"ok. for the time being though I think even just out-of-tree is sufficient to get us going.","date":"2013-01-28T23:57:51.440Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, libuv sniffs features at runtime","date":"2013-01-28T23:57:57.348Z","type":"message"}
{"nick":"graydon","message":"the other stuff there are other things blocking besides libuv so it's not high priority.","date":"2013-01-28T23:58:00.512Z","type":"message"}
{"nick":"graydon","message":"but it expects certain glibc symbols if it was built where they exist","date":"2013-01-28T23:58:19.976Z","type":"message"}
{"nick":"graydon","message":"no?","date":"2013-01-28T23:58:20.709Z","type":"message"}
{"nick":"graydon","message":"did you figure out a way to make it stop doing so?","date":"2013-01-28T23:58:25.532Z","type":"message"}
{"nick":"graydon","message":"i think we have a _very_ old libuv in our tree","date":"2013-01-28T23:58:31.647Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, i've worked on that quite a bit","date":"2013-01-28T23:58:40.260Z","type":"message"}
{"nick":"bnoordhuis","message":"what glibc symbols were you having issues with?","date":"2013-01-28T23:58:48.434Z","type":"message"}
{"nick":"bnoordhuis","message":"i think it should compile with anything from 2.3 up","date":"2013-01-28T23:59:03.178Z","type":"message"}
{"nick":"graydon","message":"don't remember; I whittled a number of them down and then gave up when I found libstdc++ was doing the same thing.","date":"2013-01-28T23:59:06.477Z","type":"message"}
{"nick":"graydon","message":"needing to excise libstdc++ from librustrt is a bigger task","date":"2013-01-28T23:59:22.190Z","type":"message"}
{"nick":"graydon","message":"(one I don't mind doing, but .. all in good time)","date":"2013-01-28T23:59:31.404Z","type":"message"}
