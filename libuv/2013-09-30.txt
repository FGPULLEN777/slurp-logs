{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-09-30T00:00:00.685Z","type":"quit"}
{"nick":"ircretary","date":"2013-09-30T00:00:08.969Z","type":"join"}
{"nick":"st_luke","reason":"Read error: Connection reset by peer","date":"2013-09-30T00:07:56.572Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-09-30T00:32:13.071Z","type":"quit"}
{"nick":"amartens","date":"2013-09-30T00:48:24.793Z","type":"join"}
{"nick":"c4milo","date":"2013-09-30T01:02:53.387Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-09-30T01:15:13.810Z","type":"quit"}
{"nick":"loladiro","date":"2013-09-30T01:16:29.547Z","type":"join"}
{"nick":"dsantiago","reason":"Quit: Computer has gone to sleep.","date":"2013-09-30T01:16:59.747Z","type":"quit"}
{"nick":"dsantiago","date":"2013-09-30T01:18:10.974Z","type":"join"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-09-30T01:24:24.833Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-09-30T01:37:15.910Z","type":"quit"}
{"nick":"amartens","date":"2013-09-30T01:40:39.865Z","type":"join"}
{"nick":"abraxas","date":"2013-09-30T01:43:20.803Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-09-30T01:51:49.314Z","type":"nick"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-09-30T01:59:22.737Z","type":"quit"}
{"nick":"loladiro","date":"2013-09-30T02:11:26.318Z","type":"join"}
{"nick":"EhevuTov","date":"2013-09-30T02:24:46.400Z","type":"join"}
{"nick":"trevnorris","message":"othiym23: only place where async listeners will not capture is crypto.pbkdf2() and process.exit()","date":"2013-09-30T02:38:21.883Z","type":"message"}
{"nick":"trevnorris","message":"and coolio. i'll take a look.","date":"2013-09-30T02:38:30.638Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-09-30T03:12:55.181Z","type":"nick"}
{"nick":"st_luke","date":"2013-09-30T03:17:05.042Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-09-30T03:17:19.124Z","type":"quit"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2013-09-30T03:19:37.124Z","type":"quit"}
{"nick":"inolen","date":"2013-09-30T03:20:09.548Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-09-30T03:24:17.413Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-09-30T03:37:45.236Z","type":"nick"}
{"nick":"trevnorris","message":"othiym23: well, i'm fairly confident that I won't be able to work domains out of core until v0.13. but as it is, async listener doesn't add any performance hit, so hopefully everyone's cool w/ it going in.","date":"2013-09-30T03:37:47.166Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: I thought it'd be fairly trivial to go ahead and instantiate the net server beforehand. but since it's \"net\" and not \"tcp\", Node has to wait for the connection information.","date":"2013-09-30T03:40:36.099Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: but since Node allows the user to listen as a pipe or tcp it has to wait for the listening information to know what type of handle to setup.","date":"2013-09-30T03:42:26.069Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: sup dude?","date":"2013-09-30T03:45:06.436Z","type":"message"}
{"nick":"vptr","date":"2013-09-30T03:50:14.363Z","type":"join"}
{"nick":"tjfontaine","message":"nothing, sup with you","date":"2013-09-30T03:51:49.997Z","type":"message"}
{"nick":"tjfontaine","message":"I mean still fucking with npm but whatever, took some time off it this weekend","date":"2013-09-30T03:52:02.871Z","type":"message"}
{"nick":"TooTallNate","date":"2013-09-30T03:52:04.769Z","type":"join"}
{"nick":"groundwater","message":"what's wrong with npm?","date":"2013-09-30T03:52:44.266Z","type":"message"}
{"nick":"tjfontaine","message":"it's broken in 0.10.19","date":"2013-09-30T03:53:32.496Z","type":"message"}
{"nick":"groundwater","message":"completely? or just some edge case","date":"2013-09-30T03:54:46.326Z","type":"message"}
{"nick":"tjfontaine","message":"seems induced by some internet latency","date":"2013-09-30T03:55:01.591Z","type":"message"}
{"nick":"TooTallNate","reason":"Client Quit","date":"2013-09-30T03:55:32.074Z","type":"quit"}
{"nick":"groundwater","message":"is it the 'cb() not called' error?","date":"2013-09-30T03:56:02.490Z","type":"message"}
{"nick":"groundwater","message":"because i bumped into that several times today","date":"2013-09-30T03:56:15.514Z","type":"message"}
{"nick":"groundwater","message":"i was in a cafe with shitty wifi","date":"2013-09-30T03:56:31.425Z","type":"message"}
{"nick":"tjfontaine","message":"yes that it's it","date":"2013-09-30T03:56:36.149Z","type":"message"}
{"nick":"trevnorris","message":"haven't been able to bisect it down to a few commits?","date":"2013-09-30T03:56:51.666Z","type":"message"}
{"nick":"groundwater","message":"definitely cleared up when i came home","date":"2013-09-30T03:57:08.985Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: you mean in node?","date":"2013-09-30T03:58:17.051Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: um... is it a node issue or npm issue?","date":"2013-09-30T03:58:48.639Z","type":"message"}
{"nick":"tjfontaine","message":"I'm about 90% sure it's an npm issue","date":"2013-09-30T03:59:03.941Z","type":"message"}
{"nick":"trevnorris","message":"fun fun. :P","date":"2013-09-30T03:59:11.966Z","type":"message"}
{"nick":"tjfontaine","message":"but if you're on node 0.10.18 or earlier `npm install -g npm` and find out :)","date":"2013-09-30T03:59:24.777Z","type":"message"}
{"nick":"groundwater","message":"if you're trying to reproduce it, i can point you to the cafe where you'll hit it EVERY TIME","date":"2013-09-30T03:59:43.553Z","type":"message"}
{"nick":"trevnorris","message":"haha.","date":"2013-09-30T03:59:53.288Z","type":"message"}
{"nick":"tjfontaine","message":"heh I have it here as well, on multiple machines :)","date":"2013-09-30T04:00:00.090Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: well, in light of learning domains will not be easily removed, i've pretty much rewritten my v0.13 performance goals.","date":"2013-09-30T04:01:07.062Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: but i'm pretty sick of it for now. how do I reproduce this issue?","date":"2013-09-30T04:01:29.345Z","type":"message"}
{"nick":"tjfontaine","message":"npm install some shit :)","date":"2013-09-30T04:01:43.423Z","type":"message"}
{"nick":"trevnorris","message":"specific version of node?","date":"2013-09-30T04:01:59.086Z","type":"message"}
{"nick":"tjfontaine","message":"0.10.19","date":"2013-09-30T04:02:44.527Z","type":"message"}
{"nick":"tjfontaine","message":"or","date":"2013-09-30T04:02:46.946Z","type":"message"}
{"nick":"tjfontaine","message":"npm install -g npm","date":"2013-09-30T04:02:49.406Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-09-30T04:03:32.606Z","type":"nick"}
{"nick":"trevnorris","message":"tjfontaine: cool. i'll take a look at this, and how about you figure how how to rewrite {TCP,Pipe}Wrap so a base class can be instantiated immediately then the uv_{tcp,pipe}_ can be set later. :P","date":"2013-09-30T04:05:08.195Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-09-30T04:05:30.451Z","type":"message"}
{"nick":"tjfontaine","message":"I really don't want to context switch :)","date":"2013-09-30T04:05:40.555Z","type":"message"}
{"nick":"trevnorris","message":"does the issue require a latency problem?","date":"2013-09-30T04:06:12.753Z","type":"message"}
{"nick":"tjfontaine","message":"it happens in many circumstances, some times it feels like latency makes it worse","date":"2013-09-30T04:06:40.074Z","type":"message"}
{"nick":"trevnorris","message":"ok","date":"2013-09-30T04:06:44.517Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-09-30T04:10:44.613Z","type":"nick"}
{"nick":"trevnorris","message":"wow, so npm install newrelic gives me a new world of errors, but doubt any of them are what you're talking about.","date":"2013-09-30T04:10:58.741Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so what error message should I be looking for?","date":"2013-09-30T04:11:07.631Z","type":"message"}
{"nick":"tjfontaine","message":"hmm maybe I'm wrong","date":"2013-09-30T04:11:10.493Z","type":"message"}
{"nick":"tjfontaine","message":"npm ERR! cb() never called!","date":"2013-09-30T04:11:15.252Z","type":"message"}
{"nick":"tjfontaine","message":"npm ERR! not ok code 0","date":"2013-09-30T04:11:15.618Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: no, npm install newrelic installs like half a gig of dependencies.","date":"2013-09-30T04:12:08.009Z","type":"message"}
{"nick":"tjfontaine","message":"I know what you're saying","date":"2013-09-30T04:12:16.733Z","type":"message"}
{"nick":"trevnorris","message":"and clang was barfing on a bunch of stuff during build","date":"2013-09-30T04:12:24.111Z","type":"message"}
{"nick":"tjfontaine","message":"I just put 1.3.8 npm into node-v0.10.19 and it still failed, so I'm going to try reverting some tls patches","date":"2013-09-30T04:12:45.992Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-09-30T04:13:01.869Z","type":"quit"}
{"nick":"mikeal","date":"2013-09-30T04:13:54.533Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: so, from the error-handler.js seems that another error is occurring, but not being logged.","date":"2013-09-30T04:16:48.355Z","type":"message"}
{"nick":"trevnorris","message":"so might be a double breakage","date":"2013-09-30T04:17:04.145Z","type":"message"}
{"nick":"tjfontaine","message":"no, the event loop is exiting cleanly","date":"2013-09-30T04:18:04.478Z","type":"message"}
{"nick":"tjfontaine","message":"but the last cb doesn't go through the error handler","date":"2013-09-30T04:18:11.984Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: the message appears because itWorked != true, but code === 0. and you don't seem to be getting an E* error message. so the error code being passed isn't recognized by npm","date":"2013-09-30T04:22:40.394Z","type":"message"}
{"nick":"trevnorris","message":"at least, that's my take.","date":"2013-09-30T04:22:45.046Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-09-30T04:22:57.813Z","type":"nick"}
{"nick":"tjfontaine","message":"yes, thus the event loop is exiting cleanly","date":"2013-09-30T04:23:47.299Z","type":"message"}
{"nick":"tjfontaine","message":"but *not* going through errorHandler","date":"2013-09-30T04:23:54.536Z","type":"message"}
{"nick":"tjfontaine","message":"which is where itWorked is set to true if there was no error","date":"2013-09-30T04:24:03.990Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: i'm confused by the logic, because errorHandler is only run when there is an error from the npm.load callback.","date":"2013-09-30T04:26:25.090Z","type":"message"}
{"nick":"trevnorris","message":"so then itWorked could never be set to true","date":"2013-09-30T04:26:46.367Z","type":"message"}
{"nick":"tjfontaine","message":"no I think it's point is really more like exitHandler","date":"2013-09-30T04:26:52.098Z","type":"message"}
{"nick":"tjfontaine","message":"it's just a generic callback passed to all commands","date":"2013-09-30T04:27:00.278Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: did it dump a useful stack trace?","date":"2013-09-30T04:28:58.305Z","type":"message"}
{"nick":"tjfontaine","message":"not really no, from there all we know is that we're in a clean exit path","date":"2013-09-30T04:29:32.143Z","type":"message"}
{"nick":"trevnorris","message":"can you just inject a console.trace() into npm on exit so you always see how it's leaving?","date":"2013-09-30T04:30:15.621Z","type":"message"}
{"nick":"tjfontaine","message":"what do you mean?","date":"2013-09-30T04:30:45.720Z","type":"message"}
{"nick":"tjfontaine","message":"the stack trace is coming from the cc side of exit","date":"2013-09-30T04:30:54.409Z","type":"message"}
{"nick":"tjfontaine","message":"from EmitExit","date":"2013-09-30T04:31:22.258Z","type":"message"}
{"nick":"trevnorris","message":"yeah, but that message is coming from the process.on('exit' in lib/utils/error-handler","date":"2013-09-30T04:31:50.776Z","type":"message"}
{"nick":"tjfontaine","message":"it's about as clean of an exit as we can get, there's no more work to be done","date":"2013-09-30T04:31:52.424Z","type":"message"}
{"nick":"tjfontaine","message":"yes, because the event loop is empty","date":"2013-09-30T04:32:01.563Z","type":"message"}
{"nick":"trevnorris","message":"ah yeah. so the stack trace will be empty. duh.","date":"2013-09-30T04:33:12.309Z","type":"message"}
{"nick":"trevnorris","message":"if my logic paths are correct, the only way the callback could have been called w/o an error being passed is from the fs.writeFile in lib/install.js","date":"2013-09-30T04:33:36.571Z","type":"message"}
{"nick":"vptr","reason":"Ping timeout: 248 seconds","date":"2013-09-30T04:34:03.754Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: and he has a dead code path in install() where if arguments.length === 3, then he reassigns cb_, but then it's never used.","date":"2013-09-30T04:34:50.409Z","type":"message"}
{"nick":"trevnorris","message":"ah wait, nm. man that's confusing.","date":"2013-09-30T04:35:40.721Z","type":"message"}
{"nick":"trevnorris","message":"ok. so he reassigns it, but it's used in a function declared in the same scope passed as cb","date":"2013-09-30T04:35:58.899Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: what's an example package you've installed and had that failure?","date":"2013-09-30T04:40:16.043Z","type":"message"}
{"nick":"trevnorris","message":"i'm getting plenty of failures, but none like that one.","date":"2013-09-30T04:40:23.245Z","type":"message"}
{"nick":"tjfontaine","message":"`npm install jsontool workflow vasync restify`","date":"2013-09-30T04:40:38.784Z","type":"message"}
{"nick":"tjfontaine","message":"is what's in my test script","date":"2013-09-30T04:40:42.958Z","type":"message"}
{"nick":"tjfontaine","message":"but also `npm install` from a git clone of sntp","date":"2013-09-30T04:40:55.659Z","type":"message"}
{"nick":"hueniverse1","date":"2013-09-30T04:41:31.812Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-09-30T04:42:18.472Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: well. that first one has given me 21k lines of npm-debug.log output so far, and it's not done","date":"2013-09-30T04:42:52.210Z","type":"message"}
{"nick":"trevnorris","message":"no idea what's going on with my system.","date":"2013-09-30T04:42:57.434Z","type":"message"}
{"nick":"saghul_","date":"2013-09-30T04:44:06.595Z","type":"join"}
{"nick":"tjfontaine","message":"man if increasing the size of this vm to speed the compiles makes it harder to hit this bug I'll be pissed","date":"2013-09-30T04:45:29.488Z","type":"message"}
{"nick":"tjfontaine","message":"well good news","date":"2013-09-30T04:46:53.239Z","type":"message"}
{"nick":"CAPSLOCKBOT","reason":"Remote host closed the connection","date":"2013-09-30T04:47:31.275Z","type":"quit"}
{"nick":"CAPSLOCKBOT","date":"2013-09-30T04:47:59.235Z","type":"join"}
{"nick":"LOUDBOT_","date":"2013-09-30T04:48:04.440Z","type":"join"}
{"nick":"tjfontaine","message":"ya, I'm nearly convinced","date":"2013-09-30T04:48:20.318Z","type":"message"}
{"nick":"trevnorris","message":"wtf. how are all these modules coming to half a gig. i've always enjoyed node for being so light weight.","date":"2013-09-30T04:49:10.708Z","type":"message"}
{"nick":"LOUDBOT","reason":"*.net *.split","date":"2013-09-30T04:49:36.611Z","type":"quit"}
{"nick":"saghul","reason":"*.net *.split","date":"2013-09-30T04:49:37.990Z","type":"quit"}
{"nick":"hueniverse","reason":"*.net *.split","date":"2013-09-30T04:49:38.430Z","type":"quit"}
{"nick":"saghul_","new_nick":"saghul","date":"2013-09-30T04:49:40.440Z","type":"nick"}
{"nick":"trevnorris","message":"ah. mother. I have dev=true in my config","date":"2013-09-30T04:49:46.439Z","type":"message"}
{"nick":"tjfontaine","message":"ok, so it does seem to be the tls stuff, and the fix from fedor already fixes this","date":"2013-09-30T04:50:00.242Z","type":"message"}
{"nick":"tjfontaine","message":"there must be a setTimeout that's happening here and not being handled in npm","date":"2013-09-30T04:50:19.720Z","type":"message"}
{"nick":"trevnorris","message":"cool. well, think building all that just fried all my sperm. glad you got it figured out.","date":"2013-09-30T04:51:33.171Z","type":"message"}
{"nick":"tjfontaine","message":"haha","date":"2013-09-30T04:51:53.100Z","type":"message"}
{"nick":"tjfontaine","message":"well I'm going to let this test script run over night","date":"2013-09-30T04:52:00.645Z","type":"message"}
{"nick":"tjfontaine","message":"if it doesn't fail we can all thank fedor","date":"2013-09-30T04:52:16.415Z","type":"message"}
{"nick":"trevnorris","message":"sounds good to me.","date":"2013-09-30T04:52:24.376Z","type":"message"}
{"nick":"tjfontaine","message":"now on to the other things I was supposed to do this weekend","date":"2013-09-30T04:52:37.280Z","type":"message"}
{"nick":"trevnorris","message":"hah, like what?","date":"2013-09-30T04:52:43.457Z","type":"message"}
{"nick":"tjfontaine","message":"blog posts I've been promising people, or the mdb + manta job","date":"2013-09-30T04:52:59.482Z","type":"message"}
{"nick":"trevnorris","message":"oh yeah.","date":"2013-09-30T04:53:10.733Z","type":"message"}
{"nick":"trevnorris","message":"even i'm looking forward to those blog posts.","date":"2013-09-30T04:53:40.315Z","type":"message"}
{"nick":"trevnorris","message":"dtrace is the shiz","date":"2013-09-30T04:53:43.681Z","type":"message"}
{"nick":"tjfontaine","message":"hehe, well I'm starting with some mdb stuff first since I have those mostly written","date":"2013-09-30T04:53:58.196Z","type":"message"}
{"nick":"tjfontaine","message":"actually it's","date":"2013-09-30T04:54:05.037Z","type":"message"}
{"nick":"tjfontaine","message":"node debugging in parallel, mdb ::findleaks, mdb ::findjsobjects","date":"2013-09-30T04:54:23.623Z","type":"message"}
{"nick":"trevnorris","message":"ah, cool. yeah, last time I tried to do that I got severely lost","date":"2013-09-30T04:54:57.193Z","type":"message"}
{"nick":"trevnorris","message":"too many objects","date":"2013-09-30T04:55:00.821Z","type":"message"}
{"nick":"tjfontaine","message":"nod","date":"2013-09-30T04:55:05.004Z","type":"message"}
{"nick":"trevnorris","message":"that reminds me, I have some dtrace output to analize on the smartos server","date":"2013-09-30T04:55:27.602Z","type":"message"}
{"nick":"trevnorris","message":"think I might actually be close to finding where that stupid pre 3.20 leak is coming from","date":"2013-09-30T04:55:47.932Z","type":"message"}
{"nick":"tjfontaine","message":"what leak?","date":"2013-09-30T04:55:57.114Z","type":"message"}
{"nick":"AvianFlu","reason":"Read error: Connection reset by peer","date":"2013-09-30T04:57:18.625Z","type":"quit"}
{"nick":"LOUDBOT_","reason":"Remote host closed the connection","date":"2013-09-30T04:57:29.893Z","type":"quit"}
{"nick":"LOUDBOT","date":"2013-09-30T04:57:42.067Z","type":"join"}
{"nick":"AvianFlu","date":"2013-09-30T04:58:01.647Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: https://github.com/joyent/node/issues/5828#issuecomment-20846439","date":"2013-09-30T04:58:08.855Z","type":"message"}
{"nick":"tjfontaine","message":"oh that one","date":"2013-09-30T04:58:35.052Z","type":"message"}
{"nick":"tjfontaine","message":"I'm hoping to get some cores from walmart, or at least work with them on tracking that down, but it seems to be in the http client","date":"2013-09-30T05:00:05.245Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: yeah, the newrelic module has a billion development dependencies, sorry about that","date":"2013-09-30T05:00:17.199Z","type":"message"}
{"nick":"tjfontaine","message":"I mean I know their example is in the server, but I think what wpreul is seeing is in the client","date":"2013-09-30T05:00:39.103Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: its runtime dependencies are just bunyan (version-locked to the version before it depended on dtrace-node) and CLS","date":"2013-09-30T05:00:41.803Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: eh, no worries. don't know how my global config got dev=true anyways.","date":"2013-09-30T05:00:48.841Z","type":"message"}
{"nick":"tjfontaine","message":"anyway while I have motivation, time to write","date":"2013-09-30T05:01:51.103Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: I'm totally fine with just the asyncListener stuff landing in 0.12, everyone else can fend for themselves O:)","date":"2013-09-30T05:02:10.514Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: well, if you haven't looked recently i've completely updated https://github.com/joyent/node/issues/6252","date":"2013-09-30T05:02:59.338Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: there's a ton of stuff I want to get done before v1.0","date":"2013-09-30T05:03:13.469Z","type":"message"}
{"nick":"trevnorris","message":"but I think the asyncListener stuff will probably have to ship in v0.12 w/ the domain code.","date":"2013-09-30T05:03:37.547Z","type":"message"}
{"nick":"trevnorris","message":"removing them is going to be a pain like no other.","date":"2013-09-30T05:03:44.232Z","type":"message"}
{"nick":"trevnorris","message":"there are some more optimizations I can do, but want an initial review first.","date":"2013-09-30T05:04:14.624Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: once I have New Relic for Node.js 1.0 out the door, I am going to set aside some time to contribute more to Node core","date":"2013-09-30T05:04:48.288Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: and at that point I should be able to help you out with the domains stuff","date":"2013-09-30T05:04:59.429Z","type":"message"}
{"nick":"othiym23","message":"that'll be towards the end of October, tho, so probably in a 0.13 timeframe","date":"2013-09-30T05:05:25.300Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: well, funny part is the domain work actually has nothing to do directly with domains. I need to redo a bunch of the guts to make it so I can instantiate the c++ class at the same time as the js instance.","date":"2013-09-30T05:05:52.298Z","type":"message"}
{"nick":"trevnorris","message":"when that's done then it'll be a snap to remove domain code.","date":"2013-09-30T05:06:30.520Z","type":"message"}
{"nick":"othiym23","message":"well, I'm not *completely* dumb when it comes to C++, it's just been a while since I've done a lot of it seriously","date":"2013-09-30T05:07:52.259Z","type":"message"}
{"nick":"othiym23","message":"and at the very least I can contribute tests and testing","date":"2013-09-30T05:08:04.829Z","type":"message"}
{"nick":"trevnorris","message":"hah, don't know if you could say I've ever done it seriously. ;P","date":"2013-09-30T05:08:11.323Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: but thanks much for your help. those two nights you helped me figure out some really stupid bugs on my part.","date":"2013-09-30T05:09:05.605Z","type":"message"}
{"nick":"trevnorris","message":"but it seems to be working now as intended.","date":"2013-09-30T05:09:14.296Z","type":"message"}
{"nick":"trevnorris","message":"and meets my minimum at performance, so i'd say it's a win-win so far.","date":"2013-09-30T05:09:32.653Z","type":"message"}
{"nick":"othiym23","message":"I am very pleased with how this works out","date":"2013-09-30T05:09:46.490Z","type":"message"}
{"nick":"othiym23","message":"so far, unless people are doing really weird stuff, they should be able to use CLS seamlessly across 0.10 and 0.12","date":"2013-09-30T05:10:06.753Z","type":"message"}
{"nick":"trevnorris","message":"that's great.","date":"2013-09-30T05:10:23.461Z","type":"message"}
{"nick":"trevnorris","message":"and as far as 0.12. there'll be nothing you can't see.","date":"2013-09-30T05:10:42.113Z","type":"message"}
{"nick":"trevnorris","message":"on reason i'm digging it is not I have a single point of reference for dtrace probes.","date":"2013-09-30T05:11:01.956Z","type":"message"}
{"nick":"trevnorris","message":"s/on/one","date":"2013-09-30T05:11:49.147Z","type":"message"}
{"nick":"othiym23","message":"I want to write some example listeners when I have a little more time","date":"2013-09-30T05:12:09.134Z","type":"message"}
{"nick":"othiym23","message":"I highly doubt most people are going to understand what the hell this thing is for one 0.12 lands","date":"2013-09-30T05:12:25.274Z","type":"message"}
{"nick":"trevnorris","message":"i'm interested to see how you plan on using it.","date":"2013-09-30T05:12:25.616Z","type":"message"}
{"nick":"othiym23","message":"so I'll write a little long-stacktrace module, and an even lighter-weight CLS that all fits on a single screen (which is something creationix already wrote), and a little batch-oriented logging module","date":"2013-09-30T05:13:03.392Z","type":"message"}
{"nick":"othiym23","message":"maybe even a lower-level transaction tracer than the one I'm using for New Relic that captures everything","date":"2013-09-30T05:13:30.998Z","type":"message"}
{"nick":"othiym23","message":"those should all be pretty simple to write with what we have now","date":"2013-09-30T05:13:40.334Z","type":"message"}
{"nick":"trevnorris","message":"coolio. there'res one more api that needs to be added. that's the ability to add/remove a listener from an existing handle.","date":"2013-09-30T05:14:57.367Z","type":"message"}
{"nick":"trevnorris","message":"the other one i've played around with is the ability to add native callbacks, c++ methods, that'll run instead of js functions. it'd be a freak a lot faster for specific cases. though think that's probably creep","date":"2013-09-30T05:16:18.983Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: being able to add a listener to an existing handle is an interesting idea -- does it have a use case?","date":"2013-09-30T05:17:34.559Z","type":"message"}
{"nick":"othiym23","message":"or are you just adding that for completeness?","date":"2013-09-30T05:17:40.293Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: yeah. for domains.","date":"2013-09-30T05:17:46.234Z","type":"message"}
{"nick":"trevnorris","message":"if i'm going to fully emulate domains then i'll need the ability to add a listener object to an existing handle.","date":"2013-09-30T05:18:06.434Z","type":"message"}
{"nick":"trevnorris","message":"if not for that then I wouldn't take the time.","date":"2013-09-30T05:18:31.046Z","type":"message"}
{"nick":"othiym23","message":"when I'm not under the gun, I need to sit down and try to chart out all the different ways Node internally uses EEs, and see if I can break those down into different patterns","date":"2013-09-30T05:20:16.667Z","type":"message"}
{"nick":"othiym23","message":"and maybe start separating some of the concerns there and thinking reasonably about how to bridge different asynchronous realms in ways that are easier to reason about","date":"2013-09-30T05:20:45.369Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: on that issue did you read my plan for the future of internal emitters?","date":"2013-09-30T05:21:21.634Z","type":"message"}
{"nick":"trevnorris","message":"i want to standardize the api we use directly on top of the *Wraps, and use that internally. then event emitters can sit on top of that as well","date":"2013-09-30T05:22:09.793Z","type":"message"}
{"nick":"trevnorris","message":"so both domains and the event emitter could technically live in userland.","date":"2013-09-30T05:22:26.262Z","type":"message"}
{"nick":"othiym23","message":"looking at it now","date":"2013-09-30T05:24:28.478Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: do you have numbers (even rough ones) of the difference in execution time between Function#call and Function#apply?","date":"2013-09-30T05:25:33.310Z","type":"message"}
{"nick":"othiym23","message":"I use .apply all over the place","date":"2013-09-30T05:25:45.127Z","type":"message"}
{"nick":"othiym23","message":"I went through the newrelic code base yesterday and replaced all my [].slice.call usage with a handwritten slice() function, good times","date":"2013-09-30T05:26:26.220Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: it depends. from js to js, they're comparable. but for some reason calling apply from a function invoked from c++, and using \"arguments\" makes the call take 4-5x's longer.","date":"2013-09-30T05:26:50.694Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: one thing you need to take into account is the polymorphism the called function is experiencing from the use of call/apply. if the argument order/types are changing often then v8 can't properly IC those methods.","date":"2013-09-30T05:28:12.652Z","type":"message"}
{"nick":"trevnorris","message":"and any use of call/apply automatically rules out the use of inlining.","date":"2013-09-30T05:28:27.369Z","type":"message"}
{"nick":"paddybyers","date":"2013-09-30T05:31:13.311Z","type":"join"}
{"nick":"othiym23","message":"yeah, I've paid some attention to monomorphism in my dev efforts, mostly just trying to make sure I don't do any variadic cleverness with my own stuff","date":"2013-09-30T05:31:34.491Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: but there are some things. like in the case you _have_ to use a function closure. it's better to put a one liner that calls out to another more complex function and that passes the context (e.g. \"this\")  as an argument parameter.","date":"2013-09-30T05:31:35.800Z","type":"message"}
{"nick":"othiym23","message":"I haven't done any serious testing of that, though -- creating a benchmarking suite like core's is on my list of things to do","date":"2013-09-30T05:31:54.130Z","type":"message"}
{"nick":"othiym23","message":"just running the integration tests with --trace-deopt turned on doesn't really give me any surprises, although I'm still learning how to interpret what trace-deopt is telling me","date":"2013-09-30T05:32:21.862Z","type":"message"}
{"nick":"trevnorris","message":"you'll want to run that with --code-comments","date":"2013-09-30T05:33:12.914Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: I usually run with \"--trace-opt-verbose --trace-deopt --trace-inlining --code-comments\"","date":"2013-09-30T05:34:53.854Z","type":"message"}
{"nick":"trevnorris","message":"if you see a wall of constantly re-evaluated methods it means you have a function closure somewhere.","date":"2013-09-30T05:35:25.934Z","type":"message"}
{"nick":"trevnorris","message":"also there's the basic --prof which you can run against v8's tools/linux-tick-processor that'll give you some good info","date":"2013-09-30T05:35:56.869Z","type":"message"}
{"nick":"trevnorris","message":"but for a full swath, run --ll_prof (reference the comments in tools/ll_prof.py on how to use..","date":"2013-09-30T05:36:42.763Z","type":"message"}
{"nick":"othiym23","message":"the problem with --prof is that I'm testing a lot of code that's not my own","date":"2013-09-30T05:36:58.625Z","type":"message"}
{"nick":"othiym23","message":"I need a more controlled benchmarking environment","date":"2013-09-30T05:37:07.590Z","type":"message"}
{"nick":"othiym23","message":"and yeah, I use --trace-opt and --code-comments, and mostly it just tells me that NativeModule.require flaps a lot","date":"2013-09-30T05:37:33.282Z","type":"message"}
{"nick":"trevnorris","message":"ben wrote a perf module that'll allow you to start it lazily and you can start/stop it when needed.","date":"2013-09-30T05:37:54.671Z","type":"message"}
{"nick":"othiym23","message":"in fact, the --trace commands aren't super useful to use on non-core code because most of the output you see is coming from inside core because those are the hottest / most heavily hit paths","date":"2013-09-30T05:38:02.125Z","type":"message"}
{"nick":"othiym23","message":"that would help me more if I didn't develop on OS X ;)","date":"2013-09-30T05:38:26.134Z","type":"message"}
{"nick":"trevnorris","message":"heh","date":"2013-09-30T05:38:41.971Z","type":"message"}
{"nick":"othiym23","message":"what I'm going to do when I do that is just clean up my SmartOS vms or take tjfontaine's advice and use manta / some SmartMachines and do all my benchmarking and profiling on a platform that has good support for it","date":"2013-09-30T05:39:07.748Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: well, you could always try irhydra. just need to build core with: GYP_DEFINES=\"v8_enable_disassembler=1 v8_object_print=1\" ./configure; make -j8\"","date":"2013-09-30T05:39:10.193Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: then run your code with --trace-hydrogen --trace-deopt --code-comments --print-opt-code --trace-phase=Z","date":"2013-09-30T05:39:27.047Z","type":"message"}
{"nick":"trevnorris","message":"pipe stdout to code.asm","date":"2013-09-30T05:39:40.495Z","type":"message"}
{"nick":"trevnorris","message":"then go to http://web.irhydra.googlecode.com/git/hydra.html and load your compilation artifacts","date":"2013-09-30T05:39:58.204Z","type":"message"}
{"nick":"trevnorris","message":"(i.e. code.asm and hydrogen*)","date":"2013-09-30T05:40:11.418Z","type":"message"}
{"nick":"othiym23","message":"yeah, I've only played with IRHydra a little bit (mostly following along with mraleph's blog posts), and it seems neat, but I feel like I have a ways to go before I really need to get that into the nitty-gritty of the New Relic stuff's overhead","date":"2013-09-30T05:40:14.580Z","type":"message"}
{"nick":"trevnorris","message":"hah, fair enough.","date":"2013-09-30T05:40:31.145Z","type":"message"}
{"nick":"othiym23","message":"right now I think it's probably < 1% overhead imposed by the agent, and that's acceptable for NR (and most of NR's customers)","date":"2013-09-30T05:40:31.502Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-09-30T05:40:59.376Z","type":"quit"}
{"nick":"othiym23","message":"and there's obvious stuff to clean up, like minimizing object creation and trying to find more ways to eliminate creating closures","date":"2013-09-30T05:41:17.806Z","type":"message"}
{"nick":"trevnorris","message":"yeah. right now i've gotten async listeners to have just about as much minimal overhead as possible. though, there's still not a fast way to get from c++ to js from the event loop.","date":"2013-09-30T05:43:04.641Z","type":"message"}
{"nick":"trevnorris","message":"going through Function::Call() takes a minimum of 50ns, where as js to c++ can be as few as 8ns.","date":"2013-09-30T05:43:54.368Z","type":"message"}
{"nick":"trevnorris","message":"really annoying.","date":"2013-09-30T05:44:02.423Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: do you have any native code in your codebase?","date":"2013-09-30T05:44:26.036Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so, from dtrace I see \"onread at net.js position 25676\"","date":"2013-09-30T05:45:56.663Z","type":"message"}
{"nick":"trevnorris","message":"does that mean line 25...k","date":"2013-09-30T05:46:04.469Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: no (mostly to keep deployment simple)","date":"2013-09-30T05:46:15.804Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: ok. so i'll shut up about all that stuff :)","date":"2013-09-30T05:46:30.362Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: although I have a longish list of metrics that it would be good to gather that can only be reached from C++-land","date":"2013-09-30T05:46:57.698Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: like what?","date":"2013-09-30T05:47:12.133Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: once Azure has figured out how to host precompiled binaries for npm deployment, I'll probably take another look at it","date":"2013-09-30T05:47:43.233Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: real cputime, better memory usage metrics, GC tracing (without forcing people to start with --expose-gc, because nobody reads the docs), V8 heap vs Node heap","date":"2013-09-30T05:48:55.425Z","type":"message"}
{"nick":"othiym23","message":"maybe some libuv counters if it's possible to implement those without slaughtering performance","date":"2013-09-30T05:49:20.399Z","type":"message"}
{"nick":"trevnorris","message":"i think we already have a bunch of probes in core for stuff like that.","date":"2013-09-30T05:49:44.196Z","type":"message"}
{"nick":"othiym23","message":"you know, the kinds of things it's trivial to grab with DTrace but that it's nearly impossible to get with pure JS","date":"2013-09-30T05:49:48.744Z","type":"message"}
{"nick":"othiym23","message":"yeah, the question is how to get at it in-process","date":"2013-09-30T05:50:06.703Z","type":"message"}
{"nick":"othiym23","message":"NR can't dictate peoples' runtime environment","date":"2013-09-30T05:50:21.095Z","type":"message"}
{"nick":"othiym23","message":"a distressingly high number of Node users deploy to Heroku because of their free tier","date":"2013-09-30T05:50:33.986Z","type":"message"}
{"nick":"othiym23","message":"and I know the person maintaining the Node buildpack over at Heroku, and Heroku and New Relic are partners, but getting perf or systemtap turned on for individual dynos sounds like something approaching real work","date":"2013-09-30T05:51:14.127Z","type":"message"}
{"nick":"EhevuTov","date":"2013-09-30T05:53:20.488Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: quick context switch: here's some dtrace output from mmap after hammering the server and forcing rss to grow beyond what it should've been able to: https://gist.github.com/trevnorris/6759810","date":"2013-09-30T05:57:56.033Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: any tips on here to look next?","date":"2013-09-30T05:58:04.479Z","type":"message"}
{"nick":"trevnorris","action":"&","date":"2013-09-30T06:05:47.445Z","type":"action"}
{"nick":"LOUDBOT","message":"HOLY SHIT IT'S CARNIES AND THEY FEAST ON YOUR FLESH","date":"2013-09-30T06:05:48.113Z","type":"message"}
{"nick":"rendar","date":"2013-09-30T06:10:07.153Z","type":"join"}
{"nick":"icarot","date":"2013-09-30T06:10:20.173Z","type":"join"}
{"nick":"icarot2","date":"2013-09-30T06:13:08.412Z","type":"join"}
{"nick":"icarot","reason":"Ping timeout: 256 seconds","date":"2013-09-30T06:14:48.036Z","type":"quit"}
{"nick":"icarot","date":"2013-09-30T06:32:08.975Z","type":"join"}
{"nick":"icarot2","reason":"Ping timeout: 245 seconds","date":"2013-09-30T06:36:01.214Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #235 \u00037UNSTABLE\u000f windows-ia32 (7/600) windows-x64 (8/600) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/235/","date":"2013-09-30T06:41:20.427Z","type":"message"}
{"nick":"icarot","reason":"\"Leaving\"","date":"2013-09-30T06:55:41.016Z","type":"part"}
{"nick":"rendar","date":"2013-09-30T07:00:54.232Z","type":"quit"}
{"nick":"rendar","date":"2013-09-30T07:02:51.255Z","type":"join"}
{"nick":"dominictarr","reason":"Ping timeout: 245 seconds","date":"2013-09-30T07:44:36.700Z","type":"quit"}
{"nick":"dominictarr","date":"2013-09-30T07:49:19.239Z","type":"join"}
{"nick":"`3rdEden","message":"trevnorris: I was looking through your v0.13 optimisation check list, you might want to add removing .bind calls from the core as well ","date":"2013-09-30T07:50:29.183Z","type":"message"}
{"nick":"`3rdEden","message":"There are a couple of .bind calls in the fs module, console and __debugger. Changing them to variable references or just wrapping them with a plain function that does a .call would be much more efficient","date":"2013-09-30T07:52:07.768Z","type":"message"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-09-30T08:07:34.032Z","type":"quit"}
{"nick":"wolfeidau_","date":"2013-09-30T08:19:57.153Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-09-30T08:20:32.880Z","type":"quit"}
{"nick":"hz","date":"2013-09-30T08:21:02.827Z","type":"join"}
{"nick":"AvianFlu","date":"2013-09-30T08:22:00.948Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-09-30T08:22:09.152Z","type":"quit"}
{"nick":"dominictarr","date":"2013-09-30T08:25:00.454Z","type":"join"}
{"nick":"dominictarr","reason":"Client Quit","date":"2013-09-30T08:29:03.340Z","type":"quit"}
{"nick":"dominictarr","date":"2013-09-30T08:29:30.971Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-09-30T08:33:50.165Z","type":"join"}
{"nick":"dominictarr","reason":"Ping timeout: 260 seconds","date":"2013-09-30T08:33:59.942Z","type":"quit"}
{"nick":"hz","date":"2013-09-30T08:43:31.796Z","type":"quit"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-09-30T08:45:39.987Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 245 seconds","date":"2013-09-30T08:49:18.166Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-09-30T08:55:17.831Z","type":"join"}
{"nick":"hz","date":"2013-09-30T09:04:55.919Z","type":"join"}
{"nick":"amartens","date":"2013-09-30T09:16:00.719Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 245 seconds","date":"2013-09-30T09:22:31.717Z","type":"quit"}
{"nick":"wolfeidau_","reason":"Quit: Leaving","date":"2013-09-30T09:39:40.736Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 256 seconds","date":"2013-09-30T09:44:28.159Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-09-30T09:50:05.168Z","type":"join"}
{"nick":"amartens","date":"2013-09-30T10:20:38.869Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 260 seconds","date":"2013-09-30T10:25:03.912Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-09-30T10:33:17.553Z","type":"quit"}
{"nick":"abraxas","date":"2013-09-30T10:33:50.192Z","type":"join"}
{"nick":"bnoordhuis","reason":"Remote host closed the connection","date":"2013-09-30T10:35:49.549Z","type":"quit"}
{"nick":"abraxas","reason":"Ping timeout: 240 seconds","date":"2013-09-30T10:38:05.202Z","type":"quit"}
{"nick":"Kakera","date":"2013-09-30T10:44:25.748Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #1509 \u00037UNSTABLE\u000f smartos-x64 (2/600) http://jenkins.nodejs.org/job/nodejs-v0.10/1509/","date":"2013-09-30T10:46:37.297Z","type":"message"}
{"nick":"loladiro","date":"2013-09-30T11:10:20.466Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-09-30T11:12:58.327Z","type":"quit"}
{"nick":"amartens","date":"2013-09-30T11:20:56.236Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 252 seconds","date":"2013-09-30T11:25:21.202Z","type":"quit"}
{"nick":"vptr","date":"2013-09-30T11:41:35.172Z","type":"join"}
{"nick":"vptr","reason":"Changing host","date":"2013-09-30T11:41:55.279Z","type":"quit"}
{"nick":"vptr","date":"2013-09-30T11:41:55.500Z","type":"join"}
{"nick":"amartens","date":"2013-09-30T12:21:16.327Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 240 seconds","date":"2013-09-30T12:25:28.474Z","type":"quit"}
{"nick":"M28","reason":"Read error: Connection reset by peer","date":"2013-09-30T12:35:29.482Z","type":"quit"}
{"nick":"vptr","reason":"Quit: WeeChat 0.3.5","date":"2013-09-30T12:41:02.096Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-09-30T13:11:52.567Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-09-30T13:14:04.086Z","type":"quit"}
{"nick":"mikeal","date":"2013-09-30T13:17:42.385Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-09-30T13:17:57.187Z","type":"quit"}
{"nick":"amartens","date":"2013-09-30T13:21:35.648Z","type":"join"}
{"nick":"mikeal","date":"2013-09-30T13:22:54.073Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 245 seconds","date":"2013-09-30T13:25:51.661Z","type":"quit"}
{"nick":"dominictarr","date":"2013-09-30T13:31:00.520Z","type":"join"}
{"nick":"loladiro","date":"2013-09-30T13:38:55.247Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-09-30T14:00:29.229Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-09-30T14:06:27.503Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-09-30T14:11:54.177Z","type":"quit"}
{"nick":"mikeal","date":"2013-09-30T14:14:15.164Z","type":"join"}
{"nick":"amartens","date":"2013-09-30T14:21:57.163Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-09-30T14:24:37.837Z","type":"quit"}
{"nick":"amartens","reason":"Ping timeout: 245 seconds","date":"2013-09-30T14:26:23.164Z","type":"quit"}
{"nick":"mikeal","date":"2013-09-30T14:27:51.040Z","type":"join"}
{"nick":"vptr","date":"2013-09-30T15:03:58.844Z","type":"join"}
{"nick":"AvianFlu","date":"2013-09-30T15:16:31.382Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #586 \u00037UNSTABLE\u000f smartos-x64 (6/643) http://jenkins.nodejs.org/job/nodejs-master/586/","date":"2013-09-30T15:17:42.987Z","type":"message"}
{"nick":"loladiro","date":"2013-09-30T15:20:53.987Z","type":"join"}
{"nick":"amartens","date":"2013-09-30T15:22:17.955Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 246 seconds","date":"2013-09-30T15:26:25.885Z","type":"quit"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2013-09-30T15:28:46.499Z","type":"quit"}
{"nick":"c4milo","date":"2013-09-30T15:41:59.453Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-09-30T15:50:20.581Z","type":"quit"}
{"nick":"amartens","date":"2013-09-30T15:51:15.760Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-09-30T16:07:21.114Z","type":"nick"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-09-30T16:08:56.382Z","type":"nick"}
{"nick":"inolen","date":"2013-09-30T16:20:49.760Z","type":"join"}
{"nick":"mikeal","date":"2013-09-30T16:21:04.772Z","type":"join"}
{"nick":"AvianFlu_","date":"2013-09-30T16:21:30.202Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 245 seconds","date":"2013-09-30T16:24:43.167Z","type":"quit"}
{"nick":"AvianFlu_","new_nick":"AvianFlu","date":"2013-09-30T16:26:35.319Z","type":"nick"}
{"nick":"octetcloud","date":"2013-09-30T16:27:53.919Z","type":"join"}
{"nick":"groundwater","reason":"Quit: groundwater","date":"2013-09-30T16:28:20.869Z","type":"quit"}
{"nick":"vptr","reason":"Ping timeout: 240 seconds","date":"2013-09-30T16:29:15.753Z","type":"quit"}
{"nick":"mikeal","reason":"Ping timeout: 240 seconds","date":"2013-09-30T16:30:14.543Z","type":"quit"}
{"nick":"kellabyte","reason":"Quit: Quit","date":"2013-09-30T16:35:08.565Z","type":"quit"}
{"nick":"tjfontaine","message":"trevnorris: I'll review your comments and see :)","date":"2013-09-30T16:39:00.776Z","type":"message"}
{"nick":"hueniverse1","reason":"Read error: Connection reset by peer","date":"2013-09-30T16:49:50.185Z","type":"quit"}
{"nick":"hueniverse","date":"2013-09-30T16:52:49.541Z","type":"join"}
{"nick":"octetcloud","reason":"Quit: WeeChat 0.4.1","date":"2013-09-30T16:54:11.687Z","type":"quit"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-09-30T16:54:40.917Z","type":"quit"}
{"nick":"tjfontaine","message":"hueniverse: do you happen to know which test in sntp in particular was causing that abort, if not it's fine I will track it down, we're going to be doing a release of 0.10 today and I'd like to include that fix","date":"2013-09-30T16:55:00.494Z","type":"message"}
{"nick":"vptr","date":"2013-09-30T16:55:26.912Z","type":"join"}
{"nick":"kellabyte","date":"2013-09-30T16:55:29.404Z","type":"join"}
{"nick":"octetcloud","date":"2013-09-30T16:55:45.970Z","type":"join"}
{"nick":"hueniverse","message":"tjfontaine: I think it's a combination of tests. If you only run one test at a time it doesn't happen (at least last time I did that)","date":"2013-09-30T16:55:58.799Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2013-09-30T16:56:27.630Z","type":"message"}
{"nick":"hueniverse","message":"tjfontaine: also, I found the problem that was causing the test tool to fail - I removed the listeners after socket.close() but still got an error after that","date":"2013-09-30T16:56:40.681Z","type":"message"}
{"nick":"hueniverse","message":"tjfontaine: which came in after the wrapping domain already exited ","date":"2013-09-30T16:57:15.821Z","type":"message"}
{"nick":"hueniverse","message":"tjfontaine: that is actually a much more annoying problem","date":"2013-09-30T16:57:43.865Z","type":"message"}
{"nick":"tjfontaine","message":"hrm, can you file an issue on that?","date":"2013-09-30T16:58:01.528Z","type":"message"}
{"nick":"hueniverse","message":"tjfontaine: and the only way I know how to solve it is to add an empty static listener on error on sockets I just don't care about anymore","date":"2013-09-30T16:58:14.121Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-09-30T16:58:22.172Z","type":"message"}
{"nick":"hueniverse","message":"I'm not sure this is an issue. is there any guarantee that once 'close' is called, there will not be an error event?","date":"2013-09-30T16:59:06.418Z","type":"message"}
{"nick":"hueniverse","message":"I even tried waiting for the 'close' event to remove the listeners inside the cb, but that didn't help either","date":"2013-09-30T16:59:31.128Z","type":"message"}
{"nick":"tjfontaine","message":"at the moment I'm not sure, but to me close should signify that no other events should happen","date":"2013-09-30T16:59:46.266Z","type":"message"}
{"nick":"octetcloud","reason":"Client Quit","date":"2013-09-30T16:59:52.005Z","type":"quit"}
{"nick":"hueniverse","message":"yeah...","date":"2013-09-30T16:59:59.923Z","type":"message"}
{"nick":"tjfontaine","message":"{error,data,timeout}->end->close","date":"2013-09-30T17:00:11.674Z","type":"message"}
{"nick":"tjfontaine","message":"to me","date":"2013-09-30T17:00:15.571Z","type":"message"}
{"nick":"tjfontaine","message":"the sntp failure is inside the #offset set of tests","date":"2013-09-30T17:00:33.367Z","type":"message"}
{"nick":"hueniverse","message":"at one point I found the first test that was failing, then isolated it","date":"2013-09-30T17:01:14.952Z","type":"message"}
{"nick":"hueniverse","message":"then it didn't fail","date":"2013-09-30T17:01:18.655Z","type":"message"}
{"nick":"hueniverse","message":"but when I c/p it three times","date":"2013-09-30T17:01:23.681Z","type":"message"}
{"nick":"hueniverse","message":"it fails on the second and third","date":"2013-09-30T17:01:28.874Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2013-09-30T17:01:37.783Z","type":"message"}
{"nick":"hueniverse","message":"note that you need to get sntp 0.x and lab 0.1.6 for this to happen","date":"2013-09-30T17:02:03.063Z","type":"message"}
{"nick":"hueniverse","message":"master is now fixed","date":"2013-09-30T17:02:07.813Z","type":"message"}
{"nick":"hueniverse","message":"\"fixed\"","date":"2013-09-30T17:02:12.352Z","type":"message"}
{"nick":"tjfontaine","message":"right I still have my checkout from the weekend","date":"2013-09-30T17:02:28.454Z","type":"message"}
{"nick":"hueniverse","message":"lmk if I can help","date":"2013-09-30T17:02:39.767Z","type":"message"}
{"nick":"tjfontaine","message":"have you run the broken commit against master?","date":"2013-09-30T17:02:46.765Z","type":"message"}
{"nick":"hueniverse","message":"against node master?","date":"2013-09-30T17:03:21.658Z","type":"message"}
{"nick":"tjfontaine","message":"yes","date":"2013-09-30T17:03:24.375Z","type":"message"}
{"nick":"hueniverse","message":"nope","date":"2013-09-30T17:03:28.036Z","type":"message"}
{"nick":"tjfontaine","message":"k","date":"2013-09-30T17:03:30.583Z","type":"message"}
{"nick":"hueniverse","message":"are you trying to figure out why it aborted or why the error is happening in the first place?","date":"2013-09-30T17:04:29.919Z","type":"message"}
{"nick":"hueniverse","message":"I think it is aborting because no one is listening on error","date":"2013-09-30T17:04:46.730Z","type":"message"}
{"nick":"tjfontaine","message":"right, but because there was an error it's trying to introspect into the handle, even though we're not ready for it","date":"2013-09-30T17:05:33.630Z","type":"message"}
{"nick":"tjfontaine","message":"util.inspect() of an error'd dgram socket shouldn't result in an abort :)","date":"2013-09-30T17:06:04.856Z","type":"message"}
{"nick":"hueniverse","message":"k","date":"2013-09-30T17:06:28.141Z","type":"message"}
{"nick":"tjfontaine","message":"hueniverse: what error was it throwing in particular, do you recall?","date":"2013-09-30T17:06:44.959Z","type":"message"}
{"nick":"hueniverse","message":"hmm","date":"2013-09-30T17:07:05.041Z","type":"message"}
{"nick":"hueniverse","message":"I need to play with it again","date":"2013-09-30T17:07:09.350Z","type":"message"}
{"nick":"tjfontaine","message":"sok, I can probably convince it","date":"2013-09-30T17:07:16.487Z","type":"message"}
{"nick":"hueniverse","message":"I got so many odd results playing with it","date":"2013-09-30T17:07:18.505Z","type":"message"}
{"nick":"tjfontaine","message":"weird, it's not erroring for me now in #offset","date":"2013-09-30T17:08:05.699Z","type":"message"}
{"nick":"tjfontaine","message":"or aborting rather","date":"2013-09-30T17:08:10.380Z","type":"message"}
{"nick":"tjfontaine","message":"curious","date":"2013-09-30T17:08:18.250Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-09-30T17:08:48.804Z","type":"quit"}
{"nick":"brson","date":"2013-09-30T17:10:05.763Z","type":"join"}
{"nick":"groundwater","date":"2013-09-30T17:13:00.084Z","type":"join"}
{"nick":"octetcloud","date":"2013-09-30T17:13:05.924Z","type":"join"}
{"nick":"Damn3d","reason":"Ping timeout: 245 seconds","date":"2013-09-30T17:13:06.286Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-09-30T17:14:09.393Z","type":"join"}
{"nick":"Damn3d","date":"2013-09-30T17:17:40.902Z","type":"join"}
{"nick":"hueniverse","message":"same version from sat?","date":"2013-09-30T17:20:01.654Z","type":"message"}
{"nick":"tjfontaine","message":"yes, so it's erroring in getaddrinfo","date":"2013-09-30T17:20:34.401Z","type":"message"}
{"nick":"tjfontaine","message":"I'll see if I can make a test case that matches this","date":"2013-09-30T17:21:02.995Z","type":"message"}
{"nick":"hueniverse","message":"do you need help reproducing the abort?","date":"2013-09-30T17:21:51.868Z","type":"message"}
{"nick":"tjfontaine","message":"only for my test case","date":"2013-09-30T17:22:21.942Z","type":"message"}
{"nick":"tjfontaine","message":"who is responsible for doing a bind for sntp?","date":"2013-09-30T17:23:00.529Z","type":"message"}
{"nick":"tjfontaine","message":"oh this is only outbound I guess","date":"2013-09-30T17:23:40.105Z","type":"message"}
{"nick":"tjfontaine","message":"hmm, should this even be emit'ing on the socket? it should only be delivered to the calling function I think","date":"2013-09-30T17:25:21.494Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-09-30T17:26:30.484Z","type":"quit"}
{"nick":"hueniverse","message":"not sure what you mean","date":"2013-09-30T17:26:33.768Z","type":"message"}
{"nick":"loladiro","date":"2013-09-30T17:27:00.258Z","type":"join"}
{"nick":"mikeal","date":"2013-09-30T17:27:28.889Z","type":"join"}
{"nick":"tjfontaine","message":"https://github.com/joyent/node/blob/v0.10/lib/dgram.js#L293-L311","date":"2013-09-30T17:27:32.830Z","type":"message"}
{"nick":"tjfontaine","message":"if we error on looking up who you're trying to send to, we emit on the socket, vs passing the error to the send callback","date":"2013-09-30T17:28:01.763Z","type":"message"}
{"nick":"bnoordhuis","date":"2013-09-30T17:28:46.910Z","type":"join"}
{"nick":"AvianFlu","date":"2013-09-30T17:29:28.848Z","type":"join"}
{"nick":"amartens","date":"2013-09-30T17:29:47.995Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 245 seconds","date":"2013-09-30T17:31:41.658Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-09-30T17:31:46.095Z","type":"quit"}
{"nick":"tjfontaine","message":"hueniverse: why is this thing a heisenbug, argh.","date":"2013-09-30T17:42:47.949Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: is it racy?","date":"2013-09-30T17:44:02.599Z","type":"message"}
{"nick":"tjfontaine","message":"it must be","date":"2013-09-30T17:44:06.918Z","type":"message"}
{"nick":"othiym23","message":"sounds like it's racy","date":"2013-09-30T17:44:08.173Z","type":"message"}
{"nick":"trevnorris","message":"morning","date":"2013-09-30T17:44:17.012Z","type":"message"}
{"nick":"othiym23","message":"mornin trevnorris ","date":"2013-09-30T17:44:23.321Z","type":"message"}
{"nick":"tjfontaine","message":"a race between the ._handle being instantiated and the error being fired, so just a tick or two off","date":"2013-09-30T17:44:37.122Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: problem instantiating the *Wrap class at time of JS instantiation. net module allows to create a pipe or tcp at .listen() time. so right now it's impossible to do so.","date":"2013-09-30T17:45:12.451Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: i'd like to figure out a way for this to be possible, because the implications would be beneficial performance-wise, but not sure how to yet.","date":"2013-09-30T17:45:44.013Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 246 seconds","date":"2013-09-30T17:47:07.935Z","type":"quit"}
{"nick":"trevnorris","message":"`3rdEden: thanks for the heads up. i'll add that to the list.","date":"2013-09-30T17:47:22.603Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: anything new going on?","date":"2013-09-30T17:47:54.384Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: about to add a .bindEmitter method to CLS","date":"2013-09-30T17:48:09.782Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: your interface for dealing with Emitters is meant for the C++ side of things, right?","date":"2013-09-30T17:48:37.907Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: the async listener api is completely separated from the EventEmitter. since EE has actually nothing directly to do with the async event.","date":"2013-09-30T17:49:22.306Z","type":"message"}
{"nick":"othiym23","message":"also I am enjoying some super tasty stoner metal, but that's neither here nor there","date":"2013-09-30T17:49:29.273Z","type":"message"}
{"nick":"tjfontaine","message":"\"We should not expose a raw pointer to typed array's backing store.\" sad face","date":"2013-09-30T17:49:34.229Z","type":"message"}
{"nick":"trevnorris","message":"hah","date":"2013-09-30T17:49:37.881Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: what's that from?","date":"2013-09-30T17:49:52.152Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: v8 commits","date":"2013-09-30T17:49:57.663Z","type":"message"}
{"nick":"trevnorris","message":"ah, bugger. though I thought there's an api for that.","date":"2013-09-30T17:50:07.255Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: https://codereview.chromium.org/25221002 it's only on the ArrayBufferView","date":"2013-09-30T17:50:45.463Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: I was talking about #6252 -- I know they're separate concepts, but I want to mash them up ;)","date":"2013-09-30T17:50:55.695Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: ah, of the view itself, not the backing data.","date":"2013-09-30T17:51:38.038Z","type":"message"}
{"nick":"tjfontaine","message":"ya, but still a nice helper nonetheless","date":"2013-09-30T17:51:53.600Z","type":"message"}
{"nick":"tjfontaine","message":"saves a lookup of the base","date":"2013-09-30T17:52:00.849Z","type":"message"}
{"nick":"trevnorris","message":"oh, I agree. just wonder why they felt the need to remove it.","date":"2013-09-30T17:52:10.877Z","type":"message"}
{"nick":"tjfontaine","message":"was anyone else here able to reproduce the npm cb error themselves?","date":"2013-09-30T17:53:05.551Z","type":"message"}
{"nick":"EhevuTov","date":"2013-09-30T17:53:12.180Z","type":"join"}
{"nick":"trevnorris","message":"sorry, nope.","date":"2013-09-30T17:53:19.736Z","type":"message"}
{"nick":"tjfontaine","message":"I would really like another sanity check before I cut this :/","date":"2013-09-30T17:53:24.630Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: what's the issue?","date":"2013-09-30T17:53:40.286Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: `npm install|update` resulting in the `npm ERR cb() never called!`","date":"2013-09-30T17:54:04.885Z","type":"message"}
{"nick":"othiym23","message":"I saw your comment on the bug, but you were all \"the solution to this problem is too long to write in the margins of this bus ride\"","date":"2013-09-30T17:54:06.019Z","type":"message"}
{"nick":"tjfontaine","message":"oh ok","date":"2013-09-30T17:54:21.087Z","type":"message"}
{"nick":"tjfontaine","message":"so","date":"2013-09-30T17:54:21.527Z","type":"message"}
{"nick":"othiym23","message":"sorry, shoulda clarified: what's the issue in Node that's causing the bug?","date":"2013-09-30T17:54:22.877Z","type":"message"}
{"nick":"tjfontaine","message":" joyent/node#6270","date":"2013-09-30T17:54:37.110Z","type":"message"}
{"nick":"tjfontaine","message":"that one","date":"2013-09-30T17:54:38.748Z","type":"message"}
{"nick":"TooTallNate","date":"2013-09-30T17:54:46.940Z","type":"join"}
{"nick":"tjfontaine","message":"a tls race, that some people more than others were able to hit","date":"2013-09-30T17:54:59.524Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master\u0002: #263 \u00037UNSTABLE\u000f windows (3/195) smartos (2/194) http://jenkins.nodejs.org/job/libuv-master/263/","date":"2013-09-30T17:55:15.545Z","type":"message"}
{"nick":"tjfontaine","message":"network latency, sets of packets, cpu availability of crypto routines","date":"2013-09-30T17:55:25.812Z","type":"message"}
{"nick":"tjfontaine","message":"who knows what caused the race for them","date":"2013-09-30T17:55:30.347Z","type":"message"}
{"nick":"othiym23","message":"is there a way to slow down / speed up the passage in compiled applications to make races more likely to show up?","date":"2013-09-30T17:56:03.897Z","type":"message"}
{"nick":"othiym23","message":"the passage *of time","date":"2013-09-30T17:56:21.421Z","type":"message"}
{"nick":"tjfontaine","message":"if I can figure out which timer in npm is firing to cause this, then it should be easy for npm to also fix this problem going forward","date":"2013-09-30T17:56:29.150Z","type":"message"}
{"nick":"EhevuTov","reason":"Client Quit","date":"2013-09-30T17:56:44.928Z","type":"quit"}
{"nick":"tjfontaine","message":"I was assuming it was a net/http.setTimeout","date":"2013-09-30T17:56:46.064Z","type":"message"}
{"nick":"tjfontaine","message":"but NODE_DEBUG=\"net http https\" wasn't helpful there","date":"2013-09-30T17:57:10.424Z","type":"message"}
{"nick":"tjfontaine","message":"and hilariously NODE_DEBUG=\"timers\" moves the goal post for when it fails","date":"2013-09-30T17:58:12.970Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: not that it matters, but I found this interesting: https://gist.github.com/trevnorris/6767620","date":"2013-09-30T17:59:41.347Z","type":"message"}
{"nick":"tjfontaine","message":"how did you manage that","date":"2013-09-30T18:00:13.296Z","type":"message"}
{"nick":"trevnorris","message":"npm install sntp","date":"2013-09-30T18:00:22.267Z","type":"message"}
{"nick":"tjfontaine","message":"oh valgrind","date":"2013-09-30T18:00:24.623Z","type":"message"}
{"nick":"tjfontaine","message":"totally valgrinds fault there","date":"2013-09-30T18:00:29.071Z","type":"message"}
{"nick":"tjfontaine","message":"that fucker just gets in the way of everything","date":"2013-09-30T18:00:46.566Z","type":"message"}
{"nick":"trevnorris","message":"oh really? was just looking for a way to slow down the application, and valgrind seemed like a great way.","date":"2013-09-30T18:00:48.974Z","type":"message"}
{"nick":"trevnorris","message":"hahaha","date":"2013-09-30T18:00:51.977Z","type":"message"}
{"nick":"tjfontaine","message":"yes well you managed to slow it down, but introducing more bugs :)","date":"2013-09-30T18:01:02.964Z","type":"message"}
{"nick":"trevnorris","message":"i do find the output for ZCtx::Process() interesting.","date":"2013-09-30T18:01:33.115Z","type":"message"}
{"nick":"trevnorris","message":"having that issue on master currently, where npm install just dies during the decompress phase","date":"2013-09-30T18:02:01.720Z","type":"message"}
{"nick":"tjfontaine","message":"ya that could be a legit bug","date":"2013-09-30T18:02:11.287Z","type":"message"}
{"nick":"tjfontaine","message":"just don't really want to have to use valgrind to evoke it :P","date":"2013-09-30T18:02:25.054Z","type":"message"}
{"nick":"trevnorris","message":"nod","date":"2013-09-30T18:02:43.677Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: fwiw, the zlib issue on master is pretty bad. I can hardly ever run npm install on master w/o zlib dieing in one of several ways. though it's probably not related to what you're trying to fix.","date":"2013-09-30T18:08:19.207Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-node-integration\u0002: #248 \u00037UNSTABLE\u000f smartos-x64 (6/643) http://jenkins.nodejs.org/job/libuv-node-integration/248/","date":"2013-09-30T18:08:49.830Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: ok I will play before releasing another","date":"2013-09-30T18:09:05.927Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: the errors I get are either ZCtx aborts, or I get a sha sum failure. (of course, have to clear our my ~/.npm/ dir before every run.","date":"2013-09-30T18:09:54.615Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: so I wrote a quick script to keep infinitely long stack traces for every async event. yeah... didn't run very fast :P but sure you're already expecting that.","date":"2013-09-30T18:13:51.470Z","type":"message"}
{"nick":"tjfontaine","message":"you're fucking winning this game npm, I hope you're fucking proud of it","date":"2013-09-30T18:20:31.078Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: yeah, long stacktraces are just slow","date":"2013-09-30T18:30:12.416Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: but there are times when they're pretty much the fastest way to debug an error","date":"2013-09-30T18:30:28.885Z","type":"message"}
{"nick":"hueniverse","message":"tjfontaine: been getting the npm cb() errors all weekend","date":"2013-09-30T18:34:11.631Z","type":"message"}
{"nick":"hueniverse","message":"had to downgrade to 10.18","date":"2013-09-30T18:34:18.482Z","type":"message"}
{"nick":"tjfontaine","message":"hueniverse: yes, would you like to try a build with the fix?","date":"2013-09-30T18:35:31.834Z","type":"message"}
{"nick":"hueniverse","message":"tjfontaine: are you asking if I want to or willing to? :-)","date":"2013-09-30T18:36:05.438Z","type":"message"}
{"nick":"tjfontaine","message":"are you willing and able :)","date":"2013-09-30T18:36:20.090Z","type":"message"}
{"nick":"hueniverse","message":"just master?","date":"2013-09-30T18:37:29.623Z","type":"message"}
{"nick":"tjfontaine","message":"v0.10 HEAD","date":"2013-09-30T18:37:35.288Z","type":"message"}
{"nick":"hueniverse","message":"I guess","date":"2013-09-30T18:37:45.661Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-09-30T18:38:02.250Z","type":"quit"}
{"nick":"hueniverse","message":"I feel like the prettiest girl at the prom this am... but all the boys have bad intentions","date":"2013-09-30T18:38:27.039Z","type":"message"}
{"nick":"othiym23","message":"is that a good feeling or a bad feeling?","date":"2013-09-30T18:38:39.521Z","type":"message"}
{"nick":"kellabyte","reason":"Changing host","date":"2013-09-30T18:38:40.615Z","type":"quit"}
{"nick":"kellabyte","date":"2013-09-30T18:38:40.831Z","type":"join"}
{"nick":"kellabyte","reason":"Changing host","date":"2013-09-30T18:38:40.831Z","type":"quit"}
{"nick":"kellabyte","date":"2013-09-30T18:38:40.831Z","type":"join"}
{"nick":"hueniverse","message":"good thing I slept in late","date":"2013-09-30T18:38:41.701Z","type":"message"}
{"nick":"othiym23","message":"a real question here about the kind of prom date you are","date":"2013-09-30T18:38:53.122Z","type":"message"}
{"nick":"hueniverse","message":"othiym23: starts good but ends bad :-)","date":"2013-09-30T18:38:58.776Z","type":"message"}
{"nick":"tjfontaine","message":"should I have spiked the punch or not?","date":"2013-09-30T18:39:11.561Z","type":"message"}
{"nick":"hueniverse","message":"othiym23: never been to a prom","date":"2013-09-30T18:39:13.129Z","type":"message"}
{"nick":"tjfontaine","message":"always a brides maid, never the bride?","date":"2013-09-30T18:39:41.361Z","type":"message"}
{"nick":"hueniverse","message":"no proms in Israel","date":"2013-09-30T18:39:57.132Z","type":"message"}
{"nick":"mikeal","date":"2013-09-30T18:40:00.931Z","type":"join"}
{"nick":"othiym23","message":"hueniverse: not really missing much, if my high school years were any guide","date":"2013-09-30T18:41:28.271Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: what, it's not like a john hughes film?","date":"2013-09-30T18:42:09.836Z","type":"message"}
{"nick":"trevnorris","message":"hueniverse: have a specific thing you're getting the error on? been trying for hours and can't reproduce the error","date":"2013-09-30T18:42:10.899Z","type":"message"}
{"nick":"tjfontaine","message":"you're definitely on node v0.10.19 proper, right trevor?","date":"2013-09-30T18:44:03.839Z","type":"message"}
{"nick":"trevnorris","message":"yeah","date":"2013-09-30T18:44:29.577Z","type":"message"}
{"nick":"tjfontaine","message":"on your local box? have you tried a vm?","date":"2013-09-30T18:44:41.289Z","type":"message"}
{"nick":"hueniverse","message":"trevnorris: you mean the npm cb() errori?","date":"2013-09-30T18:44:49.362Z","type":"message"}
{"nick":"hueniverse","message":"error","date":"2013-09-30T18:44:51.275Z","type":"message"}
{"nick":"trevnorris","message":"hueniverse: yeah, can't reproduce the error on 0.10.19","date":"2013-09-30T18:45:08.072Z","type":"message"}
{"nick":"hueniverse","message":"on one vm I get it whenever I clone hapi and try to do npm install","date":"2013-09-30T18:45:25.891Z","type":"message"}
{"nick":"AvianFlu","date":"2013-09-30T18:45:27.109Z","type":"join"}
{"nick":"trevnorris","message":"i'm getting a bunch of other errors on master, but nothing on 0.10.19","date":"2013-09-30T18:45:27.328Z","type":"message"}
{"nick":"hueniverse","message":"on another I got it when I tried to publish hawk","date":"2013-09-30T18:45:34.250Z","type":"message"}
{"nick":"hueniverse","message":"going to see if I can reproduce the hapi one","date":"2013-09-30T18:45:52.789Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: root@165.225.136.127 has 0.10.19 installed, you should be able to reproduce it easily there","date":"2013-09-30T18:46:35.137Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: thanks","date":"2013-09-30T18:46:43.322Z","type":"message"}
{"nick":"tjfontaine","message":"but that doesn't help me verify that I'm not crazy :)","date":"2013-09-30T18:46:49.417Z","type":"message"}
{"nick":"groundwater","reason":"Ping timeout: 248 seconds","date":"2013-09-30T18:49:09.771Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: you currently on that server?","date":"2013-09-30T18:50:41.111Z","type":"message"}
{"nick":"tjfontaine","message":"yes","date":"2013-09-30T18:50:58.922Z","type":"message"}
{"nick":"trevnorris","message":"finally!!!!! great. now at least I've seen the error :P","date":"2013-09-30T18:51:27.963Z","type":"message"}
{"nick":"tjfontaine","message":"I'm not doing anything atm","date":"2013-09-30T18:51:30.821Z","type":"message"}
{"nick":"groundwater","date":"2013-09-30T18:51:45.056Z","type":"join"}
{"nick":"trevnorris","message":"ok, well i never realized that error was literally the only output.","date":"2013-09-30T18:53:37.106Z","type":"message"}
{"nick":"tjfontaine","message":":)","date":"2013-09-30T18:53:43.609Z","type":"message"}
{"nick":"trevnorris","message":"i thought it happened after a module was retrieved or something","date":"2013-09-30T18:53:50.354Z","type":"message"}
{"nick":"tjfontaine","message":"and for people with no familiarity with the npm spider base it's a bitch","date":"2013-09-30T18:54:15.420Z","type":"message"}
{"nick":"trevnorris","message":"that stupid .lock file.","date":"2013-09-30T18:55:26.781Z","type":"message"}
{"nick":"trevnorris","message":"hate that thing","date":"2013-09-30T18:55:28.746Z","type":"message"}
{"nick":"tjfontaine","message":"so what you'll experience is you'll see npm appear to hang for a bit on a module, and then boom it dies","date":"2013-09-30T18:56:03.067Z","type":"message"}
{"nick":"tjfontaine","message":"and then you see it's https, and you're like, yup ... that's what fedor fixed","date":"2013-09-30T18:56:35.631Z","type":"message"}
{"nick":"tjfontaine","message":"but, I need to convince myself further and that I'm not just kicking the issue down the curb for a bit","date":"2013-09-30T18:56:55.649Z","type":"message"}
{"nick":"tjfontaine","message":"if I can","date":"2013-09-30T18:57:18.647Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: have you run it with --trace_all?","date":"2013-09-30T18:59:01.770Z","type":"message"}
{"nick":"tjfontaine","message":"no, but have fun sifting through that","date":"2013-09-30T18:59:15.473Z","type":"message"}
{"nick":"trevnorris","message":":)","date":"2013-09-30T18:59:21.997Z","type":"message"}
{"nick":"tjfontaine","message":"I have been using various NODE_DEBUG's and then adding more","date":"2013-09-30T18:59:27.193Z","type":"message"}
{"nick":"wavded","date":"2013-09-30T18:59:39.493Z","type":"join"}
{"nick":"tjfontaine","message":"up next is to debug around the tls bug that fedor fixed, to prove it to me that way","date":"2013-09-30T18:59:43.507Z","type":"message"}
{"nick":"tjfontaine","message":"but I was hoping to see a timer fire","date":"2013-09-30T18:59:54.163Z","type":"message"}
{"nick":"hueniverse","message":"I can't reproduce the npm error on head or 10.19","date":"2013-09-30T19:01:43.593Z","type":"message"}
{"nick":"hueniverse","message":"and don't have time to keep playing with it - sorry","date":"2013-09-30T19:01:55.952Z","type":"message"}
{"nick":"tjfontaine","message":"hueniverse: right, frustrating","date":"2013-09-30T19:01:57.773Z","type":"message"}
{"nick":"tjfontaine","message":"hueniverse: gbtw :P","date":"2013-09-30T19:02:03.599Z","type":"message"}
{"nick":"tjfontaine","message":"hueniverse: appreciate you spending any time on it","date":"2013-09-30T19:02:21.686Z","type":"message"}
{"nick":"hueniverse","message":"np","date":"2013-09-30T19:02:29.813Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so, what's the \"fix\"","date":"2013-09-30T19:03:32.302Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: https://github.com/joyent/node/commit/671b5be6e9d74fec9e94b1ab88d2b2648c540078","date":"2013-09-30T19:03:49.073Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-master-windows\u0002: #379 \u00037UNSTABLE\u000f windows-x64 (23/643) windows-ia32 (20/643) http://jenkins.nodejs.org/job/nodejs-master-windows/379/","date":"2013-09-30T19:03:59.773Z","type":"message"}
{"nick":"tjfontaine","message":"brb lunch","date":"2013-09-30T19:04:10.297Z","type":"message"}
{"nick":"groundwater","reason":"Quit: groundwater","date":"2013-09-30T19:05:54.129Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-09-30T19:14:04.254Z","type":"nick"}
{"nick":"bnoordhuis","date":"2013-09-30T19:14:21.268Z","type":"join"}
{"nick":"bnoordhuis","message":"hello people","date":"2013-09-30T19:16:10.035Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: hello dude","date":"2013-09-30T19:16:53.280Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: catch my last msg just before you popped off?","date":"2013-09-30T19:17:09.194Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: no. what was it?","date":"2013-09-30T19:21:13.520Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: for domains to be removed from the c++ code we'll need the c++ class instantiated at the same time as their event emitter js counterparts. you said that was fine, but","date":"2013-09-30T19:22:14.876Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: since net.createServer allows a tcp or pipe, I can't tell which to call when the server is created in js","date":"2013-09-30T19:22:39.126Z","type":"message"}
{"nick":"trevnorris","message":"hence why it needs to wait until .listen.","date":"2013-09-30T19:22:49.119Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: so basically, i'm at a bit of an architecture hard wall and was wondering if you had any feedback to getting around this.","date":"2013-09-30T19:23:22.888Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: not really, sorry :-/","date":"2013-09-30T19:24:15.063Z","type":"message"}
{"nick":"trevnorris","message":"only thing I've been able to come up with is create a TCPPipeWrap and just don't call uv_{tcp,pipe}_init until .listen is called.","date":"2013-09-30T19:24:57.931Z","type":"message"}
{"nick":"trevnorris","message":"but at least the c++ class will have been instantiated.","date":"2013-09-30T19:25:06.037Z","type":"message"}
{"nick":"trevnorris","message":"feels icky though","date":"2013-09-30T19:25:13.340Z","type":"message"}
{"nick":"bnoordhuis","message":"indeed","date":"2013-09-30T19:25:18.247Z","type":"message"}
{"nick":"EhevuTov","date":"2013-09-30T19:26:09.475Z","type":"join"}
{"nick":"bradleymeck","date":"2013-09-30T19:26:10.964Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: thanks for all your help thus far. i'm interested to see what you say about https://github.com/joyent/node/pull/6011","date":"2013-09-30T19:27:14.557Z","type":"message"}
{"nick":"trevnorris","message":"as it's all part of my grand scheme in https://github.com/joyent/node/issues/6252","date":"2013-09-30T19:27:14.777Z","type":"message"}
{"nick":"EhevuTov","reason":"Client Quit","date":"2013-09-30T19:29:02.889Z","type":"quit"}
{"nick":"bnoordhuis","message":"let me take a peek","date":"2013-09-30T19:30:48.764Z","type":"message"}
{"nick":"bnoordhuis","message":"1817 additions, 514 deletions!","date":"2013-09-30T19:31:06.017Z","type":"message"}
{"nick":"trevnorris","message":":)","date":"2013-09-30T19:31:11.356Z","type":"message"}
{"nick":"trevnorris","message":"it's taken me 2 months to do that","date":"2013-09-30T19:31:18.269Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-09-30T19:36:59.031Z","type":"quit"}
{"nick":"wavded","reason":"Quit: Hasta la pasta","date":"2013-09-30T19:37:37.105Z","type":"quit"}
{"nick":"hz","reason":"Read error: Connection reset by peer","date":"2013-09-30T19:52:09.567Z","type":"quit"}
{"nick":"hz","date":"2013-09-30T19:52:37.997Z","type":"join"}
{"nick":"icarot2","date":"2013-09-30T19:52:55.045Z","type":"join"}
{"nick":"trevnorris","message":"othiym23: I guess there is one more option. inject async code into places like .listen() that check if the ee.domain exists, and if it does then load them into the wrap.","date":"2013-09-30T19:54:00.219Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: it's the least icky of the solutions I've come up with.","date":"2013-09-30T19:54:24.978Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-09-30T19:56:00.640Z","type":"nick"}
{"nick":"julianduque","date":"2013-09-30T19:59:18.404Z","type":"join"}
{"nick":"tjfontaine","message":"bnoordhuis: no reason to do another libuv release, right since there's only the revert","date":"2013-09-30T20:00:18.496Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: correct","date":"2013-09-30T20:02:01.554Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: were you ever hitting the npm cb error?","date":"2013-09-30T20:02:18.425Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: no. but then i don't install that many modules","date":"2013-09-30T20:02:47.200Z","type":"message"}
{"nick":"bnoordhuis","message":"only hoarders","date":"2013-09-30T20:02:50.882Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-09-30T20:02:57.820Z","type":"message"}
{"nick":"dominictarr","date":"2013-09-30T20:04:09.398Z","type":"join"}
{"nick":"wolfeidau","message":"tjfontaine: Did you need someone that fails with the \"npm ERR! cb() never called!\" ?","date":"2013-09-30T20:04:14.865Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: did a partial review, not too many comments so far","date":"2013-09-30T20:04:26.192Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: that's good to know. :)","date":"2013-09-30T20:04:40.832Z","type":"message"}
{"nick":"icarot2","reason":"\"Leaving\"","date":"2013-09-30T20:08:17.361Z","type":"part"}
{"nick":"tjfontaine","message":"wolfeidau: if you are still experiencing it yes, please test v0.10 HEAD and verify that it's gone there","date":"2013-09-30T20:09:23.124Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: yeah pretty much every time i run npm cache clean and npm install on a code base i get the error","date":"2013-09-30T20:09:56.102Z","type":"message"}
{"nick":"tjfontaine","message":"wolfeidau: ok if you try v0.10 HEAD, please let me know how that works out :)","date":"2013-09-30T20:12:18.926Z","type":"message"}
{"nick":"wolfeidau","message":"yeah np ","date":"2013-09-30T20:12:37.610Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-09-30T20:12:59.141Z","type":"nick"}
{"nick":"trevnorris","message":"bnoordhuis: so you'd be cool if I did something similar with \"struct pbkdf2_req\" in node_crypto.cc like RandomBytesRequest?","date":"2013-09-30T20:13:19.673Z","type":"message"}
{"nick":"vptr","reason":"Ping timeout: 260 seconds","date":"2013-09-30T20:20:03.907Z","type":"quit"}
{"nick":"bnoordhuis","message":"trevnorris: yep","date":"2013-09-30T20:28:50.919Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: coolio. thanks :)","date":"2013-09-30T20:29:05.179Z","type":"message"}
{"nick":"CoverSlide","date":"2013-09-30T20:33:57.390Z","type":"join"}
{"nick":"CoverSlide","reason":"Client Quit","date":"2013-09-30T20:34:53.843Z","type":"quit"}
{"nick":"CoverSlide","date":"2013-09-30T20:35:01.970Z","type":"join"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-09-30T20:36:52.616Z","type":"nick"}
{"nick":"vptr","date":"2013-09-30T20:45:55.740Z","type":"join"}
{"nick":"wolfeidau","message":"tjfontaine: I have verified that v0.10.20-pre fixes the problem for me, I also isolated a package.json that reproduces the issue every time on my machine https://gist.github.com/wolfeidau/6769988","date":"2013-09-30T20:46:06.311Z","type":"message"}
{"nick":"wolfeidau","message":"simply running npm cache clean && rm -r node_modules && npm install","date":"2013-09-30T20:46:29.700Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: um. i'm pretty sure there's a memory leak in crypto.randomBytes. I just realized that data_ isn't being free'd in the destructor. it's happening in v0.10 as well.","date":"2013-09-30T20:50:40.268Z","type":"message"}
{"nick":"tjfontaine","message":"wolfeidau: thanks greatly","date":"2013-09-30T20:51:42.637Z","type":"message"}
{"nick":"trevnorris","message":"anyone else mind taking a quick look at this? https://gist.github.com/trevnorris/6770078","date":"2013-09-30T20:51:48.418Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: np I think it is best if also have a failing test case :)","date":"2013-09-30T20:52:19.044Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033tjfontaine\u000f created branch v0.10.20-release - http://git.io/qiLT3A","date":"2013-09-30T20:52:55.816Z","type":"message"}
{"nick":"tjfontaine","message":"wolfeidau: heh, I have a test I was using as well","date":"2013-09-30T20:53:09.512Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: wait. might have a memory leak fix that needs to go in there. mind taking a quick look at the gist?","date":"2013-09-30T20:53:18.930Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: ok, moment","date":"2013-09-30T20:53:35.325Z","type":"message"}
{"nick":"tjfontaine","message":"while [ $RET -eq 0 ]; do","date":"2013-09-30T20:53:35.913Z","type":"message"}
{"nick":"tjfontaine","message":"  rm -rf ~/.npm node_modules","date":"2013-09-30T20:53:36.132Z","type":"message"}
{"nick":"tjfontaine","message":"  npm install --nodedir=$HOME/node jsontool workflow vasync restify","date":"2013-09-30T20:53:36.133Z","type":"message"}
{"nick":"tjfontaine","message":"  RET=$?","date":"2013-09-30T20:53:36.133Z","type":"message"}
{"nick":"tjfontaine","message":"done","date":"2013-09-30T20:53:38.365Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: haha nice","date":"2013-09-30T20:53:57.192Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: lots of slow buffers being created, in a tight loop, what are we expeting to see here?","date":"2013-09-30T20:58:54.493Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: um... wait. on sec. maybe i'm just nuts.","date":"2013-09-30T21:01:21.621Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-09-30T21:01:54.349Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: ok, refresh https://gist.github.com/trevnorris/6770078","date":"2013-09-30T21:02:43.329Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: you'll see max was 2.5 GB. v8 gc should be cleaning up those slow buffers regardless","date":"2013-09-30T21:03:19.407Z","type":"message"}
{"nick":"trevnorris","message":"and it shouldn't be allowed to grow that much","date":"2013-09-30T21:03:24.911Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: just tried the same in v0.10. same memory result","date":"2013-09-30T21:04:03.624Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: just re-ran the test explicitely calling gc(), no change in memory usage.","date":"2013-09-30T21:07:41.657Z","type":"message"}
{"nick":"austo","date":"2013-09-30T21:07:47.168Z","type":"join"}
{"nick":"tjfontaine","message":"trevnorris: ok, well","date":"2013-09-30T21:09:50.669Z","type":"message"}
{"nick":"trevnorris","message":"and i mean, I called gc() on every 1000 loop, not just once.","date":"2013-09-30T21:10:29.442Z","type":"message"}
{"nick":"tjfontaine","message":"ya, looking","date":"2013-09-30T21:11:02.375Z","type":"message"}
{"nick":"MI6","message":"\u0002node-review\u0002: #89 \u00037UNSTABLE\u000f windows-ia32 (9/600) centos-x64 (1/600) centos-ia32 (2/600) windows-x64 (8/600) osx-x64 (1/600) smartos-x64 (2/600) http://jenkins.nodejs.org/job/node-review/89/","date":"2013-09-30T21:14:14.283Z","type":"message"}
{"nick":"groundwater","date":"2013-09-30T21:16:26.884Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: and fwiw I used my buffer-dispose module to manually dispose all the returned slow buffers. still no change in memory usage.","date":"2013-09-30T21:16:33.188Z","type":"message"}
{"nick":"tjfontaine","message":"ok, well","date":"2013-09-30T21:17:02.918Z","type":"message"}
{"nick":"tjfontaine","message":"the heap is growing","date":"2013-09-30T21:17:58.834Z","type":"message"}
{"nick":"tjfontaine","message":"so it's probably a memory leak in node_crypto certainly","date":"2013-09-30T21:18:10.933Z","type":"message"}
{"nick":"tjfontaine","message":"it's not an anon section, like mmap would be doing for the v8 heap","date":"2013-09-30T21:18:27.168Z","type":"message"}
{"nick":"tjfontaine","message":"but it's being referenced/held in a way that's not a traditional ::findleak","date":"2013-09-30T21:18:46.614Z","type":"message"}
{"nick":"wwicks","reason":"Quit: I'm sure we'll meet again","date":"2013-09-30T21:24:48.951Z","type":"quit"}
{"nick":"trevnorris","message":"ok. valgrind is picking up something is lost from crypto::RandomBytes","date":"2013-09-30T21:27:32.960Z","type":"message"}
{"nick":"tjfontaine","message":"yes, it's almost certainly data_ leaking","date":"2013-09-30T21:28:15.150Z","type":"message"}
{"nick":"dominictarr","reason":"Ping timeout: 264 seconds","date":"2013-09-30T21:28:18.345Z","type":"quit"}
{"nick":"tjfontaine","message":"I just put a check in the destrcutor","date":"2013-09-30T21:28:22.971Z","type":"message"}
{"nick":"tjfontaine","message":"but it wasn't enough","date":"2013-09-30T21:28:26.095Z","type":"message"}
{"nick":"tjfontaine","message":"hm, the destructor isn't running","date":"2013-09-30T21:30:53.874Z","type":"message"}
{"nick":"trevnorris","message":"the destructor should be run from Buffer::New() (well, on the v0.10 branch)","date":"2013-09-30T21:31:19.033Z","type":"message"}
{"nick":"trevnorris","message":"on v0.11 it uses Buffer::Use() and the memory is immediately free'd","date":"2013-09-30T21:31:33.561Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-09-30T21:31:42.873Z","type":"quit"}
{"nick":"tjfontaine","message":"no, not that one, the RandomBytesRequest destructor isn't running","date":"2013-09-30T21:31:49.404Z","type":"message"}
{"nick":"tjfontaine","message":"the one that should fire in RandomBytesAfter or whatever","date":"2013-09-30T21:32:13.168Z","type":"message"}
{"nick":"trevnorris","message":"well, RandomBytesFree is passed to Buffer::New(), which only deletes \"data\" but can you use a destructor on a struct in c++","date":"2013-09-30T21:33:36.303Z","type":"message"}
{"nick":"trevnorris","message":"thought they were only useful in classes","date":"2013-09-30T21:33:44.637Z","type":"message"}
{"nick":"tjfontaine","message":"classes are just structs","date":"2013-09-30T21:33:55.407Z","type":"message"}
{"nick":"trevnorris","message":"eh, ok.","date":"2013-09-30T21:34:02.212Z","type":"message"}
{"nick":"dominictarr","date":"2013-09-30T21:34:17.170Z","type":"join"}
{"nick":"tjfontaine","message":"I'm not seeing my fprintf before the delete of req anyyway","date":"2013-09-30T21:34:27.116Z","type":"message"}
{"nick":"trevnorris","message":"so \"del req;\" should run the destructor.","date":"2013-09-30T21:34:34.327Z","type":"message"}
{"nick":"tjfontaine","message":"I'm not seeing anything hit the noop callback either, are we even using the api right here? :)","date":"2013-09-30T21:34:41.128Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: http://nodejs.org/api/crypto.html#crypto_crypto_randombytes_size_callback","date":"2013-09-30T21:35:14.829Z","type":"message"}
{"nick":"tjfontaine","message":"I'm think we're just filling up the threadpool honestly","date":"2013-09-30T21:35:22.443Z","type":"message"}
{"nick":"trevnorris","message":"ah yeah. it does call uv_queue_work for every call.","date":"2013-09-30T21:35:48.952Z","type":"message"}
{"nick":"tjfontaine","message":"ya, we're just hammering the threadpool, cranking it up to UV_THREADPOOL_SIZE 128 and then iter of 1e3 things actually progress","date":"2013-09-30T21:37:09.277Z","type":"message"}
{"nick":"tjfontaine","message":"this looks like notabug to me :)","date":"2013-09-30T21:37:21.350Z","type":"message"}
{"nick":"tjfontaine","message":"if you needed to generate this much random data you'd want to use a pipeline of sorts","date":"2013-09-30T21:37:45.041Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: thoughts? may I continue the 0.10.20 release?","date":"2013-09-30T21:38:19.485Z","type":"message"}
{"nick":"groundwater","reason":"Ping timeout: 245 seconds","date":"2013-09-30T21:41:16.680Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: sec. think I might have a test","date":"2013-09-30T21:41:22.189Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: check this again: https://gist.github.com/trevnorris/6770078","date":"2013-09-30T21:43:18.746Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: the total mem used is dependent on the size of the size you request.","date":"2013-09-30T21:43:35.973Z","type":"message"}
{"nick":"trevnorris","message":"i'd think if it was the thread pool it would stay constant","date":"2013-09-30T21:43:44.189Z","type":"message"}
{"nick":"tjfontaine","message":"no, because the memory is allocated before the work starts","date":"2013-09-30T21:43:59.188Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: you see what I'm referring to?","date":"2013-09-30T21:44:48.515Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: pretty sure I do. just going to write a line of code to confirm it.","date":"2013-09-30T21:45:02.915Z","type":"message"}
{"nick":"tjfontaine","message":"need to move `new char[size]` to RandomBytesWork if that's how you want it to work","date":"2013-09-30T21:45:28.557Z","type":"message"}
{"nick":"trevnorris","message":"sorry, just waiting for a script to run.","date":"2013-09-30T21:46:33.757Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so why is this so large? https://gist.github.com/trevnorris/6770078","date":"2013-09-30T21:47:35.909Z","type":"message"}
{"nick":"trevnorris","message":"and again the final size varies fairly linearly w/ the size of the random bytes request.","date":"2013-09-30T21:48:21.508Z","type":"message"}
{"nick":"groundwater","date":"2013-09-30T21:51:05.018Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: was that test case to your point? saw what you were saying about all the allocations up front (which also seems not so good), but waiting until each callback is called should've alleviated some of that.","date":"2013-09-30T21:51:13.324Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: process.memoryUsage() seems fairly consistent","date":"2013-09-30T21:51:40.637Z","type":"message"}
{"nick":"tjfontaine","message":"nothing particularly scary","date":"2013-09-30T21:51:48.740Z","type":"message"}
{"nick":"tjfontaine","message":"comment added to your gist","date":"2013-09-30T21:52:29.586Z","type":"message"}
{"nick":"tjfontaine","message":"there's some sway there, but doesn't feel like a full on leak","date":"2013-09-30T21:52:55.463Z","type":"message"}
{"nick":"rendar","date":"2013-09-30T21:53:04.608Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: what's UMEM_DEBUG?","date":"2013-09-30T21:55:05.832Z","type":"message"}
{"nick":"tjfontaine","message":"a flag for me to turn on and see if there's C/C++ memory being leaked","date":"2013-09-30T21:55:35.335Z","type":"message"}
{"nick":"trevnorris","message":"work on linux?","date":"2013-09-30T21:55:50.534Z","type":"message"}
{"nick":"tjfontaine","message":"if you build libumem on linux and LD_PRELOAD it","date":"2013-09-30T21:56:14.333Z","type":"message"}
{"nick":"tjfontaine","message":"well at least if you have a debugger that can inspect the information from a core","date":"2013-09-30T21:56:38.996Z","type":"message"}
{"nick":"trevnorris","message":"cool","date":"2013-09-30T21:56:52.807Z","type":"message"}
{"nick":"tjfontaine","message":"it's like getting valgrind without all the awful overhead","date":"2013-09-30T21:56:55.337Z","type":"message"}
{"nick":"tjfontaine","message":"it's part of my blog post","date":"2013-09-30T21:57:00.371Z","type":"message"}
{"nick":"trevnorris","message":"haha, awesome.","date":"2013-09-30T21:57:01.308Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: cool. thanks. was able to reproduce those conditions.","date":"2013-09-30T22:00:13.203Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: though, you think we should delay the allocation of memory until it's actually needed?","date":"2013-09-30T22:00:31.114Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: anyways, that's for later. no issues w/ the next release :)","date":"2013-09-30T22:00:57.486Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: so, I changed it gc and gcore every 1000 iterations, and then it went 11 times, over that time only 1mb of actual growth happened according to pmap","date":"2013-09-30T22:01:11.703Z","type":"message"}
{"nick":"tjfontaine","message":"- total     42364K","date":"2013-09-30T22:01:22.461Z","type":"message"}
{"nick":"tjfontaine","message":"+ total     43460K","date":"2013-09-30T22:01:23.008Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: yeah. i'm not disagreeing with you. was just able to reproduce that it's not \"leaking\"","date":"2013-09-30T22:01:58.445Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: right I already kicked the builds off with the belief that there wasn't anything actionable for this release anyway","date":"2013-09-30T22:01:59.373Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: delaying the allocs to when they're actually needed seems like a reasonable strategy in this case, but wanna make sure there's not some hole of multi-threaded allocs we fall into","date":"2013-09-30T22:02:45.720Z","type":"message"}
{"nick":"trevnorris","message":"yeah... i'm not going there. very happy in my single-threaded world. thank you! ;)","date":"2013-09-30T22:03:18.396Z","type":"message"}
{"nick":"dominictarr","reason":"Ping timeout: 245 seconds","date":"2013-09-30T22:03:28.165Z","type":"quit"}
{"nick":"tjfontaine","message":":)","date":"2013-09-30T22:03:51.178Z","type":"message"}
{"nick":"dominictarr","date":"2013-09-30T22:04:44.296Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033tjfontaine\u000f created tag v0.10.20 - http://git.io/AzsTXA","date":"2013-09-30T22:05:42.429Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Timothy J Fontaine\u000f \u00037v0.10\u000f * \u0002a63079f\u0002 : blog: Post for v0.10.20 (+3 more commits) - http://git.io/HK-vGA","date":"2013-09-30T22:06:19.440Z","type":"message"}
{"nick":"AvianFlu","reason":"Ping timeout: 260 seconds","date":"2013-09-30T22:08:47.912Z","type":"quit"}
{"nick":"vptr","reason":"Ping timeout: 248 seconds","date":"2013-09-30T22:10:03.863Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-09-30T22:15:23.408Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #1510 \u00037UNSTABLE\u000f linux-ia32 (3/600) linux-x64 (2/600) smartos-x64 (1/600) osx-x64 (1/600) http://jenkins.nodejs.org/job/nodejs-v0.10/1510/","date":"2013-09-30T22:18:16.883Z","type":"message"}
{"nick":"Kakera","reason":"Ping timeout: 248 seconds","date":"2013-09-30T22:23:55.866Z","type":"quit"}
{"nick":"MI6","message":"\u0002node-review\u0002: #90 \u00037UNSTABLE\u000f windows-ia32 (8/600) osx-ia32 (1/600) centos-x64 (2/600) centos-ia32 (1/600) windows-x64 (8/600) smartos-x64 (2/600) http://jenkins.nodejs.org/job/node-review/90/","date":"2013-09-30T22:29:07.218Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #236 \u00037UNSTABLE\u000f windows-ia32 (9/600) windows-x64 (6/600) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/236/","date":"2013-09-30T22:29:16.274Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-09-30T22:38:54.742Z","type":"quit"}
{"nick":"othiym23","message":"good job, tjfontaine!","date":"2013-09-30T22:39:23.818Z","type":"message"}
{"nick":"othiym23","message":"you have solved a major PITA for many people!","date":"2013-09-30T22:39:42.873Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: well, indutny did, without necessarily realizing it :)","date":"2013-09-30T22:39:53.818Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: I wish I had isaacs here to fix npm itself :/","date":"2013-09-30T22:40:41.318Z","type":"message"}
{"nick":"othiym23","message":"just gotta shelter in place","date":"2013-09-30T22:40:56.309Z","type":"message"}
{"nick":"othiym23","message":"when is isaacs back?","date":"2013-09-30T22:41:01.887Z","type":"message"}
{"nick":"tjfontaine","message":"he travels back this week, his work availability is monday","date":"2013-09-30T22:41:12.431Z","type":"message"}
{"nick":"tjfontaine","message":"I just wanted to have a better root cause for npm itself, but I couldn't let another day go by without releasing a version of node that was satisfactory","date":"2013-09-30T22:42:46.682Z","type":"message"}
{"nick":"trevnorris","message":"i might have just gone a tiny bit ape shit on someone","date":"2013-09-30T22:42:50.906Z","type":"message"}
{"nick":"tjfontaine","message":"watching @davglass do his live coding at openhack, he types `npm init` and I see 0.10.19 and I flip the fuck out, and grab coworkers arm while he `npm install`s","date":"2013-09-30T22:43:29.428Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: oh that thread","date":"2013-09-30T22:43:46.870Z","type":"message"}
{"nick":"trevnorris","message":"hahaha, you get excited easily. or are there seriously that many people that far behind?","date":"2013-09-30T22:44:09.053Z","type":"message"}
{"nick":"trevnorris","message":"i don't keep track of these things.","date":"2013-09-30T22:44:17.002Z","type":"message"}
{"nick":"trevnorris","message":"and yeah. _that_ thread. :P","date":"2013-09-30T22:44:30.359Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: he was telling people to go download and install node to use for this open hack event, and all I could see where 500 people `npm install`ing and getting that ridiculous error","date":"2013-09-30T22:45:04.202Z","type":"message"}
{"nick":"tjfontaine","message":"so while he was busy with his live coding experiment, I opened up my laptop and rolled the website back to 0.10.18 as the latest","date":"2013-09-30T22:45:26.172Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: ahhh. got it. you saw 0.10.19 and saw errors flying across everyone's screen.","date":"2013-09-30T22:45:46.828Z","type":"message"}
{"nick":"trevnorris","message":"wow, quick on your keyboard. nice thinking though","date":"2013-09-30T22:46:14.076Z","type":"message"}
{"nick":"tjfontaine","message":"ya, it didn't happen, at least so far as I know, but I was worried it woul dhappen","date":"2013-09-30T22:46:15.587Z","type":"message"}
{"nick":"trevnorris","action":"salutes tjfontaine for his good efforts at keeping the community happy","date":"2013-09-30T22:46:30.511Z","type":"action"}
{"nick":"tjfontaine","message":"now I have to investigate something someone said about zlib and npm installs on master :)","date":"2013-09-30T22:47:02.939Z","type":"message"}
{"nick":"trevnorris","message":"hehehe ;)","date":"2013-09-30T22:47:21.172Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: i'm having two problems. on is that ZCtx just aborts, the other is that i get more than a few invalid hashs","date":"2013-09-30T22:48:09.035Z","type":"message"}
{"nick":"tjfontaine","message":"well that's likely an off-by-one in crypto streams","date":"2013-09-30T22:48:25.807Z","type":"message"}
{"nick":"tjfontaine","message":"do you have a package that it always happens for?","date":"2013-09-30T22:49:05.243Z","type":"message"}
{"nick":"trevnorris","message":"was just trying that out now. let me get one for you","date":"2013-09-30T22:49:24.903Z","type":"message"}
{"nick":"EhevuTov","date":"2013-09-30T22:51:42.499Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: seems to happen when i am installing a bunch of things at once. so here's what I do:","date":"2013-09-30T22:52:22.963Z","type":"message"}
{"nick":"trevnorris","message":"rm -rf node_modules ~/.npm/; /path/to/build/node $(which npm) --dev --nodedir=/path/to/build/ install newrelic","date":"2013-09-30T22:52:58.048Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-09-30T22:53:08.982Z","type":"message"}
{"nick":"trevnorris","message":"that'll usually cause the following to happen somewhere in the process:","date":"2013-09-30T22:53:17.262Z","type":"message"}
{"nick":"trevnorris","message":"../src/node_zlib.cc:101: void node::ZCtx::Close(): Assertion `!write_in_progress_ && \"write in progress\"' failed.","date":"2013-09-30T22:53:23.419Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: fyi, ben did a partial review today. so far he likes how I did stuff, so going to fix pbkdf2. that's the last place w/o visibility","date":"2013-09-30T22:56:09.941Z","type":"message"}
{"nick":"othiym23","message":"oh Jorge","date":"2013-09-30T22:56:26.561Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-09-30T22:56:35.743Z","type":"quit"}
{"nick":"othiym23","message":"trevnorris: saw the review, glad to see it's been so painless so far","date":"2013-09-30T22:56:38.099Z","type":"message"}
{"nick":"trevnorris","message":"yeah. it was only a partial review. he's probably just sleep deprived from the new baby. ;P","date":"2013-09-30T22:57:02.354Z","type":"message"}
{"nick":"othiym23","message":"also it's Monday","date":"2013-09-30T22:57:13.015Z","type":"message"}
{"nick":"trevnorris","message":"yeah, that too.","date":"2013-09-30T22:57:18.850Z","type":"message"}
{"nick":"tjfontaine","message":"is it monday?","date":"2013-09-30T22:57:31.056Z","type":"message"}
{"nick":"tjfontaine","message":"looks like someone has a case of the mooooondays","date":"2013-09-30T22:57:37.705Z","type":"message"}
{"nick":"othiym23","message":"I seem to have gotten in this pattern of waking up exhausted on Saturday after having worked like an asshole all week, and then waking up exhausted on Monday after having worked like an asshole all weekend","date":"2013-09-30T22:57:44.499Z","type":"message"}
{"nick":"trevnorris","message":"heh","date":"2013-09-30T22:57:57.711Z","type":"message"}
{"nick":"tjfontaine","message":"https://www.youtube.com/watch?v=nREz7wuafho","date":"2013-09-30T22:58:05.792Z","type":"message"}
{"nick":"othiym23","message":"but I have shit in beta now, so progress is inching along","date":"2013-09-30T22:58:07.157Z","type":"message"}
{"nick":"tjfontaine","message":"I got my email invite a bit ago, so time for me to play I guess :)","date":"2013-09-30T22:58:33.527Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: if you spot obvious stupidity, pleeeeeeeease let me know","date":"2013-09-30T22:58:54.432Z","type":"message"}
{"nick":"tjfontaine","message":"nod","date":"2013-09-30T22:58:57.657Z","type":"message"}
{"nick":"trevnorris","message":"beta?","date":"2013-09-30T22:59:10.966Z","type":"message"}
{"nick":"othiym23","message":"of New Relic for Node","date":"2013-09-30T22:59:41.097Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok.","date":"2013-09-30T23:00:01.600Z","type":"message"}
{"nick":"othiym23","message":"it's no different than what we have on npm right now, although I've got a version with a way better MongoDB tracer and some better EE tracker probably this evening","date":"2013-09-30T23:00:18.362Z","type":"message"}
{"nick":"trevnorris","message":"does it work on master?","date":"2013-09-30T23:00:33.525Z","type":"message"}
{"nick":"othiym23","message":"let me put this carefully: all the tests (except for a couple Restify-related ones) pass","date":"2013-09-30T23:00:59.139Z","type":"message"}
{"nick":"trevnorris","message":"coolio.","date":"2013-09-30T23:01:10.705Z","type":"message"}
{"nick":"othiym23","message":"I have not actually run any apps on master with it yet","date":"2013-09-30T23:01:16.670Z","type":"message"}
{"nick":"loladiro","date":"2013-09-30T23:01:27.383Z","type":"join"}
{"nick":"trevnorris","message":"heh, probably won't work. :P","date":"2013-09-30T23:01:29.294Z","type":"message"}
{"nick":"othiym23","message":"I actually don't know why it wouldn't -- for once, domains hasn't totally changed between major versions","date":"2013-09-30T23:03:10.439Z","type":"message"}
{"nick":"trevnorris","message":"i mean, the modules you're trying to run it against.","date":"2013-09-30T23:03:27.804Z","type":"message"}
{"nick":"othiym23","message":"I haven't actually investigated why Restify fails, but I'm cautiously optimistic that the problem is mcavage's and not mine","date":"2013-09-30T23:04:22.546Z","type":"message"}
{"nick":"tjfontaine","message":"the way trevor talks you'd think master was utterly broken :)","date":"2013-09-30T23:04:30.614Z","type":"message"}
{"nick":"trevnorris","message":"hah. well, just trying not to be too optimistic. :)","date":"2013-09-30T23:04:58.864Z","type":"message"}
{"nick":"trevnorris","message":"but possibly it's coming across as pessimism.","date":"2013-09-30T23:05:15.098Z","type":"message"}
{"nick":"AvianFlu","date":"2013-09-30T23:05:45.924Z","type":"join"}
{"nick":"othiym23","message":"after what a PITA it was getting my tests to pass on 0.10 (there's a whooooooole lot of them at this point), I was delighted it was so easy to get the tests running on #6011 / master","date":"2013-09-30T23:06:57.359Z","type":"message"}
{"nick":"trevnorris","message":"but hey. when ben told me he liked how I converted the RandomBytesRequest struct to a class, and didn't have a single correction in my api implementation. first thing I thought was","date":"2013-09-30T23:07:16.639Z","type":"message"}
{"nick":"trevnorris","message":"man, he must be high or something.","date":"2013-09-30T23:07:16.863Z","type":"message"}
{"nick":"tjfontaine","message":"npm ERR! Error: shasum check failed for /root/tmp/npm-73569-KsIN10dp/1380582415473-0.029555255779996514/tmp.tgz","date":"2013-09-30T23:07:23.085Z","type":"message"}
{"nick":"tjfontaine","message":"npm ERR! Expected: bae0026ef445580b582bffa7201068bf101691cb","date":"2013-09-30T23:07:26.051Z","type":"message"}
{"nick":"tjfontaine","message":"npm ERR! Actual:   fd28e6c5475d60969fc991a927ab21655b9a0f57","date":"2013-09-30T23:07:28.579Z","type":"message"}
{"nick":"tjfontaine","message":"blah","date":"2013-09-30T23:07:31.022Z","type":"message"}
{"nick":"trevnorris","message":"yey!!! reproduced. sort of.","date":"2013-09-30T23:07:43.871Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: but seriously owe you something for staying up those two nights figuring out those two stupid bugs.","date":"2013-09-30T23:08:51.476Z","type":"message"}
{"nick":"tjfontaine","message":"hmm it seems in my test it's always failing on backoff module","date":"2013-09-30T23:10:18.664Z","type":"message"}
{"nick":"tjfontaine","message":"not quite the same as trevnorris's but","date":"2013-09-30T23:11:44.987Z","type":"message"}
{"nick":"tjfontaine","message":"Assertion failed: !write_in_progress_ && \"write in progress\", file ../src/node_zlib.cc, line 101, function Close","date":"2013-09-30T23:11:45.462Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: i get that one too. they'll both pop up. :)","date":"2013-09-30T23:12:05.536Z","type":"message"}
{"nick":"tjfontaine","message":"wish I had a better test case","date":"2013-09-30T23:12:21.463Z","type":"message"}
{"nick":"tjfontaine","message":"but I guess, MANTA TO THE RESCUE","date":"2013-09-30T23:12:28.161Z","type":"message"}
{"nick":"othiym23","message":"a manta instance for each permutation of all the modules on npm","date":"2013-09-30T23:12:47.153Z","type":"message"}
{"nick":"othiym23","message":"all the versions of all the modules on npm","date":"2013-09-30T23:12:56.617Z","type":"message"}
{"nick":"tjfontaine","message":"haha","date":"2013-09-30T23:12:59.249Z","type":"message"}
{"nick":"othiym23","message":"a good test for manta","date":"2013-09-30T23:13:01.464Z","type":"message"}
{"nick":"othiym23","message":"Joyent has a cluster made out of pure computronium sitting at the core of Jupiter, right?","date":"2013-09-30T23:13:28.479Z","type":"message"}
{"nick":"tjfontaine","message":"no-comment","date":"2013-09-30T23:13:37.892Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: /path/to/node $(which npm) --dev --nodedir=/path/to/ install backoff","date":"2013-09-30T23:13:46.723Z","type":"message"}
{"nick":"trevnorris","message":"gave me both errors.","date":"2013-09-30T23:13:46.939Z","type":"message"}
{"nick":"trevnorris","message":"two for the price of one!","date":"2013-09-30T23:13:51.192Z","type":"message"}
{"nick":"tjfontaine","message":"heh, I haven't been quite that lucky","date":"2013-09-30T23:14:06.444Z","type":"message"}
{"nick":"tjfontaine","message":"https://gist.github.com/tjfontaine/3ffea410e5edd3587d32","date":"2013-09-30T23:14:25.156Z","type":"message"}
{"nick":"tjfontaine","message":"didn't mean for that to be secret, btu whatever","date":"2013-09-30T23:14:31.209Z","type":"message"}
{"nick":"hz","date":"2013-09-30T23:14:40.749Z","type":"quit"}
{"nick":"tjfontaine","message":"shame on people for using anonymous closures","date":"2013-09-30T23:14:51.983Z","type":"message"}
{"nick":"trevnorris","message":"yeah. seriously.","date":"2013-09-30T23:15:03.971Z","type":"message"}
{"nick":"tjfontaine","message":"anyway this is in core","date":"2013-09-30T23:15:14.584Z","type":"message"}
{"nick":"tjfontaine","message":"because we're debug()'ing","date":"2013-09-30T23:15:21.498Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: here's mine: https://gist.github.com/trevnorris/6771701","date":"2013-09-30T23:16:32.036Z","type":"message"}
{"nick":"tjfontaine","message":"enoent stuff is weird","date":"2013-09-30T23:17:12.952Z","type":"message"}
{"nick":"trevnorris","message":"yeah. this issue is strangely complex.","date":"2013-09-30T23:17:29.664Z","type":"message"}
{"nick":"trevnorris","message":"i'll generate a core, don't know why I haven't before.","date":"2013-09-30T23:17:57.210Z","type":"message"}
{"nick":"tjfontaine","message":"anyway, at the least it seems like a zlib context is being reaped when the connection is still valid","date":"2013-09-30T23:18:15.681Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: hah, want all 7k lines of my npm debug log? :P","date":"2013-09-30T23:19:00.907Z","type":"message"}
{"nick":"tjfontaine","message":"no thank you :)","date":"2013-09-30T23:19:08.155Z","type":"message"}
{"nick":"groundwater","message":"tjfontaine: nice job on the cb() fix","date":"2013-09-30T23:19:13.578Z","type":"message"}
{"nick":"tjfontaine","message":"groundwater: lets hope it never shows up again :)","date":"2013-09-30T23:19:38.675Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: yeah. so can't figure out why this one is also popping up: error Error: ENOENT, lstat '/var/...","date":"2013-09-30T23:19:59.876Z","type":"message"}
{"nick":"trevnorris","message":"along with the core dump.","date":"2013-09-30T23:20:04.003Z","type":"message"}
{"nick":"tjfontaine","message":"the core dump I get","date":"2013-09-30T23:20:22.433Z","type":"message"}
{"nick":"c4milo","date":"2013-09-30T23:20:55.787Z","type":"join"}
{"nick":"tjfontaine","message":"it's not clear at the moment how it can be triggering a reap here though","date":"2013-09-30T23:22:06.687Z","type":"message"}
{"nick":"tjfontaine","message":"when write_in_progress_ is set true, we also clear weak, which should make the gc not try and reap the object","date":"2013-09-30T23:22:42.068Z","type":"message"}
{"nick":"trevnorris","message":"just ran npm with node_g, got: bit length overflow code 6 bits 6->7","date":"2013-09-30T23:22:55.184Z","type":"message"}
{"nick":"tjfontaine","message":"you're on 64bit?","date":"2013-09-30T23:23:08.437Z","type":"message"}
{"nick":"trevnorris","message":"yeah","date":"2013-09-30T23:23:11.583Z","type":"message"}
{"nick":"trevnorris","message":"I get that every time.","date":"2013-09-30T23:23:18.467Z","type":"message"}
{"nick":"tjfontaine","message":"curl https://github.com/v8/v8/commit/435d8aadc3f60fea2aaad23fae3f29e5aeccb907.patch | git am","date":"2013-09-30T23:23:39.896Z","type":"message"}
{"nick":"tjfontaine","message":"and try again","date":"2013-09-30T23:23:43.020Z","type":"message"}
{"nick":"tjfontaine","message":"well I guess really you'll need to .diff and -p1 anyway","date":"2013-09-30T23:24:37.302Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: that supposed to go on master?","date":"2013-09-30T23:24:37.526Z","type":"message"}
{"nick":"tjfontaine","message":"(cd deps/v8 && curl https://github.com/v8/v8/commit/435d8aadc3f60fea2aaad23fae3f29e5aeccb907.diff | patch -p1); make","date":"2013-09-30T23:25:18.639Z","type":"message"}
{"nick":"trevnorris","message":"ooh. cool.","date":"2013-09-30T23:25:41.873Z","type":"message"}
{"nick":"tjfontaine","message":"see also https://github.com/joyent/node/issues/6295","date":"2013-09-30T23:26:48.146Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: noop. still get the bit length overflow","date":"2013-09-30T23:27:15.003Z","type":"message"}
{"nick":"tjfontaine","message":"k","date":"2013-09-30T23:27:22.139Z","type":"message"}
{"nick":"tjfontaine","message":"the mechanism for npm logging is just bizarre","date":"2013-09-30T23:28:14.636Z","type":"message"}
{"nick":"tjfontaine","message":"npm ERR! ","date":"2013-09-30T23:28:47.939Z","type":"message"}
{"nick":"tjfontaine","message":"npm ERR! Additional logging details can be found in:","date":"2013-09-30T23:28:48.154Z","type":"message"}
{"nick":"tjfontaine","message":"npm ERR!     /root/tmp/npm-debug.log","date":"2013-09-30T23:28:48.374Z","type":"message"}
{"nick":"tjfontaine","message":"npm ERR! not ok code 0","date":"2013-09-30T23:28:48.594Z","type":"message"}
{"nick":"tjfontaine","message":"like, really, thanks.","date":"2013-09-30T23:28:52.026Z","type":"message"}
{"nick":"trevnorris","message":"haha, yeah.","date":"2013-09-30T23:29:00.244Z","type":"message"}
{"nick":"trevnorris","message":"well, the abort i'm getting must be a race condition. can't reproduce in debug mode of course. :P","date":"2013-09-30T23:29:30.058Z","type":"message"}
{"nick":"othiym23","message":"as someone who is constantly asking people to send me the gzipped logs from something and getting all kinds of random crap *but* the gzipped logs, I totally understand the cowpath isaacs was paving there","date":"2013-09-30T23:29:35.760Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: heh","date":"2013-09-30T23:29:38.456Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: yes, it's just the final \"not ok code 0\" that irks me","date":"2013-09-30T23:30:05.870Z","type":"message"}
{"nick":"trevnorris","message":"and, \"not ok code 0\" doesn't make a lot of sense to me.","date":"2013-09-30T23:30:14.785Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: along with not coallescing the failures","date":"2013-09-30T23:30:15.304Z","type":"message"}
{"nick":"tjfontaine","message":"but streaming and all that jazz","date":"2013-09-30T23:30:31.848Z","type":"message"}
{"nick":"othiym23","message":"my favorite is \"weird exit code x\" for whenever 'npm test' is running tap, which returns the number of failing test cases as the status code","date":"2013-09-30T23:30:50.253Z","type":"message"}
{"nick":"othiym23","message":"like, that's not even weird","date":"2013-09-30T23:30:53.131Z","type":"message"}
{"nick":"tjfontaine","message":"o0","date":"2013-09-30T23:30:59.160Z","type":"message"}
{"nick":"tjfontaine","message":"la la la","date":"2013-09-30T23:31:01.003Z","type":"message"}
{"nick":"tjfontaine","message":"I didn't just hear that","date":"2013-09-30T23:31:03.326Z","type":"message"}
{"nick":"trevnorris","message":"whoa","date":"2013-09-30T23:31:35.805Z","type":"message"}
{"nick":"trevnorris","message":"bit length overflow","date":"2013-09-30T23:31:53.661Z","type":"message"}
{"nick":"trevnorris","message":"code 12 bits 6->7","date":"2013-09-30T23:31:53.883Z","type":"message"}
{"nick":"trevnorris","message":"bit length overflow","date":"2013-09-30T23:31:53.883Z","type":"message"}
{"nick":"trevnorris","message":"code 5 bits 5->6","date":"2013-09-30T23:31:53.884Z","type":"message"}
{"nick":"trevnorris","message":"bit length overflow","date":"2013-09-30T23:31:53.884Z","type":"message"}
{"nick":"trevnorris","message":"code 12 bits 6->7","date":"2013-09-30T23:31:54.162Z","type":"message"}
{"nick":"trevnorris","message":"bit length overflow","date":"2013-09-30T23:31:56.200Z","type":"message"}
{"nick":"trevnorris","message":"code 4 bits 6->7","date":"2013-09-30T23:31:58.169Z","type":"message"}
{"nick":"trevnorris","message":"bit length overflow","date":"2013-09-30T23:32:00.170Z","type":"message"}
{"nick":"trevnorris","message":"code 13 bits 7->6","date":"2013-09-30T23:32:02.170Z","type":"message"}
{"nick":"trevnorris","message":"code 5 bits 5->6","date":"2013-09-30T23:32:04.171Z","type":"message"}
{"nick":"trevnorris","message":"and so on and so on.","date":"2013-09-30T23:32:06.174Z","type":"message"}
{"nick":"tjfontaine","message":"something is stomping on some memory there","date":"2013-09-30T23:32:08.376Z","type":"message"}
{"nick":"tjfontaine","message":"I have a feeling I know what this is going to be, but I'm going to go ahead and formulate the manta job","date":"2013-09-30T23:32:34.811Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: i totally want to sneak in the back of the room for max's node specific training. that sounds awesome.","date":"2013-09-30T23:34:20.586Z","type":"message"}
{"nick":"tjfontaine","message":"hehe","date":"2013-09-30T23:35:11.479Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: i've ran it over a dozen times. can't get the stupid thing to abort in debug mode. :P","date":"2013-09-30T23:41:24.446Z","type":"message"}
{"nick":"tjfontaine","message":"nod","date":"2013-09-30T23:41:30.264Z","type":"message"}
{"nick":"trevnorris","message":"hah, and first time out of debug mode.","date":"2013-09-30T23:42:04.070Z","type":"message"}
{"nick":"othiym23","message":"sounds like you guys are having all the luck with the race conditions today","date":"2013-09-30T23:43:45.578Z","type":"message"}
{"nick":"tjfontaine","message":":<","date":"2013-09-30T23:45:16.558Z","type":"message"}
{"nick":"TooTallNate","date":"2013-09-30T23:49:00.387Z","type":"join"}
{"nick":"trevnorris","message":"well, this is confusing. ulimit -c unlimited, but still no core dump.","date":"2013-09-30T23:50:22.773Z","type":"message"}
{"nick":"tjfontaine","message":"try adding --abort-on-uncaught or whatever it is","date":"2013-09-30T23:51:00.545Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: well, my terminal says \"Aborted (core dumped)\" but there's no core file.","date":"2013-09-30T23:52:02.535Z","type":"message"}
{"nick":"tjfontaine","message":"oh maybe you have set it to dump next to the binary or in the prefix","date":"2013-09-30T23:52:48.446Z","type":"message"}
