{"nick":"rmg","date":"2016-05-29T00:09:21.423Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 246 seconds","date":"2016-05-29T00:13:45.113Z","type":"quit"}
{"nick":"happy-dude","reason":"Quit: Connection closed for inactivity","date":"2016-05-29T01:07:54.661Z","type":"quit"}
{"nick":"rgrinberg","date":"2016-05-29T01:52:55.658Z","type":"join"}
{"nick":"rgrinberg","reason":"Ping timeout: 252 seconds","date":"2016-05-29T03:09:34.567Z","type":"quit"}
{"nick":"rmg_","reason":"Remote host closed the connection","date":"2016-05-29T06:22:50.180Z","type":"quit"}
{"nick":"pspi_","new_nick":"pspi","date":"2016-05-29T06:39:14.690Z","type":"nick"}
{"nick":"rmg","date":"2016-05-29T07:23:42.011Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 250 seconds","date":"2016-05-29T07:28:06.982Z","type":"quit"}
{"nick":"davi","date":"2016-05-29T08:09:12.967Z","type":"join"}
{"nick":"rmg","date":"2016-05-29T08:24:27.583Z","type":"join"}
{"nick":"rgrinberg","date":"2016-05-29T08:29:23.116Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 252 seconds","date":"2016-05-29T08:30:13.552Z","type":"quit"}
{"nick":"tunniclm_","reason":"Read error: Connection reset by peer","date":"2016-05-29T08:35:58.128Z","type":"quit"}
{"nick":"rgrinberg","reason":"Ping timeout: 244 seconds","date":"2016-05-29T08:53:28.986Z","type":"quit"}
{"nick":"rmg","date":"2016-05-29T09:26:26.542Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 252 seconds","date":"2016-05-29T09:30:43.503Z","type":"quit"}
{"nick":"davi","reason":"Ping timeout: 244 seconds","date":"2016-05-29T09:39:27.960Z","type":"quit"}
{"nick":"seishun","date":"2016-05-29T09:48:19.841Z","type":"join"}
{"nick":"rendar","date":"2016-05-29T10:27:05.419Z","type":"join"}
{"nick":"rmg","date":"2016-05-29T10:27:31.154Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 272 seconds","date":"2016-05-29T10:32:34.120Z","type":"quit"}
{"nick":"davi","date":"2016-05-29T12:11:40.663Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 246 seconds","date":"2016-05-29T13:18:48.107Z","type":"quit"}
{"nick":"seishun","date":"2016-05-29T13:21:40.359Z","type":"join"}
{"nick":"davi","reason":"Ping timeout: 244 seconds","date":"2016-05-29T13:23:09.651Z","type":"quit"}
{"nick":"seishun","message":"I'm thinking of adding a workaround for https://github.com/nodejs/node/issues/6763 to libuv","date":"2016-05-29T13:34:17.874Z","type":"message"}
{"nick":"seishun","message":"basically divide the timeout by two if it's greater than some threshold value","date":"2016-05-29T13:35:06.874Z","type":"message"}
{"nick":"seishun","message":"based on a heuristic that the pc will likely not sleep longer than be awake","date":"2016-05-29T13:35:11.329Z","type":"message"}
{"nick":"rendar","message":"seishun: hmmm","date":"2016-05-29T13:38:49.828Z","type":"message"}
{"nick":"rendar","message":"seishun: so basically the timeout we pass to GetQueuedCompletionStatus won't advance while it's sleeping?","date":"2016-05-29T13:39:36.072Z","type":"message"}
{"nick":"seishun","message":"rendar: exactly","date":"2016-05-29T13:39:48.662Z","type":"message"}
{"nick":"seishun","message":"but it does advance on windows 7","date":"2016-05-29T13:40:03.168Z","type":"message"}
{"nick":"rendar","message":"so in windows 7 and < it works fine, it doesn't work in windows >=10","date":"2016-05-29T13:40:32.419Z","type":"message"}
{"nick":"seishun","message":"I've only tested on windows 7 and 10","date":"2016-05-29T13:40:43.994Z","type":"message"}
{"nick":"rendar","message":"ok","date":"2016-05-29T13:41:02.626Z","type":"message"}
{"nick":"rendar","message":"seishun: well, if so, isn't it a Windows bug? we cannot doing anything about it..","date":"2016-05-29T13:41:19.404Z","type":"message"}
{"nick":"seishun","message":"we can work around it","date":"2016-05-29T13:41:58.969Z","type":"message"}
{"nick":"rendar","message":"how?","date":"2016-05-29T13:42:06.704Z","type":"message"}
{"nick":"seishun","message":"the way I described above","date":"2016-05-29T13:42:14.951Z","type":"message"}
{"nick":"rendar","message":"hmm","date":"2016-05-29T13:43:33.749Z","type":"message"}
{"nick":"rendar","message":"but how do you set that threshold value? and if you divide it by two, won't the wakeup time be still wrong?","date":"2016-05-29T13:44:22.609Z","type":"message"}
{"nick":"seishun","message":"if GetQueuedCompletionStatus returns early, libuv just starts the timer for the remaining time","date":"2016-05-29T13:46:32.121Z","type":"message"}
{"nick":"rendar","message":"seishun: but if you divide the timeout by 2, how do you know that GQCS returned early? i mean, shuuldn't you save the actual time and compare it after, when GQCS returns?","date":"2016-05-29T13:48:39.715Z","type":"message"}
{"nick":"seishun","message":"rendar: that's what libuv already dos","date":"2016-05-29T13:49:02.586Z","type":"message"}
{"nick":"seishun","message":"does","date":"2016-05-29T13:49:03.979Z","type":"message"}
{"nick":"rendar","message":"hmm","date":"2016-05-29T13:51:57.103Z","type":"message"}
{"nick":"rendar","message":"does libuv do that to solve this bug? or it does that everywhere?","date":"2016-05-29T13:52:24.418Z","type":"message"}
{"nick":"seishun","message":"it does that to solve another bug, where GQCS sometimes returns early","date":"2016-05-29T13:53:54.434Z","type":"message"}
{"nick":"rendar","message":"oh..","date":"2016-05-29T13:56:00.118Z","type":"message"}
{"nick":"rendar","message":"seishun: can you link me the exact code of this precise thing? or at least tell me the file in libuv tree?","date":"2016-05-29T13:57:08.931Z","type":"message"}
{"nick":"seishun","message":"rendar: https://github.com/libuv/libuv/blob/b12624c13693c4d29ca84b3556eadc9e9c0936a4/src/win/core.c#L288","date":"2016-05-29T13:57:58.756Z","type":"message"}
{"nick":"rendar","message":"seishun: oh thanks","date":"2016-05-29T13:58:53.265Z","type":"message"}
{"nick":"rendar","message":"seishun: well, if libuv already implemented this thing of the time to solve another bug, shouldn't this inncidentally solve also the bug you reported, and making libuv your-bug-proof? how did you discover this? by playing with libuv or playing with bare GQCS?","date":"2016-05-29T14:00:06.548Z","type":"message"}
{"nick":"seishun","message":"rendar: I discovered it by playing with node.js. And no, this workaround doesn't solve the bug where it returns too late","date":"2016-05-29T14:01:40.202Z","type":"message"}
{"nick":"rendar","message":"oh, because it returns too late, and not too earlier","date":"2016-05-29T14:02:49.936Z","type":"message"}
{"nick":"saghul","message":"seishun: not sure that would work","date":"2016-05-29T14:20:30.061Z","type":"message"}
{"nick":"saghul","message":"my Windows 10 machine has been hibernating for a month now :-P","date":"2016-05-29T14:20:53.940Z","type":"message"}
{"nick":"saghul","message":"FWIW, early returns are the exception, not the norm, I don't think we want to make that the common case","date":"2016-05-29T14:22:19.684Z","type":"message"}
{"nick":"seishun","message":"saghul: do you have any other suggestions?","date":"2016-05-29T14:22:57.843Z","type":"message"}
{"nick":"saghul","message":"seishun: nope","date":"2016-05-29T14:23:37.193Z","type":"message"}
{"nick":"saghul","message":"maybe @ orangemocha, maybe he can ask someone on the Windows team at Microsoft","date":"2016-05-29T14:24:23.192Z","type":"message"}
{"nick":"seishun","message":"saghul: should I ping him in the node.js issue?","date":"2016-05-29T14:28:02.002Z","type":"message"}
{"nick":"saghul","message":"seishun: yeah","date":"2016-05-29T14:28:15.090Z","type":"message"}
{"nick":"saghul","message":"he is in platform-windows, but he might have missed the pint","date":"2016-05-29T14:28:25.496Z","type":"message"}
{"nick":"saghul","message":"*ping","date":"2016-05-29T14:28:28.191Z","type":"message"}
{"nick":"seishun","message":"done","date":"2016-05-29T14:32:05.007Z","type":"message"}
{"nick":"seishun","message":"hope to find out more about this windows 10 weirdness","date":"2016-05-29T14:32:15.151Z","type":"message"}
{"nick":"seishun","message":"maybe they'll just go ahead and fix it in the next build","date":"2016-05-29T14:32:29.973Z","type":"message"}
