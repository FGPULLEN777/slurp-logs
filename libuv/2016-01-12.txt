{"nick":"txdv","message":"jeez","date":"2016-01-12T00:00:15.376Z","type":"message"}
{"nick":"txdv","message":"wasn't active on libuv for quite some time","date":"2016-01-12T00:00:20.706Z","type":"message"}
{"nick":"amurzeau_","message":"so probably not fixed with all updates on windows 8.1 ...","date":"2016-01-12T00:00:21.798Z","type":"message"}
{"nick":"txdv","message":"first day i check in on the irc chat and someone finds a bug which crashes windows","date":"2016-01-12T00:00:35.294Z","type":"message"}
{"nick":"txdv","message":":D","date":"2016-01-12T00:00:38.352Z","type":"message"}
{"nick":"amurzeau_","message":":p","date":"2016-01-12T00:00:55.655Z","type":"message"}
{"nick":"avalanche123","date":"2016-01-12T00:01:32.524Z","type":"join"}
{"nick":"txdv","message":"ill take a lookg on the test and how to use fast path correctly though first","date":"2016-01-12T00:01:33.956Z","type":"message"}
{"nick":"txdv","message":"because you are setting fast path on the accepting socket","date":"2016-01-12T00:01:42.800Z","type":"message"}
{"nick":"amurzeau","reason":"Quit: http://www.kiwiirc.com/ - A hand crafted IRC client","date":"2016-01-12T00:01:49.413Z","type":"quit"}
{"nick":"txdv","message":"i dont know if that is the correct way","date":"2016-01-12T00:01:55.994Z","type":"message"}
{"nick":"txdv","message":"even if it were incorrect though, this is clearly a bug, crashing the entire system should not be possible","date":"2016-01-12T00:02:12.191Z","type":"message"}
{"nick":"amurzeau_","message":"actually, I wouldn't ever think to find that behind enabling a small feature, actually I discovered the new BSOD style on windows 8+ with that issue ","date":"2016-01-12T00:02:25.041Z","type":"message"}
{"nick":"txdv","message":"to be honest, i haven't seen windows > 7 crash until now","date":"2016-01-12T00:02:50.998Z","type":"message"}
{"nick":"amurzeau","date":"2016-01-12T00:02:54.325Z","type":"join"}
{"nick":"amurzeau_","message":"same as you","date":"2016-01-12T00:03:04.497Z","type":"message"}
{"nick":"amurzeau_","message":"I just read the the technet article","date":"2016-01-12T00:03:39.261Z","type":"message"}
{"nick":"amurzeau_","message":"it says to enable it before calling connect() or before calling listen()","date":"2016-01-12T00:03:56.716Z","type":"message"}
{"nick":"amurzeau_","message":"\"The target of the connection request must set the SIO_LOOPBACK_FAST_PATH IOCTL on the listen socket, that is, prior to accepting the connection.\"","date":"2016-01-12T00:04:54.172Z","type":"message"}
{"nick":"txdv","message":"can you give me the link?","date":"2016-01-12T00:05:00.173Z","type":"message"}
{"nick":"amurzeau_","message":"http://blogs.technet.com/b/wincat/archive/2012/12/05/fast-tcp-loopback-performance-and-low-latency-with-windows-server-2012-tcp-loopback-fast-path.aspx","date":"2016-01-12T00:05:07.643Z","type":"message"}
{"nick":"txdv","message":"o it is how to correctly use it","date":"2016-01-12T00:05:22.008Z","type":"message"}
{"nick":"txdv","message":"you see, you don't set it before connect","date":"2016-01-12T00:05:29.085Z","type":"message"}
{"nick":"amurzeau_","message":"bind is called before connect if I'm right","date":"2016-01-12T00:05:46.022Z","type":"message"}
{"nick":"txdv","message":"no","date":"2016-01-12T00:05:59.923Z","type":"message"}
{"nick":"txdv","message":"why would you","date":"2016-01-12T00:06:15.332Z","type":"message"}
{"nick":"txdv","message":"you can actually like call bind on a socket before connecting, then it will use a specific port (the one you provided)","date":"2016-01-12T00:06:31.273Z","type":"message"}
{"nick":"txdv","message":"if you don't it will just use whatever is free","date":"2016-01-12T00:06:37.713Z","type":"message"}
{"nick":"txdv","message":"maybe i'm wrong in the context of libuvs try_bind function","date":"2016-01-12T00:07:08.764Z","type":"message"}
{"nick":"amurzeau_","message":"yes but libuv actually always call bind even for client sockets","date":"2016-01-12T00:07:15.169Z","type":"message"}
{"nick":"amurzeau_","message":"https://github.com/libuv/libuv/blob/master/src/win/tcp.c#L767","date":"2016-01-12T00:07:47.494Z","type":"message"}
{"nick":"txdv","message":"it does","date":"2016-01-12T00:08:13.956Z","type":"message"}
{"nick":"amurzeau_","message":"with either ipv4 or ipv6 any address","date":"2016-01-12T00:08:18.881Z","type":"message"}
{"nick":"txdv","message":"you are right, i was just about to see when try_bind was called","date":"2016-01-12T00:08:23.573Z","type":"message"}
{"nick":"amurzeau_","message":"running benchmarks clearly shows the performance boost","date":"2016-01-12T00:08:57.370Z","type":"message"}
{"nick":"amurzeau_","message":"I get almost x3 boost","date":"2016-01-12T00:09:12.847Z","type":"message"}
{"nick":"txdv","message":"with a free bsod","date":"2016-01-12T00:09:43.084Z","type":"message"}
{"nick":"txdv","message":"once in a while","date":"2016-01-12T00:09:47.454Z","type":"message"}
{"nick":"txdv","message":":D","date":"2016-01-12T00:09:47.835Z","type":"message"}
{"nick":"txdv","message":"what make that test so special though","date":"2016-01-12T00:09:55.335Z","type":"message"}
{"nick":"amurzeau_","message":"yes, but only with ipv6 ^^","date":"2016-01-12T00:09:59.340Z","type":"message"}
{"nick":"amurzeau_","message":"ipv4 works fine","date":"2016-01-12T00:10:02.882Z","type":"message"}
{"nick":"amurzeau_","message":"and benchmarks use ipv4","date":"2016-01-12T00:10:35.563Z","type":"message"}
{"nick":"amurzeau_","message":"(so they don't trigger the bsod)","date":"2016-01-12T00:10:49.715Z","type":"message"}
{"nick":"txdv","message":"so a minimum test case should include ipv6 and io completion ports","date":"2016-01-12T00:11:36.227Z","type":"message"}
{"nick":"txdv","message":"because you said that the synchronous code works","date":"2016-01-12T00:11:43.939Z","type":"message"}
{"nick":"amurzeau_","message":"yes","date":"2016-01-12T00:11:47.242Z","type":"message"}
{"nick":"amurzeau_","message":"and both client & server need iocp I think","date":"2016-01-12T00:12:23.894Z","type":"message"}
{"nick":"amurzeau_","message":"synchronous echo server + the test don't trigger the issue","date":"2016-01-12T00:12:41.789Z","type":"message"}
{"nick":"txdv","message":"i wonder when the code stops working","date":"2016-01-12T00:13:41.634Z","type":"message"}
{"nick":"txdv","message":"is it possible to debug it?","date":"2016-01-12T00:13:54.061Z","type":"message"}
{"nick":"amurzeau_","message":"I think the best way may to change libuv code to synchronous calls maybe","date":"2016-01-12T00:14:01.555Z","type":"message"}
{"nick":"amurzeau_","message":"no, if the code is slower (because of debugger / printf / whatever), this issue is not triggered","date":"2016-01-12T00:14:55.168Z","type":"message"}
{"nick":"amurzeau_","message":"and debugging it with windbg and kernel mode debugging doesn't help either","date":"2016-01-12T00:15:12.360Z","type":"message"}
{"nick":"amurzeau_","message":"(the failing code seems to be in a kernel worker thread)","date":"2016-01-12T00:15:34.860Z","type":"message"}
{"nick":"avalanche123","reason":"Ping timeout: 276 seconds","date":"2016-01-12T00:16:20.138Z","type":"quit"}
{"nick":"avalanche123","date":"2016-01-12T00:19:05.552Z","type":"join"}
{"nick":"txdv","message":"what are you going to do with this now?","date":"2016-01-12T00:22:28.249Z","type":"message"}
{"nick":"amurzeau_","message":"I will try to debug it by replacing/removing code in libuv but I'm not sure to find anything useful ...","date":"2016-01-12T00:24:40.303Z","type":"message"}
{"nick":"avalanche123","reason":"Remote host closed the connection","date":"2016-01-12T00:24:46.313Z","type":"quit"}
{"nick":"rendar","reason":"Quit: std::lower_bound + std::less_equal *works* with a vector without duplicates!","date":"2016-01-12T00:24:56.036Z","type":"quit"}
{"nick":"txdv","message":"best thing you can do is find out which line in the test triggers it","date":"2016-01-12T00:25:06.715Z","type":"message"}
{"nick":"avalanche123","date":"2016-01-12T00:25:13.532Z","type":"join"}
{"nick":"txdv","message":"rewriting everything with pure io completion port api will be another bigger challenge ","date":"2016-01-12T00:25:21.836Z","type":"message"}
{"nick":"txdv","message":":D","date":"2016-01-12T00:25:24.705Z","type":"message"}
{"nick":"amurzeau_","message":"and maybe even with IOCP, it could work just because calls are not ordered the same way as in libuv ...","date":"2016-01-12T00:26:12.426Z","type":"message"}
{"nick":"amurzeau_","message":"if I can't figure out the cause of this crash, maybe I will make this feature available manually (like keepalive and nodelay) for ipv4 only","date":"2016-01-12T00:28:08.511Z","type":"message"}
{"nick":"txdv","message":"I think that would have been the best approach anyway","date":"2016-01-12T00:28:52.902Z","type":"message"}
{"nick":"amurzeau_","message":"or maybe just not add it to libuv","date":"2016-01-12T00:28:55.924Z","type":"message"}
{"nick":"txdv","message":"although free speed for no negative side effects is nice too","date":"2016-01-12T00:29:05.498Z","type":"message"}
{"nick":"amurzeau_","message":"there is one negative effects: the IOCTL call has a cost","date":"2016-01-12T00:29:29.354Z","type":"message"}
{"nick":"amurzeau_","message":"the benchmark shows -15%/20% less accept/s","date":"2016-01-12T00:29:49.235Z","type":"message"}
{"nick":"avalanche123","reason":"Ping timeout: 276 seconds","date":"2016-01-12T00:29:59.113Z","type":"quit"}
{"nick":"txdv","message":"o you have to bind on every connect","date":"2016-01-12T00:30:17.515Z","type":"message"}
{"nick":"txdv","message":"i mean to ioctl call","date":"2016-01-12T00:30:23.503Z","type":"message"}
{"nick":"amurzeau_","message":"yes","date":"2016-01-12T00:30:59.974Z","type":"message"}
{"nick":"txdv","message":"well","date":"2016-01-12T00:31:02.679Z","type":"message"}
{"nick":"txdv","message":"uv_tcp_fastpath(uv_tcp_t, bool) it is","date":"2016-01-12T00:31:22.330Z","type":"message"}
{"nick":"txdv","message":"on linux it just returns ENOTSUP","date":"2016-01-12T00:31:27.286Z","type":"message"}
{"nick":"txdv","message":"on windows it tries to do the ioctl call","date":"2016-01-12T00:31:40.253Z","type":"message"}
{"nick":"txdv","message":"and does ENOTSUP if some error is there","date":"2016-01-12T00:31:45.952Z","type":"message"}
{"nick":"amurzeau_","message":"yes, that's what I have in mind :)","date":"2016-01-12T00:31:48.497Z","type":"message"}
{"nick":"ncthom91","date":"2016-01-12T00:32:07.912Z","type":"join"}
{"nick":"txdv","message":"I set up the environment for deving for libuv on windows but was too lazy to do anything","date":"2016-01-12T00:33:36.821Z","type":"message"}
{"nick":"txdv","message":"the fast path issue looked like an easy one","date":"2016-01-12T00:33:43.588Z","type":"message"}
{"nick":"txdv","message":"but you already did it","date":"2016-01-12T00:33:46.419Z","type":"message"}
{"nick":"Jacob843","reason":"Ping timeout: 240 seconds","date":"2016-01-12T00:33:55.786Z","type":"quit"}
{"nick":"txdv","message":"amurzeau_: https://github.com/libuv/libuv/issues/489","date":"2016-01-12T00:34:17.805Z","type":"message"}
{"nick":"amurzeau_","message":"not as easy as expected in fact :","date":"2016-01-12T00:34:19.454Z","type":"message"}
{"nick":"amurzeau_","message":":p","date":"2016-01-12T00:34:20.506Z","type":"message"}
{"nick":"txdv","message":"well it is easy, its just blows up with ipv6","date":"2016-01-12T00:34:30.254Z","type":"message"}
{"nick":"txdv","message":"the addition of the function is not that big","date":"2016-01-12T00:34:38.857Z","type":"message"}
{"nick":"txdv","message":"also add documentation when it has to be called","date":"2016-01-12T00:34:46.552Z","type":"message"}
{"nick":"amurzeau_","message":"maybe it can blows up with ipv4 too","date":"2016-01-12T00:34:47.186Z","type":"message"}
{"nick":"amurzeau_","message":"with a 200Mhz cpu","date":"2016-01-12T00:34:55.586Z","type":"message"}
{"nick":"avalanche123","date":"2016-01-12T00:35:08.592Z","type":"join"}
{"nick":"amurzeau_","message":"(just speculation ^^)","date":"2016-01-12T00:35:38.467Z","type":"message"}
{"nick":"amurzeau_","message":"on my machines it seems to be fine with ipv4, I ran benchmarks a lot and never had an issue","date":"2016-01-12T00:36:07.881Z","type":"message"}
{"nick":"amurzeau_","message":"I need to do more tests on that for sure","date":"2016-01-12T00:39:05.714Z","type":"message"}
{"nick":"ncthom91","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2016-01-12T00:45:43.046Z","type":"quit"}
{"nick":"daurnimator","date":"2016-01-12T00:49:04.844Z","type":"join"}
{"nick":"amurzeau_","reason":"Quit: Page closed","date":"2016-01-12T00:49:22.773Z","type":"quit"}
{"nick":"txdv","message":"if you open up a pull request reference it issue 489 in it","date":"2016-01-12T00:54:05.211Z","type":"message"}
{"nick":"txdv","message":"(the link i provided above)","date":"2016-01-12T00:54:08.899Z","type":"message"}
{"nick":"jgi","reason":"Quit: jgi","date":"2016-01-12T00:55:17.460Z","type":"quit"}
{"nick":"avalanche123","reason":"Remote host closed the connection","date":"2016-01-12T01:29:34.491Z","type":"quit"}
{"nick":"avalanche123","date":"2016-01-12T01:30:01.516Z","type":"join"}
{"nick":"avalanch_","date":"2016-01-12T01:31:24.614Z","type":"join"}
{"nick":"zju4","reason":"Ping timeout: 240 seconds","date":"2016-01-12T01:31:46.040Z","type":"quit"}
{"nick":"avalanche123","reason":"Ping timeout: 276 seconds","date":"2016-01-12T01:34:59.055Z","type":"quit"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2016-01-12T01:59:02.848Z","type":"quit"}
{"nick":"Ralith","date":"2016-01-12T02:01:20.026Z","type":"join"}
{"nick":"avalanch_","reason":"Remote host closed the connection","date":"2016-01-12T02:01:45.041Z","type":"quit"}
{"nick":"avalanche123","date":"2016-01-12T02:02:10.996Z","type":"join"}
{"nick":"avalanche123","reason":"Ping timeout: 256 seconds","date":"2016-01-12T02:06:58.665Z","type":"quit"}
{"nick":"Ruyi","reason":"Ping timeout: 276 seconds","date":"2016-01-12T02:45:50.136Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2016-01-12T03:13:32.178Z","type":"quit"}
{"nick":"ncthom91","date":"2016-01-12T03:17:44.851Z","type":"join"}
{"nick":"ncthom91","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2016-01-12T03:31:02.493Z","type":"quit"}
{"nick":"tunniclm","reason":"Ping timeout: 250 seconds","date":"2016-01-12T03:46:21.384Z","type":"quit"}
{"nick":"rmg","reason":"Remote host closed the connection","date":"2016-01-12T04:20:14.452Z","type":"quit"}
{"nick":"rmg","date":"2016-01-12T05:20:47.416Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 260 seconds","date":"2016-01-12T05:25:45.848Z","type":"quit"}
{"nick":"p","date":"2016-01-12T05:39:21.936Z","type":"join"}
{"nick":"p","reason":"Client Quit","date":"2016-01-12T05:39:39.150Z","type":"quit"}
{"nick":"jgi","date":"2016-01-12T06:07:20.973Z","type":"join"}
{"nick":"seishun","date":"2016-01-12T06:38:23.395Z","type":"join"}
{"nick":"zju1","date":"2016-01-12T06:42:00.976Z","type":"join"}
{"nick":"rendar","date":"2016-01-12T06:50:21.594Z","type":"join"}
{"nick":"jgi","reason":"Quit: jgi","date":"2016-01-12T06:50:57.160Z","type":"quit"}
{"nick":"Ruyi","date":"2016-01-12T07:12:44.057Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 240 seconds","date":"2016-01-12T07:34:46.052Z","type":"quit"}
{"nick":"rmg","date":"2016-01-12T07:46:26.332Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 240 seconds","date":"2016-01-12T07:50:55.804Z","type":"quit"}
{"nick":"davi","date":"2016-01-12T07:56:43.763Z","type":"join"}
{"nick":"gabrielschulhof","date":"2016-01-12T07:57:58.950Z","type":"join"}
