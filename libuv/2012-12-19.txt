{"nick":"ircretary","reason":"Remote host closed the connection","date":"2012-12-19T00:00:01.257Z","type":"quit"}
{"nick":"ircretary","date":"2012-12-19T00:00:09.139Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-12-19T00:06:23.303Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-19T00:20:06.003Z","type":"join"}
{"nick":"mraleph","reason":"Ping timeout: 264 seconds","date":"2012-12-19T00:21:06.193Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-12-19T00:28:51.446Z","type":"quit"}
{"nick":"bradleymeck","date":"2012-12-19T00:31:23.944Z","type":"join"}
{"nick":"mikeal","date":"2012-12-19T00:36:35.882Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-12-19T00:37:54.536Z","type":"quit"}
{"nick":"dscape","reason":"Excess Flood","date":"2012-12-19T00:50:34.382Z","type":"quit"}
{"nick":"dscape","date":"2012-12-19T00:50:53.289Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-19T00:57:09.160Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-12-19T00:58:21.912Z","type":"join"}
{"nick":"loladiro","date":"2012-12-19T00:58:36.605Z","type":"join"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2012-12-19T00:59:36.257Z","type":"quit"}
{"nick":"philips_","reason":"Excess Flood","date":"2012-12-19T01:06:23.018Z","type":"quit"}
{"nick":"Benvie","date":"2012-12-19T01:09:41.266Z","type":"quit"}
{"nick":"philips_","date":"2012-12-19T01:10:33.888Z","type":"join"}
{"nick":"TooTallNate","date":"2012-12-19T01:18:28.223Z","type":"join"}
{"nick":"jmar777","date":"2012-12-19T01:25:39.939Z","type":"join"}
{"nick":"lohkey","date":"2012-12-19T01:44:04.202Z","type":"part"}
{"nick":"lohkey_","date":"2012-12-19T01:44:28.865Z","type":"join"}
{"nick":"lohkey_","reason":"Client Quit","date":"2012-12-19T01:44:28.993Z","type":"quit"}
{"nick":"abraxas","date":"2012-12-19T01:47:45.092Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2012-12-19T01:53:28.590Z","type":"quit"}
{"nick":"wolfeidau","message":"Gday having issues with a native module, can't require('netif') when it is installed via npm for some reason, any ideas?","date":"2012-12-19T01:56:52.358Z","type":"message"}
{"nick":"wolfeidau","message":"It is just a module with one method","date":"2012-12-19T01:57:11.449Z","type":"message"}
{"nick":"chilts","message":"did it compile fine on install?","date":"2012-12-19T01:59:49.240Z","type":"message"}
{"nick":"chilts","message":"want me to try it?","date":"2012-12-19T01:59:53.678Z","type":"message"}
{"nick":"chilts","message":"heh, I was thinking this was the other channel :)","date":"2012-12-19T02:00:06.380Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-12-19T02:01:42.757Z","type":"quit"}
{"nick":"joshthecoder","reason":"Quit: Leaving...","date":"2012-12-19T02:15:40.560Z","type":"quit"}
{"nick":"c4milo","date":"2012-12-19T02:15:56.907Z","type":"join"}
{"nick":"indexzero","date":"2012-12-19T02:17:20.627Z","type":"join"}
{"nick":"wolfeidau","message":"Sorry just learnt about bindings... ","date":"2012-12-19T02:18:43.290Z","type":"message"}
{"nick":"mmalecki","message":"wolfeidau: #node.js channel might be better for you then","date":"2012-12-19T02:25:26.175Z","type":"message"}
{"nick":"wolfeidau","message":"mmalecki: Yeah cheers","date":"2012-12-19T02:26:13.288Z","type":"message"}
{"nick":"wolfeidau","message":"Thought it was a little off topic after posting it here","date":"2012-12-19T02:26:44.984Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-12-19T02:38:04.037Z","type":"quit"}
{"nick":"indexzero","date":"2012-12-19T02:44:35.623Z","type":"join"}
{"nick":"mmalecki","new_nick":"mmalecki[zzz]","date":"2012-12-19T02:57:01.255Z","type":"nick"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-12-19T03:01:44.713Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 246 seconds","date":"2012-12-19T03:07:01.788Z","type":"quit"}
{"nick":"joshthecoder","date":"2012-12-19T03:08:05.233Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2012-12-19T03:29:52.793Z","type":"quit"}
{"nick":"sblom","reason":"Ping timeout: 276 seconds","date":"2012-12-19T03:36:44.963Z","type":"quit"}
{"nick":"brson","date":"2012-12-19T03:41:36.415Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-12-19T03:59:24.881Z","type":"quit"}
{"nick":"dr34dl0ck","date":"2012-12-19T04:01:37.954Z","type":"join"}
{"nick":"kazupon","date":"2012-12-19T04:06:37.918Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-19T04:09:36.356Z","type":"quit"}
{"nick":"dr34dl0ck","reason":"Quit: Colloquy for iPad - http://colloquy.mobi","date":"2012-12-19T04:12:47.446Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-19T04:17:49.799Z","type":"join"}
{"nick":"abraxas","date":"2012-12-19T04:30:04.557Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-19T05:13:43.113Z","type":"quit"}
{"nick":"bradleymeck","date":"2012-12-19T05:27:38.883Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-12-19T05:47:38.530Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-19T06:02:08.837Z","type":"join"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2012-12-19T06:16:04.583Z","type":"quit"}
{"nick":"felixge","date":"2012-12-19T06:16:29.716Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-12-19T06:16:29.897Z","type":"quit"}
{"nick":"felixge","date":"2012-12-19T06:16:30.026Z","type":"join"}
{"nick":"pooya","date":"2012-12-19T06:26:27.953Z","type":"join"}
{"nick":"joshthecoder","reason":"Quit: Leaving...","date":"2012-12-19T06:35:18.653Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2012-12-19T06:35:33.641Z","type":"quit"}
{"nick":"felixge","reason":"Quit: felixge","date":"2012-12-19T06:47:46.609Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2012-12-19T06:49:40.902Z","type":"quit"}
{"nick":"felixge","date":"2012-12-19T06:50:46.872Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-12-19T06:50:47.120Z","type":"quit"}
{"nick":"felixge","date":"2012-12-19T06:50:47.252Z","type":"join"}
{"nick":"`3rdEden","date":"2012-12-19T07:01:37.331Z","type":"join"}
{"nick":"abraxas","date":"2012-12-19T07:02:10.367Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-19T07:09:34.409Z","type":"quit"}
{"nick":"rendar","date":"2012-12-19T07:19:16.989Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-12-19T07:36:44.604Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2012-12-19T08:03:27.352Z","type":"quit"}
{"nick":"rendar","date":"2012-12-19T08:09:20.503Z","type":"quit"}
{"nick":"rendar","date":"2012-12-19T08:10:30.875Z","type":"join"}
{"nick":"abraxas","date":"2012-12-19T08:16:56.832Z","type":"join"}
{"nick":"wolfeidau","date":"2012-12-19T08:17:24.712Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-12-19T08:22:55.089Z","type":"quit"}
{"nick":"felixge","reason":"Quit: felixge","date":"2012-12-19T08:24:17.799Z","type":"quit"}
{"nick":"felixge","date":"2012-12-19T08:30:18.896Z","type":"join"}
{"nick":"felixge","reason":"Client Quit","date":"2012-12-19T08:31:36.241Z","type":"quit"}
{"nick":"bradleymeck","date":"2012-12-19T08:41:22.441Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-12-19T08:44:21.729Z","type":"quit"}
{"nick":"indexzero","date":"2012-12-19T08:48:18.968Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2012-12-19T09:08:50.818Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-12-19T09:59:07.114Z","type":"quit"}
{"nick":"bnoordhuis","date":"2012-12-19T10:10:47.410Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Timothy J Fontaine\u000f \u00037master\u000f * \u000214ed173\u0002 : test: add TAP output to the test runner - http://git.io/tqlCqQ","date":"2012-12-19T10:17:10.894Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so...","date":"2012-12-19T10:18:30.508Z","type":"message"}
{"nick":"indutny","message":"why TAP? :)","date":"2012-12-19T10:18:32.905Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: because there's a lot of tools that know tap, probably","date":"2012-12-19T10:18:48.739Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine is working on setting up CI, if i'm not mistaken","date":"2012-12-19T10:19:03.554Z","type":"message"}
{"nick":"indutny","message":"aah","date":"2012-12-19T10:23:46.929Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-19T10:23:47.644Z","type":"message"}
{"nick":"loladiro","date":"2012-12-19T10:29:30.320Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2012-12-19T10:31:47.570Z","type":"quit"}
{"nick":"yawnt","message":"hey i was trying to pass an error to the callback","date":"2012-12-19T10:41:48.889Z","type":"message"}
{"nick":"yawnt","message":"but using Handle<Value> err = Exception::Error(String::New(\"err\")) fails with invalid conversion from ‘v8::Value*’ to ‘v8::Primitive*’","date":"2012-12-19T10:42:15.613Z","type":"message"}
{"nick":"yawnt","message":"any idea why?","date":"2012-12-19T10:42:18.621Z","type":"message"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-12-19T10:44:39.881Z","type":"quit"}
{"nick":"bnoordhuis","message":"yawnt: does Local<Value> err = ... work?","date":"2012-12-19T10:46:36.819Z","type":"message"}
{"nick":"yawnt","message":"no","date":"2012-12-19T10:47:31.223Z","type":"message"}
{"nick":"bnoordhuis","message":"then you should probably post some full code :)","date":"2012-12-19T10:48:26.609Z","type":"message"}
{"nick":"yawnt","message":"https://gist.github.com/28b56bf1a7b1aa2f3a26 ","date":"2012-12-19T10:49:48.828Z","type":"message"}
{"nick":"yawnt","message":"sorry :P","date":"2012-12-19T10:49:51.136Z","type":"message"}
{"nick":"yawnt","message":"value is the result to a call to msgget()","date":"2012-12-19T10:50:07.369Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2012-12-19T10:50:36.080Z","type":"message"}
{"nick":"indutny","message":"I think you should not use ternary here","date":"2012-12-19T10:50:41.690Z","type":"message"}
{"nick":"indutny","message":"yawnt: split it into if","date":"2012-12-19T10:50:55.209Z","type":"message"}
{"nick":"yawnt","message":"i did notice that without the ternary it works","date":"2012-12-19T10:50:59.416Z","type":"message"}
{"nick":"yawnt","message":"why is that?","date":"2012-12-19T10:51:04.272Z","type":"message"}
{"nick":"indutny","message":"well, I suppose because right and left side of ternary have different types","date":"2012-12-19T10:51:21.409Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: please weigh in","date":"2012-12-19T10:51:27.714Z","type":"message"}
{"nick":"indutny","message":"i'm getting out of answers here","date":"2012-12-19T10:51:32.181Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, different types","date":"2012-12-19T10:52:06.872Z","type":"message"}
{"nick":"bnoordhuis","message":"Null() returns a Primitive","date":"2012-12-19T10:52:11.284Z","type":"message"}
{"nick":"bnoordhuis","message":"*Handle<Primitive>","date":"2012-12-19T10:52:23.830Z","type":"message"}
{"nick":"yawnt","message":"ah that's why","date":"2012-12-19T10:52:44.400Z","type":"message"}
{"nick":"yawnt","message":"it compiles now","date":"2012-12-19T10:52:48.128Z","type":"message"}
{"nick":"yawnt","message":"thanks!","date":"2012-12-19T10:52:50.105Z","type":"message"}
{"nick":"indutny","message":"yw","date":"2012-12-19T10:52:53.489Z","type":"message"}
{"nick":"rendar","message":"question, the uv_read, be it async or sync, in both cases put forward the current position (that one got by lseek()) of the file (a seekable stream) ?","date":"2012-12-19T11:02:14.306Z","type":"message"}
{"nick":"yawnt","message":"fyi, Local<Value>::New(Null()) worked as well","date":"2012-12-19T11:07:17.030Z","type":"message"}
{"nick":"yawnt","message":":)","date":"2012-12-19T11:07:21.043Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: depends. if you do a positional read, i.e. specify the offset, it uses pread()","date":"2012-12-19T11:08:28.039Z","type":"message"}
{"nick":"bnoordhuis","message":"pread doesn't touch the file position","date":"2012-12-19T11:08:38.408Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: btw, uv_read or uv_fs_read?","date":"2012-12-19T11:09:13.263Z","type":"message"}
{"nick":"bnoordhuis","message":"i assumed you meant the latter","date":"2012-12-19T11:09:24.432Z","type":"message"}
{"nick":"rendar","message":"yeah","date":"2012-12-19T11:11:43.985Z","type":"message"}
{"nick":"rendar","message":"uv_fs_read","date":"2012-12-19T11:11:44.167Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: i thought uv_read could be used as a general read, then it dispatched to the various uv_*_read() checking the type of the stream..","date":"2012-12-19T11:12:36.988Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: not quite. it only works for uv_pipe_t, uv_tcp_t and uv_tty_t","date":"2012-12-19T11:13:08.484Z","type":"message"}
{"nick":"rendar","message":"got it","date":"2012-12-19T11:13:32.416Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: the thing is, in some platform (e.g. Windows) if i perform an async read (or write) with a seekable stream, say for example with ReadFile, the position pointer is not touched. So i guess libuv have to change this behavior manually, changing that pointer with the apis","date":"2012-12-19T11:15:13.644Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: that's possible","date":"2012-12-19T11:16:39.942Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: yeah, but i don't see anything similar in 'fs__read'","date":"2012-12-19T11:17:21.071Z","type":"message"}
{"nick":"bnoordhuis","message":"in src/unix/fs.c or src/win/fs.c?","date":"2012-12-19T11:17:43.052Z","type":"message"}
{"nick":"rendar","message":"src/win/fs.c","date":"2012-12-19T11:17:53.901Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus is the one to ask about that","date":"2012-12-19T11:18:26.496Z","type":"message"}
{"nick":"rendar","message":"thanks","date":"2012-12-19T11:18:39.355Z","type":"message"}
{"nick":"rendar","message":":)","date":"2012-12-19T11:18:40.008Z","type":"message"}
{"nick":"bnoordhuis","message":"http_simple, buffer/1 with keep-alive on. before: 25.10 req/s, after: 14175.07 req/s","date":"2012-12-19T11:33:35.422Z","type":"message"}
{"nick":"bnoordhuis","message":"it's not every day you implement a 565x speedup :)","date":"2012-12-19T11:33:51.757Z","type":"message"}
{"nick":"rendar","message":"cool! :)","date":"2012-12-19T11:36:44.719Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: this enormous speed up is due of keep-alive on ?","date":"2012-12-19T11:37:00.879Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: no, it's because failed to pack the http headers and the response body into a single tcp packet","date":"2012-12-19T11:37:25.506Z","type":"message"}
{"nick":"rendar","message":"oh","date":"2012-12-19T11:37:41.188Z","type":"message"}
{"nick":"bnoordhuis","message":"if you send a string as a response it basically does response = headers + body","date":"2012-12-19T11:37:44.157Z","type":"message"}
{"nick":"bnoordhuis","message":"but with a buffer as the body you get write(headers); write(body)","date":"2012-12-19T11:37:58.009Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: yeah, a typical http thing","date":"2012-12-19T11:38:01.549Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: but that write(headrs); write(body); is intented to writing into a buffer or into the socket?","date":"2012-12-19T11:41:13.436Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: it writes to the socket. it's technically possible for both writes to end up in the same packet","date":"2012-12-19T11:41:57.135Z","type":"message"}
{"nick":"bnoordhuis","message":"but in practice it never seems to happen, at least not on localhost","date":"2012-12-19T11:42:06.413Z","type":"message"}
{"nick":"rendar","message":"hmm i see","date":"2012-12-19T11:42:29.647Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: so 2 or more write() can be packed into a single tcp packet, but how? with some ioctl? it seems an OS thing :)","date":"2012-12-19T11:43:02.041Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: oh, sorry. i was referring to net.Socket.write() back there","date":"2012-12-19T11:43:27.043Z","type":"message"}
{"nick":"rendar","message":"oh i see","date":"2012-12-19T11:43:39.457Z","type":"message"}
{"nick":"bnoordhuis","message":"which passes it off to libuv. libuv then does the actual write(2) or writev(2) syscall","date":"2012-12-19T11:43:53.626Z","type":"message"}
{"nick":"rendar","message":"yeah","date":"2012-12-19T11:44:01.826Z","type":"message"}
{"nick":"rendar","message":"well, in which cases writev is preferred?","date":"2012-12-19T11:44:14.650Z","type":"message"}
{"nick":"bnoordhuis","message":"if you have gather/scatter i/o","date":"2012-12-19T11:44:38.609Z","type":"message"}
{"nick":"bnoordhuis","message":"i.e. several buffers in disjointed places that all should be written out","date":"2012-12-19T11:44:51.073Z","type":"message"}
{"nick":"bnoordhuis","message":"libuv prefers write() because it's usually slightly faster than writev()","date":"2012-12-19T11:45:09.009Z","type":"message"}
{"nick":"bnoordhuis","message":"but there's still some room for improvement here, i think","date":"2012-12-19T11:45:24.122Z","type":"message"}
{"nick":"rendar","message":"yes i know that, but i mean, in which cases libuv selected the gather/scatter i/o? or is the user that tells libuv to do that?","date":"2012-12-19T11:45:27.973Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, the user","date":"2012-12-19T11:45:34.376Z","type":"message"}
{"nick":"rendar","message":"got it","date":"2012-12-19T11:45:38.591Z","type":"message"}
{"nick":"bnoordhuis","message":"when you call uv_write() with bufs > 1","date":"2012-12-19T11:45:44.787Z","type":"message"}
{"nick":"bnoordhuis","message":"but we should maybe optimize that and coalesce two uv_write() calls with bufs==1 into a single writev() instead of two write() syscalls","date":"2012-12-19T11:46:19.282Z","type":"message"}
{"nick":"rendar","message":"i see","date":"2012-12-19T11:46:24.232Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: you mean with a timer, which if expired and no other us_write has been called calls write(), instead calls writev() ?","date":"2012-12-19T11:47:29.263Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: possibly but not necessarily","date":"2012-12-19T11:48:03.558Z","type":"message"}
{"nick":"bnoordhuis","message":"a libuv stream handle has a list of pending writes","date":"2012-12-19T11:48:18.880Z","type":"message"}
{"nick":"bnoordhuis","message":"if length(list) > 1, it could coalesce the entries","date":"2012-12-19T11:48:37.645Z","type":"message"}
{"nick":"bnoordhuis","message":"but that takes some reshuffling","date":"2012-12-19T11:48:45.284Z","type":"message"}
{"nick":"rendar","message":"i see","date":"2012-12-19T11:49:36.904Z","type":"message"}
{"nick":"bnoordhuis","message":"in case you're wondering, it's the write_queue fields in include/uv-private/uv-unix.h","date":"2012-12-19T11:50:13.469Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: so when you actually call uv_write, it simply append a packet into that stream handle's list?!","date":"2012-12-19T11:50:22.102Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2012-12-19T11:50:28.744Z","type":"message"}
{"nick":"rendar","message":"oh, got it!","date":"2012-12-19T11:50:33.992Z","type":"message"}
{"nick":"bnoordhuis","message":"it tries to write it out immediately but if that's not possible, it goes into the queue","date":"2012-12-19T11:50:53.903Z","type":"message"}
{"nick":"rendar","message":"i see","date":"2012-12-19T11:51:22.102Z","type":"message"}
{"nick":"rendar","message":"it not possible = another async i/o is pending?","date":"2012-12-19T11:51:32.605Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: no, because the kernel's send buffer is full","date":"2012-12-19T11:52:08.170Z","type":"message"}
{"nick":"bnoordhuis","message":"i.e. write() returns EAGAIN","date":"2012-12-19T11:52:14.658Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: oh i see","date":"2012-12-19T11:52:19.882Z","type":"message"}
{"nick":"rendar","message":"so if write()==EAGAIN -> put into the list","date":"2012-12-19T11:52:39.863Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2012-12-19T11:52:58.944Z","type":"message"}
{"nick":"bnoordhuis","message":"or if there are already write reqs in the list","date":"2012-12-19T11:53:09.754Z","type":"message"}
{"nick":"rendar","message":"i'm reading the src, but what is that stuff starting with ngx_* ?","date":"2012-12-19T11:53:15.835Z","type":"message"}
{"nick":"bnoordhuis","message":"because you've got to send them out in order","date":"2012-12-19T11:53:16.515Z","type":"message"}
{"nick":"bnoordhuis","message":"it's the queue implementation we stole from nginx","date":"2012-12-19T11:53:28.458Z","type":"message"}
{"nick":"rendar","message":"yeah of course","date":"2012-12-19T11:53:29.832Z","type":"message"}
{"nick":"rendar","message":"i see","date":"2012-12-19T11:53:43.217Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: of course that is a interlocked list, i guess","date":"2012-12-19T11:53:53.204Z","type":"message"}
{"nick":"bnoordhuis","message":"though nginx's is heavily inspired by the queue implementations from the linux and freebsd kernel sources","date":"2012-12-19T11:53:53.332Z","type":"message"}
{"nick":"bnoordhuis","message":"it's an intrusive data structure","date":"2012-12-19T11:54:02.767Z","type":"message"}
{"nick":"bnoordhuis","message":"i.e. you embed the ngx_queue_t in your own structs","date":"2012-12-19T11:54:14.744Z","type":"message"}
{"nick":"rendar","message":"mm i see","date":"2012-12-19T11:54:16.870Z","type":"message"}
{"nick":"rendar","message":"like a linked intrusive list","date":"2012-12-19T11:54:30.963Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2012-12-19T11:54:33.416Z","type":"message"}
{"nick":"rendar","message":"yeah cool","date":"2012-12-19T11:54:40.673Z","type":"message"}
{"nick":"bnoordhuis","message":"that's one benefit c has over c++","date":"2012-12-19T11:54:43.149Z","type":"message"}
{"nick":"bnoordhuis","message":"intrusive data structures are technically illegal in c++","date":"2012-12-19T11:54:55.985Z","type":"message"}
{"nick":"bnoordhuis","message":"though we still use them in node.js - don't tell anyone :)","date":"2012-12-19T11:55:11.240Z","type":"message"}
{"nick":"rendar","message":"well, i've done an intrusive list and hash map time ago, basically your class should inherit from an hook class, for intrusive stuff :)","date":"2012-12-19T11:55:24.856Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: ehehe","date":"2012-12-19T11:55:32.456Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: like: struct IOReq : public IntrusiveListHook { stuf... };","date":"2012-12-19T11:56:12.002Z","type":"message"}
{"nick":"bnoordhuis","message":"^ that's only legal if neither class/struct has virtual members","date":"2012-12-19T11:56:31.634Z","type":"message"}
{"nick":"rendar","message":"well, there is a trick also for virtual members","date":"2012-12-19T11:57:04.152Z","type":"message"}
{"nick":"bnoordhuis","message":"err, i'm assuming you do pointer arithmetic to look up the embedding class","date":"2012-12-19T11:57:12.779Z","type":"message"}
{"nick":"bnoordhuis","message":"if not, disregard what i said :)","date":"2012-12-19T11:57:20.236Z","type":"message"}
{"nick":"rendar","message":"it is used in boost's intrusive_list iirc, i will check","date":"2012-12-19T11:57:25.620Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: oh yeah","date":"2012-12-19T11:57:37.347Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: if you do pointer arithmetic it would be cumbersome","date":"2012-12-19T11:57:45.337Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, and dangerous - the c++ spec doesn't make guarantees about how or where the vtable pointer is laid out","date":"2012-12-19T11:58:19.470Z","type":"message"}
{"nick":"rendar","message":"exactly","date":"2012-12-19T11:58:34.409Z","type":"message"}
{"nick":"rendar","message":"with that intrusive structure you could use member function to manage it, you don't need pointer math anymore","date":"2012-12-19T11:59:05.160Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: i'm thinking of something like this -> class foo { struct intrusive_list list; };","date":"2012-12-19T12:00:05.898Z","type":"message"}
{"nick":"rendar","message":"btw this is an interesting point i wish to discuss: when libuv completed async i/o with the threadpool, is the threadpool itself that run the callback, or it just queue it to the caller thread?","date":"2012-12-19T12:00:24.150Z","type":"message"}
{"nick":"bnoordhuis","message":"then you do foo* p = container_of(list_ptr, class foo, list)","date":"2012-12-19T12:00:28.524Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: yeah right","date":"2012-12-19T12:00:38.266Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: the callback gets run on the thread that called the uv_fs function","date":"2012-12-19T12:01:09.667Z","type":"message"}
{"nick":"rendar","message":"i see","date":"2012-12-19T12:01:19.454Z","type":"message"}
{"nick":"rendar","message":"so libuv ensures that every callback will be called from one thread","date":"2012-12-19T12:01:39.196Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2012-12-19T12:01:43.118Z","type":"message"}
{"nick":"rendar","message":"always the same","date":"2012-12-19T12:01:45.610Z","type":"message"}
{"nick":"bnoordhuis","message":"think of the uv_fs stuff as a thin shim over uv_queue_work","date":"2012-12-19T12:02:03.698Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: yeah","date":"2012-12-19T12:02:14.613Z","type":"message"}
{"nick":"bnoordhuis","message":"the work_cb gets called from the threadpool, the after_work_cb gets called from the original thread","date":"2012-12-19T12:02:24.024Z","type":"message"}
{"nick":"rendar","message":"i see","date":"2012-12-19T12:03:07.218Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: do you think it would be dangerous call the callback from the threadpool?","date":"2012-12-19T12:03:24.989Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: in general or in the particular case of uv_fs_*?","date":"2012-12-19T12:03:41.796Z","type":"message"}
{"nick":"rendar","message":"i mean in general","date":"2012-12-19T12:03:50.691Z","type":"message"}
{"nick":"bnoordhuis","message":"not if your data structures are protected by locks","date":"2012-12-19T12:04:08.759Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: your data structures = data used inside the callback scope?","date":"2012-12-19T12:04:43.486Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: i mean data structures that are shared by both threads","date":"2012-12-19T12:05:04.489Z","type":"message"}
{"nick":"bnoordhuis","message":"in general your callback will want to do something with the result","date":"2012-12-19T12:05:25.329Z","type":"message"}
{"nick":"bnoordhuis","message":"that usually involves updating some state or whatever","date":"2012-12-19T12:05:35.581Z","type":"message"}
{"nick":"rendar","message":"yeah","date":"2012-12-19T12:05:47.037Z","type":"message"}
{"nick":"bnoordhuis","message":"if that state is accessed by multiple threads, you need proper locking","date":"2012-12-19T12:05:49.532Z","type":"message"}
{"nick":"rendar","message":"i see","date":"2012-12-19T12:05:55.892Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: but i think this arises a problem: what about if i have 2 async i/o pending R1 and R2 requests, (assuming the callback is runned by the threadpool) and they are passed to the thread pool to threads T1 (for R1) and T2 (for R2) but for the unpredictable scheduling of the OS, T2 is runned _before_ T1, even if the i/o request R1 happened _before_ R2? shouldn't that mess things up?","date":"2012-12-19T12:08:14.714Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: why would that be an issue?","date":"2012-12-19T12:09:40.961Z","type":"message"}
{"nick":"bnoordhuis","message":"if you want them run in order, you shouldn't start the second req until the first one has completed","date":"2012-12-19T12:10:08.649Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: hmmm right, so basically you call other i/o operations directly form the callback","date":"2012-12-19T12:10:42.853Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2012-12-19T12:10:49.759Z","type":"message"}
{"nick":"rendar","message":"yeah right, that absoltely makes sense","date":"2012-12-19T12:11:18.890Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki[zzz]: ping","date":"2012-12-19T12:12:32.660Z","type":"message"}
{"nick":"sgallagh","date":"2012-12-19T12:34:05.623Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-12-19T13:09:29.241Z","type":"quit"}
{"nick":"bnoordhuis","message":"bleh, why is ab so shitty?","date":"2012-12-19T13:15:55.045Z","type":"message"}
{"nick":"bnoordhuis","message":"ab -k with a server that responds with Connection: keep-alive, Transfer-Encoding: chunked hangs ab :/","date":"2012-12-19T13:21:23.848Z","type":"message"}
{"nick":"bnoordhuis","action":"goes off to write a libuv+http_parser ab replacement","date":"2012-12-19T13:21:59.934Z","type":"action"}
{"nick":"loladiro","date":"2012-12-19T13:57:17.776Z","type":"join"}
{"nick":"indutny","message":"hahaha","date":"2012-12-19T14:08:55.302Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: finally","date":"2012-12-19T14:08:59.540Z","type":"message"}
{"nick":"indutny","message":"I was waiting for it for ages","date":"2012-12-19T14:09:03.462Z","type":"message"}
{"nick":"bnoordhuis","message":"i've been thinking about it for a while now","date":"2012-12-19T14:09:29.741Z","type":"message"}
{"nick":"indutny","message":"and?","date":"2012-12-19T14:09:37.208Z","type":"message"}
{"nick":"bnoordhuis","message":"today ab finally pissed me off one time too many","date":"2012-12-19T14:09:43.961Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2012-12-19T14:09:47.140Z","type":"message"}
{"nick":"indutny","message":"well, I was thinking about it many times","date":"2012-12-19T14:09:52.449Z","type":"message"}
{"nick":"indutny","message":"considering that siege is completely impredictable","date":"2012-12-19T14:10:00.416Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, and not that useful for what i need","date":"2012-12-19T14:10:13.249Z","type":"message"}
{"nick":"indutny","message":"indeed","date":"2012-12-19T14:10:18.917Z","type":"message"}
{"nick":"mmalecki[zzz]","message":"bnoordhuis: pong","date":"2012-12-19T14:10:20.832Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: if it'll support tls","date":"2012-12-19T14:10:24.633Z","type":"message"}
{"nick":"bnoordhuis","message":"siege is probably okay if you want to simulate a user","date":"2012-12-19T14:10:27.478Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I would be really pleased","date":"2012-12-19T14:10:29.004Z","type":"message"}
{"nick":"mmalecki[zzz]","new_nick":"mmalecki","date":"2012-12-19T14:10:34.806Z","type":"nick"}
{"nick":"bnoordhuis","message":"i'll see what i can do","date":"2012-12-19T14:10:35.193Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: simulate user - sounds quite vague","date":"2012-12-19T14:10:37.361Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i.e. a user clicking around on a website","date":"2012-12-19T14:10:50.447Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: though, benchmarking tls is as hard as writing fast tls server","date":"2012-12-19T14:10:50.668Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: it's still pretty vague :)","date":"2012-12-19T14:10:58.728Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: pong yourself. i may have a performance patch that's worth testing","date":"2012-12-19T14:11:16.919Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2012-12-19T14:11:22.641Z","type":"message"}
{"nick":"indutny","message":"pong yourself","date":"2012-12-19T14:11:39.918Z","type":"message"}
{"nick":"indutny","message":"you know how is it called","date":"2012-12-19T14:11:43.065Z","type":"message"}
{"nick":"indutny","message":"icmp spoofing","date":"2012-12-19T14:11:48.340Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: https://github.com/bnoordhuis/node/compare/joyent:v0.8...bnoordhuis:http-pack-buffer <- but don't deploy right away :)","date":"2012-12-19T14:13:24.884Z","type":"message"}
{"nick":"bnoordhuis","message":"do you guys do res.end(buf) somewhere?","date":"2012-12-19T14:13:36.867Z","type":"message"}
{"nick":"bnoordhuis","message":"note buf, not string","date":"2012-12-19T14:13:46.407Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: maybe interesting for you too","date":"2012-12-19T14:14:10.105Z","type":"message"}
{"nick":"indutny","message":"yes it is","date":"2012-12-19T14:14:29.665Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: unlikely that we do","date":"2012-12-19T14:14:35.976Z","type":"message"}
{"nick":"indutny","message":"what is performance improvement?","date":"2012-12-19T14:14:37.983Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: oh, a measly 750x","date":"2012-12-19T14:15:02.740Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: on my system, i went from 250 req/s to nearly 20k req/s :)","date":"2012-12-19T14:15:33.810Z","type":"message"}
{"nick":"bnoordhuis","message":"err, 25 req/s","date":"2012-12-19T14:15:41.741Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: that patch, I call that cheating ;)","date":"2012-12-19T14:16:12.715Z","type":"message"}
{"nick":"bnoordhuis","message":"you say that as if it's a bad thing :)","date":"2012-12-19T14:16:25.726Z","type":"message"}
{"nick":"bnoordhuis","message":"the intriguing thing is it's been like that since at least 0.6.0 and no one's complained","date":"2012-12-19T14:16:57.766Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Vlad Tudose\u000f \u00037master\u000f * \u00024b115f8\u0002 : build: build libuv.a and libuv.so in different dirs  Fixes #659. (+1 more commits) - http://git.io/GkPxmA","date":"2012-12-19T14:35:31.060Z","type":"message"}
{"nick":"travis-ci","date":"2012-12-19T14:37:15.104Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#969 (master - 4b115f8 : Vlad Tudose): The build passed.","date":"2012-12-19T14:37:15.238Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/0820be70084a...4b115f89bf54","date":"2012-12-19T14:37:15.238Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/3740049","date":"2012-12-19T14:37:15.238Z","type":"message"}
{"nick":"travis-ci","date":"2012-12-19T14:37:15.238Z","type":"part"}
{"nick":"piscisaureus_","date":"2012-12-19T14:49:59.621Z","type":"join"}
{"nick":"piscisaureus_","message":"rendar: why do you need to change the file position?","date":"2012-12-19T14:51:55.220Z","type":"message"}
{"nick":"indexzero","date":"2012-12-19T14:58:00.667Z","type":"join"}
{"nick":"kazupon","date":"2012-12-19T15:11:26.991Z","type":"join"}
{"nick":"indutny","message":"piscisaureus_: bertje","date":"2012-12-19T15:13:14.922Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: please land inlined assembly","date":"2012-12-19T15:13:15.050Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: it's time","date":"2012-12-19T15:13:18.672Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: and drunk wednesday is not a reason to not do it","date":"2012-12-19T15:13:42.294Z","type":"message"}
{"nick":"joshthecoder","date":"2012-12-19T15:23:44.799Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2012-12-19T15:33:38.356Z","type":"quit"}
{"nick":"warz","date":"2012-12-19T15:37:49.297Z","type":"join"}
{"nick":"warz","reason":"Changing host","date":"2012-12-19T15:37:49.475Z","type":"quit"}
{"nick":"warz","date":"2012-12-19T15:37:49.607Z","type":"join"}
{"nick":"isaacs","message":"good morning","date":"2012-12-19T15:45:10.005Z","type":"message"}
{"nick":"indutny","message":"morning","date":"2012-12-19T15:45:30.524Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: re the pummel tests, one is trivial but the other... is not.","date":"2012-12-19T15:46:53.443Z","type":"message"}
{"nick":"bnoordhuis","message":"morning isaacs","date":"2012-12-19T15:47:16.176Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: test/pummel/test-net-write-callbacks.js is triky","date":"2012-12-19T15:47:17.913Z","type":"message"}
{"nick":"bnoordhuis","message":"what's the issue?","date":"2012-12-19T15:47:21.282Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: getting a stack overflow","date":"2012-12-19T15:47:26.973Z","type":"message"}
{"nick":"isaacs","message":"streams2 is using recursion for something that was done with a loop before.","date":"2012-12-19T15:47:41.363Z","type":"message"}
{"nick":"isaacs","message":"so i need to fix that","date":"2012-12-19T15:47:44.183Z","type":"message"}
{"nick":"bnoordhuis","message":"you could add tail recursion to v8 :)","date":"2012-12-19T15:48:01.196Z","type":"message"}
{"nick":"isaacs","message":"hahaha","date":"2012-12-19T15:48:04.303Z","type":"message"}
{"nick":"isaacs","message":"that'd be nice :)","date":"2012-12-19T15:48:07.723Z","type":"message"}
{"nick":"kazupon","date":"2012-12-19T15:48:22.622Z","type":"join"}
{"nick":"tjfontaine","message":"bnoordhuis: $20 and a case of beer for you when it's done","date":"2012-12-19T15:48:28.285Z","type":"message"}
{"nick":"isaacs","message":"i tried using nextTick, but it's *crazy* slow in this case, and gives me thousands of warnings.","date":"2012-12-19T15:48:30.794Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2012-12-19T15:48:31.147Z","type":"quit"}
{"nick":"isaacs","message":"needs a more involved refactor","date":"2012-12-19T15:48:40.452Z","type":"message"}
{"nick":"mmalecki","new_nick":"mmalecki[out]","date":"2012-12-19T15:48:48.505Z","type":"nick"}
{"nick":"bnoordhuis","message":"tjfontaine: i may prostitute my art but at least i'm not cheap","date":"2012-12-19T15:49:06.528Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: 25$?","date":"2012-12-19T15:49:17.768Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: what's that in real money?","date":"2012-12-19T15:49:32.273Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2012-12-19T15:49:39.624Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny, tjfontaine: in case you're wondering, c9 is effectively bankrupt. the days of free node.js sponsorship are over","date":"2012-12-19T15:51:13.372Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ok ok","date":"2012-12-19T15:51:29.717Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: 30$","date":"2012-12-19T15:51:31.664Z","type":"message"}
{"nick":"indutny","message":"you made me cry","date":"2012-12-19T15:51:42.783Z","type":"message"}
{"nick":"indutny","message":"but that's the final price","date":"2012-12-19T15:51:50.133Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: btw, I'm still receiving tons of email from c9","date":"2012-12-19T15:52:03.881Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so I know","date":"2012-12-19T15:52:09.417Z","type":"message"}
{"nick":"bnoordhuis","message":"me too. it'll pass","date":"2012-12-19T15:52:15.202Z","type":"message"}
{"nick":"indutny","message":"I don't understand benchmarking","date":"2012-12-19T15:53:15.495Z","type":"message"}
{"nick":"indutny","message":"seriously","date":"2012-12-19T15:53:15.630Z","type":"message"}
{"nick":"indutny","message":"I don't get it","date":"2012-12-19T15:53:16.809Z","type":"message"}
{"nick":"bnoordhuis","message":"i have a t-shirt, 'ask me about benchmarking'","date":"2012-12-19T15:53:34.293Z","type":"message"}
{"nick":"indutny","message":"especially for multi-threaded apps","date":"2012-12-19T15:53:34.474Z","type":"message"}
{"nick":"piscisaureus_","message":"so people, in case you were wondering, c9.io is not going away or anything.","date":"2012-12-19T15:53:35.378Z","type":"message"}
{"nick":"tjfontaine","message":"hrm","date":"2012-12-19T15:53:57.505Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: bnoordhuis: why are you guys discussing it there? :)","date":"2012-12-19T15:54:55.304Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: because knowing is half the battle","date":"2012-12-19T15:55:07.396Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: so what's your benchmarking issue?","date":"2012-12-19T15:55:15.787Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: tlsnappy","date":"2012-12-19T15:55:20.356Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I can't figure out what has changed","date":"2012-12-19T15:55:26.674Z","type":"message"}
{"nick":"indutny","message":"and why performance degraded in 0.10","date":"2012-12-19T15:55:32.917Z","type":"message"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2012-12-19T15:55:37.260Z","type":"quit"}
{"nick":"indutny","message":"I mean 0.9.4-pre","date":"2012-12-19T15:55:38.929Z","type":"message"}
{"nick":"indutny","message":"I suppose event-loop ","date":"2012-12-19T15:55:52.386Z","type":"message"}
{"nick":"indutny","message":"is much more busy","date":"2012-12-19T15:55:56.437Z","type":"message"}
{"nick":"indutny","message":"and slow at dispatching sockets to threads","date":"2012-12-19T15:56:05.028Z","type":"message"}
{"nick":"sgallagh","date":"2012-12-19T15:56:08.860Z","type":"join"}
{"nick":"indutny","message":"because threads are doing relatively the same work","date":"2012-12-19T15:56:12.462Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: run perf and compare the logs, it's got a diff mode","date":"2012-12-19T15:56:12.978Z","type":"message"}
{"nick":"indutny","message":"I can't run","date":"2012-12-19T15:56:19.697Z","type":"message"}
{"nick":"indutny","message":"it","date":"2012-12-19T15:56:20.697Z","type":"message"}
{"nick":"indutny","message":"well","date":"2012-12-19T15:56:23.622Z","type":"message"}
{"nick":"indutny","message":"I'll try again","date":"2012-12-19T15:56:25.844Z","type":"message"}
{"nick":"indutny","message":"but last time I was seeing some wierd VM-specific stuff","date":"2012-12-19T15:56:35.513Z","type":"message"}
{"nick":"indutny","message":"you should remember it","date":"2012-12-19T15:56:41.515Z","type":"message"}
{"nick":"bnoordhuis","message":"then don't run it in a vm :)","date":"2012-12-19T15:56:44.889Z","type":"message"}
{"nick":"indutny","message":"hahah","date":"2012-12-19T15:56:49.872Z","type":"message"}
{"nick":"indutny","message":"then buy me a notebook","date":"2012-12-19T15:57:02.750Z","type":"message"}
{"nick":"indutny","message":"oh, that's not hipster","date":"2012-12-19T15:57:10.293Z","type":"message"}
{"nick":"indutny","message":"I should name it laptop","date":"2012-12-19T15:57:15.535Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-19T15:57:21.826Z","type":"message"}
{"nick":"bnoordhuis","message":"do it in the cloud","date":"2012-12-19T15:57:22.087Z","type":"message"}
{"nick":"indutny","message":"shower time","date":"2012-12-19T15:57:24.785Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: meh, cloud is so hipster","date":"2012-12-19T15:57:29.010Z","type":"message"}
{"nick":"bnoordhuis","message":"it sounds dirty too, phrased like that","date":"2012-12-19T15:57:38.785Z","type":"message"}
{"nick":"bnoordhuis","message":"\"do it in the cloud\"","date":"2012-12-19T15:57:42.030Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: this recursion/iteration thing is most likely also responsible for some lost performance","date":"2012-12-19T16:01:01.751Z","type":"message"}
{"nick":"isaacs","message":"so that's good","date":"2012-12-19T16:01:04.791Z","type":"message"}
{"nick":"isaacs","message":"i was able to reclaim about 40% of our lost 40% last night","date":"2012-12-19T16:01:34.271Z","type":"message"}
{"nick":"isaacs","message":"the rest will be a bit more difficult.","date":"2012-12-19T16:01:42.801Z","type":"message"}
{"nick":"bnoordhuis","message":"a wise man once said \"the first 90% is easy\"","date":"2012-12-19T16:02:03.096Z","type":"message"}
{"nick":"bnoordhuis","message":"\"it's the other 90%\"","date":"2012-12-19T16:02:08.857Z","type":"message"}
{"nick":"dap","date":"2012-12-19T16:02:21.042Z","type":"join"}
{"nick":"bnoordhuis","message":"okay, biab","date":"2012-12-19T16:03:27.703Z","type":"message"}
{"nick":"isaacs","message":"yeah, no shit on that one","date":"2012-12-19T16:04:18.599Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-12-19T16:14:24.542Z","type":"message"}
{"nick":"indutny","message":"ttyl","date":"2012-12-19T16:14:26.891Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: working on asm stuff","date":"2012-12-19T16:14:37.596Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: oh my goodness!","date":"2012-12-19T16:14:46.467Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: thank you :)","date":"2012-12-19T16:14:49.137Z","type":"message"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2012-12-19T16:18:17.762Z","type":"quit"}
{"nick":"sgallagh","message":"bnoordhuis, isaacs: BTW, I meant to tell you guys: Node.js was officially accepted into the Fedora Project this week. I'll be working on npm in the new year.","date":"2012-12-19T16:19:10.740Z","type":"message"}
{"nick":"piscisaureus_","message":"sgallagh: yay! :-)","date":"2012-12-19T16:27:49.400Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: ok, aesni fails to compile without our openssl hacks. that's the last thing I need to sort out","date":"2012-12-19T16:28:17.675Z","type":"message"}
{"nick":"indexzero","new_nick":"indexzero[brb","date":"2012-12-19T16:29:03.433Z","type":"nick"}
{"nick":"indexzero[brb","new_nick":"indexzero[brb-co","date":"2012-12-19T16:29:18.111Z","type":"nick"}
{"nick":"indexzero[brb-co","new_nick":"indexzero[brb]","date":"2012-12-19T16:29:27.828Z","type":"nick"}
{"nick":"isaacs","message":"piscisaureus_: i think this recursion/iteration thing may also be contributing heavily to the http slowdown","date":"2012-12-19T16:37:35.116Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-12-19T16:44:06.290Z","type":"quit"}
{"nick":"isaacs","message":"you know what would be awesome?  `make test-just-the-failing-ones`","date":"2012-12-19T16:46:38.010Z","type":"message"}
{"nick":"tjfontaine","message":"after playing yesterday, I'm fairly positive the test harness needs to be revamped :)","date":"2012-12-19T17:00:54.704Z","type":"message"}
{"nick":"AvianFlu","date":"2012-12-19T17:02:13.597Z","type":"join"}
{"nick":"indexzero[brb]","new_nick":"indexzero","date":"2012-12-19T17:04:50.396Z","type":"nick"}
{"nick":"benoitc","reason":"Ping timeout: 245 seconds","date":"2012-12-19T17:05:01.877Z","type":"quit"}
{"nick":"isaacs","message":"bnoordhuis: review? https://github.com/isaacs/node/compare/streams2-pummelfix","date":"2012-12-19T17:07:14.556Z","type":"message"}
{"nick":"benoitc","date":"2012-12-19T17:08:40.849Z","type":"join"}
{"nick":"isaacs","message":"sgallagh: that's great news!","date":"2012-12-19T17:10:35.465Z","type":"message"}
{"nick":"isaacs","message":"sgallagh: so, of course, the big question...","date":"2012-12-19T17:10:46.945Z","type":"message"}
{"nick":"isaacs","message":"sgallagh: is it caled \"node\"?","date":"2012-12-19T17:10:50.285Z","type":"message"}
{"nick":"isaacs","message":"sgallagh: or at least, does `yum install nodejs` create a binary called \"node\"?","date":"2012-12-19T17:11:08.975Z","type":"message"}
{"nick":"sgallagh","message":"isaacs: 'yum install nodejs' creates /usr/bin/node","date":"2012-12-19T17:11:59.045Z","type":"message"}
{"nick":"sgallagh","message":"The 'node' ham-radio folks agreed to change their binary name","date":"2012-12-19T17:12:35.997Z","type":"message"}
{"nick":"sgallagh","message":"On Fedora, at least. I don't pretend to speak for other distros","date":"2012-12-19T17:12:47.803Z","type":"message"}
{"nick":"sgallagh","message":"isaacs: My next tasks are npm and trying to figure out if I can backport to RHEL 6 without SPDY patches in openssl","date":"2012-12-19T17:13:58.270Z","type":"message"}
{"nick":"joshthecoder","reason":"Quit: Leaving...","date":"2012-12-19T17:16:08.852Z","type":"quit"}
{"nick":"isaacs","message":"sgallagh: \\o/","date":"2012-12-19T17:30:57.252Z","type":"message"}
{"nick":"isaacs","message":"sgallagh: npm doesn't use spdy at all","date":"2012-12-19T17:31:04.212Z","type":"message"}
{"nick":"isaacs","message":"sgallagh: so it should* work fine","date":"2012-12-19T17:31:15.382Z","type":"message"}
{"nick":"isaacs","message":"* should = \"most dangerous warning sign\"","date":"2012-12-19T17:31:23.192Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-19T17:31:29.570Z","type":"quit"}
{"nick":"sgallagh","message":"isaacs: Sorry, I shouldn't have put that in the same sentence","date":"2012-12-19T17:31:44.654Z","type":"message"}
{"nick":"sgallagh","message":"I was talking about Node support for SPDY, and the npm stuff was separate","date":"2012-12-19T17:32:07.094Z","type":"message"}
{"nick":"tjfontaine","message":"not sure why failures don't report appropriately on this view http://jenkins.atxconsulting.com:8080/job/nodejs-master/lastCompletedBuild/testReport/","date":"2012-12-19T17:34:37.165Z","type":"message"}
{"nick":"mikeal","date":"2012-12-19T17:45:30.617Z","type":"join"}
{"nick":"isaacs","message":"indutny, bnoordhuis, piscisaureus_: https://docs.google.com/spreadsheet/ccc?key=0AganzoeqkiHddE9uRlA5WS0xSF9NTGN1QS0zZ3FRSWc#gid=0","date":"2012-12-19T17:55:03.686Z","type":"message"}
{"nick":"isaacs","message":"for some reason that is unclear to me at the moment, smartos is getting like 500q/s against http_simple.js","date":"2012-12-19T17:55:29.266Z","type":"message"}
{"nick":"TooTallNate","date":"2012-12-19T17:55:32.312Z","type":"join"}
{"nick":"isaacs","message":"which is just... idon't even know what to make of that, really","date":"2012-12-19T17:55:41.866Z","type":"message"}
{"nick":"isaacs","message":"yesterday it was way different","date":"2012-12-19T17:55:47.945Z","type":"message"}
{"nick":"isaacs","message":"like, many thousands","date":"2012-12-19T17:55:50.895Z","type":"message"}
{"nick":"loladiro","date":"2012-12-19T17:58:22.774Z","type":"join"}
{"nick":"sblom","date":"2012-12-19T18:03:05.563Z","type":"join"}
{"nick":"bentkus","date":"2012-12-19T18:04:11.314Z","type":"join"}
{"nick":"bentkus","message":"bnoordhuis: found the commit which made libuv http benchmarks slow?","date":"2012-12-19T18:04:28.483Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-12-19T18:05:28.407Z","type":"quit"}
{"nick":"`3rdEden","date":"2012-12-19T18:05:30.360Z","type":"join"}
{"nick":"piscisaureus_","message":"isaacs: I have no access to that file..","date":"2012-12-19T18:06:21.101Z","type":"message"}
{"nick":"isaacs","message":"oh... hrm","date":"2012-12-19T18:06:24.731Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: requested it.","date":"2012-12-19T18:06:30.467Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: https://docs.google.com/spreadsheet/ccc?key=0AganzoeqkiHddE9uRlA5WS0xSF9NTGN1QS0zZ3FRSWc","date":"2012-12-19T18:07:05.850Z","type":"message"}
{"nick":"isaacs","message":"i just made it public-view","date":"2012-12-19T18:07:09.850Z","type":"message"}
{"nick":"isaacs","message":"something's fuxored with ab on smartosdrone","date":"2012-12-19T18:07:17.650Z","type":"message"}
{"nick":"isaacs","message":"so i'm trying to figure that out","date":"2012-12-19T18:07:24.610Z","type":"message"}
{"nick":"isaacs","message":"but on osx, i've gotten the regression down to ~4%","date":"2012-12-19T18:07:39.310Z","type":"message"}
{"nick":"stagas","reason":"Ping timeout: 244 seconds","date":"2012-12-19T18:07:53.117Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus_: the *fascinating* thing is that the std deviation in the results is also way lower, though","date":"2012-12-19T18:07:59.279Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: so, it's slightly slower, but much smoother.","date":"2012-12-19T18:08:09.710Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: so there is one thing about your benchmarks... how did you run them? did you alternate between streams1 or streams2","date":"2012-12-19T18:08:32.045Z","type":"message"}
{"nick":"piscisaureus_","message":"or do all stream1 first, then all streams2","date":"2012-12-19T18:08:45.065Z","type":"message"}
{"nick":"piscisaureus_","message":"?","date":"2012-12-19T18:08:46.525Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: all 1 first, then all 2","date":"2012-12-19T18:08:52.529Z","type":"message"}
{"nick":"isaacs","message":"but i can alternate them quite easily","date":"2012-12-19T18:08:58.589Z","type":"message"}
{"nick":"piscisaureus_","message":"well","date":"2012-12-19T18:09:11.456Z","type":"message"}
{"nick":"piscisaureus_","message":"I wonder why the first one is an outlier","date":"2012-12-19T18:09:20.559Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: the first one is warming up teh vm","date":"2012-12-19T18:09:27.878Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: that's the first 10s of the server's life","date":"2012-12-19T18:09:33.578Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: all the numbers are a single node server.","date":"2012-12-19T18:09:43.608Z","type":"message"}
{"nick":"piscisaureus_","message":"it could be that in subsequent benchmarks, ephemeral ports  cause the benchmark to throttle","date":"2012-12-19T18:09:50.692Z","type":"message"}
{"nick":"isaacs","message":"(ie, all the numbers in teh column)","date":"2012-12-19T18:09:52.850Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: it shouldnt'","date":"2012-12-19T18:10:09.778Z","type":"message"}
{"nick":"isaacs","message":"sudo sysctl -w net.inet.ip.portrange.first=12000","date":"2012-12-19T18:10:10.398Z","type":"message"}
{"nick":"isaacs","message":"sudo sysctl -w net.inet.tcp.msl=1000","date":"2012-12-19T18:10:10.528Z","type":"message"}
{"nick":"isaacs","message":"sudo sysctl -w kern.maxfiles=1000000 kern.maxfilesperproc=1000000","date":"2012-12-19T18:10:10.528Z","type":"message"}
{"nick":"TooTallNate","reason":"Ping timeout: 264 seconds","date":"2012-12-19T18:10:18.119Z","type":"quit"}
{"nick":"piscisaureus_","message":"isaacs: that's FD limit, not ephemeral ports","date":"2012-12-19T18:10:24.684Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: there's nothing you can do about ephemeral ports running out","date":"2012-12-19T18:10:37.516Z","type":"message"}
{"nick":"isaacs","message":"oh, ok","date":"2012-12-19T18:10:39.917Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-12-19T18:10:40.977Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: so it could be interesting to try the benchmark 3 times","date":"2012-12-19T18:10:55.788Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: but with a significant time (e.g. minutes) between them","date":"2012-12-19T18:11:09.726Z","type":"message"}
{"nick":"piscisaureus_","message":"and see if the numbers are consistently higher","date":"2012-12-19T18:11:16.695Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: also, is this with or without keepalive?","date":"2012-12-19T18:11:24.503Z","type":"message"}
{"nick":"isaacs","message":"hmm.... without, i believe","date":"2012-12-19T18:11:32.807Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: right, so the ephemeral port issue is vulnerable","date":"2012-12-19T18:11:46.113Z","type":"message"}
{"nick":"isaacs","message":"i'll run again with -","date":"2012-12-19T18:11:53.257Z","type":"message"}
{"nick":"isaacs","message":"-k","date":"2012-12-19T18:11:55.247Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: sorry, I know this always takes a lot of time.","date":"2012-12-19T18:12:04.498Z","type":"message"}
{"nick":"isaacs","message":"there was a few minutes between the runs","date":"2012-12-19T18:12:05.427Z","type":"message"}
{"nick":"isaacs","message":"nono, it's good stuff","date":"2012-12-19T18:12:09.837Z","type":"message"}
{"nick":"piscisaureus_","message":"ok, that's good","date":"2012-12-19T18:12:09.967Z","type":"message"}
{"nick":"isaacs","message":"thanksf or the the feedback","date":"2012-12-19T18:12:12.717Z","type":"message"}
{"nick":"piscisaureus_","message":"it'd be nice to have CI for this :-)","date":"2012-12-19T18:12:25.833Z","type":"message"}
{"nick":"isaacs","message":"i added teh %-age change for all the individual runs","date":"2012-12-19T18:12:35.136Z","type":"message"}
{"nick":"isaacs","message":"the first one is 11% fewer q/s, but then it regains a bit later.","date":"2012-12-19T18:12:49.696Z","type":"message"}
{"nick":"isaacs","message":"so, yes, EP throttling is entirely possible.","date":"2012-12-19T18:12:57.906Z","type":"message"}
{"nick":"isaacs","message":"if the streams2 speed is a bit slower, then that could also explain the lower st dev in that case.","date":"2012-12-19T18:13:30.456Z","type":"message"}
{"nick":"isaacs","message":"because it doesn't hit the EP boundary as soon","date":"2012-12-19T18:13:39.086Z","type":"message"}
{"nick":"TooTallNate","date":"2012-12-19T18:14:01.886Z","type":"join"}
{"nick":"bentkus","message":"hello","date":"2012-12-19T18:14:25.103Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: also, the numbers are not that high in general. Is this on an air?","date":"2012-12-19T18:14:27.005Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: it's on my mbp","date":"2012-12-19T18:14:34.335Z","type":"message"}
{"nick":"piscisaureus_","message":"hmm","date":"2012-12-19T18:14:38.324Z","type":"message"}
{"nick":"isaacs","message":"which is a few years old at this point","date":"2012-12-19T18:14:40.255Z","type":"message"}
{"nick":"piscisaureus_","message":"ah ok","date":"2012-12-19T18:14:43.929Z","type":"message"}
{"nick":"isaacs","message":"these numbers are pretty much waht i expect.","date":"2012-12-19T18:14:53.515Z","type":"message"}
{"nick":"piscisaureus_","message":"i was going to say, I easily hit 8000 r/s on my (pretty fast) mbp","date":"2012-12-19T18:14:59.028Z","type":"message"}
{"nick":"piscisaureus_","message":"ok","date":"2012-12-19T18:15:02.166Z","type":"message"}
{"nick":"piscisaureus_","message":"then it's good :-)","date":"2012-12-19T18:15:05.042Z","type":"message"}
{"nick":"piscisaureus_","message":"(and for me that's on windows even)","date":"2012-12-19T18:15:15.350Z","type":"message"}
{"nick":"isaacs","message":"really, using ab for this is always kind of shitty","date":"2012-12-19T18:15:16.345Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah","date":"2012-12-19T18:15:21.556Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: there still is this msft test cluster :-0","date":"2012-12-19T18:15:32.068Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: it has linux machines too","date":"2012-12-19T18:15:37.803Z","type":"message"}
{"nick":"isaacs","message":"eah","date":"2012-12-19T18:19:39.461Z","type":"message"}
{"nick":"isaacs","message":"so, ran the streams1 with keepalive","date":"2012-12-19T18:21:44.731Z","type":"message"}
{"nick":"isaacs","message":"now waiting a bit before running the streams2 bench","date":"2012-12-19T18:22:03.271Z","type":"message"}
{"nick":"bentkus","reason":"Ping timeout: 252 seconds","date":"2012-12-19T18:26:44.489Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus_: https://docs.google.com/spreadsheet/ccc?key=0AganzoeqkiHddE9uRlA5WS0xSF9NTGN1QS0zZ3FRSWc","date":"2012-12-19T18:28:37.886Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: much more what i was expecting.","date":"2012-12-19T18:28:42.846Z","type":"message"}
{"nick":"isaacs","action":"sigh","date":"2012-12-19T18:28:45.016Z","type":"action"}
{"nick":"isaacs","message":"but still, from 40% to 20%, that's pretty winful.","date":"2012-12-19T18:28:59.756Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: yeah, good job!","date":"2012-12-19T18:29:15.313Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: so the first 20% took you a day. I expect everything else to be fixed by tomorrow :-p","date":"2012-12-19T18:29:41.845Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: probably","date":"2012-12-19T18:29:46.925Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: nice :-)","date":"2012-12-19T18:29:55.653Z","type":"message"}
{"nick":"isaacs","message":"so, i think we should go ahead and release 0.9.4 and spend the next month on performance.","date":"2012-12-19T18:30:02.105Z","type":"message"}
{"nick":"piscisaureus_","message":"sure","date":"2012-12-19T18:30:13.242Z","type":"message"}
{"nick":"isaacs","message":"node has a long and glorious history of perf regressions in unstable branches.","date":"2012-12-19T18:30:18.365Z","type":"message"}
{"nick":"isaacs","message":"we always make it back at the last minute.","date":"2012-12-19T18:30:23.445Z","type":"message"}
{"nick":"isaacs","message":"between the header string handling stuff, and some more streams2 optimizations, and the work on the libuv thread pool, i think we can certainly out-perform 0.8 by the end of january","date":"2012-12-19T18:31:26.434Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: re streams2-pummelfix, lgtm i guess","date":"2012-12-19T18:39:06.208Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm not really qualified to review it :)","date":"2012-12-19T18:39:14.733Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: get qualified, man!","date":"2012-12-19T18:39:25.469Z","type":"message"}
{"nick":"isaacs","action":"is going to start teaching streams2 seminars","date":"2012-12-19T18:39:32.399Z","type":"action"}
{"nick":"isaacs","message":"bnoordhuis: for the low low price of US$1000, you TOO can be Streams 2 Certified!","date":"2012-12-19T18:39:54.188Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-19T18:40:06.612Z","type":"quit"}
{"nick":"isaacs","message":"actually, tha'ts a great business model for Node.","date":"2012-12-19T18:40:24.588Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll wait for the webinar","date":"2012-12-19T18:40:29.798Z","type":"message"}
{"nick":"isaacs","message":"we should start training Node Certified Engineers and give them certificates and people will list NCE on their resume","date":"2012-12-19T18:40:48.048Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: what's sync mode?","date":"2012-12-19T18:41:05.654Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: sync mode is when _write(chunk,cb) calls cb() right away","date":"2012-12-19T18:41:16.908Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: ie, in the same tick","date":"2012-12-19T18:41:20.458Z","type":"message"}
{"nick":"bnoordhuis","message":"ah","date":"2012-12-19T18:41:24.105Z","type":"message"}
{"nick":"isaacs","message":"yes, this is terrible.","date":"2012-12-19T18:41:28.737Z","type":"message"}
{"nick":"isaacs","message":"however, sometimes a lowlevel right really is done synchronously, and you have more work to do, and may as well do it right now","date":"2012-12-19T18:41:44.878Z","type":"message"}
{"nick":"isaacs","message":"important especially for stdout/err","date":"2012-12-19T18:41:51.947Z","type":"message"}
{"nick":"bnoordhuis","message":"what about call stack depth?","date":"2012-12-19T18:42:00.509Z","type":"message"}
{"nick":"isaacs","message":"and for badly crafted userland streams, or crypto transform streams","date":"2012-12-19T18:42:14.787Z","type":"message"}
{"nick":"isaacs","message":"so, the call stack depth was the problem that broke pummel","date":"2012-12-19T18:42:23.187Z","type":"message"}
{"nick":"isaacs","message":"if you let it go past the timeout, eventually it crashes with a RangeError","date":"2012-12-19T18:42:32.467Z","type":"message"}
{"nick":"isaacs","message":"the fix here is to use a loop instead of recursion for that.","date":"2012-12-19T18:42:42.237Z","type":"message"}
{"nick":"isaacs","message":"(well, it recurses *once*, but that's fine)","date":"2012-12-19T18:42:49.966Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, but what about other streams?","date":"2012-12-19T18:42:56.282Z","type":"message"}
{"nick":"bnoordhuis","message":"calling things on the same tick is opening the door for loops","date":"2012-12-19T18:43:09.130Z","type":"message"}
{"nick":"bnoordhuis","message":"as in, too deep recursion","date":"2012-12-19T18:43:20.830Z","type":"message"}
{"nick":"bnoordhuis","message":"it might be okay if it's only done for internal things","date":"2012-12-19T18:44:38.300Z","type":"message"}
{"nick":"bnoordhuis","message":"but not with user callbacks","date":"2012-12-19T18:45:02.969Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: actually, i specifically made net and crypto do the horrible thing we probably don't want users to do, in order to make sure that the Writable class can handle it properly.","date":"2012-12-19T18:45:04.065Z","type":"message"}
{"nick":"isaacs","message":"the cb provided to the xposed write() method is *never* called in the same tick","date":"2012-12-19T18:45:21.065Z","type":"message"}
{"nick":"bnoordhuis","message":"ok","date":"2012-12-19T18:45:27.334Z","type":"message"}
{"nick":"isaacs","message":"if we're sync, then that gets nexTtick'd","date":"2012-12-19T18:45:31.335Z","type":"message"}
{"nick":"isaacs","message":"but the callback *we* provide *to* the user, if the *user* calls it immediately, well, we need to deal with that.","date":"2012-12-19T18:45:54.005Z","type":"message"}
{"nick":"isaacs","message":"we can't expect that users will deal with it if *we* do that, though","date":"2012-12-19T18:46:00.854Z","type":"message"}
{"nick":"isaacs","message":"loose in what you absorb, strict in what you secrete.","date":"2012-12-19T18:46:18.944Z","type":"message"}
{"nick":"isaacs","message":"or something like that","date":"2012-12-19T18:46:26.504Z","type":"message"}
{"nick":"loladiro","date":"2012-12-19T18:49:33.706Z","type":"join"}
{"nick":"dap","date":"2012-12-19T18:54:07.803Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u00029f4c098\u0002 : streams2: Process write buffer in a loop, not recursively  This fixes pum (+3 more commits) - http://git.io/L-wuBQ","date":"2012-12-19T18:55:41.852Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-19T18:56:30.133Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033piscisaureus\u000f created branch openssl-asm2 - http://git.io/medDwA","date":"2012-12-19T18:59:04.986Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: what do you think of that: --^","date":"2012-12-19T18:59:23.647Z","type":"message"}
{"nick":"creationix","message":"bnoordhuis, are you using luvit for anything?","date":"2012-12-19T19:03:25.924Z","type":"message"}
{"nick":"creationix","message":"I keep seeing you review pull requests","date":"2012-12-19T19:03:33.189Z","type":"message"}
{"nick":"bnoordhuis","message":"creationix: not really but i have a soft spot for it","date":"2012-12-19T19:03:55.968Z","type":"message"}
{"nick":"creationix","message":"cool, thanks","date":"2012-12-19T19:04:01.158Z","type":"message"}
{"nick":"piscisaureus_","message":"haha","date":"2012-12-19T19:05:51.363Z","type":"message"}
{"nick":"piscisaureus_","message":"I have to say, compiling on smartosdrone is a nice experience :-)","date":"2012-12-19T19:06:35.504Z","type":"message"}
{"nick":"piscisaureus_","message":"sorry, I know I have asked this many times before","date":"2012-12-19T19:08:05.966Z","type":"message"}
{"nick":"piscisaureus_","message":"but what again was the chant to build x64 on smartos? <-- TooTallNate isaacs","date":"2012-12-19T19:08:21.590Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: --dest-cpu=x64 ?","date":"2012-12-19T19:08:47.508Z","type":"message"}
{"nick":"piscisaureus_","message":"I recall it was some env var","date":"2012-12-19T19:09:04.688Z","type":"message"}
{"nick":"bentkus","date":"2012-12-19T19:09:35.525Z","type":"join"}
{"nick":"bentkus","message":"hey piscisaureus_, did you see that I gathered all the info about dual stacking in one issue?","date":"2012-12-19T19:10:10.745Z","type":"message"}
{"nick":"piscisaureus_","message":"ehm, no, but i can look","date":"2012-12-19T19:10:33.076Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2012-12-19T19:12:34.630Z","type":"quit"}
{"nick":"bentkus","message":"piscisaureus_: https://github.com/joyent/libuv/issues/635","date":"2012-12-19T19:13:21.890Z","type":"message"}
{"nick":"TooTallNate","date":"2012-12-19T19:13:52.030Z","type":"join"}
{"nick":"piscisaureus_","message":"ok, i've seen it","date":"2012-12-19T19:15:26.470Z","type":"message"}
{"nick":"bradleymeck","date":"2012-12-19T19:15:55.979Z","type":"join"}
{"nick":"lohkey","date":"2012-12-19T19:16:57.399Z","type":"join"}
{"nick":"piscisaureus_","message":"fuck","date":"2012-12-19T19:22:09.608Z","type":"message"}
{"nick":"piscisaureus_","message":"make[1]: *** No rule to make target `/root/bert/out/Release/obj.target/openssl/deps/openssl/openssl/crypto/bf/bf_enc.copenssl/crypto/cast/c_enc.o', needed by `/root/bert/out/Release/obj.target/deps/openssl/libopenssl.a'.  Stop.","date":"2012-12-19T19:22:18.683Z","type":"message"}
{"nick":"bentkus","message":"who responsible for dis","date":"2012-12-19T19:22:38.010Z","type":"message"}
{"nick":"bentkus","message":"bnoordhuis: did you find that commit which made the benchmarks slower?\\","date":"2012-12-19T19:23:43.945Z","type":"message"}
{"nick":"bnoordhuis","message":"bentkus: yep. it was me","date":"2012-12-19T19:23:53.316Z","type":"message"}
{"nick":"bentkus","message":"what commit","date":"2012-12-19T19:23:59.924Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: looks like a space is missing in there","date":"2012-12-19T19:24:22.911Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2012-12-19T19:24:27.828Z","type":"message"}
{"nick":"TooTallNate","message":"strange…","date":"2012-12-19T19:24:33.868Z","type":"message"}
{"nick":"bnoordhuis","message":"bentkus: be2a217. the 'rethink relaxed accept() approach'","date":"2012-12-19T19:24:37.200Z","type":"message"}
{"nick":"piscisaureus_","message":"TooTallNate: no, I did it myself","date":"2012-12-19T19:24:38.741Z","type":"message"}
{"nick":"TooTallNate","message":"oh, haha","date":"2012-12-19T19:24:44.924Z","type":"message"}
{"nick":"TooTallNate","message":"missing comma?","date":"2012-12-19T19:24:50.072Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, quality family time","date":"2012-12-19T19:42:36.505Z","type":"message"}
{"nick":"bnoordhuis","message":"see you tomorrow guys","date":"2012-12-19T19:42:40.675Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: enjoy","date":"2012-12-19T19:45:06.195Z","type":"message"}
{"nick":"piscisaureus_","message":"CRAP","date":"2012-12-19T19:46:35.252Z","type":"message"}
{"nick":"piscisaureus_","message":"forgot another asm source :-(","date":"2012-12-19T19:46:43.375Z","type":"message"}
{"nick":"piscisaureus_","action":"cries","date":"2012-12-19T19:46:47.248Z","type":"action"}
{"nick":"brson","date":"2012-12-19T19:47:34.492Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2012-12-19T19:47:36.409Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Bert Belder\u000f \u00037openssl-asm2\u000f * \u0002c77724f\u0002 : openssl: enable optimized asm code on x86 and x64 (+2 more commits) - http://git.io/Nl5nFA","date":"2012-12-19T20:04:09.868Z","type":"message"}
{"nick":"piscisaureus_","message":"yay","date":"2012-12-19T20:05:03.960Z","type":"message"}
{"nick":"piscisaureus_","message":"smartos works :-)","date":"2012-12-19T20:05:10.609Z","type":"message"}
{"nick":"piscisaureus_","message":"yay, linux works too. Only mac left","date":"2012-12-19T20:19:11.495Z","type":"message"}
{"nick":"piscisaureus_","message":"gt reboot for that","date":"2012-12-19T20:19:31.606Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-12-19T20:22:14.811Z","type":"quit"}
{"nick":"pooya","date":"2012-12-19T20:34:35.265Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2012-12-19T20:42:24.519Z","type":"quit"}
{"nick":"TooTallNate","date":"2012-12-19T20:46:13.358Z","type":"join"}
{"nick":"creationix","message":"so is \"node-v0.8.15\" the latest stable tag for libuv?","date":"2012-12-19T20:54:23.337Z","type":"message"}
{"nick":"creationix","message":"were there no libuv changes for node 0.8.16?","date":"2012-12-19T20:54:37.581Z","type":"message"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2012-12-19T20:55:42.947Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-12-19T20:55:44.992Z","type":"quit"}
{"nick":"TooTallNate","message":"creationix: i find that unlikely","date":"2012-12-19T20:56:08.051Z","type":"message"}
{"nick":"TooTallNate","message":"creationix: more likely somebody hasn't pushed the libuv tag yet","date":"2012-12-19T20:56:20.630Z","type":"message"}
{"nick":"creationix","message":"I'm thinking so","date":"2012-12-19T20:56:26.687Z","type":"message"}
{"nick":"creationix","message":"looks like 49977386e93dcdf7c0f0044a491c98d551f61db4 was the last commit in the 0.8 branch","date":"2012-12-19T20:58:36.318Z","type":"message"}
{"nick":"sgallagh","reason":"Ping timeout: 265 seconds","date":"2012-12-19T21:00:58.824Z","type":"quit"}
{"nick":"wolfeidau","date":"2012-12-19T21:17:32.614Z","type":"join"}
{"nick":"TooTallNate","reason":"Ping timeout: 260 seconds","date":"2012-12-19T21:24:03.253Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-12-19T21:24:49.180Z","type":"join"}
{"nick":"TooTallNate","date":"2012-12-19T21:25:46.469Z","type":"join"}
{"nick":"piscisaureus_","message":"back","date":"2012-12-19T21:26:20.957Z","type":"message"}
{"nick":"lohkey","date":"2012-12-19T21:41:05.062Z","type":"part"}
{"nick":"lohkey_","date":"2012-12-19T21:41:28.292Z","type":"join"}
{"nick":"lohkey_","reason":"Client Quit","date":"2012-12-19T21:41:28.293Z","type":"quit"}
{"nick":"rendar","date":"2012-12-19T22:03:05.202Z","type":"quit"}
{"nick":"AndreasMadsen","date":"2012-12-19T22:12:52.083Z","type":"join"}
{"nick":"bentkus","reason":"Quit: Lost terminal","date":"2012-12-19T22:14:47.923Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-19T22:15:50.139Z","type":"join"}
{"nick":"bentkus","date":"2012-12-19T22:19:15.205Z","type":"join"}
{"nick":"pooya","reason":"Quit: pooya","date":"2012-12-19T22:22:41.460Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-19T22:32:57.471Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-19T22:42:49.839Z","type":"join"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2012-12-19T22:45:17.703Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-12-19T22:45:59.558Z","type":"quit"}
{"nick":"isaacs","action":"back","date":"2012-12-19T22:47:44.872Z","type":"action"}
{"nick":"warz","date":"2012-12-19T22:58:03.596Z","type":"quit"}
{"nick":"TooTallNate","message":"piscisaureus_: isaacs: i think creationix wanted someone to push a v0.8.16 libuv tag","date":"2012-12-19T23:04:03.691Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-12-19T23:05:29.144Z","type":"quit"}
{"nick":"creationix","message":"yes please","date":"2012-12-19T23:08:25.726Z","type":"message"}
{"nick":"TooTallNate","action":"doesn't have libuv commits","date":"2012-12-19T23:08:41.255Z","type":"action"}
{"nick":"`3rdEden","reason":"Quit: zzzzz","date":"2012-12-19T23:12:52.019Z","type":"quit"}
{"nick":"isaacs","message":"creationix: it's the same as 0.8.15","date":"2012-12-19T23:13:37.835Z","type":"message"}
{"nick":"isaacs","message":"creationix: but sure","date":"2012-12-19T23:13:41.335Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033isaacs\u000f created tag node-v0.8.16 - http://git.io/LWCj3g","date":"2012-12-19T23:14:13.646Z","type":"message"}
{"nick":"creationix","message":"cool, I wasn't sure if it was the same","date":"2012-12-19T23:14:50.509Z","type":"message"}
{"nick":"creationix","message":"thanks","date":"2012-12-19T23:14:52.988Z","type":"message"}
{"nick":"AndreasMadsen","reason":"Remote host closed the connection","date":"2012-12-19T23:24:14.222Z","type":"quit"}
{"nick":"bentkus","message":"Hello mister anderson","date":"2012-12-19T23:26:34.533Z","type":"message"}
{"nick":"indexzero","date":"2012-12-19T23:27:05.114Z","type":"join"}
{"nick":"isaacs","message":"mbalho: Anyone interested in some reviewing? https://github.com/isaacs/node/compare/streams2-http-speedup","date":"2012-12-19T23:32:11.843Z","type":"message"}
{"nick":"isaacs","message":"er, not intended for mbalho only","date":"2012-12-19T23:32:19.633Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_, indutny, bnoordhuis, TooTallNate ^","date":"2012-12-19T23:32:38.843Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: what's NB: ?","date":"2012-12-19T23:35:22.632Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: Nota Bene.","date":"2012-12-19T23:35:28.591Z","type":"message"}
{"nick":"isaacs","message":"literally, \"note well\"","date":"2012-12-19T23:35:34.011Z","type":"message"}
{"nick":"TooTallNate","message":"ahhh","date":"2012-12-19T23:35:41.066Z","type":"message"}
{"nick":"isaacs","message":"\"take note of\", \"be advised\", etc.","date":"2012-12-19T23:35:41.214Z","type":"message"}
{"nick":"isaacs","message":"i guess that's confusing to people who didn't waste years learning latin in high school and doing liberal arts in college","date":"2012-12-19T23:36:33.121Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: fixed.","date":"2012-12-19T23:39:31.678Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: haha, i kinda liked it :p","date":"2012-12-19T23:39:58.816Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: i'm not too up-to-speed on the perf issues… piscisaureus_ should probably take a look","date":"2012-12-19T23:40:25.550Z","type":"message"}
{"nick":"isaacs","message":"yes.","date":"2012-12-19T23:40:50.508Z","type":"message"}
{"nick":"isaacs","message":"LOOK AT THIS FLAMEGRAPH BECAUSE IT IS AWESOME!","date":"2012-12-19T23:41:01.285Z","type":"message"}
{"nick":"isaacs","message":"http://static.izs.me/http-speedup-2012-12-19.svg","date":"2012-12-19T23:41:01.778Z","type":"message"}
{"nick":"LOUDBOT","message":"FOR MY NEXT TRICK, EVERYBODY GIVE ME YOUR WALLETS","date":"2012-12-19T23:41:01.985Z","type":"message"}
{"nick":"bentkus","message":"CHUCK TESTA","date":"2012-12-19T23:43:26.487Z","type":"message"}
{"nick":"LOUDBOT","message":"WE'RE ALL WRONG ABOUT EVERYTHING","date":"2012-12-19T23:43:26.649Z","type":"message"}
{"nick":"brson_","date":"2012-12-19T23:57:16.404Z","type":"join"}
