{"nick":"piscisaureus_","message":"* refactor streams in libuv. make fs faster","date":"2012-07-26T00:00:02.156Z","type":"message"}
{"nick":"piscisaureus_","message":"* rewrite http in node","date":"2012-07-26T00:00:09.105Z","type":"message"}
{"nick":"piscisaureus_","message":"* clean up the streams api in node","date":"2012-07-26T00:00:17.586Z","type":"message"}
{"nick":"piscisaureus_","message":"If there's more then isaacs knows","date":"2012-07-26T00:00:28.772Z","type":"message"}
{"nick":"c4milo","date":"2012-07-26T00:00:47.453Z","type":"join"}
{"nick":"igorzi","message":"nice","date":"2012-07-26T00:01:27.267Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: On the windows end, henry did a v8 patch that makes this etw profiling possible, but it'll require some big pimpin' to get that into v8","date":"2012-07-26T00:02:18.619Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-07-26T00:04:43.464Z","type":"quit"}
{"nick":"xaq","reason":"Remote host closed the connection","date":"2012-07-26T00:05:51.596Z","type":"quit"}
{"nick":"igorzi","message":"piscisaureus_: does it slow it down when non-profiling?","date":"2012-07-26T00:06:02.846Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: I didn't really try, but I think not","date":"2012-07-26T00:06:49.310Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: basically, it creates an API for that exposes generated code locations (and updates to them) from v8","date":"2012-07-26T00:07:23.308Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: so etw can look at the stack and figure out which js functions are on the stack","date":"2012-07-26T00:07:45.350Z","type":"message"}
{"nick":"piscisaureus_","message":"actually, if it works, it's nice","date":"2012-07-26T00:07:55.022Z","type":"message"}
{"nick":"igorzi","message":"this would be an interesting patch for v8 in general (not just for node)","date":"2012-07-26T00:08:11.832Z","type":"message"}
{"nick":"piscisaureus_","message":"well, if it is usable for other tooling (systemtap, gprof?), then it is","date":"2012-07-26T00:08:37.422Z","type":"message"}
{"nick":"piscisaureus_","message":"but that's something bnoordhuis knows better than me","date":"2012-07-26T00:08:44.422Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: btw - on the mailing list there are other people complaining about poort load balancing with cluster. And I know from Jan that he got questions about it on a conference is Moscow.","date":"2012-07-26T00:11:00.712Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: we should really get that accept-backoff patch in core","date":"2012-07-26T00:11:16.064Z","type":"message"}
{"nick":"stagas","reason":"Quit: ChatZilla 0.9.88-rdmsoft [XULRunner 1.9.0.17/2009122204]","date":"2012-07-26T00:11:44.436Z","type":"quit"}
{"nick":"TooTallNate","message":"isaacs: you need to update node-gyp in npm once again","date":"2012-07-26T00:11:55.927Z","type":"message"}
{"nick":"TooTallNate","message":"node-canvas depends on it :p","date":"2012-07-26T00:12:02.055Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: ok","date":"2012-07-26T00:12:05.379Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: can you send a pull req/issue?","date":"2012-07-26T00:12:18.786Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: okay. but not tonight","date":"2012-07-26T00:12:22.665Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: haha, ok","date":"2012-07-26T00:12:38.317Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I am also checkout out soon. I've been synchronizing with the celestial rhythm lately, don't want to spoil that","date":"2012-07-26T00:13:45.717Z","type":"message"}
{"nick":"bnoordhuis","message":"good idea, i'm going to try that as well","date":"2012-07-26T00:15:08.506Z","type":"message"}
{"nick":"bnoordhuis","message":"sleep tight, all","date":"2012-07-26T00:15:18.699Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: welterusten, bennetje","date":"2012-07-26T00:15:45.135Z","type":"message"}
{"nick":"bnoordhuis","message":"jij ook, bertje","date":"2012-07-26T00:15:55.572Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 276 seconds","date":"2012-07-26T00:20:56.551Z","type":"quit"}
{"nick":"creationix","message":"isaacs, ryah do we have any mock data laying around I can use to bench?","date":"2012-07-26T00:33:00.059Z","type":"message"}
{"nick":"creationix","message":"maybe in a unit test","date":"2012-07-26T00:33:05.213Z","type":"message"}
{"nick":"isaacs","message":"creationix: not sure.","date":"2012-07-26T00:33:21.614Z","type":"message"}
{"nick":"joeandaverde","message":"creationix: are you implementing the parser?","date":"2012-07-26T00:33:25.706Z","type":"message"}
{"nick":"isaacs","message":"creationix: maybe check in deps/http-parser/","date":"2012-07-26T00:33:29.583Z","type":"message"}
{"nick":"isaacs","message":"creationix: or plug it ina dn run `make test` in node","date":"2012-07-26T00:33:38.326Z","type":"message"}
{"nick":"creationix","message":"joeandaverde, I'm going to take a stab at it","date":"2012-07-26T00:33:42.042Z","type":"message"}
{"nick":"creationix","message":"joeandaverde, but you're welcome to try as well","date":"2012-07-26T00:33:47.422Z","type":"message"}
{"nick":"creationix","message":"the fastest wins","date":"2012-07-26T00:33:50.594Z","type":"message"}
{"nick":"joeandaverde","message":"hah","date":"2012-07-26T00:33:57.398Z","type":"message"}
{"nick":"joeandaverde","message":"sounds like you've done this a few times before","date":"2012-07-26T00:34:08.629Z","type":"message"}
{"nick":"creationix","message":"I have, but getting it fast is hard","date":"2012-07-26T00:34:20.527Z","type":"message"}
{"nick":"joeandaverde","message":"do you plan on using d8?","date":"2012-07-26T00:34:39.746Z","type":"message"}
{"nick":"creationix","message":"perhaps, I'll just start with black-box benchmarking","date":"2012-07-26T00:34:54.250Z","type":"message"}
{"nick":"creationix","message":"tweaking things till the numbers go up","date":"2012-07-26T00:35:00.753Z","type":"message"}
{"nick":"joeandaverde","message":"indeed","date":"2012-07-26T00:35:05.935Z","type":"message"}
{"nick":"creationix","message":"I never had much luck with the v8 profiler","date":"2012-07-26T00:35:12.500Z","type":"message"}
{"nick":"creationix","message":"though dtrace on osx is sometimes helpful","date":"2012-07-26T00:35:27.035Z","type":"message"}
{"nick":"joeandaverde","message":"have you been pushing anything to github thusfar?","date":"2012-07-26T00:36:42.116Z","type":"message"}
{"nick":"creationix","message":"joeandaverde, I'm about to","date":"2012-07-26T00:36:57.689Z","type":"message"}
{"nick":"joeandaverde","message":"i'm interested in your progress","date":"2012-07-26T00:36:59.436Z","type":"message"}
{"nick":"creationix","message":"just a shell","date":"2012-07-26T00:37:00.168Z","type":"message"}
{"nick":"ryah","message":"creationix: test bench/http_simple.js","date":"2012-07-26T00:37:03.945Z","type":"message"}
{"nick":"ryah","message":"that's all we care about","date":"2012-07-26T00:37:13.185Z","type":"message"}
{"nick":"creationix","message":"ryah, that's full stack though","date":"2012-07-26T00:37:21.715Z","type":"message"}
{"nick":"creationix","message":"ryah, wouldn't a pure cpu-bound bench work better","date":"2012-07-26T00:37:30.611Z","type":"message"}
{"nick":"ryah","message":"./benchmark/http.sh","date":"2012-07-26T00:37:46.492Z","type":"message"}
{"nick":"ryah","message":"we're interested in the jit optimization that might happen","date":"2012-07-26T00:38:24.002Z","type":"message"}
{"nick":"ryah","message":"and how that interacts with our js code","date":"2012-07-26T00:38:30.022Z","type":"message"}
{"nick":"ryah","message":"full stack is good","date":"2012-07-26T00:38:38.107Z","type":"message"}
{"nick":"creationix","message":"true, it will act different in isolation","date":"2012-07-26T00:38:40.888Z","type":"message"}
{"nick":"creationix","message":"I'll have both then","date":"2012-07-26T00:38:50.132Z","type":"message"}
{"nick":"ryah","message":"TooTallNate: ping","date":"2012-07-26T00:38:57.281Z","type":"message"}
{"nick":"creationix","message":"as soon as I can figure out how to monkey patch the builtin","date":"2012-07-26T00:38:57.792Z","type":"message"}
{"nick":"TooTallNate","message":"ryah: pong","date":"2012-07-26T00:39:09.737Z","type":"message"}
{"nick":"creationix","message":"process.binding(\"http_parser\").HTTPParser = ...","date":"2012-07-26T00:39:11.126Z","type":"message"}
{"nick":"creationix","message":"that might work to monkeypatch it","date":"2012-07-26T00:39:18.969Z","type":"message"}
{"nick":"ryah","message":"TooTallNate: we should have developers generate makefiles and visual studio files before the publish","date":"2012-07-26T00:39:21.178Z","type":"message"}
{"nick":"ryah","message":"TooTallNate: that shouldn't be done on the end user's computer","date":"2012-07-26T00:39:29.522Z","type":"message"}
{"nick":"ryah","message":"for addons","date":"2012-07-26T00:39:45.050Z","type":"message"}
{"nick":"ryah","message":"gyp","date":"2012-07-26T00:39:46.638Z","type":"message"}
{"nick":"joeandaverde","message":"creationix: what's your github?","date":"2012-07-26T00:40:15.607Z","type":"message"}
{"nick":"TooTallNate","message":"what about gyp configurations that have options?","date":"2012-07-26T00:40:21.083Z","type":"message"}
{"nick":"joeandaverde","message":"creationix: i bet it's creationix?","date":"2012-07-26T00:40:40.031Z","type":"message"}
{"nick":"TooTallNate","message":"like node-canvas has --with-jpeg and --with-gif flags","date":"2012-07-26T00:40:42.765Z","type":"message"}
{"nick":"ryah","message":"TooTallNate: what options?","date":"2012-07-26T00:40:43.156Z","type":"message"}
{"nick":"ryah","message":"hm","date":"2012-07-26T00:40:52.374Z","type":"message"}
{"nick":"TooTallNate","message":"but i think that alters the generated Makefile","date":"2012-07-26T00:40:58.119Z","type":"message"}
{"nick":"ryah","message":"yeah maybe that doesn't work then","date":"2012-07-26T00:41:13.514Z","type":"message"}
{"nick":"ryah","message":":(","date":"2012-07-26T00:41:15.209Z","type":"message"}
{"nick":"pooya","reason":"Quit: pooya","date":"2012-07-26T00:41:24.002Z","type":"quit"}
{"nick":"creationix","message":"joeandaverde, yep","date":"2012-07-26T00:41:24.664Z","type":"message"}
{"nick":"TooTallNate","message":"it kinda kills gyp variables","date":"2012-07-26T00:41:36.768Z","type":"message"}
{"nick":"ryah","message":"yeah","date":"2012-07-26T00:41:48.609Z","type":"message"}
{"nick":"ryah","message":"okay nevermind","date":"2012-07-26T00:41:51.122Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2012-07-26T00:43:08.223Z","type":"quit"}
{"nick":"creationix","message":"wow, I'm getting 25 requests-per-second using the c parser","date":"2012-07-26T00:46:30.631Z","type":"message"}
{"nick":"creationix","message":"what is wrong with my code!","date":"2012-07-26T00:46:35.075Z","type":"message"}
{"nick":"joeandaverde","message":"should be easy to beat that!","date":"2012-07-26T00:47:13.501Z","type":"message"}
{"nick":"joeandaverde","message":":P","date":"2012-07-26T00:47:19.086Z","type":"message"}
{"nick":"creationix","message":"strange, if I use a buffer in the response, it's super slow","date":"2012-07-26T00:49:37.857Z","type":"message"}
{"nick":"creationix","message":"if I use a string, it's fast","date":"2012-07-26T00:49:41.774Z","type":"message"}
{"nick":"TheJH","reason":"Ping timeout: 244 seconds","date":"2012-07-26T00:50:18.217Z","type":"quit"}
{"nick":"creationix","message":"anyone care to confirm my insanity https://gist.github.com/f31c9fc51eba9703049e","date":"2012-07-26T00:50:28.999Z","type":"message"}
{"nick":"joeandaverde","message":"what requests are you pumping at that?","date":"2012-07-26T00:51:54.283Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: so if `npm install canvas --with-jpeg` works, then is there a way to specify that in the app's package.json?","date":"2012-07-26T00:52:17.564Z","type":"message"}
{"nick":"TooTallNate","message":"cause it would be \"canvas\": \"*\" or whatever, so is there a way to pass flags to one dep?","date":"2012-07-26T00:52:57.074Z","type":"message"}
{"nick":"creationix","message":"joeandaverde, ab -n 1000 -k http://127.0.0.1:8080/ (linux)","date":"2012-07-26T00:54:39.015Z","type":"message"}
{"nick":"ryah","message":"creationix: you should get about 7000","date":"2012-07-26T00:55:15.412Z","type":"message"}
{"nick":"ryah","message":"creationix: you might have to bump your ephemeral port range","date":"2012-07-26T00:55:33.361Z","type":"message"}
{"nick":"ryah","message":"and lower the socket wait time","date":"2012-07-26T00:55:41.769Z","type":"message"}
{"nick":"creationix","message":"ryah, but if I use strings, it's blazing fast","date":"2012-07-26T00:55:48.901Z","type":"message"}
{"nick":"ryah","message":"oh","date":"2012-07-26T00:56:15.689Z","type":"message"}
{"nick":"joeandaverde","message":"with buffer i got 5277req/s","date":"2012-07-26T00:56:18.845Z","type":"message"}
{"nick":"creationix","message":"no, it's using keepalive","date":"2012-07-26T00:56:37.331Z","type":"message"}
{"nick":"creationix","message":"netstat confirms just one client","date":"2012-07-26T00:56:41.884Z","type":"message"}
{"nick":"joeandaverde","message":"using 0.8.3","date":"2012-07-26T00:56:48.085Z","type":"message"}
{"nick":"creationix","message":"using 0.8.3 here as well","date":"2012-07-26T00:56:57.581Z","type":"message"}
{"nick":"joeandaverde","message":"did you also get failed requests? That seems odd to me","date":"2012-07-26T00:57:14.964Z","type":"message"}
{"nick":"joeandaverde","message":"31 failed","date":"2012-07-26T00:57:19.321Z","type":"message"}
{"nick":"creationix","message":"no, none failed here","date":"2012-07-26T00:58:06.805Z","type":"message"}
{"nick":"creationix","message":"but I get a solid 40ms \"processing\" for each and every request","date":"2012-07-26T00:58:15.909Z","type":"message"}
{"nick":"joeandaverde","message":"using a string i'm getting over 23k/sec","date":"2012-07-26T00:59:09.719Z","type":"message"}
{"nick":"creationix","message":"I get about 14K/sec with strings","date":"2012-07-26T01:00:44.529Z","type":"message"}
{"nick":"igorzi","reason":"Read error: Connection reset by peer","date":"2012-07-26T01:00:45.467Z","type":"quit"}
{"nick":"creationix","message":"strange Buffer bug","date":"2012-07-26T01:00:59.340Z","type":"message"}
{"nick":"joeandaverde","message":"i just replaced body with \"Hello World","date":"2012-07-26T01:01:01.739Z","type":"message"}
{"nick":"joeandaverde","message":"err, left off the last part there","date":"2012-07-26T01:01:07.430Z","type":"message"}
{"nick":"creationix","message":"anyway, I'll use strings for the bench","date":"2012-07-26T01:01:13.444Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: no, there is not a way to specify that.","date":"2012-07-26T01:02:04.614Z","type":"message"}
{"nick":"creationix","message":"joeandaverde, I get ~24k with ab -n 100000 -c 100 -k http://127.0.0.1:8080/","date":"2012-07-26T01:02:19.770Z","type":"message"}
{"nick":"creationix","message":"which is normal","date":"2012-07-26T01:02:25.368Z","type":"message"}
{"nick":"creationix","message":"(using strings)","date":"2012-07-26T01:02:30.141Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: i mean, it could do \"scripts\": { \"install\": \"node-gyp rebuild --with-jpeg\" }","date":"2012-07-26T01:02:37.158Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: kinda defeats the purpose of being a switch :p","date":"2012-07-26T01:03:17.607Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: indeed.","date":"2012-07-26T01:03:28.511Z","type":"message"}
{"nick":"joeandaverde","message":"creationix: running that last command seems not to finish in a reasonable time? it's still waiting to return to the shell","date":"2012-07-26T01:03:54.475Z","type":"message"}
{"nick":"TooTallNate","message":"i mean you could set `npm_config_with_jpeg` manually :D","date":"2012-07-26T01:03:56.577Z","type":"message"}
{"nick":"creationix","message":"joeandaverde, are you on osx?","date":"2012-07-26T01:04:22.093Z","type":"message"}
{"nick":"joeandaverde","message":"creationix: yessir","date":"2012-07-26T01:04:34.354Z","type":"message"}
{"nick":"creationix","message":"the stock ab sucks there","date":"2012-07-26T01:04:40.821Z","type":"message"}
{"nick":"creationix","message":"that probably explains the failed requests you got too","date":"2012-07-26T01:04:53.502Z","type":"message"}
{"nick":"joeandaverde","message":"ah, i'll download and compile the latest","date":"2012-07-26T01:05:03.347Z","type":"message"}
{"nick":"creationix","message":"anyway, using Buffers, I still get a solid 40ms per request even with the `ab -n 100000 -c 100 -k http://127.0.0.1:8080/` client","date":"2012-07-26T01:05:33.654Z","type":"message"}
{"nick":"creationix","message":"hmm, same with node 0.8.4","date":"2012-07-26T01:07:47.338Z","type":"message"}
{"nick":"creationix","message":"and my cpu never got above 33%","date":"2012-07-26T01:07:54.013Z","type":"message"}
{"nick":"creationix","message":"very strange","date":"2012-07-26T01:08:01.150Z","type":"message"}
{"nick":"joeandaverde","message":"hrm, where did you get the better build of apache benchmark?","date":"2012-07-26T01:08:26.934Z","type":"message"}
{"nick":"joeandaverde","message":"probably just install a later version of apache...","date":"2012-07-26T01:09:31.674Z","type":"message"}
{"nick":"creationix","message":"install linux :P","date":"2012-07-26T01:10:00.586Z","type":"message"}
{"nick":"joeandaverde","message":":X","date":"2012-07-26T01:12:14.058Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-07-26T01:14:26.925Z","type":"quit"}
{"nick":"theCole","date":"2012-07-26T01:15:05.471Z","type":"join"}
{"nick":"dap","date":"2012-07-26T01:18:38.616Z","type":"join"}
{"nick":"dap","reason":"Client Quit","date":"2012-07-26T01:19:10.764Z","type":"quit"}
{"nick":"theCole","reason":"Quit: theCole","date":"2012-07-26T01:23:38.894Z","type":"quit"}
{"nick":"theCole","date":"2012-07-26T01:24:08.315Z","type":"join"}
{"nick":"ryah","message":"creationix: did you figure it out?","date":"2012-07-26T01:39:50.548Z","type":"message"}
{"nick":"lohkey","date":"2012-07-26T01:40:13.402Z","type":"part"}
{"nick":"tjfontaine","message":"isaacs: sorry I wasn't around to prevent you from trying to get a non-apple cert from working :/","date":"2012-07-26T01:49:17.868Z","type":"message"}
{"nick":"TheJH","date":"2012-07-26T01:50:30.393Z","type":"join"}
{"nick":"theCole","reason":"Quit: theCole","date":"2012-07-26T01:59:04.271Z","type":"quit"}
{"nick":"erickt","reason":"Ping timeout: 244 seconds","date":"2012-07-26T02:01:05.237Z","type":"quit"}
{"nick":"joeandaverde","message":"creationix: FYI? https://forrst.com/posts/Fixing_ApacheBench_bug_on_Mac_OS_X_Lion-wku","date":"2012-07-26T02:01:46.984Z","type":"message"}
{"nick":"joeandaverde","message":"I know you don't care but if the question arises again that article works","date":"2012-07-26T02:02:04.461Z","type":"message"}
{"nick":"abraxas","date":"2012-07-26T02:09:21.772Z","type":"join"}
{"nick":"isaacs","message":"tjfontaine: no worries.","date":"2012-07-26T02:14:41.298Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: i didnt' have high hopes for it anyway :)","date":"2012-07-26T02:14:46.458Z","type":"message"}
{"nick":"EhevuTov","date":"2012-07-26T02:26:38.302Z","type":"join"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-07-26T02:26:49.006Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2012-07-26T02:35:59.342Z","type":"quit"}
{"nick":"piscisaureus__","date":"2012-07-26T02:36:19.365Z","type":"join"}
{"nick":"piscisaureus__","reason":"Client Quit","date":"2012-07-26T02:38:46.009Z","type":"quit"}
{"nick":"creationix","message":"how can I get a node http client to use keepalive and not run out of ports stuck in TIME_WAIT?","date":"2012-07-26T02:41:30.481Z","type":"message"}
{"nick":"creationix","message":"ab witth the -k (keepalive) flag and sending the Content-Length works","date":"2012-07-26T02:41:50.112Z","type":"message"}
{"nick":"creationix","message":"but I want a node client","date":"2012-07-26T02:41:53.006Z","type":"message"}
{"nick":"dshaw_","date":"2012-07-26T02:41:59.467Z","type":"join"}
{"nick":"TooTallNate","date":"2012-07-26T02:44:39.589Z","type":"join"}
{"nick":"TheJH","reason":"Ping timeout: 252 seconds","date":"2012-07-26T02:44:51.472Z","type":"quit"}
{"nick":"piscisaureus__","date":"2012-07-26T02:50:28.694Z","type":"join"}
{"nick":"piscisaureus__","reason":"Client Quit","date":"2012-07-26T02:51:34.783Z","type":"quit"}
{"nick":"bulatshakirzyano","date":"2012-07-26T03:06:43.465Z","type":"join"}
{"nick":"isaacs","message":"creationix: you should use ab to test.","date":"2012-07-26T03:10:23.186Z","type":"message"}
{"nick":"isaacs","message":"creationix: testing node with node is not good.","date":"2012-07-26T03:10:32.572Z","type":"message"}
{"nick":"isaacs","message":"use node to test something once it already works with ab.","date":"2012-07-26T03:10:38.775Z","type":"message"}
{"nick":"creationix","message":"isaacs: yep, doing that","date":"2012-07-26T03:11:37.511Z","type":"message"}
{"nick":"creationix","message":"it's the request parser that matters anyway","date":"2012-07-26T03:11:43.629Z","type":"message"}
{"nick":"isaacs","message":"creationix: it should only be opening as many as the Agent.defaultMaxSockets thoug, right?","date":"2012-07-26T03:11:45.883Z","type":"message"}
{"nick":"creationix","message":"isaacs: no idea, I never understood Agent","date":"2012-07-26T03:12:04.780Z","type":"message"}
{"nick":"creationix","message":"I just know it ate all my ports","date":"2012-07-26T03:12:13.217Z","type":"message"}
{"nick":"isaacs","message":"yeah, that's all a mess.","date":"2012-07-26T03:12:16.245Z","type":"message"}
{"nick":"creationix","message":"~30k ports in TIME_WAIT","date":"2012-07-26T03:12:28.661Z","type":"message"}
{"nick":"isaacs","message":"what we really need is a generic socket_pool thingie","date":"2012-07-26T03:12:36.293Z","type":"message"}
{"nick":"creationix","message":"btw, http parsing is tricky","date":"2012-07-26T03:13:09.881Z","type":"message"}
{"nick":"creationix","message":"when there is no lookahead","date":"2012-07-26T03:13:21.777Z","type":"message"}
{"nick":"creationix","message":"maybe I should buffer to \\r\\n while doing headers and parse lines at a time?","date":"2012-07-26T03:13:35.897Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-07-26T03:17:05.388Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-07-26T03:17:46.690Z","type":"quit"}
{"nick":"mikeal","date":"2012-07-26T03:21:39.155Z","type":"join"}
{"nick":"piscisaureus_","reason":"Read error: Connection reset by peer","date":"2012-07-26T03:26:23.505Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2012-07-26T03:39:20.835Z","type":"quit"}
{"nick":"erickt","date":"2012-07-26T03:43:04.467Z","type":"join"}
{"nick":"ryah","message":"creationix: use a state machine like http_parser","date":"2012-07-26T03:45:35.250Z","type":"message"}
{"nick":"ryah","message":"creationix: so what's the results?","date":"2012-07-26T03:46:08.171Z","type":"message"}
{"nick":"ryah","message":"creationix: how fast is it?","date":"2012-07-26T03:46:12.332Z","type":"message"}
{"nick":"creationix","message":"still working on it","date":"2012-07-26T03:46:28.006Z","type":"message"}
{"nick":"creationix","message":"I know the http_parser.h api, but process.binding(\"http_parser\") seems different","date":"2012-07-26T03:46:54.098Z","type":"message"}
{"nick":"creationix","message":"like there is no on_header callback","date":"2012-07-26T03:47:00.706Z","type":"message"}
{"nick":"creationix","message":"just on_headers and on_headers_complete","date":"2012-07-26T03:47:08.525Z","type":"message"}
{"nick":"creationix","message":"not sure what the difference is","date":"2012-07-26T03:47:13.573Z","type":"message"}
{"nick":"ryah","message":"hmm.. let me see","date":"2012-07-26T03:47:32.125Z","type":"message"}
{"nick":"creationix","message":"I assume it's to cut round-trips to C++ land","date":"2012-07-26T03:47:45.514Z","type":"message"}
{"nick":"ryah","message":"yes","date":"2012-07-26T03:48:27.434Z","type":"message"}
{"nick":"ryah","message":"it buffers header key/value pairs until it cant anymore","date":"2012-07-26T03:48:45.937Z","type":"message"}
{"nick":"ryah","message":"then makes a callback with them","date":"2012-07-26T03:48:49.167Z","type":"message"}
{"nick":"ryah","message":"imagine a situation where the header comes in like 2 different packets","date":"2012-07-26T03:49:04.509Z","type":"message"}
{"nick":"ryah","message":"you'll get a on_header for the first and the second","date":"2012-07-26T03:49:14.842Z","type":"message"}
{"nick":"ryah","message":"then on_headers_complete when it's all done","date":"2012-07-26T03:49:20.601Z","type":"message"}
{"nick":"creationix","message":"can I just call onHeadersComplete?","date":"2012-07-26T03:55:42.545Z","type":"message"}
{"nick":"creationix","message":"we need to buffer the whole headers object anyway for the node api","date":"2012-07-26T03:55:59.862Z","type":"message"}
{"nick":"ryah","message":"sure","date":"2012-07-26T03:56:21.715Z","type":"message"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-07-26T03:56:38.657Z","type":"quit"}
{"nick":"ryah","message":"you might have to call on_headers once","date":"2012-07-26T03:56:48.651Z","type":"message"}
{"nick":"creationix","message":"and I need to toLowerCase the header keys at this level?","date":"2012-07-26T03:58:21.987Z","type":"message"}
{"nick":"creationix","message":"wohoo! calling onHeadersComplete(info) gets me an http response","date":"2012-07-26T03:59:55.785Z","type":"message"}
{"nick":"ryah","message":"yes","date":"2012-07-26T04:00:08.897Z","type":"message"}
{"nick":"creationix","message":"hmm, C gets 12311 req/sec while JS gets 7911 req/sec","date":"2012-07-26T04:02:23.827Z","type":"message"}
{"nick":"ryah","message":"sad","date":"2012-07-26T04:04:19.376Z","type":"message"}
{"nick":"creationix","message":"I don't think keepalive is working","date":"2012-07-26T04:04:23.903Z","type":"message"}
{"nick":"ryah","message":"don't test with keep-alive","date":"2012-07-26T04:04:31.055Z","type":"message"}
{"nick":"creationix","message":"do I need to set .shouldKeepAlive or something?","date":"2012-07-26T04:04:35.842Z","type":"message"}
{"nick":"ryah","message":"yes","date":"2012-07-26T04:05:03.166Z","type":"message"}
{"nick":"ryah","message":"but don't test with keep-alive","date":"2012-07-26T04:05:09.023Z","type":"message"}
{"nick":"ryah","message":"are you having problems running out of sockets?","date":"2012-07-26T04:05:39.347Z","type":"message"}
{"nick":"blackorzar_","reason":"Ping timeout: 276 seconds","date":"2012-07-26T04:05:50.559Z","type":"quit"}
{"nick":"ryah","message":"what os are you on?","date":"2012-07-26T04:05:51.629Z","type":"message"}
{"nick":"creationix","message":"linux","date":"2012-07-26T04:06:22.617Z","type":"message"}
{"nick":"ryah","message":"% cat local/bin/fix_ports ","date":"2012-07-26T04:06:54.409Z","type":"message"}
{"nick":"ryah","message":"#!/bin/sh","date":"2012-07-26T04:06:54.607Z","type":"message"}
{"nick":"ryah","message":"echo \"49152 65535\" > /proc/sys/net/ipv4/ip_local_port_range","date":"2012-07-26T04:06:54.607Z","type":"message"}
{"nick":"ryah","message":"echo \"2\" > /proc/sys/net/ipv4/tcp_fin_timeout","date":"2012-07-26T04:06:54.607Z","type":"message"}
{"nick":"ryah","message":"sysctl -w fs.file-max=1000000","date":"2012-07-26T04:06:54.607Z","type":"message"}
{"nick":"ryah","message":"^-- that's what i do","date":"2012-07-26T04:06:59.914Z","type":"message"}
{"nick":"creationix","message":"ok, without keepalive it's slightly faster then the C version","date":"2012-07-26T04:07:15.760Z","type":"message"}
{"nick":"ryah","message":"also set your ulimit high","date":"2012-07-26T04:07:16.587Z","type":"message"}
{"nick":"creationix","message":"7298 vs 7877","date":"2012-07-26T04:07:45.163Z","type":"message"}
{"nick":"ryah","message":"nice","date":"2012-07-26T04:07:50.387Z","type":"message"}
{"nick":"ryah","message":"that's a good improvement","date":"2012-07-26T04:08:00.730Z","type":"message"}
{"nick":"creationix","message":"I'm only parsing the request line and the headers","date":"2012-07-26T04:08:09.321Z","type":"message"}
{"nick":"creationix","message":"but that's the bulk of most GET requests","date":"2012-07-26T04:08:16.672Z","type":"message"}
{"nick":"ryah","message":"yeah","date":"2012-07-26T04:08:20.123Z","type":"message"}
{"nick":"creationix","message":"btw, swich statements in V8 are slow if you have lots of cases","date":"2012-07-26T04:08:37.496Z","type":"message"}
{"nick":"ryah","message":"the question is if you can keep that improvement while you implement the rest of http","date":"2012-07-26T04:08:41.230Z","type":"message"}
{"nick":"creationix","message":"so I'm using named methods instead to take advantage of the built-in hash lookup","date":"2012-07-26T04:08:52.490Z","type":"message"}
{"nick":"creationix","message":"good question","date":"2012-07-26T04:09:08.985Z","type":"message"}
{"nick":"creationix","message":"I don't think it will get too much slower for the basic GET case","date":"2012-07-26T04:09:18.308Z","type":"message"}
{"nick":"ryah","message":"do you know http well?","date":"2012-07-26T04:09:22.714Z","type":"message"}
{"nick":"creationix","message":"somewhat","date":"2012-07-26T04:09:26.481Z","type":"message"}
{"nick":"ryah","message":"we're going to need to port test.c over from http_parser","date":"2012-07-26T04:10:30.433Z","type":"message"}
{"nick":"creationix","message":"yep","date":"2012-07-26T04:10:44.553Z","type":"message"}
{"nick":"ryah","message":"the rest can be TDD","date":"2012-07-26T04:10:45.372Z","type":"message"}
{"nick":"creationix","message":"that would be awesome","date":"2012-07-26T04:10:49.596Z","type":"message"}
{"nick":"creationix","message":"https://gist.github.com/07a540c97dd1426427f6","date":"2012-07-26T04:11:57.537Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2012-07-26T04:12:27.649Z","type":"quit"}
{"nick":"creationix","message":"I haven't profiled at all yet","date":"2012-07-26T04:13:00.662Z","type":"message"}
{"nick":"ryah","message":"cute","date":"2012-07-26T04:13:14.385Z","type":"message"}
{"nick":"ryah","message":"that's a good chunk faster","date":"2012-07-26T04:14:07.188Z","type":"message"}
{"nick":"ryah","message":"and it's a lot simpler","date":"2012-07-26T04:14:15.554Z","type":"message"}
{"nick":"creationix","message":"I like how I can monkey patch HTTPParser","date":"2012-07-26T04:14:21.779Z","type":"message"}
{"nick":"ryah","message":"(to do it in js)","date":"2012-07-26T04:14:22.478Z","type":"message"}
{"nick":"ryah","message":"yeah me too :)","date":"2012-07-26T04:14:26.148Z","type":"message"}
{"nick":"creationix","message":"this can be an npm module","date":"2012-07-26T04:14:27.740Z","type":"message"}
{"nick":"ryah","message":"i wouldnt have thought of that","date":"2012-07-26T04:14:29.304Z","type":"message"}
{"nick":"creationix","message":"for 0.8.x","date":"2012-07-26T04:14:33.042Z","type":"message"}
{"nick":"ryah","message":"good idea","date":"2012-07-26T04:14:43.924Z","type":"message"}
{"nick":"ryah","message":"as far as im concerned it can be in node under a switch","date":"2012-07-26T04:15:18.887Z","type":"message"}
{"nick":"ryah","message":"but needs to be built out a bit more","date":"2012-07-26T04:15:42.441Z","type":"message"}
{"nick":"ryah","message":"but i guess youll be able to move faster if you just do your own repo","date":"2012-07-26T04:16:14.687Z","type":"message"}
{"nick":"creationix","message":"sure","date":"2012-07-26T04:16:37.001Z","type":"message"}
{"nick":"ryah","message":"this can land in v0.8 if it passes the test","date":"2012-07-26T04:16:45.093Z","type":"message"}
{"nick":"ryah","message":"those tests cover all of http","date":"2012-07-26T04:16:50.318Z","type":"message"}
{"nick":"blackorzar","date":"2012-07-26T04:17:04.045Z","type":"join"}
{"nick":"creationix","message":"I can build it as an npm module, and then when it's done, put it inside node","date":"2012-07-26T04:17:07.142Z","type":"message"}
{"nick":"ryah","message":"yeah","date":"2012-07-26T04:17:13.352Z","type":"message"}
{"nick":"creationix","message":"won't removing http_parser break abi?","date":"2012-07-26T04:17:34.182Z","type":"message"}
{"nick":"creationix","message":"or were you thinking to just have both in 0.8.x?","date":"2012-07-26T04:17:48.779Z","type":"message"}
{"nick":"ryah","message":"http_parser isnt public","date":"2012-07-26T04:17:55.564Z","type":"message"}
{"nick":"creationix","message":"I'll probably keep http_parser.c for luvit","date":"2012-07-26T04:18:18.744Z","type":"message"}
{"nick":"creationix","message":"the C calling overhead is tiny there","date":"2012-07-26T04:18:24.209Z","type":"message"}
{"nick":"ryah","message":"yeah","date":"2012-07-26T04:18:28.825Z","type":"message"}
{"nick":"creationix","message":"and luajit isn't quite as magical as v8","date":"2012-07-26T04:18:37.450Z","type":"message"}
{"nick":"creationix","message":"though I want to pull http out of luvit core","date":"2012-07-26T04:19:27.820Z","type":"message"}
{"nick":"creationix","message":"make it userland","date":"2012-07-26T04:19:33.233Z","type":"message"}
{"nick":"joeandaverde","reason":"Ping timeout: 276 seconds","date":"2012-07-26T04:22:44.391Z","type":"quit"}
{"nick":"creationix","message":"ryah: https://github.com/creationix/http-parser-js","date":"2012-07-26T04:26:52.014Z","type":"message"}
{"nick":"ryah","action":"imagines the joy of removing src/node_http_parser.cc","date":"2012-07-26T04:28:42.587Z","type":"action"}
{"nick":"creationix","message":"yeah, V8 bindings are a pain","date":"2012-07-26T04:30:45.969Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-07-26T04:56:55.397Z","type":"quit"}
{"nick":"joeandaverde","date":"2012-07-26T05:08:54.350Z","type":"join"}
{"nick":"AvianFlu","new_nick":"AvianusAsleepus","date":"2012-07-26T05:24:03.575Z","type":"nick"}
{"nick":"EhevuTov","date":"2012-07-26T05:27:45.397Z","type":"join"}
{"nick":"igorzi","date":"2012-07-26T05:34:20.467Z","type":"join"}
{"nick":"bulatshakirzyano","reason":"Quit: Leaving...","date":"2012-07-26T05:36:57.301Z","type":"quit"}
{"nick":"igorzi_","date":"2012-07-26T05:47:53.634Z","type":"join"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-07-26T05:52:59.536Z","type":"quit"}
{"nick":"joeandaverde","reason":"Quit: Leaving","date":"2012-07-26T05:59:12.531Z","type":"quit"}
{"nick":"erickt","date":"2012-07-26T06:00:58.455Z","type":"join"}
{"nick":"blackorzar","reason":"Ping timeout: 276 seconds","date":"2012-07-26T06:06:44.338Z","type":"quit"}
{"nick":"blackorzar","date":"2012-07-26T06:06:52.510Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: Leaving","date":"2012-07-26T06:13:59.239Z","type":"quit"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-07-26T06:23:11.690Z","type":"quit"}
{"nick":"igorzi_","reason":"Read error: Connection reset by peer","date":"2012-07-26T06:29:04.469Z","type":"quit"}
{"nick":"igorzi","reason":"Read error: Connection reset by peer","date":"2012-07-26T06:29:04.669Z","type":"quit"}
{"nick":"rendar","date":"2012-07-26T06:51:49.380Z","type":"join"}
{"nick":"dshaw_","date":"2012-07-26T06:57:34.609Z","type":"join"}
{"nick":"EhevuTov","date":"2012-07-26T07:13:32.260Z","type":"join"}
{"nick":"stephank","reason":"Quit: *Poof!*","date":"2012-07-26T07:15:47.849Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: Leaving","date":"2012-07-26T07:19:04.076Z","type":"quit"}
{"nick":"paddybyers","date":"2012-07-26T07:19:31.107Z","type":"join"}
{"nick":"EhevuTov","date":"2012-07-26T07:21:15.560Z","type":"join"}
{"nick":"TheJH","date":"2012-07-26T07:24:17.020Z","type":"join"}
{"nick":"rendar","date":"2012-07-26T07:32:10.967Z","type":"quit"}
{"nick":"rendar","date":"2012-07-26T07:34:43.199Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2012-07-26T07:36:49.353Z","type":"quit"}
{"nick":"hz","date":"2012-07-26T07:42:12.955Z","type":"join"}
{"nick":"`3rdEden","date":"2012-07-26T07:54:03.457Z","type":"join"}
{"nick":"mikeal","date":"2012-07-26T07:56:39.282Z","type":"join"}
{"nick":"deoxxa","message":"does this mean http_parser will be going away?","date":"2012-07-26T07:57:15.802Z","type":"message"}
{"nick":"deoxxa","message":"i mean, in general?","date":"2012-07-26T07:57:24.000Z","type":"message"}
