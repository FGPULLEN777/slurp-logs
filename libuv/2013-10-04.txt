{"nick":"tjfontaine","message":"trevnorris: you're doing a thread apply all bt full?","date":"2013-10-04T00:00:00.344Z","type":"message"}
{"nick":"ircretary","reason":"Read error: Connection reset by peer","date":"2013-10-04T00:00:00.563Z","type":"quit"}
{"nick":"ircretary","date":"2013-10-04T00:00:08.690Z","type":"join"}
{"nick":"tjfontaine","message":"trevnorris: it's possible that gdb is showing you in a separate thread","date":"2013-10-04T00:00:12.033Z","type":"message"}
{"nick":"trevnorris","message":"so what, thread apply<CR>backtrace full<CR>","date":"2013-10-04T00:00:54.846Z","type":"message"}
{"nick":"trevnorris","message":"?","date":"2013-10-04T00:00:57.051Z","type":"message"}
{"nick":"tjfontaine","message":"no","date":"2013-10-04T00:01:19.059Z","type":"message"}
{"nick":"trevnorris","message":"erm. ok. so it's just: thread apply backtrace full<CR>","date":"2013-10-04T00:01:22.626Z","type":"message"}
{"nick":"tjfontaine","message":"thread apply all bt<cr>","date":"2013-10-04T00:01:26.163Z","type":"message"}
{"nick":"trevnorris","message":"still no.","date":"2013-10-04T00:01:28.961Z","type":"message"}
{"nick":"trevnorris","message":"every line in the bt is from deps/v8/src/","date":"2013-10-04T00:01:40.976Z","type":"message"}
{"nick":"tjfontaine","message":"then you have shat all over the stack such that it can't reconstruct it I guess :)","date":"2013-10-04T00:01:41.847Z","type":"message"}
{"nick":"tjfontaine","message":"oh","date":"2013-10-04T00:01:46.522Z","type":"message"}
{"nick":"tjfontaine","message":"well","date":"2013-10-04T00:01:48.089Z","type":"message"}
{"nick":"tjfontaine","message":"gist please","date":"2013-10-04T00:01:56.539Z","type":"message"}
{"nick":"qard","reason":"Quit: Leaving.","date":"2013-10-04T00:01:59.658Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: https://gist.github.com/trevnorris/6819010","date":"2013-10-04T00:02:44.888Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-04T00:06:12.295Z","type":"nick"}
{"nick":"trevnorris","message":"tjfontaine: freak. know how to debug something when there isn't a line of you're own code there?","date":"2013-10-04T00:10:04.311Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: wtf. so I did a make clean. and that seems to have fixed it.","date":"2013-10-04T00:12:00.871Z","type":"message"}
{"nick":"trevnorris","message":"no idea. whatever.","date":"2013-10-04T00:12:03.424Z","type":"message"}
{"nick":"tjfontaine","message":"ya, that can happen, you coudl have had a bad .o that was confusing the linker","date":"2013-10-04T00:13:23.060Z","type":"message"}
{"nick":"trevnorris","message":"ok, thanks.","date":"2013-10-04T00:13:29.104Z","type":"message"}
{"nick":"wwicks","reason":"Quit: wwicks","date":"2013-10-04T00:16:04.067Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: wtf. node itself is segfaulting every 5-10 runs.","date":"2013-10-04T00:16:58.918Z","type":"message"}
{"nick":"tjfontaine","message":"in your branch?","date":"2013-10-04T00:17:21.425Z","type":"message"}
{"nick":"tjfontaine","message":"or v0.8 or v0.10 or master HEAD","date":"2013-10-04T00:17:32.539Z","type":"message"}
{"nick":"trevnorris","message":"my branch. going to see if it does the same on master.","date":"2013-10-04T00:17:51.474Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: ok. on master.","date":"2013-10-04T00:18:10.355Z","type":"message"}
{"nick":"trevnorris","message":"master is segfaulting every 5-10 runs.","date":"2013-10-04T00:18:29.285Z","type":"message"}
{"nick":"tjfontaine","message":"can you re-apply ...","date":"2013-10-04T00:19:04.177Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-10-04T00:19:11.066Z","type":"quit"}
{"nick":"trevnorris","message":"it's something to do with the last 4 commits.","date":"2013-10-04T00:19:25.137Z","type":"message"}
{"nick":"tjfontaine","message":"(cd deps/v8/; curl https://github.com/v8/v8/commit/435d8aadc3f60fea2aaad23fae3f29e5aeccb907.diff | patch -p1)","date":"2013-10-04T00:19:36.336Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: 9566fe8 src: only start idle notifier when profiling","date":"2013-10-04T00:20:49.805Z","type":"message"}
{"nick":"trevnorris","message":"that commit is causing me to segfault","date":"2013-10-04T00:20:58.080Z","type":"message"}
{"nick":"tjfontaine","message":"oh, blame ben then :P","date":"2013-10-04T00:20:59.962Z","type":"message"}
{"nick":"tjfontaine","message":"or indutny for lgtm'ing it without trying it out :)","date":"2013-10-04T00:21:15.232Z","type":"message"}
{"nick":"trevnorris","message":"freaking.","date":"2013-10-04T00:21:33.770Z","type":"message"}
{"nick":"trevnorris","message":"ircretary: tell bnoordhuis commit 9566fe8 is causing node to segfault every 5-10 runs on my box.","date":"2013-10-04T00:21:58.525Z","type":"message"}
{"nick":"ircretary","message":"trevnorris: I'll be sure to tell bnoordhuis","date":"2013-10-04T00:21:59.552Z","type":"message"}
{"nick":"trevnorris","message":"whatever. i'll rebase to just before that.","date":"2013-10-04T00:22:14.454Z","type":"message"}
{"nick":"st_luke","date":"2013-10-04T00:32:59.348Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-04T00:33:30.970Z","type":"quit"}
{"nick":"tjfontaine","message":" welp, there's another bad bug","date":"2013-10-04T00:35:08.238Z","type":"message"}
{"nick":"tjfontaine","message":"jesus.","date":"2013-10-04T00:35:10.114Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: what other bad bug?","date":"2013-10-04T00:38:30.180Z","type":"message"}
{"nick":"tjfontaine","message":"calling pause on an http response stream, we exit the loop even though we have active handles and requests","date":"2013-10-04T00:39:46.159Z","type":"message"}
{"nick":"tjfontaine","message":"https://gist.github.com/tjfontaine/6819327","date":"2013-10-04T00:40:49.083Z","type":"message"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-04T00:40:49.942Z","type":"quit"}
{"nick":"tjfontaine","message":"trevnorris: ^^","date":"2013-10-04T00:40:51.845Z","type":"message"}
{"nick":"tjfontaine","message":"could be why npm was actually doing the \"cb() never called\" issue","date":"2013-10-04T00:41:10.990Z","type":"message"}
{"nick":"tjfontaine","message":"oops","date":"2013-10-04T00:41:38.926Z","type":"message"}
{"nick":"tjfontaine","message":"wrong one","date":"2013-10-04T00:41:41.401Z","type":"message"}
{"nick":"tjfontaine","message":"https://gist.github.com/tjfontaine/6819327 updated with it","date":"2013-10-04T00:42:07.136Z","type":"message"}
{"nick":"othiym23","message":"TIL never to fuck with EventEmitters","date":"2013-10-04T00:42:42.311Z","type":"message"}
{"nick":"trevnorris","message":"oy, I hate the 2 space indent rule.","date":"2013-10-04T00:42:43.224Z","type":"message"}
{"nick":"tjfontaine","message":"you want hardtabs?","date":"2013-10-04T00:42:55.202Z","type":"message"}
{"nick":"othiym23","message":"17-space hard tabs for the win","date":"2013-10-04T00:43:10.851Z","type":"message"}
{"nick":"tjfontaine","message":"the spacing there comes from a coworker, I took their example and refactored quickly into standalone","date":"2013-10-04T00:43:20.274Z","type":"message"}
{"nick":"othiym23","message":"really take advantage of all that screen real estate","date":"2013-10-04T00:43:26.772Z","type":"message"}
{"nick":"trevnorris","message":"i prefer them, because then people can change their editor to whatever they want.","date":"2013-10-04T00:43:28.575Z","type":"message"}
{"nick":"tjfontaine","message":"you would fit in with the characters at work :P","date":"2013-10-04T00:43:42.755Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: you have a race condition. the var child = spawn should be in the listening callback of http.createServer.","date":"2013-10-04T00:45:02.238Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: that's totally not the problem there","date":"2013-10-04T00:45:12.802Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: but sure fine","date":"2013-10-04T00:45:23.409Z","type":"message"}
{"nick":"tjfontaine","message":"the fact that _getActiveRequests and _getActiveHandles have ref'd items still in the queue and we're exiting ...","date":"2013-10-04T00:46:41.661Z","type":"message"}
{"nick":"tjfontaine","message":"that's a *huge* problem","date":"2013-10-04T00:46:45.363Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so what's the expected output?","date":"2013-10-04T00:48:22.976Z","type":"message"}
{"nick":"trevnorris","message":"or, i mean. i'm not seeing the problem","date":"2013-10-04T00:48:36.611Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: we're \"sending 104857600\" bytes","date":"2013-10-04T00:49:33.156Z","type":"message"}
{"nick":"trevnorris","message":"whoa. the output is way different on v0.10 than master","date":"2013-10-04T00:49:35.771Z","type":"message"}
{"nick":"tjfontaine","message":"we see chunk received: 65419","date":"2013-10-04T00:49:44.091Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: chunk received: 32656","date":"2013-10-04T00:50:09.936Z","type":"message"}
{"nick":"tjfontaine","message":"anyway we should be getting a lot more data, but a pause shouldn't let the event loop exit","date":"2013-10-04T00:50:38.661Z","type":"message"}
{"nick":"tjfontaine","message":"I mean","date":"2013-10-04T00:51:26.380Z","type":"message"}
{"nick":"tjfontaine","message":"there's more data in the pipe","date":"2013-10-04T00:51:29.403Z","type":"message"}
{"nick":"tjfontaine","message":"clearly ready to be read, and we have a ref'd socket","date":"2013-10-04T00:51:42.137Z","type":"message"}
{"nick":"tjfontaine","message":"the libuv loop should *not* be exiting here","date":"2013-10-04T00:51:52.380Z","type":"message"}
{"nick":"trevnorris","message":"hm. my chunked received isn't consistent.","date":"2013-10-04T00:52:01.435Z","type":"message"}
{"nick":"tjfontaine","message":"anyway, that part isn't interesting lots of factors can influence that","date":"2013-10-04T00:52:41.597Z","type":"message"}
{"nick":"tjfontaine","message":"the child should *not* exit in this test case","date":"2013-10-04T00:52:48.587Z","type":"message"}
{"nick":"trevnorris","message":"ok","date":"2013-10-04T00:52:53.015Z","type":"message"}
{"nick":"tjfontaine","message":"at least","date":"2013-10-04T00:53:03.101Z","type":"message"}
{"nick":"tjfontaine","message":"well","date":"2013-10-04T00:53:08.333Z","type":"message"}
{"nick":"tjfontaine","message":"maybe","date":"2013-10-04T00:53:09.923Z","type":"message"}
{"nick":"tjfontaine","message":"ya, no it should not exit","date":"2013-10-04T00:53:40.958Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-10-04T00:53:47.698Z","type":"quit"}
{"nick":"othiym23","message":"teeny bug: %d\\ns should be %d\\n%s (or %d\\n%j) on line 16","date":"2013-10-04T00:53:48.900Z","type":"message"}
{"nick":"tjfontaine","message":"sure ya, that is from the original reporter","date":"2013-10-04T00:54:12.494Z","type":"message"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-10-04T00:58:59.992Z","type":"quit"}
{"nick":"othiym23","message":"that's really weird","date":"2013-10-04T01:01:56.840Z","type":"message"}
{"nick":"othiym23","message":"there's nothing in the IncomingMessage or Readable code that seems like it would unref the handle","date":"2013-10-04T01:02:29.267Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-04T01:03:12.517Z","type":"nick"}
{"nick":"tjfontaine","message":"I haven't done my dtrace work yet but","date":"2013-10-04T01:04:19.482Z","type":"message"}
{"nick":"tjfontaine","message":"[--I] signal   0x1006cf270","date":"2013-10-04T01:04:20.744Z","type":"message"}
{"nick":"tjfontaine","message":"[-AI] async    0x1006cf110","date":"2013-10-04T01:04:20.966Z","type":"message"}
{"nick":"tjfontaine","message":"[R--] idle     0x1006cbe30","date":"2013-10-04T01:04:20.966Z","type":"message"}
{"nick":"tjfontaine","message":"[---] check    0x1006cbe88","date":"2013-10-04T01:04:20.966Z","type":"message"}
{"nick":"tjfontaine","message":"[R--] idle     0x1006cbee0","date":"2013-10-04T01:04:22.963Z","type":"message"}
{"nick":"tjfontaine","message":"[-A-] signal   0x1006cbf40","date":"2013-10-04T01:04:25.506Z","type":"message"}
{"nick":"tjfontaine","message":"[R--] timer    0x1006cbce8","date":"2013-10-04T01:04:28.056Z","type":"message"}
{"nick":"tjfontaine","message":"[---] pipe     0x101800b90","date":"2013-10-04T01:04:30.556Z","type":"message"}
{"nick":"tjfontaine","message":"[---] pipe     0x101800d50","date":"2013-10-04T01:04:33.034Z","type":"message"}
{"nick":"tjfontaine","message":"[R--] tcp      0x101801030","date":"2013-10-04T01:04:35.544Z","type":"message"}
{"nick":"tjfontaine","message":"tcp is ref'd, libuv shouldn't let this happen, I need to see who is calling EmitExit","date":"2013-10-04T01:04:39.594Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: something else is fucked up with the test -- even if you comment out the pause it only gets about halfway through before bailing out","date":"2013-10-04T01:05:46.372Z","type":"message"}
{"nick":"tjfontaine","message":"the test or node? :)","date":"2013-10-04T01:06:44.019Z","type":"message"}
{"nick":"othiym23","message":"it could be Node, I\"m just sayin'","date":"2013-10-04T01:08:02.523Z","type":"message"}
{"nick":"tjfontaine","message":"ya, that's fair","date":"2013-10-04T01:08:16.356Z","type":"message"}
{"nick":"othiym23","message":"https://gist.github.com/othiym23/6819510","date":"2013-10-04T01:08:31.766Z","type":"message"}
{"nick":"othiym23","message":"I added the printout of how much it's seen to the chunk size printout, and it never reaches 100% for me","date":"2013-10-04T01:08:51.806Z","type":"message"}
{"nick":"kevinswi_","date":"2013-10-04T01:08:57.515Z","type":"join"}
{"nick":"tjfontaine","message":"because why would you expect it to work?","date":"2013-10-04T01:09:25.916Z","type":"message"}
{"nick":"tjfontaine","message":"that part works for me","date":"2013-10-04T01:10:21.718Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: are you on 0.10 or master?","date":"2013-10-04T01:10:27.948Z","type":"message"}
{"nick":"tjfontaine","message":"it will be great if this actually exercises the truncation bug","date":"2013-10-04T01:10:36.799Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: I'm testing on 0.10.20 cuz I figured you had master covered","date":"2013-10-04T01:11:39.844Z","type":"message"}
{"nick":"tjfontaine","message":"ok no 0.10 is what I'm targetting because it was reported to me by someone on v0.10.15","date":"2013-10-04T01:12:17.429Z","type":"message"}
{"nick":"jmar777","date":"2013-10-04T01:12:45.003Z","type":"join"}
{"nick":"philips","reason":"Quit: http://ifup.org","date":"2013-10-04T01:13:34.533Z","type":"quit"}
{"nick":"othiym23","message":"tjfontaine: I dumped a run in https://gist.github.com/othiym23/6819510","date":"2013-10-04T01:14:44.767Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T01:15:01.176Z","type":"quit"}
{"nick":"othiym23","message":"the end event never fires on the response for me","date":"2013-10-04T01:16:11.500Z","type":"message"}
{"nick":"tjfontaine","message":"ya","date":"2013-10-04T01:21:51.597Z","type":"message"}
{"nick":"tjfontaine","message":"brb","date":"2013-10-04T01:21:54.774Z","type":"message"}
{"nick":"st_luke","date":"2013-10-04T01:23:16.089Z","type":"join"}
{"nick":"trevnorris","message":"othiym23: all domain code removed from src/ and only have two tests failing. almost have it.","date":"2013-10-04T01:25:45.036Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: sweet! good job!","date":"2013-10-04T01:26:16.163Z","type":"message"}
{"nick":"othiym23","message":"how much stuff did you have to do that exists outside an asyncListener?","date":"2013-10-04T01:26:31.462Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: not much actually. just added some extra code to manually add the listener in the cases the Wrap isn't instantiated at the same time as the event emitter.","date":"2013-10-04T01:27:32.180Z","type":"message"}
{"nick":"trevnorris","message":"the latest is up if you want to take a look.","date":"2013-10-04T01:27:39.630Z","type":"message"}
{"nick":"othiym23","message":"is it on #6011?","date":"2013-10-04T01:27:51.262Z","type":"message"}
{"nick":"trevnorris","message":"yeah","date":"2013-10-04T01:27:53.533Z","type":"message"}
{"nick":"othiym23","message":"cool, I'll take a look","date":"2013-10-04T01:27:58.374Z","type":"message"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-04T01:33:19.582Z","type":"quit"}
{"nick":"wwicks","date":"2013-10-04T01:33:32.629Z","type":"join"}
{"nick":"trevnorris","message":"yeah. think I see the problem. so you can add the req from an http response. but the handle for the request object is buried.","date":"2013-10-04T01:34:25.999Z","type":"message"}
{"nick":"trevnorris","message":"so the simple method of checking for _handle and manually attaching the listener doesn't work.","date":"2013-10-04T01:34:40.407Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: you might want to move process.removeAsyncListener in the domain asyncListener's error handler's try clause to a finally block","date":"2013-10-04T01:35:47.513Z","type":"message"}
{"nick":"othiym23","message":"there's no process.removeAsyncListener in the catch(er2) bit","date":"2013-10-04T01:36:14.837Z","type":"message"}
{"nick":"trevnorris","message":"ahh. good catch. that might be why the nested domain test is failing.","date":"2013-10-04T01:37:08.710Z","type":"message"}
{"nick":"philips","date":"2013-10-04T01:37:13.478Z","type":"join"}
{"nick":"othiym23","message":"left a note","date":"2013-10-04T01:37:52.271Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: moving it to a finally block causes both test-domain-nested and test-domain-nested-throw to fail.","date":"2013-10-04T01:42:01.133Z","type":"message"}
{"nick":"wwicks","reason":"Quit: wwicks","date":"2013-10-04T01:42:12.363Z","type":"quit"}
{"nick":"trevnorris","message":"the latter passes if it's at the end of the try, and the former passes if it's at the beginning of the catch.","date":"2013-10-04T01:42:36.153Z","type":"message"}
{"nick":"trevnorris","message":"but, can't seem to find where it can go to make both pass.","date":"2013-10-04T01:42:48.366Z","type":"message"}
{"nick":"abraxas","date":"2013-10-04T01:42:59.462Z","type":"join"}
{"nick":"othiym23","message":"the universal band-aid: throw it in a process.nextTick","date":"2013-10-04T01:44:25.641Z","type":"message"}
{"nick":"othiym23","message":"(I have no idea, I generally just start beating on those problems until the tests start passing)","date":"2013-10-04T01:44:43.001Z","type":"message"}
{"nick":"othiym23","message":"I wish there were a way to tell github to compute the \"expensive\" minimal diffs a la ?w=1","date":"2013-10-04T01:47:12.328Z","type":"message"}
{"nick":"philips","reason":"Quit: http://ifup.org","date":"2013-10-04T01:50:20.713Z","type":"quit"}
{"nick":"philips","date":"2013-10-04T01:52:32.935Z","type":"join"}
{"nick":"tjfontaine","message":"trevnorris: I'm going to bestepping away for a bit, can you file abug for bnoordhuis regarding the idle check/prepare segfault?","date":"2013-10-04T01:55:43.735Z","type":"message"}
{"nick":"tjfontaine","message":"please and thank you","date":"2013-10-04T01:56:01.261Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: you mean his latest commit? ok. i ircretary him, but guess I should make it official :)","date":"2013-10-04T01:56:28.635Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: check the latest commit. that, for some reason, fixes the nested domain issue.","date":"2013-10-04T01:57:33.281Z","type":"message"}
{"nick":"trevnorris","message":"now all that's left is the domain-http failure and all tests will be passing.","date":"2013-10-04T01:57:46.773Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: https://github.com/joyent/node/issues/6306","date":"2013-10-04T02:15:13.757Z","type":"message"}
{"nick":"c4milo","date":"2013-10-04T02:18:11.139Z","type":"join"}
{"nick":"trevnorris","message":"othiym23: wow, this domain-http-server test is convoluted.","date":"2013-10-04T02:18:58.844Z","type":"message"}
{"nick":"othiym23","message":"people use http with node a lot!","date":"2013-10-04T02:20:43.865Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-10-04T02:25:15.745Z","type":"quit"}
{"nick":"othiym23","message":"trevnorris: I mostly just concentrated on the domains stuff on this pass through, and I left some comments, but mostly the new stuff LGTM","date":"2013-10-04T02:33:53.174Z","type":"message"}
{"nick":"othiym23","message":"who knows what isaacs is going to make of all this","date":"2013-10-04T02:34:15.999Z","type":"message"}
{"nick":"othiym23","message":"you've moved node's cheese around a bunch more ;)","date":"2013-10-04T02:34:27.800Z","type":"message"}
{"nick":"trevnorris","message":"heh","date":"2013-10-04T02:34:44.479Z","type":"message"}
{"nick":"trevnorris","message":"it's all part of a much larger scheme!","date":"2013-10-04T02:34:58.444Z","type":"message"}
{"nick":"othiym23","message":"I think the biggest remaining win, as far as simplification is concerned, is moving all the domain.enter and domain.exit calls in timers.js and node.js into before and after callbacks on the domain asyncListener","date":"2013-10-04T02:36:09.661Z","type":"message"}
{"nick":"trevnorris","message":"for me it's getting all the domain crap out of src/","date":"2013-10-04T02:36:42.465Z","type":"message"}
{"nick":"othiym23","message":"the AsyncWrap class and moving MakeCallback onto it look like wins to me as well, but I'm less comfortable passing judgment on C++","date":"2013-10-04T02:36:47.704Z","type":"message"}
{"nick":"othiym23","message":"right","date":"2013-10-04T02:36:49.983Z","type":"message"}
{"nick":"EhevuTov","date":"2013-10-04T02:37:30.485Z","type":"join"}
{"nick":"othiym23","message":"well, were you to move enter and exit onto callbacks, you'd mostly have domains out of lib as well, and it would be pretty close to a pure non-core module","date":"2013-10-04T02:37:34.675Z","type":"message"}
{"nick":"othiym23","message":"anyway, dinnertime","date":"2013-10-04T02:37:38.215Z","type":"message"}
{"nick":"othiym23","action":"&","date":"2013-10-04T02:37:40.069Z","type":"action"}
{"nick":"LOUDBOT","message":"I AM TIRED FROM YIFFING ALL NIGHT LONG","date":"2013-10-04T02:37:40.435Z","type":"message"}
{"nick":"EhevuTov","reason":"Ping timeout: 264 seconds","date":"2013-10-04T02:42:06.284Z","type":"quit"}
{"nick":"zz_karupa64","reason":"Quit: ZNC - http://znc.in","date":"2013-10-04T02:48:53.268Z","type":"quit"}
{"nick":"zz_karupa64","date":"2013-10-04T02:49:30.317Z","type":"join"}
{"nick":"kevinswi_","reason":"Remote host closed the connection","date":"2013-10-04T02:50:27.531Z","type":"quit"}
{"nick":"mikeal","date":"2013-10-04T03:00:09.857Z","type":"join"}
{"nick":"trevnorris","message":"othiym23: with the amount of crap i'm having to do to get this backwards compatible, there's no option about having it committed.","date":"2013-10-04T03:19:36.951Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: the paths this is taking is freakin ridiculous, because the call itself isn't asynchronous until a specific point in execution, at which point I need to hook and see if a domain has been added since.","date":"2013-10-04T03:20:38.666Z","type":"message"}
{"nick":"kazupon","date":"2013-10-04T03:31:58.769Z","type":"join"}
{"nick":"trevnorris","message":"FREAK YES!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!","date":"2013-10-04T03:34:03.864Z","type":"message"}
{"nick":"LOUDBOT","message":"I'M AFRAID OF AMERICANS","date":"2013-10-04T03:34:04.490Z","type":"message"}
{"nick":"trevnorris","message":"LOUDBOT: YOU SHOULD BE!!!","date":"2013-10-04T03:34:12.328Z","type":"message"}
{"nick":"LOUDBOT","message":"trevnorris: HOUSE SHOULD USE HIS CANE TO RAPE CUDDY","date":"2013-10-04T03:34:12.827Z","type":"message"}
{"nick":"trevnorris","message":"anyways","date":"2013-10-04T03:34:22.285Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: all tests are passing. it's held together with duct tape, but it's passing.","date":"2013-10-04T03:35:01.960Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: it'll still requires some serious cleanup, but finally. this road has an ending.","date":"2013-10-04T03:35:32.067Z","type":"message"}
{"nick":"trevnorris","message":"as long as no one bitches about my patch","date":"2013-10-04T03:35:42.629Z","type":"message"}
{"nick":"trevnorris","message":"HEAR THAT EVERYONE","date":"2013-10-04T03:35:46.700Z","type":"message"}
{"nick":"LOUDBOT","message":"I CAN'T FIGURE IT OUT THERE ARE NO LOGS","date":"2013-10-04T03:35:47.176Z","type":"message"}
{"nick":"trevnorris","message":"anyone bitches about 6011 and I will find you and shove my engine yard panda I got at nodeconf.eu, up your ass!!!","date":"2013-10-04T03:36:25.198Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-04T03:45:09.542Z","type":"nick"}
{"nick":"trevnorris","message":"tjfontaine: you hear that? I got all the tests passing, and remove all the domain code from src/!","date":"2013-10-04T03:45:34.694Z","type":"message"}
{"nick":"octetcloud","message":"well, I'm impressed as hell, for what its worth. ","date":"2013-10-04T03:51:41.007Z","type":"message"}
{"nick":"trevnorris","message":"octetcloud: thank you. only took me 2 months. and 2200 lines of code change. but I got the sucker.","date":"2013-10-04T03:52:20.227Z","type":"message"}
{"nick":"EhevuTov","date":"2013-10-04T03:56:23.232Z","type":"join"}
{"nick":"zz_karupa64","new_nick":"karupa64","date":"2013-10-04T04:02:37.800Z","type":"nick"}
{"nick":"karupa64","new_nick":"karupanerura","date":"2013-10-04T04:03:32.161Z","type":"nick"}
{"nick":"trevnorris","message":"good night world, sleep well knowing domains will soon no longer infest your code.","date":"2013-10-04T04:05:48.205Z","type":"message"}
{"nick":"trevnorris","action":"&","date":"2013-10-04T04:05:54.757Z","type":"action"}
{"nick":"LOUDBOT","message":"HOW DO YOU DO UNIX?","date":"2013-10-04T04:05:55.413Z","type":"message"}
{"nick":"qard","date":"2013-10-04T04:06:33.988Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-10-04T04:08:19.735Z","type":"quit"}
{"nick":"julianduque","reason":"Quit: leaving","date":"2013-10-04T04:20:03.879Z","type":"quit"}
{"nick":"amartens","date":"2013-10-04T04:26:30.216Z","type":"join"}
{"nick":"othiym23","message":"whoah there","date":"2013-10-04T04:29:49.710Z","type":"message"}
{"nick":"othiym23","message":"I don't think pandas go there","date":"2013-10-04T04:29:55.831Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T04:49:41.647Z","type":"quit"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-10-04T04:52:57.736Z","type":"quit"}
{"nick":"qard","date":"2013-10-04T04:53:21.150Z","type":"part"}
{"nick":"octetcloud","reason":"Ping timeout: 248 seconds","date":"2013-10-04T05:24:43.824Z","type":"quit"}
{"nick":"amartens","date":"2013-10-04T05:29:27.218Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2013-10-04T05:33:31.252Z","type":"quit"}
{"nick":"paddybyers","date":"2013-10-04T05:34:22.073Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-10-04T05:41:09.178Z","type":"join"}
{"nick":"c4milo","date":"2013-10-04T05:45:37.478Z","type":"join"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-10-04T05:52:13.857Z","type":"quit"}
{"nick":"amartens","date":"2013-10-04T05:54:37.272Z","type":"join"}
{"nick":"EhevuTov","date":"2013-10-04T06:04:46.091Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u000258729f1\u0002 : src: fix up after botched merge conflict - http://git.io/zt400w","date":"2013-10-04T06:11:25.947Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: ^ sorry :-/","date":"2013-10-04T06:12:04.079Z","type":"message"}
{"nick":"`3E|ZZZZ","new_nick":"`3rdEden","date":"2013-10-04T06:14:41.073Z","type":"nick"}
{"nick":"bajtos","date":"2013-10-04T06:15:32.658Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-10-04T06:19:43.024Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2013-10-04T06:23:50.576Z","type":"quit"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-10-04T06:25:17.402Z","type":"quit"}
{"nick":"st_luke","date":"2013-10-04T06:28:48.833Z","type":"join"}
{"nick":"st_luke","reason":"Ping timeout: 245 seconds","date":"2013-10-04T06:32:56.611Z","type":"quit"}
{"nick":"st_luke","date":"2013-10-04T06:46:12.757Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T07:03:30.810Z","type":"quit"}
{"nick":"rendar","date":"2013-10-04T07:04:37.120Z","type":"join"}
{"nick":"c4milo","date":"2013-10-04T07:04:39.130Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-04T07:12:25.695Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-10-04T07:23:33.723Z","type":"join"}
{"nick":"hz","date":"2013-10-04T07:24:35.934Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: no worries. just got confused because I stupidly decided to rebase and test some major changes at the same time.","date":"2013-10-04T07:46:27.899Z","type":"message"}
{"nick":"trevnorris","message":"so for a while I thought the segfault was on my side.","date":"2013-10-04T07:46:39.048Z","type":"message"}
{"nick":"trevnorris","message":"well, at least until I saw the backtrace :)","date":"2013-10-04T07:46:57.121Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T08:25:14.267Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 248 seconds","date":"2013-10-04T08:48:27.840Z","type":"quit"}
{"nick":"Kakera","date":"2013-10-04T08:53:23.574Z","type":"join"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2013-10-04T09:00:37.995Z","type":"quit"}
{"nick":"kazupon","date":"2013-10-04T09:00:47.641Z","type":"join"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-10-04T09:21:36.906Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-10-04T09:35:00.625Z","type":"join"}
{"nick":"bajtos","date":"2013-10-04T09:50:29.704Z","type":"join"}
{"nick":"bajtos","reason":"Client Quit","date":"2013-10-04T09:50:40.855Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-10-04T09:52:33.291Z","type":"quit"}
{"nick":"LeftWing","reason":"Remote host closed the connection","date":"2013-10-04T10:39:18.800Z","type":"quit"}
{"nick":"LeftWing","date":"2013-10-04T10:39:25.541Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-10-04T10:49:33.774Z","type":"quit"}
{"nick":"brson","date":"2013-10-04T11:09:56.181Z","type":"join"}
{"nick":"brson","reason":"Client Quit","date":"2013-10-04T11:09:56.400Z","type":"quit"}
{"nick":"brson","date":"2013-10-04T11:16:26.142Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-10-04T11:29:29.460Z","type":"quit"}
{"nick":"Kakera","reason":"Ping timeout: 256 seconds","date":"2013-10-04T11:38:37.204Z","type":"quit"}
{"nick":"Kakera","date":"2013-10-04T12:05:53.785Z","type":"join"}
{"nick":"brson","reason":"Read error: Operation timed out","date":"2013-10-04T12:43:42.073Z","type":"quit"}
{"nick":"bajtos","date":"2013-10-04T12:44:16.952Z","type":"join"}
{"nick":"brson","date":"2013-10-04T12:46:36.242Z","type":"join"}
{"nick":"karupanerura","new_nick":"zz_karupanerura","date":"2013-10-04T12:48:10.754Z","type":"nick"}
{"nick":"brson","reason":"Ping timeout: 264 seconds","date":"2013-10-04T13:05:30.294Z","type":"quit"}
{"nick":"kevinswiber","date":"2013-10-04T13:13:23.964Z","type":"join"}
{"nick":"AvianFlu","date":"2013-10-04T13:23:10.910Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-10-04T13:29:20.067Z","type":"quit"}
{"nick":"brson","date":"2013-10-04T13:41:02.233Z","type":"join"}
{"nick":"vptr","date":"2013-10-04T14:01:20.193Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-04T14:11:00.941Z","type":"nick"}
{"nick":"jmar777","date":"2013-10-04T14:15:50.394Z","type":"join"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-04T14:24:55.919Z","type":"nick"}
{"nick":"brson","reason":"Ping timeout: 252 seconds","date":"2013-10-04T14:25:54.260Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-04T14:39:21.629Z","type":"nick"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-04T14:46:11.504Z","type":"nick"}
{"nick":"dap","date":"2013-10-04T14:55:29.150Z","type":"join"}
{"nick":"c4milo","date":"2013-10-04T15:02:32.167Z","type":"join"}
{"nick":"bradleymeck","date":"2013-10-04T15:10:26.163Z","type":"join"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-10-04T15:17:06.985Z","type":"quit"}
{"nick":"swaj","message":"I need to buy tjfontaine a beer or 12 :)","date":"2013-10-04T15:17:09.276Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-04T15:26:23.081Z","type":"quit"}
{"nick":"austo","date":"2013-10-04T15:36:54.106Z","type":"join"}
{"nick":"octetcloud","date":"2013-10-04T15:42:09.432Z","type":"join"}
{"nick":"kevinswiber","reason":"Remote host closed the connection","date":"2013-10-04T15:45:37.048Z","type":"quit"}
{"nick":"bajtos","date":"2013-10-04T16:01:15.005Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-04T16:07:31.758Z","type":"nick"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-04T16:09:05.398Z","type":"nick"}
{"nick":"bnoordhuis","date":"2013-10-04T16:23:55.903Z","type":"join"}
{"nick":"amartens","date":"2013-10-04T16:29:26.203Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-10-04T16:31:18.803Z","type":"quit"}
{"nick":"st_luke","date":"2013-10-04T16:37:11.920Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 260 seconds","date":"2013-10-04T16:47:47.932Z","type":"quit"}
{"nick":"trevnorris","message":"othiym23: ping","date":"2013-10-04T17:00:57.141Z","type":"message"}
{"nick":"trevnorris","message":"man, it's dead today. where is everyone?","date":"2013-10-04T17:01:56.433Z","type":"message"}
{"nick":"st_luke","message":"dead","date":"2013-10-04T17:02:14.072Z","type":"message"}
{"nick":"trevnorris","message":"bummer","date":"2013-10-04T17:02:31.405Z","type":"message"}
{"nick":"st_luke","message":"was a good run","date":"2013-10-04T17:02:39.095Z","type":"message"}
{"nick":"trevnorris","message":"if I were the only maintainer left, node would be screwed","date":"2013-10-04T17:04:16.148Z","type":"message"}
{"nick":"st_luke","message":"I always wondered what would happen to a popular open source project if the maintainers were all at the same conference and there was a fire or something","date":"2013-10-04T17:06:27.438Z","type":"message"}
{"nick":"st_luke","message":"and they died*","date":"2013-10-04T17:06:31.849Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T17:10:15.096Z","type":"quit"}
{"nick":"trevnorris","message":"othiym23: got to jam, but when you have a chance try running your test suit.","date":"2013-10-04T17:13:03.203Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: if all your tests pass too, we seriously don't have enough test coverage. ;P","date":"2013-10-04T17:13:18.130Z","type":"message"}
{"nick":"mikeal","date":"2013-10-04T17:18:54.886Z","type":"join"}
{"nick":"tjfontaine","message":"swaj: :)","date":"2013-10-04T17:27:27.025Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: congrats on the domains stuff","date":"2013-10-04T17:27:51.415Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: also part of the problem is it's beautiful outside (bay area)","date":"2013-10-04T17:28:04.305Z","type":"message"}
{"nick":"tjfontaine","message":"st_luke: so, I think I know the *real* npm bug","date":"2013-10-04T17:28:16.151Z","type":"message"}
{"nick":"st_luke","message":"tell me more ","date":"2013-10-04T17:30:02.089Z","type":"message"}
{"nick":"tjfontaine","message":"st_luke: https://github.com/joyent/node/issues/6305","date":"2013-10-04T17:30:51.960Z","type":"message"}
{"nick":"tjfontaine","message":"st_luke: back pressure on a single http connection that's been paused, loop exits, never fires end","date":"2013-10-04T17:31:13.769Z","type":"message"}
{"nick":"st_luke","message":"wow","date":"2013-10-04T17:31:52.084Z","type":"message"}
{"nick":"st_luke","message":"nice find ","date":"2013-10-04T17:31:53.949Z","type":"message"}
{"nick":"tjfontaine","message":"so while tls was exposing it more easily in npms case, the issue is more scary than before","date":"2013-10-04T17:35:14.928Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2013-10-04T17:35:29.360Z","type":"quit"}
{"nick":"tjfontaine","message":"it's kinda moved to priority one, because it's pretty nasty","date":"2013-10-04T17:36:18.959Z","type":"message"}
{"nick":"TooTallNate","date":"2013-10-04T17:42:15.027Z","type":"join"}
{"nick":"kevinswiber","date":"2013-10-04T17:43:57.608Z","type":"join"}
{"nick":"M28","reason":"Ping timeout: 246 seconds","date":"2013-10-04T17:47:46.996Z","type":"quit"}
{"nick":"st_luke","message":"sweet","date":"2013-10-04T17:51:35.261Z","type":"message"}
{"nick":"bnoordhuis","date":"2013-10-04T17:53:39.214Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 252 seconds","date":"2013-10-04T17:58:12.177Z","type":"quit"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-10-04T17:58:55.401Z","type":"quit"}
{"nick":"jmar777","date":"2013-10-04T17:59:27.472Z","type":"join"}
{"nick":"paddybyers","date":"2013-10-04T18:02:35.829Z","type":"join"}
{"nick":"julianduque","date":"2013-10-04T18:02:46.501Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-04T18:05:26.793Z","type":"quit"}
{"nick":"dominictarr","date":"2013-10-04T18:06:23.939Z","type":"join"}
{"nick":"julianduque","reason":"Ping timeout: 264 seconds","date":"2013-10-04T18:09:06.265Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-04T18:18:59.877Z","type":"nick"}
{"nick":"bnoordhuis","date":"2013-10-04T18:20:37.934Z","type":"join"}
{"nick":"c4milo","date":"2013-10-04T18:23:05.067Z","type":"join"}
{"nick":"kevinswiber","reason":"Remote host closed the connection","date":"2013-10-04T18:23:13.529Z","type":"quit"}
{"nick":"wwicks","date":"2013-10-04T18:29:08.905Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-10-04T18:31:23.254Z","type":"quit"}
{"nick":"wwicks","reason":"Quit: I'm sure we'll meet again","date":"2013-10-04T18:37:23.730Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T18:38:49.548Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-10-04T18:45:39.475Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 260 seconds","date":"2013-10-04T18:47:43.916Z","type":"quit"}
{"nick":"abraxas","date":"2013-10-04T18:51:29.453Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 264 seconds","date":"2013-10-04T18:55:54.262Z","type":"quit"}
{"nick":"bajtos","message":"tjfontaine: seems like http://jenkins.nodejs.org/ is down?","date":"2013-10-04T18:56:59.732Z","type":"message"}
{"nick":"tjfontaine","message":"hm","date":"2013-10-04T18:57:16.664Z","type":"message"}
{"nick":"EhevuTov","date":"2013-10-04T18:57:58.431Z","type":"join"}
{"nick":"dominictarr","date":"2013-10-04T19:05:20.606Z","type":"join"}
{"nick":"tjfontaine","message":"bajtos: ok, hopefully rectified for now","date":"2013-10-04T19:09:08.677Z","type":"message"}
{"nick":"tjfontaine","message":"well as soon as I figure out why ubuntu is down","date":"2013-10-04T19:09:24.107Z","type":"message"}
{"nick":"kevinswiber","date":"2013-10-04T19:09:28.077Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-10-04T19:15:18.208Z","type":"quit"}
{"nick":"c4milo","date":"2013-10-04T19:16:23.065Z","type":"join"}
{"nick":"MI6","message":"\u0002libuv-master\u0002: #269 \u00037UNSTABLE\u000f osx (1/195) linux (2/194) windows (3/195) smartos (5/194) http://jenkins.nodejs.org/job/libuv-master/269/","date":"2013-10-04T19:17:30.091Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #593 \u00037UNSTABLE\u000f smartos-ia32 (5/644) linux-x64 (1/644) smartos-x64 (7/644) osx-ia32 (1/644) linux-ia32 (3/644) http://jenkins.nodejs.org/job/nodejs-master/593/","date":"2013-10-04T19:26:31.273Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T19:27:57.336Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-node-integration\u0002: #253 \u00037UNSTABLE\u000f linux-ia32 (1/644) osx-ia32 (1/644) linux-x64 (2/644) smartos-x64 (10/644) smartos-ia32 (3/644) http://jenkins.nodejs.org/job/libuv-node-integration/253/","date":"2013-10-04T19:41:02.545Z","type":"message"}
{"nick":"c4milo","date":"2013-10-04T19:49:19.512Z","type":"join"}
{"nick":"dominictarr","reason":"Ping timeout: 245 seconds","date":"2013-10-04T19:53:46.661Z","type":"quit"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-10-04T19:55:01.226Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-04T20:03:20.363Z","type":"nick"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-10-04T20:09:20.645Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-04T20:11:09.986Z","type":"quit"}
{"nick":"st_luke","date":"2013-10-04T20:11:21.563Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T20:13:55.729Z","type":"quit"}
{"nick":"julianduque","date":"2013-10-04T20:18:08.042Z","type":"join"}
{"nick":"bradleymeck","date":"2013-10-04T20:18:29.211Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-04T20:19:38.674Z","type":"quit"}
{"nick":"julianduque","reason":"Ping timeout: 264 seconds","date":"2013-10-04T20:26:38.799Z","type":"quit"}
{"nick":"julianduque","date":"2013-10-04T20:28:54.487Z","type":"join"}
{"nick":"c4milo","date":"2013-10-04T20:30:35.566Z","type":"join"}
{"nick":"c4milo_","date":"2013-10-04T20:31:28.376Z","type":"join"}
{"nick":"c4milo","reason":"Read error: Connection reset by peer","date":"2013-10-04T20:31:34.633Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-10-04T20:37:27.771Z","type":"quit"}
{"nick":"c4milo_","reason":"Remote host closed the connection","date":"2013-10-04T20:39:05.668Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-10-04T20:39:15.830Z","type":"quit"}
{"nick":"kevinswiber","reason":"Remote host closed the connection","date":"2013-10-04T20:43:54.829Z","type":"quit"}
{"nick":"kevinswiber","date":"2013-10-04T20:44:30.041Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-04T20:46:54.379Z","type":"nick"}
{"nick":"kevinswiber","reason":"Ping timeout: 240 seconds","date":"2013-10-04T20:48:36.539Z","type":"quit"}
{"nick":"c4milo","date":"2013-10-04T20:50:57.819Z","type":"join"}
{"nick":"st_luke","date":"2013-10-04T20:51:44.459Z","type":"join"}
{"nick":"wwicks","date":"2013-10-04T20:53:30.168Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T20:56:29.092Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-04T20:58:27.667Z","type":"nick"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-10-04T21:05:02.449Z","type":"quit"}
{"nick":"othiym23","message":"tjfontaine: was it irrelevant that I was seeing my test case exit before it had finished reading the stream regardless of whether or not the stream was paused?","date":"2013-10-04T21:05:31.456Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: no, that is certainly relevant, I'm not sure it was germane to this issue though","date":"2013-10-04T21:05:53.618Z","type":"message"}
{"nick":"tjfontaine","message":"feel free to comment with your findings though","date":"2013-10-04T21:06:12.997Z","type":"message"}
{"nick":"tjfontaine","message":"in your case no end event was being fired, correct?","date":"2013-10-04T21:06:31.748Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: correct","date":"2013-10-04T21:06:37.732Z","type":"message"}
{"nick":"tjfontaine","message":"yes, I still feel like node could be breaking npm in this way here","date":"2013-10-04T21:06:51.978Z","type":"message"}
{"nick":"mikeal","date":"2013-10-04T21:07:03.504Z","type":"join"}
{"nick":"othiym23","message":"the fact that it's in the child process is maybe relevant, but the parent process shouldn't bail until it's finished reading, no?","date":"2013-10-04T21:07:25.551Z","type":"message"}
{"nick":"tjfontaine","message":"but last night I was thinking about this case, and today I convinced myself that I was probably being silly and that this is what everyone intended -- so I had to double check the code","date":"2013-10-04T21:07:43.560Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: cp may be playing a part here","date":"2013-10-04T21:07:52.068Z","type":"message"}
{"nick":"tjfontaine","message":"but should be pretty straight forward","date":"2013-10-04T21:08:22.899Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: I have a little extra time this afternoon, I may try splitting the test case into two scripts and seeing what I can scrape up with dtrace and mdb","date":"2013-10-04T21:09:11.428Z","type":"message"}
{"nick":"tjfontaine","message":"this was on smartos for you?","date":"2013-10-04T21:09:36.956Z","type":"message"}
{"nick":"tjfontaine","message":"your scenario I didn't hit on osx anyway","date":"2013-10-04T21:09:49.106Z","type":"message"}
{"nick":"othiym23","message":"no, I was running it on my OS X 10.8.5 laptop with node 0.10.15","date":"2013-10-04T21:10:19.798Z","type":"message"}
{"nick":"tjfontaine","message":"interesting, if doable could you also verify against HEAD/0.10.20","date":"2013-10-04T21:10:56.030Z","type":"message"}
{"nick":"othiym23","message":"oh sorry, 0.10.20 was what I was using","date":"2013-10-04T21:11:13.287Z","type":"message"}
{"nick":"othiym23","message":"derp","date":"2013-10-04T21:11:15.734Z","type":"message"}
{"nick":"tjfontaine","message":"k","date":"2013-10-04T21:11:21.559Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: I haven't yet been able to reproduce your scenario :/","date":"2013-10-04T21:15:54.334Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: any environmental factors I should look for?","date":"2013-10-04T21:16:17.573Z","type":"message"}
{"nick":"tjfontaine","message":"not sure, can you verify that you were using my latest version that didn't include the spawn race that trevor pointed out?","date":"2013-10-04T21:16:45.571Z","type":"message"}
{"nick":"tjfontaine","message":"running 100 times","date":"2013-10-04T21:17:42.438Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: is it on the issue?","date":"2013-10-04T21:17:55.739Z","type":"message"}
{"nick":"tjfontaine","message":"yup","date":"2013-10-04T21:18:01.681Z","type":"message"}
{"nick":"Benvie","date":"2013-10-04T21:19:54.375Z","type":"join"}
{"nick":"c4milo","date":"2013-10-04T21:23:47.428Z","type":"join"}
{"nick":"Benvie","reason":"Ping timeout: 264 seconds","date":"2013-10-04T21:27:06.306Z","type":"quit"}
{"nick":"julianduque","reason":"Read error: Connection reset by peer","date":"2013-10-04T21:27:28.587Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T21:28:57.531Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: thanks. and nice investigation on the http bug.","date":"2013-10-04T21:29:52.289Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: ping again :)","date":"2013-10-04T21:30:04.252Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: yo, I'll run the tests again in a few","date":"2013-10-04T21:30:30.743Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: thanks. really interested to see how it holds up.","date":"2013-10-04T21:30:47.689Z","type":"message"}
{"nick":"trevnorris","message":"there're somethings I know need to be fixed, but are obscure enough that our tests don't catch them.","date":"2013-10-04T21:31:16.310Z","type":"message"}
{"nick":"tjfontaine","message":"more tests","date":"2013-10-04T21:39:24.517Z","type":"message"}
{"nick":"tjfontaine","message":"more and more tests","date":"2013-10-04T21:39:27.582Z","type":"message"}
{"nick":"othiym23","message":"too many tests -- no such thing!","date":"2013-10-04T21:39:41.767Z","type":"message"}
{"nick":"tjfontaine","message":"said no one ever","date":"2013-10-04T21:39:47.951Z","type":"message"}
{"nick":"trevnorris","message":"i'm fine with running the tests. it's just finding someone else to make them for me. ;)","date":"2013-10-04T21:40:19.489Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-10-04T21:40:27.637Z","type":"message"}
{"nick":"tjfontaine","message":"writing good tests is hard.","date":"2013-10-04T21:40:35.952Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2013-10-04T21:40:36.729Z","type":"quit"}
{"nick":"trevnorris","message":"yeah it is.","date":"2013-10-04T21:41:17.320Z","type":"message"}
{"nick":"trevnorris","message":"oh, that reminds me. need to go fix mine.","date":"2013-10-04T21:41:30.390Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-04T21:41:54.637Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: can't wait to get to v0.13 development. have soooo much stuff planned. :)","date":"2013-10-04T21:43:43.344Z","type":"message"}
{"nick":"trevnorris","message":"just wonder what isaacs going to say","date":"2013-10-04T21:43:51.430Z","type":"message"}
{"nick":"mikeal","date":"2013-10-04T21:44:36.981Z","type":"join"}
{"nick":"tjfontaine","message":"\"let's do 0.12 first\" :P","date":"2013-10-04T21:45:47.357Z","type":"message"}
{"nick":"tjfontaine","message":"but it's good to be excited","date":"2013-10-04T21:45:53.492Z","type":"message"}
{"nick":"trevnorris","message":"yeah. I know. but the excitement of getting to v0.13 is what's making me finish async listeners.","date":"2013-10-04T21:47:24.081Z","type":"message"}
{"nick":"rendar","date":"2013-10-04T21:49:28.429Z","type":"quit"}
{"nick":"hz","date":"2013-10-04T21:49:35.324Z","type":"quit"}
{"nick":"Kakera","reason":"Ping timeout: 248 seconds","date":"2013-10-04T21:56:11.775Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: timer implementation question.","date":"2013-10-04T21:57:51.000Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2013-10-04T21:58:17.146Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so, when you clearInterval it's unref'd. so I'm having a problem where my after callback is supposed to receive the return value of the callback called.","date":"2013-10-04T21:58:35.093Z","type":"message"}
{"nick":"trevnorris","message":"but, if you clear it, then the return value is never actually returned.","date":"2013-10-04T21:58:50.377Z","type":"message"}
{"nick":"tjfontaine","message":"I'm sorry can you restate your first sentence?","date":"2013-10-04T21:59:02.109Z","type":"message"}
{"nick":"trevnorris","message":"so, would it be horrible to nextTick the clearing of the timer.","date":"2013-10-04T21:59:04.527Z","type":"message"}
{"nick":"trevnorris","message":"ok. so: var b = setInterval(fn() { clearInterval(b) return 'hi'; });","date":"2013-10-04T21:59:27.399Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2013-10-04T21:59:37.255Z","type":"message"}
{"nick":"trevnorris","message":"in the async listener api you can do: after: function(context, domain, returnValue);","date":"2013-10-04T21:59:46.219Z","type":"message"}
{"nick":"trevnorris","message":"and get the return value of the async callback that fired.","date":"2013-10-04T21:59:55.581Z","type":"message"}
{"nick":"trevnorris","message":"but, when you clear a timer, that return value is never returned.","date":"2013-10-04T22:00:09.216Z","type":"message"}
{"nick":"tjfontaine","message":"fwiw I'm not sure we should give a crap about returnvalue but ok","date":"2013-10-04T22:00:16.777Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-10-04T22:00:24.269Z","type":"message"}
{"nick":"trevnorris","message":"bert requested it, and it was trivial to implement.","date":"2013-10-04T22:00:34.756Z","type":"message"}
{"nick":"tjfontaine","message":"it's nonsensical, but whatever","date":"2013-10-04T22:00:44.694Z","type":"message"}
{"nick":"trevnorris","message":"he wanted it for his new wrapper api or whatever he's calling it.","date":"2013-10-04T22:01:09.805Z","type":"message"}
{"nick":"tjfontaine","message":"ya I know","date":"2013-10-04T22:01:13.155Z","type":"message"}
{"nick":"tjfontaine","message":"it doesn't make sense","date":"2013-10-04T22:01:16.380Z","type":"message"}
{"nick":"tjfontaine","message":"anyway","date":"2013-10-04T22:01:17.439Z","type":"message"}
{"nick":"tjfontaine","message":"moving on","date":"2013-10-04T22:01:19.299Z","type":"message"}
{"nick":"trevnorris","message":"well, fwiw it's making testing easier, because simply keeping track of the number of async events that have fired is useless","date":"2013-10-04T22:01:56.769Z","type":"message"}
{"nick":"trevnorris","message":"since node does so many in the background","date":"2013-10-04T22:02:02.128Z","type":"message"}
{"nick":"trevnorris","message":"so a simple counter is fragile.","date":"2013-10-04T22:02:08.454Z","type":"message"}
{"nick":"trevnorris","message":"but returning a value and checking that in the after callback is more reliable","date":"2013-10-04T22:02:24.835Z","type":"message"}
{"nick":"trevnorris","message":"to make sure all the correct timers fired.","date":"2013-10-04T22:02:34.601Z","type":"message"}
{"nick":"tjfontaine","message":"sure fine, but especially in an interval sense return values make very little sense, *if* your'e going to use return values from callbacks you're going to use them for control flow interuption","date":"2013-10-04T22:02:38.715Z","type":"message"}
{"nick":"tjfontaine","message":"i.e. generator/iterator style operations","date":"2013-10-04T22:03:06.837Z","type":"message"}
{"nick":"trevnorris","message":"ok. i'll take your word on that. honestly this whole async listener thing doesn't make much sense to me. i'm just implementing it because I saw a chance for performance. :)","date":"2013-10-04T22:03:32.281Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-10-04T22:03:39.479Z","type":"message"}
{"nick":"tjfontaine","message":"so what's the real question, what do you with the fact that a return value is dropped on the floor?","date":"2013-10-04T22:04:01.078Z","type":"message"}
{"nick":"trevnorris","message":"yeah. like, is that the way it _should_ operate. or should the after callback fire anyways.","date":"2013-10-04T22:04:24.501Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: ping","date":"2013-10-04T22:04:26.097Z","type":"message"}
{"nick":"julianduque","date":"2013-10-04T22:04:29.833Z","type":"join"}
{"nick":"tjfontaine","message":"for an interval you get a before/after for each time the cb fires?","date":"2013-10-04T22:05:49.612Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: yo","date":"2013-10-04T22:06:35.332Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: so, I just realized when you clear an interval like: var b = setInterval(fn() { clearInterval(b); });","date":"2013-10-04T22:07:29.785Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: the after callback gets dropped","date":"2013-10-04T22:07:38.789Z","type":"message"}
{"nick":"trevnorris","message":"because the timer's being immediately destructed","date":"2013-10-04T22:08:02.131Z","type":"message"}
{"nick":"othiym23","message":"hmmmmmm","date":"2013-10-04T22:08:02.341Z","type":"message"}
{"nick":"othiym23","message":"right","date":"2013-10-04T22:08:06.014Z","type":"message"}
{"nick":"trevnorris","message":"so, a way around that is to do a: var b = setIn(fn() { process.nextTick(fn() { clearIn(b); }); });","date":"2013-10-04T22:08:44.592Z","type":"message"}
{"nick":"othiym23","message":"that could be bad for things like long-stacktrace modules","date":"2013-10-04T22:08:48.960Z","type":"message"}
{"nick":"trevnorris","message":"and do that internally","date":"2013-10-04T22:08:53.211Z","type":"message"}
{"nick":"trevnorris","message":"but i'm not sure if that'll break the way people expect timers to work.","date":"2013-10-04T22:09:16.722Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: ?","date":"2013-10-04T22:09:19.848Z","type":"message"}
{"nick":"tjfontaine","message":"sorry got diverted in meatspace, re-reading","date":"2013-10-04T22:09:29.456Z","type":"message"}
{"nick":"trevnorris","message":"heh","date":"2013-10-04T22:09:37.395Z","type":"message"}
{"nick":"tjfontaine","message":"that should not break the way people (other than you :P) to expect how timers work","date":"2013-10-04T22:10:10.951Z","type":"message"}
{"nick":"trevnorris","message":"coolio. that helps a lot.","date":"2013-10-04T22:10:31.560Z","type":"message"}
{"nick":"tjfontaine","message":"deterministic timers are a fantasy wish land that I don't think node can really commit to","date":"2013-10-04T22:10:34.461Z","type":"message"}
{"nick":"tjfontaine","message":"the stack trace issue is an interesting point from othiym23 ","date":"2013-10-04T22:10:58.765Z","type":"message"}
{"nick":"othiym23","message":"yeah, I agree with my esteemed colleague tjfontaine here","date":"2013-10-04T22:11:07.118Z","type":"message"}
{"nick":"trevnorris","message":"well, that was an easy fix. thanks for the discussion.","date":"2013-10-04T22:14:53.388Z","type":"message"}
{"nick":"othiym23","message":"I don't think most people really understand process.nextTick well enough to not expect it to be used with other async primitives","date":"2013-10-04T22:15:17.728Z","type":"message"}
{"nick":"othiym23","message":"i.e. doing what you're doing isn't going to seem any more asynchronous to them than setImmediate's behavior by default","date":"2013-10-04T22:15:37.287Z","type":"message"}
{"nick":"othiym23","message":"no problem!","date":"2013-10-04T22:15:41.780Z","type":"message"}
{"nick":"trevnorris","message":"hah, yeah.","date":"2013-10-04T22:16:35.633Z","type":"message"}
{"nick":"trevnorris","message":"whenever I want to see a confused look on someone's face I just start describing how node's event loop works :P","date":"2013-10-04T22:17:11.347Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-10-04T22:17:55.497Z","type":"message"}
{"nick":"tjfontaine","message":"(or doesn't) as the case may be","date":"2013-10-04T22:18:03.178Z","type":"message"}
{"nick":"trevnorris","message":"yeah.","date":"2013-10-04T22:19:34.100Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so, you're saying that bert wants to use the return value of the callback for control flow?","date":"2013-10-04T22:19:50.164Z","type":"message"}
{"nick":"othiym23","message":"*someday* I'll finish that blog post, but I've realized I want to come up with a better way to explain what Node is doing than talking about \"loops\"","date":"2013-10-04T22:20:14.975Z","type":"message"}
{"nick":"tjfontaine","message":"no, his plan for his task api is such that the return value from a cb is eventually passed the finally handler","date":"2013-10-04T22:20:19.280Z","type":"message"}
{"nick":"tjfontaine","message":"*passed to the","date":"2013-10-04T22:20:26.347Z","type":"message"}
{"nick":"othiym23","message":"because I think that confuses more than it clarifies","date":"2013-10-04T22:20:26.557Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: we should just have a sit down and try and explain it to a neophyte and see what we come up with :)","date":"2013-10-04T22:20:49.991Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: that's a good idea","date":"2013-10-04T22:21:01.582Z","type":"message"}
{"nick":"trevnorris","message":"hah","date":"2013-10-04T22:21:21.741Z","type":"message"}
{"nick":"trevnorris","message":"ah, son of a ....","date":"2013-10-04T22:22:53.034Z","type":"message"}
{"nick":"tjfontaine","message":"do we have a timing ordering test that's failing? :)","date":"2013-10-04T22:23:15.848Z","type":"message"}
{"nick":"trevnorris","message":"i just realized that some callbacks actually go through the event emitter. it'd be impossible to control all those return values.","date":"2013-10-04T22:23:23.289Z","type":"message"}
{"nick":"trevnorris","message":"e.g. net.createServer(fn() { });","date":"2013-10-04T22:23:39.046Z","type":"message"}
{"nick":"trevnorris","message":"that's just sugar for net.createServer().on('connection', fn() { });","date":"2013-10-04T22:23:58.354Z","type":"message"}
{"nick":"trevnorris","message":"or am I missing something?","date":"2013-10-04T22:24:17.164Z","type":"message"}
{"nick":"tjfontaine","message":"that's right","date":"2013-10-04T22:24:40.510Z","type":"message"}
{"nick":"trevnorris","message":"oy.","date":"2013-10-04T22:24:45.542Z","type":"message"}
{"nick":"trevnorris","message":"and i'm not about to integrate my async listener with the event emitter, because it's not actually _asynchronous_","date":"2013-10-04T22:25:11.924Z","type":"message"}
{"nick":"tjfontaine","message":"rename it, to just listener :P","date":"2013-10-04T22:25:23.274Z","type":"message"}
{"nick":"tjfontaine","message":"omnipotentListener","date":"2013-10-04T22:25:34.289Z","type":"message"}
{"nick":"trevnorris","message":"hahaha","date":"2013-10-04T22:25:38.517Z","type":"message"}
{"nick":"trevnorris","message":"the issue is the async stack. if you start stacking and executing them during synchronous flow any stack trace idea starts to get lost.","date":"2013-10-04T22:26:19.726Z","type":"message"}
{"nick":"trevnorris","message":"because you'll end up with duplicate entries","date":"2013-10-04T22:26:29.173Z","type":"message"}
{"nick":"tjfontaine","message":"so don't use them for long stack traces :)","date":"2013-10-04T22:26:42.098Z","type":"message"}
{"nick":"tjfontaine","message":"or if they are planned to be, they can de-dup the stack","date":"2013-10-04T22:26:56.426Z","type":"message"}
{"nick":"trevnorris","message":"it'd also break the cls idea that othiym23 needs. because then you're persisting information about something that's not actually synchronous.","date":"2013-10-04T22:27:30.027Z","type":"message"}
{"nick":"trevnorris","message":"and errors won't properly bubble up the call stack.","date":"2013-10-04T22:27:42.149Z","type":"message"}
{"nick":"tjfontaine","message":"can we pass a state flag for inEE","date":"2013-10-04T22:27:49.441Z","type":"message"}
{"nick":"trevnorris","action":"shudders","date":"2013-10-04T22:28:04.591Z","type":"action"}
{"nick":"othiym23","message":"I can tell you from my work on bindEmitter for CLS that there's a piece missing of a generic listener API around EEs","date":"2013-10-04T22:28:45.321Z","type":"message"}
{"nick":"othiym23","message":"it feels inevitable that the two get joined together somehow eventually","date":"2013-10-04T22:29:02.017Z","type":"message"}
{"nick":"trevnorris","message":"well, I have some stuff planned for v0.13 ;)","date":"2013-10-04T22:29:19.220Z","type":"message"}
{"nick":"othiym23","message":"I'm just not real sure how it looks yet","date":"2013-10-04T22:29:19.456Z","type":"message"}
{"nick":"othiym23","message":"yeah, I know you do, and that stuff looks good","date":"2013-10-04T22:29:30.649Z","type":"message"}
{"nick":"othiym23","message":"but that seems focused at separating concerns (which is good!) and I'm talking about making explicit a coupling that's pretty buried right now","date":"2013-10-04T22:29:55.824Z","type":"message"}
{"nick":"othiym23","message":"still trying to figure out what it is reduced to its simplest basis","date":"2013-10-04T22:30:06.971Z","type":"message"}
{"nick":"othiym23","message":"tapping into my inner Rich Hickey","date":"2013-10-04T22:30:11.684Z","type":"message"}
{"nick":"trevnorris","message":"well, there's a bunch of stuff still not on that list.","date":"2013-10-04T22:30:22.867Z","type":"message"}
{"nick":"trevnorris","message":"othiym23: i.e. check my repo for reserved module names :) https://github.com/trevnorris?tab=repositories","date":"2013-10-04T22:30:50.455Z","type":"message"}
{"nick":"trevnorris","message":"have some tightly coupled ideas planned that the current EE will use.","date":"2013-10-04T22:32:23.321Z","type":"message"}
{"nick":"trevnorris","message":"imo, EE is fundamentally broken to the point that trying to tightly couple it will only make core overly complex and hurt performance.","date":"2013-10-04T22:32:51.934Z","type":"message"}
{"nick":"trevnorris","message":"i mean. the fact we have to do a Object::Get(String) to get the callback from c++ on _every_ call is just wasted time.","date":"2013-10-04T22:33:43.962Z","type":"message"}
{"nick":"tjfontaine","message":"objects mutated","date":"2013-10-04T22:34:06.051Z","type":"message"}
{"nick":"othiym23","message":"it's probably too late now, but the level of polymorphism in core is something that gets in the way of a lot of performance improvements","date":"2013-10-04T22:34:28.142Z","type":"message"}
{"nick":"trevnorris","message":"I think I have a way around that.","date":"2013-10-04T22:34:52.564Z","type":"message"}
{"nick":"trevnorris","message":"most basically, there's going to be a super thin tightly coupled js layer to our c++ wraps. the c++ classes will have a Persistent<Function> for each type of callback they can expect.","date":"2013-10-04T22:35:35.933Z","type":"message"}
{"nick":"othiym23","message":"(polymorphism in the V8 sense, not the OO sense)","date":"2013-10-04T22:35:42.055Z","type":"message"}
{"nick":"trevnorris","message":"so, the idea is like: var server = new require('tcp-wrap'); server.onconnection(fn); where fn will be set as the internal callback to the class.","date":"2013-10-04T22:36:55.417Z","type":"message"}
{"nick":"tjfontaine","message":"omig","date":"2013-10-04T22:37:03.728Z","type":"message"}
{"nick":"trevnorris","message":"but also, you can do: require('tcp-wrap').onconnection(fn); where that'll be set as the default callback to all new instantiations.","date":"2013-10-04T22:37:35.196Z","type":"message"}
{"nick":"trevnorris","message":"that way we don't have to jump around near as many times.","date":"2013-10-04T22:37:56.915Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: omig?","date":"2013-10-04T22:38:17.987Z","type":"message"}
{"nick":"tjfontaine","message":"more modules :)","date":"2013-10-04T22:38:25.246Z","type":"message"}
{"nick":"tjfontaine","message":"process.binding()'s really though","date":"2013-10-04T22:38:36.087Z","type":"message"}
{"nick":"trevnorris","message":"well, process.binding() directly links to the c++ layer. but having a very thin js layer will help with things that are done faster in js land","date":"2013-10-04T22:39:12.800Z","type":"message"}
{"nick":"trevnorris","message":"like setting basic object properties.","date":"2013-10-04T22:39:20.191Z","type":"message"}
{"nick":"tjfontaine","message":"totally will cross this bridge when we get to it","date":"2013-10-04T22:39:38.759Z","type":"message"}
{"nick":"trevnorris","message":"heh, yeah. i've been planning this for a while. and no idea what isaacs going to say.","date":"2013-10-04T22:40:07.057Z","type":"message"}
{"nick":"tjfontaine","message":"keep in mind we want as few real module names in the space","date":"2013-10-04T22:40:33.158Z","type":"message"}
{"nick":"trevnorris","message":"ah, what's another dozen or so :P","date":"2013-10-04T22:41:02.510Z","type":"message"}
{"nick":"trevnorris","message":"no, I understand what you mean.","date":"2013-10-04T22:41:24.155Z","type":"message"}
{"nick":"othiym23","message":"require('_____NODE___@INTERNAL___tcp_wrap')","date":"2013-10-04T22:41:27.867Z","type":"message"}
{"nick":"trevnorris","message":"hah","date":"2013-10-04T22:41:32.139Z","type":"message"}
{"nick":"tjfontaine","message":"well, I would suggest require('__trevors_whatever').accessor('something')","date":"2013-10-04T22:41:46.617Z","type":"message"}
{"nick":"tjfontaine","message":"but anyway","date":"2013-10-04T22:41:53.292Z","type":"message"}
{"nick":"othiym23","message":"needs more underscores","date":"2013-10-04T22:41:55.791Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-10-04T22:41:58.496Z","type":"message"}
{"nick":"trevnorris","message":"what I see is this thing js binding layer, and all the fluff around streams and EE will sit on top of.","date":"2013-10-04T22:42:03.211Z","type":"message"}
{"nick":"tjfontaine","message":"right, but this thing isn't meant to be public, right?","date":"2013-10-04T22:42:15.332Z","type":"message"}
{"nick":"trevnorris","message":"we are binding too much fluff directly to the c++ modules.","date":"2013-10-04T22:42:18.721Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-04T22:42:23.175Z","type":"nick"}
{"nick":"trevnorris","message":"well... maybe not \"officially\" just like how process.binding() isn't.","date":"2013-10-04T22:42:45.037Z","type":"message"}
{"nick":"tjfontaine","message":"the more we do in JS the more happy TJ is","date":"2013-10-04T22:42:55.042Z","type":"message"}
{"nick":"trevnorris","message":"heh","date":"2013-10-04T22:43:07.035Z","type":"message"}
{"nick":"othiym23","message":"if New Relic ever starts messing with process.binding() you guys have permission to shoot me","date":"2013-10-04T22:43:12.107Z","type":"message"}
{"nick":"trevnorris","message":"noted :)","date":"2013-10-04T22:43:32.628Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-04T22:43:58.538Z","type":"nick"}
{"nick":"trevnorris","message":"tjfontaine: for me it's, of course, about performance. and by directly placing the Js calls into the c++ classes we can get around a lot of object getting and manipulation. place that in a thin js layer that all our \"official\" public modules will use.","date":"2013-10-04T22:44:39.457Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: I had a question regarding mdb, is there way to export the js objects so i can build a visual graph? Maybe trevnorris also has some ideas?","date":"2013-10-04T22:45:28.196Z","type":"message"}
{"nick":"tjfontaine","message":"wolfeidau: that's part of my job that I'm scheduled to complete, you'll have a json line separated list of objects and their hash","date":"2013-10-04T22:46:50.077Z","type":"message"}
{"nick":"wolfeidau","action":"is going to find this damn memory leak if it kills him","date":"2013-10-04T22:46:53.194Z","type":"action"}
{"nick":"tjfontaine","message":"trevnorris: 99 times out of 100, performance is found by moving it to JS","date":"2013-10-04T22:47:11.754Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-10-04T22:47:13.687Z","type":"nick"}
{"nick":"tjfontaine","message":"wolfeidau: which one is this?","date":"2013-10-04T22:47:20.971Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: I hassled you about a week ago with some questions about finding one","date":"2013-10-04T22:47:56.552Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-10-04T22:47:59.946Z","type":"message"}
{"nick":"wolfeidau","message":"I found the area of the leak","date":"2013-10-04T22:48:03.673Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2013-10-04T22:48:09.463Z","type":"message"}
{"nick":"tjfontaine","message":"you know what type of object it is that you're leaking then?","date":"2013-10-04T22:48:18.880Z","type":"message"}
{"nick":"wolfeidau","message":"My big problem is finding the path to the leak","date":"2013-10-04T22:48:20.798Z","type":"message"}
{"nick":"tjfontaine","message":"do you know what's holding the reference to them?","date":"2013-10-04T22:48:39.017Z","type":"message"}
{"nick":"wolfeidau","message":"Yeah I know the objects leaking","date":"2013-10-04T22:48:39.587Z","type":"message"}
{"nick":"wolfeidau","message":"No ","date":"2013-10-04T22:48:43.408Z","type":"message"}
{"nick":"tjfontaine","message":"::findjsobjects -r doesn't tell you?","date":"2013-10-04T22:48:49.599Z","type":"message"}
{"nick":"wolfeidau","message":"Every time i run that i don't get anything ","date":"2013-10-04T22:49:02.805Z","type":"message"}
{"nick":"tjfontaine","message":"hmm, could be a closure lemme ask someone here","date":"2013-10-04T22:49:15.675Z","type":"message"}
{"nick":"wolfeidau","message":"I will just fire up smartos and show you the errors","date":"2013-10-04T22:49:33.995Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: Also i really don't understand what the mark does","date":"2013-10-04T22:49:52.389Z","type":"message"}
{"nick":"tjfontaine","message":"ok you don't necessarily *need* the mark, but I presume these cores contain customer or other sensitive info, right?","date":"2013-10-04T22:50:17.313Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: yeah I would love to be able to understand how this works as well","date":"2013-10-04T22:50:56.040Z","type":"message"}
{"nick":"wolfeidau","message":"So I can write a blog post in return","date":"2013-10-04T22:51:16.436Z","type":"message"}
{"nick":"tjfontaine","message":"nod","date":"2013-10-04T22:51:21.682Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-10-04T22:52:08.176Z","type":"quit"}
{"nick":"wolfeidau","message":"tjfontaine: This is the current state I have a core for https://gist.github.com/wolfeidau/6834170","date":"2013-10-04T22:52:08.860Z","type":"message"}
{"nick":"tjfontaine","message":"ok, and it's buffer's that you're leaking?","date":"2013-10-04T22:53:15.129Z","type":"message"}
{"nick":"tjfontaine","message":"these are the 13byte slices we found before, right?","date":"2013-10-04T22:53:25.121Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: SO i added a file to that with how i think i should use to find the leak","date":"2013-10-04T22:53:27.742Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: yeah","date":"2013-10-04T22:53:35.404Z","type":"message"}
{"nick":"wolfeidau","message":"It is all centered around an event emitter redis and request","date":"2013-10-04T22:53:53.985Z","type":"message"}
{"nick":"wolfeidau","message":"some how they are all getting hooked up","date":"2013-10-04T22:54:02.810Z","type":"message"}
{"nick":"tjfontaine","message":"mikeal's request?","date":"2013-10-04T22:54:07.255Z","type":"message"}
{"nick":"wolfeidau","message":"yeah","date":"2013-10-04T22:54:11.273Z","type":"message"}
{"nick":"tjfontaine","message":"excellent, maybe you've found a big bad bug for everyone :)","date":"2013-10-04T22:54:20.664Z","type":"message"}
{"nick":"tjfontaine","message":"anyway","date":"2013-10-04T22:54:25.407Z","type":"message"}
{"nick":"wolfeidau","message":"Both the upstream API libraries we use that library","date":"2013-10-04T22:54:31.412Z","type":"message"}
{"nick":"tjfontaine","message":"curl -O http://us-east.manta.joyent.com/tjfontaine/public/ia32_v8.so","date":"2013-10-04T22:54:37.087Z","type":"message"}
{"nick":"wolfeidau","message":"On via HTTPS and one HTTP","date":"2013-10-04T22:54:39.574Z","type":"message"}
{"nick":"tjfontaine","message":"then ::load /path/to/ia32_v8.so","date":"2013-10-04T22:54:48.726Z","type":"message"}
{"nick":"tjfontaine","message":"that's a slightly newer mdb v8, so maybe the reference stuff is fixed since","date":"2013-10-04T22:55:06.734Z","type":"message"}
{"nick":"tjfontaine","message":"or some other bug is fixed :)","date":"2013-10-04T22:55:12.483Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: mdb: ld.so.1: mdb: fatal: /home/markw/ia32_v8.so: wrong ELF class: ELFCLASS32","date":"2013-10-04T22:55:28.551Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-10-04T22:55:30.463Z","type":"nick"}
{"nick":"tjfontaine","message":"heh ok, change ia32 to x64 :)","date":"2013-10-04T22:55:38.115Z","type":"message"}
{"nick":"wolfeidau","message":"OK loaded","date":"2013-10-04T22:56:21.321Z","type":"message"}
{"nick":"tjfontaine","message":"ok, so findjsobjects again, find a few addresses for your buffers, and lets try the <addr>::findjsobjects -r (no need to -m first)","date":"2013-10-04T22:57:13.406Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: So i have put my commands down the bottom https://gist.github.com/wolfeidau/6834170","date":"2013-10-04T22:58:15.168Z","type":"message"}
{"nick":"wolfeidau","message":"What should i run next ","date":"2013-10-04T22:58:57.656Z","type":"message"}
{"nick":"tjfontaine","message":"3922acbf8291::jsprint","date":"2013-10-04T22:59:08.047Z","type":"message"}
{"nick":"tjfontaine","message":"which should be an array","date":"2013-10-04T22:59:13.194Z","type":"message"}
{"nick":"tjfontaine","message":"probably just holding that buffer","date":"2013-10-04T22:59:22.133Z","type":"message"}
{"nick":"wolfeidau","message":"done ","date":"2013-10-04T22:59:41.885Z","type":"message"}
{"nick":"tjfontaine","message":"is it just an array with only one element?","date":"2013-10-04T22:59:54.628Z","type":"message"}
{"nick":"wolfeidau","message":"updateed gist","date":"2013-10-04T22:59:59.335Z","type":"message"}
{"nick":"tjfontaine","message":"ah ok you updated","date":"2013-10-04T22:59:59.553Z","type":"message"}
{"nick":"tjfontaine","message":"3922acbf8291::findjsobjects -r","date":"2013-10-04T23:00:11.838Z","type":"message"}
{"nick":"tjfontaine","message":"if that doesn't return again, then -m then -r","date":"2013-10-04T23:00:19.683Z","type":"message"}
{"nick":"tjfontaine","message":"holding 2 bytes of a buffer though is pretty interesting","date":"2013-10-04T23:00:39.991Z","type":"message"}
{"nick":"tjfontaine","message":"how the devil.","date":"2013-10-04T23:01:51.502Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: updated with all the combos i tried","date":"2013-10-04T23:01:55.513Z","type":"message"}
{"nick":"c4milo","date":"2013-10-04T23:02:25.082Z","type":"join"}
{"nick":"wolfeidau","message":"Now at this stage should i double back and try more buffer addresses?","date":"2013-10-04T23:02:58.901Z","type":"message"}
{"nick":"tjfontaine","message":"right, I would try a few other buffer addresses","date":"2013-10-04T23:03:09.928Z","type":"message"}
{"nick":"tjfontaine","message":"you *should* be able to do","date":"2013-10-04T23:03:19.646Z","type":"message"}
{"nick":"tjfontaine","message":"1029aa97da9::findjsobjects -l | ::findjsobjects -r ! sort | uniq -c","date":"2013-10-04T23:03:58.387Z","type":"message"}
{"nick":"tjfontaine","message":"hypothetically","date":"2013-10-04T23:04:00.855Z","type":"message"}
{"nick":"brson","date":"2013-10-04T23:04:03.155Z","type":"join"}
{"nick":"tjfontaine","message":"which should give you the list of objects that refer to them the most","date":"2013-10-04T23:04:13.363Z","type":"message"}
{"nick":"tjfontaine","message":"if they have a common ancestor","date":"2013-10-04T23:04:18.365Z","type":"message"}
{"nick":"wolfeidau","message":"ahh","date":"2013-10-04T23:04:47.961Z","type":"message"}
{"nick":"tjfontaine","message":"I mean, I just made that up off the top of my head, but you get the idea :)","date":"2013-10-04T23:05:05.614Z","type":"message"}
{"nick":"tjfontaine","message":"that should give you a list of objects with the most counts of referred buffers","date":"2013-10-04T23:05:21.920Z","type":"message"}
{"nick":"tjfontaine","message":"then you could take a few of those addresses and ::jsprint them","date":"2013-10-04T23:05:30.423Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: well it is running","date":"2013-10-04T23:05:32.409Z","type":"message"}
{"nick":"tjfontaine","message":"nod","date":"2013-10-04T23:05:35.273Z","type":"message"}
{"nick":"octetcloud","reason":"Ping timeout: 252 seconds","date":"2013-10-04T23:06:45.490Z","type":"quit"}
{"nick":"wolfeidau","message":"lol i think my macbook is going to take off","date":"2013-10-04T23:07:00.529Z","type":"message"}
{"nick":"tjfontaine","message":"your poor macbook :)","date":"2013-10-04T23:07:23.650Z","type":"message"}
{"nick":"tjfontaine","message":"you should do this on manta :)","date":"2013-10-04T23:07:27.927Z","type":"message"}
{"nick":"wolfeidau","message":"Yeah i need to try that out","date":"2013-10-04T23:07:36.394Z","type":"message"}
{"nick":"wolfeidau","message":"Signed up the other day","date":"2013-10-04T23:07:43.769Z","type":"message"}
{"nick":"tjfontaine","message":"mput -f core ~~/stor/core && mlogin ~~/stor/core","date":"2013-10-04T23:07:57.235Z","type":"message"}
{"nick":"tjfontaine","message":"mdb $MANTA_INPUT_FILE","date":"2013-10-04T23:08:02.080Z","type":"message"}
{"nick":"wolfeidau","message":"so how does this sort work","date":"2013-10-04T23:09:04.588Z","type":"message"}
{"nick":"tjfontaine","message":"which sort?","date":"2013-10-04T23:09:16.975Z","type":"message"}
{"nick":"tjfontaine","message":"! just sends it out to shell, so after that it's normal unix stuff","date":"2013-10-04T23:09:27.442Z","type":"message"}
{"nick":"wolfeidau","message":"-r returns 1029aa97da9 referred to by 3922acbf8291[0]","date":"2013-10-04T23:09:28.863Z","type":"message"}
{"nick":"tjfontaine","message":"ah ok ","date":"2013-10-04T23:09:42.311Z","type":"message"}
{"nick":"wolfeidau","message":"No more focused on how the data is sorted","date":"2013-10-04T23:09:42.529Z","type":"message"}
{"nick":"tjfontaine","message":"we should change the column","date":"2013-10-04T23:09:51.576Z","type":"message"}
{"nick":"tjfontaine","message":"and maybe cut out the unecessary stuff","date":"2013-10-04T23:10:04.842Z","type":"message"}
{"nick":"wolfeidau","message":"so you want to sort by that last [0]","date":"2013-10-04T23:10:09.707Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 245 seconds","date":"2013-10-04T23:10:11.184Z","type":"quit"}
{"nick":"wolfeidau","message":"or something else?","date":"2013-10-04T23:10:14.559Z","type":"message"}
{"nick":"tjfontaine","message":"not the [0] but the address just before it","date":"2013-10-04T23:10:18.254Z","type":"message"}
{"nick":"tjfontaine","message":"hwoever","date":"2013-10-04T23:10:27.001Z","type":"message"}
{"nick":"tjfontaine","message":"do they all come back as being array index 0 of a uniq address?","date":"2013-10-04T23:10:43.870Z","type":"message"}
{"nick":"wolfeidau","message":"I am a bit of stickler for understanding this stuff","date":"2013-10-04T23:10:48.357Z","type":"message"}
{"nick":"tjfontaine","message":"as well you should be","date":"2013-10-04T23:11:05.686Z","type":"message"}
{"nick":"tjfontaine","message":"mdb is all address based, in case it wasn't clear","date":"2013-10-04T23:11:14.098Z","type":"message"}
{"nick":"tjfontaine","message":"with a heavy concept around the unix pipeline style","date":"2013-10-04T23:11:28.867Z","type":"message"}
{"nick":"wolfeidau","message":"running to get a sample output","date":"2013-10-04T23:11:31.513Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: yeah gathered that","date":"2013-10-04T23:11:39.303Z","type":"message"}
{"nick":"tjfontaine","message":"I don't think there's a way once you ! to get back to the mdb pipeline though, lemme ask","date":"2013-10-04T23:11:55.491Z","type":"message"}
{"nick":"wolfeidau","message":"Updated gist with some intersting info","date":"2013-10-04T23:12:19.349Z","type":"message"}
{"nick":"brson","date":"2013-10-04T23:12:21.671Z","type":"join"}
{"nick":"wwicks","reason":"Quit: wwicks","date":"2013-10-04T23:13:41.354Z","type":"quit"}
{"nick":"M28","date":"2013-10-04T23:14:15.488Z","type":"join"}
{"nick":"tjfontaine","message":"right so ok, that's somewhat better","date":"2013-10-04T23:14:26.642Z","type":"message"}
{"nick":"tjfontaine","message":"you're still letting it run and find them all, right?","date":"2013-10-04T23:14:36.147Z","type":"message"}
{"nick":"wolfeidau","message":"yeah it is finding more body chunk","date":"2013-10-04T23:15:24.003Z","type":"message"}
{"nick":"wolfeidau","message":"updated gist","date":"2013-10-04T23:15:28.499Z","type":"message"}
{"nick":"tjfontaine","message":"it will be interesting to see how many end up in .chunk and in .body","date":"2013-10-04T23:15:28.717Z","type":"message"}
{"nick":"tjfontaine","message":"the fact that a single buffer is referred to both by a .chunk and .body is good news, that should be relatively easy to track down","date":"2013-10-04T23:16:00.667Z","type":"message"}
{"nick":"wolfeidau","message":"AHA","date":"2013-10-04T23:16:16.483Z","type":"message"}
{"nick":"wolfeidau","message":"OK ","date":"2013-10-04T23:16:19.419Z","type":"message"}
{"nick":"tjfontaine","message":"that's probably the leak you can control","date":"2013-10-04T23:16:19.636Z","type":"message"}
{"nick":"tjfontaine","message":"the others are probably Incoming/Outgoing readable/writable streams","date":"2013-10-04T23:16:42.543Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: CLS tests are all green for flippin-tick-thing","date":"2013-10-04T23:16:47.265Z","type":"message"}
{"nick":"tjfontaine","message":"wolfeidau: so, you probably want to see what 3b66cfcd23a9 and 3b66cfcf1819 are","date":"2013-10-04T23:17:33.372Z","type":"message"}
{"nick":"wolfeidau","message":"Yeah basicly to reproduce the leak I increased the data channeled through the service without adding or removing nodes, so i essentially watched it balloon then disconnected the clients and left the service idle in a state where it wouldn't reduce in size","date":"2013-10-04T23:17:43.171Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: Now we are getting somewhere, this is one of the upstream api's connections in request see gist","date":"2013-10-04T23:20:10.165Z","type":"message"}
{"nick":"tjfontaine","message":"right, so whomever is setting .body there, and whomever is setting .chunk on the other -- really want to actually be doing a .toString() [maybe even .toString('binary')]","date":"2013-10-04T23:21:28.374Z","type":"message"}
{"nick":"tjfontaine","message":"and not a .slice()","date":"2013-10-04T23:21:54.095Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: some newerelic tests that were passing before are failing now, will get back to you about which ones once I have all my native modules rebuilt","date":"2013-10-04T23:22:06.957Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: found a couple of others which linked to real stuff","date":"2013-10-04T23:22:34.172Z","type":"message"}
{"nick":"mikeal","date":"2013-10-04T23:22:54.574Z","type":"join"}
{"nick":"tjfontaine","message":"wolfeidau: so the real question is, is it valid for those objects holding onto the buffers to still be valid at the time this core was taken","date":"2013-10-04T23:23:17.288Z","type":"message"}
{"nick":"tjfontaine","message":"wolfeidau: if so, then the buffers themselves are the leak and the remedy is to *not* store the buffer but a copy to it (easiest with a tostring)","date":"2013-10-04T23:23:45.344Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: that core was taken when the service was idle and NO open tcp connections","date":"2013-10-04T23:23:52.600Z","type":"message"}
{"nick":"tjfontaine","message":"wolfeidau: ok, then you want to go up a level, and see what's holding on to those requests","date":"2013-10-04T23:24:10.250Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: Ok so this is where i use one of those ::jsprint options?","date":"2013-10-04T23:24:48.675Z","type":"message"}
{"nick":"tjfontaine","message":"you can do something like","date":"2013-10-04T23:25:23.831Z","type":"message"}
{"nick":"tjfontaine","message":"::findjsobjects -p chunk","date":"2013-10-04T23:25:29.979Z","type":"message"}
{"nick":"tjfontaine","message":"or","date":"2013-10-04T23:25:35.410Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-10-04T23:25:40.377Z","type":"quit"}
{"nick":"tjfontaine","message":"1029aa97da9::findjsobjects -l | ::findjsobjects -r ! grep chunk | awk '{print $5 }' | cut -f 1 -d . | sort | uniq","date":"2013-10-04T23:25:51.978Z","type":"message"}
{"nick":"wolfeidau","message":"I can see why you use mantra for this","date":"2013-10-04T23:26:59.023Z","type":"message"}
{"nick":"tjfontaine","message":"well, this part isn't easier, but you can at least not burn your lap :P","date":"2013-10-04T23:27:11.698Z","type":"message"}
{"nick":"tjfontaine","message":"my idea for mdb + manta may help with some of this though","date":"2013-10-04T23:27:32.983Z","type":"message"}
{"nick":"wolfeidau","message":"zone only has one core atm","date":"2013-10-04T23:27:45.134Z","type":"message"}
{"nick":"wolfeidau","message":"Need to give it all the cores","date":"2013-10-04T23:27:50.994Z","type":"message"}
{"nick":"tjfontaine","message":"well I don't think mdb parallelizes, but the cpus in the cloud are uber fast","date":"2013-10-04T23:28:05.663Z","type":"message"}
{"nick":"wolfeidau","message":"yeah just had a look it has 2 cores","date":"2013-10-04T23:28:32.032Z","type":"message"}
{"nick":"wolfeidau","message":"and is pummeling one","date":"2013-10-04T23:28:39.648Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-10-04T23:28:43.857Z","type":"message"}
{"nick":"tjfontaine","message":"I'm about to troll the guys at work though","date":"2013-10-04T23:28:49.622Z","type":"message"}
{"nick":"tjfontaine","message":"and ask for ::xargs -P :P","date":"2013-10-04T23:29:10.879Z","type":"message"}
{"nick":"wolfeidau","message":"haha","date":"2013-10-04T23:29:19.708Z","type":"message"}
{"nick":"wolfeidau","message":"Hell yeah","date":"2013-10-04T23:29:22.145Z","type":"message"}
{"nick":"mikeal","reason":"Ping timeout: 240 seconds","date":"2013-10-04T23:31:48.530Z","type":"quit"}
{"nick":"wwicks","date":"2013-10-04T23:32:30.706Z","type":"join"}
{"nick":"wolfeidau","message":"tjfontaine: so for some reason the grep isn't working so just dropped and grabbed a couple of the chunks to refer back to and they mostly are tied to something which hooks in a callback","date":"2013-10-04T23:34:03.192Z","type":"message"}
{"nick":"M28","reason":"Read error: Connection reset by peer","date":"2013-10-04T23:34:08.092Z","type":"quit"}
{"nick":"tjfontaine","message":"interesting, so a closure keeping things around?","date":"2013-10-04T23:34:27.217Z","type":"message"}
{"nick":"tjfontaine","message":"I mean, it's almost always a closures fault","date":"2013-10-04T23:35:38.574Z","type":"message"}
{"nick":"wolfeidau","message":"yeah must be function <anonymous> (as cb)","date":"2013-10-04T23:35:38.966Z","type":"message"}
{"nick":"wolfeidau","message":"Seems all of them come back to different function <anonymous> (as cb)","date":"2013-10-04T23:36:01.168Z","type":"message"}
{"nick":"wolfeidau","message":"What I will do now is i will go through and name all the callbacks in my upstream library","date":"2013-10-04T23:36:33.137Z","type":"message"}
{"nick":"tjfontaine","message":"atta boy! :)","date":"2013-10-04T23:37:03.043Z","type":"message"}
{"nick":"wolfeidau","message":"Then deploy that and rerun the test, do you think this would be a callback in request?","date":"2013-10-04T23:37:15.833Z","type":"message"}
{"nick":"tjfontaine","message":"if it is in request the world will thank you, but I suspect it to be in something of your own","date":"2013-10-04T23:37:47.298Z","type":"message"}
{"nick":"wolfeidau","message":"so it comes back to \"right, so whomever is setting .body there, and whomever is setting .chunk on the other -- really want to actually be doing a .toString() [maybe even .toString('binary')]\"","date":"2013-10-04T23:38:17.632Z","type":"message"}
{"nick":"tjfontaine","message":"maybe","date":"2013-10-04T23:38:34.079Z","type":"message"}
{"nick":"wolfeidau","message":"That is what i need to triple check as well","date":"2013-10-04T23:38:36.187Z","type":"message"}
{"nick":"tjfontaine","message":"it may not matter if what's holding on to those shouldn't be held onto","date":"2013-10-04T23:38:46.796Z","type":"message"}
{"nick":"wolfeidau","message":"Well all the toJSON stuff is being done in request","date":"2013-10-04T23:38:50.726Z","type":"message"}
{"nick":"wolfeidau","message":"We just get an object result as far as i recall","date":"2013-10-04T23:39:00.697Z","type":"message"}
{"nick":"tjfontaine","message":"nod","date":"2013-10-04T23:39:07.815Z","type":"message"}
{"nick":"wolfeidau","message":"But i will double check","date":"2013-10-04T23:39:12.993Z","type":"message"}
{"nick":"wolfeidau","message":"This is what bugged me","date":"2013-10-04T23:39:18.389Z","type":"message"}
{"nick":"wolfeidau","message":"How they hell is this getting tied into my code when we use the simplest version of requests api","date":"2013-10-04T23:39:43.884Z","type":"message"}
{"nick":"tjfontaine","message":"almost certainly a closure :)","date":"2013-10-04T23:39:58.669Z","type":"message"}
{"nick":"wolfeidau","message":"haha OK thanks a ton I will get this bugger","date":"2013-10-04T23:40:14.568Z","type":"message"}
{"nick":"tjfontaine","message":"but yes, starting by naming all of your anonymous functions","date":"2013-10-04T23:40:36.366Z","type":"message"}
{"nick":"tjfontaine","message":"great first step","date":"2013-10-04T23:40:41.795Z","type":"message"}
{"nick":"wolfeidau","message":"Will do","date":"2013-10-04T23:40:45.859Z","type":"message"}
{"nick":"wolfeidau","message":"It is only a small library so easy mode","date":"2013-10-04T23:40:55.253Z","type":"message"}
{"nick":"tjfontaine","message":"nod","date":"2013-10-04T23:41:09.562Z","type":"message"}
{"nick":"tjfontaine","message":"then you just have to rinse/repeat these steps, and you will hopefully see which function is holding onto it","date":"2013-10-04T23:41:27.806Z","type":"message"}
{"nick":"tjfontaine","message":"wolfeidau: it would be interesting to see what 3b66cfcd23a9::findjsobjects -r","date":"2013-10-04T23:48:12.182Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: running now","date":"2013-10-04T23:49:08.143Z","type":"message"}
{"nick":"tjfontaine","message":"k","date":"2013-10-04T23:49:11.687Z","type":"message"}
{"nick":"wolfeidau","message":"3b66cfcd23a9 is not referred to by a known object.","date":"2013-10-04T23:49:43.979Z","type":"message"}
{"nick":"tjfontaine","message":"k","date":"2013-10-04T23:49:48.127Z","type":"message"}
{"nick":"tjfontaine","message":"this is going to end up being a closure :/","date":"2013-10-04T23:49:58.675Z","type":"message"}
{"nick":"othiym23","message":"trevnorris: https://gist.github.com/othiym23/6834701","date":"2013-10-04T23:51:07.898Z","type":"message"}
{"nick":"othiym23","message":"I'll make a debug build and see if that gives more useful backtraces","date":"2013-10-04T23:51:20.308Z","type":"message"}
{"nick":"wolfeidau","message":"tjfontaine: Just looked at the library i use, pretty much takes a callback which it passes through to request. This operation is just a POST so the callback just reads the status code in the result ","date":"2013-10-04T23:54:16.285Z","type":"message"}
{"nick":"wolfeidau","message":"I am now completely emptying that callback to ensure it does NOTHING ","date":"2013-10-04T23:54:50.922Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 240 seconds","date":"2013-10-04T23:55:02.144Z","type":"quit"}
{"nick":"wolfeidau","message":"It is just a write method to an upstream api ","date":"2013-10-04T23:55:05.696Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #209 \u00034FAILURE\u000f windows-x64 (4/195) windows-ia32 (4/195) http://jenkins.nodejs.org/job/libuv-master-gyp/209/","date":"2013-10-04T23:59:06.920Z","type":"message"}
