{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-05-26T00:00:00.480Z","type":"quit"}
{"nick":"ircretary","date":"2013-05-26T00:00:07.634Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 240 seconds","date":"2013-05-26T00:01:10.865Z","type":"quit"}
{"nick":"st_luke_","reason":"Remote host closed the connection","date":"2013-05-26T00:07:26.947Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-05-26T00:29:49.570Z","type":"nick"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-05-26T00:37:39.878Z","type":"quit"}
{"nick":"st_luke","date":"2013-05-26T00:40:04.200Z","type":"join"}
{"nick":"txdv","message":"bnoordhuis: use a thread, open up sockets, give the socket fds to the libuv loops?","date":"2013-05-26T00:45:12.795Z","type":"message"}
{"nick":"txdv","message":"why shouldn't it be fast","date":"2013-05-26T00:45:25.890Z","type":"message"}
{"nick":"kazupon","date":"2013-05-26T00:57:24.975Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 256 seconds","date":"2013-05-26T01:02:22.255Z","type":"quit"}
{"nick":"bnoordhuis","message":"txdv: uv_accept() gives you a stream handle. you then have to send that handle over a pipe to the other thread","date":"2013-05-26T01:02:45.212Z","type":"message"}
{"nick":"bnoordhuis","message":"at least, that's how it currently works and it's not really efficient","date":"2013-05-26T01:03:01.818Z","type":"message"}
{"nick":"txdv","message":"just use the native accept","date":"2013-05-26T01:03:14.670Z","type":"message"}
{"nick":"txdv","message":"man accept","date":"2013-05-26T01:03:24.334Z","type":"message"}
{"nick":"bnoordhuis","message":":-/","date":"2013-05-26T01:03:36.686Z","type":"message"}
{"nick":"txdv","message":"or make it possible to get the fd from a stream handle ","date":"2013-05-26T01:04:02.167Z","type":"message"}
{"nick":"bnoordhuis","message":"there's a reason it works like that","date":"2013-05-26T01:05:50.660Z","type":"message"}
{"nick":"bnoordhuis","message":"and it's because things are complicated on windows","date":"2013-05-26T01:06:04.826Z","type":"message"}
{"nick":"bnoordhuis","message":"apropos nothing:","date":"2013-05-26T01:06:15.511Z","type":"message"}
{"nick":"bnoordhuis","message":"static inline int mutex_lock(pthread_mutex_t *mutex)","date":"2013-05-26T01:06:17.112Z","type":"message"}
{"nick":"bnoordhuis","message":"{ while (pthread_mutex_trylock(mutex)); return 0;","date":"2013-05-26T01:06:17.251Z","type":"message"}
{"nick":"bnoordhuis","message":"}","date":"2013-05-26T01:06:18.124Z","type":"message"}
{"nick":"bnoordhuis","message":"from memcached.h. that's one way of implementing spinlocks, i guess :-/","date":"2013-05-26T01:06:38.841Z","type":"message"}
{"nick":"mordy_","message":"hrm, is alloc_cb invoked multiple times before the read callback?","date":"2013-05-26T01:28:32.545Z","type":"message"}
{"nick":"mordy_","message":"basically i have this chunk of code, i'm assuming that a read callback is invoked after each alloc callback","date":"2013-05-26T01:29:41.039Z","type":"message"}
{"nick":"mordy_","message":"http://paste.scsys.co.uk/250641","date":"2013-05-26T01:29:44.038Z","type":"message"}
{"nick":"mordy_","message":"what *seems* to be happening is that alloc_cb isn't called again if the returned buffer is greater than 'suggested_size'","date":"2013-05-26T01:31:41.869Z","type":"message"}
{"nick":"mordy_","message":"and while this seems to make sense, i don't find it documented anywhere","date":"2013-05-26T01:32:21.706Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-05-26T01:33:09.343Z","type":"quit"}
{"nick":"bnoordhuis","message":"mordy_: the buffer your alloc_cb returns is used only once by libuv and it's handed off to your read_cb when done","date":"2013-05-26T01:38:35.896Z","type":"message"}
{"nick":"bnoordhuis","message":"there may be a time gap between the calls to alloc_cb and read_cb","date":"2013-05-26T01:39:05.826Z","type":"message"}
{"nick":"mordy_","message":"hrm, i figured out what i was doing wrong, i think","date":"2013-05-26T01:39:46.987Z","type":"message"}
{"nick":"mordy_","message":"nread==0 is an indicator the read is done; so i can hinge on that as well","date":"2013-05-26T01:40:22.618Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-05-26T01:41:32.687Z","type":"nick"}
{"nick":"bnoordhuis","message":"mordy_: is that on windows? i don't think uv-unix ever does that","date":"2013-05-26T01:42:59.674Z","type":"message"}
{"nick":"bnoordhuis","message":"and windows shouldn't either, i think - it's supposed to set nread=-1 and err.code=UV_EOF","date":"2013-05-26T01:43:38.709Z","type":"message"}
{"nick":"mordy_","message":"bnoordhuis: hrm, the docs say \" * `nread` is > 0 if there is data available, 0 if libuv is done reading for now * or -1 on error.","date":"2013-05-26T01:44:03.486Z","type":"message"}
{"nick":"mordy_","message":"let me add a printf there","date":"2013-05-26T01:44:16.236Z","type":"message"}
{"nick":"mordy_","message":"nah, scratch that","date":"2013-05-26T01:44:36.117Z","type":"message"}
{"nick":"mordy_","message":"i'm retarded","date":"2013-05-26T01:44:38.179Z","type":"message"}
{"nick":"mordy_","message":"i had: if (nread > 0 && sock->read_done == 0 && nread == 0) { return; }","date":"2013-05-26T01:45:43.962Z","type":"message"}
{"nick":"mordy_","message":"what a load of brilliance right there","date":"2013-05-26T01:45:53.811Z","type":"message"}
{"nick":"bnoordhuis","message":"ah :)","date":"2013-05-26T01:46:11.857Z","type":"message"}
{"nick":"bnoordhuis","message":"you're right about the nread==0 thing btw, i guess uv-unix should do that too","date":"2013-05-26T01:46:40.045Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, it does... okay, never mind","date":"2013-05-26T01:47:40.441Z","type":"message"}
{"nick":"bnoordhuis","message":"i remembered it set UV_EAGAIN - which it does - but it passes nread=0 to the read cb","date":"2013-05-26T01:48:24.495Z","type":"message"}
{"nick":"mordy_","message":"ahh that makes sense","date":"2013-05-26T01:50:29.835Z","type":"message"}
{"nick":"txdv","message":"nread = 0 means the socket is finished","date":"2013-05-26T01:54:46.787Z","type":"message"}
{"nick":"inolen","reason":"Read error: Connection reset by peer","date":"2013-05-26T01:54:54.728Z","type":"quit"}
{"nick":"inolen","date":"2013-05-26T01:55:29.102Z","type":"join"}
{"nick":"mordy_","message":"ok, gotta run","date":"2013-05-26T01:57:39.092Z","type":"message"}
{"nick":"kazupon","date":"2013-05-26T01:58:09.773Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 240 seconds","date":"2013-05-26T02:02:34.511Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-05-26T02:13:15.707Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 252 seconds","date":"2013-05-26T02:14:31.577Z","type":"quit"}
{"nick":"brson","date":"2013-05-26T02:26:50.041Z","type":"join"}
{"nick":"timoxley","date":"2013-05-26T02:36:25.746Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-05-26T02:43:33.447Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-26T02:45:49.906Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 252 seconds","date":"2013-05-26T03:00:10.561Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-05-26T03:20:57.799Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2013-05-26T03:25:16.996Z","type":"quit"}
{"nick":"syskk","date":"2013-05-26T03:35:26.272Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-05-26T03:41:08.333Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-05-26T03:45:47.994Z","type":"quit"}
{"nick":"benoitc","date":"2013-05-26T03:45:58.953Z","type":"join"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-05-26T04:22:43.700Z","type":"quit"}
{"nick":"brson","date":"2013-05-26T04:24:53.044Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-05-26T04:36:17.260Z","type":"quit"}
{"nick":"timoxley","date":"2013-05-26T04:45:11.582Z","type":"join"}
{"nick":"timoxley","reason":"Client Quit","date":"2013-05-26T04:45:53.872Z","type":"quit"}
{"nick":"mordy_","message":"hrm","date":"2013-05-26T05:04:45.773Z","type":"message"}
{"nick":"mordy_","message":"still can't seem to correlate when and how the alloc cb is called in respect to the read cb","date":"2013-05-26T05:05:00.827Z","type":"message"}
{"nick":"mordy_","message":"meh, i'll work on this tomorrow","date":"2013-05-26T05:06:08.471Z","type":"message"}
{"nick":"timoxley","date":"2013-05-26T05:06:34.003Z","type":"join"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-05-26T05:11:49.800Z","type":"quit"}
{"nick":"timoxley","date":"2013-05-26T05:21:54.330Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-05-26T05:39:06.879Z","type":"quit"}
{"nick":"niska","reason":"Ping timeout: 246 seconds","date":"2013-05-26T05:46:34.764Z","type":"quit"}
{"nick":"niska","date":"2013-05-26T05:49:56.465Z","type":"join"}
{"nick":"tjfontai1e","date":"2013-05-26T05:53:43.518Z","type":"join"}
{"nick":"chrisdickinson","reason":"Ping timeout: 361 seconds","date":"2013-05-26T05:54:57.209Z","type":"quit"}
{"nick":"tjfontaine","reason":"Remote host closed the connection","date":"2013-05-26T05:54:57.349Z","type":"quit"}
{"nick":"chrisdico","date":"2013-05-26T05:55:37.892Z","type":"join"}
{"nick":"amartens","date":"2013-05-26T06:01:53.136Z","type":"join"}
{"nick":"kazupon","date":"2013-05-26T06:09:29.063Z","type":"join"}
{"nick":"groundwater","date":"2013-05-26T06:10:28.743Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 240 seconds","date":"2013-05-26T06:18:42.200Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-26T06:32:00.905Z","type":"join"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-05-26T06:34:23.473Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-05-26T06:50:51.659Z","type":"join"}
{"nick":"mikeal","reason":"Read error: Connection reset by peer","date":"2013-05-26T06:53:14.254Z","type":"quit"}
{"nick":"mikeal","date":"2013-05-26T06:58:36.016Z","type":"join"}
{"nick":"stagas","date":"2013-05-26T07:08:06.892Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 245 seconds","date":"2013-05-26T07:14:39.062Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-05-26T07:23:02.781Z","type":"quit"}
{"nick":"rendar","date":"2013-05-26T07:27:53.595Z","type":"join"}
{"nick":"rphillips","reason":"Quit: ZNC - http://znc.in","date":"2013-05-26T07:33:02.152Z","type":"quit"}
{"nick":"rphillips","date":"2013-05-26T07:34:04.476Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 240 seconds","date":"2013-05-26T07:48:44.904Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-26T08:23:24.896Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-05-26T08:27:16.849Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 246 seconds","date":"2013-05-26T08:27:55.755Z","type":"quit"}
{"nick":"groundwater","reason":"Quit: groundwater","date":"2013-05-26T08:32:54.267Z","type":"quit"}
{"nick":"paddybyers","date":"2013-05-26T08:36:43.853Z","type":"join"}
{"nick":"benoitc","date":"2013-05-26T08:38:33.299Z","type":"join"}
{"nick":"amartens","date":"2013-05-26T08:49:08.456Z","type":"join"}
{"nick":"amartens","reason":"Client Quit","date":"2013-05-26T08:49:16.718Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 252 seconds","date":"2013-05-26T08:53:15.899Z","type":"quit"}
{"nick":"inolen1","date":"2013-05-26T08:55:10.302Z","type":"join"}
{"nick":"inolen","reason":"Ping timeout: 245 seconds","date":"2013-05-26T08:56:44.057Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-26T09:24:13.624Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-05-26T09:29:01.400Z","type":"quit"}
{"nick":"juliangruber_","date":"2013-05-26T09:33:54.130Z","type":"join"}
{"nick":"normanm","date":"2013-05-26T09:46:20.490Z","type":"join"}
{"nick":"juliangruber","reason":"Remote host closed the connection","date":"2013-05-26T10:00:58.801Z","type":"quit"}
{"nick":"juliangruber_","new_nick":"juliangruber","date":"2013-05-26T10:00:58.941Z","type":"nick"}
{"nick":"travis-ci","date":"2013-05-26T10:13:25.757Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] wwwouter/node#7 (master - 6207207 : wwwouter): The build is still failing.","date":"2013-05-26T10:13:25.897Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/wwwouter/node/compare/b09fccc0cdef...620720701ae0","date":"2013-05-26T10:13:25.898Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/wwwouter/node/builds/7506786","date":"2013-05-26T10:13:25.898Z","type":"message"}
{"nick":"travis-ci","date":"2013-05-26T10:13:25.898Z","type":"part"}
{"nick":"kazupon","date":"2013-05-26T10:24:59.033Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-05-26T10:29:41.294Z","type":"quit"}
{"nick":"stagas","reason":"Read error: Connection reset by peer","date":"2013-05-26T10:30:21.709Z","type":"quit"}
{"nick":"`3rdEden","date":"2013-05-26T11:17:15.340Z","type":"join"}
{"nick":"kazupon","date":"2013-05-26T11:25:45.902Z","type":"join"}
{"nick":"paddybyers","date":"2013-05-26T11:28:11.055Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 246 seconds","date":"2013-05-26T11:30:16.762Z","type":"quit"}
{"nick":"normanm","reason":"Quit: Computer has gone to sleep.","date":"2013-05-26T11:30:25.587Z","type":"quit"}
{"nick":"`3rdEden","reason":"Ping timeout: 264 seconds","date":"2013-05-26T11:31:43.369Z","type":"quit"}
{"nick":"V1","date":"2013-05-26T11:31:45.763Z","type":"join"}
{"nick":"normanm","date":"2013-05-26T11:32:00.609Z","type":"join"}
{"nick":"V1","new_nick":"`3E","date":"2013-05-26T11:33:25.983Z","type":"nick"}
{"nick":"paddybyers","reason":"Ping timeout: 245 seconds","date":"2013-05-26T11:34:39.046Z","type":"quit"}
{"nick":"paddybyers","date":"2013-05-26T11:46:05.386Z","type":"join"}
{"nick":"chrisdico","reason":"Ping timeout: 246 seconds","date":"2013-05-26T12:02:28.763Z","type":"quit"}
{"nick":"chrisdickinson","date":"2013-05-26T12:03:32.705Z","type":"join"}
{"nick":"st_luke","date":"2013-05-26T12:10:23.456Z","type":"join"}
{"nick":"luigy","reason":"Ping timeout: 256 seconds","date":"2013-05-26T12:11:07.926Z","type":"quit"}
{"nick":"luigy","date":"2013-05-26T12:12:16.325Z","type":"join"}
{"nick":"kazupon","date":"2013-05-26T12:26:22.435Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 264 seconds","date":"2013-05-26T12:31:07.286Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-05-26T12:35:16.764Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 246 seconds","date":"2013-05-26T12:46:34.764Z","type":"quit"}
{"nick":"st_luke","reason":"Read error: Connection reset by peer","date":"2013-05-26T13:05:05.561Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-05-26T13:22:48.262Z","type":"join"}
{"nick":"kazupon","date":"2013-05-26T13:27:08.489Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-05-26T13:31:33.045Z","type":"join"}
{"nick":"kazupon","reason":"Read error: Operation timed out","date":"2013-05-26T13:31:50.494Z","type":"quit"}
{"nick":"hz","reason":"Ping timeout: 245 seconds","date":"2013-05-26T13:35:54.056Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 245 seconds","date":"2013-05-26T13:50:54.074Z","type":"quit"}
{"nick":"normanm","reason":"Quit: Computer has gone to sleep.","date":"2013-05-26T14:06:25.594Z","type":"quit"}
{"nick":"st_luke","date":"2013-05-26T14:14:50.302Z","type":"join"}
{"nick":"kevinswiber","date":"2013-05-26T14:26:03.580Z","type":"join"}
{"nick":"kazupon","date":"2013-05-26T14:27:53.194Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 245 seconds","date":"2013-05-26T14:32:34.096Z","type":"quit"}
{"nick":"kevinswiber","reason":"Remote host closed the connection","date":"2013-05-26T14:32:34.610Z","type":"quit"}
{"nick":"kevinswiber","date":"2013-05-26T14:33:08.623Z","type":"join"}
{"nick":"kevinswiber","reason":"Ping timeout: 252 seconds","date":"2013-05-26T14:37:34.505Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-26T14:46:51.307Z","type":"join"}
{"nick":"AvianFlu","date":"2013-05-26T14:48:26.666Z","type":"join"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-05-26T14:48:27.778Z","type":"quit"}
{"nick":"AvianFlu","reason":"Client Quit","date":"2013-05-26T14:48:41.121Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-05-26T14:58:25.374Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 252 seconds","date":"2013-05-26T15:26:39.300Z","type":"quit"}
{"nick":"Raynos","reason":"Ping timeout: 246 seconds","date":"2013-05-26T15:39:49.772Z","type":"quit"}
{"nick":"syskk","reason":"Ping timeout: 252 seconds","date":"2013-05-26T15:47:55.277Z","type":"quit"}
{"nick":"syskk","date":"2013-05-26T15:56:04.744Z","type":"join"}
{"nick":"piscisaureus_","message":"I didn't know that js string indices were immutable","date":"2013-05-26T15:58:28.096Z","type":"message"}
{"nick":"piscisaureus_","message":"(even if boxed)","date":"2013-05-26T15:58:34.586Z","type":"message"}
