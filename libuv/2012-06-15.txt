{"nick":"piscisaureus_","message":"isaacs: yessir","date":"2012-06-15T00:00:00.740Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: because... people can quite easily do ee.listeners('foo').slice(0)","date":"2012-06-15T00:00:25.893Z","type":"message"}
{"nick":"isaacs","message":"ee = new EventEmitter; ee.on('ev', fucntion(){}); x = ee.listeners('ev');  ee.removeAllListeners('ev');  x.length","date":"2012-06-15T00:00:34.370Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but they aren't already doing that.","date":"2012-06-15T00:00:40.113Z","type":"message"}
{"nick":"isaacs","message":"it's a change.","date":"2012-06-15T00:00:43.139Z","type":"message"}
{"nick":"isaacs","message":"x.length should return 1 in that example.","date":"2012-06-15T00:00:50.362Z","type":"message"}
{"nick":"isaacs","message":"that's how it was on 0.4 and0.6","date":"2012-06-15T00:00:56.512Z","type":"message"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2012-06-15T00:01:01.322Z","type":"quit"}
{"nick":"isaacs","message":"and we've put in the docs that events.js is frozen","date":"2012-06-15T00:01:02.193Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: was it really in 0.4?","date":"2012-06-15T00:01:02.686Z","type":"message"}
{"nick":"isaacs","message":"i believe so.","date":"2012-06-15T00:01:10.200Z","type":"message"}
{"nick":"piscisaureus_","message":"I have a big tolerance for how stuff was in 0.4","date":"2012-06-15T00:01:12.851Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: however, we sort of guarantee that that listeners() remains consistent","date":"2012-06-15T00:01:28.111Z","type":"message"}
{"nick":"isaacs","message":"yep","date":"2012-06-15T00:01:59.361Z","type":"message"}
{"nick":"isaacs","message":"$ node","date":"2012-06-15T00:02:02.969Z","type":"message"}
{"nick":"isaacs","message":"> var EE = require('events').EventEmitter","date":"2012-06-15T00:02:03.294Z","type":"message"}
{"nick":"isaacs","message":"> var e = new EE()","date":"2012-06-15T00:02:03.494Z","type":"message"}
{"nick":"isaacs","message":"> e.on('ev', function () {})","date":"2012-06-15T00:02:04.042Z","type":"message"}
{"nick":"isaacs","message":"{ _events: { ev: [Function] } }","date":"2012-06-15T00:02:06.038Z","type":"message"}
{"nick":"isaacs","message":"> x = e.listeners('ev')","date":"2012-06-15T00:02:08.041Z","type":"message"}
{"nick":"isaacs","message":"[ [Function] ]","date":"2012-06-15T00:02:10.039Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: ee = new EventEmitter(); listeners = ee.listeners('ev'); ee.on('ev', ..); ee.length; //1","date":"2012-06-15T00:02:10.440Z","type":"message"}
{"nick":"isaacs","message":"> e.removeAllListeners('ev')","date":"2012-06-15T00:02:12.039Z","type":"message"}
{"nick":"isaacs","message":"{ _events: { ev: null } }","date":"2012-06-15T00:02:14.039Z","type":"message"}
{"nick":"isaacs","message":"> x.length","date":"2012-06-15T00:02:16.033Z","type":"message"}
{"nick":"isaacs","message":"1","date":"2012-06-15T00:02:18.034Z","type":"message"}
{"nick":"isaacs","message":"> process.version","date":"2012-06-15T00:02:20.049Z","type":"message"}
{"nick":"isaacs","message":"'v0.4.12'","date":"2012-06-15T00:02:22.066Z","type":"message"}
{"nick":"piscisaureus_","message":"meh","date":"2012-06-15T00:02:30.805Z","type":"message"}
{"nick":"piscisaureus_","message":"maybe we should just drop this consistency thing altogether","date":"2012-06-15T00:02:44.434Z","type":"message"}
{"nick":"piscisaureus_","message":"PHP problems this","date":"2012-06-15T00:03:02.656Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: if we are going to revert the removeAllListeners() behavior, then we at least should apply  https://github.com/TooTallNate/node/compare/emitKeypressEvents-dont-cache-the-keypress-listeners","date":"2012-06-15T00:03:06.430Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: absent some very very compelling reason why this is actually a bug, removeAllListeners needs to maintain the same behavior.","date":"2012-06-15T00:03:07.318Z","type":"message"}
{"nick":"piscisaureus_","message":"api fuckup, stick to it forever :-(","date":"2012-06-15T00:03:19.562Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: i'm not convinced this is a fuckup","date":"2012-06-15T00:03:37.095Z","type":"message"}
{"nick":"isaacs","message":"or actually, to the extent that it is, the fuckup is exposing that array in the first place.","date":"2012-06-15T00:03:56.150Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: when was our parking lot appointment again?","date":"2012-06-15T00:03:56.828Z","type":"message"}
{"nick":"isaacs","message":"hahah","date":"2012-06-15T00:03:59.926Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I agree","date":"2012-06-15T00:04:02.353Z","type":"message"}
{"nick":"isaacs","message":"i thought it was pistols at dawn","date":"2012-06-15T00:04:05.062Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: listeners() should just return a copy","date":"2012-06-15T00:04:13.898Z","type":"message"}
{"nick":"piscisaureus_","message":"that would be +2 from me","date":"2012-06-15T00:04:20.873Z","type":"message"}
{"nick":"isaacs","message":"the point isn't that we should maintain consistency forever regardless, the point is that api chagnes to events.js are stupidly expensive for us and our users.","date":"2012-06-15T00:04:35.485Z","type":"message"}
{"nick":"piscisaureus_","message":"as opposed to change that will now be reverted - that is +.5","date":"2012-06-15T00:04:43.809Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: yes, that patch is very much the common pattern for checking if there are listeners or not","date":"2012-06-15T00:05:19.453Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: let's investigate making listeners() return a copy for v0.9","date":"2012-06-15T00:05:39.606Z","type":"message"}
{"nick":"isaacs","action":"off to log it","date":"2012-06-15T00:05:42.112Z","type":"action"}
{"nick":"piscisaureus_","message":"isaacs; ok","date":"2012-06-15T00:05:49.157Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I am also off","date":"2012-06-15T00:05:52.304Z","type":"message"}
{"nick":"piscisaureus_","message":"moar tomorrow","date":"2012-06-15T00:06:00.101Z","type":"message"}
{"nick":"piscisaureus_","message":"Goodbye all","date":"2012-06-15T00:06:14.739Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: later","date":"2012-06-15T00:06:51.871Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: go +1 this, then :) https://github.com/joyent/node/issues/3442","date":"2012-06-15T00:07:21.113Z","type":"message"}
{"nick":"isaacs","message":"or +2 it, i guess :)","date":"2012-06-15T00:07:46.656Z","type":"message"}
{"nick":"xaq","reason":"Remote host closed the connection","date":"2012-06-15T00:07:48.072Z","type":"quit"}
{"nick":"piscisaureus_","message":"done","date":"2012-06-15T00:07:57.657Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: so, the reason for this change, then, is that you get to not call listeners() repeatedly?","date":"2012-06-15T00:08:27.562Z","type":"message"}
{"nick":"piscisaureus_","message":"ok","date":"2012-06-15T00:08:27.762Z","type":"message"}
{"nick":"piscisaureus_","message":"ttyl","date":"2012-06-15T00:08:29.394Z","type":"message"}
{"nick":"isaacs","message":"g'nite :)","date":"2012-06-15T00:08:33.356Z","type":"message"}
{"nick":"isaacs","message":"thanks","date":"2012-06-15T00:08:34.036Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-06-15T00:08:50.775Z","type":"quit"}
{"nick":"mjr_","date":"2012-06-15T00:09:05.666Z","type":"join"}
{"nick":"TooTallNate","message":"isaacs: you just can't rely on caching the array returned from listeners; if it's volatile you need to use it immediately","date":"2012-06-15T00:09:40.712Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: the problem is that a = ee.listeners('ev'); ee.removeAllListeners('ev') <-- empties a as well","date":"2012-06-15T00:10:20.124Z","type":"message"}
{"nick":"isaacs","message":"whereas before it didn't.","date":"2012-06-15T00:10:27.611Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: the new behavior allowed you to be sure that calling .listeners('') would be the same array 100% of the time, so you could cache it","date":"2012-06-15T00:11:36.418Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-06-15T00:11:44.182Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: but if we're gonna refer this new stuff, then we have to be sure we're not relying on that behavior","date":"2012-06-15T00:11:55.926Z","type":"message"}
{"nick":"mjr_","reason":"Client Quit","date":"2012-06-15T00:12:03.903Z","type":"quit"}
{"nick":"TooTallNate","message":"this emitKeypressEvents has been like that for ages, so that's part of why we changed it","date":"2012-06-15T00:12:18.205Z","type":"message"}
{"nick":"TooTallNate","message":"so i say revert it, and apply this readline patch","date":"2012-06-15T00:12:51.400Z","type":"message"}
{"nick":"isaacs","message":"it looks like readline is the only place we cache it anyway","date":"2012-06-15T00:13:16.617Z","type":"message"}
{"nick":"isaacs","message":"including many hot paths, where we do stuff like req.listeners(eventType).length repeatedly","date":"2012-06-15T00:13:28.545Z","type":"message"}
{"nick":"hz","date":"2012-06-15T00:13:58.588Z","type":"join"}
{"nick":"hz","message":"hello","date":"2012-06-15T00:14:01.946Z","type":"message"}
{"nick":"hz","message":"im a msvc user.. stdint.h is missing","date":"2012-06-15T00:14:58.116Z","type":"message"}
{"nick":"TooTallNate","message":"hz: are you using msvc 2010?","date":"2012-06-15T00:15:11.575Z","type":"message"}
{"nick":"hz","message":"2008","date":"2012-06-15T00:15:16.271Z","type":"message"}
{"nick":"TooTallNate","message":"ya… you need 2010… that or get that msstdint.h file from the internet","date":"2012-06-15T00:15:39.921Z","type":"message"}
{"nick":"hz","message":"why authors can include msstdint.h into their repo?","date":"2012-06-15T00:16:20.197Z","type":"message"}
{"nick":"hz","message":"cant","date":"2012-06-15T00:16:23.205Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: ya the caching isn't necessary for performance or anything, plus it's just \"keypress\" anyways","date":"2012-06-15T00:16:52.393Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-06-15T00:17:12.908Z","type":"message"}
{"nick":"isaacs","message":"not a hot path","date":"2012-06-15T00:17:15.398Z","type":"message"}
{"nick":"isaacs","message":"if we're not caching in http, clearly this is premature optimization","date":"2012-06-15T00:17:22.902Z","type":"message"}
{"nick":"hz","message":"i would like to make a c++ port of libuv","date":"2012-06-15T00:17:23.105Z","type":"message"}
{"nick":"erickt","reason":"Ping timeout: 244 seconds","date":"2012-06-15T00:21:17.688Z","type":"quit"}
{"nick":"isaacs","message":"TooTallNate: writing the doc now, i'll have a review request in a sec","date":"2012-06-15T00:22:42.669Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: also, it'd be nice to have something like emitter.has('ev') that would return true or false","date":"2012-06-15T00:24:48.819Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: in core, we almost always use listeners() to do if (emitter.listeners(event).length) { ... }","date":"2012-06-15T00:25:06.403Z","type":"message"}
{"nick":"TooTallNate","message":"indeed","date":"2012-06-15T00:25:19.471Z","type":"message"}
{"nick":"TooTallNate","message":"+1","date":"2012-06-15T00:25:21.186Z","type":"message"}
{"nick":"TooTallNate","message":"i was gonna mention .count() or something, but .has() is probably a better use case","date":"2012-06-15T00:25:39.371Z","type":"message"}
{"nick":"TooTallNate","message":"rather… the only use case :D","date":"2012-06-15T00:25:51.477Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: https://github.com/isaacs/node/compare/GH-3431","date":"2012-06-15T00:26:13.933Z","type":"message"}
{"nick":"isaacs","message":"tests pass","date":"2012-06-15T00:27:08.339Z","type":"message"}
{"nick":"isaacs","message":"just looking for a +1 on the docs, i guess ;)","date":"2012-06-15T00:27:22.275Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: ya, LGTM :)","date":"2012-06-15T00:27:53.065Z","type":"message"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303Reid Burke\u000f \u000307master\u000f * r\u0002c9a1b5d\u000f \u000310\u000f/ (2 files in 2 dirs)\u0002:\u000f Fix #3425: removeAllListeners should delete array - http://git.io/hQMzFQ","date":"2012-06-15T00:28:05.267Z","type":"message"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303Nathan Rajlich\u000f \u000307master\u000f * r\u0002032fc42\u000f \u000310\u000f/ lib/readline.js \u0002:\u000f readline: don't cache the \"keypress\" listeners - http://git.io/MHTyjA","date":"2012-06-15T00:28:05.681Z","type":"message"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u0002e72addc\u000f \u000310\u000f/ doc/api/events.markdown \u0002:\u000f event: Document the mutability of listeners() - http://git.io/NAgqJQ","date":"2012-06-15T00:28:06.079Z","type":"message"}
{"nick":"toothr","reason":"Ping timeout: 240 seconds","date":"2012-06-15T00:29:25.068Z","type":"quit"}
{"nick":"toothr","date":"2012-06-15T00:33:01.519Z","type":"join"}
{"nick":"hz","date":"2012-06-15T00:35:08.940Z","type":"quit"}
{"nick":"pietern","date":"2012-06-15T00:40:17.538Z","type":"join"}
{"nick":"pietern","reason":"Remote host closed the connection","date":"2012-06-15T00:40:44.301Z","type":"quit"}
{"nick":"pietern","date":"2012-06-15T00:41:24.547Z","type":"join"}
{"nick":"hz","date":"2012-06-15T00:51:49.545Z","type":"join"}
{"nick":"hz","reason":"Client Quit","date":"2012-06-15T00:54:49.915Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-06-15T01:10:37.002Z","type":"quit"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-06-15T01:21:26.306Z","type":"quit"}
{"nick":"toothr","reason":"Read error: Connection reset by peer","date":"2012-06-15T01:27:53.378Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 244 seconds","date":"2012-06-15T01:37:14.543Z","type":"quit"}
{"nick":"toothr","date":"2012-06-15T01:38:35.712Z","type":"join"}
{"nick":"brson","date":"2012-06-15T01:49:11.218Z","type":"join"}
{"nick":"erickt","date":"2012-06-15T02:02:19.738Z","type":"join"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-15T02:12:23.629Z","type":"quit"}
{"nick":"avalanche123","reason":"Ping timeout: 246 seconds","date":"2012-06-15T02:16:02.639Z","type":"quit"}
{"nick":"avalanch_","new_nick":"avalanche123","date":"2012-06-15T02:16:06.811Z","type":"nick"}
{"nick":"bulatshakirzyano","date":"2012-06-15T02:20:12.876Z","type":"join"}
{"nick":"avalanche123","reason":"Quit: Computer has gone to sleep.","date":"2012-06-15T02:20:38.916Z","type":"quit"}
{"nick":"bulatshakirzyano","new_nick":"avalanche123","date":"2012-06-15T02:20:40.357Z","type":"nick"}
{"nick":"ira","date":"2012-06-15T02:25:10.404Z","type":"join"}
{"nick":"avalanche123","reason":"Ping timeout: 244 seconds","date":"2012-06-15T02:27:21.586Z","type":"quit"}
{"nick":"avalanche123","date":"2012-06-15T02:30:45.697Z","type":"join"}
{"nick":"c4milo","date":"2012-06-15T02:36:32.883Z","type":"join"}
{"nick":"AvianFlu","reason":"Quit: This computer has gone to sleep","date":"2012-06-15T02:48:30.832Z","type":"quit"}
{"nick":"avalanche123","reason":"Ping timeout: 244 seconds","date":"2012-06-15T02:49:34.742Z","type":"quit"}
{"nick":"pietern","reason":"Ping timeout: 244 seconds","date":"2012-06-15T02:51:07.660Z","type":"quit"}
{"nick":"avalanche123","date":"2012-06-15T02:55:06.059Z","type":"join"}
{"nick":"avalanche123","reason":"Quit: Leaving...","date":"2012-06-15T03:07:13.938Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 248 seconds","date":"2012-06-15T03:23:16.260Z","type":"quit"}
{"nick":"AvianFlu","date":"2012-06-15T03:34:35.012Z","type":"join"}
{"nick":"isaacs_","date":"2012-06-15T03:36:37.785Z","type":"join"}
{"nick":"isaacs_","new_nick":"isaacs","date":"2012-06-15T03:37:22.580Z","type":"nick"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-06-15T03:46:31.954Z","type":"quit"}
{"nick":"brson","date":"2012-06-15T03:54:20.821Z","type":"join"}
{"nick":"isaacs","reason":"Disconnected by services","date":"2012-06-15T03:59:37.012Z","type":"quit"}
{"nick":"isaacs_","date":"2012-06-15T04:00:19.196Z","type":"join"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-06-15T04:01:00.568Z","type":"quit"}
{"nick":"ira","reason":"Quit: Leaving...","date":"2012-06-15T04:05:05.647Z","type":"quit"}
{"nick":"isaacs","date":"2012-06-15T04:07:45.172Z","type":"join"}
{"nick":"xaq","date":"2012-06-15T04:22:17.796Z","type":"join"}
{"nick":"isaacs_","reason":"Quit: dies","date":"2012-06-15T04:31:54.414Z","type":"quit"}
{"nick":"benvie","date":"2012-06-15T04:54:12.399Z","type":"join"}
{"nick":"xaq","reason":"Remote host closed the connection","date":"2012-06-15T04:57:40.518Z","type":"quit"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u0002283d735\u000f \u000310\u000f/ doc/api/zlib.markdown \u0002:\u000f doc: Include zlib constants - http://git.io/6o83Fw","date":"2012-06-15T05:18:48.960Z","type":"message"}
{"nick":"paddybyers","date":"2012-06-15T05:31:03.699Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2012-06-15T05:45:09.902Z","type":"quit"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-06-15T06:03:28.704Z","type":"quit"}
{"nick":"stephank","reason":"Quit: *Poof!*","date":"2012-06-15T06:57:28.630Z","type":"quit"}
{"nick":"rendar","date":"2012-06-15T06:59:51.200Z","type":"join"}
{"nick":"indutny","message":"tls performance make kittens cry","date":"2012-06-15T07:06:53.417Z","type":"message"}
{"nick":"paddybyers","date":"2012-06-15T07:33:10.510Z","type":"join"}
{"nick":"AvianFlu","reason":"\"Leaving\"","date":"2012-06-15T07:37:08.554Z","type":"part"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-06-15T07:40:09.780Z","type":"quit"}
{"nick":"paddybyers","date":"2012-06-15T07:45:36.640Z","type":"join"}
{"nick":"paddybyers_","date":"2012-06-15T07:46:17.507Z","type":"join"}
{"nick":"loladiro","date":"2012-06-15T07:47:06.382Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2012-06-15T07:47:56.464Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 244 seconds","date":"2012-06-15T07:49:45.497Z","type":"quit"}
{"nick":"paddybyers_","new_nick":"paddybyers","date":"2012-06-15T07:49:45.854Z","type":"nick"}
{"nick":"rendar","date":"2012-06-15T07:59:08.402Z","type":"quit"}
