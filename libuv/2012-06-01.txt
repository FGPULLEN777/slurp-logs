{"nick":"travis-ci","date":"2012-06-01T00:01:25.057Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#350 (reviewme - 8a42c43 : Bert Belder): The build is still failing.","date":"2012-06-01T00:01:25.284Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/b48ce33...8a42c43","date":"2012-06-01T00:01:25.284Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1493300","date":"2012-06-01T00:01:25.284Z","type":"message"}
{"nick":"travis-ci","date":"2012-06-01T00:01:25.284Z","type":"part"}
{"nick":"piscisaureus_","message":"^-- finally. Still 3 failures but atleast it compiles","date":"2012-06-01T00:02:04.415Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- bnoordhuis btw, these failures look like regressions to me","date":"2012-06-01T00:02:36.925Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_, bnoordhuis: https://github.com/joyent/node/issues/3355","date":"2012-06-01T00:06:58.096Z","type":"message"}
{"nick":"isaacs","message":"looks like something isn't getting ref()'ed that should be","date":"2012-06-01T00:07:03.869Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: looks like it uses ev_io and node-zookeeper should move to uv_poll","date":"2012-06-01T00:08:20.442Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: we should probably get uv_signal and uv_stat out as fast as possible, and then stop exporting libev functions. That will teach people.","date":"2012-06-01T00:08:56.744Z","type":"message"}
{"nick":"AvianFlu","message":"piscisaureus_: here you go, flag instead.  https://github.com/AvianFlu/libuv/compare/detached2","date":"2012-06-01T00:21:52.486Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-06-01T00:24:20.553Z","type":"quit"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Charlie McConnell\u000f \u000307master\u000f * r\u000269a923b\u000f \u000310\u000f/ (5 files in 4 dirs)\u0002:\u000f process: implement UV_PROCESS_DETACHED flag for uv_spawn - http://git.io/PB0CVw","date":"2012-06-01T00:27:21.835Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u000204a7e5c\u000f \u000310\u000f/ test/test-spawn.c \u0002:\u000f test-spawn.c: remove unused variable - http://git.io/bMnFaw","date":"2012-06-01T00:27:22.279Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- AvianFlu: landed","date":"2012-06-01T00:27:29.088Z","type":"message"}
{"nick":"piscisaureus_","message":"AvianFlu: thanks :-)","date":"2012-06-01T00:27:55.450Z","type":"message"}
{"nick":"AvianFlu","message":"awesome!","date":"2012-06-01T00:28:05.389Z","type":"message"}
{"nick":"AvianFlu","message":"thank you :D","date":"2012-06-01T00:28:08.653Z","type":"message"}
{"nick":"travis-ci","date":"2012-06-01T00:29:11.057Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#351 (master - 04a7e5c : Bert Belder): The build is still failing.","date":"2012-06-01T00:29:11.282Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/aecddfe...04a7e5c","date":"2012-06-01T00:29:11.282Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1493473","date":"2012-06-01T00:29:11.282Z","type":"message"}
{"nick":"travis-ci","date":"2012-06-01T00:29:11.282Z","type":"part"}
{"nick":"piscisaureus_","message":"AvianFlu: now we need to add it to node. We'll add unref() to node so the user can just do that.","date":"2012-06-01T00:30:09.223Z","type":"message"}
{"nick":"piscisaureus_","message":"him/herself","date":"2012-06-01T00:30:20.924Z","type":"message"}
{"nick":"AvianFlu","message":"piscisaureus_: sounds good","date":"2012-06-01T00:31:11.098Z","type":"message"}
{"nick":"mikeal","date":"2012-06-01T00:31:21.665Z","type":"join"}
{"nick":"isaacs","message":"AvianFlu, piscisaureus_: thanks, that's awesome","date":"2012-06-01T00:32:26.578Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: how hard is it to keep support for ev_io?","date":"2012-06-01T00:32:48.995Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: well, only bnoordhuis knows.","date":"2012-06-01T00:33:08.437Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: ^","date":"2012-06-01T00:33:14.436Z","type":"message"}
{"nick":"isaacs","message":"it seems like that'll break a bunch of stuff.","date":"2012-06-01T00:33:19.877Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: the problem is basically that libuv now does it's own reference counting (instead of having libev do that)","date":"2012-06-01T00:33:33.589Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-06-01T00:33:40.042Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: but ev_io_start bypasses libuv (of courese)","date":"2012-06-01T00:33:52.740Z","type":"message"}
{"nick":"isaacs","message":"hm.","date":"2012-06-01T00:33:59.272Z","type":"message"}
{"nick":"bnoordhuis","message":"i could add a shim for ev_io_start / ev_io_stop","date":"2012-06-01T00:34:04.259Z","type":"message"}
{"nick":"bnoordhuis","message":"but people should really be migrating to uv_poll","date":"2012-06-01T00:34:13.321Z","type":"message"}
{"nick":"isaacs","message":"yes, i agree.","date":"2012-06-01T00:34:16.787Z","type":"message"}
{"nick":"isaacs","message":"but a lot of packages won't.","date":"2012-06-01T00:34:20.211Z","type":"message"}
{"nick":"isaacs","message":"they'll just mysteriously stop working in 0.8","date":"2012-06-01T00:34:30.061Z","type":"message"}
{"nick":"piscisaureus_","message":"well, you can't really blame them since uv_poll is really fresh","date":"2012-06-01T00:34:30.650Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: well that'll be easy to fix","date":"2012-06-01T00:34:40.848Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: it'd be easier to fix if we don't have to fix it :)","date":"2012-06-01T00:34:51.990Z","type":"message"}
{"nick":"piscisaureus_","message":"since uv_poll is very similar to ev_io","date":"2012-06-01T00:34:52.209Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-06-01T00:34:55.241Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: yes, but... it doesn't support ev_set_fd etc.","date":"2012-06-01T00:35:22.324Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: do people use that???","date":"2012-06-01T00:35:32.752Z","type":"message"}
{"nick":"piscisaureus_","message":"er, bnoordhuis ...","date":"2012-06-01T00:35:37.705Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2012-06-01T00:35:41.169Z","type":"message"}
{"nick":"piscisaureus_","message":"meh","date":"2012-06-01T00:35:54.155Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: rly? examples?","date":"2012-06-01T00:36:07.166Z","type":"message"}
{"nick":"bnoordhuis","message":"for one, old code of mine does :)","date":"2012-06-01T00:36:55.972Z","type":"message"}
{"nick":"bnoordhuis","message":"back to the shim, i can easily support the common case (in node, doesn't have to be in libuv)","date":"2012-06-01T00:36:57.532Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: questionable... ev_io can just be free'd after stopping it; not somuch with uv_poll","date":"2012-06-01T00:37:51.951Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: that reminds me, i want to propose a change to the uv_poll interface","date":"2012-06-01T00:37:53.341Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: heh, ok, so what is it?","date":"2012-06-01T00:38:03.500Z","type":"message"}
{"nick":"bnoordhuis","message":"make uv_poll_start take an fd instead of uv_poll_init","date":"2012-06-01T00:38:27.644Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: the general problem is here that node is much more mature than libuv","date":"2012-06-01T00:38:30.432Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: hmmm..... that won't really work on the platform that shall not be named...","date":"2012-06-01T00:38:53.055Z","type":"message"}
{"nick":"bnoordhuis","message":"ai, why not?","date":"2012-06-01T00:39:01.524Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: if you can make it work on windows, you have my blessing :-)","date":"2012-06-01T00:39:03.664Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: because it is not possible to do something like epoll_ctl on windows. Once you submitted interest, it's gotta stay what it is","date":"2012-06-01T00:40:06.606Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: so what uv_poll_start does in case it already started, is ... complicated","date":"2012-06-01T00:40:38.920Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but changing fd's will confuse it for sure :-0","date":"2012-06-01T00:40:52.475Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm, that's inconvenient","date":"2012-06-01T00:40:58.036Z","type":"message"}
{"nick":"bnoordhuis","message":"can't you turn uv_poll_init into a no-op and uv_poll_start into init + start","date":"2012-06-01T00:41:12.123Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll leave it as an exercise to the reader to determine what uv_poll_stop and uv_close should do","date":"2012-06-01T00:41:44.308Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: yes but that means that you can call uv_poll_start only once; you would't be able to call it again to change the interest set","date":"2012-06-01T00:41:44.529Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: or rather, it would be possible to change the interest set but not the fd","date":"2012-06-01T00:41:57.379Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: why do you want this change in the first place?","date":"2012-06-01T00:42:09.149Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: for starters, it's more inline with what libev did","date":"2012-06-01T00:43:07.260Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm, github's down?","date":"2012-06-01T00:43:43.597Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: WFM","date":"2012-06-01T00:44:13.407Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: https://github.com/ajaxorg/packager/issues/4#issuecomment-6051221 <- that link too?","date":"2012-06-01T00:44:30.979Z","type":"message"}
{"nick":"tjfontaine","message":"yup","date":"2012-06-01T00:44:41.716Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm, github must not like me anymore","date":"2012-06-01T00:44:50.703Z","type":"message"}
{"nick":"piscisaureus_","message":"wfm too","date":"2012-06-01T00:44:58.774Z","type":"message"}
{"nick":"tjfontaine","message":"lots of internet betwixt you","date":"2012-06-01T00:45:00.668Z","type":"message"}
{"nick":"piscisaureus_","message":"tele2, right :-)","date":"2012-06-01T00:45:11.103Z","type":"message"}
{"nick":"bnoordhuis","message":"and it works again","date":"2012-06-01T00:46:05.728Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: as I said, if you can make it work: https://github.com/joyent/libuv/blob/master/src/win/poll.c","date":"2012-06-01T00:47:17.932Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 252 seconds","date":"2012-06-01T00:50:40.038Z","type":"quit"}
{"nick":"bnoordhuis","date":"2012-06-01T00:51:38.252Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 252 seconds","date":"2012-06-01T00:58:00.098Z","type":"quit"}
{"nick":"theCole","date":"2012-06-01T01:03:02.927Z","type":"join"}
{"nick":"pietern","reason":"Quit: pietern","date":"2012-06-01T01:04:04.406Z","type":"quit"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002528123a\u000f \u000310\u000f/ src/win/poll.c \u0002:\u000f windows: fix bugs in uv__fast_poll_cancel_poll_req - http://git.io/s0kWzw","date":"2012-06-01T01:06:23.345Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-06-01T01:07:59.252Z","type":"quit"}
{"nick":"travis-ci","date":"2012-06-01T01:08:19.030Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#352 (master - 528123a : Bert Belder): The build is still failing.","date":"2012-06-01T01:08:19.255Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/04a7e5c...528123a","date":"2012-06-01T01:08:19.255Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1493808","date":"2012-06-01T01:08:19.255Z","type":"message"}
{"nick":"travis-ci","date":"2012-06-01T01:08:19.255Z","type":"part"}
{"nick":"bnoordhuis","date":"2012-06-01T01:11:19.258Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 252 seconds","date":"2012-06-01T01:21:21.270Z","type":"quit"}
{"nick":"piscisaureus_","message":"hmm, now I crippled uv__fast_poll_cancel_poll_req completely :-(","date":"2012-06-01T01:28:36.034Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-06-01T01:29:04.827Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-06-01T01:32:52.785Z","type":"quit"}
{"nick":"Aria","date":"2012-06-01T01:39:49.188Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-06-01T01:41:25.709Z","type":"join"}
{"nick":"hij1nx","date":"2012-06-01T01:52:06.814Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 265 seconds","date":"2012-06-01T02:04:13.492Z","type":"quit"}
{"nick":"mikeal","date":"2012-06-01T02:07:04.704Z","type":"join"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-06-01T02:10:23.284Z","type":"quit"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-01T02:27:31.674Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-06-01T02:39:15.246Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 260 seconds","date":"2012-06-01T02:53:10.937Z","type":"quit"}
{"nick":"bulatshakirzyano","date":"2012-06-01T03:05:43.933Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-06-01T03:05:57.791Z","type":"quit"}
{"nick":"Aria","reason":"Remote host closed the connection","date":"2012-06-01T03:08:45.877Z","type":"quit"}
{"nick":"Aria","date":"2012-06-01T03:12:52.343Z","type":"join"}
{"nick":"ira","reason":"Quit: Leaving...","date":"2012-06-01T03:14:08.839Z","type":"quit"}
{"nick":"vtjnash","date":"2012-06-01T03:19:48.307Z","type":"join"}
{"nick":"Aria","reason":"Read error: Connection reset by peer","date":"2012-06-01T03:26:31.873Z","type":"quit"}
{"nick":"Aria","date":"2012-06-01T03:26:57.532Z","type":"join"}
{"nick":"theCole","reason":"Quit: theCole","date":"2012-06-01T03:34:06.835Z","type":"quit"}
{"nick":"Aria","reason":"Remote host closed the connection","date":"2012-06-01T03:56:50.589Z","type":"quit"}
{"nick":"erickt","reason":"Ping timeout: 240 seconds","date":"2012-06-01T04:04:50.942Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-06-01T04:50:52.090Z","type":"quit"}
{"nick":"erickt","date":"2012-06-01T04:53:15.856Z","type":"join"}
{"nick":"erickt","reason":"Client Quit","date":"2012-06-01T04:54:25.268Z","type":"quit"}
{"nick":"erickt","date":"2012-06-01T04:55:24.801Z","type":"join"}
{"nick":"theCole","date":"2012-06-01T04:57:47.015Z","type":"join"}
{"nick":"loladiro","date":"2012-06-01T05:03:48.294Z","type":"join"}
{"nick":"theCole","reason":"Quit: theCole","date":"2012-06-01T05:05:11.204Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-06-01T05:17:28.110Z","type":"quit"}
{"nick":"hij1nx","date":"2012-06-01T05:33:01.014Z","type":"join"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-06-01T05:37:16.992Z","type":"quit"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-01T05:41:57.851Z","type":"quit"}
{"nick":"hij1nx","date":"2012-06-01T05:45:19.940Z","type":"join"}
{"nick":"hij1nx","reason":"Client Quit","date":"2012-06-01T05:47:35.139Z","type":"quit"}
{"nick":"vtjnash","reason":"Remote host closed the connection","date":"2012-06-01T05:52:06.184Z","type":"quit"}
{"nick":"mikeal","date":"2012-06-01T05:52:22.989Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2012-06-01T05:52:46.324Z","type":"quit"}
{"nick":"mikeal","date":"2012-06-01T06:02:22.733Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-06-01T06:13:45.587Z","type":"quit"}
{"nick":"mikeal","date":"2012-06-01T06:21:08.918Z","type":"join"}
{"nick":"felixge","date":"2012-06-01T06:25:58.514Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-06-01T06:25:58.734Z","type":"quit"}
{"nick":"felixge","date":"2012-06-01T06:25:58.734Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-06-01T06:55:58.171Z","type":"quit"}
{"nick":"abraxas","date":"2012-06-01T06:56:33.606Z","type":"join"}
{"nick":"abraxas","reason":"Read error: Connection reset by peer","date":"2012-06-01T06:57:58.854Z","type":"quit"}
{"nick":"abraxas_","date":"2012-06-01T06:58:02.001Z","type":"join"}
{"nick":"abraxas_","reason":"Remote host closed the connection","date":"2012-06-01T06:59:15.162Z","type":"quit"}
{"nick":"abraxas","date":"2012-06-01T06:59:21.259Z","type":"join"}
{"nick":"rendar","date":"2012-06-01T07:06:34.540Z","type":"join"}
{"nick":"AvianFlu","reason":"Quit: Lost terminal","date":"2012-06-01T07:13:05.556Z","type":"quit"}
{"nick":"AvianFlu","date":"2012-06-01T07:21:49.070Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 240 seconds","date":"2012-06-01T07:33:50.965Z","type":"quit"}
{"nick":"bulatshakirzyano","reason":"Quit: Computer has gone to sleep.","date":"2012-06-01T07:36:05.083Z","type":"quit"}
{"nick":"hij1nx","date":"2012-06-01T09:57:58.782Z","type":"join"}
{"nick":"paddybyers","date":"2012-06-01T10:36:19.184Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-06-01T10:38:54.382Z","type":"quit"}
{"nick":"abraxas","date":"2012-06-01T10:39:27.418Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 240 seconds","date":"2012-06-01T10:43:51.060Z","type":"quit"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-06-01T11:03:32.798Z","type":"quit"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-01T11:23:41.684Z","type":"quit"}
{"nick":"ibc","date":"2012-06-01T11:39:32.339Z","type":"join"}
{"nick":"mmalecki","date":"2012-06-01T11:41:01.321Z","type":"join"}
{"nick":"ibc","message":"hi, is it possible for a TCP write req to fail (callback with error) while the connection remains alive?","date":"2012-06-01T11:43:00.186Z","type":"message"}
{"nick":"ira","date":"2012-06-01T12:03:27.672Z","type":"join"}
{"nick":"ira","reason":"Client Quit","date":"2012-06-01T12:03:30.447Z","type":"quit"}
{"nick":"ira","date":"2012-06-01T12:04:35.268Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-06-01T12:41:13.163Z","type":"join"}
{"nick":"ibc","message":"let me please repeat my question :)","date":"2012-06-01T13:17:05.784Z","type":"message"}
{"nick":"ibc","message":"is it possible for a TCP write req to fail (callback with error) while the connection remains alive?","date":"2012-06-01T13:17:15.497Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: well, yes that's possible in theory","date":"2012-06-01T13:17:47.520Z","type":"message"}
{"nick":"piscisaureus_","message":"although unlikely","date":"2012-06-01T13:17:53.018Z","type":"message"}
{"nick":"ibc","message":"in which cases?","date":"2012-06-01T13:18:00.168Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: hmm, when the os is very low on resources for example","date":"2012-06-01T13:18:32.719Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: but for all intents and purposes you should just assume that a socket is dead when uv_write() fails","date":"2012-06-01T13:19:05.611Z","type":"message"}
{"nick":"ibc","message":"so the callback error status says us that the data could not be sent, but the socket remains connected, am I right?  If so, which ERRNO would UV generate in the write callback?","date":"2012-06-01T13:19:24.511Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: that's not defined. The errno is just whatever the actual error is that happened :-0","date":"2012-06-01T13:20:02.730Z","type":"message"}
{"nick":"ibc","message":"yes, but in my case I always enable \"receiving\" so the way in which I expect to detect that the socket is dead is by receiving nread=-1 in read callback, hope this is right","date":"2012-06-01T13:20:14.306Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: yes, I think that's okay","date":"2012-06-01T13:20:53.915Z","type":"message"}
{"nick":"ibc","message":"thanks a lot","date":"2012-06-01T13:21:14.967Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: alternatively you could just cut the connection whenever the write fails","date":"2012-06-01T13:21:17.140Z","type":"message"}
{"nick":"ibc","message":"is that safe then?","date":"2012-06-01T13:21:25.206Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: so","date":"2012-06-01T13:21:45.788Z","type":"message"}
{"nick":"piscisaureus_","message":"if (status == -1) {","date":"2012-06-01T13:21:46.008Z","type":"message"}
{"nick":"piscisaureus_","message":"  if (!uv_is_closing(handle)) uv_close(handle, close_cb);","date":"2012-06-01T13:21:46.008Z","type":"message"}
{"nick":"piscisaureus_","message":"}","date":"2012-06-01T13:21:46.008Z","type":"message"}
{"nick":"piscisaureus_","message":"oh I forgot \"return\"","date":"2012-06-01T13:21:54.144Z","type":"message"}
{"nick":"ibc","message":"if for example I try to send lot of data over a slow socket, couldn't the Kernel return error once its buffer is full or whatever?","date":"2012-06-01T13:22:13.518Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: the same would be in the recv callback although you should probably check the buf and free it if appropriate","date":"2012-06-01T13:22:14.824Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: yes the kernel could do that, but libuv normally handles that","date":"2012-06-01T13:22:33.608Z","type":"message"}
{"nick":"ibc","message":"ok","date":"2012-06-01T13:22:41.298Z","type":"message"}
{"nick":"piscisaureus_","message":"the typical error you would get is EAGAIN, and libuv will make sure to attempt to send it at a later point in time","date":"2012-06-01T13:23:07.594Z","type":"message"}
{"nick":"piscisaureus_","message":"(this is more or less the purpose of libuv in the first place)","date":"2012-06-01T13:23:14.628Z","type":"message"}
{"nick":"ibc","message":"about the recv callback, I assume that if I receive nread=-1 it means that data has NOT been received, so my read_alloc cb has not been called and I don't have to fre the buf, am  I wrong?","date":"2012-06-01T13:23:35.237Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: that's not correct","date":"2012-06-01T13:23:47.212Z","type":"message"}
{"nick":"ibc","message":"sure, I understand, and yes, I hope libuv does that for me :)","date":"2012-06-01T13:23:55.594Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: it *may* be called","date":"2012-06-01T13:23:57.712Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: in case your alloc cb was not called buf.base will be NULL and buf.len will be 0","date":"2012-06-01T13:24:41.864Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: so you can just check that.","date":"2012-06-01T13:25:03.238Z","type":"message"}
{"nick":"ibc","message":"aja, good point! otherwise I should mantain some kind of state!","date":"2012-06-01T13:25:19.230Z","type":"message"}
{"nick":"piscisaureus_","message":"ibc: this behaviour is guaranteed","date":"2012-06-01T13:25:37.858Z","type":"message"}
{"nick":"piscisaureus_","message":"so you can just rely on it","date":"2012-06-01T13:25:46.039Z","type":"message"}
{"nick":"ibc","message":"clear, thanks a lot","date":"2012-06-01T13:25:59.107Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: hey man","date":"2012-06-01T13:28:52.668Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: sorry, I was in transit DME->OMS","date":"2012-06-01T13:28:59.050Z","type":"message"}
{"nick":"indutny","message":"going to start merging things into in about 2 hours","date":"2012-06-01T13:29:12.091Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: is it ok?","date":"2012-06-01T13:29:19.677Z","type":"message"}
{"nick":"indutny","message":"I mean, will you be here to land it in libuv's master?","date":"2012-06-01T13:29:32.184Z","type":"message"}
{"nick":"indutny","message":"and, btw","date":"2012-06-01T13:29:40.185Z","type":"message"}
{"nick":"indutny","message":"I still need help in writing to FD=3 on windows :P","date":"2012-06-01T13:29:47.955Z","type":"message"}
{"nick":"indutny","message":"that's needed for test","date":"2012-06-01T13:29:52.444Z","type":"message"}
{"nick":"indutny","message":"if you can paste a gist of uv api for that - I'll be really glad","date":"2012-06-01T13:30:07.476Z","type":"message"}
{"nick":"indutny","message":"(otherwise this test will be linux-only)","date":"2012-06-01T13:30:15.821Z","type":"message"}
{"nick":"indutny","message":"gtg","date":"2012-06-01T13:30:18.891Z","type":"message"}
{"nick":"indutny","message":"ttyl","date":"2012-06-01T13:30:19.463Z","type":"message"}
{"nick":"bnoordhuis","date":"2012-06-01T13:35:18.286Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus_: you around?","date":"2012-06-01T13:54:09.266Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: https://github.com/bnoordhuis/libuv/compare/uv_cond <- does that look sound to you?","date":"2012-06-01T13:55:41.026Z","type":"message"}
{"nick":"ibc","reason":"Remote host closed the connection","date":"2012-06-01T13:57:47.839Z","type":"quit"}
{"nick":"xaq","date":"2012-06-01T14:16:14.981Z","type":"join"}
{"nick":"loladiro","date":"2012-06-01T14:30:47.906Z","type":"join"}
{"nick":"erickt","date":"2012-06-01T14:41:53.939Z","type":"join"}
{"nick":"piscisaureus_","message":"indutny: writing to fd 3:","date":"2012-06-01T14:46:43.135Z","type":"message"}
{"nick":"piscisaureus_","message":"WriteFile(_get_osfhandle(3), ...)","date":"2012-06-01T14:46:53.682Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: looking at it. what do we need cond vars for ?","date":"2012-06-01T14:47:13.906Z","type":"message"}
{"nick":"felixge","reason":"Quit: felixge","date":"2012-06-01T14:48:17.081Z","type":"quit"}
{"nick":"piscisaureus_","message":"bnoordhuis: I didn't test (do we have tests?) but it looks like you did the right thing","date":"2012-06-01T14:51:50.593Z","type":"message"}
{"nick":"AvianFlu","date":"2012-06-01T15:00:02.755Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: I am not sure about the implementation of the fallback mechanism","date":"2012-06-01T15:08:51.906Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: ok","date":"2012-06-01T15:12:37.451Z","type":"message"}
{"nick":"indutny","message":"back","date":"2012-06-01T15:12:39.075Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: thanks","date":"2012-06-01T15:12:50.126Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: the general trick is just:","date":"2012-06-01T15:13:15.114Z","type":"message"}
{"nick":"piscisaureus_","message":"HANDLE os_handle = (HANDLE) _get_osfhandle(fd)","date":"2012-06-01T15:13:15.344Z","type":"message"}
{"nick":"piscisaureus_","message":"to turn an fd into a HANDLE","date":"2012-06-01T15:13:20.893Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2012-06-01T15:13:54.834Z","type":"message"}
{"nick":"indutny","message":"cool","date":"2012-06-01T15:13:55.744Z","type":"message"}
{"nick":"felixge","date":"2012-06-01T15:16:45.263Z","type":"join"}
{"nick":"indutny","message":"piscisaureus_: https://github.com/joyent/libuv/pull/440/files","date":"2012-06-01T15:21:21.674Z","type":"message"}
{"nick":"indutny","message":"there was a hairy rebase","date":"2012-06-01T15:21:26.103Z","type":"message"}
{"nick":"indutny","message":"so please review","date":"2012-06-01T15:21:29.372Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ^","date":"2012-06-01T15:21:37.321Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: spawn_stdio_greater_than_4 ?","date":"2012-06-01T15:22:23.781Z","type":"message"}
{"nick":"piscisaureus_","message":"you mean, greater than 3 :-)","date":"2012-06-01T15:22:30.205Z","type":"message"}
{"nick":"indutny","message":"hahahaha","date":"2012-06-01T15:22:30.935Z","type":"message"}
{"nick":"indutny","message":"ooops","date":"2012-06-01T15:22:34.413Z","type":"message"}
{"nick":"indutny","message":"I'll fix that","date":"2012-06-01T15:23:00.082Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: something else: https://github.com/indutny/libuv/commit/2d34b0f2a15c272fbca1dd039c47f0a6646641ab","date":"2012-06-01T15:24:01.820Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: that is now almost an empty commit since the api changes were merged to the unix impl","date":"2012-06-01T15:24:15.993Z","type":"message"}
{"nick":"indutny","message":"ok, I can fixup it if you don't mind","date":"2012-06-01T15:24:35.917Z","type":"message"}
{"nick":"indutny","message":"sorry, order was messed","date":"2012-06-01T15:24:40.952Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: maybe you can squash this commit into your unix changes too","date":"2012-06-01T15:24:46.399Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: ok","date":"2012-06-01T15:25:08.742Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: also, the commit message for https://github.com/indutny/libuv/commit/9c5fb24703728cf98ed4cf8ef8d53bc287124ba6 should be improved a little :-)","date":"2012-06-01T15:25:21.042Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: because this doesn't explain anything, it's just summing up 2 flags","date":"2012-06-01T15:25:39.134Z","type":"message"}
{"nick":"felixge","reason":"Quit: http://www.debuggable.com/","date":"2012-06-01T15:25:59.247Z","type":"quit"}
{"nick":"piscisaureus_","message":"indutny: lgtm otherwise","date":"2012-06-01T15:26:15.611Z","type":"message"}
{"nick":"indutny","message":"force pushing","date":"2012-06-01T15:26:32.927Z","type":"message"}
{"nick":"piscisaureus_","message":"that's okay","date":"2012-06-01T15:26:38.213Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: done https://github.com/joyent/libuv/pull/440/commits","date":"2012-06-01T15:26:56.444Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: lgtm","date":"2012-06-01T15:27:53.015Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: ok, I don't have push access to libuv","date":"2012-06-01T15:28:03.683Z","type":"message"}
{"nick":"indutny","message":"so :)","date":"2012-06-01T15:28:05.475Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: oh really?","date":"2012-06-01T15:28:12.544Z","type":"message"}
{"nick":"indutny","message":"either you push or we will wait for bnoordhuis to sign off it","date":"2012-06-01T15:28:17.407Z","type":"message"}
{"nick":"piscisaureus_","message":"hmm I think we could get you that","date":"2012-06-01T15:28:18.492Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: well, that's up to you","date":"2012-06-01T15:28:29.367Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: ping","date":"2012-06-01T15:28:59.911Z","type":"message"}
{"nick":"indutny","message":"http://lalo.li/#q1YqSa0oUbJSyslM0i3VLVPSUUrMLcjJLClNSVWyMjXQUSrPL0pJTyxQsjLXUSrILEnOULIy0lEqLkhNTQGyjGoB4","date":"2012-06-01T15:32:40.417Z","type":"message"}
{"nick":"paddybyers","date":"2012-06-01T15:32:52.025Z","type":"join"}
{"nick":"piscisaureus_","message":"indutny: the rebase didn't work out well. I will re-land windows support on top of your unix work","date":"2012-06-01T15:34:27.626Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-06-01T15:34:34.662Z","type":"message"}
{"nick":"indutny","message":"crap","date":"2012-06-01T15:34:35.554Z","type":"message"}
{"nick":"indutny","message":"there were conflict in win/process.c","date":"2012-06-01T15:34:49.904Z","type":"message"}
{"nick":"indutny","message":"I thought I solved them correctly","date":"2012-06-01T15:34:54.617Z","type":"message"}
{"nick":"indutny","action":"will never trust PC again","date":"2012-06-01T15:35:06.191Z","type":"action"}
{"nick":"indutny","message":"piscisaureus_: wait a minute","date":"2012-06-01T15:35:19.951Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: lets do it other way","date":"2012-06-01T15:35:24.104Z","type":"message"}
{"nick":"indutny","message":"I'll rebase my changes on yours","date":"2012-06-01T15:35:29.172Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: no, don't bother.","date":"2012-06-01T15:35:33.701Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: the problem is AvianFlu's detached support","date":"2012-06-01T15:35:42.365Z","type":"message"}
{"nick":"indutny","message":"k","date":"2012-06-01T15:35:42.712Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-06-01T15:40:28.095Z","type":"quit"}
{"nick":"bitprobe","date":"2012-06-01T15:40:41.913Z","type":"join"}
{"nick":"paddybyers","date":"2012-06-01T15:49:29.065Z","type":"join"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Fedor Indutny\u000f \u000307master\u000f * r\u0002f5b5127\u000f \u000310\u000f/ (4 files in 4 dirs)\u0002:\u000f change spawn() api to allow using existing streams for stdio - http://git.io/AB5PWg","date":"2012-06-01T15:50:23.941Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Fedor Indutny\u000f \u000307master\u000f * r\u0002dc7a62d\u000f \u000310\u000f/ (test/run-tests.c test/test-list.h test/test-spawn.c)\u0002:\u000f test: test for uv_spawn with stdio_count == 3 - http://git.io/HoAcUw","date":"2012-06-01T15:50:24.169Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00023ec9c67\u000f \u000310\u000f/ (include/uv-private/uv-win.h include/uv.h src/win/process.c)\u0002:\u000f windows: improve spawn stdio support - http://git.io/xTSNlQ","date":"2012-06-01T15:50:24.169Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u000287dbffb\u000f \u000310\u000f/ test/run-tests.c \u0002:\u000f windows: fix undefined function warning in run-tests.c - http://git.io/N2XnZg","date":"2012-06-01T15:50:24.170Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- indutny","date":"2012-06-01T15:50:26.900Z","type":"message"}
{"nick":"travis-ci","date":"2012-06-01T15:56:37.063Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#353 (master - 87dbffb : Bert Belder): The build was fixed.","date":"2012-06-01T15:56:37.587Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/528123a...87dbffb","date":"2012-06-01T15:56:37.587Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1500042","date":"2012-06-01T15:56:37.587Z","type":"message"}
{"nick":"travis-ci","date":"2012-06-01T15:56:37.588Z","type":"part"}
