{"nick":"mikeal","date":"2012-04-27T00:01:54.459Z","type":"join"}
{"nick":"perezd","message":"do I need to actually free Persistent values?","date":"2012-04-27T00:01:57.592Z","type":"message"}
{"nick":"perezd","message":"or are they freed automatically now","date":"2012-04-27T00:02:04.389Z","type":"message"}
{"nick":"piscisaureus_","message":"perezd: you must free them","date":"2012-04-27T00:09:58.919Z","type":"message"}
{"nick":"perezd","message":"piscisaureus_: how do you do that properly? just calling free?","date":"2012-04-27T00:10:12.787Z","type":"message"}
{"nick":"TooTallNate","message":"handle.Dispose() and handle.Clear() do it for me","date":"2012-04-27T00:11:04.889Z","type":"message"}
{"nick":"TooTallNate","message":"https://github.com/TooTallNate/node-weak/blob/master/src/weakref.cc#L163-164","date":"2012-04-27T00:11:05.361Z","type":"message"}
{"nick":"TooTallNate","message":"not really sure of the differences to be honest","date":"2012-04-27T00:11:13.064Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: ^","date":"2012-04-27T00:11:29.897Z","type":"message"}
{"nick":"piscisaureus_","message":"perezd:","date":"2012-04-27T00:11:43.096Z","type":"message"}
{"nick":"piscisaureus_","message":"Persistent<Object> p = Persistent::New(o);","date":"2012-04-27T00:11:43.302Z","type":"message"}
{"nick":"piscisaureus_","message":"o.Dispose()","date":"2012-04-27T00:11:43.303Z","type":"message"}
{"nick":"perezd","message":"closing scope on handle clears handle objects then?","date":"2012-04-27T00:12:11.566Z","type":"message"}
{"nick":"piscisaureus_","message":"perezd: closing scope disposes Local handles","date":"2012-04-27T00:12:33.239Z","type":"message"}
{"nick":"perezd","message":"okay makes sense","date":"2012-04-27T00:12:39.577Z","type":"message"}
{"nick":"piscisaureus_","message":"I am leaving btw.","date":"2012-04-27T00:14:12.638Z","type":"message"}
{"nick":"TooTallNate","message":"piscisaureus_: have a good one","date":"2012-04-27T00:14:24.204Z","type":"message"}
{"nick":"piscisaureus_","message":"thanks","date":"2012-04-27T00:14:33.357Z","type":"message"}
{"nick":"piscisaureus_","message":"that'll work","date":"2012-04-27T00:14:40.655Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-04-27T00:14:55.279Z","type":"quit"}
{"nick":"felixge","reason":"Quit: felixge","date":"2012-04-27T00:15:12.402Z","type":"quit"}
{"nick":"orlandovftw","reason":"Ping timeout: 244 seconds","date":"2012-04-27T00:17:45.400Z","type":"quit"}
{"nick":"bnoordhuis","date":"2012-04-27T00:27:12.066Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 250 seconds","date":"2012-04-27T00:45:15.678Z","type":"quit"}
{"nick":"bnoordhuis","message":"TooTallNate: ping","date":"2012-04-27T00:50:44.809Z","type":"message"}
{"nick":"tjfontaine","message":"utoh","date":"2012-04-27T00:50:51.085Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: pong","date":"2012-04-27T00:50:53.883Z","type":"message"}
{"nick":"bnoordhuis","message":"hey","date":"2012-04-27T00:50:56.300Z","type":"message"}
{"nick":"bnoordhuis","message":"https://github.com/joyent/node/issues/3148 <- what's your opinion on that?","date":"2012-04-27T00:51:08.321Z","type":"message"}
{"nick":"bnoordhuis","message":"it's not quite a bug, just something that most people won't expect","date":"2012-04-27T00:51:27.470Z","type":"message"}
{"nick":"bnoordhuis","message":"actually... there is a bug but it's not what the reporter thinks :)","date":"2012-04-27T00:51:37.228Z","type":"message"}
{"nick":"bnoordhuis","message":"the isIP() function doesn't allow dotted hex notation","date":"2012-04-27T00:51:57.474Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: you mean radix 10 is what most people would expect?","date":"2012-04-27T00:51:58.879Z","type":"message"}
{"nick":"TooTallNate","message":"i would agree :p","date":"2012-04-27T00:52:05.711Z","type":"message"}
{"nick":"bnoordhuis","message":"yes. otoh, it's all according to spec...","date":"2012-04-27T00:52:18.897Z","type":"message"}
{"nick":"TooTallNate","message":"in the past (url.parse()) we've fallen back on what web browsers do","date":"2012-04-27T00:52:39.877Z","type":"message"}
{"nick":"bnoordhuis","message":"true. and web browsers support all kinds of funky notation","date":"2012-04-27T00:53:04.002Z","type":"message"}
{"nick":"tjfontaine","message":"btw, isIP('') doesn't exactly perform the way I would expect :)","date":"2012-04-27T00:53:10.619Z","type":"message"}
{"nick":"isaacs","message":"ipv6 is so terrible","date":"2012-04-27T00:53:13.651Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: `ping` for example allows octets","date":"2012-04-27T00:54:27.099Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-27T00:54:38.293Z","type":"quit"}
{"nick":"TooTallNate","message":"(darwin ping at least)","date":"2012-04-27T00:54:47.292Z","type":"message"}
{"nick":"bnoordhuis","message":"TooTallNate: yes. it's a function of inet_ntop()","date":"2012-04-27T00:54:50.039Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: if you want a personal opinion i'd say use radix 10 there","date":"2012-04-27T00:55:23.781Z","type":"message"}
{"nick":"TooTallNate","message":"i don't know of anybody who'se ever cared about 0x8.0x8.0x8.0x8 :p","date":"2012-04-27T00:55:57.757Z","type":"message"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-27T00:56:08.651Z","type":"quit"}
{"nick":"bnoordhuis","message":"there are a lot of noisy, drunk people in front of my house...","date":"2012-04-27T00:56:16.284Z","type":"message"}
{"nick":"bnoordhuis","action":"gets the bb gun","date":"2012-04-27T00:56:20.953Z","type":"action"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-04-27T00:56:37.865Z","type":"quit"}
{"nick":"bnoordhuis","message":"i think they're idling in #libuv because the moment i said that, they moved on","date":"2012-04-27T00:57:00.040Z","type":"message"}
{"nick":"bnoordhuis","message":"TooTallNate: yeah, i think i agree","date":"2012-04-27T00:57:12.982Z","type":"message"}
{"nick":"tjfontaine","message":"hah","date":"2012-04-27T00:57:40.600Z","type":"message"}
{"nick":"mikeal","date":"2012-04-27T01:00:48.628Z","type":"join"}
{"nick":"c4milo","date":"2012-04-27T01:10:21.012Z","type":"join"}
{"nick":"TooTallNate","message":"bnoordhuis: do you know what the actual problem that guy is reporting is?","date":"2012-04-27T01:10:54.467Z","type":"message"}
{"nick":"TooTallNate","message":"it made sense to be a parseInt error, but apparently its something else","date":"2012-04-27T01:11:14.782Z","type":"message"}
{"nick":"bnoordhuis","message":"TooTallNate: isIP() accepts the address because it's numeric, tcp_wrap.cc then parses the 025 as 21 decimal","date":"2012-04-27T01:11:50.862Z","type":"message"}
{"nick":"bnoordhuis","message":"so his script is not connecting to the address he thinks it is","date":"2012-04-27T01:12:07.591Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: what does the ip parsing in c-land?","date":"2012-04-27T01:13:02.186Z","type":"message"}
{"nick":"bnoordhuis","message":"TooTallNate: inet_ntop()","date":"2012-04-27T01:13:12.153Z","type":"message"}
{"nick":"seebees","date":"2012-04-27T01:13:29.551Z","type":"part"}
{"nick":"TooTallNate","message":"oh i see","date":"2012-04-27T01:13:38.192Z","type":"message"}
{"nick":"isaacs","date":"2012-04-27T01:35:21.076Z","type":"join"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-27T01:39:30.840Z","type":"quit"}
{"nick":"mjr_","message":"bnoordhuis: we are running your slab allocator branch on one machine. So far so good.","date":"2012-04-27T01:40:25.066Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: no more zero reads? do you know if it's faster?","date":"2012-04-27T01:41:03.518Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-04-27T01:41:40.798Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2012-04-27T01:43:29.620Z","type":"quit"}
{"nick":"mjr_","message":"no more 0 reads, but I can't tell if it's faster.","date":"2012-04-27T01:44:03.049Z","type":"message"}
{"nick":"mjr_","message":"It seems perhaps no faster, although I'm really surprised by that","date":"2012-04-27T01:44:11.152Z","type":"message"}
{"nick":"abraxas","date":"2012-04-27T01:44:31.125Z","type":"join"}
{"nick":"mjr_","message":"The flame graph looks way better though, like most of the time is spent in my code now.","date":"2012-04-27T01:44:53.291Z","type":"message"}
{"nick":"mjr_","message":"But I was expecting drastically less CPU time to be consumed, and I don't see that, so a mystery still exists.","date":"2012-04-27T01:45:18.799Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: okay, good. :-) re: faster: i'm having a hard time outcompeting libc","date":"2012-04-27T01:45:30.364Z","type":"message"}
{"nick":"bnoordhuis","message":"memory usage / fragmentation should be more stable though","date":"2012-04-27T01:45:39.502Z","type":"message"}
{"nick":"mjr_","message":"back in a while","date":"2012-04-27T01:46:25.189Z","type":"message"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2012-04-27T01:46:27.318Z","type":"quit"}
{"nick":"erickt","reason":"Ping timeout: 252 seconds","date":"2012-04-27T01:47:05.584Z","type":"quit"}
{"nick":"ira","date":"2012-04-27T01:50:19.046Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-27T01:57:11.142Z","type":"quit"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-04-27T02:14:22.665Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 248 seconds","date":"2012-04-27T03:13:28.911Z","type":"quit"}
{"nick":"c4milo","reason":"Ping timeout: 260 seconds","date":"2012-04-27T03:15:00.634Z","type":"quit"}
{"nick":"perezd","date":"2012-04-27T03:55:29.175Z","type":"join"}
{"nick":"mjr_","date":"2012-04-27T03:56:20.649Z","type":"join"}
{"nick":"ira","reason":"Quit: Leaving...","date":"2012-04-27T04:18:30.339Z","type":"quit"}
{"nick":"bulatshakirzyano","date":"2012-04-27T04:48:41.307Z","type":"join"}
{"nick":"bulatshakirzyano","new_nick":"avalanche123|h","date":"2012-04-27T04:48:58.171Z","type":"nick"}
{"nick":"c4milo","date":"2012-04-27T05:08:04.023Z","type":"join"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-04-27T05:24:55.744Z","type":"quit"}
{"nick":"erickt","date":"2012-04-27T05:44:52.478Z","type":"join"}
{"nick":"paddybyers","date":"2012-04-27T05:51:00.393Z","type":"join"}
{"nick":"mikeal","date":"2012-04-27T06:02:11.676Z","type":"join"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-04-27T06:18:18.426Z","type":"quit"}
{"nick":"AvianFlu","reason":"Ping timeout: 250 seconds","date":"2012-04-27T06:20:38.138Z","type":"quit"}
{"nick":"c4milo","reason":"Ping timeout: 265 seconds","date":"2012-04-27T06:56:40.181Z","type":"quit"}
{"nick":"rendar","date":"2012-04-27T07:11:49.261Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-04-27T07:16:40.722Z","type":"quit"}
{"nick":"AvianFlu","date":"2012-04-27T07:18:32.203Z","type":"join"}
{"nick":"mmalecki[ft]","message":"wtf https://twitter.com/#!/nodeconf/status/195627209082413056","date":"2012-04-27T07:50:39.371Z","type":"message"}
{"nick":"mmalecki[ft]","message":"(no, really. someone knows what's going on?)","date":"2012-04-27T07:54:44.009Z","type":"message"}
{"nick":"paddybyers","date":"2012-04-27T07:55:03.264Z","type":"join"}
{"nick":"orlandovftw","date":"2012-04-27T08:15:20.046Z","type":"join"}
{"nick":"benvie","date":"2012-04-27T09:23:46.621Z","type":"join"}
{"nick":"bnoordhuis","date":"2012-04-27T10:24:58.783Z","type":"join"}
{"nick":"orlandovftw","reason":"Quit: leaving","date":"2012-04-27T11:20:13.916Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-04-27T12:00:11.468Z","type":"quit"}
{"nick":"abraxas","date":"2012-04-27T12:00:42.961Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 240 seconds","date":"2012-04-27T12:05:13.568Z","type":"quit"}
{"nick":"theCole","date":"2012-04-27T12:44:22.841Z","type":"join"}
{"nick":"c4milo","date":"2012-04-27T12:49:48.009Z","type":"join"}
{"nick":"paddybyers","date":"2012-04-27T12:57:31.644Z","type":"part"}
{"nick":"ira","date":"2012-04-27T13:29:06.039Z","type":"join"}
{"nick":"theCole","reason":"Quit: theCole","date":"2012-04-27T13:32:53.976Z","type":"quit"}
{"nick":"mmalecki[ft]","message":"bnoordhuis: hey","date":"2012-04-27T13:35:09.392Z","type":"message"}
{"nick":"mmalecki[ft]","message":"bnoordhuis: maybe you know what's going on? https://twitter.com/nodeconf/status/195627209082413056","date":"2012-04-27T13:35:44.717Z","type":"message"}
{"nick":"mmalecki[ft]","message":"bnoordhuis: also, does util.inspect need backward compatibility","date":"2012-04-27T13:38:49.482Z","type":"message"}
{"nick":"mmalecki[ft]","message":"?","date":"2012-04-27T13:38:51.082Z","type":"message"}
{"nick":"mmalecki[ft]","message":"oh... it's \"locked\"","date":"2012-04-27T13:41:28.447Z","type":"message"}
{"nick":"mmalecki[ft]","message":"shitty API is a serious bug, actually","date":"2012-04-27T13:41:40.828Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki[ft]: ho","date":"2012-04-27T13:50:07.344Z","type":"message"}
{"nick":"bnoordhuis","message":"re that twitter message, there'll be awards at nodeconf","date":"2012-04-27T13:51:00.247Z","type":"message"}
{"nick":"bnoordhuis","message":"exterminator is one of the categories","date":"2012-04-27T13:51:14.726Z","type":"message"}
{"nick":"mmalecki[ft]","message":"ok, so I guess I should buy a ticket :)","date":"2012-04-27T13:54:12.854Z","type":"message"}
{"nick":"paddybyers","date":"2012-04-27T13:56:08.885Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-04-27T13:59:46.813Z","type":"join"}
{"nick":"piscisaureus_","message":"creationix: bnoordhuis: I need your opinion.","date":"2012-04-27T14:08:03.821Z","type":"message"}
{"nick":"creationix","message":"piscisaureus_, what's up","date":"2012-04-27T14:08:14.498Z","type":"message"}
{"nick":"piscisaureus_","message":"creationix: bnoordhuis: if people try to do setsid/setuid on windows, should we throw an error, of fail silently?","date":"2012-04-27T14:08:23.894Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: explicit > implicit","date":"2012-04-27T14:08:45.595Z","type":"message"}
{"nick":"creationix","message":"probably throw error since they most likely do this for security reasons","date":"2012-04-27T14:08:52.916Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah, ok","date":"2012-04-27T14:08:58.532Z","type":"message"}
{"nick":"creationix","message":"silent security holes are very bad","date":"2012-04-27T14:09:00.954Z","type":"message"}
{"nick":"piscisaureus_","message":"I agree","date":"2012-04-27T14:09:03.702Z","type":"message"}
{"nick":"creationix","message":"mikeal, Nodie nominations were community provided or did you propose them?","date":"2012-04-27T14:11:42.427Z","type":"message"}
{"nick":"creationix","message":"great idea btw","date":"2012-04-27T14:11:48.592Z","type":"message"}
{"nick":"isaacs","date":"2012-04-27T14:13:44.422Z","type":"join"}
{"nick":"creationix","message":"morning isaacs :)","date":"2012-04-27T14:15:45.299Z","type":"message"}
{"nick":"isaacs","message":"g'mroning","date":"2012-04-27T14:25:36.661Z","type":"message"}
{"nick":"piscisaureus_","message":"I don't really think anyone other than bnoordhuis really qualifies for the exterminator award","date":"2012-04-27T14:30:01.106Z","type":"message"}
{"nick":"piscisaureus_","message":"(not to disregard tootallnate or indutny of course)","date":"2012-04-27T14:30:38.515Z","type":"message"}
{"nick":"mmalecki[ft]","message":"is it for the node core or whole community?","date":"2012-04-27T14:31:05.884Z","type":"message"}
{"nick":"piscisaureus_","message":"that's also an interesting question of course","date":"2012-04-27T14:31:22.714Z","type":"message"}
{"nick":"mmalecki[ft]","message":"because if it's for the core, I'm very surprised","date":"2012-04-27T14:31:29.394Z","type":"message"}
{"nick":"isaacs","message":"mmalecki[ft]: it's gotta be for the whole community","date":"2012-04-27T14:32:02.111Z","type":"message"}
{"nick":"isaacs","message":"also, how can nodejitsu (the company) be up for an award...","date":"2012-04-27T14:32:18.371Z","type":"message"}
{"nick":"isaacs","message":"should be a diff category or something","date":"2012-04-27T14:32:26.052Z","type":"message"}
{"nick":"isaacs","message":"though, the fact that it takes a whole company to rival marco or me is pretty badass, i must say ;)","date":"2012-04-27T14:32:47.640Z","type":"message"}
{"nick":"mmalecki[ft]","message":"isaacs: I mean, the company thing is kinda sane for me","date":"2012-04-27T14:33:20.503Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: so, uid/gid in spawn for 0.6.","date":"2012-04-27T14:33:20.708Z","type":"message"}
{"nick":"isaacs","message":"mmalecki[ft]: should've been something like, \"company that uses node the awesomest\" or something, and have nodejitsu, voxer, and joyent there or somethign","date":"2012-04-27T14:33:51.006Z","type":"message"}
{"nick":"isaacs","message":"maybe msft or others","date":"2012-04-27T14:33:59.231Z","type":"message"}
{"nick":"isaacs","message":"cloud9","date":"2012-04-27T14:34:05.216Z","type":"message"}
{"nick":"isaacs","message":"et.","date":"2012-04-27T14:34:06.493Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: you'd said we could do a spawn2 for 0.6?","date":"2012-04-27T14:34:22.628Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I am already working on it.","date":"2012-04-27T14:34:39.599Z","type":"message"}
{"nick":"bnoordhuis","message":"https://github.com/bnoordhuis/node/compare/issue3180 <- handle walker (more or less). opinions?","date":"2012-04-27T14:34:48.596Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: oh, awesome :)","date":"2012-04-27T14:35:09.878Z","type":"message"}
{"nick":"bnoordhuis","message":"adds a process._getActiveHandles() function that returns an array of (surprise surprise) active handles","date":"2012-04-27T14:35:19.923Z","type":"message"}
{"nick":"mmalecki[ft]","message":"isaacs: can't a company do community service?","date":"2012-04-27T14:36:09.812Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: need timers and child processes too","date":"2012-04-27T14:36:11.633Z","type":"message"}
{"nick":"bnoordhuis","message":"it's not complete btw (missing child_process) for example","date":"2012-04-27T14:36:14.647Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: hah, right","date":"2012-04-27T14:36:22.709Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: we need to call out igor's queue in the license, i think","date":"2012-04-27T14:36:23.096Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: sure","date":"2012-04-27T14:36:34.237Z","type":"message"}
{"nick":"piscisaureus_","message":"yes, but that's fine","date":"2012-04-27T14:36:35.622Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: also, this is only for handles, yes?  do you think it's worthwhile to have req's exposed in this way as well?","date":"2012-04-27T14:37:42.492Z","type":"message"}
{"nick":"isaacs","message":"ie, fs.open('file that the os decides should take 3 hours to open', function () { why isn't my program exiting? })","date":"2012-04-27T14:38:14.844Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: yeah, i suppose that could happen. it's trivial to add","date":"2012-04-27T14:38:48.361Z","type":"message"}
{"nick":"bnoordhuis","message":"how do people feel about the general approach?","date":"2012-04-27T14:39:16.910Z","type":"message"}
{"nick":"isaacs","message":"i think it's nice.  very simple.","date":"2012-04-27T14:39:22.935Z","type":"message"}
{"nick":"tjfontaine","message":"+1","date":"2012-04-27T14:39:32.138Z","type":"message"}
{"nick":"bnoordhuis","message":"cool. piscisaureus_?","date":"2012-04-27T14:40:50.570Z","type":"message"}
{"nick":"isaacs","message":"igor's code is always so beautiful.","date":"2012-04-27T14:40:59.627Z","type":"message"}
{"nick":"isaacs","message":"we should just port nginx as a module.","date":"2012-04-27T14:41:08.530Z","type":"message"}
{"nick":"isaacs","message":";P","date":"2012-04-27T14:41:10.909Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: +1","date":"2012-04-27T14:41:31.586Z","type":"message"}
{"nick":"isaacs","message":"not for any purpose, i mean, we already have good http and stuff.  just to look at it.","date":"2012-04-27T14:41:32.747Z","type":"message"}
{"nick":"piscisaureus_","message":"not sure about reqs tho - but whatever","date":"2012-04-27T14:41:39.753Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: it gets important if you end up in pathological situations where you're writing to a fs.writeStream, and not listening to the return to do backpressure.","date":"2012-04-27T14:42:10.189Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: yeah, ok","date":"2012-04-27T14:42:20.566Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: then you have lots of writes backed up, and when you think you should exit, it takes a second or more.","date":"2012-04-27T14:42:25.887Z","type":"message"}
{"nick":"piscisaureus_","message":"if it's not too costly","date":"2012-04-27T14:42:33.646Z","type":"message"}
{"nick":"isaacs","message":"which isn't a big deal, unless you're expecting to restart a server or something very soon.","date":"2012-04-27T14:42:35.247Z","type":"message"}
{"nick":"bnoordhuis","message":"two pointers, 16 bytes on x64","date":"2012-04-27T14:42:47.001Z","type":"message"}
{"nick":"isaacs","message":"but yeah, reqs are less important.","date":"2012-04-27T14:42:49.052Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: what do you think of the uid/gid patch on master?","date":"2012-04-27T14:44:48.499Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: shall i squash and push?","date":"2012-04-27T14:44:53.627Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: or are you doing stuff with it on v0.6 and gonna merge in?","date":"2012-04-27T14:45:09.664Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I think I prefer to merge from 0.6","date":"2012-04-27T14:45:29.766Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: also, I like it to be flags","date":"2012-04-27T14:45:35.912Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: just hold on a sec...","date":"2012-04-27T14:46:18.286Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: kewl","date":"2012-04-27T14:46:45.352Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307v0.6\u000f * r\u000276de7c0\u000f \u000310\u000f/ (doc/index.html doc/pipe.css)\u0002:\u000f Add customary 'fork me on github' banner to website - http://git.io/iDHNIw","date":"2012-04-27T14:59:24.423Z","type":"message"}
{"nick":"piscisaureus_","message":"can we somehow test uid/gid ?","date":"2012-04-27T15:02:47.848Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: not really","date":"2012-04-27T15:04:50.509Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: only as root","date":"2012-04-27T15:05:05.219Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: maywe we can assert that at least something is attempted","date":"2012-04-27T15:05:20.589Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: you can test that it'll throw if you're not root :)","date":"2012-04-27T15:05:25.223Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I think that'll work in node","date":"2012-04-27T15:05:26.314Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: making it throw is not easy","date":"2012-04-27T15:05:49.388Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I'd like to do that at some point - but at the moment we write errors to stderr","date":"2012-04-27T15:06:04.713Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: except on windows btw","date":"2012-04-27T15:06:11.771Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: well, the setuid should return non-zero if you're not root","date":"2012-04-27T15:06:16.511Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I know, but this happens in the forked process","date":"2012-04-27T15:06:26.573Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-04-27T15:06:30.876Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: you could test setuid(getuid()) but that's kind of pointless","date":"2012-04-27T15:06:31.839Z","type":"message"}
{"nick":"isaacs","message":"but then the forked process returns -127","date":"2012-04-27T15:06:41.709Z","type":"message"}
{"nick":"piscisaureus_","message":"true","date":"2012-04-27T15:06:45.706Z","type":"message"}
{"nick":"tjfontaine","message":"root or CAP_SETUID on linux","date":"2012-04-27T15:06:46.460Z","type":"message"}
{"nick":"piscisaureus_","message":"and you have no clue why","date":"2012-04-27T15:06:51.811Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: so, it's easy to test in node","date":"2012-04-27T15:06:52.476Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: this is fixable","date":"2012-04-27T15:06:55.207Z","type":"message"}
{"nick":"piscisaureus_","message":"but it's out of scope for this quick setuid/setgid fix","date":"2012-04-27T15:07:14.199Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis:","date":"2012-04-27T15:07:25.841Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: we could make it exit with different error codes for each failure, but i thought -127 is sort of a customary exit for \"the child process failed to run properly\"","date":"2012-04-27T15:07:27.070Z","type":"message"}
{"nick":"tjfontaine","message":"it should return EPERM isn't that mapped?","date":"2012-04-27T15:07:37.635Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: well, we can just make the main process wait for the fork","date":"2012-04-27T15:07:40.619Z","type":"message"}
{"nick":"bnoordhuis","message":"EPERM is mapped","date":"2012-04-27T15:07:49.356Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: actually we already do I think - there just needs to be some plumbing to report what actually went wrong","date":"2012-04-27T15:07:59.661Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: the child proc gets an EPERM from setgid/setuid, but the parent just gets -127 from the fork()","date":"2012-04-27T15:08:05.119Z","type":"message"}
{"nick":"tjfontaine","message":"oh of course","date":"2012-04-27T15:08:19.225Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: we expose the process exit code if it actually was run, but chdir/setuid/setgid/env etc all return -127 when they fail","date":"2012-04-27T15:08:41.327Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis:","date":"2012-04-27T15:08:52.766Z","type":"message"}
{"nick":"piscisaureus_","message":"uv.a(core.o): In function `uv_close':","date":"2012-04-27T15:08:52.967Z","type":"message"}
{"nick":"piscisaureus_","message":"/home/bert/libuv/src/unix/core.c:66: multiple definition of `uv_close'","date":"2012-04-27T15:08:52.967Z","type":"message"}
{"nick":"piscisaureus_","message":"uv.a(uv-unix.o):/home/bert/libuv/uv-unix.c:129: first defined here","date":"2012-04-27T15:08:52.967Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: huh","date":"2012-04-27T15:08:56.605Z","type":"message"}
{"nick":"isaacs","message":"i mean, i'm not strongly in favor of keeping that, necessarily","date":"2012-04-27T15:09:12.527Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: how/where/what?","date":"2012-04-27T15:09:28.017Z","type":"message"}
{"nick":"isaacs","message":"it's just the way it's alwasy been in node","date":"2012-04-27T15:09:29.523Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: build the 0.6 branch of libuv on linux","date":"2012-04-27T15:09:42.762Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: yeah. Can't we change that","date":"2012-04-27T15:09:55.525Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I don't like it","date":"2012-04-27T15:10:02.748Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: we can also make it fail loudly when you try to spawn an nonexisting binary (e.g. execve fails)","date":"2012-04-27T15:10:25.012Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: wfm","date":"2012-04-27T15:10:28.258Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I think that the return -127 was just a stopgap solution","date":"2012-04-27T15:10:42.386Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: btw, libuv/uv-unix.c?","date":"2012-04-27T15:11:02.813Z","type":"message"}
{"nick":"bnoordhuis","message":"i think you should do a `git clean -dfx` :)","date":"2012-04-27T15:11:18.348Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: weird","date":"2012-04-27T15:11:29.796Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: this is a fresh vm and a fresh checkout :-)","date":"2012-04-27T15:11:39.967Z","type":"message"}
{"nick":"bnoordhuis","message":"weird indeed. uv-unix.c is ancient history","date":"2012-04-27T15:11:58.998Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: can we just pick other codes to use?","date":"2012-04-27T15:12:39.434Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: i mean, somethign that isn't already mapped to something else","date":"2012-04-27T15:12:50.958Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I don't understand your question","date":"2012-04-27T15:13:12.156Z","type":"message"}
{"nick":"isaacs","message":"i mean, instead of failing with -127 on all of them, fail with -127 on one, -128 on another, etc.","date":"2012-04-27T15:13:40.540Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: well what we could do is slightly more complex","date":"2012-04-27T15:14:12.810Z","type":"message"}
{"nick":"isaacs","message":"the tricky thing will be if there's some system where like ECONNABORTED is -129, then you'll get really confused about what kinds of connections your child proc was trying to make :)","date":"2012-04-27T15:14:13.715Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: well the exit status of a process != an errno","date":"2012-04-27T15:14:36.180Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: it is just the number that the process wishes to return","date":"2012-04-27T15:14:45.358Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2012-04-27T15:14:51.142Z","type":"message"}
{"nick":"isaacs","message":"so the proc could lie about it anyway","date":"2012-04-27T15:15:02.277Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: so what we can do is create a pipe, set one end to CLOEXEC and try to spawn","date":"2012-04-27T15:15:12.433Z","type":"message"}
{"nick":"piscisaureus_","message":"if an error happens we write it to the pipe","date":"2012-04-27T15:15:20.079Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: so the master process reads the pipe","date":"2012-04-27T15:15:30.180Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: if nothing appears on it, the spawn worked","date":"2012-04-27T15:15:42.334Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: if something does appear, that was the error","date":"2012-04-27T15:15:56.837Z","type":"message"}
{"nick":"piscisaureus_","message":"easy","date":"2012-04-27T15:15:58.562Z","type":"message"}
{"nick":"piscisaureus_","message":"(actually both ends should be cloexec)","date":"2012-04-27T15:16:18.004Z","type":"message"}
{"nick":"erickt","date":"2012-04-27T15:16:26.597Z","type":"join"}
{"nick":"isaacs","message":"k","date":"2012-04-27T15:16:52.835Z","type":"message"}
{"nick":"piscisaureus_","message":"but nevermind - focus","date":"2012-04-27T15:17:05.111Z","type":"message"}
{"nick":"isaacs","message":"yes.","date":"2012-04-27T15:17:07.583Z","type":"message"}
{"nick":"isaacs","message":"i wanna drop v0.6.16 today","date":"2012-04-27T15:17:12.488Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: almost there","date":"2012-04-27T15:17:21.821Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis:","date":"2012-04-27T15:17:24.921Z","type":"message"}
{"nick":"isaacs","message":"awesome :)","date":"2012-04-27T15:17:25.128Z","type":"message"}
{"nick":"piscisaureus_","message":"test/test-get-memory.c:29:3: warning: format ‘%llu’ expects argument of type ‘long long unsigned int’, but argument 2 has type ‘uint64_t’ [-Wformat]","date":"2012-04-27T15:17:26.898Z","type":"message"}
{"nick":"piscisaureus_","message":"test/test-get-memory.c:29:3: warning: format ‘%llu’ expects argument of type ‘long long unsigned int’, but argument 3 has type ‘uint64_t’ [-Wformat]","date":"2012-04-27T15:17:27.103Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- this keeps popping up tho","date":"2012-04-27T15:17:33.449Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah... printing large integers is one of the bigger fails in the c spec","date":"2012-04-27T15:20:01.110Z","type":"message"}
{"nick":"bnoordhuis","message":"biab, dinner","date":"2012-04-27T15:20:24.267Z","type":"message"}
{"nick":"AndreasMadsen","date":"2012-04-27T15:24:27.945Z","type":"join"}
{"nick":"creationix","reason":"Quit: ZNC - http://znc.in","date":"2012-04-27T15:25:59.683Z","type":"quit"}
{"nick":"piscisaureus_","message":"[% 100|+ 106|-  12]: Done.","date":"2012-04-27T15:41:13.827Z","type":"message"}
{"nick":"piscisaureus_","message":"make: *** [test] Error 12","date":"2012-04-27T15:41:14.030Z","type":"message"}
{"nick":"piscisaureus_","message":"meh, libuv on unix","date":"2012-04-27T15:41:18.092Z","type":"message"}
{"nick":"piscisaureus_","message":"(v0.6)","date":"2012-04-27T15:41:21.622Z","type":"message"}
{"nick":"avalanche123|h","reason":"Ping timeout: 245 seconds","date":"2012-04-27T15:43:33.041Z","type":"quit"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307reviewme\u000f * r\u0002c42ba10\u000f \u000310\u000f/ (6 files in 5 dirs)\u0002:\u000f Temporary API to support spawn with uid and gid options (+7 more commits...) - http://git.io/AkOFIQ","date":"2012-04-27T15:45:11.196Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- isaacs : review?","date":"2012-04-27T15:45:16.574Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: btw - if you add a test to libuv you have to add it to test-list.h","date":"2012-04-27T15:46:07.669Z","type":"message"}
{"nick":"piscisaureus_","message":"or it will never be executed","date":"2012-04-27T15:46:12.084Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-27T15:47:03.883Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#225 (reviewme - c42ba10 : Bert Belder): The build is still failing.","date":"2012-04-27T15:47:04.088Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/f9fcaf5...c42ba10","date":"2012-04-27T15:47:04.088Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1191357","date":"2012-04-27T15:47:04.088Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-27T15:47:04.088Z","type":"part"}
{"nick":"theCole","date":"2012-04-27T15:47:31.119Z","type":"join"}
{"nick":"isaacs","message":"piscisaureus_: good to know.  i was wondering why it was passing when i wasn't root ;)","date":"2012-04-27T15:48:05.413Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: you can run an individual test with \"run-tests <test-name>\"","date":"2012-04-27T15:48:37.212Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: if the test isn't registered it wil tell you","date":"2012-04-27T15:48:45.404Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I also think that #ifdef setuid doesn't work","date":"2012-04-27T15:50:11.161Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: because that's not a preprocessor symbol","date":"2012-04-27T15:50:18.973Z","type":"message"}
{"nick":"isaacs","message":"k","date":"2012-04-27T15:52:53.279Z","type":"message"}
{"nick":"isaacs","message":"i like the flags approach.  lgtm.","date":"2012-04-27T15:53:47.359Z","type":"message"}
