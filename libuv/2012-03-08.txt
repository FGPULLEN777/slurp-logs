{"nick":"pfox___","date":"2012-03-08T00:04:03.090Z","type":"join"}
{"nick":"piscisaureus_","message":"ok, windows is *really* retarded :-( :-(","date":"2012-03-08T00:10:02.220Z","type":"message"}
{"nick":"elijah-mbp","date":"2012-03-08T00:10:32.996Z","type":"join"}
{"nick":"tjfontaine","message":"you're just now coming to this conclusion? :)","date":"2012-03-08T00:11:04.158Z","type":"message"}
{"nick":"`3rdEden","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-03-08T00:17:49.283Z","type":"quit"}
{"nick":"piscisaureus_","message":"igorzi_, isaacs: yt?","date":"2012-03-08T00:18:47.010Z","type":"message"}
{"nick":"mmalecki","new_nick":"mmalecki[zzz]","date":"2012-03-08T00:26:22.166Z","type":"nick"}
{"nick":"piscisaureus_","message":"igorzi_: isaacs: https://gist.github.com/1997507","date":"2012-03-08T00:28:17.999Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: reviewing","date":"2012-03-08T00:28:21.415Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: yeah, review the patch first, then look at the other gist","date":"2012-03-08T00:28:43.373Z","type":"message"}
{"nick":"pfox___","reason":"Ping timeout: 272 seconds","date":"2012-03-08T00:33:14.238Z","type":"quit"}
{"nick":"igorzi_","message":"piscisaureus_: lgtm","date":"2012-03-08T00:33:35.165Z","type":"message"}
{"nick":"piscisaureus_","message":"kewl","date":"2012-03-08T00:33:40.690Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: so should it be statting test/file9 or test2/file9 ?","date":"2012-03-08T00:36:17.832Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-03-08T00:36:28.790Z","type":"quit"}
{"nick":"piscisaureus_","message":"hmm","date":"2012-03-08T00:36:34.327Z","type":"message"}
{"nick":"piscisaureus_","message":"test2/file9 I think","date":"2012-03-08T00:36:38.457Z","type":"message"}
{"nick":"isaacs","message":"  // Stat test2/file9. This often fails, even if readdirSync reports the file","date":"2012-03-08T00:36:40.197Z","type":"message"}
{"nick":"isaacs","message":"  // is there!","date":"2012-03-08T00:36:40.411Z","type":"message"}
{"nick":"isaacs","message":"  console.log(fs.statSync(\"test/file9\"));","date":"2012-03-08T00:36:40.411Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: should that be stat'ing test2/file9?","date":"2012-03-08T00:36:49.258Z","type":"message"}
{"nick":"isaacs","message":"or test/file9?","date":"2012-03-08T00:36:53.269Z","type":"message"}
{"nick":"piscisaureus_","message":"meh","date":"2012-03-08T00:37:27.308Z","type":"message"}
{"nick":"piscisaureus_","message":"I made a typo","date":"2012-03-08T00:37:30.065Z","type":"message"}
{"nick":"piscisaureus_","message":"ghe","date":"2012-03-08T00:37:31.527Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: still, that is exactly what is happening for me","date":"2012-03-08T00:39:14.262Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: although that test does not reproduce it","date":"2012-03-08T00:39:21.709Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: so rename + stat, and stat is failing?","date":"2012-03-08T00:45:03.042Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: so what I am seeing in npm is that a folder is renamed, but after that stat or open that should be in the new folder fails","date":"2012-03-08T00:45:44.538Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: readdirSync reports the file is there though","date":"2012-03-08T00:45:57.597Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: and if I wait for a couple of ms before trying to stat it works fine.","date":"2012-03-08T00:46:14.387Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: and that only happens with the network share?","date":"2012-03-08T00:46:35.249Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: that sounds a lot like what we were seeing earlier with antivirus or indexing service locking the file","date":"2012-03-08T00:47:14.083Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: *shrug* looks like it","date":"2012-03-08T00:47:14.522Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: yeah but that would not generate ENOENT, plus I have no antivirus on my system","date":"2012-03-08T00:47:36.434Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: right, that shouldn't be ENOENT.. do you have indexing service running?","date":"2012-03-08T00:48:02.265Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: yes, but that, too, should not be indexing network shares","date":"2012-03-08T00:48:19.596Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: maybe something on the remote machine (where the share is located) is locking the file for a few ms","date":"2012-03-08T00:48:53.875Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: i'll try to run procmon on the remote machine","date":"2012-03-08T00:49:19.243Z","type":"message"}
{"nick":"igorzi_","message":"4:50:33.4558731 PM\tMsMpEng.exe\t6436\tCreateFileMapping\tC:\\public\\node_modules\\___mkdirp.npm\\package\\.npmignore\tFILE LOCKED WITH WRITERS\tSyncType: SyncTypeCreateSection, PageProtection:  ","date":"2012-03-08T00:53:37.698Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: MsMpEng.exe --^","date":"2012-03-08T00:53:50.961Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: right. But why does it fail for package.json then?","date":"2012-03-08T01:00:57.851Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: cuz that is what it does for me","date":"2012-03-08T01:01:04.964Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: can you try to run procmon on the machine where you have the share>?","date":"2012-03-08T01:02:18.194Z","type":"message"}
{"nick":"piscisaureus_","message":"sure","date":"2012-03-08T01:02:55.768Z","type":"message"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2012-03-08T01:20:47.254Z","type":"quit"}
{"nick":"piscisaureus_","message":"igorzi_: I think I got it now :-)","date":"2012-03-08T01:24:37.365Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: no shit.","date":"2012-03-08T01:24:40.542Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: ok.. what is it?","date":"2012-03-08T01:24:55.316Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: I'll post a gist shortly","date":"2012-03-08T01:25:05.028Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: doing a final review before i make a fool of myself again","date":"2012-03-08T01:25:18.621Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: are you not seeing something locking down the file on the remote machine?","date":"2012-03-08T01:26:09.829Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: no I think it is a caching problem","date":"2012-03-08T01:26:24.252Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: npm stats node_modules/express/package.json first and then it is not there","date":"2012-03-08T01:26:43.169Z","type":"message"}
{"nick":"piscisaureus_","message":"then it unpacks it to another folder and renames that folder to node_modules/express","date":"2012-03-08T01:27:01.208Z","type":"message"}
{"nick":"piscisaureus_","message":"so package.json now exists","date":"2012-03-08T01:27:06.792Z","type":"message"}
{"nick":"piscisaureus_","message":"but windows says not","date":"2012-03-08T01:27:09.275Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: you have a gist that reproduces it?","date":"2012-03-08T01:27:40.053Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: https://gist.github.com/1997507","date":"2012-03-08T01:28:15.583Z","type":"message"}
{"nick":"AvianFlu","date":"2012-03-08T01:29:37.914Z","type":"join"}
{"nick":"abraxas","date":"2012-03-08T01:29:40.687Z","type":"join"}
{"nick":"igorzi_","message":"piscisaureus_: repros for me if i run with the network share","date":"2012-03-08T01:31:23.015Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: exactly","date":"2012-03-08T01:32:07.454Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: so what do you think we should do about it?","date":"2012-03-08T01:34:42.735Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: i'm still of the opinion that something is locking down the file on the machine where the share is located","date":"2012-03-08T01:35:22.909Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: alright.","date":"2012-03-08T01:35:46.640Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: btw, i can't reproduce if the share is on the same machine","date":"2012-03-08T01:36:04.113Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: but don't you think it is funny that removing the first statSync in the test changes that?","date":"2012-03-08T01:36:15.333Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: ohh i missed that.. yeah it is strange","date":"2012-03-08T01:38:40.680Z","type":"message"}
{"nick":"pietern","reason":"Quit: pietern","date":"2012-03-08T01:40:48.504Z","type":"quit"}
{"nick":"igorzi_","message":"piscisaureus_: i just confirmed that it's not MsMpEng.exe","date":"2012-03-08T01:48:07.311Z","type":"message"}
{"nick":"piscisaureus_","message":"cool","date":"2012-03-08T01:48:21.597Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-03-08T01:48:43.877Z","type":"quit"}
{"nick":"igorzi_","message":"piscisaureus_: btw, it repros even if i do a wait before stat","date":"2012-03-08T01:51:52.058Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: for me, it doesn't reproduce if I run with procmon","date":"2012-03-08T01:53:16.539Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: nm.. if i increase the wait to 5 sec - it goes away","date":"2012-03-08T01:53:28.166Z","type":"message"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-03-08T01:53:31.788Z","type":"quit"}
{"nick":"piscisaureus_","message":"5 seconds is a long time :-)","date":"2012-03-08T01:53:47.679Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: yeah.. it if i take it down to 3 seconds it still fails","date":"2012-03-08T01:55:03.015Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: i think we should try to create a repro in c against win32 api","date":"2012-03-08T01:57:35.322Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus_: gtg.. i'll be online later","date":"2012-03-08T01:57:45.675Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi_: david ebbo was going to do it in c#","date":"2012-03-08T01:58:49.036Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307v0.6\u000f * r\u0002daaccc7\u000f \u000310\u000f/ (3 files in 3 dirs)\u0002:\u000f uv: upgrade to 1ac71a31 - http://git.io/LLIbhA","date":"2012-03-08T02:02:23.114Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307v0.6\u000f * r\u00023733a85\u000f \u000310\u000f/ src/node_file.cc \u0002:\u000f Windows: include syscall in fs errors - http://git.io/rGvY6A","date":"2012-03-08T02:02:23.325Z","type":"message"}
{"nick":"mikeal","date":"2012-03-08T02:09:11.269Z","type":"join"}
{"nick":"travis-ci","date":"2012-03-08T02:10:45.332Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#568 (v0.6 - 3733a85 : Bert Belder): The build was fixed.","date":"2012-03-08T02:10:45.542Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/33f9074...3733a85","date":"2012-03-08T02:10:45.542Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/818525","date":"2012-03-08T02:10:45.542Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-08T02:10:45.542Z","type":"part"}
{"nick":"isaacs","message":"piscisaureus_: we're gonna have to have a 0.6.13, aren't we?","date":"2012-03-08T02:14:02.420Z","type":"message"}
{"nick":"isaacs","action":"o\\","date":"2012-03-08T02:14:06.462Z","type":"action"}
{"nick":"isaacs","action":"o\\","date":"2012-03-08T02:14:09.470Z","type":"action"}
{"nick":"isaacs","action":"ToT","date":"2012-03-08T02:14:15.106Z","type":"action"}
{"nick":"piscisaureus_","message":"isaacs: yup, at some point. let's fix the unc bug.","date":"2012-03-08T02:16:07.107Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002daaccc7\u000f \u000310\u000f/ (3 files in 3 dirs)\u0002:\u000f uv: upgrade to 1ac71a31 - http://git.io/LLIbhA","date":"2012-03-08T02:19:09.683Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00023733a85\u000f \u000310\u000f/ src/node_file.cc \u0002:\u000f Windows: include syscall in fs errors - http://git.io/rGvY6A","date":"2012-03-08T02:19:10.970Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u000231ad1d2\u000f \u000310\u000f/ (10 files in 7 dirs)\u0002:\u000f Merge branch 'v0.6' - http://git.io/b9gG8A","date":"2012-03-08T02:19:12.530Z","type":"message"}
{"nick":"benvie","date":"2012-03-08T02:23:07.331Z","type":"quit"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00022ef5798\u000f \u000310\u000f/ (include/uv.h src/unix/error.c src/win/error.c src/win/util.c)\u0002:\u000f ","date":"2012-03-08T02:23:40.576Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f Merge remote-tracking branch 'origin/v0.6'","date":"2012-03-08T02:23:41.073Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f Conflicts:","date":"2012-03-08T02:23:41.073Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f  src/unix/core.c - http://git.io/-_PJ9A","date":"2012-03-08T02:23:41.073Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00021ac71a3\u000f \u000310\u000f/ (include/uv.h src/unix/error.c src/win/error.c)\u0002:\u000f Map EBUSY and ENOTEMPTY errors - http://git.io/IZKzCQ","date":"2012-03-08T02:23:42.316Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-08T02:25:32.903Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#121 (master - 2ef5798 : Bert Belder): The build is still failing.","date":"2012-03-08T02:25:33.114Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/d07f246...2ef5798","date":"2012-03-08T02:25:33.114Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/818585","date":"2012-03-08T02:25:33.114Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-08T02:25:33.114Z","type":"part"}
{"nick":"pietern","date":"2012-03-08T02:27:32.400Z","type":"join"}
{"nick":"brson","reason":"Quit: leaving","date":"2012-03-08T02:30:36.645Z","type":"quit"}
{"nick":"travis-ci","date":"2012-03-08T02:34:05.702Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#569 (master - 31ad1d2 : Bert Belder): The build is still failing.","date":"2012-03-08T02:34:05.917Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/5ad0140...31ad1d2","date":"2012-03-08T02:34:05.918Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/818563","date":"2012-03-08T02:34:05.918Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-08T02:34:05.918Z","type":"part"}
{"nick":"igorzi","date":"2012-03-08T02:46:35.900Z","type":"join"}
{"nick":"igorzi","message":"isaacs: i think at some point you mentioned that you want to get rid of this dir renaming in npm, and just untar everything into the final destination","date":"2012-03-08T02:47:18.542Z","type":"message"}
{"nick":"igorzi","message":"isaacs: are you still planning to do that?","date":"2012-03-08T02:47:32.653Z","type":"message"}
{"nick":"isaacs","message":"igorzi: sure.","date":"2012-03-08T02:47:36.724Z","type":"message"}
{"nick":"isaacs","message":"but bigger fish to fry","date":"2012-03-08T02:47:40.494Z","type":"message"}
{"nick":"isaacs","message":"unless this is breaking something badly","date":"2012-03-08T02:47:46.910Z","type":"message"}
{"nick":"igorzi","message":"isaacs: cause that would probably also resolve this issue","date":"2012-03-08T02:47:57.106Z","type":"message"}
{"nick":"isaacs","message":"i mean, node should be able to rename directories, though","date":"2012-03-08T02:48:01.154Z","type":"message"}
{"nick":"isaacs","message":"and that should actually work","date":"2012-03-08T02:48:05.589Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: I don't know if you saw the npm issue, but David was able to reproduce in c#","date":"2012-03-08T02:48:28.230Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: so he is going to talk to the OS guys now","date":"2012-03-08T02:48:39.748Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: yeah, i know","date":"2012-03-08T02:49:37.675Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: I don't mean to be rude, but microsoft is doing this super edgy stuff and it fails due to (apparently) a windows bug. Is it unreasonable to expect that msft fixes it?","date":"2012-03-08T02:50:14.570Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: it's not unreasonable to expect it to be fixed if it is a bug.. i'm not saying that npm should work around windows bugs","date":"2012-03-08T02:51:00.523Z","type":"message"}
{"nick":"tjfontaine","message":"how far back do you expect them to fix it? and how likely do you think lusers are to apply the fix?","date":"2012-03-08T02:51:01.547Z","type":"message"}
{"nick":"piscisaureus_","message":"well, it is not something that many people will run into","date":"2012-03-08T02:51:29.741Z","type":"message"}
{"nick":"piscisaureus_","message":"If there is a reasonable workaround we will apply it probably.","date":"2012-03-08T02:51:54.384Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: i'm saying that we had another issue with a/v locking down the file, for which we had to add retry logic.. that wouldn't be needed if the files were downloaded directly into their final location","date":"2012-03-08T02:52:19.970Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah - that one is annoying","date":"2012-03-08T02:53:00.189Z","type":"message"}
{"nick":"piscisaureus_","message":"This rename stuff is probably unnecessary and it should be removed.","date":"2012-03-08T02:53:30.916Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: I think MoveFileEx has some flag that makes sure it blocks until the change is committed to disk","date":"2012-03-08T02:55:59.077Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: *_WRITE_THROUGH iirc","date":"2012-03-08T02:56:13.304Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: maybe that'll fix it","date":"2012-03-08T02:56:18.161Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: hmm, i wonder if that's honored for network writes","date":"2012-03-08T03:02:36.683Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: if this is the case.. it's also possible that we could run into the same issue with CreateFile+WriteFile (not just MoveFileEx)?","date":"2012-03-08T03:03:47.061Z","type":"message"}
{"nick":"igorzi_","reason":"Ping timeout: 245 seconds","date":"2012-03-08T03:04:38.081Z","type":"quit"}
{"nick":"piscisaureus_","message":"igorzi: well I think that the result of the first (failing) NtCreateFile call is cached somehow, and the cache is not properly flushed when a directory is renamed so the file begins to exist.","date":"2012-03-08T03:06:17.303Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: a WriteFile call would imply we open/create the file first, and I assume that would properly flush the cache","date":"2012-03-08T03:07:03.988Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: we should first try this","date":"2012-03-08T03:07:33.209Z","type":"message"}
{"nick":"piscisaureus_","message":"stat('a')","date":"2012-03-08T03:07:33.420Z","type":"message"}
{"nick":"piscisaureus_","message":"rename('b', 'a')","date":"2012-03-08T03:07:33.421Z","type":"message"}
{"nick":"piscisaureus_","message":"stat('a')","date":"2012-03-08T03:07:33.421Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: CreateFile also has FILE_FLAG_WRITE_THROUGH","date":"2012-03-08T03:07:45.805Z","type":"message"}
{"nick":"piscisaureus_","message":"true","date":"2012-03-08T03:08:17.124Z","type":"message"}
{"nick":"txdv","date":"2012-03-08T03:39:43.818Z","type":"join"}
{"nick":"isaacs","message":"igorzi piscisaureus_: oh, so apparently that's broken in .NET/C# as well?","date":"2012-03-08T03:42:17.823Z","type":"message"}
{"nick":"isaacs","message":"i guess i better just work around it in npm, then","date":"2012-03-08T03:42:22.778Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-03-08T03:43:49.069Z","type":"quit"}
{"nick":"isaacs","message":"either add some flexible timeout buffering, or just do like I ought to do, and unpack right into place.","date":"2012-03-08T03:44:05.698Z","type":"message"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-03-08T03:56:35.146Z","type":"quit"}
{"nick":"mikeal","date":"2012-03-08T04:03:05.993Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-03-08T04:12:07.534Z","type":"quit"}
{"nick":"benvie","date":"2012-03-08T04:19:36.080Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-03-08T04:24:05.361Z","type":"quit"}
{"nick":"igorzi","message":"piscisaureus_: MOVEFILE_WRITE_THROUGH doesn't fix it","date":"2012-03-08T04:35:48.393Z","type":"message"}
{"nick":"avsej","reason":"Ping timeout: 244 seconds","date":"2012-03-08T05:51:24.385Z","type":"quit"}
{"nick":"avsej","date":"2012-03-08T05:52:32.001Z","type":"join"}
{"nick":"piscisaureus__","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-03-08T05:57:45.333Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-03-08T05:58:51.056Z","type":"quit"}
{"nick":"indutny_sleeping","new_nick":"indutny","date":"2012-03-08T06:05:26.585Z","type":"nick"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-03-08T06:10:56.415Z","type":"quit"}
{"nick":"dshaw_","date":"2012-03-08T06:11:11.227Z","type":"join"}
{"nick":"toothr","reason":"Read error: Connection reset by peer","date":"2012-03-08T06:28:30.510Z","type":"quit"}
{"nick":"toothr","date":"2012-03-08T06:29:15.095Z","type":"join"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-03-08T06:36:31.316Z","type":"quit"}
{"nick":"hij1nx","date":"2012-03-08T06:44:17.791Z","type":"join"}
{"nick":"kuebk","date":"2012-03-08T07:48:59.680Z","type":"join"}
{"nick":"stephank","reason":"Quit: *Poof!*","date":"2012-03-08T07:54:18.662Z","type":"quit"}
{"nick":"paddybyers","date":"2012-03-08T08:00:15.827Z","type":"join"}
{"nick":"rendar","date":"2012-03-08T08:04:55.911Z","type":"join"}
{"nick":"txdv_","date":"2012-03-08T08:37:12.792Z","type":"join"}
{"nick":"txdv","reason":"Ping timeout: 252 seconds","date":"2012-03-08T08:41:15.792Z","type":"quit"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-03-08T08:57:07.247Z","type":"quit"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-03-08T08:58:36.757Z","type":"quit"}
{"nick":"mikeal","date":"2012-03-08T09:00:16.254Z","type":"join"}
{"nick":"indutny","new_nick":"indutny_away","date":"2012-03-08T09:09:44.156Z","type":"nick"}
{"nick":"paddybyers","date":"2012-03-08T09:31:33.830Z","type":"join"}
{"nick":"benvie","date":"2012-03-08T09:31:43.324Z","type":"quit"}
{"nick":"benvie","date":"2012-03-08T09:34:28.098Z","type":"join"}
{"nick":"benvie","reason":"Client Quit","date":"2012-03-08T09:37:54.681Z","type":"quit"}
{"nick":"benvie","date":"2012-03-08T09:46:17.948Z","type":"join"}
{"nick":"igorzi","message":"piscisaureus_: hey, i tried using the old stat implementation (the one that uses FindFirstFileExW), and the problem doesn't happen","date":"2012-03-08T09:58:42.515Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: it only happens with CreateFile when it's called twice with OPEN_EXISTING (1st when the file doesn't exist and 2nd when it exists)","date":"2012-03-08T10:03:17.714Z","type":"message"}
{"nick":"rendar","message":"igorzi: why FindFirstFileExW and not FindFirstFileExA ?","date":"2012-03-08T10:03:51.187Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: if the 2nd CreateFile is called with OPEN_ALWAYS then the problem doesn't happen","date":"2012-03-08T10:04:13.702Z","type":"message"}
{"nick":"igorzi","message":"rendar: cause we're dealing with utf16 strings","date":"2012-03-08T10:04:28.853Z","type":"message"}
{"nick":"rendar","message":"igorzi: oh, i tought all libuv worked with utf8","date":"2012-03-08T10:04:44.538Z","type":"message"}
{"nick":"igorzi","message":"rendar: the uv api takes utf8, but win32 either takes ascii or utf16, so we convert to utf16","date":"2012-03-08T10:05:28.521Z","type":"message"}
{"nick":"rendar","message":"got it","date":"2012-03-08T10:06:16.404Z","type":"message"}
{"nick":"rendar","message":"igorzi: speaking about win32 stuff, the other day i've noticed a possible bug, but i don't know if it is, in libuv/src/win/fs.c there is fs__read (and fs__write as well) which allocate an OVERLAPPED structure in the stack, according to msdn it is wrong","date":"2012-03-08T10:07:53.064Z","type":"message"}
{"nick":"igorzi","message":"rednar: that's fine because the file is not opened with FILE_FLAG_OVERLAPPED","date":"2012-03-08T10:11:08.045Z","type":"message"}
{"nick":"rendar","message":"oh i see","date":"2012-03-08T10:11:19.839Z","type":"message"}
{"nick":"rendar","message":"its always synchronous?","date":"2012-03-08T10:11:24.951Z","type":"message"}
{"nick":"igorzi","message":"rendar: yeah","date":"2012-03-08T10:11:36.134Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: damn.. it looks like this caching behavior is a feature http://technet.microsoft.com/en-us/library/ff686200(v=WS.10).aspx","date":"2012-03-08T10:12:11.732Z","type":"message"}
{"nick":"kuebk","date":"2012-03-08T10:29:46.377Z","type":"part"}
{"nick":"mikeal","reason":"Ping timeout: 276 seconds","date":"2012-03-08T10:48:18.649Z","type":"quit"}
{"nick":"indutny_away","new_nick":"indutny","date":"2012-03-08T11:25:18.665Z","type":"nick"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-03-08T11:30:07.105Z","type":"quit"}
{"nick":"abraxas","date":"2012-03-08T11:31:14.820Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 244 seconds","date":"2012-03-08T11:35:30.411Z","type":"quit"}
{"nick":"mikeal","date":"2012-03-08T12:00:53.230Z","type":"join"}
{"nick":"mmalecki[zzz]","new_nick":"mmalecki","date":"2012-03-08T12:57:02.063Z","type":"nick"}
{"nick":"piscisaureus_","date":"2012-03-08T13:16:40.418Z","type":"join"}
{"nick":"bnoordhuis","date":"2012-03-08T14:07:49.906Z","type":"join"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Frank Denis\u000f \u000307master\u000f * r\u00021c8cf61\u000f \u000310\u000f/ src/win/core.c \u0002:\u000f ","date":"2012-03-08T14:14:12.852Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f windows: initialize ares handles list","date":"2012-03-08T14:14:13.051Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f We need to initialize the ares handles linked list or else bad things can happen","date":"2012-03-08T14:14:13.051Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f when we try to perform async lookups. - http://git.io/LjbcxA","date":"2012-03-08T14:14:13.051Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: ^-- that guy","date":"2012-03-08T14:15:04.514Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: look here: https://github.com/joyent/libuv/blob/1c8cf617f9911148499f1a46ad91969d8a58a26e/src/win/core.c#L61-94","date":"2012-03-08T14:15:09.453Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: he does a one-line patch and he doesn't even bother to find a nice place for the line.","date":"2012-03-08T14:15:24.143Z","type":"message"}
{"nick":"bnoordhuis","message":"yes...","date":"2012-03-08T14:16:49.427Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: btw, have you checked `git shortlog -ns` with libuv recently?","date":"2012-03-08T14:29:18.204Z","type":"message"}
{"nick":"piscisaureus_","message":"I don't even know what that does","date":"2012-03-08T14:30:51.121Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: ++","date":"2012-03-08T14:31:00.673Z","type":"message"}
{"nick":"kohai","message":"bnoordhuis has 12 beers","date":"2012-03-08T14:31:01.578Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: try it :)","date":"2012-03-08T14:31:10.770Z","type":"message"}
{"nick":"piscisaureus_","message":"I bet it redirects to http://www.youtube.com/watch?v=dQw4w9WgXcQ","date":"2012-03-08T14:31:14.880Z","type":"message"}
{"nick":"bnoordhuis","message":"haha","date":"2012-03-08T14:31:19.924Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: btw, what's up with detached spawn?","date":"2012-03-08T14:32:12.376Z","type":"message"}
{"nick":"mmalecki","message":"you guys ever figured out why'd setsid fail?","date":"2012-03-08T14:32:21.716Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: detached spawn got reverted","date":"2012-03-08T14:32:59.139Z","type":"message"}
{"nick":"bnoordhuis","message":"haven't had time to look into why","date":"2012-03-08T14:33:05.834Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: that's why I'm asking","date":"2012-03-08T14:33:22.448Z","type":"message"}
{"nick":"mmalecki","message":"piscisaureus_: it does that: http://github-high-scores.heroku.com/joyent/libuv/high_scores/","date":"2012-03-08T14:35:07.818Z","type":"message"}
{"nick":"mmalecki","message":"also, I'm 95 commits behind indutny","date":"2012-03-08T14:35:52.056Z","type":"message"}
{"nick":"indutny","message":"hahaha","date":"2012-03-08T14:36:31.510Z","type":"message"}
{"nick":"indutny","message":"are you still watching that?","date":"2012-03-08T14:36:40.153Z","type":"message"}
{"nick":"mmalecki","message":"indutny: YES.","date":"2012-03-08T14:36:48.646Z","type":"message"}
{"nick":"indutny","message":"lul I made 134 commits","date":"2012-03-08T14:37:15.159Z","type":"message"}
{"nick":"hij1nx","date":"2012-03-08T14:50:02.813Z","type":"join"}
{"nick":"hij1nx","reason":"Client Quit","date":"2012-03-08T14:51:17.456Z","type":"quit"}
{"nick":"hij1nx","date":"2012-03-08T14:51:40.919Z","type":"join"}
{"nick":"bnoordhuis","message":"why o why does a cluster worker emit 'death' instead of 'exit'?","date":"2012-03-08T14:59:40.674Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: to make it more dramatic","date":"2012-03-08T15:00:23.602Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: also, change it?","date":"2012-03-08T15:00:33.591Z","type":"message"}
{"nick":"bnoordhuis","message":"i feel like it","date":"2012-03-08T15:01:02.241Z","type":"message"}
{"nick":"mmalecki","message":"so do it.","date":"2012-03-08T15:01:15.004Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah... first i have this bug to fix","date":"2012-03-08T15:01:40.101Z","type":"message"}
{"nick":"mmalecki","message":"we all do!","date":"2012-03-08T15:02:26.991Z","type":"message"}
{"nick":"bnoordhuis","message":"annoying, this 'death' event also doesn't give you the status code","date":"2012-03-08T15:03:15.997Z","type":"message"}
{"nick":"mmalecki","message":"fail? also, I thought .fork() would just return a child process","date":"2012-03-08T15:03:44.603Z","type":"message"}
{"nick":"bnoordhuis","message":"exitCode == null -- nuh-uh, it crashed","date":"2012-03-08T15:03:54.022Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: for API consistency, we should make it return child_process.fork, imo","date":"2012-03-08T15:06:36.654Z","type":"message"}
{"nick":"mmalecki","message":"or export ChildProcess and inherit","date":"2012-03-08T15:06:55.102Z","type":"message"}
{"nick":"bnoordhuis","message":"at least something that quacks like it","date":"2012-03-08T15:07:08.524Z","type":"message"}
{"nick":"mmalecki","message":"yeah","date":"2012-03-08T15:07:17.348Z","type":"message"}
{"nick":"mmalecki","message":"\"quacks like a fork\" would be a good name for a band","date":"2012-03-08T15:08:24.513Z","type":"message"}
{"nick":"mmalecki","message":"or quackslikeafork.tumblr.com","date":"2012-03-08T15:08:44.802Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: on unix, can you open an tty with open(\"/dev/tty0\") ?","date":"2012-03-08T15:10:18.410Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: (if stdio is redirected)","date":"2012-03-08T15:10:51.172Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: yes","date":"2012-03-08T15:12:42.920Z","type":"message"}
{"nick":"bnoordhuis","message":"/dev/tty is the current terminal","date":"2012-03-08T15:12:48.726Z","type":"message"}
{"nick":"isaacs","date":"2012-03-08T15:41:24.118Z","type":"join"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307v0.6\u000f * r\u0002743cab9\u000f \u000310\u000f/ test/runner.c \u0002:\u000f Test runner: avoid process_wait failure when the test process didn't start - http://git.io/COAMoA","date":"2012-03-08T15:46:41.316Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307v0.6\u000f * r\u0002ab18b7d\u000f \u000310\u000f/ test/test-tty.c \u0002:\u000f Make test-tty pass with redirected stdio - http://git.io/X-QiWQ","date":"2012-03-08T15:46:42.523Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307v0.6\u000f * r\u0002f43f1a7\u000f \u000310\u000f/ src/win/handle.c \u0002:\u000f ","date":"2012-03-08T15:46:44.117Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f Windows: avoid uv_guess_handle crash in when fd < 0","date":"2012-03-08T15:46:44.316Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f Happens only when using a debug version of the crt. - http://git.io/wnz1lg","date":"2012-03-08T15:46:44.316Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: can you review \u0002\u000301http://git.io/X-QiWQ\u0003?\u0002","date":"2012-03-08T15:47:16.200Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-08T15:47:26.349Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#123 (v0.6 - ab18b7d : Bert Belder): The build is still failing.","date":"2012-03-08T15:47:26.547Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/1ac71a3...ab18b7d","date":"2012-03-08T15:47:26.547Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/821998","date":"2012-03-08T15:47:26.547Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-08T15:47:26.548Z","type":"part"}
{"nick":"piscisaureus_","message":"bnoordhuis: I tentatively landed it, but the unix part needs an eye from an unix expert","date":"2012-03-08T15:47:41.611Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: a beer if you catch the error!","date":"2012-03-08T15:48:20.832Z","type":"message"}
{"nick":"piscisaureus_","message":"(there is one!)","date":"2012-03-08T15:48:27.374Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307v0.6\u000f * r\u0002eb0ef4c\u000f \u000310\u000f/ test/test-tty.c \u0002:\u000f Fix javascript-ism - http://git.io/CKB5Gg","date":"2012-03-08T15:53:16.733Z","type":"message"}
{"nick":"piscisaureus_","message":"too late","date":"2012-03-08T15:53:20.270Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: open('/dev/tty'","date":"2012-03-08T15:53:32.766Z","type":"message"}
{"nick":"bnoordhuis","message":"wut?","date":"2012-03-08T15:53:34.875Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, you fixed it","date":"2012-03-08T15:53:41.570Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-08T15:54:09.235Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#124 (v0.6 - eb0ef4c : Bert Belder): The build is still failing.","date":"2012-03-08T15:54:09.436Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/ab18b7d...eb0ef4c","date":"2012-03-08T15:54:09.436Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/822040","date":"2012-03-08T15:54:09.436Z","type":"message"}
{"nick":"travis-ci","date":"2012-03-08T15:54:09.436Z","type":"part"}
{"nick":"piscisaureus_","message":"bnoordhuis: meh.","date":"2012-03-08T15:55:25.484Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_:","date":"2012-03-08T15:55:37.931Z","type":"message"}
{"nick":"bnoordhuis","message":"../test/test-tty.c:25:16: warning: io.h: No such file or directory","date":"2012-03-08T15:55:38.828Z","type":"message"}
{"nick":"bnoordhuis","message":"../test/test-tty.c: In function ‘run_test_tty’:","date":"2012-03-08T15:55:39.028Z","type":"message"}
{"nick":"bnoordhuis","message":"../test/test-tty.c:37: error: expected expression before ‘/’ token","date":"2012-03-08T15:55:39.028Z","type":"message"}
{"nick":"bnoordhuis","message":"../test/test-tty.c:62: warning: implicit declaration of function ‘open’","date":"2012-03-08T15:55:39.028Z","type":"message"}
{"nick":"bnoordhuis","message":"../test/test-tty.c:62: error: ‘O_WRONLY’ undeclared (first use in this function)","date":"2012-03-08T15:55:39.028Z","type":"message"}
{"nick":"bnoordhuis","message":"../test/test-tty.c:62: error: (Each undeclared identifier is reported only once","date":"2012-03-08T15:55:40.747Z","type":"message"}
{"nick":"bnoordhuis","message":"../test/test-tty.c:62: error: for each function it appears in.)","date":"2012-03-08T15:55:42.863Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: what do I need to include to have open() ?","date":"2012-03-08T15:56:20.864Z","type":"message"}
{"nick":"piscisaureus_","message":"On windows that would be unistd.h but I bet that's not the case on uniux","date":"2012-03-08T15:56:36.353Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: unistd.h and fcntl.h","date":"2012-03-08T15:56:48.916Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll fix it up","date":"2012-03-08T15:56:54.561Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: thnx.","date":"2012-03-08T15:57:16.414Z","type":"message"}
{"nick":"bnoordhuis","message":"because hey, if you want the work done right, you need to do it yourself, right?","date":"2012-03-08T15:57:18.966Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: that is often true. I bet I could fix it with a couple of commits using travis :-)","date":"2012-03-08T15:57:48.493Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307test\u000f * r\u000203d505b\u000f \u000310\u000f/ test/test-tty.c \u0002:\u000f Fix unix build - http://git.io/57PNpw","date":"2012-03-08T15:58:38.463Z","type":"message"}
{"nick":"piscisaureus_","message":"let's see what travis says ^-- :-)","date":"2012-03-08T15:58:43.532Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: 5a4a45e in my repo","date":"2012-03-08T15:58:58.577Z","type":"message"}
{"nick":"bnoordhuis","message":"that's a neat commit hash btw","date":"2012-03-08T15:59:10.894Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: you should have tested it / let me test it before you pushed it","date":"2012-03-08T15:59:46.686Z","type":"message"}
