{"nick":"sahel","date":"2016-02-24T00:14:10.859Z","type":"join"}
{"nick":"sahel","reason":"Remote host closed the connection","date":"2016-02-24T00:24:12.107Z","type":"quit"}
{"nick":"bnoordhuis","date":"2016-02-24T00:30:24.990Z","type":"join"}
{"nick":"smorin","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2016-02-24T00:31:53.202Z","type":"quit"}
{"nick":"smorin","date":"2016-02-24T00:34:38.076Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2016-02-24T00:35:03.945Z","type":"quit"}
{"nick":"smorin","reason":"Client Quit","date":"2016-02-24T00:36:15.820Z","type":"quit"}
{"nick":"sahel","date":"2016-02-24T00:42:51.958Z","type":"join"}
{"nick":"sahel","reason":"Client Quit","date":"2016-02-24T00:43:03.342Z","type":"quit"}
{"nick":"evanluca_","date":"2016-02-24T00:45:58.645Z","type":"join"}
{"nick":"evanlucas","reason":"Ping timeout: 276 seconds","date":"2016-02-24T00:47:57.309Z","type":"quit"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2016-02-24T01:11:55.878Z","type":"quit"}
{"nick":"petka____","reason":"Quit: Connection closed for inactivity","date":"2016-02-24T01:30:37.819Z","type":"quit"}
{"nick":"happy-dude","reason":"Quit: Connection closed for inactivity","date":"2016-02-24T01:59:51.210Z","type":"quit"}
{"nick":"evanluca_","reason":"Read error: Connection reset by peer","date":"2016-02-24T02:01:23.216Z","type":"quit"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-02-24T02:01:23.388Z","type":"quit"}
{"nick":"evanlucas","date":"2016-02-24T02:04:07.881Z","type":"join"}
{"nick":"etnbrd","date":"2016-02-24T02:11:19.042Z","type":"join"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2016-02-24T02:51:35.271Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 240 seconds","date":"2016-02-24T02:53:29.680Z","type":"quit"}
{"nick":"dap_","date":"2016-02-24T02:56:30.088Z","type":"join"}
{"nick":"Fishrock123","date":"2016-02-24T02:57:47.005Z","type":"join"}
{"nick":"Fishrock123","reason":"Quit: Leaving...","date":"2016-02-24T03:05:23.031Z","type":"quit"}
{"nick":"importantshock","date":"2016-02-24T03:07:34.678Z","type":"join"}
{"nick":"evanlucas","reason":"Read error: Connection reset by peer","date":"2016-02-24T03:59:49.051Z","type":"quit"}
{"nick":"evanlucas","date":"2016-02-24T04:00:26.088Z","type":"join"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-02-24T04:55:42.970Z","type":"quit"}
{"nick":"evanlucas","reason":"Read error: Connection reset by peer","date":"2016-02-24T05:15:42.985Z","type":"quit"}
{"nick":"evanlucas","date":"2016-02-24T05:16:20.958Z","type":"join"}
{"nick":"evanlucas","reason":"Read error: Connection reset by peer","date":"2016-02-24T05:29:20.851Z","type":"quit"}
{"nick":"evanlucas","date":"2016-02-24T05:30:01.329Z","type":"join"}
{"nick":"smorin","date":"2016-02-24T06:26:03.361Z","type":"join"}
{"nick":"evanluca_","date":"2016-02-24T06:31:22.301Z","type":"join"}
{"nick":"evanlucas","reason":"Read error: Connection reset by peer","date":"2016-02-24T06:31:31.277Z","type":"quit"}
{"nick":"txdv","reason":"Ping timeout: 240 seconds","date":"2016-02-24T06:36:03.986Z","type":"quit"}
{"nick":"txdv","date":"2016-02-24T06:43:45.079Z","type":"join"}
{"nick":"seishun","date":"2016-02-24T06:59:07.151Z","type":"join"}
{"nick":"smorin","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2016-02-24T07:12:35.859Z","type":"quit"}
{"nick":"evanlucas","date":"2016-02-24T07:23:49.115Z","type":"join"}
{"nick":"evanluca_","reason":"Read error: Connection reset by peer","date":"2016-02-24T07:23:56.514Z","type":"quit"}
{"nick":"evanluca_","date":"2016-02-24T07:43:57.860Z","type":"join"}
{"nick":"evanlucas","reason":"Read error: Connection reset by peer","date":"2016-02-24T07:44:04.638Z","type":"quit"}
{"nick":"saghul","message":"samrg472: you must free the handle in the on_close callback, you must close the handle with uv_close","date":"2016-02-24T07:47:09.280Z","type":"message"}
{"nick":"evanluca_","reason":"Read error: Connection reset by peer","date":"2016-02-24T07:48:50.620Z","type":"quit"}
{"nick":"evanlucas","date":"2016-02-24T07:49:53.854Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 240 seconds","date":"2016-02-24T08:03:04.100Z","type":"quit"}
{"nick":"Perilous_","reason":"Remote host closed the connection","date":"2016-02-24T08:34:20.453Z","type":"quit"}
{"nick":"PerilousApricot","date":"2016-02-24T08:35:20.099Z","type":"join"}
{"nick":"PerilousApricot","reason":"Ping timeout: 250 seconds","date":"2016-02-24T08:39:45.043Z","type":"quit"}
{"nick":"brrt","date":"2016-02-24T08:43:06.999Z","type":"join"}
{"nick":"petka____","date":"2016-02-24T08:44:06.657Z","type":"join"}
{"nick":"evanlucas","reason":"Read error: Connection reset by peer","date":"2016-02-24T08:55:05.792Z","type":"quit"}
{"nick":"evanlucas","date":"2016-02-24T08:55:24.114Z","type":"join"}
{"nick":"brrt","reason":"\"Good Bye\"","date":"2016-02-24T09:22:51.165Z","type":"part"}
{"nick":"davi","date":"2016-02-24T10:23:42.393Z","type":"join"}
{"nick":"davi","reason":"Ping timeout: 240 seconds","date":"2016-02-24T10:41:04.040Z","type":"quit"}
{"nick":"bnoordhuis","date":"2016-02-24T10:44:29.867Z","type":"join"}
{"nick":"rendar","date":"2016-02-24T11:40:11.517Z","type":"join"}
{"nick":"importantshock","date":"2016-02-24T12:13:23.493Z","type":"join"}
{"nick":"evanlucas","reason":"Read error: Connection reset by peer","date":"2016-02-24T12:19:55.106Z","type":"quit"}
{"nick":"evanlucas","date":"2016-02-24T12:20:14.068Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 248 seconds","date":"2016-02-24T12:45:55.821Z","type":"quit"}
{"nick":"samrg472","reason":"Ping timeout: 240 seconds","date":"2016-02-24T13:09:59.667Z","type":"quit"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-02-24T13:20:15.483Z","type":"quit"}
{"nick":"importantshock","date":"2016-02-24T13:22:32.532Z","type":"join"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-02-24T13:45:14.466Z","type":"quit"}
{"nick":"evanlucas","reason":"Read error: Connection reset by peer","date":"2016-02-24T13:47:15.850Z","type":"quit"}
{"nick":"evanlucas","date":"2016-02-24T13:47:34.102Z","type":"join"}
{"nick":"bnoordhuis","date":"2016-02-24T13:51:49.633Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 255 seconds","date":"2016-02-24T13:56:22.621Z","type":"quit"}
{"nick":"importantshock","date":"2016-02-24T14:28:53.954Z","type":"join"}
{"nick":"PerilousApricot","date":"2016-02-24T14:36:32.057Z","type":"join"}
{"nick":"PerilousApricot","reason":"Ping timeout: 250 seconds","date":"2016-02-24T14:40:43.048Z","type":"quit"}
{"nick":"PerilousApricot","date":"2016-02-24T15:00:24.983Z","type":"join"}
{"nick":"PerilousApricot","reason":"Remote host closed the connection","date":"2016-02-24T15:00:26.924Z","type":"quit"}
{"nick":"PerilousApricot","date":"2016-02-24T15:31:25.646Z","type":"join"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-02-24T15:36:37.925Z","type":"quit"}
{"nick":"bnoordhuis","date":"2016-02-24T15:38:51.604Z","type":"join"}
{"nick":"importantshock","date":"2016-02-24T15:39:37.401Z","type":"join"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-02-24T15:44:36.276Z","type":"quit"}
{"nick":"importantshock","date":"2016-02-24T15:45:10.421Z","type":"join"}
{"nick":"alexforster","date":"2016-02-24T15:52:39.095Z","type":"join"}
{"nick":"Fishrock123","date":"2016-02-24T16:02:35.358Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 255 seconds","date":"2016-02-24T16:21:43.615Z","type":"quit"}
{"nick":"happy-dude","date":"2016-02-24T16:24:35.860Z","type":"join"}
{"nick":"davi","date":"2016-02-24T16:30:33.865Z","type":"join"}
{"nick":"yunong_","date":"2016-02-24T16:32:11.066Z","type":"join"}
{"nick":"yunong","reason":"Ping timeout: 250 seconds","date":"2016-02-24T16:34:15.160Z","type":"quit"}
{"nick":"seishun","date":"2016-02-24T16:46:58.910Z","type":"join"}
{"nick":"bnoordhuis","date":"2016-02-24T16:48:29.094Z","type":"join"}
{"nick":"importan_","date":"2016-02-24T17:50:13.872Z","type":"join"}
{"nick":"importantshock","reason":"Ping timeout: 250 seconds","date":"2016-02-24T17:50:31.089Z","type":"quit"}
{"nick":"importan_","reason":"Remote host closed the connection","date":"2016-02-24T18:51:50.550Z","type":"quit"}
{"nick":"brson","date":"2016-02-24T18:52:49.074Z","type":"join"}
{"nick":"importantshock","date":"2016-02-24T18:52:50.739Z","type":"join"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-02-24T18:53:57.370Z","type":"quit"}
{"nick":"davi","reason":"Ping timeout: 244 seconds","date":"2016-02-24T19:09:57.977Z","type":"quit"}
{"nick":"fierydrake","date":"2016-02-24T19:10:08.604Z","type":"join"}
{"nick":"importantshock","date":"2016-02-24T19:19:21.272Z","type":"join"}
{"nick":"benjamingr__","date":"2016-02-24T19:24:11.841Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 244 seconds","date":"2016-02-24T19:36:47.149Z","type":"quit"}
{"nick":"brson","date":"2016-02-24T19:38:36.989Z","type":"join"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-02-24T20:17:36.724Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 244 seconds","date":"2016-02-24T20:37:47.993Z","type":"quit"}
{"nick":"importantshock","date":"2016-02-24T20:45:15.415Z","type":"join"}
{"nick":"brson","date":"2016-02-24T20:49:52.313Z","type":"join"}
{"nick":"ralt","message":"saghul: can I assume that if a system has mkostemp, it also has O_CLOEXEC?","date":"2016-02-24T22:26:53.909Z","type":"message"}
{"nick":"rendar","message":"ralt: hmm what is mkostemp?","date":"2016-02-24T22:36:45.922Z","type":"message"}
{"nick":"rendar","message":"ralt: ok it's for unique temp files, but how it's related with O_CLOEXEC?","date":"2016-02-24T22:37:11.757Z","type":"message"}
{"nick":"bnoordhuis","message":"ralt: mkostemp can still fail with EINVAL if the kernel doesn't understand the O_CLOEXEC flag","date":"2016-02-24T22:38:03.806Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: O_CLOEXEC is to avoid fd leaks when racing with fork() calls in other threads","date":"2016-02-24T22:38:52.105Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: yeah i know the purpose of that flag, but why should it be related with mkostemp?","date":"2016-02-24T22:39:45.974Z","type":"message"}
{"nick":"bnoordhuis","message":"rendar: because mkostemp returns a file descriptor :)","date":"2016-02-24T22:40:35.654Z","type":"message"}
{"nick":"ralt","message":"bnoordhuis: hm, so I guess I should check for O_CLOEXEC support.","date":"2016-02-24T22:44:27.858Z","type":"message"}
{"nick":"ralt","message":"(and only use mkostemp() in this case)","date":"2016-02-24T22:44:50.257Z","type":"message"}
{"nick":"ralt","message":"since the fallback path uses uv__cloexec(), it'll be fine","date":"2016-02-24T22:45:23.080Z","type":"message"}
{"nick":"bnoordhuis","message":"not quite, i think. on linux, you should try mkostemp + O_CLOEXEC first and only use the fallback when it fails with EINVAL","date":"2016-02-24T22:46:34.672Z","type":"message"}
{"nick":"bnoordhuis","message":"ralt: apologies, UV__O_CLOEXEC","date":"2016-02-24T22:46:52.269Z","type":"message"}
{"nick":"bnoordhuis","message":"you can lift the freebsd code for that #define in src/unix/core.c to e.g. src/unix/internal.h","date":"2016-02-24T22:47:15.549Z","type":"message"}
{"nick":"seishun","reason":"Ping timeout: 240 seconds","date":"2016-02-24T22:48:59.645Z","type":"quit"}
{"nick":"ralt","message":"bnoordhuis: thanks","date":"2016-02-24T22:50:17.168Z","type":"message"}
{"nick":"ralt","message":"bnoordhuis: hm, EINVAL means something else for mkostemp() though","date":"2016-02-24T22:51:56.018Z","type":"message"}
{"nick":"ralt","message":"it means that the template was malformed","date":"2016-02-24T22:52:02.066Z","type":"message"}
{"nick":"ralt","message":"well, it can mean both","date":"2016-02-24T22:52:48.796Z","type":"message"}
{"nick":"ralt","message":"in fact... given the man page, I'm not sure if there exists versions where mkostemp() exists but not UV__O_CLOEXEC","date":"2016-02-24T22:53:42.273Z","type":"message"}
{"nick":"rendar","message":"bnoordhuis: oh, i see, so it's like pipe2() or accept4() which, since they effectively create fds, we could pass those flags at the creation time, so we don't call 2 syscalls","date":"2016-02-24T22:54:08.000Z","type":"message"}
{"nick":"ralt","message":"if I check EINVAL, it means that I have to call mkostemp(), and then mkstemp(). Is that better than checking for O_CLOEXEC support, similarly to what we do in uv__fs_open?","date":"2016-02-24T22:56:19.598Z","type":"message"}
{"nick":"ralt","message":"(my biggest issue is trying twice with an invalid template, aka going to the fallback path on a system supporting mkostemp() and O_CLOEXEC properly)","date":"2016-02-24T23:09:17.828Z","type":"message"}
{"nick":"bnoordhuis","message":"ralt: \"given the man page, I'm not sure if there exists versions where mkostemp() exists but not UV__O_CLOEXEC\" <- think newer glibc on older kernel","date":"2016-02-24T23:17:56.537Z","type":"message"}
{"nick":"bnoordhuis","message":"ralt: more to the point, mkostemp() calls open() which until linux 2.6.23 didn't understand O_CLOEXEC","date":"2016-02-24T23:18:59.880Z","type":"message"}
{"nick":"ralt","message":"bnoordhuis: so you're not concerned by the fact we're going to call mkstemp() on systems that support both mkostemp() and O_CLOEXEC if the template is malformed?","date":"2016-02-24T23:20:53.224Z","type":"message"}
{"nick":"bnoordhuis","message":"ralt: how could that happen unless there's a libuv bug? libuv prepares the template, right?","date":"2016-02-24T23:22:30.926Z","type":"message"}
{"nick":"ralt","message":"bnoordhuis: not for mkdtemp, at least","date":"2016-02-24T23:23:24.220Z","type":"message"}
{"nick":"ralt","message":"(so I haven't done that for mkstemp either)","date":"2016-02-24T23:23:31.743Z","type":"message"}
{"nick":"bnoordhuis","message":"i thought you and saghul agreed that the user won't pass in the XXXXXX?","date":"2016-02-24T23:25:09.969Z","type":"message"}
{"nick":"ralt","message":"bnoordhuis: that's in nodejs land","date":"2016-02-24T23:25:21.197Z","type":"message"}
{"nick":"bnoordhuis","message":"why would you do it differently in libuv?","date":"2016-02-24T23:25:48.469Z","type":"message"}
{"nick":"ralt","message":"uv_fs_mkdtemp, already in libuv, doesn't handle the template at all","date":"2016-02-24T23:25:50.288Z","type":"message"}
{"nick":"bnoordhuis","message":"oh right","date":"2016-02-24T23:27:06.845Z","type":"message"}
{"nick":"bnoordhuis","message":"well boo","date":"2016-02-24T23:27:19.448Z","type":"message"}
{"nick":"ralt","message":"^^","date":"2016-02-24T23:27:38.229Z","type":"message"}
{"nick":"bnoordhuis","message":"in that case i guess you'll have to do a manual precheck that it ends in XXXXXX","date":"2016-02-24T23:27:55.265Z","type":"message"}
{"nick":"ralt","message":"in itself, I'm fine with this codepath","date":"2016-02-24T23:27:55.437Z","type":"message"}
{"nick":"ralt","message":"and return EINVAL manually?","date":"2016-02-24T23:28:59.188Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2016-02-24T23:29:04.105Z","type":"message"}
{"nick":"ralt","message":"ok","date":"2016-02-24T23:29:21.683Z","type":"message"}
{"nick":"bnoordhuis","message":"alright, i'm calling it a night. have to get up in 6.5 hours again","date":"2016-02-24T23:30:44.202Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 244 seconds","date":"2016-02-24T23:34:58.115Z","type":"quit"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2016-02-24T23:38:33.559Z","type":"quit"}
{"nick":"rendar_","date":"2016-02-24T23:39:11.986Z","type":"join"}
{"nick":"rendar","reason":"Ping timeout: 255 seconds","date":"2016-02-24T23:42:16.620Z","type":"quit"}
{"nick":"alexforster","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2016-02-24T23:50:25.770Z","type":"quit"}
{"nick":"importantshock","reason":"Remote host closed the connection","date":"2016-02-24T23:56:41.540Z","type":"quit"}
