{"nick":"AvianFlu","date":"2011-10-06T00:01:53.746Z","type":"join"}
{"nick":"bnoordhuis","message":"probably commoncrypto","date":"2011-10-06T00:04:27.550Z","type":"message"}
{"nick":"bnoordhuis","message":"so guys, where were you when you first heard that steve jobs was dead?","date":"2011-10-06T00:09:19.658Z","type":"message"}
{"nick":"piscisaureus","message":"twitter","date":"2011-10-06T00:09:27.027Z","type":"message"}
{"nick":"erickt","message":":(","date":"2011-10-06T00:09:52.522Z","type":"message"}
{"nick":"ryah","message":"from isaacs at node office hours","date":"2011-10-06T00:10:13.066Z","type":"message"}
{"nick":"ryah","message":":)","date":"2011-10-06T00:10:14.521Z","type":"message"}
{"nick":"AvianFlu","reason":"Ping timeout: 260 seconds","date":"2011-10-06T00:37:05.663Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2011-10-06T00:43:30.450Z","type":"quit"}
{"nick":"ryah","message":"new v8 is slower :(","date":"2011-10-06T00:45:33.041Z","type":"message"}
{"nick":"AvianFlu","date":"2011-10-06T00:50:36.173Z","type":"join"}
{"nick":"piscisaureus","message":"hmmm scheisse","date":"2011-10-06T01:06:06.520Z","type":"message"}
{"nick":"AvianFlu","reason":"Ping timeout: 252 seconds","date":"2011-10-06T01:07:45.116Z","type":"quit"}
{"nick":"AvianFlu","date":"2011-10-06T01:08:54.359Z","type":"join"}
{"nick":"piscisaureus","message":"https://gist.github.com/1266220 <-- like that?","date":"2011-10-06T01:11:13.616Z","type":"message"}
{"nick":"AvianFlu_","date":"2011-10-06T01:20:46.694Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 260 seconds","date":"2011-10-06T01:23:45.768Z","type":"quit"}
{"nick":"piscisaureus","action":"gone","date":"2011-10-06T01:25:29.324Z","type":"action"}
{"nick":"piscisaureus","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2011-10-06T01:28:04.919Z","type":"quit"}
{"nick":"piscisaureus","date":"2011-10-06T01:31:56.680Z","type":"join"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u00022726213\u000f \u000310\u000f/ (5 files in 2 dirs)\u0002:\u000f ","date":"2011-10-06T01:32:55.046Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f bench: add batched TCP writes benchmark","date":"2011-10-06T01:32:55.206Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f Times how long it takes to queue and write out 1,000,000 short strings. - http://git.io/CiRz8w","date":"2011-10-06T01:32:55.206Z","type":"message"}
{"nick":"bnoordhuis","message":"libuv's doing alright, 1M writes in 1.2s","date":"2011-10-06T01:35:19.555Z","type":"message"}
{"nick":"bnoordhuis","message":"so the sluggishness in pummel/test-net-write-callbacks probably comes from the js binding","date":"2011-10-06T01:35:42.604Z","type":"message"}
{"nick":"piscisaureus","reason":"Ping timeout: 248 seconds","date":"2011-10-06T01:37:51.680Z","type":"quit"}
{"nick":"bnoordhuis","message":"so ubuntu 12.04 will be called 'precise pangolin'","date":"2011-10-06T01:42:54.561Z","type":"message"}
{"nick":"bnoordhuis","message":"it obviously should have been 'perky pinguin'","date":"2011-10-06T01:43:35.690Z","type":"message"}
{"nick":"AvianFlu_","new_nick":"AvianFlu","date":"2011-10-06T01:44:27.620Z","type":"nick"}
{"nick":"piscisaureus","date":"2011-10-06T01:44:39.680Z","type":"join"}
{"nick":"piscisaureus","message":"unix totally owns windows there","date":"2011-10-06T01:44:55.076Z","type":"message"}
{"nick":"piscisaureus","message":"on windows that takes 9.8 s","date":"2011-10-06T01:45:02.181Z","type":"message"}
{"nick":"piscisaureus","message":"I already kinda knew that - bumping the send buffer to 64k solves that on windows","date":"2011-10-06T01:45:26.311Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: the send buffer == the kernel send buffer?","date":"2011-10-06T01:46:50.899Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-10-06T01:46:55.589Z","type":"message"}
{"nick":"bnoordhuis","message":"okay","date":"2011-10-06T01:47:02.412Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe we should tweak it on the unices too","date":"2011-10-06T01:47:28.395Z","type":"message"}
{"nick":"bnoordhuis","message":"or maybe provide a \"interactive vs. throughput\" knob","date":"2011-10-06T01:48:24.070Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I don't think it matters much on real networks","date":"2011-10-06T01:50:22.684Z","type":"message"}
{"nick":"piscisaureus","message":"We should figure that out","date":"2011-10-06T01:50:28.357Z","type":"message"}
{"nick":"piscisaureus","message":"but it gets faster because a big kernel send buffer makes it possible to send 64k frames","date":"2011-10-06T01:50:52.864Z","type":"message"}
{"nick":"piscisaureus","message":"on a normal network we're ususally MTU-bound","date":"2011-10-06T01:51:16.265Z","type":"message"}
{"nick":"bnoordhuis","message":"i agree that it probably won't make much difference over the intertubes","date":"2011-10-06T01:51:33.712Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Colton Baker\u000f \u000307master\u000f * r\u000287286cc\u000f \u000310\u000f/ (175 files in 17 dirs)\u0002:\u000f ","date":"2011-10-06T01:51:44.559Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Fixed a lot of jslint errors.","date":"2011-10-06T01:51:44.722Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Fixes #1831 - http://git.io/oKyPfQ","date":"2011-10-06T01:51:44.722Z","type":"message"}
{"nick":"bnoordhuis","message":"on local networks it might make an appreciable difference though","date":"2011-10-06T01:52:33.874Z","type":"message"}
{"nick":"bnoordhuis","message":"that is, if jumbo frames are in effect and the normal send buffer is < 8K","date":"2011-10-06T01:53:14.026Z","type":"message"}
{"nick":"piscisaureus","message":"on windows the send buffer is never greater than 8kb","date":"2011-10-06T01:54:38.103Z","type":"message"}
{"nick":"erickt","reason":"Ping timeout: 252 seconds","date":"2011-10-06T01:55:03.188Z","type":"quit"}
{"nick":"piscisaureus","message":"maybe different for 2k8r2 but I don't really expect that","date":"2011-10-06T01:55:03.641Z","type":"message"}
{"nick":"bnoordhuis","message":"bleh, tired - off to bed i go","date":"2011-10-06T01:57:12.220Z","type":"message"}
{"nick":"bnoordhuis","message":"don't you have to work tomorrow (today), piscisaureus?","date":"2011-10-06T01:57:23.428Z","type":"message"}
{"nick":"piscisaureus","message":"yeah kinda","date":"2011-10-06T01:57:34.943Z","type":"message"}
{"nick":"piscisaureus","message":"well","date":"2011-10-06T01:57:36.623Z","type":"message"}
{"nick":"piscisaureus","message":"*shrug*","date":"2011-10-06T01:57:44.653Z","type":"message"}
{"nick":"piscisaureus","message":"I was just talking to both Rik and Ruben","date":"2011-10-06T01:58:00.333Z","type":"message"}
{"nick":"piscisaureus","message":"I bet if I am late tommorrow they're not going to notice :-p","date":"2011-10-06T01:58:16.843Z","type":"message"}
{"nick":"bnoordhuis","message":"heh","date":"2011-10-06T01:58:25.501Z","type":"message"}
{"nick":"piscisaureus","message":"besides I haven't really started so I can just do whatever I want","date":"2011-10-06T01:58:27.988Z","type":"message"}
{"nick":"piscisaureus","message":"I am still a rackspace guy","date":"2011-10-06T01:58:39.589Z","type":"message"}
{"nick":"bnoordhuis","message":"until when?","date":"2011-10-06T01:59:01.214Z","type":"message"}
{"nick":"piscisaureus","message":"Going to that office is just practice for the real life","date":"2011-10-06T01:59:01.371Z","type":"message"}
{"nick":"bnoordhuis","message":"man, stormy weather tonight","date":"2011-10-06T01:59:17.294Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm kinda afraid one of the windows might break","date":"2011-10-06T01:59:43.442Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: we currently do non-overlapped ReadFile for pipes (after getting 0-read).. we shouldn't be doing that, i think","date":"2011-10-06T02:06:16.983Z","type":"message"}
{"nick":"piscisaureus","message":"I think at least we should support both","date":"2011-10-06T02:06:41.897Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: but I think the IPC protocol is more difficicult if we go for the other option, but not sure","date":"2011-10-06T02:07:02.524Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: i'm not even talking about the ipc protocol.. since we opened the pipe with FILE_FLAG_OVERLAPPED, we must pass OVERLAPPED to ReadFile/WriteFile","date":"2011-10-06T02:08:00.455Z","type":"message"}
{"nick":"piscisaureus","message":"oh, damn","date":"2011-10-06T02:08:22.891Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-10-06T02:08:24.333Z","type":"message"}
{"nick":"igorzi","message":"yep.. we should get rid of 0-reads for pipes then?","date":"2011-10-06T02:09:27.549Z","type":"message"}
{"nick":"piscisaureus","message":"not necessarily","date":"2011-10-06T02:09:41.889Z","type":"message"}
{"nick":"igorzi","message":"reopen the pipe without FILE_FLAG_OVERLAPPED?","date":"2011-10-06T02:09:57.627Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-10-06T02:10:22.660Z","type":"message"}
{"nick":"piscisaureus","message":"why can't we combine OVERLAPPED with 0-reads?","date":"2011-10-06T02:10:36.256Z","type":"message"}
{"nick":"igorzi","message":"oh.. after we get 0-read, we just keep doing overlapped reads with non-0 buffers?","date":"2011-10-06T02:12:30.551Z","type":"message"}
{"nick":"piscisaureus","message":"yes - that's what we've been using so far","date":"2011-10-06T02:13:14.340Z","type":"message"}
{"nick":"piscisaureus","message":"for blocking pipes it's more difficult","date":"2011-10-06T02:13:23.566Z","type":"message"}
{"nick":"piscisaureus","message":"so far it worked fine :-)","date":"2011-10-06T02:15:29.005Z","type":"message"}
{"nick":"bnoordhuis","message":"sleep tight, people","date":"2011-10-06T02:16:10.135Z","type":"message"}
{"nick":"igorzi","message":"ok, i'll fix that separate from ipc work","date":"2011-10-06T02:16:17.198Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis and me are going to bed","date":"2011-10-06T02:16:18.612Z","type":"message"}
{"nick":"indexzero","date":"2011-10-06T02:16:29.288Z","type":"join"}
{"nick":"igorzi","message":"later, guys","date":"2011-10-06T02:16:31.603Z","type":"message"}
{"nick":"piscisaureus","message":"later, igorzi","date":"2011-10-06T02:16:39.675Z","type":"message"}
{"nick":"bnoordhuis","reason":"Quit: Leaving","date":"2011-10-06T02:16:44.065Z","type":"quit"}
{"nick":"piscisaureus","message":"btw, we're not sharing a bed :-p","date":"2011-10-06T02:16:46.435Z","type":"message"}
{"nick":"piscisaureus","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2011-10-06T02:17:10.542Z","type":"quit"}
{"nick":"ryah","message":"they don't live together?","date":"2011-10-06T02:33:16.106Z","type":"message"}
{"nick":"erickt","date":"2011-10-06T02:57:47.004Z","type":"join"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-10-06T02:59:14.985Z","type":"quit"}
{"nick":"isaacs","date":"2011-10-06T03:49:36.625Z","type":"join"}
{"nick":"mraleph","date":"2011-10-06T04:32:23.679Z","type":"join"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2011-10-06T04:36:09.341Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2011-10-06T04:39:06.292Z","type":"quit"}
{"nick":"erickt","reason":"Quit: erickt","date":"2011-10-06T04:56:38.079Z","type":"quit"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-10-06T05:02:10.223Z","type":"quit"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-10-06T05:34:30.127Z","type":"quit"}
{"nick":"igorzi","message":"ryah: how's the ipc binding going?","date":"2011-10-06T05:48:52.387Z","type":"message"}
{"nick":"AvianFlu","date":"2011-10-06T07:04:11.316Z","type":"join"}
{"nick":"Casan","date":"2011-10-06T07:39:44.525Z","type":"join"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Igor Zinkovsky\u000f \u000307ipc2\u000f * r\u0002aad62d9\u000f \u000310\u000f/ src/win/stdio.c \u0002:\u000f remove stdio.c - http://git.io/98gXXQ","date":"2011-10-06T07:58:51.597Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Igor Zinkovsky\u000f \u000307ipc2\u000f * r\u00023502da6\u000f \u000310\u000f/ (4 files in 2 dirs)\u0002:\u000f windows ipc fixes - http://git.io/aqcj1w","date":"2011-10-06T07:58:51.829Z","type":"message"}
{"nick":"mraleph","date":"2011-10-06T08:07:25.175Z","type":"join"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 \u000303mikeal\u0003: streams2 - https://github.com/joyent/node/issues/1681","date":"2011-10-06T08:32:46.384Z","type":"message"}
{"nick":"mraleph","reason":"Ping timeout: 252 seconds","date":"2011-10-06T09:06:37.158Z","type":"quit"}
{"nick":"Casan","reason":"Quit: Leaving","date":"2011-10-06T10:38:03.435Z","type":"quit"}
{"nick":"mraleph","date":"2011-10-06T10:43:47.680Z","type":"join"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-10-06T11:31:06.808Z","type":"quit"}
{"nick":"dmkbot","date":"2011-10-06T11:31:38.680Z","type":"join"}
{"nick":"bnoordhuis","date":"2011-10-06T12:12:40.860Z","type":"join"}
{"nick":"piscisaureus","date":"2011-10-06T12:17:36.677Z","type":"join"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303koichik\u000f \u000307master\u000f * r\u00029797482\u000f \u000310\u000f/ doc/api/net.markdown \u0002:\u000f ","date":"2011-10-06T12:41:04.458Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f docs: add example to net.connect()","date":"2011-10-06T12:41:04.615Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Fixes #1824. - http://git.io/AXtIog","date":"2011-10-06T12:41:04.615Z","type":"message"}
{"nick":"erickt","date":"2011-10-06T14:18:02.207Z","type":"join"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-10-06T14:36:56.330Z","type":"quit"}
{"nick":"dmkbot","date":"2011-10-06T14:37:01.331Z","type":"join"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-10-06T14:37:33.775Z","type":"quit"}
{"nick":"dmkbot","date":"2011-10-06T14:37:37.317Z","type":"join"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-10-06T14:38:24.820Z","type":"quit"}
{"nick":"dmkbot","date":"2011-10-06T14:38:29.683Z","type":"join"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-10-06T14:39:46.161Z","type":"quit"}
{"nick":"dmkbot1","date":"2011-10-06T14:39:51.052Z","type":"join"}
{"nick":"dmkbot1","reason":"Remote host closed the connection","date":"2011-10-06T14:40:22.890Z","type":"quit"}
{"nick":"dmkbot","date":"2011-10-06T14:40:27.403Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus: uv_process_kill(handle, 0) <- kills the process on windows, doesn't kill it on unix","date":"2011-10-06T14:47:15.334Z","type":"message"}
{"nick":"piscisaureus","message":"whose fault is that","date":"2011-10-06T14:47:29.673Z","type":"message"}
{"nick":"bnoordhuis","message":"depends on whom you ask","date":"2011-10-06T14:47:53.482Z","type":"message"}
{"nick":"bnoordhuis","message":"is uv_process_kill() supposed to follow unix semantics?","date":"2011-10-06T14:48:07.966Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: well - there's no signals on windows","date":"2011-10-06T14:48:35.250Z","type":"message"}
{"nick":"piscisaureus","message":"so uv_process_kill just kills the child no questions asked","date":"2011-10-06T14:48:50.805Z","type":"message"}
{"nick":"bnoordhuis","message":"okay","date":"2011-10-06T14:49:41.266Z","type":"message"}
{"nick":"bnoordhuis","message":"kill(pid, 0) on unix checks if there's a process living on that pid","date":"2011-10-06T14:50:01.114Z","type":"message"}
{"nick":"piscisaureus","message":"ah","date":"2011-10-06T14:50:04.334Z","type":"message"}
{"nick":"bnoordhuis","message":"is that something we should / want to emulate?","date":"2011-10-06T14:50:20.162Z","type":"message"}
{"nick":"piscisaureus","message":"hmm., don't know, what's the use case?","date":"2011-10-06T14:50:33.094Z","type":"message"}
{"nick":"piscisaureus","message":"I mean, libuv will just tell you when the child is dead right?","date":"2011-10-06T14:50:47.263Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2011-10-06T14:51:04.863Z","type":"message"}
{"nick":"bnoordhuis","message":"i suppose uv-unix should intercept signum==0","date":"2011-10-06T14:51:21.971Z","type":"message"}
{"nick":"piscisaureus","message":"or uv-win","date":"2011-10-06T14:51:33.630Z","type":"message"}
{"nick":"piscisaureus","message":"just ignore it","date":"2011-10-06T14:51:36.310Z","type":"message"}
{"nick":"bnoordhuis","message":"that leaves us with process.kill() in node","date":"2011-10-06T14:52:25.823Z","type":"message"}
{"nick":"piscisaureus","message":"yes, but that doesn't go through libuv atm right?","date":"2011-10-06T14:52:41.538Z","type":"message"}
{"nick":"piscisaureus","message":"I guess we could emulate it on windows","date":"2011-10-06T14:53:07.115Z","type":"message"}
{"nick":"piscisaureus","message":"but I think it's bad style - race conditions and such","date":"2011-10-06T14:53:34.318Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2011-10-06T14:53:45.861Z","type":"message"}
{"nick":"bnoordhuis","message":"better to leave it out then","date":"2011-10-06T14:53:50.663Z","type":"message"}
{"nick":"bnoordhuis","message":"i suppose we'll just have to deprecate process.kill() or brand it a non-portable unix-ism","date":"2011-10-06T14:54:19.479Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: yeah - I think we could also just kill the process","date":"2011-10-06T14:55:50.346Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: maybe throw if the user sends some whacko signal like SIGUSR","date":"2011-10-06T14:56:11.717Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: 'kill the process' as in 'kill node'?","date":"2011-10-06T14:56:56.778Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: no, process.kill(pid) should just terminate the process with that pid","date":"2011-10-06T14:57:30.477Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but process.kill(pid, 'SIGUSR') could throw","date":"2011-10-06T14:57:46.324Z","type":"message"}
{"nick":"bnoordhuis","message":"ah right","date":"2011-10-06T14:57:53.794Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301process.kill(pid, 'SIGTERM')\u0003\u000301 could send ctrl+break","date":"2011-10-06T14:58:21.447Z","type":"message"}
{"nick":"piscisaureus","message":"although that might backfire and kill ourselves too","date":"2011-10-06T14:58:45.266Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303okuoku\u000f \u000307master\u000f * r\u0002d1016de\u000f \u000310\u000f/ src/unix/freebsd.c \u0002:\u000f FreeBSD: Fix FreeBSD build. - http://git.io/XeDPeA","date":"2011-10-06T15:01:45.390Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u000211944b9\u000f \u000310\u000f/ (.mailmap AUTHORS)\u0002:\u000f Update AUTHORS and .mailmap - http://git.io/0o1oAg","date":"2011-10-06T15:01:45.702Z","type":"message"}
{"nick":"erickt_","date":"2011-10-06T15:16:33.180Z","type":"join"}
{"nick":"dmkbot1","date":"2011-10-06T15:33:55.411Z","type":"join"}
{"nick":"dmkbot1","reason":"Read error: Connection reset by peer","date":"2011-10-06T15:33:55.571Z","type":"quit"}
{"nick":"dmkbot1","date":"2011-10-06T15:33:59.369Z","type":"join"}
{"nick":"dmkbot1","reason":"Remote host closed the connection","date":"2011-10-06T15:33:59.531Z","type":"quit"}
{"nick":"dmkbot1","date":"2011-10-06T15:34:03.327Z","type":"join"}
{"nick":"dmkbot1","reason":"Read error: Connection reset by peer","date":"2011-10-06T15:34:03.492Z","type":"quit"}
{"nick":"dmkbot1","date":"2011-10-06T15:34:07.441Z","type":"join"}
{"nick":"dmkbot1","reason":"Read error: Connection reset by peer","date":"2011-10-06T15:34:07.602Z","type":"quit"}
{"nick":"erickt_","reason":"Quit: erickt_","date":"2011-10-06T15:34:12.173Z","type":"quit"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-10-06T15:35:07.721Z","type":"quit"}
{"nick":"dmkbot","date":"2011-10-06T15:35:18.684Z","type":"join"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-10-06T15:35:18.843Z","type":"quit"}
{"nick":"dmkbot","date":"2011-10-06T15:35:23.684Z","type":"join"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-10-06T15:35:23.843Z","type":"quit"}
{"nick":"dmkbot","date":"2011-10-06T15:35:28.684Z","type":"join"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-10-06T15:35:28.843Z","type":"quit"}
{"nick":"indexzero_","date":"2011-10-06T15:36:36.342Z","type":"join"}
{"nick":"indexzero_","reason":"Client Quit","date":"2011-10-06T15:36:54.419Z","type":"quit"}
{"nick":"erickt","reason":"Quit: erickt","date":"2011-10-06T15:45:45.843Z","type":"quit"}
{"nick":"bnoordhuis","message":"mraleph: is there a dead easy way to track how many objects were created / gc'ed during the life time of a script?","date":"2011-10-06T16:08:09.535Z","type":"message"}
{"nick":"bnoordhuis","message":"probably the built-in profiler?","date":"2011-10-06T16:08:47.262Z","type":"message"}
{"nick":"ryah","message":"igorzi: done with the binding - now doing the js layer for child_process.fork","date":"2011-10-06T16:20:26.443Z","type":"message"}
{"nick":"bnoordhuis","message":"v8::internal::LinuxMutex::Unlock() <- what is this doing in my gprof output?","date":"2011-10-06T16:32:10.647Z","type":"message"}
{"nick":"isaacs","date":"2011-10-06T16:33:47.858Z","type":"join"}
{"nick":"bnoordhuis","message":"447235   99.5%    LazyCompile: *afterWrite net_uv.js:401 <- wtf?","date":"2011-10-06T16:42:44.158Z","type":"message"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2011-10-06T16:51:57.194Z","type":"quit"}
{"nick":"piscisaureus","message":"http://m.infoworld.com/d/application-development/oracle-prepping-its-nashorn-javascript-engine-175159","date":"2011-10-06T16:53:25.751Z","type":"message"}
{"nick":"piscisaureus","message":"^-- with node.js support?","date":"2011-10-06T16:53:30.545Z","type":"message"}
{"nick":"piscisaureus","message":"I am not sure what they mean by that","date":"2011-10-06T16:53:39.596Z","type":"message"}
{"nick":"ryah","message":"mraleph: i tested the new V8 - it makes us slower on http_simple :(","date":"2011-10-06T17:05:57.707Z","type":"message"}
{"nick":"erickt","date":"2011-10-06T17:07:12.114Z","type":"join"}
{"nick":"ryah","message":"is it okay to merge the ipc branch?","date":"2011-10-06T17:08:42.253Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: this is running that test i pointed you to?","date":"2011-10-06T17:09:29.963Z","type":"message"}
{"nick":"igorzi","message":"ryah: yes - ipc2 branch","date":"2011-10-06T17:10:03.730Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: i can tell you what's happening - in v0.4 when someone would write a string, instead of immediately turning it into a buffer","date":"2011-10-06T17:10:06.683Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: we would concat it onto the previous string in the queue","date":"2011-10-06T17:10:15.343Z","type":"message"}
{"nick":"igorzi","message":"ryah: it has everything from ipc branch + windows impl","date":"2011-10-06T17:10:27.223Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: which has the effect of using v8::String::WriteUtf8 only on very large strings","date":"2011-10-06T17:10:39.140Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: which apparently is very much fasater than thrashing back and forth","date":"2011-10-06T17:10:59.984Z","type":"message"}
{"nick":"ryah","message":"igorzi: k","date":"2011-10-06T17:11:12.753Z","type":"message"}
{"nick":"ryah","message":"im just going to rebase out my \"wip\" commit","date":"2011-10-06T17:11:32.293Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Ryan Dahl\u000f \u000307master\u000f * r\u000260c639f\u000f \u000310\u000f/ (27 files in 6 dirs)\u0002:\u000f Merge branch 'ipc2' (+10 more commits...) - http://git.io/S6ahiw","date":"2011-10-06T17:24:13.382Z","type":"message"}
{"nick":"ryah","message":"igorzi, piscisaureus, bnoordhuis: i can't make the scrum again today - sorry - you guy should sync","date":"2011-10-06T17:24:43.933Z","type":"message"}
{"nick":"ryah","message":"my update: finished the c++ binding of ipc, now working on JS side","date":"2011-10-06T17:25:06.774Z","type":"message"}
{"nick":"creationix|work","date":"2011-10-06T17:25:41.133Z","type":"join"}
{"nick":"ryah","message":"it's going to be a little tricky because some of the tests use process.binding('net').pipe","date":"2011-10-06T17:25:41.557Z","type":"message"}
{"nick":"ryah","message":"piscisaureus, bnoordhuis: you should recv flight/hotel info later today","date":"2011-10-06T17:27:27.424Z","type":"message"}
{"nick":"ryah","message":"okay - i'll bb this afternoon","date":"2011-10-06T17:30:19.023Z","type":"message"}
{"nick":"rmustacc","message":"piscisaureus, bnoordhuis: You guys are coming in?","date":"2011-10-06T17:30:46.144Z","type":"message"}
{"nick":"bnoordhuis","message":"rmustacc: yep","date":"2011-10-06T17:32:36.178Z","type":"message"}
{"nick":"rmustacc","message":"Cool.","date":"2011-10-06T17:32:50.468Z","type":"message"}
{"nick":"bnoordhuis","message":"hide your women and beer kegs","date":"2011-10-06T17:32:51.349Z","type":"message"}
{"nick":"rmustacc","message":"Haha","date":"2011-10-06T17:33:24.177Z","type":"message"}
{"nick":"rmustacc","message":"Well, I'm off to the airport, see you all later.","date":"2011-10-06T17:34:43.779Z","type":"message"}
{"nick":"bnoordhuis","message":"fly safely, rmustacc","date":"2011-10-06T17:35:13.186Z","type":"message"}
{"nick":"brson","date":"2011-10-06T17:37:20.576Z","type":"join"}
{"nick":"bnoordhuis","message":"ryah: yeah, i noticed - if you combine the 500k writes into a single string, the script finishes in < 2s","date":"2011-10-06T17:39:44.239Z","type":"message"}
{"nick":"DrPizza","reason":"Read error: Connection reset by peer","date":"2011-10-06T17:40:09.685Z","type":"quit"}
{"nick":"DrPizza","date":"2011-10-06T17:41:28.235Z","type":"join"}
{"nick":"bnoordhuis","message":"igorzi piscisaureus: call in 5?","date":"2011-10-06T17:57:07.396Z","type":"message"}
{"nick":"piscisaureus","message":"I'm fine with that","date":"2011-10-06T17:57:15.589Z","type":"message"}
{"nick":"igorzi_","date":"2011-10-06T17:57:55.588Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: igorzi_: delay it a bit. I have to upgrade my skype credit","date":"2011-10-06T17:59:46.148Z","type":"message"}
{"nick":"igorzi","reason":"Ping timeout: 252 seconds","date":"2011-10-06T18:01:08.690Z","type":"quit"}
{"nick":"bnoordhuis","message":"piscisaureus: what do you need skype credit for?","date":"2011-10-06T18:01:26.663Z","type":"message"}
{"nick":"piscisaureus","message":"call igor","date":"2011-10-06T18:01:44.004Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus: oh, i didn't realize you needed credit for that.","date":"2011-10-06T18:02:01.954Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: so we need to get that string concat optimization","date":"2011-10-06T18:03:51.463Z","type":"message"}
{"nick":"ryah","message":"back in ...","date":"2011-10-06T18:03:54.527Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: want to join the call?","date":"2011-10-06T18:04:05.300Z","type":"message"}
{"nick":"ryah","message":"no, im in a meeting","date":"2011-10-06T18:04:12.267Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: it's not just that (i think) - the callback mechanism seems to hit an extreme slow case in v8","date":"2011-10-06T18:05:21.456Z","type":"message"}
{"nick":"bnoordhuis","message":"but i'll peek around","date":"2011-10-06T18:05:33.363Z","type":"message"}
{"nick":"ryah","message":"why do you think that?","date":"2011-10-06T18:05:50.596Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus igorzi_: 447235   99.5%    LazyCompile: *afterWrite net_uv.js:401","date":"2011-10-06T18:07:16.831Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: ^-- ouch","date":"2011-10-06T18:12:12.844Z","type":"message"}
{"nick":"AvianFlu","date":"2011-10-06T18:17:09.179Z","type":"join"}
{"nick":"piscisaureus_","date":"2011-10-06T18:24:19.937Z","type":"join"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2011-10-06T18:28:22.553Z","type":"quit"}
{"nick":"piscisaureus","message":"bnoordhuis: http://twitpic.com/6w3q7z/full","date":"2011-10-06T18:56:39.118Z","type":"message"}
{"nick":"piscisaureus","message":"iow array.shift hurts","date":"2011-10-06T18:57:57.079Z","type":"message"}
{"nick":"piscisaureus","message":"aaah!","date":"2011-10-06T18:58:04.603Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: call me again when you're back","date":"2011-10-06T18:58:15.751Z","type":"message"}
{"nick":"igorzi_","message":"isaacs: i tried playing with npm on windows.. i think i'm running into the tar issue that you mentioned.","date":"2011-10-06T19:01:08.958Z","type":"message"}
{"nick":"igorzi_","message":"Could not unpack C:\\Users\\igorzi\\npm-cache\\npm\\1.0.94\\package.tgz to C:\\Users\\igorzi\\npm-cache\\npm\\1.0.94","date":"2011-10-06T19:01:20.963Z","type":"message"}
{"nick":"creationix|work","message":"you guys are removing .errno from fs exceptions right?","date":"2011-10-06T19:01:38.118Z","type":"message"}
{"nick":"piscisaureus","message":"creationix|work: we may not remove it","date":"2011-10-06T19:01:57.219Z","type":"message"}
{"nick":"piscisaureus","message":"creationix|work: but we will no longer use numbers - they'll be strings","date":"2011-10-06T19:02:15.130Z","type":"message"}
{"nick":"creationix|work","message":"ok, thanks","date":"2011-10-06T19:02:31.658Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: so it's array.shift? i don't see that with gprof","date":"2011-10-06T19:04:39.015Z","type":"message"}
{"nick":"bnoordhuis","message":"but it doesn't sound implausible","date":"2011-10-06T19:04:54.968Z","type":"message"}
{"nick":"piscisaureus","message":"let me try fixing it","date":"2011-10-06T19:08:04.514Z","type":"message"}
{"nick":"isaacs","message":"igorzi_: yeah, it looks like the issue is the number of arguments gets too long","date":"2011-10-06T19:08:26.634Z","type":"message"}
{"nick":"isaacs","message":"igorzi_: is there some way to increase what cmd will accept?","date":"2011-10-06T19:08:38.224Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: when I turn writeRequests into a linked list bug node-1697 kicks in","date":"2011-10-06T19:17:13.367Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: linked list in js or c land?","date":"2011-10-06T19:18:15.270Z","type":"message"}
{"nick":"piscisaureus","message":"js-land","date":"2011-10-06T19:18:23.971Z","type":"message"}
{"nick":"igorzi_","message":"isaacs: what are the arguments that you're passing?","date":"2011-10-06T19:20:07.172Z","type":"message"}
{"nick":"isaacs","message":"igorzi_: every file in the package","date":"2011-10-06T19:22:42.963Z","type":"message"}
{"nick":"isaacs","message":"i could loop through them and do tar -a, it'd be much slower","date":"2011-10-06T19:23:30.484Z","type":"message"}
{"nick":"igorzi_","message":"can you pls paste the exact cmd-line that's failing?","date":"2011-10-06T19:24:35.229Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00024c1d441\u000f \u000310\u000f/ node.gyp \u0002:\u000f Fix gyp build - http://git.io/mB6wog","date":"2011-10-06T19:26:09.723Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ^ try that","date":"2011-10-06T19:28:08.946Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307many-writes-fix\u000f * r\u0002a50c282\u000f \u000310\u000f/ lib/net_uv.js \u0002:\u000f Socket write speed - http://git.io/M57qAg","date":"2011-10-06T19:28:13.245Z","type":"message"}
{"nick":"piscisaureus","message":"or rather that ^","date":"2011-10-06T19:28:19.260Z","type":"message"}
{"nick":"isaacs","message":"igorzi_: it's generated programmatically, but it'd be something like tar -zcvf path/to/package.tgz giant list of files...","date":"2011-10-06T19:31:00.074Z","type":"message"}
{"nick":"isaacs","message":"igorzi_: it'll be in your npm-debug.log file that's generated when it fails to install","date":"2011-10-06T19:31:18.427Z","type":"message"}
{"nick":"isaacs","message":"igorzi_: 554 files","date":"2011-10-06T19:32:29.654Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: what's that? :/","date":"2011-10-06T19:32:40.240Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: test-net-write-callbacks optimization","date":"2011-10-06T19:33:04.419Z","type":"message"}
{"nick":"piscisaureus","message":"50s -> 10s","date":"2011-10-06T19:33:10.864Z","type":"message"}
{"nick":"piscisaureus","message":"still worse than v0.4","date":"2011-10-06T19:33:16.243Z","type":"message"}
{"nick":"ryah","message":"ok","date":"2011-10-06T19:33:54.575Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307master\u000f * r\u0002311fe73\u000f \u000310\u000f/ (41 files in 8 dirs)\u0002:\u000f ","date":"2011-10-06T19:34:55.832Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Upgrade libuv to 60c639f","date":"2011-10-06T19:34:55.992Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Also remove unused src/stdio_wrap.cc - http://git.io/ffVsDw","date":"2011-10-06T19:34:55.992Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://gist.github.com/3a654fe9fac6535c27dd","date":"2011-10-06T19:35:10.030Z","type":"message"}
{"nick":"ryah","message":"do we even need to keep a list of the writeReqs ?","date":"2011-10-06T19:41:24.893Z","type":"message"}
{"nick":"igorzi_","message":"isaacs: this is using tar.exe that comes with git?","date":"2011-10-06T19:43:39.003Z","type":"message"}
{"nick":"isaacs","message":"igorzi_: no, it's using a statically compiled bsdtar","date":"2011-10-06T19:44:33.416Z","type":"message"}
{"nick":"igorzi_","message":"isaacs: http://blogs.msdn.com/b/oldnewthing/archive/2003/12/10/56028.aspx and http://support.microsoft.com/kb/830473","date":"2011-10-06T19:48:00.240Z","type":"message"}
{"nick":"isaacs","message":"heh, great.","date":"2011-10-06T19:48:58.975Z","type":"message"}
{"nick":"isaacs","message":"so, either use tar -a, or tar.js","date":"2011-10-06T19:49:11.560Z","type":"message"}
{"nick":"mraleph","message":"ryah: I know, I tested it several times before landing. I have not looked at the reasons yet.","date":"2011-10-06T19:57:07.814Z","type":"message"}
{"nick":"mraleph","message":"bnoordhuis: no, I don't think there is one.","date":"2011-10-06T19:58:56.934Z","type":"message"}
{"nick":"bnoordhuis","message":"mraleph: ah, too bad","date":"2011-10-06T19:59:09.074Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus: what's wrong with those 99%?","date":"2011-10-06T19:59:45.230Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus: yes, array.shift is O(n) in most cases. don't use it in hot places.","date":"2011-10-06T20:03:19.810Z","type":"message"}
{"nick":"mraleph","message":"in a sense it's even worse than pure O(n) cause it allocates and allocates.","date":"2011-10-06T20:04:09.875Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: spending 99% of 50s LazyCompiling the same function... that's bad right?","date":"2011-10-06T20:13:40.578Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: but it happened only once so nvm","date":"2011-10-06T20:13:48.014Z","type":"message"}
{"nick":"mraleph","message":"it's not lazycompiling","date":"2011-10-06T20:13:55.787Z","type":"message"}
{"nick":"mraleph","message":"it means that function was lazycompiled","date":"2011-10-06T20:14:07.145Z","type":"message"}
{"nick":"piscisaureus","message":"aah","date":"2011-10-06T20:14:15.567Z","type":"message"}
{"nick":"piscisaureus","message":"ok","date":"2011-10-06T20:14:20.476Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: actually I think you're right, we don't need a list of requests at all","date":"2011-10-06T20:14:38.180Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: we should just keep a counter, that's it","date":"2011-10-06T20:14:45.678Z","type":"message"}
{"nick":"piscisaureus","message":"although concatenating strings may also be a good idea","date":"2011-10-06T20:15:09.557Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307many-writes-fix\u000f * r\u0002065c6f4\u000f \u000310\u000f/ lib/net_uv.js \u0002:\u000f Simplify writeReq handling in net_uv - http://git.io/8LDmIQ","date":"2011-10-06T20:18:26.098Z","type":"message"}
{"nick":"ryah","message":"but the string concat needs to happen before we call into libuv","date":"2011-10-06T20:18:46.109Z","type":"message"}
{"nick":"ryah","message":"currently the model is to call into libuv on each write","date":"2011-10-06T20:19:29.822Z","type":"message"}
{"nick":"piscisaureus","message":"I know","date":"2011-10-06T20:21:47.885Z","type":"message"}
{"nick":"piscisaureus","message":"we could change that though","date":"2011-10-06T20:21:52.750Z","type":"message"}
{"nick":"piscisaureus","message":"atm socket.write doesn't return the promise so there's no need to create one immediately","date":"2011-10-06T20:23:05.217Z","type":"message"}
{"nick":"ryah","message":"wow!","date":"2011-10-06T20:23:22.444Z","type":"message"}
{"nick":"ryah","message":"we're faster than v0.4.10 on http_simple with this many-writes-fix","date":"2011-10-06T20:23:35.666Z","type":"message"}
{"nick":"piscisaureus","message":"raw data pls (:","date":"2011-10-06T20:24:05.193Z","type":"message"}
{"nick":"ryah","message":"ok.. one sec","date":"2011-10-06T20:24:22.195Z","type":"message"}
{"nick":"piscisaureus_","date":"2011-10-06T20:29:58.674Z","type":"join"}
{"nick":"bnoordhuis","message":"pummel/test-net-write-callbacks: 0.4 vs 0.5 == 1.9s vs 8.6s","date":"2011-10-06T20:30:14.153Z","type":"message"}
{"nick":"bnoordhuis","message":"but we're not doing the string concat thing yet","date":"2011-10-06T20:30:37.306Z","type":"message"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2011-10-06T20:30:44.851Z","type":"quit"}
{"nick":"igorzi_","message":"piscisaureus: ryah: it also fixes https://github.com/joyent/node/issues/1697, right?","date":"2011-10-06T20:31:16.794Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi_: no :-(","date":"2011-10-06T20:31:26.030Z","type":"message"}
{"nick":"creationix|work","message":"ohh, time up pull in upstream uv changes","date":"2011-10-06T20:31:37.023Z","type":"message"}
{"nick":"piscisaureus","message":"creationix|work: it's not a libuv fix","date":"2011-10-06T20:31:53.939Z","type":"message"}
{"nick":"creationix|work","message":"oh I see, the CIA bot is sending in node changes too","date":"2011-10-06T20:32:21.228Z","type":"message"}
{"nick":"creationix|work","message":"well, still I seemed to have been a few revisions behind anyway","date":"2011-10-06T20:32:43.267Z","type":"message"}
{"nick":"bnoordhuis","message":"fun fact - writing 500k buffer objects with 0.4 takes minutes","date":"2011-10-06T20:32:48.795Z","type":"message"}
{"nick":"creationix|work","message":"updating is never a bad idea unless it breaks stuff","date":"2011-10-06T20:32:50.491Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi_: oh it does fix 1697 but the callback ordering is still not guaranteed","date":"2011-10-06T20:33:04.678Z","type":"message"}
{"nick":"igorzi_","message":"piscisaureus: right, that was a problem because node depended on it, but with this change it no loner does, right?","date":"2011-10-06T20:33:30.593Z","type":"message"}
{"nick":"creationix|work","message":"fun fact -  building luvit and all dependencies including libuv takes 4 seconds","date":"2011-10-06T20:33:35.848Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi_: that's true","date":"2011-10-06T20:33:39.074Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi_: maybe we should just leave it as it is","date":"2011-10-06T20:33:54.760Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi_: at least it gets much less important","date":"2011-10-06T20:34:14.374Z","type":"message"}
{"nick":"piscisaureus","message":"creationix|work: yes, awesome :-)","date":"2011-10-06T20:34:25.234Z","type":"message"}
{"nick":"piscisaureus","message":"creationix|work: why are you doing luvit btw? just for fun or do you have a sponsor?","date":"2011-10-06T20:34:46.596Z","type":"message"}
{"nick":"creationix|work","message":"fun","date":"2011-10-06T20:34:57.861Z","type":"message"}
{"nick":"creationix|work","message":"I wish I has a sponsor","date":"2011-10-06T20:35:02.578Z","type":"message"}
{"nick":"creationix|work","message":"but since my work is in limbo, they are flexible right now","date":"2011-10-06T20:35:10.583Z","type":"message"}
{"nick":"piscisaureus","message":"creationix|work: I am sure there are people that want to hire you","date":"2011-10-06T20:35:39.823Z","type":"message"}
{"nick":"piscisaureus","message":":-)","date":"2011-10-06T20:35:41.140Z","type":"message"}
{"nick":"creationix|work","message":":)","date":"2011-10-06T20:35:51.401Z","type":"message"}
{"nick":"creationix|work","message":"not for luvit though, for node","date":"2011-10-06T20:35:58.757Z","type":"message"}
{"nick":"piscisaureus","message":"creationix|work: you don't want node jobs no more?","date":"2011-10-06T20:36:44.116Z","type":"message"}
{"nick":"creationix|work","message":"no, node is fine","date":"2011-10-06T20:36:55.081Z","type":"message"}
{"nick":"creationix|work","message":"just saying, my pet project isn't big enough to get me a job no it's own","date":"2011-10-06T20:37:08.932Z","type":"message"}
{"nick":"creationix|work","message":"which is fine","date":"2011-10-06T20:37:13.198Z","type":"message"}
{"nick":"creationix|work","message":"I've got tons of offers for node related stuff and that's really cool","date":"2011-10-06T20:37:28.566Z","type":"message"}
{"nick":"ryah","message":"okay - im wrong","date":"2011-10-06T20:39:29.109Z","type":"message"}
{"nick":"ryah","message":"many-writes-fix 065c6f4, v0.5.9-pre","date":"2011-10-06T20:39:53.636Z","type":"message"}
{"nick":"ryah","message":"5789.43","date":"2011-10-06T20:39:53.794Z","type":"message"}
{"nick":"ryah","message":"5808.97","date":"2011-10-06T20:39:53.794Z","type":"message"}
{"nick":"ryah","message":"5792.77","date":"2011-10-06T20:39:53.794Z","type":"message"}
{"nick":"ryah","message":"5842.13","date":"2011-10-06T20:39:53.794Z","type":"message"}
{"nick":"ryah","message":"5646.75","date":"2011-10-06T20:39:56.204Z","type":"message"}
{"nick":"ryah","message":"v0.4.10","date":"2011-10-06T20:39:58.710Z","type":"message"}
{"nick":"ryah","message":"5907.98","date":"2011-10-06T20:40:01.168Z","type":"message"}
{"nick":"ryah","message":"5862.23","date":"2011-10-06T20:40:03.785Z","type":"message"}
{"nick":"ryah","message":"5969.60","date":"2011-10-06T20:40:06.079Z","type":"message"}
{"nick":"ryah","message":"5893.70","date":"2011-10-06T20:40:08.677Z","type":"message"}
{"nick":"ryah","message":"6056.52","date":"2011-10-06T20:40:11.176Z","type":"message"}
{"nick":"ryah","message":"^-- req/sec on ab -t 10 -c 100 http://127.0.0.1:8000/bytes/12","date":"2011-10-06T20:40:13.582Z","type":"message"}
{"nick":"igorzi_","reason":"Ping timeout: 252 seconds","date":"2011-10-06T20:46:52.633Z","type":"quit"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-10-06T20:48:05.024Z","type":"quit"}
{"nick":"indutny","message":"aarrgh","date":"2011-10-06T20:50:54.211Z","type":"message"}
{"nick":"indutny","message":"why some C libs are using `namespace` as variable name","date":"2011-10-06T20:51:06.113Z","type":"message"}
{"nick":"igorzi","date":"2011-10-06T20:53:02.602Z","type":"join"}
{"nick":"ryah","message":"for completeness","date":"2011-10-06T20:53:32.111Z","type":"message"}
{"nick":"ryah","message":"https://gist.github.com/07a7a1d56d7274c98df1","date":"2011-10-06T20:53:32.750Z","type":"message"}
{"nick":"piscisaureus_","date":"2011-10-06T20:54:41.065Z","type":"join"}
{"nick":"piscisaureus_","reason":"Remote host closed the connection","date":"2011-10-06T20:55:59.664Z","type":"quit"}
{"nick":"piscisaureus_","date":"2011-10-06T20:56:32.257Z","type":"join"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2011-10-06T20:58:45.361Z","type":"quit"}
{"nick":"bnoordhuis","message":"pummel/test-net-write-callbacks with master: 1.682s","date":"2011-10-06T20:59:12.565Z","type":"message"}
{"nick":"piscisaureus","message":"huh","date":"2011-10-06T20:59:25.795Z","type":"message"}
{"nick":"piscisaureus","message":"how","date":"2011-10-06T20:59:27.274Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://gist.github.com/a7182192d0bf451c1cd0","date":"2011-10-06T20:59:56.773Z","type":"message"}
{"nick":"bnoordhuis","message":"as a rough sketch","date":"2011-10-06T21:00:29.778Z","type":"message"}
{"nick":"piscisaureus","message":"ah","date":"2011-10-06T21:00:49.583Z","type":"message"}
{"nick":"piscisaureus","message":"so better than v0.4 :-)","date":"2011-10-06T21:00:54.899Z","type":"message"}
{"nick":"ryah","message":"https://gist.github.com/5fa392b3ed63ef4699fb","date":"2011-10-06T21:01:08.182Z","type":"message"}
{"nick":"piscisaureus","message":"I've got another idea - trying it","date":"2011-10-06T21:01:51.094Z","type":"message"}
{"nick":"piscisaureus","message":"but bnoordhuis' patch seems to be good","date":"2011-10-06T21:02:10.509Z","type":"message"}
{"nick":"bnoordhuis","message":"well, it's a first step","date":"2011-10-06T21:02:36.506Z","type":"message"}
{"nick":"bnoordhuis","message":"i think we should have a 'end of tick' callback so we can batch the write data","date":"2011-10-06T21:03:51.966Z","type":"message"}
{"nick":"ryah","message":"what if data is a buffer?","date":"2011-10-06T21:05:49.497Z","type":"message"}
{"nick":"bnoordhuis","message":"disregard that for now, it's just a quick test","date":"2011-10-06T21:06:52.606Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-10-06T21:07:08.168Z","type":"message"}
{"nick":"bnoordhuis","message":"assuming you're referring to the patch","date":"2011-10-06T21:07:08.329Z","type":"message"}
{"nick":"piscisaureus","message":"on my mac `ab` \"hangs\" after 15k requests","date":"2011-10-06T21:07:26.824Z","type":"message"}
{"nick":"piscisaureus","message":"but I did all the stuff that ryah suggested yesterday","date":"2011-10-06T21:07:35.866Z","type":"message"}
{"nick":"creationix|work","message":"piscisaureus: does netstat show thousands of TIME_WAIT connections?","date":"2011-10-06T21:08:06.813Z","type":"message"}
{"nick":"piscisaureus","message":"not really","date":"2011-10-06T21:08:52.746Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: ulimit -n ?","date":"2011-10-06T21:10:51.591Z","type":"message"}
{"nick":"piscisaureus","message":"unlimited","date":"2011-10-06T21:11:07.264Z","type":"message"}
{"nick":"piscisaureus","message":"sudo ulimit -n works but I can't bump it over 12000","date":"2011-10-06T21:11:25.982Z","type":"message"}
{"nick":"piscisaureus","message":"after that ulimit -n reports 2560 :-/","date":"2011-10-06T21:11:45.441Z","type":"message"}
{"nick":"ryah","message":"https://raw.github.com/gist/1268686/97295f4bde6fa0a84d0da13186ae17fab61577e4/gistfile1.txt <-- comparison of syscalls","date":"2011-10-06T21:12:21.127Z","type":"message"}
{"nick":"ryah","message":"for a single request","date":"2011-10-06T21:12:48.015Z","type":"message"}
{"nick":"ryah","message":"so - getpeername is being called. we need to get rid of that","date":"2011-10-06T21:13:24.948Z","type":"message"}
{"nick":"ryah","message":"two unnecessary fcntl","date":"2011-10-06T21:13:57.149Z","type":"message"}
{"nick":"ryah","message":"one unnecessary read()","date":"2011-10-06T21:14:05.375Z","type":"message"}
{"nick":"piscisaureus_","date":"2011-10-06T21:14:10.306Z","type":"join"}
{"nick":"piscisaureus","message":"aaah - at a reboot all that sysctl gets reverted :-/","date":"2011-10-06T21:15:41.741Z","type":"message"}
{"nick":"creationix|work","message":"what's the difference between uv_fs_link and uv_fs_symlink?","date":"2011-10-06T21:18:13.635Z","type":"message"}
{"nick":"piscisaureus","message":"hard vs soft link","date":"2011-10-06T21:18:58.258Z","type":"message"}
{"nick":"creationix|work","message":"ahh, I forgot about hardlinks","date":"2011-10-06T21:20:20.464Z","type":"message"}
{"nick":"creationix|work","message":"I was thinking it was some windows thing","date":"2011-10-06T21:20:26.476Z","type":"message"}
{"nick":"CoverSlide","message":"meh, who needs hardlinks","date":"2011-10-06T21:20:41.492Z","type":"message"}
{"nick":"piscisaureus","message":"creationix|work: symlink has a windows-specific option","date":"2011-10-06T21:21:30.578Z","type":"message"}
{"nick":"creationix|work","message":"right, I see that","date":"2011-10-06T21:21:44.037Z","type":"message"}
{"nick":"piscisaureus","message":"creationix|work: because it distinguishes different types of symlinks","date":"2011-10-06T21:21:44.749Z","type":"message"}
{"nick":"bnoordhuis","message":"bleh, i can narrow the gap but 0.5 is still 5% slower than 0.4 on http_simple","date":"2011-10-06T21:22:19.974Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: what fcntl calls are those?","date":"2011-10-06T21:23:20.775Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, i know what they are","date":"2011-10-06T21:24:25.555Z","type":"message"}
{"nick":"bnoordhuis","message":"the first two set close-on-exec right?","date":"2011-10-06T21:25:01.736Z","type":"message"}
{"nick":"ryah","message":"not sure. im trying to eliminate that last read()","date":"2011-10-06T21:27:09.702Z","type":"message"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-10-06T21:27:21.999Z","type":"quit"}
{"nick":"bnoordhuis","message":"i see this btw: https://gist.github.com/ff35d52808573e2a0c28","date":"2011-10-06T21:29:36.354Z","type":"message"}
{"nick":"bnoordhuis","message":"on linux libuv is actually more efficient than v0.4","date":"2011-10-06T21:29:57.888Z","type":"message"}
{"nick":"bnoordhuis","action":"loves accept4()","date":"2011-10-06T21:30:03.000Z","type":"action"}
{"nick":"piscisaureus_","reason":"Quit: Leaving.","date":"2011-10-06T21:32:16.994Z","type":"quit"}
{"nick":"ryah","message":"where are the read and writes?","date":"2011-10-06T21:33:14.742Z","type":"message"}
{"nick":"ryah","message":"accept4 is pretty hot","date":"2011-10-06T21:33:22.977Z","type":"message"}
{"nick":"creationix|work","message":"what is the \"flags\" argument for uv_fs_readdir?","date":"2011-10-06T21:33:45.914Z","type":"message"}
{"nick":"bnoordhuis","message":"checking those now","date":"2011-10-06T21:33:47.193Z","type":"message"}
{"nick":"bnoordhuis","message":"creationix|work: 0 because it's mostly a no-op now","date":"2011-10-06T21:35:16.615Z","type":"message"}
{"nick":"creationix|work","message":"so should I expose it to my lua or just hard-code it to 0 in C?","date":"2011-10-06T21:36:02.464Z","type":"message"}
{"nick":"creationix|work","message":"meaning, will it have a meaning in the future?","date":"2011-10-06T21:36:17.764Z","type":"message"}
{"nick":"CoverSlide","message":"o rly?","date":"2011-10-06T21:37:58.691Z","type":"message"}
{"nick":"CoverSlide","message":"any reason why libev wouldn't use accept4?","date":"2011-10-06T21:38:46.478Z","type":"message"}
{"nick":"ryah","message":"libev doesnt accept","date":"2011-10-06T21:39:57.097Z","type":"message"}
{"nick":"bnoordhuis","message":"creationix|work: we'll probably start to use it someday","date":"2011-10-06T21:40:46.376Z","type":"message"}
{"nick":"creationix|work","message":"ok","date":"2011-10-06T21:41:09.104Z","type":"message"}
{"nick":"bnoordhuis","message":"removing the getpeername() call seems to boost performance with ~1-1.25%","date":"2011-10-06T21:41:43.442Z","type":"message"}
{"nick":"ryah","message":"yey","date":"2011-10-06T21:44:58.686Z","type":"message"}
{"nick":"ryah","message":"where is that call? in libuv?","date":"2011-10-06T21:45:09.753Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: no, in net_uv.js","date":"2011-10-06T21:46:05.416Z","type":"message"}
{"nick":"bnoordhuis","message":"let me write a quick patch","date":"2011-10-06T21:46:26.747Z","type":"message"}
{"nick":"creationix|work","message":"when I was comparing luvit to node for simple http benchmarks, mraleph discovered that removing all unneeded javascript from the node loop made it twice as fast","date":"2011-10-06T21:47:30.642Z","type":"message"}
{"nick":"creationix|work","message":"I don't do getpeername or anything automatically in luvit yet","date":"2011-10-06T21:47:44.384Z","type":"message"}
{"nick":"creationix|work","message":"just parse the incoming http headers and give the user the stream objects","date":"2011-10-06T21:47:58.224Z","type":"message"}
{"nick":"creationix|work","message":"not sure if that helps, people depend on about every feature in there","date":"2011-10-06T21:48:25.261Z","type":"message"}
{"nick":"creationix|work","message":"but maybe some could be put behind lazy getters","date":"2011-10-06T21:48:36.785Z","type":"message"}
{"nick":"bnoordhuis","message":"that's what i'm doing with peername","date":"2011-10-06T21:49:15.249Z","type":"message"}
{"nick":"bnoordhuis","message":"finally a legitimate opportunity to use __defineGetter__ and make js zealots cry","date":"2011-10-06T21:50:11.460Z","type":"message"}
{"nick":"creationix|work","message":"plus he discovered that the C++/js boundary is costing too much and files a V8 bug","date":"2011-10-06T21:50:23.584Z","type":"message"}
{"nick":"creationix|work","message":"*filed","date":"2011-10-06T21:50:40.315Z","type":"message"}
{"nick":"ryah","message":"hm","date":"2011-10-06T21:50:49.142Z","type":"message"}
{"nick":"isaacs","date":"2011-10-06T21:50:55.695Z","type":"join"}
{"nick":"ryah","message":"it might be that we're creating and closing timers for each req...","date":"2011-10-06T21:50:58.740Z","type":"message"}
{"nick":"ryah","message":"i just noticed this..","date":"2011-10-06T21:51:07.013Z","type":"message"}
{"nick":"piscisaureus_","date":"2011-10-06T21:53:02.445Z","type":"join"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Ryan Dahl\u000f \u000307master\u000f * r\u0002e3bcecd\u000f \u000310\u000f/ src/unix/stream.c \u0002:\u000f unix: clean up messy code - http://git.io/2vCL2w","date":"2011-10-06T21:54:12.610Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Ryan Dahl\u000f \u000307master\u000f * r\u0002f60cf1d\u000f \u000310\u000f/ Makefile \u0002:\u000f Dont build tests on 'make all' - http://git.io/QKUKOw","date":"2011-10-06T21:54:12.771Z","type":"message"}
{"nick":"bnoordhuis","message":"creationix|work: yeah, c++ <-> js callbacks is what we try to avoid as much as possible","date":"2011-10-06T21:56:16.889Z","type":"message"}
{"nick":"piscisaureus_","message":"maybe we can use 1 timer for everything?","date":"2011-10-06T21:57:04.668Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_ ryah: https://github.com/bnoordhuis/node/commit/aa0907a","date":"2011-10-06T21:59:33.744Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307master\u000f * r\u0002c344fbc\u000f \u000310\u000f/ src/node.cc \u0002:\u000f Add process.uvCounters() for debugging - http://git.io/_OtXag","date":"2011-10-06T21:59:55.886Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: brackets","date":"2011-10-06T22:00:03.259Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: maybe memorize the getpeername() call?","date":"2011-10-06T22:00:29.382Z","type":"message"}
{"nick":"ryah","message":"^-- i added this call to help us debug","date":"2011-10-06T22:00:58.878Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307master\u000f * r\u0002f018be3\u000f \u000310\u000f/ benchmark/http_simple.js \u0002:\u000f Print libuv counters after http_simple exits - http://git.io/RUxhBA","date":"2011-10-06T22:02:44.805Z","type":"message"}
{"nick":"ryah","message":"here's what i get after i run the http_simple.js benchmark with ab","date":"2011-10-06T22:04:02.800Z","type":"message"}
{"nick":"ryah","message":"libuv counters { eio_init: 1, req_init: 0, handle_init: 50532, stream_init: 0, tcp_init: 50009, udp_init: 0, pipe_init: 6, tty_init: 1, prepare_init: 1, check_init: 2, idle_init: 3, async_init: 3, timer_init: 505, process_init: 2, fs_event_init: 0 }","date":"2011-10-06T22:04:04.717Z","type":"message"}
{"nick":"piscisaureus_","message":"stream_init counter looks broken","date":"2011-10-06T22:05:29.135Z","type":"message"}
{"nick":"piscisaureus_","message":"btw I have to look at this for windows - I have never been really precise with this","date":"2011-10-06T22:06:19.258Z","type":"message"}
{"nick":"piscisaureus_","message":"maybe we should have tests","date":"2011-10-06T22:06:23.123Z","type":"message"}
{"nick":"ryah","message":"505 timers","date":"2011-10-06T22:07:07.863Z","type":"message"}
{"nick":"ryah","message":"^-- not good","date":"2011-10-06T22:07:10.802Z","type":"message"}
{"nick":"bnoordhuis","message":"https://github.com/bnoordhuis/node/commit/38dce40 <- take two","date":"2011-10-06T22:07:16.149Z","type":"message"}
{"nick":"piscisaureus_","action":"shrugs","date":"2011-10-06T22:07:19.023Z","type":"action"}
{"nick":"piscisaureus_","message":"timers are cheap","date":"2011-10-06T22:07:25.275Z","type":"message"}
{"nick":"ryah","message":"i dont know","date":"2011-10-06T22:07:32.295Z","type":"message"}
{"nick":"piscisaureus_","message":"maybe not in libev","date":"2011-10-06T22:07:32.569Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: did you test with -c 500?","date":"2011-10-06T22:07:38.095Z","type":"message"}
{"nick":"piscisaureus_","message":"on windows they are cheap","date":"2011-10-06T22:07:43.070Z","type":"message"}
{"nick":"ryah","message":"they might be cheap but node is not designed to be using multiple timers ","date":"2011-10-06T22:08:01.635Z","type":"message"}
{"nick":"ryah","message":"i dont understand why this would be happening...","date":"2011-10-06T22:08:15.792Z","type":"message"}
{"nick":"piscisaureus_","message":"I think we changed it","date":"2011-10-06T22:08:28.020Z","type":"message"}
{"nick":"ryah","message":"ab -t 10 -c 100 http://127.0.0.1:8000/bytes/12 ","date":"2011-10-06T22:08:31.608Z","type":"message"}
{"nick":"piscisaureus_","message":"long time ago","date":"2011-10-06T22:08:32.971Z","type":"message"}
{"nick":"bnoordhuis","message":"ah... it could've been the http timeout timer","date":"2011-10-06T22:08:51.130Z","type":"message"}
{"nick":"piscisaureus_","message":"oh hmm...","date":"2011-10-06T22:09:02.324Z","type":"message"}
{"nick":"piscisaureus_","message":"does http use setTimeout or TimerWrap?","date":"2011-10-06T22:09:34.639Z","type":"message"}
{"nick":"bnoordhuis","message":"setTimeout","date":"2011-10-06T22:09:41.383Z","type":"message"}
{"nick":"ryah","message":"well - neither","date":"2011-10-06T22:09:49.054Z","type":"message"}
{"nick":"ryah","message":"it uses the linked list in timer.js","date":"2011-10-06T22:09:57.864Z","type":"message"}
{"nick":"piscisaureus_","message":"that was changed to actually remove the timer as soon as the list is completely empty","date":"2011-10-06T22:10:36.361Z","type":"message"}
{"nick":"piscisaureus_","message":"so I assume that happens 500x in this test","date":"2011-10-06T22:10:52.840Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: lgtm","date":"2011-10-06T22:10:55.791Z","type":"message"}
{"nick":"bnoordhuis","message":"https://github.com/joyent/node/blob/master/lib/http.js#L1332 <- it's this","date":"2011-10-06T22:11:07.348Z","type":"message"}
{"nick":"ryah","message":"piscisaureus_: yeah that might be the case","date":"2011-10-06T22:11:09.720Z","type":"message"}
{"nick":"piscisaureus_","message":"I'm pretty sure- I did that","date":"2011-10-06T22:11:22.129Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: (pretty 'y' on github to have it expand the link)","date":"2011-10-06T22:11:29.756Z","type":"message"}
{"nick":"bnoordhuis","message":"oh wait, that's for client http requests","date":"2011-10-06T22:11:35.680Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, i thought i did","date":"2011-10-06T22:11:39.811Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, i did - apparently my quick 'copy address bar to clipboard' script doesn't pick that up","date":"2011-10-06T22:12:16.645Z","type":"message"}
{"nick":"ryah","message":"the socket timeout is 2minutes","date":"2011-10-06T22:12:18.681Z","type":"message"}
{"nick":"ryah","message":"why would the timer link list empty?","date":"2011-10-06T22:12:26.001Z","type":"message"}
{"nick":"ryah","message":"ab is not running for 2 minutes","date":"2011-10-06T22:12:35.969Z","type":"message"}
{"nick":"bnoordhuis","message":"https://github.com/joyent/node/blob/f018be3b5f6dad3a92cf41706ad5ed74dc221f6e/lib/http.js#L1332 <- full link","date":"2011-10-06T22:12:51.684Z","type":"message"}
{"nick":"piscisaureus_","message":"ryah: because the timer gets cancelled as soon as the timer becomes irrelevant","date":"2011-10-06T22:13:10.449Z","type":"message"}
{"nick":"ryah","message":"piscisaureus_: true...","date":"2011-10-06T22:13:16.950Z","type":"message"}
{"nick":"ryah","message":"piscisaureus_: yeah, i bet that's what it is","date":"2011-10-06T22:13:40.914Z","type":"message"}
{"nick":"piscisaureus_","message":"ryah: but the old timers are still there, maybe just use timer_legacy and test","date":"2011-10-06T22:14:24.637Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307many-writes-fix\u000f * r\u000238dce40\u000f \u000310\u000f/ lib/net_uv.js \u0002:\u000f ","date":"2011-10-06T22:15:30.451Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f net: remove unconditional getpeername() call","date":"2011-10-06T22:15:30.609Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Speeds up http_simple benchmark by about 1.0% - http://git.io/pT6b7A","date":"2011-10-06T22:15:30.609Z","type":"message"}
{"nick":"piscisaureus_","message":"on my mac the difference is still pretty big ","date":"2011-10-06T22:17:08.137Z","type":"message"}
{"nick":"piscisaureus_","message":"buffer/12 does 6638 on 0.4 and 5788 on master","date":"2011-10-06T22:17:53.258Z","type":"message"}
{"nick":"ryah","message":"curl http://localhost:8000/quit ","date":"2011-10-06T22:19:17.955Z","type":"message"}
{"nick":"ryah","message":"for the counters","date":"2011-10-06T22:19:20.625Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307many-writes-fix\u000f * r\u00024722842\u000f \u000310\u000f/ lib/net_uv.js \u0002:\u000f Socket write speed - http://git.io/Dndn4g","date":"2011-10-06T22:20:21.103Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307many-writes-fix\u000f * r\u00023507d19\u000f \u000310\u000f/ lib/net_uv.js \u0002:\u000f Simplify writeReq handling in net_uv - http://git.io/kaWWew","date":"2011-10-06T22:20:21.338Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307many-writes-fix\u000f * r\u0002d016d5c\u000f \u000310\u000f/ lib/net_uv.js \u0002:\u000f ","date":"2011-10-06T22:20:21.952Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f net: remove unconditional getpeername() call","date":"2011-10-06T22:20:22.107Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f Speeds up http_simple benchmark by about 1.0% - http://git.io/BqXqJw","date":"2011-10-06T22:20:22.107Z","type":"message"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-10-06T22:20:30.354Z","type":"quit"}
{"nick":"piscisaureus_","message":"—use-legacy is broken","date":"2011-10-06T22:23:11.932Z","type":"message"}
{"nick":"isaacs","date":"2011-10-06T22:26:40.800Z","type":"join"}
{"nick":"ryah","message":"here's what it looks like with curl","date":"2011-10-06T22:29:49.871Z","type":"message"}
{"nick":"ryah","message":"read(16, \"GET /bytes/12 HTTP/1.1\\r\\nUser-Agent: curl/7.20.0 (i386-apple-darwin10.3.0) libcurl/7.20.0 OpenSSL/0.9.8n zlib/1.2.5 libidn/1.18\\r\\nHost: localhost:8000\\r\\nAccept: */*\\r\\n\\r\\n\\0\", 65536)\t\t = 165 0","date":"2011-10-06T22:29:51.051Z","type":"message"}
{"nick":"ryah","message":"write(16, \"HTTP/1.1 200 OK\\r\\nContent-Type: text/plain\\r\\nContent-Length: 12\\r\\nConnection: keep-alive\\r\\n\\r\\nCCCCCCCCCCCC\\0\", 101)\t\t = 101 0","date":"2011-10-06T22:29:55.322Z","type":"message"}
{"nick":"ryah","message":"read(16, \"\\0\", 65536)\t\t = -1 Err#35","date":"2011-10-06T22:29:58.920Z","type":"message"}
{"nick":"ryah","message":"__semwait_signal(3075, 0, 1)\t\t = -1 Err#60","date":"2011-10-06T22:30:01.383Z","type":"message"}
{"nick":"ryah","message":"kevent(4, 4305515472, 0)\t\t = 1 0","date":"2011-10-06T22:30:04.004Z","type":"message"}
{"nick":"ryah","message":"read(16, \"\\0\", 65536)\t\t = 0 0","date":"2011-10-06T22:30:06.440Z","type":"message"}
{"nick":"ryah","message":"close(16)\t\t = 0 0","date":"2011-10-06T22:30:08.933Z","type":"message"}
{"nick":"ryah","message":"two extra reads","date":"2011-10-06T22:30:13.000Z","type":"message"}
{"nick":"ryah","message":"one for EAGAIN another for EOF","date":"2011-10-06T22:30:20.544Z","type":"message"}
{"nick":"ryah","message":"+ extra kevent","date":"2011-10-06T22:30:36.329Z","type":"message"}
{"nick":"ryah","message":"it's because of the extra write callback...","date":"2011-10-06T22:35:33.353Z","type":"message"}
{"nick":"ryah","message":"not extra - async","date":"2011-10-06T22:35:41.705Z","type":"message"}
{"nick":"bnoordhuis","message":"another odd thing","date":"2011-10-06T22:36:34.184Z","type":"message"}
{"nick":"bnoordhuis","message":"futex(0x223e098, FUTEX_WAKE_PRIVATE, 1) = 1 <- always happens on master, never on 0.4","date":"2011-10-06T22:36:41.969Z","type":"message"}
{"nick":"bnoordhuis","message":"futexes are what power pthread mutexes","date":"2011-10-06T22:36:56.940Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe v8?","date":"2011-10-06T22:37:31.655Z","type":"message"}
{"nick":"ryah","message":"probably","date":"2011-10-06T22:37:52.912Z","type":"message"}
{"nick":"ryah","message":"you can't get a stacktrace from syscalls from strace? grr","date":"2011-10-06T22:38:53.156Z","type":"message"}
{"nick":"ryah","message":"we need oracle enterprise linux","date":"2011-10-06T22:39:15.982Z","type":"message"}
{"nick":"bnoordhuis","message":"everything is better when it has enterprise in it","date":"2011-10-06T22:39:38.804Z","type":"message"}
{"nick":"piscisaureus_","message":"just wait till we get oracle enterprise node","date":"2011-10-06T22:39:55.751Z","type":"message"}
{"nick":"creationix|work","message":" /me is attempting to wrap uv_fs_event_init","date":"2011-10-06T22:41:38.720Z","type":"message"}
{"nick":"bnoordhuis","message":"one can dream...","date":"2011-10-06T22:41:42.280Z","type":"message"}
{"nick":"creationix|work","message":"darn spaces","date":"2011-10-06T22:42:00.957Z","type":"message"}
{"nick":"creationix|work","message":"is the JS API for watchfile going to change soon","date":"2011-10-06T22:42:58.463Z","type":"message"}
{"nick":"creationix|work","message":"it looks very different from what's in uv_fs_event_init","date":"2011-10-06T22:43:07.538Z","type":"message"}
{"nick":"bnoordhuis","message":"creationix|work: yes, it's going to change","date":"2011-10-06T22:44:13.915Z","type":"message"}
{"nick":"creationix|work","message":"ok, then I'll probably just expose it with the same semantics as the uv side","date":"2011-10-06T22:45:01.862Z","type":"message"}
{"nick":"creationix|work","message":"once I figure out how it works","date":"2011-10-06T22:45:06.192Z","type":"message"}
{"nick":"piscisaureus_","message":"I wonder why dtruss kills node","date":"2011-10-06T22:51:17.913Z","type":"message"}
{"nick":"piscisaureus_","message":"It always immediately exits","date":"2011-10-06T22:51:24.248Z","type":"message"}
{"nick":"ryah","message":"0.16788752 sec spent in read(2) calls that return 0 or -1 during benchmark","date":"2011-10-06T22:59:13.426Z","type":"message"}
{"nick":"ryah","message":"10.028 total time in bench","date":"2011-10-06T22:59:25.110Z","type":"message"}
{"nick":"ryah","message":"i.e. 1.6% spent in superfluous read syscalls","date":"2011-10-06T23:00:58.335Z","type":"message"}
{"nick":"piscisaureus","message":"I think that arguments object reification in Socket.write is more expensive","date":"2011-10-06T23:06:21.397Z","type":"message"}
{"nick":"piscisaureus","message":"eg the entire block with (if (typeof arguments[3] ... etc","date":"2011-10-06T23:06:46.062Z","type":"message"}
{"nick":"piscisaureus","message":"try to comment that out","date":"2011-10-06T23:06:54.588Z","type":"message"}
{"nick":"piscisaureus","message":"^-- ryah bnoordhuis","date":"2011-10-06T23:07:05.226Z","type":"message"}
{"nick":"bnoordhuis","message":"ab -c 100 -n 30000 <- master does 29997 reads more than 0.4 :/","date":"2011-10-06T23:07:56.597Z","type":"message"}
{"nick":"bnoordhuis","message":"the good news: master did 18400 syscalls less than 0.4 \\o/","date":"2011-10-06T23:09:16.070Z","type":"message"}
{"nick":"bnoordhuis","message":"so kill the superfluous read() and we have ourselves a killer","date":"2011-10-06T23:09:31.367Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: good point - but v0.4 has that same block","date":"2011-10-06T23:10:16.825Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: srsly that block is super heavy","date":"2011-10-06T23:10:36.813Z","type":"message"}
{"nick":"piscisaureus","message":"you'll get 10% speedup from that alone","date":"2011-10-06T23:10:47.647Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: try it","date":"2011-10-06T23:10:52.676Z","type":"message"}
{"nick":"ryah","message":"piscisaureus_: im not measuring a diffff","date":"2011-10-06T23:10:56.347Z","type":"message"}
{"nick":"piscisaureus","message":"are you sure","date":"2011-10-06T23:11:27.550Z","type":"message"}
{"nick":"piscisaureus","message":"for me the difference is massive","date":"2011-10-06T23:11:32.648Z","type":"message"}
{"nick":"ryah","message":"let me try with the many-writes-fix branch","date":"2011-10-06T23:12:51.212Z","type":"message"}
{"nick":"ryah","message":"oh wait","date":"2011-10-06T23:15:32.577Z","type":"message"}
{"nick":"ryah","message":"yes, i can repeat on many-writes-bix","date":"2011-10-06T23:16:12.775Z","type":"message"}
{"nick":"ryah","message":"yep this looks good","date":"2011-10-06T23:17:20.967Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: i'm fixing fs_utime and fs_futime tests on windows.  does this look ok to you? -  https://gist.github.com/1268982","date":"2011-10-06T23:23:07.113Z","type":"message"}
{"nick":"bnoordhuis","message":"if i cut out the extra read, master is 4.5% slower than v0.4, instead of 8.5% slower","date":"2011-10-06T23:23:28.021Z","type":"message"}
{"nick":"bnoordhuis","message":"(on average obviously)","date":"2011-10-06T23:23:37.889Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: how did you cut out the extra read?","date":"2011-10-06T23:23:51.775Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: by adding an unconditional return in uv__read() :)","date":"2011-10-06T23:24:14.311Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: can i see a diff?","date":"2011-10-06T23:24:38.771Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: sure - https://gist.github.com/b68bd1f8cdd443b2fa1e","date":"2011-10-06T23:25:15.531Z","type":"message"}
{"nick":"bnoordhuis","message":"hey, storm again","date":"2011-10-06T23:26:14.036Z","type":"message"}
{"nick":"bnoordhuis","message":"just like last night and the night before...","date":"2011-10-06T23:26:21.339Z","type":"message"}
{"nick":"ryah","message":"oh!","date":"2011-10-06T23:27:46.396Z","type":"message"}
{"nick":"ryah","message":"heh","date":"2011-10-06T23:27:49.053Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: does that actually cut down the syscalls?","date":"2011-10-06T23:28:11.738Z","type":"message"}
{"nick":"ryah","message":"no - i still get:","date":"2011-10-06T23:30:00.013Z","type":"message"}
{"nick":"ryah","message":"read(16, \"GET /bytes/12 HTTP/1.1\\r\\nUser-Agent: curl/7.20.0 (i386-apple-darwin10.3.0) libcurl/7.20.0 OpenSSL/0.9.8n zlib/1.2.5 libidn/1.18\\r\\nHost: localhost:8000\\r\\nAccept: */*\\r\\n\\r\\n\\0\", 65536)\t\t = 165 0","date":"2011-10-06T23:30:00.949Z","type":"message"}
{"nick":"ryah","message":"write(1, \"create stored[n]\\n\\0\", 17)\t\t = 17 0","date":"2011-10-06T23:30:04.944Z","type":"message"}
{"nick":"ryah","message":"write(16, \"HTTP/1.1 200 OK\\r\\nContent-Type: text/plain\\r\\nContent-Length: 12\\r\\nConnection: keep-alive\\r\\n\\r\\nCCCCCCCCCCCC\\0\", 101)\t\t = 101 0","date":"2011-10-06T23:30:07.522Z","type":"message"}
{"nick":"ryah","message":"read(16, \"\\0\", 65536)\t\t = -1 Err#35","date":"2011-10-06T23:30:10.935Z","type":"message"}
{"nick":"ryah","message":"kevent(4, 4305520160, 0)\t\t = 1 0","date":"2011-10-06T23:30:13.449Z","type":"message"}
{"nick":"ryah","message":"read(16, \"\\0\", 65536)\t\t = 0 0","date":"2011-10-06T23:30:15.937Z","type":"message"}
{"nick":"ryah","message":"close(16)\t\t = 0 0","date":"2011-10-06T23:30:18.384Z","type":"message"}
{"nick":"ryah","message":"oh wait - i think libuv didn't rebuild","date":"2011-10-06T23:30:28.616Z","type":"message"}
{"nick":"ryah","message":"fighter jets outside my office","date":"2011-10-06T23:31:48.399Z","type":"message"}
{"nick":"ryah","message":"okay - this is what i get with bnoordhuis's patch:","date":"2011-10-06T23:32:33.139Z","type":"message"}
{"nick":"ryah","message":"read(16, \"GET /bytes/12 HTTP/1.1\\r\\nUser-Agent: curl/7.20.0 (i386-apple-darwin10.3.0) libcurl/7.20.0 OpenSSL/0.9.8n zlib/1.2.5 libidn/1.18\\r\\nHost: localhost:8000\\r\\nAccept: */*\\r\\n\\r\\n\\0\", 65536)\t\t = 165 0","date":"2011-10-06T23:32:34.027Z","type":"message"}
{"nick":"ryah","message":"write(1, \"create stored[n]\\n\\0\", 17)\t\t = 17 0","date":"2011-10-06T23:32:37.955Z","type":"message"}
{"nick":"ryah","message":"kevent(4, 4305522912, 0)\t\t = 1 0","date":"2011-10-06T23:32:40.400Z","type":"message"}
{"nick":"ryah","message":"read(16, \"\\0\", 65536)\t\t = 0 0","date":"2011-10-06T23:32:43.043Z","type":"message"}
{"nick":"ryah","message":"close(16)\t\t = 0 0","date":"2011-10-06T23:32:45.599Z","type":"message"}
{"nick":"ryah","message":"kevent(4, 4305522912, 1)","date":"2011-10-06T23:32:48.045Z","type":"message"}
{"nick":"ryah","message":"read(16, \"GET /bytes/12 HTTP/1.1\\r\\nUser-Agent: curl/7.20.0 (i386-apple-darwin10.3.0) libcurl/7.20.0 OpenSSL/0.9.8n zlib/1.2.5 libidn/1.18\\r\\nHost: localhost:8000\\r\\nAccept: */*\\r\\n\\r\\n\\0\", 65536)\t\t = 165 0","date":"2011-10-06T23:33:14.944Z","type":"message"}
{"nick":"ryah","message":"write(16, \"HTTP/1.1 200 OK\\r\\nContent-Type: text/plain\\r\\nContent-Length: 12\\r\\nConnection: keep-alive\\r\\n\\r\\nCCCCCCCCCCCC\\0\", 101)\t\t = 101 0","date":"2011-10-06T23:33:19.356Z","type":"message"}
{"nick":"ryah","message":"kevent(4, 4305520208, 0)\t\t = 1 0","date":"2011-10-06T23:33:23.020Z","type":"message"}
{"nick":"ryah","message":"read(16, \"\\0\", 65536)\t\t = 0 0","date":"2011-10-06T23:33:25.533Z","type":"message"}
{"nick":"ryah","message":"still doing the EOF read","date":"2011-10-06T23:33:26.851Z","type":"message"}
{"nick":"ryah","message":"close(16)\t\t = 0 0","date":"2011-10-06T23:33:29.476Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: number of reads before: 60023 (30002 errors), after: 30005","date":"2011-10-06T23:33:41.673Z","type":"message"}
{"nick":"bnoordhuis","message":"that's with ab -n 30000","date":"2011-10-06T23:34:01.897Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: how many requests?","date":"2011-10-06T23:34:02.338Z","type":"message"}
{"nick":"ryah","message":":/","date":"2011-10-06T23:34:05.673Z","type":"message"}
{"nick":"ryah","message":"maybe there's a platform diff","date":"2011-10-06T23:34:34.025Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: https://gist.github.com/adef0a50274e05791e14","date":"2011-10-06T23:35:59.548Z","type":"message"}
{"nick":"bnoordhuis","message":"that's the output of `strace -c`","date":"2011-10-06T23:36:14.332Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: okay - yeah - i was using curl instead of sab","date":"2011-10-06T23:37:17.313Z","type":"message"}
{"nick":"ryah","message":"s/sab/ab","date":"2011-10-06T23:37:21.410Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: https://gist.github.com/1268982","date":"2011-10-06T23:37:54.871Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: ^--- can you review pls?","date":"2011-10-06T23:38:10.099Z","type":"message"}
{"nick":"creationix|work","message":"wow uv_fs_event_t is really minimal","date":"2011-10-06T23:38:40.230Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: sorry, yes - i already had it in front of me","date":"2011-10-06T23:38:47.857Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: lgtm - what does it fix?","date":"2011-10-06T23:39:14.612Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: it fixes it on windows :)","date":"2011-10-06T23:40:00.836Z","type":"message"}
{"nick":"igorzi","message":"(the 2 tests)","date":"2011-10-06T23:40:06.988Z","type":"message"}
{"nick":"bnoordhuis","message":"heh, okay","date":"2011-10-06T23:40:14.263Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: okay - so let's remove that loop in uv__read","date":"2011-10-06T23:40:28.350Z","type":"message"}
{"nick":"bnoordhuis","message":"doesn't windows like futimes() on directories?","date":"2011-10-06T23:40:29.638Z","type":"message"}
{"nick":"ryah","message":"it seems good to me","date":"2011-10-06T23:40:32.291Z","type":"message"}
{"nick":"CIA-53","message":"\u0002libuv:\u000f \u000303Igor Zinkovsky\u000f \u000307master\u000f * r\u00020364809\u000f \u000310\u000f/ test/test-fs.c \u0002:\u000f fix fs_utime & fs_futime tests on windows - http://git.io/O06Qug","date":"2011-10-06T23:40:46.022Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: it's probably not that simple, we still need to drain the kernel buffer","date":"2011-10-06T23:41:06.113Z","type":"message"}
{"nick":"luxigo","reason":"Ping timeout: 252 seconds","date":"2011-10-06T23:41:51.152Z","type":"quit"}
{"nick":"bnoordhuis","message":"well... depends on if we're using edge or level triggered epoll","date":"2011-10-06T23:41:56.891Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: should be level","date":"2011-10-06T23:43:06.923Z","type":"message"}
{"nick":"piscisaureus","message":"it is level","date":"2011-10-06T23:43:11.510Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, i think it is","date":"2011-10-06T23:43:14.602Z","type":"message"}
{"nick":"piscisaureus","message":"but bnoordhuis: just return if (nread < buf.len)","date":"2011-10-06T23:43:27.646Z","type":"message"}
{"nick":"piscisaureus","message":"if you managed to fill up the entire buffer there's probably more to be read","date":"2011-10-06T23:43:42.826Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, makes sense","date":"2011-10-06T23:43:54.753Z","type":"message"}
{"nick":"piscisaureus","message":"it's what we do on windows too :-)","date":"2011-10-06T23:44:06.128Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: how are we going to remove that arguments thing?","date":"2011-10-06T23:44:39.915Z","type":"message"}
{"nick":"piscisaureus","message":"just make an arguments list arg1, arg2, arg3","date":"2011-10-06T23:45:00.101Z","type":"message"}
{"nick":"piscisaureus","message":"I think","date":"2011-10-06T23:45:01.441Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: the crt doesn't like futimes on directories","date":"2011-10-06T23:45:04.194Z","type":"message"}
{"nick":"luxigo","date":"2011-10-06T23:48:35.167Z","type":"join"}
{"nick":"ryah","message":"https://gist.github.com/d4982af3fbf56fb9cd92","date":"2011-10-06T23:57:06.459Z","type":"message"}
{"nick":"CIA-53","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307many-writes-fix\u000f * r\u00021923e5c\u000f \u000310\u000f/ lib/net_uv.js \u0002:\u000f Simplify arg parsing in String.write - http://git.io/pXCTPg","date":"2011-10-06T23:58:33.099Z","type":"message"}
