{"nick":"piscisaureus","message":"hmm","date":"2011-09-09T00:03:05.249Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: it is very difficult to get a list","date":"2011-09-09T00:03:14.329Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: I like DrPizza's idea, let's put it in a spreadsheet","date":"2011-09-09T00:03:29.711Z","type":"message"}
{"nick":"piscisaureus","message":"and annotate","date":"2011-09-09T00:03:37.579Z","type":"message"}
{"nick":"DrPizza","message":"parsing teh output is a fucking pain, however","date":"2011-09-09T00:03:44.422Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-09T00:04:11.630Z","type":"message"}
{"nick":"piscisaureus","message":"I can do that","date":"2011-09-09T00:04:19.829Z","type":"message"}
{"nick":"piscisaureus","message":"the os.unlink() errors are also PITA","date":"2011-09-09T00:04:52.121Z","type":"message"}
{"nick":"DrPizza","message":"man are we still getting them","date":"2011-09-09T00:05:05.137Z","type":"message"}
{"nick":"DrPizza","message":"we need to tell pythont o enable sharing mode too, I guess","date":"2011-09-09T00:05:12.149Z","type":"message"}
{"nick":"piscisaureus","message":"yes, loads","date":"2011-09-09T00:05:18.539Z","type":"message"}
{"nick":"bnoordhuis","message":"[17:52|% 100|+ 533|-  27]: Done <- linux :/","date":"2011-09-09T00:12:33.100Z","type":"message"}
{"nick":"bnoordhuis","message":"seems a lot slower too","date":"2011-09-09T00:12:40.860Z","type":"message"}
{"nick":"bnoordhuis","message":"it usually takes 10-12 minutes","date":"2011-09-09T00:12:46.390Z","type":"message"}
{"nick":"igorzi","message":"there are also 4 libuv tests failing.. we should probably fix these first?","date":"2011-09-09T00:22:51.344Z","type":"message"}
{"nick":"piscisaureus","message":"that might help :-)","date":"2011-09-09T00:23:32.974Z","type":"message"}
{"nick":"piscisaureus","message":"I've ran all tests, now compiling a sheet","date":"2011-09-09T00:23:52.303Z","type":"message"}
{"nick":"graydon","reason":"Quit: Leaving.","date":"2011-09-09T00:28:02.906Z","type":"quit"}
{"nick":"indutny","message":"good evening, everyone","date":"2011-09-09T00:33:59.859Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: piscisaureus: on unix uv_fs_t.errorno is a uv error? (error from eio translated into uv)\"\\","date":"2011-09-09T00:40:53.522Z","type":"message"}
{"nick":"igorzi","message":"?","date":"2011-09-09T00:41:03.448Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: yes","date":"2011-09-09T00:41:05.817Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: yes","date":"2011-09-09T00:41:06.091Z","type":"message"}
{"nick":"igorzi","message":"ok, i see that it's also that on windows now","date":"2011-09-09T00:42:28.556Z","type":"message"}
{"nick":"bnoordhuis","message":"[14:11|% 100|+ 530|-  30]: Done <- sunos","date":"2011-09-09T00:44:03.005Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 Shahor: hash.update fails on second call (https://github.com/joyent/node/issues/749 Seen) - https://github.com/joyent/node/issues/1415","date":"2011-09-09T00:45:12.177Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: piscisaureus: actually, i'm wrong.. on windows uv_fs_t.errorno is still set directly to CRT errno","date":"2011-09-09T00:51:42.798Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: we have no crt_errno -> uv_errno mapping yet :-/","date":"2011-09-09T00:52:09.404Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: although I'm not sure we'll need it","date":"2011-09-09T00:52:29.897Z","type":"message"}
{"nick":"piscisaureus","message":"maybe you can use _doserrno and map that using uv_set_sys_error?","date":"2011-09-09T00:52:46.320Z","type":"message"}
{"nick":"igorzi","message":"hmm, that might be a good idea","date":"2011-09-09T00:53:32.370Z","type":"message"}
{"nick":"igorzi","message":"let's do that.. maybe we can get away with just one mapping","date":"2011-09-09T00:54:51.785Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: bnoordhuis: ryah: so what do you prefer, office 365 or google docs?","date":"2011-09-09T00:59:52.812Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: google docs","date":"2011-09-09T01:00:09.471Z","type":"message"}
{"nick":"bnoordhuis","message":"sorry igorzi","date":"2011-09-09T01:00:15.656Z","type":"message"}
{"nick":"felixge","reason":"Quit: felixge","date":"2011-09-09T01:01:57.742Z","type":"quit"}
{"nick":"DrPizza","message":"lol","date":"2011-09-09T01:02:24.423Z","type":"message"}
{"nick":"piscisaureus","message":"I was hoping to unleash a fight","date":"2011-09-09T01:02:36.641Z","type":"message"}
{"nick":"DrPizza","message":"I'd rather use xl ","date":"2011-09-09T01:02:53.227Z","type":"message"}
{"nick":"piscisaureus","message":"https://docs.google.com/spreadsheet/ccc?key=0AncAtEVJvlbUdFR0MXhFNGlLYl9XeVBGckRBeUlPbUE&hl=nl","date":"2011-09-09T01:05:26.944Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: igorzi: DrPizza: ryah: if you have a gmail account I can give you write access","date":"2011-09-09T01:06:32.449Z","type":"message"}
{"nick":"DrPizza","message":"drpizza@gmail.com","date":"2011-09-09T01:06:43.034Z","type":"message"}
{"nick":"bnoordhuis","message":"info@bnoordhuis.nl","date":"2011-09-09T01:06:55.805Z","type":"message"}
{"nick":"igorzi","message":"igorzi55@gmail.com","date":"2011-09-09T01:09:34.403Z","type":"message"}
{"nick":"erickt","reason":"Quit: erickt","date":"2011-09-09T01:11:29.471Z","type":"quit"}
{"nick":"DrPizza","message":"piscisaureus: would be be a big pain in the ass to add the pass/fail status of 0.5.5 too, as a baseline?","date":"2011-09-09T01:13:14.492Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: no, can do","date":"2011-09-09T01:13:30.425Z","type":"message"}
{"nick":"piscisaureus","message":"will take a while","date":"2011-09-09T01:13:34.473Z","type":"message"}
{"nick":"DrPizza","message":"might be useful to see which new failures and new passes we have","date":"2011-09-09T01:13:49.681Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: yes, but I'll have to make the script more advanced :-)","date":"2011-09-09T01:14:26.990Z","type":"message"}
{"nick":"DrPizza","message":"ah","date":"2011-09-09T01:14:34.439Z","type":"message"}
{"nick":"DrPizza","message":"heh","date":"2011-09-09T01:14:35.575Z","type":"message"}
{"nick":"piscisaureus","message":"I am especially worried about all the read UNKNOWN errors","date":"2011-09-09T01:16:21.833Z","type":"message"}
{"nick":"piscisaureus","message":"the others seem to be not so bad","date":"2011-09-09T01:16:27.394Z","type":"message"}
{"nick":"DrPizza","message":"yes, although I'm assuming/hoping they have a common root cause","date":"2011-09-09T01:19:57.528Z","type":"message"}
{"nick":"DrPizza","message":"and so will all go away together","date":"2011-09-09T01:20:01.820Z","type":"message"}
{"nick":"piscisaureus","message":"its prolly not worth updating the script now","date":"2011-09-09T01:21:52.094Z","type":"message"}
{"nick":"piscisaureus","message":"we should mark tests that need to be looked at real soon","date":"2011-09-09T01:22:20.316Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f \u000303Igor Zinkovsky\u000f \u000307master\u000f * r\u0002cfa1423\u000f \u000310\u000f/ (src/uv-common.h src/win/error.c src/win/fs.c test/test-fs.c)\u0002:\u000f fix fs_file_noent on windows - http://git.io/CmLRIg","date":"2011-09-09T01:23:40.420Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: does test-child-process-double-pipe pass on unix?","date":"2011-09-09T01:24:21.173Z","type":"message"}
{"nick":"igorzi","message":"^----- this does the _doserrno translation","date":"2011-09-09T01:24:21.462Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes","date":"2011-09-09T01:24:47.945Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 dhx71: chunked & keep-alive - https://github.com/joyent/node/issues/940","date":"2011-09-09T01:25:12.093Z","type":"message"}
{"nick":"igorzi","message":"gtg.. i'll be online later","date":"2011-09-09T01:26:50.474Z","type":"message"}
{"nick":"piscisaureus","message":"ok","date":"2011-09-09T01:27:07.279Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-09T01:40:48.575Z","type":"message"}
{"nick":"piscisaureus","message":"all those \"read unknown\" errors seem to be coming from a situation where pRtlNtStatusToDosError can't map the NTSTATUS to an errno","date":"2011-09-09T01:41:25.274Z","type":"message"}
{"nick":"piscisaureus","message":"weird","date":"2011-09-09T01:41:27.927Z","type":"message"}
{"nick":"piscisaureus","message":"aha!","date":"2011-09-09T02:05:52.542Z","type":"message"}
{"nick":"piscisaureus","message":"it's a windows bug","date":"2011-09-09T02:06:00.174Z","type":"message"}
{"nick":"piscisaureus","message":"NTSTATUS_FROM_WIN32 mapping: ntstatus = (0xc0070000 | win32_error)","date":"2011-09-09T02:09:07.082Z","type":"message"}
{"nick":"piscisaureus","message":"RtlNtStatusToDosError: if ((ntstatus & 0xffff0000) == 0x80070000) { it's mapped } else { it's a real ntstatus }","date":"2011-09-09T02:09:07.239Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 258 seconds","date":"2011-09-09T02:09:30.209Z","type":"quit"}
{"nick":"piscisaureus","message":"that bug was in win2k, it's still there in 7","date":"2011-09-09T02:09:40.941Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: file a bug report :-)","date":"2011-09-09T02:13:21.911Z","type":"message"}
{"nick":"igorzi","message":"it should get translated to ERROR_BROKEN_PIPE?","date":"2011-09-09T02:14:21.754Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-09T02:14:30.880Z","type":"message"}
{"nick":"igorzi","message":"what's the NTSTATUS?","date":"2011-09-09T02:14:37.163Z","type":"message"}
{"nick":"piscisaureus","message":"*shrug* I don't know","date":"2011-09-09T02:14:51.601Z","type":"message"}
{"nick":"piscisaureus","message":"oh - wait","date":"2011-09-09T02:14:57.508Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: this is how it works: we update the overlapped.Internal in some cases","date":"2011-09-09T02:15:16.444Z","type":"message"}
{"nick":"piscisaureus","message":"so we generate a NTStatus from GetLastError with the \u0003\u000301NTSTATUS_FROM_WIN32\u0003\u000301 macro","date":"2011-09-09T02:15:36.113Z","type":"message"}
{"nick":"piscisaureus","message":"so that RtlNtStatusToDosError correctly maps it back for us","date":"2011-09-09T02:15:55.398Z","type":"message"}
{"nick":"piscisaureus","message":"but the \u0003\u000301NTSTATUS_FROM_WIN32\u0003\u000301 is wrong!","date":"2011-09-09T02:16:01.759Z","type":"message"}
{"nick":"piscisaureus","message":"(that macro comes from the ddk btw)","date":"2011-09-09T02:16:20.094Z","type":"message"}
{"nick":"piscisaureus","message":"because it effectively does: \u0003\u000301ntstatus = (0xc0070000 | win32_error)\u0003\u000301","date":"2011-09-09T02:16:40.788Z","type":"message"}
{"nick":"piscisaureus","message":"but RtlNtStatusToDosError only maps it back correctly if it would have been: \u0003\u000301ntstatus = (0x80070000 | win32_error)\u0003\u000301","date":"2011-09-09T02:17:04.785Z","type":"message"}
{"nick":"piscisaureus","message":"I can easily fix the macro","date":"2011-09-09T02:18:08.372Z","type":"message"}
{"nick":"igorzi","message":"ok.. so any GetLastError converted to NTSTATUS (using NTSTATUS_FROM_WIN32) and then back to win32 error (using RtlNtStatusToDosError) would run into this?","date":"2011-09-09T02:19:08.490Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-09T02:19:20.182Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: although - for sockets we have a special path","date":"2011-09-09T02:19:47.453Z","type":"message"}
{"nick":"piscisaureus","message":"so socket errors won't see it","date":"2011-09-09T02:19:52.416Z","type":"message"}
{"nick":"igorzi","message":"ok, so you'll define your own NTSTATUS_FROM_WIN32?","date":"2011-09-09T02:20:13.578Z","type":"message"}
{"nick":"piscisaureus","message":"Yes","date":"2011-09-09T02:20:25.741Z","type":"message"}
{"nick":"piscisaureus","message":"#define NTSTATUS_FROM_WIN32(error) ((NTSTATUS) (error) <= 0 ? \\","date":"2011-09-09T02:20:44.891Z","type":"message"}
{"nick":"piscisaureus","message":"        ((NTSTATUS) (error)) : ((NTSTATUS) (((error) & 0x0000FFFF) | \\","date":"2011-09-09T02:20:45.045Z","type":"message"}
{"nick":"piscisaureus","message":"        (FACILITY_NTWIN32 << 16) | ERROR_SEVERITY_ERROR)))","date":"2011-09-09T02:20:45.045Z","type":"message"}
{"nick":"piscisaureus","message":"change severity_error into severity_warning","date":"2011-09-09T02:20:55.168Z","type":"message"}
{"nick":"piscisaureus","message":"then it's correct","date":"2011-09-09T02:20:57.602Z","type":"message"}
{"nick":"piscisaureus","message":"yes, works :))","date":"2011-09-09T02:22:01.416Z","type":"message"}
{"nick":"igorzi","message":"how many tests does that fix? :)","date":"2011-09-09T02:23:13.500Z","type":"message"}
{"nick":"piscisaureus","message":"dunno yet","date":"2011-09-09T02:23:21.565Z","type":"message"}
{"nick":"piscisaureus","message":"let's see","date":"2011-09-09T02:23:24.605Z","type":"message"}
{"nick":"piscisaureus","action":"running them now","date":"2011-09-09T02:24:11.266Z","type":"action"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 tshinnic: add positioned writing feature to fs.WriteStream - https://github.com/joyent/node/issues/1645","date":"2011-09-09T02:35:12.117Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u000212e689d\u000f \u000310\u000f/ src/win/winapi.h \u0002:\u000f win: the ddk got the NTSTATUS_FROM_WIN32 wrong - http://git.io/6IoQXA","date":"2011-09-09T02:39:53.829Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: added a column in the sheet","date":"2011-09-09T02:46:18.960Z","type":"message"}
{"nick":"erickt","date":"2011-09-09T02:48:56.246Z","type":"join"}
{"nick":"piscisaureus","message":"I am now looking at [19:03|% 100|+ 237|-  42] again :-)","date":"2011-09-09T02:52:12.570Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, off to bed","date":"2011-09-09T02:52:12.765Z","type":"message"}
{"nick":"bnoordhuis","message":"you should too, piscisaureus","date":"2011-09-09T02:52:16.409Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-09T02:52:24.173Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: how is linux looking? made any progress?","date":"2011-09-09T02:52:47.678Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: a little","date":"2011-09-09T02:53:11.555Z","type":"message"}
{"nick":"bnoordhuis","message":"that is, i know why some tests are failing","date":"2011-09-09T02:53:19.386Z","type":"message"}
{"nick":"bnoordhuis","message":"now to fix them","date":"2011-09-09T02:53:26.227Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 245 seconds","date":"2011-09-09T03:03:28.912Z","type":"quit"}
{"nick":"igorzi","message":"piscisaureus: what does a x in 0.5.6 column mean?","date":"2011-09-09T03:12:52.195Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: those where the tests that I thought we should look at before 0.5.6","date":"2011-09-09T03:13:13.605Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: not necessarily fix them","date":"2011-09-09T03:14:13.802Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: but rather, looking the other tests is pointless in the beginning","date":"2011-09-09T03:14:33.876Z","type":"message"}
{"nick":"igorzi","message":"ok","date":"2011-09-09T03:14:47.753Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 Shahor: hash.update fails on second call (https://github.com/joyent/node/issues/749 Seen) - https://github.com/joyent/node/issues/1415","date":"2011-09-09T03:15:12.062Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: i'm fixing test-fs-chmod","date":"2011-09-09T03:20:59.641Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002e95a29e\u000f \u000310\u000f/ src/win/error.c \u0002:\u000f Add mapping for ECONNABORTED - http://git.io/osQb-g","date":"2011-09-09T03:23:17.202Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: that's nice +1","date":"2011-09-09T03:24:04.414Z","type":"message"}
{"nick":"piscisaureus","message":"but don't over-work yourself","date":"2011-09-09T03:24:04.578Z","type":"message"}
{"nick":"piscisaureus","message":"I am checking out too","date":"2011-09-09T03:24:07.919Z","type":"message"}
{"nick":"piscisaureus","message":"it's only node - it can wait","date":"2011-09-09T03:24:31.929Z","type":"message"}
{"nick":"igorzi","message":"ok, i'll update the spreadsheet if anything changes","date":"2011-09-09T03:28:42.298Z","type":"message"}
{"nick":"piscisaureus","date":"2011-09-09T03:33:30.033Z","type":"part"}
{"nick":"piscisaureus","date":"2011-09-09T03:38:11.173Z","type":"join"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-09-09T04:02:21.708Z","type":"quit"}
{"nick":"piscisaureus","reason":"Ping timeout: 258 seconds","date":"2011-09-09T04:17:55.141Z","type":"quit"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 tshinnic: unguarded fs.watchFile cache statWatchers checking fixed - https://github.com/joyent/node/issues/1637","date":"2011-09-09T04:25:12.123Z","type":"message"}
{"nick":"isaacs","date":"2011-09-09T04:38:35.921Z","type":"join"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-09-09T04:56:00.061Z","type":"quit"}
{"nick":"isaacs","date":"2011-09-09T04:56:59.195Z","type":"join"}
{"nick":"erickt","reason":"Quit: erickt","date":"2011-09-09T05:03:24.352Z","type":"quit"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-09-09T05:49:05.471Z","type":"quit"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 tshinnic: add positioned writing feature to fs.WriteStream - https://github.com/joyent/node/issues/1645","date":"2011-09-09T06:25:11.912Z","type":"message"}
{"nick":"igorzi","message":"ryah: https://github.com/igorzi/node/commit/3cbf532c83811f5892378a1f9d5048b3c2bfaa73","date":"2011-09-09T06:30:28.618Z","type":"message"}
{"nick":"igorzi","message":"fixes test-fs-chmod test","date":"2011-09-09T06:30:43.762Z","type":"message"}
{"nick":"mraleph","date":"2011-09-09T06:31:04.278Z","type":"join"}
{"nick":"DrPizza","message":"I don't quit eunderstand that test","date":"2011-09-09T06:41:03.022Z","type":"message"}
{"nick":"DrPizza","message":"why is the assertion different between the two platforms?","date":"2011-09-09T06:41:20.408Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-09-09T07:20:15.095Z","type":"quit"}
{"nick":"igorzi","message":"because chmod on windows only looks at read-only bit in mode (so we only verify that the read-only bit got set or reset)","date":"2011-09-09T07:31:11.144Z","type":"message"}
{"nick":"DrPizza","message":"yes I getthat","date":"2011-09-09T08:12:57.546Z","type":"message"}
{"nick":"DrPizza","message":"but that doesn't explain it","date":"2011-09-09T08:13:09.506Z","type":"message"}
{"nick":"DrPizza","message":"why is fstat returning bad data on windows?","date":"2011-09-09T08:13:58.851Z","type":"message"}
{"nick":"DrPizza","message":"the mode returned by fstat should surely beidentical to the mode set by chmod","date":"2011-09-09T08:14:51.321Z","type":"message"}
{"nick":"DrPizza","message":"so either 0600 or 0400 depending on whether the file is writable or not","date":"2011-09-09T08:15:18.735Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 Nais: createContext/runInXXContext : \"this\" does not refer to the correct object - https://github.com/joyent/node/issues/1674","date":"2011-09-09T08:40:12.029Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-09T08:58:20.929Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-09T08:58:40.351Z","type":"join"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 Grepsy: Process always exits with exit code 0 - https://github.com/joyent/node/issues/1675","date":"2011-09-09T10:23:37.361Z","type":"message"}
{"nick":"piscisaureus","date":"2011-09-09T12:01:03.226Z","type":"join"}
{"nick":"bnoordhuis","date":"2011-09-09T12:04:07.411Z","type":"join"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Igor Zinkovsky\u000f \u000307master\u000f * r\u000285357ab\u000f \u000310\u000f/ test/simple/test-fs-chmod.js \u0002:\u000f fix test-fs-chmod test - http://git.io/wI0wsg","date":"2011-09-09T12:46:00.627Z","type":"message"}
{"nick":"bnoordhuis","message":"^ is that a good idea?","date":"2011-09-09T12:47:46.098Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: ^","date":"2011-09-09T12:48:22.104Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: yes","date":"2011-09-09T12:48:35.371Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: why not?","date":"2011-09-09T12:48:39.454Z","type":"message"}
{"nick":"bnoordhuis","message":"special casing for platforms... feels icky","date":"2011-09-09T12:49:00.431Z","type":"message"}
{"nick":"bnoordhuis","message":"that's what libuv is supposed to do","date":"2011-09-09T12:49:13.886Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: on windows chmod can only do so much","date":"2011-09-09T12:49:19.458Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: we can't verify the r and x bits in a file mode, because windows doesn't support that","date":"2011-09-09T12:49:40.027Z","type":"message"}
{"nick":"piscisaureus","message":"it supports only the w bit","date":"2011-09-09T12:49:50.430Z","type":"message"}
{"nick":"piscisaureus","message":"there's no way around that","date":"2011-09-09T12:49:55.934Z","type":"message"}
{"nick":"bnoordhuis","message":"okay","date":"2011-09-09T12:49:59.626Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: does unix have struct sockaddr_storage?","date":"2011-09-09T12:52:35.849Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: reading the sock/peername into a struct sockaddr fails with EFAULT because struct sockaddr is not big enough","date":"2011-09-09T12:53:10.666Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: also, is the family stored in struct sockaddr_storage.ss_family?","date":"2011-09-09T12:55:59.943Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002f810998\u000f \u000310\u000f/ src/tcp_wrap.cc \u0002:\u000f net_uv: use sufficient buffer to read sock/peername - http://git.io/zr3-IA","date":"2011-09-09T13:06:13.222Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002b5db076\u000f \u000310\u000f/ lib/net_uv.js \u0002:\u000f net_uv: fix 'set is undefined' error - http://git.io/zNe0Og","date":"2011-09-09T13:06:13.382Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u000297cf216\u000f \u000310\u000f/ (5 files in 3 dirs)\u0002:\u000f Upgrade libuv to e95a29ee18 - http://git.io/SiiqkQ","date":"2011-09-09T13:06:13.382Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: https://github.com/joyent/node/blob/master/test/simple/test-tls-peer-certificate.js#L44-54","date":"2011-09-09T13:11:44.768Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: this fails on windows with ECONNABORTED because the server shuts down. I wonder why this does not fail on unix.","date":"2011-09-09T13:12:10.670Z","type":"message"}
{"nick":"piscisaureus","message":"hmm. maybe it's not the server that shuts down that is the problem","date":"2011-09-09T13:13:06.657Z","type":"message"}
{"nick":"DrPizza","message":"piscisaureus: but the identity stat.mode & 0777 == mode should hold evenon windows","date":"2011-09-09T13:24:28.890Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: but not: assert.equal(0777, fs.statSync(file).mode & 0777);","date":"2011-09-09T13:25:12.738Z","type":"message"}
{"nick":"indutny","message":"ryah: yt?","date":"2011-09-09T13:25:26.357Z","type":"message"}
{"nick":"piscisaureus","message":"indutny: you're a bit early, it's 6.30 am there","date":"2011-09-09T13:26:01.184Z","type":"message"}
{"nick":"indutny","message":"piscisaureus: ah, SF","date":"2011-09-09T13:26:40.503Z","type":"message"}
{"nick":"piscisaureus","message":"indutny: where are you based? asia somewhere?","date":"2011-09-09T13:27:07.031Z","type":"message"}
{"nick":"indutny","message":"piscisaureus: yep, Russia, Omsk UTC+7","date":"2011-09-09T13:27:21.444Z","type":"message"}
{"nick":"indutny","message":"Living in NY time zone, mostly","date":"2011-09-09T13:27:33.638Z","type":"message"}
{"nick":"piscisaureus","message":"ah russia","date":"2011-09-09T13:27:41.603Z","type":"message"}
{"nick":"piscisaureus","message":"yes, me and ben are sf time zone mostly","date":"2011-09-09T13:27:52.430Z","type":"message"}
{"nick":"indutny","message":"I understand now","date":"2011-09-09T13:29:24.565Z","type":"message"}
{"nick":"indutny","message":"don't know why, I thought Joyent is located in NY","date":"2011-09-09T13:29:44.388Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-09T13:30:25.398Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-09T13:30:35.361Z","type":"join"}
{"nick":"DrPizza","message":"piscisaureus: why not, that's the bit I don't get","date":"2011-09-09T13:36:48.653Z","type":"message"}
{"nick":"DrPizza","message":"piscisaureus: it's not doing 077, fs.stat.mode & 0777 for unix","date":"2011-09-09T13:37:14.116Z","type":"message"}
{"nick":"DrPizza","message":"it's doing mode, fs.stat.mode & 0777","date":"2011-09-09T13:37:26.248Z","type":"message"}
{"nick":"DrPizza","message":"and that should work on both platforms IMO","date":"2011-09-09T13:37:34.450Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: I think you're right","date":"2011-09-09T13:43:19.091Z","type":"message"}
{"nick":"piscisaureus","message":"lets bug igorzi about that when he is here","date":"2011-09-09T13:43:31.191Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: although I think we better test for the exactly expected result","date":"2011-09-09T13:44:07.043Z","type":"message"}
{"nick":"DrPizza","message":"I think i talready is for unix","date":"2011-09-09T13:44:32.579Z","type":"message"}
{"nick":"piscisaureus","message":"I think there is a serious bug in tls.js","date":"2011-09-09T13:53:18.186Z","type":"message"}
{"nick":"dmkbot1","date":"2011-09-09T13:54:59.404Z","type":"join"}
{"nick":"dmkbot","reason":"Ping timeout: 276 seconds","date":"2011-09-09T13:59:08.400Z","type":"quit"}
{"nick":"piscisaureus","message":"I wonder how I ever managed to work on node without msvs","date":"2011-09-09T14:01:58.194Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: https://github.com/joyent/node/blob/master/lib/tls.js#L375-396 <-- this needs to be updated for uv","date":"2011-09-09T14:02:15.825Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: does unix have struct sockaddr_storage? <- yes","date":"2011-09-09T14:10:03.579Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: also, is the family stored in struct sockaddr_storage.ss_family? <- yes","date":"2011-09-09T14:10:33.230Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: in that case node/master should still compile on unix :-)","date":"2011-09-09T14:10:57.194Z","type":"message"}
{"nick":"piscisaureus","message":"(and have fewer bugs)","date":"2011-09-09T14:11:12.347Z","type":"message"}
{"nick":"bnoordhuis","message":"compiles, let's see what `make test-all` says","date":"2011-09-09T14:13:55.031Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: let's do stdio and udp broadcast/multicast support next week","date":"2011-09-09T14:14:21.800Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: yes","date":"2011-09-09T14:14:31.550Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I am now just killing bugs that are unexpected","date":"2011-09-09T14:14:52.915Z","type":"message"}
{"nick":"bnoordhuis","message":"cool","date":"2011-09-09T14:14:57.947Z","type":"message"}
{"nick":"bnoordhuis","message":"stdio api's design still needs some love, i think","date":"2011-09-09T14:15:16.613Z","type":"message"}
{"nick":"bnoordhuis","message":"but we'll discuss it next week","date":"2011-09-09T14:15:21.915Z","type":"message"}
{"nick":"piscisaureus","message":"yes, sure","date":"2011-09-09T14:15:22.191Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: do you understand anything about tls.js?","date":"2011-09-09T14:19:18.604Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes","date":"2011-09-09T14:19:26.600Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ok","date":"2011-09-09T14:19:31.197Z","type":"message"}
{"nick":"piscisaureus","message":"https://github.com/joyent/node/blob/master/test/simple/test-tls-peer-certificate.js#L41-54","date":"2011-09-09T14:19:32.466Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I get ECONNABORTED on windows","date":"2011-09-09T14:19:41.667Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: apparently, the server end of the socket gets destroyed too soon","date":"2011-09-09T14:19:57.558Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I can also verify that it's not doing a proper graceful close w/ tcp","date":"2011-09-09T14:20:20.376Z","type":"message"}
{"nick":"piscisaureus","message":"which seems wrong to me","date":"2011-09-09T14:20:26.900Z","type":"message"}
{"nick":"bnoordhuis","message":"let me quickly try it","date":"2011-09-09T14:20:42.973Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, wfm","date":"2011-09-09T14:21:02.511Z","type":"message"}
{"nick":"bnoordhuis","message":"as it should, i think - the client request is done from within the 'listening' listener","date":"2011-09-09T14:21:39.200Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: it could be that the tls implementation relies on a particular ordering of events","date":"2011-09-09T14:21:41.126Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: it is not the server socket that gets destroyed - it is the server end, e.g. the accepted socket","date":"2011-09-09T14:22:14.137Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: apparently that cleartext.end('World') statement immediately kills the socket without even shutting it down","date":"2011-09-09T14:22:40.313Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, okay","date":"2011-09-09T14:22:40.818Z","type":"message"}
{"nick":"bnoordhuis","message":"looking at tls.js now","date":"2011-09-09T14:23:18.653Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: good luck with that","date":"2011-09-09T14:23:31.014Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: is .writable stil true at that time?","date":"2011-09-09T14:24:00.736Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: the server end or the client end?","date":"2011-09-09T14:24:20.247Z","type":"message"}
{"nick":"bnoordhuis","message":"let's start with the client end","date":"2011-09-09T14:24:39.331Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: no. neither are writable","date":"2011-09-09T14:25:23.551Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://gist.github.com/22370a60acfcf80f7bed <- can you apply that patch? so we're talking about the same thing","date":"2011-09-09T14:26:36.502Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: by the time the tls.connect callback is made socket.writable is already false","date":"2011-09-09T14:26:49.505Z","type":"message"}
{"nick":"piscisaureus","message":"yeah let me apply that","date":"2011-09-09T14:26:55.725Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis:","date":"2011-09-09T14:28:27.440Z","type":"message"}
{"nick":"piscisaureus","message":"socket.writable true","date":"2011-09-09T14:28:27.601Z","type":"message"}
{"nick":"piscisaureus","message":"cleartext.writable true","date":"2011-09-09T14:28:27.602Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: okay that's good","date":"2011-09-09T14:28:40.192Z","type":"message"}
{"nick":"bnoordhuis","message":"i've updated the patch","date":"2011-09-09T14:28:44.201Z","type":"message"}
{"nick":"bnoordhuis","message":"so it prints the status of .writable after the .end() call","date":"2011-09-09T14:29:03.693Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: can you just gist the file contents the next time?","date":"2011-09-09T14:29:10.286Z","type":"message"}
{"nick":"piscisaureus","message":"copy paste > git apply :-)","date":"2011-09-09T14:29:15.317Z","type":"message"}
{"nick":"bnoordhuis","message":"oh sure, let me do that","date":"2011-09-09T14:29:18.220Z","type":"message"}
{"nick":"piscisaureus","message":"do it now","date":"2011-09-09T14:29:38.330Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://gist.github.com/4b5bac8d62624c53878b","date":"2011-09-09T14:29:41.612Z","type":"message"}
{"nick":"piscisaureus","message":"socket.writable [1] true","date":"2011-09-09T14:30:02.318Z","type":"message"}
{"nick":"piscisaureus","message":"socket.writable [2] false","date":"2011-09-09T14:30:02.484Z","type":"message"}
{"nick":"piscisaureus","message":"cleartext.writable [1] true","date":"2011-09-09T14:30:02.484Z","type":"message"}
{"nick":"piscisaureus","message":"cleartext.writable [2] false","date":"2011-09-09T14:30:02.484Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ^","date":"2011-09-09T14:30:08.753Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, that's good","date":"2011-09-09T14:30:16.501Z","type":"message"}
{"nick":"bnoordhuis","message":"so we probably need to move down the stack","date":"2011-09-09T14:30:35.224Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: does windows have something like strace?","date":"2011-09-09T14:30:59.554Z","type":"message"}
{"nick":"piscisaureus","message":"ehh yeah","date":"2011-09-09T14:31:06.010Z","type":"message"}
{"nick":"piscisaureus","message":"process monitor","date":"2011-09-09T14:31:15.020Z","type":"message"}
{"nick":"piscisaureus","message":"let me do that","date":"2011-09-09T14:31:18.100Z","type":"message"}
{"nick":"bnoordhuis","message":"i would like to know what the socket read and write syscalls return","date":"2011-09-09T14:31:34.754Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: this is iocp","date":"2011-09-09T14:31:48.791Z","type":"message"}
{"nick":"piscisaureus","message":"spartaaa!","date":"2011-09-09T14:31:51.078Z","type":"message"}
{"nick":"bnoordhuis","message":"oh damn","date":"2011-09-09T14:31:57.418Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: so where is that ECONNABORTED bubbling up from?","date":"2011-09-09T14:32:37.480Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: read()","date":"2011-09-09T14:32:46.480Z","type":"message"}
{"nick":"piscisaureus","message":"more specifically, the overlapped 0-read returns it","date":"2011-09-09T14:33:06.463Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, so has the client closed its side of the connection before that?","date":"2011-09-09T14:33:31.392Z","type":"message"}
{"nick":"dmkbot1","message":"\u0002joyent/node:\u0002 teknopaul: path.normalize no longer works for URLs - https://github.com/joyent/node/issues/1676","date":"2011-09-09T14:34:57.426Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://gist.github.com/4b5bac8d62624c53878b <- does that work?","date":"2011-09-09T14:35:22.082Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: strace -> https://docs.google.com/spreadsheet/ccc?key=0AncAtEVJvlbUdFlyd1BkcjdMNFpmTzllLVV6dk55Q0E&hl=nl","date":"2011-09-09T14:35:55.837Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I gotta explain how to analyze that :-)","date":"2011-09-09T14:37:00.556Z","type":"message"}
{"nick":"piscisaureus","message":"but let me try the patch first","date":"2011-09-09T14:37:06.444Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: re does that work -> no","date":"2011-09-09T14:37:36.784Z","type":"message"}
{"nick":"bnoordhuis","message":"okay","date":"2011-09-09T14:37:45.816Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: \u0003\u000301 \u0003\u000301that spreadsheet has now only tcp events","date":"2011-09-09T14:41:05.244Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ignore aeu.b, it just means localhost","date":"2011-09-09T14:41:23.921Z","type":"message"}
{"nick":"bnoordhuis","message":"so... success only?","date":"2011-09-09T14:41:41.326Z","type":"message"}
{"nick":"piscisaureus","message":"hmm. yeah that's weird","date":"2011-09-09T14:41:54.423Z","type":"message"}
{"nick":"piscisaureus","message":"let me see why","date":"2011-09-09T14:42:03.802Z","type":"message"}
{"nick":"piscisaureus","message":"maybe I filtered one too many","date":"2011-09-09T14:42:09.812Z","type":"message"}
{"nick":"bnoordhuis","message":"no, i think you got them all","date":"2011-09-09T14:43:01.406Z","type":"message"}
{"nick":"bnoordhuis","message":"downloaded the original spreadsheet as a csv and the tcp entries are all marked with success","date":"2011-09-09T14:43:24.192Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe a libuv bug, put a breakpoint on your tcp error handling code","date":"2011-09-09T14:44:11.142Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: it is rather a process explorer bug","date":"2011-09-09T14:44:25.374Z","type":"message"}
{"nick":"bnoordhuis","message":"why?","date":"2011-09-09T14:44:39.364Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-09T14:46:04.058Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: because i see uv_process_tcp_read_req down the stack","date":"2011-09-09T14:46:27.747Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but it got me thinking ,,,","date":"2011-09-09T14:46:36.138Z","type":"message"}
{"nick":"piscisaureus","message":"what if the uv-win is dropping the accept socket","date":"2011-09-09T14:46:57.088Z","type":"message"}
{"nick":"bnoordhuis","message":"dropping as in ...?","date":"2011-09-09T14:47:08.873Z","type":"message"}
{"nick":"piscisaureus","message":"closing it","date":"2011-09-09T14:47:12.925Z","type":"message"}
{"nick":"piscisaureus","message":"failing the accept call","date":"2011-09-09T14:47:16.098Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: otherwise we should not see WSAECONNABORTED","date":"2011-09-09T14:47:31.209Z","type":"message"}
{"nick":"piscisaureus","message":"but rather ECONNRESET","date":"2011-09-09T14:47:37.620Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, makes sense","date":"2011-09-09T14:47:55.480Z","type":"message"}
{"nick":"bnoordhuis","message":"but do you actually see that happening?","date":"2011-09-09T14:48:02.509Z","type":"message"}
{"nick":"bnoordhuis","message":"easy to test, i would think","date":"2011-09-09T14:48:11.397Z","type":"message"}
{"nick":"piscisaureus","message":"let me trace","date":"2011-09-09T14:48:12.701Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-09T14:48:18.135Z","type":"message"}
{"nick":"piscisaureus","message":"well...","date":"2011-09-09T14:48:19.414Z","type":"message"}
{"nick":"piscisaureus","message":"it's a little more difficult on windows that linux","date":"2011-09-09T14:48:26.483Z","type":"message"}
{"nick":"piscisaureus","message":"but still easy to trace","date":"2011-09-09T14:48:30.228Z","type":"message"}
{"nick":"bnoordhuis","message":"printf style debugging ftw!","date":"2011-09-09T14:48:34.820Z","type":"message"}
{"nick":"piscisaureus","message":"oh, no that's not it","date":"2011-09-09T14:48:42.899Z","type":"message"}
{"nick":"piscisaureus","message":"but the accept happens in the backround you see","date":"2011-09-09T14:48:49.689Z","type":"message"}
{"nick":"piscisaureus","message":"it can fail at the submit point or the return point","date":"2011-09-09T14:49:08.345Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: aha!","date":"2011-09-09T14:50:58.496Z","type":"message"}
{"nick":"bnoordhuis","message":"eureka?","date":"2011-09-09T14:51:23.075Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: that's it. it's completely unrelated to the test or so it seems","date":"2011-09-09T14:51:34.169Z","type":"message"}
{"nick":"piscisaureus","message":"after the initial connection I see another connection coming in ... a failed one","date":"2011-09-09T14:51:48.400Z","type":"message"}
{"nick":"piscisaureus","message":"probably it's just the server that is closing","date":"2011-09-09T14:51:58.430Z","type":"message"}
{"nick":"piscisaureus","message":"but still I wonder why it is starting a read on that socket (or the other end)","date":"2011-09-09T14:52:36.023Z","type":"message"}
{"nick":"bnoordhuis","message":"so you're seeing a ghost accept call?","date":"2011-09-09T14:53:25.111Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: well... maybe","date":"2011-09-09T14:53:39.509Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, it's a heisenberg accept call","date":"2011-09-09T14:54:13.469Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but it can also be that it is just an overlapped accept call that returns without having accepted, because the listening socket is closing","date":"2011-09-09T14:54:14.472Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but the weird thing is, that socket has another end","date":"2011-09-09T14:54:32.451Z","type":"message"}
{"nick":"piscisaureus","message":"an end that is seeing ECONNABORTED","date":"2011-09-09T14:54:39.978Z","type":"message"}
{"nick":"piscisaureus","message":"it still puzzles me","date":"2011-09-09T14:55:26.599Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but thanks for your time anyway.","date":"2011-09-09T14:55:37.519Z","type":"message"}
{"nick":"piscisaureus","message":"sorry about all the bullshit theories i have posted in this channel this afternoon","date":"2011-09-09T14:55:51.035Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: what do you see when you run `NODE_DEBUG=net ./node_g test/simple/test-tls-peer-certificate.js`?","date":"2011-09-09T14:55:59.490Z","type":"message"}
{"nick":"bnoordhuis","message":"heh","date":"2011-09-09T14:56:00.889Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: https://gist.github.com/1206442","date":"2011-09-09T14:56:56.787Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: posted a comment","date":"2011-09-09T14:57:53.714Z","type":"message"}
{"nick":"bnoordhuis","message":"odd, i'm seeing this:","date":"2011-09-09T14:58:03.770Z","type":"message"}
{"nick":"bnoordhuis","message":"NET: afterConnect","date":"2011-09-09T14:58:04.488Z","type":"message"}
{"nick":"bnoordhuis","message":"NET: Drain the connect queue","date":"2011-09-09T14:58:04.641Z","type":"message"}
{"nick":"bnoordhuis","message":"NET: onconnection","date":"2011-09-09T14:58:04.641Z","type":"message"}
{"nick":"bnoordhuis","message":"while you are seeing this:","date":"2011-09-09T14:58:20.126Z","type":"message"}
{"nick":"bnoordhuis","message":"NET: onconnection","date":"2011-09-09T14:58:20.671Z","type":"message"}
{"nick":"bnoordhuis","message":"NET: afterConnect","date":"2011-09-09T14:58:20.832Z","type":"message"}
{"nick":"bnoordhuis","message":"NET: Drain the connect queue","date":"2011-09-09T14:58:20.992Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: on linux the connection and connected events are reversed","date":"2011-09-09T14:59:27.269Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: no you","date":"2011-09-09T14:59:56.596Z","type":"message"}
{"nick":"bnoordhuis","message":"sorry, i meant: no u","date":"2011-09-09T15:00:08.047Z","type":"message"}
{"nick":"bnoordhuis","message":"but isn't that a bug?","date":"2011-09-09T15:01:04.291Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: not necessarily","date":"2011-09-09T15:01:16.123Z","type":"message"}
{"nick":"piscisaureus","message":"maybe it indicates a bug","date":"2011-09-09T15:01:23.102Z","type":"message"}
{"nick":"bnoordhuis","message":"different platforms, different behaviour - i don't like that","date":"2011-09-09T15:01:40.778Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but there is no guarantee in which order libuv reports connections and connected","date":"2011-09-09T15:01:47.080Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: remember, this is a server. normally you don't even connect to yourself","date":"2011-09-09T15:02:32.561Z","type":"message"}
{"nick":"piscisaureus","message":"your program should definitely not rely on any particular ordering","date":"2011-09-09T15:02:44.418Z","type":"message"}
{"nick":"bnoordhuis","message":"i understand and appreciate that","date":"2011-09-09T15:02:52.920Z","type":"message"}
{"nick":"bnoordhuis","message":"still makes me uneasy","date":"2011-09-09T15:02:56.075Z","type":"message"}
{"nick":"bnoordhuis","message":"but okay, let's move on","date":"2011-09-09T15:03:00.086Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: have a valiumpje","date":"2011-09-09T15:03:14.481Z","type":"message"}
{"nick":"bnoordhuis","message":"well, i'm not sure what's causing it to fail for you","date":"2011-09-09T15:04:52.865Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't see obvious bugs in either the test or tls.js","date":"2011-09-09T15:05:04.515Z","type":"message"}
{"nick":"piscisaureus","date":"2011-09-09T15:09:10.318Z","type":"part"}
{"nick":"piscisaureus","date":"2011-09-09T15:12:04.188Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: got it. will explain over 5 minuten","date":"2011-09-09T15:16:37.941Z","type":"message"}
{"nick":"bnoordhuis","message":"ack","date":"2011-09-09T15:17:19.424Z","type":"message"}
{"nick":"piscisaureus","message":"maybe 10","date":"2011-09-09T15:17:27.957Z","type":"message"}
{"nick":"piscisaureus","message":":-)","date":"2011-09-09T15:17:30.547Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: hmm. it is a problem with tls after all","date":"2011-09-09T15:23:09.964Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: do tell","date":"2011-09-09T15:23:53.424Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: server.close() was just blurring my view.","date":"2011-09-09T15:24:14.557Z","type":"message"}
{"nick":"piscisaureus","message":"but look here: https://gist.github.com/1206510","date":"2011-09-09T15:24:19.639Z","type":"message"}
{"nick":"bnoordhuis","message":"4 extra sockets?","date":"2011-09-09T15:24:48.886Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: no, that's not it","date":"2011-09-09T15:24:59.329Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: that cleartext.end is destroying the underlying socket too soon","date":"2011-09-09T15:25:11.443Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: it shouln', it should attempt graceful shutdown","date":"2011-09-09T15:25:51.043Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: how so?","date":"2011-09-09T15:25:51.242Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: the server-end socket is closed before the client even knows it's connected","date":"2011-09-09T15:26:32.757Z","type":"message"}
{"nick":"piscisaureus","message":"so the client thinks something went horribly wrong","date":"2011-09-09T15:26:41.475Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: don't be distracted by that read fail: 388 btw - that's expected","date":"2011-09-09T15:27:23.524Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: okay - but where/how in tls.js is the server socket destructed too soon?","date":"2011-09-09T15:28:28.469Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u0002fa334ef\u000f \u000310\u000f/ wscript \u0002:\u000f build: install uv-private/*.h, fixes native add-on builds - http://git.io/JSrNFw","date":"2011-09-09T15:31:01.240Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: at Socket.destroy (net_uv.js:264:18)","date":"2011-09-09T15:32:44.751Z","type":"message"}
{"nick":"piscisaureus","message":"at EncryptedStream.onclose (stream.js:92:10)","date":"2011-09-09T15:32:44.908Z","type":"message"}
{"nick":"piscisaureus","message":"at EncryptedStream.emit (events.js:88:20)","date":"2011-09-09T15:32:44.908Z","type":"message"}
{"nick":"piscisaureus","message":"at Array.<anonymous> (tls.js:682:22)","date":"2011-09-09T15:32:44.908Z","type":"message"}
{"nick":"piscisaureus","message":"at EventEmitter._tickCallback (node.js:195:26)","date":"2011-09-09T15:32:44.908Z","type":"message"}
{"nick":"bnoordhuis","message":"ah","date":"2011-09-09T15:34:22.248Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: if I swap dest.destroy for destroy.end the test passes","date":"2011-09-09T15:35:04.400Z","type":"message"}
{"nick":"piscisaureus","message":"destroySoon() doesn't help\u001f","date":"2011-09-09T15:35:04.560Z","type":"message"}
{"nick":"bnoordhuis","message":"what happens if you change line 243 in tls.js from this:","date":"2011-09-09T15:35:22.043Z","type":"message"}
{"nick":"bnoordhuis","message":"this.pair.destroy();","date":"2011-09-09T15:35:23.430Z","type":"message"}
{"nick":"bnoordhuis","message":"to: process.nextTick(function() { this.pair.destroy(); });","date":"2011-09-09T15:35:33.531Z","type":"message"}
{"nick":"piscisaureus","message":"bnoorhuis: let's make it","date":"2011-09-09T15:36:15.349Z","type":"message"}
{"nick":"piscisaureus","message":"var self = this;","date":"2011-09-09T15:36:15.527Z","type":"message"}
{"nick":"piscisaureus","message":"  process.nextTick(function () { self.pair.destroy(); });","date":"2011-09-09T15:36:15.527Z","type":"message"}
{"nick":"piscisaureus","message":"shall we :-)","date":"2011-09-09T15:36:15.527Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: doesn't help","date":"2011-09-09T15:36:34.966Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: probably that is because the pair.destroy() still gets inserted before the connect callback is called","date":"2011-09-09T15:37:11.020Z","type":"message"}
{"nick":"piscisaureus","message":"because nextTick() short-circuits and takes precedence over io events","date":"2011-09-09T15:37:30.433Z","type":"message"}
{"nick":"bnoordhuis","message":"right","date":"2011-09-09T15:37:37.295Z","type":"message"}
{"nick":"piscisaureus","message":"brb","date":"2011-09-09T15:38:24.929Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: how's it going?","date":"2011-09-09T15:59:55.434Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: looking good","date":"2011-09-09T16:01:20.069Z","type":"message"}
{"nick":"ryah","message":"indutny: yo","date":"2011-09-09T16:01:33.478Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: what about making that destroy a .end? or maybe make it a end on windows only and only if the socket hasn't received anything from the other end","date":"2011-09-09T16:02:34.473Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: felixge is here - im going to take him to the office - and i'll be ready to continue in approximately 1 hour","date":"2011-09-09T16:02:37.134Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: ok.","date":"2011-09-09T16:02:59.565Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: what .end method are we talking about here?","date":"2011-09-09T16:03:20.957Z","type":"message"}
{"nick":"dmkbot1","reason":"Remote host closed the connection","date":"2011-09-09T16:03:35.647Z","type":"quit"}
{"nick":"bnoordhuis","message":"ryah: say hi to felix from me","date":"2011-09-09T16:03:49.565Z","type":"message"}
{"nick":"dmkbot","date":"2011-09-09T16:03:52.227Z","type":"join"}
{"nick":"piscisaureus","message":"yes from me too","date":"2011-09-09T16:03:59.275Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: https://github.com/joyent/node/blob/master/lib/stream.js#L92","date":"2011-09-09T16:04:49.305Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: if I make that an .end it work","date":"2011-09-09T16:04:56.655Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but maybe the tls stream is just wrong and should not emit 'close' but something else","date":"2011-09-09T16:05:19.724Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: what about tls.js needs to be updated?","date":"2011-09-09T16:06:07.685Z","type":"message"}
{"nick":"ryah","message":"the fact that it prints .fd ?","date":"2011-09-09T16:06:12.750Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: nonono","date":"2011-09-09T16:06:17.115Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: sorry - my comment there was wrong","date":"2011-09-09T16:06:24.056Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: but I am seeing test-tls-peer-certificate fail","date":"2011-09-09T16:06:39.070Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: because on windows the accepted socket gets destroyed too soon. tls does not attempt to shut down gracefully, it just kills the socket","date":"2011-09-09T16:07:13.319Z","type":"message"}
{"nick":"felixge","date":"2011-09-09T16:07:20.681Z","type":"join"}
{"nick":"piscisaureus","message":"(and I think that could be wrong)","date":"2011-09-09T16:07:27.896Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i don't think we should change stream.js","date":"2011-09-09T16:10:12.704Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: no, that's too hot to handle","date":"2011-09-09T16:10:32.308Z","type":"message"}
{"nick":"bnoordhuis","message":"but presumably tls.js should end the stream, not close it","date":"2011-09-09T16:10:33.747Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: yes","date":"2011-09-09T16:10:40.220Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: let me check if that works correctly here","date":"2011-09-09T16:11:25.410Z","type":"message"}
{"nick":"piscisaureus","message":"I think this relates to 2 more failures on windows","date":"2011-09-09T16:12:01.155Z","type":"message"}
{"nick":"piscisaureus","message":"at least test-regress-GH-1531","date":"2011-09-09T16:12:14.025Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://gist.github.com/cf200af99b4ae26eb5a1 <- passes test-tls-peer-certificate.js but hangs other tls tests :/","date":"2011-09-09T16:14:33.911Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: aren't those other tests just observing the close event","date":"2011-09-09T16:15:14.339Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: maybe we should carry this to the scrum call tonight","date":"2011-09-09T16:15:33.186Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes, let me check that","date":"2011-09-09T16:16:22.669Z","type":"message"}
{"nick":"piscisaureus","message":"although - I'd like to have a proposed fix then :-)","date":"2011-09-09T16:16:22.825Z","type":"message"}
{"nick":"bnoordhuis","message":"the majority seems to pass","date":"2011-09-09T16:16:29.933Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: the risk is that we subtly break node programs that rely on close","date":"2011-09-09T16:19:02.661Z","type":"message"}
{"nick":"bnoordhuis","message":"i wouldn't use the word 'subtly' here :)","date":"2011-09-09T16:19:43.206Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://gist.github.com/cf200af99b4ae26eb5a1 <- that makes the tests pass","date":"2011-09-09T16:20:46.897Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ok, thanks","date":"2011-09-09T16:21:23.146Z","type":"message"}
{"nick":"piscisaureus","message":"I am going to try that on windows","date":"2011-09-09T16:21:27.302Z","type":"message"}
{"nick":"piscisaureus","message":"let's discuss this patch with ryah asap","date":"2011-09-09T16:21:34.819Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: maybe we should make sure that the cleartext/encrypted streams emit close too","date":"2011-09-09T16:22:01.792Z","type":"message"}
{"nick":"piscisaureus","message":"just like other streams do","date":"2011-09-09T16:22:05.890Z","type":"message"}
{"nick":"bnoordhuis","message":"yes maybe","date":"2011-09-09T16:22:21.198Z","type":"message"}
{"nick":"bnoordhuis","message":"ot1h, backwards compatibility is a good thing","date":"2011-09-09T16:22:32.028Z","type":"message"}
{"nick":"bnoordhuis","message":"otoh, you don't want to carry too much cruft along","date":"2011-09-09T16:22:40.622Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I'm not doing it for backward compatibility","date":"2011-09-09T16:23:05.467Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: it should just adhere to the stream specifications","date":"2011-09-09T16:23:14.656Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm, i suppose that's a fair point","date":"2011-09-09T16:23:43.807Z","type":"message"}
{"nick":"bnoordhuis","message":"do streams guarantee that a close event's emitted?","date":"2011-09-09T16:24:04.090Z","type":"message"}
{"nick":"bnoordhuis","message":"close -> Emitted when the underlying file descriptor has been closed.","date":"2011-09-09T16:24:31.189Z","type":"message"}
{"nick":"bnoordhuis","message":"what file descriptor?","date":"2011-09-09T16:24:34.121Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: the socket fd?","date":"2011-09-09T16:24:55.051Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: let's discuss with ryah","date":"2011-09-09T16:25:09.705Z","type":"message"}
{"nick":"piscisaureus","message":"the boss and the streams guy","date":"2011-09-09T16:25:15.047Z","type":"message"}
{"nick":"piscisaureus","message":"so let's discuss with ryah and felix","date":"2011-09-09T16:25:26.840Z","type":"message"}
{"nick":"bnoordhuis","message":"the streams guy, that's felixge","date":"2011-09-09T16:25:28.059Z","type":"message"}
{"nick":"bnoordhuis","message":"right :)","date":"2011-09-09T16:25:31.019Z","type":"message"}
{"nick":"bnoordhuis","message":"reading streams.markdown, i think emitting end followed by close should cover all bases","date":"2011-09-09T16:26:15.943Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: bbl. dinnner","date":"2011-09-09T16:26:56.844Z","type":"message"}
{"nick":"bnoordhuis","message":"right, 18:30 already","date":"2011-09-09T16:27:10.699Z","type":"message"}
{"nick":"ryah","message":"bbiab","date":"2011-09-09T16:30:02.432Z","type":"message"}
{"nick":"indutny","message":"ryah: yo!","date":"2011-09-09T16:30:34.308Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: when you're back: https://gist.github.com/cf200af99b4ae26eb5a1 <- passes tls and https tests","date":"2011-09-09T16:30:39.328Z","type":"message"}
{"nick":"indutny","message":"ryah: brb, rebooting to linux","date":"2011-09-09T16:30:46.159Z","type":"message"}
{"nick":"indutny","message":"back","date":"2011-09-09T16:32:41.172Z","type":"message"}
{"nick":"indutny","message":"time to merge branchees! :)","date":"2011-09-09T16:33:07.938Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i think ryah just went afk","date":"2011-09-09T16:33:24.279Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: hehe :)","date":"2011-09-09T16:33:39.314Z","type":"message"}
{"nick":"felixge","message":"bnoordhuis: he is on his keyboard","date":"2011-09-09T16:33:54.044Z","type":"message"}
{"nick":"felixge","message":"bnoordhuis: but I guess he is away from this window","date":"2011-09-09T16:34:05.353Z","type":"message"}
{"nick":"felixge","message":":)","date":"2011-09-09T16:34:06.318Z","type":"message"}
{"nick":"indutny","message":"felixge: :)","date":"2011-09-09T16:34:13.098Z","type":"message"}
{"nick":"bnoordhuis","message":"felixge: what brings you to SF?","date":"2011-09-09T16:34:30.619Z","type":"message"}
{"nick":"felixge","message":"bnoordhuis: node","date":"2011-09-09T16:34:39.550Z","type":"message"}
{"nick":"bnoordhuis","message":"felixge: node no longer runs in germany?","date":"2011-09-09T16:35:01.919Z","type":"message"}
{"nick":"felixge","message":"bnoordhuis: well that, and that microsoft is sending me to their BUILD conference next week","date":"2011-09-09T16:35:03.090Z","type":"message"}
{"nick":"bnoordhuis","message":"ah cool","date":"2011-09-09T16:35:08.619Z","type":"message"}
{"nick":"felixge","message":"so I had a free ride to piggy back on","date":"2011-09-09T16:35:09.673Z","type":"message"}
{"nick":"DrPizza","message":"felixge: orly","date":"2011-09-09T16:36:11.531Z","type":"message"}
{"nick":"DrPizza","message":"will there be node presentations at BUILD?","date":"2011-09-09T16:36:23.627Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: \"https://gist.github.com/cf200af99b4ae26eb5a1\"  <- so many problems with that cleartext/encrypted thing","date":"2011-09-09T16:36:24.193Z","type":"message"}
{"nick":"felixge","message":"DrPizza: no, I'm just attending","date":"2011-09-09T16:36:55.752Z","type":"message"}
{"nick":"felixge","message":"it's weird","date":"2011-09-09T16:36:56.884Z","type":"message"}
{"nick":"felixge","message":"some german MS Evangelist contacted me out of the blue with the offer","date":"2011-09-09T16:37:12.874Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: yes - usually hard to debug too","date":"2011-09-09T16:37:14.028Z","type":"message"}
{"nick":"DrPizza","message":"felixge: weird","date":"2011-09-09T16:37:27.684Z","type":"message"}
{"nick":"felixge","message":"DrPizza: well, I might have to sell my soul","date":"2011-09-09T16:37:51.891Z","type":"message"}
{"nick":"felixge","message":"so I don't know if it's a good deal yet","date":"2011-09-09T16:37:58.970Z","type":"message"}
{"nick":"felixge","message":";)","date":"2011-09-09T16:37:59.522Z","type":"message"}
{"nick":"DrPizza","message":"a small price to pay","date":"2011-09-09T16:38:03.691Z","type":"message"}
{"nick":"felixge","message":"DrPizza: I have already sold my soul, so yes","date":"2011-09-09T16:39:39.599Z","type":"message"}
{"nick":"felixge","message":":)","date":"2011-09-09T16:39:40.048Z","type":"message"}
{"nick":"felixge","reason":"Quit: felixge","date":"2011-09-09T16:39:41.487Z","type":"quit"}
{"nick":"isaacs","date":"2011-09-09T16:45:58.638Z","type":"join"}
{"nick":"indutny","message":"ryah: please ping me when you'll get back here","date":"2011-09-09T16:52:23.883Z","type":"message"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-09-09T17:21:41.274Z","type":"quit"}
{"nick":"graydon","date":"2011-09-09T17:24:47.470Z","type":"join"}
{"nick":"ryah","message":"indutny: ping","date":"2011-09-09T17:28:05.474Z","type":"message"}
{"nick":"indutny","message":"ryah: hi!","date":"2011-09-09T17:28:21.736Z","type":"message"}
{"nick":"indutny","message":"good morning/day","date":"2011-09-09T17:28:25.815Z","type":"message"}
{"nick":"indutny","message":"can you please review this https://github.com/joyent/node/pull/1673 ?","date":"2011-09-09T17:28:33.091Z","type":"message"}
{"nick":"indutny","message":"and then this https://github.com/joyent/node/pull/1667 :D","date":"2011-09-09T17:28:49.805Z","type":"message"}
{"nick":"ryah","message":"indutny: going to wait until after the release - we're still trying to ship it","date":"2011-09-09T17:29:05.559Z","type":"message"}
{"nick":"ryah","message":"but i will merge this weekend","date":"2011-09-09T17:29:16.645Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2011-09-09T17:29:17.150Z","type":"message"}
{"nick":"indutny","message":"any problems?","date":"2011-09-09T17:29:20.718Z","type":"message"}
{"nick":"indutny","message":"with release","date":"2011-09-09T17:29:23.211Z","type":"message"}
{"nick":"indutny","message":"can I be useful?","date":"2011-09-09T17:29:32.193Z","type":"message"}
{"nick":"ryah","message":"indutny: there were some problems yesterday, yes","date":"2011-09-09T17:29:32.540Z","type":"message"}
{"nick":"brson","date":"2011-09-09T17:35:51.283Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: yt","date":"2011-09-09T17:59:57.428Z","type":"message"}
{"nick":"piscisaureus","message":"?","date":"2011-09-09T17:59:58.787Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes","date":"2011-09-09T18:00:12.059Z","type":"message"}
{"nick":"bnoordhuis","message":"call time?","date":"2011-09-09T18:00:13.794Z","type":"message"}
{"nick":"piscisaureus","message":"I would think so","date":"2011-09-09T18:00:20.254Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: maybe wait 5 minutes, then I can test your patch","date":"2011-09-09T18:00:34.106Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: which patch is it again? https://gist.github.com/cf200af99b4ae26eb5a1 <-- this?","date":"2011-09-09T18:02:26.208Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes","date":"2011-09-09T18:02:38.093Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: seems incomplete","date":"2011-09-09T18:02:46.674Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: https://gist.github.com/1206896","date":"2011-09-09T18:02:47.875Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: bit I'll try anyway","date":"2011-09-09T18:03:11.171Z","type":"message"}
{"nick":"ryah","message":"is it call time?","date":"2011-09-09T18:03:31.926Z","type":"message"}
{"nick":"bnoordhuis","message":"incomplete? well, i never","date":"2011-09-09T18:03:32.092Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus wants to wait a few more minutes","date":"2011-09-09T18:03:50.251Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: well, the patch does it","date":"2011-09-09T18:06:18.105Z","type":"message"}
{"nick":"piscisaureus","message":"ok, call time","date":"2011-09-09T18:06:22.062Z","type":"message"}
{"nick":"bnoordhuis","message":"ready and waiting","date":"2011-09-09T18:07:03.022Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: let's try it once","date":"2011-09-09T18:07:07.929Z","type":"message"}
{"nick":"bnoordhuis","message":"like your girlfriend","date":"2011-09-09T18:07:08.089Z","type":"message"}
{"nick":"ryah","message":"piscisaureus, bnoordhuis, igorzi: i just sent an email with a confernce line","date":"2011-09-09T18:07:09.296Z","type":"message"}
{"nick":"ryah","message":"because we are 3 people here","date":"2011-09-09T18:07:27.251Z","type":"message"}
{"nick":"piscisaureus","message":"okay","date":"2011-09-09T18:07:58.166Z","type":"message"}
{"nick":"igorzi","message":"are we doing the call now? or at noon?","date":"2011-09-09T18:08:08.605Z","type":"message"}
{"nick":"bnoordhuis","message":"will have to check if i can actually call internationally with my landline...","date":"2011-09-09T18:08:27.787Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: it's too expensive; use skype","date":"2011-09-09T18:08:42.114Z","type":"message"}
{"nick":"ryah","message":"igorzi: sorry - if you can now?","date":"2011-09-09T18:09:22.379Z","type":"message"}
{"nick":"ryah","message":"if not we can wait","date":"2011-09-09T18:09:40.958Z","type":"message"}
{"nick":"igorzi","message":"yeah, no prob","date":"2011-09-09T18:09:42.816Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: you need skype credit for that, don't you?","date":"2011-09-09T18:09:49.917Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: yes, I have that","date":"2011-09-09T18:09:57.477Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i don't","date":"2011-09-09T18:10:02.985Z","type":"message"}
{"nick":"piscisaureus","message":"maybe we should keep it short","date":"2011-09-09T18:10:05.413Z","type":"message"}
{"nick":"ryah","message":"we can do skype too if it's too hard","date":"2011-09-09T18:10:17.534Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, please","date":"2011-09-09T18:10:22.331Z","type":"message"}
{"nick":"ryah","message":"ok","date":"2011-09-09T18:10:24.436Z","type":"message"}
{"nick":"piscisaureus","message":"https://raw.github.com/gist/cf200af99b4ae26eb5a1/a870cf82b7804ece948ac5eadb7b38e9df2a2785/tls.patch","date":"2011-09-09T18:12:48.627Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: your patch for test/simple/test-fs-chmod.js breaks it on unix","date":"2011-09-09T18:19:49.111Z","type":"message"}
{"nick":"bnoordhuis","message":"AssertionError: 511 == 329","date":"2011-09-09T18:21:07.934Z","type":"message"}
{"nick":"bnoordhuis","message":"    at Object.oncomplete (/home/bnoordhuis/src/nodejs/node/test/simple/test-fs-chmod.js:52:14)","date":"2011-09-09T18:21:08.087Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: bnoordhuis: can you fix the chmod test now? then I can create rc2 after that","date":"2011-09-09T18:23:30.275Z","type":"message"}
{"nick":"igorzi","message":"strange, isn't it doing on unix exactly the same as it before?","date":"2011-09-09T18:23:36.669Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: evidently not :)","date":"2011-09-09T18:23:45.320Z","type":"message"}
{"nick":"bnoordhuis","message":"let me strace it","date":"2011-09-09T18:23:53.299Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i've been informed that it's dinner time for me","date":"2011-09-09T18:25:57.362Z","type":"message"}
{"nick":"bnoordhuis","message":"so... back in an hour","date":"2011-09-09T18:26:07.205Z","type":"message"}
{"nick":"igorzi","message":"ok, i'll figure it out (i can repeat it on unix)","date":"2011-09-09T18:26:26.509Z","type":"message"}
{"nick":"erickt","date":"2011-09-09T18:26:26.920Z","type":"join"}
{"nick":"erickt","message":"Good morning #libuv. I noticed that it seems a bunch of the public uv_req_t functions aren't checking if the provided req isn't null (like uv_fs_open), but uv_getaddrinfo is checking. Should all those functions be changed to test for an invalid value?","date":"2011-09-09T18:28:51.571Z","type":"message"}
{"nick":"ryah","message":"erickt: i suppose","date":"2011-09-09T18:29:48.442Z","type":"message"}
{"nick":"erickt","message":"also, digging around in the uv_getaddrinfo code, we could theoretically just not use memset to clear out the uv_getaddrinfo_t, which would once again allow you to set the uv_getaddrinfo_t->data without needing to pass in a \"void* data\"","date":"2011-09-09T18:38:49.758Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: added a tab to the sheet","date":"2011-09-09T18:39:39.996Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 260 seconds","date":"2011-09-09T18:40:18.195Z","type":"quit"}
{"nick":"piscisaureus","message":"ryah: it would be nice if we could have at least 4 build bots. osx linux windows sunos","date":"2011-09-09T18:41:02.428Z","type":"message"}
{"nick":"piscisaureus","message":"that worked well","date":"2011-09-09T18:41:11.324Z","type":"message"}
{"nick":"piscisaureus","message":"btw, test-timers is a small concern, test-keep-alive should not crash :-/","date":"2011-09-09T18:42:17.436Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: https://github.com/igorzi/node/commit/767b1ae86a92ea2596de6e0eefccbbcea0905bb6","date":"2011-09-09T18:47:44.346Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: i can't see the new column","date":"2011-09-09T18:55:43.918Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I added a new tab. I guess we can copy-paste?","date":"2011-09-09T19:04:49.942Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: https://gist.github.com/1207050 <-- sunos","date":"2011-09-09T19:05:36.486Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: ah, new tab, okay","date":"2011-09-09T19:06:39.941Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: let me improve the script later","date":"2011-09-09T19:07:38.484Z","type":"message"}
{"nick":"ryah","message":"okay - yeah","date":"2011-09-09T19:07:42.101Z","type":"message"}
{"nick":"piscisaureus","message":"first cut the rc","date":"2011-09-09T19:07:44.037Z","type":"message"}
{"nick":"igorzi","message":"DrPizza: on unix, if you start out with a file where stat.mode = 0100666, then do chmod(0400), (stat.mode & 0777) will be 0400.","date":"2011-09-09T19:09:06.209Z","type":"message"}
{"nick":"DrPizza","message":"right","date":"2011-09-09T19:09:23.177Z","type":"message"}
{"nick":"DrPizza","message":"stat.mode & 0777 should match the mode passed to chmod","date":"2011-09-09T19:09:33.385Z","type":"message"}
{"nick":"ryah","message":"groan","date":"2011-09-09T19:09:37.742Z","type":"message"}
{"nick":"ryah","message":"there are some problems on unix","date":"2011-09-09T19:09:41.943Z","type":"message"}
{"nick":"igorzi","message":"DrPizza: but not on windows","date":"2011-09-09T19:09:44.854Z","type":"message"}
{"nick":"DrPizza","message":"igorzi: why not? ","date":"2011-09-09T19:10:18.329Z","type":"message"}
{"nick":"igorzi","message":"on windows (stat.mode & 0777) will be 0444","date":"2011-09-09T19:10:20.888Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Igor Zinkovsky\u000f \u000307master\u000f * r\u000279ce48d\u000f \u000310\u000f/ test/simple/test-fs-chmod.js \u0002:\u000f fix for test-fs-chmod - http://git.io/X7mykg","date":"2011-09-09T19:10:25.412Z","type":"message"}
{"nick":"DrPizza","message":"igorzi: I think the group and other bits should be masked off by libuv","date":"2011-09-09T19:10:45.058Z","type":"message"}
{"nick":"DrPizza","message":"since they don't exist on windows","date":"2011-09-09T19:10:55.818Z","type":"message"}
{"nick":"igorzi","message":"hmm","date":"2011-09-09T19:12:50.202Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: what do you think?","date":"2011-09-09T19:13:19.225Z","type":"message"}
{"nick":"piscisaureus","message":"shrug, dunno, this seems fine","date":"2011-09-09T19:14:26.560Z","type":"message"}
{"nick":"piscisaureus","message":"after the release, please","date":"2011-09-09T19:14:30.700Z","type":"message"}
{"nick":"piscisaureus","message":"let's get the tree reopened first","date":"2011-09-09T19:14:42.315Z","type":"message"}
{"nick":"ryah","message":"meh, test/pummel/test-keep-alive.js is segfaulting on OSX and i dont really know why","date":"2011-09-09T19:15:32.309Z","type":"message"}
{"nick":"ryah","message":"it seems to be getting SIGPIPE ...","date":"2011-09-09T19:15:39.093Z","type":"message"}
{"nick":"ryah","message":"even though we ignore it","date":"2011-09-09T19:15:42.958Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: does this sound familiar? we're not unignoring it somehow?","date":"2011-09-09T19:16:20.412Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: DrPizza: ok, let's keep it as is for this release, and mask off the bits that don't exist on windows for next release","date":"2011-09-09T19:16:22.344Z","type":"message"}
{"nick":"DrPizza","message":"ok","date":"2011-09-09T19:16:31.176Z","type":"message"}
{"nick":"DrPizza","message":"sounds like a plan","date":"2011-09-09T19:16:34.198Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: cut rc2 anyway?","date":"2011-09-09T19:22:01.397Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: ok","date":"2011-09-09T19:22:16.747Z","type":"message"}
{"nick":"piscisaureus","message":"ryah - or?","date":"2011-09-09T19:22:23.145Z","type":"message"}
{"nick":"piscisaureus","message":"you tell me","date":"2011-09-09T19:22:24.832Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: yes, please","date":"2011-09-09T19:23:07.831Z","type":"message"}
{"nick":"piscisaureus","message":"2m50s remaining","date":"2011-09-09T19:25:08.113Z","type":"message"}
{"nick":"piscisaureus","message":"1m50s remaining","date":"2011-09-09T19:26:08.802Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: http://nodejs.org/dist/v0.5.5/node-v0.5.6-rc2.tar.gz","date":"2011-09-09T19:32:51.214Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: okay - im going to start the tests","date":"2011-09-09T19:35:22.510Z","type":"message"}
{"nick":"ryah","message":"fuck i kind of think we should fix this sigpipe issue","date":"2011-09-09T19:35:31.704Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: You can do that if you want","date":"2011-09-09T19:35:42.863Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I am going to start xp testing","date":"2011-09-09T19:35:49.088Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: your tar file is messed up","date":"2011-09-09T19:36:24.282Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: i can't untar it with gnu tar","date":"2011-09-09T19:36:31.090Z","type":"message"}
{"nick":"piscisaureus","message":"oh?","date":"2011-09-09T19:36:31.599Z","type":"message"}
{"nick":"ryah","message":"% tar -zvxf node-v0.5.6-rc2.tar.gz                                                            ","date":"2011-09-09T19:36:46.953Z","type":"message"}
{"nick":"ryah","message":"                                                                                                                   ","date":"2011-09-09T19:36:50.294Z","type":"message"}
{"nick":"ryah","message":"gzip: stdin: not in gzip format                                                                                    ","date":"2011-09-09T19:36:53.842Z","type":"message"}
{"nick":"ryah","message":"tar: Child returned status 1                                                                                       ","date":"2011-09-09T19:36:57.358Z","type":"message"}
{"nick":"ryah","message":"tar: Error exit delayed from previous errors","date":"2011-09-09T19:37:00.873Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-09T19:37:06.841Z","type":"message"}
{"nick":"piscisaureus","message":"works here","date":"2011-09-09T19:37:17.626Z","type":"message"}
{"nick":"piscisaureus","message":"also with rar","date":"2011-09-09T19:37:21.444Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: do the 'make dist' on linux please","date":"2011-09-09T19:37:46.254Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301ryah: http://nodejs.org/dist/v0.5.6/node-v0.5.6-rc2.tar.gz\u0003\u000301","date":"2011-09-09T19:40:06.962Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: the url was wrong","date":"2011-09-09T19:40:10.829Z","type":"message"}
{"nick":"piscisaureus","message":"this windows build is as good as it gets - now trying mingw on xp","date":"2011-09-09T19:47:05.677Z","type":"message"}
{"nick":"piscisaureus","message":"sigh. ENOENT still != UNKNOWN","date":"2011-09-09T19:53:01.900Z","type":"message"}
{"nick":"piscisaureus","message":"[03:34|% 100|+ 244|-  36]: Done","date":"2011-09-09T20:01:19.268Z","type":"message"}
{"nick":"piscisaureus","message":"^-- xp. not bad","date":"2011-09-09T20:01:22.817Z","type":"message"}
{"nick":"erickt","message":"ryah: got a moment to talk uv_getaddrinfo?","date":"2011-09-09T20:03:38.651Z","type":"message"}
{"nick":"piscisaureus","message":"win 7: [02:59|% 100|+ 245|-  35]: Done","date":"2011-09-09T20:13:08.665Z","type":"message"}
{"nick":"piscisaureus","message":"[03:11|% 100|+ 270|-  10]: Done","date":"2011-09-09T20:33:17.602Z","type":"message"}
{"nick":"piscisaureus","message":"^-- linux","date":"2011-09-09T20:33:17.858Z","type":"message"}
{"nick":"piscisaureus","message":"test-child-process-ipc: crashed","date":"2011-09-09T20:33:18.013Z","type":"message"}
{"nick":"piscisaureus","message":"test-fs-error-messages: src/unix/fs.c:88: uv_fs_req_cleanup: Assertion `req->ptr' failed.","date":"2011-09-09T20:33:18.013Z","type":"message"}
{"nick":"piscisaureus","message":"otherwise looking good","date":"2011-09-09T20:33:23.253Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: ^","date":"2011-09-09T20:33:26.343Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, i'm seeing that too","date":"2011-09-09T20:33:47.256Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: both?","date":"2011-09-09T20:36:16.377Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: please run ./node_g test/pummel/test-keep-alive.js","date":"2011-09-09T20:36:35.967Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: the fs.c assertion, not that test-child-process-ipc crashes","date":"2011-09-09T20:36:52.822Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: bnoordhuis: \u0003test-child-process-ipc crashes\u0003 with EPIPE for me","date":"2011-09-09T20:37:06.862Z","type":"message"}
{"nick":"piscisaureus","message":"ehm","date":"2011-09-09T20:37:18.153Z","type":"message"}
{"nick":"piscisaureus","message":"SIGPIPE I mean","date":"2011-09-09T20:37:21.334Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: test-keep-alive crashes with SIGSEGV for me","date":"2011-09-09T20:37:36.659Z","type":"message"}
{"nick":"ryah","message":"http://support.microsoft.com/kb/156932 <-- async file i/o in windows is fucked","date":"2011-09-09T20:38:16.232Z","type":"message"}
{"nick":"bnoordhuis","message":"wait, not SIGSEGV but SIGPIPE","date":"2011-09-09T20:38:32.214Z","type":"message"}
{"nick":"ryah","message":"yeah","date":"2011-09-09T20:38:36.699Z","type":"message"}
{"nick":"ryah","message":"why are we crashing with SIGPIPE?","date":"2011-09-09T20:38:40.717Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I already knew... But if it would happen *only* in the situations outlined in that documument, it would be fine, we could work around it","date":"2011-09-09T20:39:22.423Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: sadly, not the case","date":"2011-09-09T20:39:37.378Z","type":"message"}
{"nick":"ryah","message":"my friend at chrome is telling me that because of this all async i/o in chrome is busted","date":"2011-09-09T20:40:39.428Z","type":"message"}
{"nick":"piscisaureus","message":"they should have tried before implementing it","date":"2011-09-09T20:41:15.678Z","type":"message"}
{"nick":"piscisaureus","message":"but again, if it were only that, it would be acceptable","date":"2011-09-09T20:41:28.885Z","type":"message"}
{"nick":"piscisaureus","message":"use FILE_FLAG_NO_BUFFERING, then it works fine","date":"2011-09-09T20:41:47.665Z","type":"message"}
{"nick":"piscisaureus","message":"(btw, we could use that for read streaming in libuv right?)","date":"2011-09-09T20:42:03.233Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: https://github.com/joyent/node/blob/79ce48d/src/node.cc#L2434","date":"2011-09-09T20:42:36.656Z","type":"message"}
{"nick":"piscisaureus","message":"and we could linux async io on linux","date":"2011-09-09T20:42:36.887Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: yes...","date":"2011-09-09T20:43:29.054Z","type":"message"}
{"nick":"ryah","message":"i think this is a blocker","date":"2011-09-09T20:43:42.033Z","type":"message"}
{"nick":"bnoordhuis","message":"you know, there's something fishy altogether","date":"2011-09-09T20:44:08.870Z","type":"message"}
{"nick":"bnoordhuis","message":"it also crashes with this: *** glibc detected *** ./node_g: free(): invalid pointer: 0x00003c0283f9f691 ***","date":"2011-09-09T20:44:13.059Z","type":"message"}
{"nick":"igorzi","message":"with FILE_FLAG_NO_BUFFERING file i/o should be async, but buffers need to be properly aligned though - http://msdn.microsoft.com/en-us/library/cc644950(v=vs.85).aspx","date":"2011-09-09T20:44:43.545Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: I know. And you need to read 512 bytes at a time, aligned to disk sectors","date":"2011-09-09T20:45:39.901Z","type":"message"}
{"nick":"bnoordhuis","message":"i have a hunch that it's got something to do with https://github.com/joyent/libuv/commit/431195c - the invalid free is coming from uv__stream_destroy","date":"2011-09-09T20:47:58.308Z","type":"message"}
{"nick":"ryah","message":"can we revert that?","date":"2011-09-09T20:50:36.471Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, and if do the test passes","date":"2011-09-09T20:50:45.444Z","type":"message"}
{"nick":"bnoordhuis","message":"*if i","date":"2011-09-09T20:50:50.889Z","type":"message"}
{"nick":"bnoordhuis","message":"but i don't think that commit is the real culprit, just exposing a bug somewhere else","date":"2011-09-09T20:51:41.879Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: it seems that EPIPE is successfully ignored here","date":"2011-09-09T20:53:46.267Z","type":"message"}
{"nick":"piscisaureus","message":"I can just `cont` after that, then it'll crash with:","date":"2011-09-09T20:54:15.926Z","type":"message"}
{"nick":"piscisaureus","message":"child end","date":"2011-09-09T20:54:16.081Z","type":"message"}
{"nick":"piscisaureus","message":"node.js:203","date":"2011-09-09T20:54:16.081Z","type":"message"}
{"nick":"piscisaureus","message":"        throw e; // process.nextTick error, or 'error' event on first tick               ^","date":"2011-09-09T20:54:16.081Z","type":"message"}
{"nick":"piscisaureus","message":"Error: write EPIPE","date":"2011-09-09T20:54:16.081Z","type":"message"}
{"nick":"piscisaureus","message":"    at errnoException (net_uv.js:557:11)","date":"2011-09-09T20:54:16.241Z","type":"message"}
{"nick":"piscisaureus","message":"    at Socket.write (net_uv.js:385:18)","date":"2011-09-09T20:54:16.241Z","type":"message"}
{"nick":"piscisaureus","message":"    at Socket.<anonymous> (/home/bert/node/test/simple/test-child-process-ipc.js:47:17)","date":"2011-09-09T20:54:17.200Z","type":"message"}
{"nick":"piscisaureus","message":"    at Socket.emit (events.js:67:17)","date":"2011-09-09T20:54:17.361Z","type":"message"}
{"nick":"piscisaureus","message":"    at Pipe.onread (net_uv.js:293:31)","date":"2011-09-09T20:54:18.094Z","type":"message"}
{"nick":"piscisaureus","message":"[Thread 0xb7fc5b70 (LWP 5170) exited]","date":"2011-09-09T20:54:18.251Z","type":"message"}
{"nick":"piscisaureus","message":"Program exited with code 01.","date":"2011-09-09T20:54:19.155Z","type":"message"}
{"nick":"ryah","message":"reverting bnoordhuis's commit does not make SIGPIPE go away","date":"2011-09-09T20:55:06.147Z","type":"message"}
{"nick":"piscisaureus","message":"I think this is the linux variation of the same bug that makes test-cli-eval fail on windows","date":"2011-09-09T20:55:38.185Z","type":"message"}
{"nick":"piscisaureus","message":"which is, closing the child end of stdout/stderr too soon","date":"2011-09-09T20:56:22.100Z","type":"message"}
{"nick":"ryah","message":"no the problem is we're getting a signal that we shouldn't","date":"2011-09-09T20:56:49.015Z","type":"message"}
{"nick":"ryah","message":"i dont really care if this test fails","date":"2011-09-09T20:56:59.862Z","type":"message"}
{"nick":"bnoordhuis","message":"one thing that test does, is write to the handle after it's closed","date":"2011-09-09T20:58:27.906Z","type":"message"}
{"nick":"piscisaureus","message":"so?","date":"2011-09-09T20:58:56.410Z","type":"message"}
{"nick":"piscisaureus","message":"it returns EPIPE","date":"2011-09-09T20:58:59.253Z","type":"message"}
{"nick":"piscisaureus","message":"is that bad?","date":"2011-09-09T20:59:02.578Z","type":"message"}
{"nick":"bnoordhuis","message":"https://gist.github.com/8ecfddd74773a016c893 <-patch that shows that","date":"2011-09-09T20:59:10.526Z","type":"message"}
{"nick":"ryah","message":"returning EPIPE isn't bad - but getting the signal is","date":"2011-09-09T21:00:12.961Z","type":"message"}
{"nick":"ryah","message":"in unix by default it returns EPIPE and sends you SIGPIPE","date":"2011-09-09T21:00:53.783Z","type":"message"}
{"nick":"ryah","message":"(this is so \"cat file | head -1\" works)","date":"2011-09-09T21:01:16.416Z","type":"message"}
{"nick":"ryah","message":"the cat process gets SIGPIPE and dies after the pipe is closed","date":"2011-09-09T21:01:49.298Z","type":"message"}
{"nick":"ryah","message":"if i dtruss it, i definitely see the sigaction being set","date":"2011-09-09T21:02:55.026Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: we should valgrind","date":"2011-09-09T21:03:00.094Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: working on it :)","date":"2011-09-09T21:03:09.102Z","type":"message"}
{"nick":"bnoordhuis","message":"but you know valgrind, no speed daemon","date":"2011-09-09T21:03:19.423Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245== Invalid read of size 8","date":"2011-09-09T21:05:37.538Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    at 0xA227C6: uv__clear_queue (stream.c:87)","date":"2011-09-09T21:05:37.703Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    by 0xA2288D: uv__stream_destroy (stream.c:102)","date":"2011-09-09T21:05:37.866Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    by 0xA1B58E: uv__finish_close (core.c:240)","date":"2011-09-09T21:05:37.867Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    by 0xA1B733: uv__next (core.c:278)","date":"2011-09-09T21:05:37.867Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    by 0xA28F31: ev_invoke_pending (ev.c:2143)","date":"2011-09-09T21:05:38.211Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    by 0xA29CF5: ev_run (ev.c:2519)","date":"2011-09-09T21:05:40.109Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    by 0xA1B2F4: uv_run (core.c:186)","date":"2011-09-09T21:05:42.027Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    by 0x63AE30: node::Start(int, char**) (node.cc:2533)","date":"2011-09-09T21:05:44.047Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    by 0x632E6F: main (node_main.cc:25)","date":"2011-09-09T21:05:46.115Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==  Address 0x7d80460 is 48 bytes inside a block of size 152 free'd","date":"2011-09-09T21:05:48.043Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    at 0x4C26DCF: operator delete(void*) (vg_replace_malloc.c:387)","date":"2011-09-09T21:05:50.090Z","type":"message"}
{"nick":"bnoordhuis","message":"==22245==    by 0x65CBF1: node::StreamWrap::Write(v8::Arguments const&) (stream_wrap.cc:250","date":"2011-09-09T21:05:54.086Z","type":"message"}
{"nick":"mraleph","date":"2011-09-09T21:07:59.600Z","type":"join"}
{"nick":"piscisaureus","message":"why are you guys using sigfillset btw?","date":"2011-09-09T21:10:25.630Z","type":"message"}
{"nick":"piscisaureus","message":"(and not sigemptyset?)","date":"2011-09-09T21:10:29.694Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: to block all other signals when the signal handler runs","date":"2011-09-09T21:12:30.894Z","type":"message"}
{"nick":"piscisaureus","message":"look. here's what I am seeing. When I run it without gdb (either node or node_g) it just dies with EPIPE","date":"2011-09-09T21:15:14.355Z","type":"message"}
{"nick":"piscisaureus","message":"only when I run with gdb I actually see SIGPIPE","date":"2011-09-09T21:15:27.058Z","type":"message"}
{"nick":"piscisaureus","message":"but couln't it be that SIG_IGN refers to some dummy procedure","date":"2011-09-09T21:15:50.626Z","type":"message"}
{"nick":"piscisaureus","message":"but gdb intercepts the SIGPIPE anyway, before it reaches this dummy function","date":"2011-09-09T21:16:05.508Z","type":"message"}
{"nick":"piscisaureus","message":"why not try to block the signal completely?","date":"2011-09-09T21:16:14.870Z","type":"message"}
{"nick":"piscisaureus","message":"(w/ sigprocmask)","date":"2011-09-09T21:16:20.762Z","type":"message"}
{"nick":"bnoordhuis","message":"sigprocmask is not thread-safe","date":"2011-09-09T21:16:46.272Z","type":"message"}
{"nick":"bnoordhuis","message":"or rather, thread-aware","date":"2011-09-09T21:16:56.757Z","type":"message"}
{"nick":"bnoordhuis","message":"you need pthread_sigprocmask for that","date":"2011-09-09T21:17:16.314Z","type":"message"}
{"nick":"bnoordhuis","message":"SIG_IGN is not a dummy signal handler btw, it's handled inside the kernel","date":"2011-09-09T21:17:40.669Z","type":"message"}
{"nick":"bnoordhuis","message":"that is, the signal never reaches the process","date":"2011-09-09T21:17:52.852Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: anyway, it doesn't seem to work","date":"2011-09-09T21:20:02.760Z","type":"message"}
{"nick":"piscisaureus","message":"sigset_t newset;","date":"2011-09-09T21:20:03.823Z","type":"message"}
{"nick":"piscisaureus","message":"sigemptyset(&newset);","date":"2011-09-09T21:20:03.985Z","type":"message"}
{"nick":"piscisaureus","message":"sigaddset(&newset,SIGPIPE);","date":"2011-09-09T21:20:04.212Z","type":"message"}
{"nick":"piscisaureus","message":"sigprocmask (SIG_BLOCK, &newset, NULL);\u0003","date":"2011-09-09T21:20:04.365Z","type":"message"}
{"nick":"piscisaureus","message":"^-- this however, works fine for me","date":"2011-09-09T21:20:10.252Z","type":"message"}
{"nick":"piscisaureus","message":"no more SIGPIPE","date":"2011-09-09T21:20:13.127Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: also interesting. It doesn't seem that the process is actually killed by SIGPIPE","date":"2011-09-09T21:24:45.228Z","type":"message"}
{"nick":"piscisaureus","message":"it is killed by SIGSEGV","date":"2011-09-09T21:24:52.557Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://github.com/joyent/libuv/commit/431195c <- if i back out that patch, the test passes","date":"2011-09-09T21:25:39.698Z","type":"message"}
{"nick":"bnoordhuis","message":"without memory corruption either","date":"2011-09-09T21:25:44.006Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: not me","date":"2011-09-09T21:26:04.221Z","type":"message"}
{"nick":"ryah","message":"let me try again","date":"2011-09-09T21:26:06.654Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: what's wrong with that patch","date":"2011-09-09T21:26:06.856Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: afaict nothing, i suspect it exposes a bug in node","date":"2011-09-09T21:26:44.925Z","type":"message"}
{"nick":"bnoordhuis","message":"if, for example, i run tcp_writealot through valgrind, all goes well","date":"2011-09-09T21:26:59.250Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: you still get the SIGPIPE but node won't crash anymore","date":"2011-09-09T21:27:33.170Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: tcp_writealot writes small chunks","date":"2011-09-09T21:27:38.042Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: you should try benchmark-pump","date":"2011-09-09T21:27:47.611Z","type":"message"}
{"nick":"piscisaureus","message":"erm","date":"2011-09-09T21:27:52.263Z","type":"message"}
{"nick":"piscisaureus","message":"tcp_writealot writes big chunks, is what i meant :-/","date":"2011-09-09T21:28:02.472Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: also, the req could be freed by the callback","date":"2011-09-09T21:28:37.944Z","type":"message"}
{"nick":"piscisaureus","message":"so you can't reference req->buf[sml] after making the callback","date":"2011-09-09T21:28:50.018Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so that patch is definitely wrong","date":"2011-09-09T21:28:55.706Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: try moving that free() part before the callback","date":"2011-09-09T21:29:59.787Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: good point, it shouldn't free at all for the completed queue","date":"2011-09-09T21:30:42.774Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: it should free","date":"2011-09-09T21:30:59.915Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: bufs may be malloced() inside libuv","date":"2011-09-09T21:31:11.212Z","type":"message"}
{"nick":"ryah","message":"okay nevermind","date":"2011-09-09T21:31:30.564Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: that free code looks right to me, but it's at the wrong place","date":"2011-09-09T21:31:31.178Z","type":"message"}
{"nick":"ryah","message":"a clean build also fixed it","date":"2011-09-09T21:31:35.819Z","type":"message"}
{"nick":"ryah","message":"reverting that patch","date":"2011-09-09T21:31:40.784Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: noooo","date":"2011-09-09T21:31:45.850Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: read up!","date":"2011-09-09T21:31:51.633Z","type":"message"}
{"nick":"ryah","message":"fine","date":"2011-09-09T21:32:17.139Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: btw, https://github.com/joyent/libuv/blob/master/src/unix/stream.c#L341","date":"2011-09-09T21:33:18.275Z","type":"message"}
{"nick":"ryah","message":"im rebuilding with the free moved up","date":"2011-09-09T21:33:49.343Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: that looks bug-free to me","date":"2011-09-09T21:34:02.006Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes, but that's why i shouldn't free for the write_completed_queue","date":"2011-09-09T21:34:42.715Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ok - you know uv-unix better than me. I just though this clear__queue was to clean out cancelled writes","date":"2011-09-09T21:35:19.725Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes, but it runs callbacks for both pending and completed writes","date":"2011-09-09T21:35:41.447Z","type":"message"}
{"nick":"piscisaureus","message":"my gut feeling there must be a leak in here :-)","date":"2011-09-09T21:36:09.047Z","type":"message"}
{"nick":"piscisaureus","message":"ok now I am the annoying guy - sorry","date":"2011-09-09T21:36:22.932Z","type":"message"}
{"nick":"ryah","message":"okay - so moving the free up also causes segfaul","date":"2011-09-09T21:36:37.940Z","type":"message"}
{"nick":"ryah","message":"SIGPIPE","date":"2011-09-09T21:36:54.254Z","type":"message"}
{"nick":"ryah","message":"revert that patch?","date":"2011-09-09T21:37:05.133Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: does your program actually die with sigpipe?","date":"2011-09-09T21:37:12.885Z","type":"message"}
{"nick":"ryah","message":"yes","date":"2011-09-09T21:37:18.186Z","type":"message"}
{"nick":"piscisaureus","message":"I mean the sigpipe can't be caused by that patch right?","date":"2011-09-09T21:37:22.367Z","type":"message"}
{"nick":"ryah","message":"i assume there is some memory corruption","date":"2011-09-09T21:37:37.804Z","type":"message"}
{"nick":"bnoordhuis","message":"uv_err_new (loop=0x1baddead0baddeaf, sys_error=16) <- gdb :)","date":"2011-09-09T21:37:39.932Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, let's back out the patch","date":"2011-09-09T21:37:53.363Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll do it","date":"2011-09-09T21:37:58.671Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-09T21:38:12.050Z","type":"message"}
{"nick":"piscisaureus","message":"so you guys are now swapping a crash for a leak","date":"2011-09-09T21:38:22.679Z","type":"message"}
{"nick":"piscisaureus","message":":-/","date":"2011-09-09T21:38:27.257Z","type":"message"}
{"nick":"piscisaureus","message":"way forward","date":"2011-09-09T21:38:35.389Z","type":"message"}
{"nick":"ryah","message":"whatever that's how it was","date":"2011-09-09T21:39:32.075Z","type":"message"}
{"nick":"ryah","message":"we'll fix it in the next release","date":"2011-09-09T21:39:37.304Z","type":"message"}
{"nick":"bnoordhuis","message":"no, but that commit needs work anyway","date":"2011-09-09T21:39:37.800Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u0002ca5346f\u000f \u000310\u000f/ (5 files in 2 dirs)\u0002:\u000f unix: revert 98b9f58 and 431195c for now, corrupts memory - http://git.io/M2JpkA","date":"2011-09-09T21:40:31.749Z","type":"message"}
{"nick":"ryah","message":"i assume we can get a test in libuv which shows this memory problem happening?","date":"2011-09-09T21:41:06.096Z","type":"message"}
{"nick":"ryah","message":"freeing a stream with a lot of pending writes","date":"2011-09-09T21:41:31.486Z","type":"message"}
{"nick":"ryah","message":"(we probably need a way to run the tests in valgrind)","date":"2011-09-09T21:41:41.058Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u000286b6bb3\u000f \u000310\u000f/ (4 files in 2 dirs)\u0002:\u000f uv: upgrade to ca5346f - http://git.io/dxDa1Q","date":"2011-09-09T21:42:02.760Z","type":"message"}
{"nick":"bnoordhuis","message":"we have one, fs-close","date":"2011-09-09T21:42:22.134Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: another RC please","date":"2011-09-09T21:42:26.398Z","type":"message"}
{"nick":"bnoordhuis","message":"didn't expose this problem though","date":"2011-09-09T21:42:27.179Z","type":"message"}
{"nick":"bnoordhuis","message":"*had one, i should say, just backed it out :)","date":"2011-09-09T21:42:42.673Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: yes working on it","date":"2011-09-09T21:42:49.140Z","type":"message"}
{"nick":"ryah","topic":"the release from hell","date":"2011-09-09T21:43:07.582Z","type":"topic"}
{"nick":"bnoordhuis","message":"haha","date":"2011-09-09T21:43:26.912Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002c4317f6\u000f \u000310\u000f/ uv.gyp \u0002:\u000f Update uv.gyp after 98b9f58 got reverted - http://git.io/oDDdqQ","date":"2011-09-09T21:44:17.022Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u000211ee7c1\u000f \u000310\u000f/ (deps/uv/uv.gyp deps/uv/test/test-tcp-close.c)\u0002:\u000f Upgrade libuv to c4317f639a - http://git.io/er0EdA","date":"2011-09-09T21:54:09.563Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00024e63a7e\u000f \u000310\u000f/ (deps/uv/uv.gyp deps/uv/test/test-tcp-close.c)\u0002:\u000f Upgrade libuv to c4317f639a - http://git.io/qIGhhA","date":"2011-09-09T21:55:02.833Z","type":"message"}
{"nick":"ryah","message":"erickt: hey - you had a question about getaddrinfo?","date":"2011-09-09T21:55:24.251Z","type":"message"}
{"nick":"ryah","message":"erickt: sorry somehow i missed that","date":"2011-09-09T21:55:32.311Z","type":"message"}
{"nick":"erickt","message":"s'ok :)","date":"2011-09-09T21:55:37.535Z","type":"message"}
{"nick":"erickt","message":"I noticed that the memset in src/unix/core.c's uv_getaddrinfo isn't really necessary","date":"2011-09-09T21:56:11.833Z","type":"message"}
{"nick":"bnoordhuis","message":"has anyone seen this?","date":"2011-09-09T21:56:23.674Z","type":"message"}
{"nick":"bnoordhuis","message":"# Fatal error in /home/bnoordhuis/src/nodejs/node/deps/v8/src/handles-inl.h, line 64","date":"2011-09-09T21:56:24.364Z","type":"message"}
{"nick":"bnoordhuis","message":"# CHECK(location_ != __null) failed","date":"2011-09-09T21:56:24.525Z","type":"message"}
{"nick":"bnoordhuis","message":"#","date":"2011-09-09T21:56:24.525Z","type":"message"}
{"nick":"bnoordhuis","message":"Command: out/Debug/node /home/bnoordhuis/src/nodejs/node/test/pummel/test-net-pause.js","date":"2011-09-09T21:56:24.525Z","type":"message"}
{"nick":"bnoordhuis","message":"only seems to happen infrequently :(","date":"2011-09-09T21:56:39.142Z","type":"message"}
{"nick":"erickt","message":"ryah: if we removed that, then it'd be possible for the user of uv_getaddrinfo to just set the ->data field on their uv_getaddrinfo_t structure directly","date":"2011-09-09T21:56:50.965Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: groan - this looks like a v8 bug","date":"2011-09-09T21:57:10.811Z","type":"message"}
{"nick":"erickt","message":"without needing to add a \"void* data\" to uv_getaddrinfo()","date":"2011-09-09T21:57:15.771Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: no, never","date":"2011-09-09T21:57:33.798Z","type":"message"}
{"nick":"ryah","message":"erickt: im worried the request will go to the thread pool before the user gets a chance to set it","date":"2011-09-09T21:57:45.428Z","type":"message"}
{"nick":"ryah","message":"erickt: although - nevermind that's not a worry - the void* data will only be used in the after_cb","date":"2011-09-09T21:58:12.028Z","type":"message"}
{"nick":"ryah","message":"erickt: which will be handled only after the system goes back to the event loop","date":"2011-09-09T21:58:24.390Z","type":"message"}
{"nick":"ryah","message":"erickt: so, yes, the void* argument is not necessary","date":"2011-09-09T21:58:37.983Z","type":"message"}
{"nick":"erickt","message":"ok great :) I'll submit a pull request in a moment :)","date":"2011-09-09T21:58:54.395Z","type":"message"}
{"nick":"ryah","message":"we're cutting the release despite this bug, bnoordhuis ","date":"2011-09-09T22:00:36.731Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: sure","date":"2011-09-09T22:00:49.096Z","type":"message"}
{"nick":"bnoordhuis","action":"locks uv_fs_req_cleanup: Assertion `req->ptr' failed.","date":"2011-09-09T22:05:57.484Z","type":"action"}
{"nick":"piscisaureus","message":"my dns server seems down","date":"2011-09-09T22:06:03.840Z","type":"message"}
{"nick":"ryah","message":"8.8.8.8","date":"2011-09-09T22:06:12.677Z","type":"message"}
{"nick":"piscisaureus","message":"uploaded rc3","date":"2011-09-09T22:09:07.329Z","type":"message"}
{"nick":"piscisaureus","action":"offline for network reset","date":"2011-09-09T22:09:27.779Z","type":"action"}
{"nick":"piscisaureus_","date":"2011-09-09T22:10:14.388Z","type":"join"}
{"nick":"piscisaureus","reason":"Read error: Connection reset by peer","date":"2011-09-09T22:10:14.544Z","type":"quit"}
{"nick":"piscisaureus_","new_nick":"piscisaureus","date":"2011-09-09T22:10:21.335Z","type":"nick"}
{"nick":"piscisaureus","action":"back","date":"2011-09-09T22:10:21.869Z","type":"action"}
{"nick":"piscisaureus","message":"\u000301http://nodejs.org/dist/v0.5.6/node-v0.5.6-rc3.tar.gz\u0003\u000301","date":"2011-09-09T22:11:09.231Z","type":"message"}
{"nick":"piscisaureus","action":"not quite in love with being release manager","date":"2011-09-09T22:12:07.027Z","type":"action"}
{"nick":"ryah","message":"you can see why i want to offload this :)","date":"2011-09-09T22:13:20.364Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I am not going to do this every other week","date":"2011-09-09T22:14:48.043Z","type":"message"}
{"nick":"erickt","message":"ryah: pull request requested: https://github.com/joyent/libuv/pull/182","date":"2011-09-09T22:14:53.310Z","type":"message"}
{"nick":"ryah","message":"erickt: ok","date":"2011-09-09T22:14:58.122Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: i am only parttime :-)","date":"2011-09-09T22:15:01.933Z","type":"message"}
{"nick":"erickt","message":":)","date":"2011-09-09T22:15:07.027Z","type":"message"}
{"nick":"piscisaureus","message":"otherwise I will have no time for actual work","date":"2011-09-09T22:15:09.412Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: it's not usually this bad","date":"2011-09-09T22:15:10.479Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u0002bd6066c\u000f \u000310\u000f/ src/unix/fs.c \u0002:\u000f unix: fix readdir cleanup assertion - http://git.io/iUWDvg","date":"2011-09-09T22:16:04.781Z","type":"message"}
{"nick":"bnoordhuis","message":"err... piscisaureus --^","date":"2011-09-09T22:16:10.374Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/libuv:\u0002 erickt: Subclass uv_getaddrinfo_t from uv_req_t. - https://github.com/joyent/libuv/issues/182","date":"2011-09-09T22:18:49.173Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: you can leave out bnoordhuis's assert fix if you want - it only happens on failed fs.readdir","date":"2011-09-09T22:22:10.442Z","type":"message"}
{"nick":"bnoordhuis","message":"and only the sync version at that","date":"2011-09-09T22:22:39.437Z","type":"message"}
{"nick":"ryah","message":"i think in the intreset of sanity we should move on - unless something more major is found","date":"2011-09-09T22:22:44.565Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002f9fa6ec\u000f \u000310\u000f/ (5 files in 2 dirs)\u0002:\u000f Upgrade libuv to bd6066cb - http://git.io/etMQlw","date":"2011-09-09T22:24:40.674Z","type":"message"}
{"nick":"ryah","message":"poor bert","date":"2011-09-09T22:25:08.797Z","type":"message"}
{"nick":"piscisaureus","message":"fuck - force push coming up","date":"2011-09-09T22:27:54.044Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00020a72ac3\u000f \u000310\u000f/ (7 files in 3 dirs)\u0002:\u000f Upgrade libuv to bd6066cb - http://git.io/GlOqpg","date":"2011-09-09T22:30:09.931Z","type":"message"}
{"nick":"DrPizza","message":"best kind of push","date":"2011-09-09T22:30:12.391Z","type":"message"}
{"nick":"bnoordhuis","message":"[12:56|% 100|+ 538|-  22] <- linux","date":"2011-09-09T22:31:37.134Z","type":"message"}
{"nick":"bnoordhuis","message":"test/pummel/test-timers.js <- always work with release, fails with an assertion error with debug","date":"2011-09-09T22:32:33.737Z","type":"message"}
{"nick":"bnoordhuis","message":"or rather: assert.AssertionError","date":"2011-09-09T22:32:45.488Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-09-09T22:35:44.685Z","type":"quit"}
{"nick":"piscisaureus","message":"\u000301http://nodejs.org/dist/v0.5.6/node-v0.5.6-rc4.tar.gz\u0003","date":"2011-09-09T22:36:00.574Z","type":"message"}
{"nick":"brson","date":"2011-09-09T22:36:05.078Z","type":"join"}
{"nick":"piscisaureus","message":"\u000301^ ryah bnoordhuis","date":"2011-09-09T22:36:24.472Z","type":"message"}
{"nick":"bnoordhuis","message":"bad test, timing sensitive >:(","date":"2011-09-09T22:36:51.573Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: yeah - it's a bit hard with timers","date":"2011-09-09T22:37:59.509Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-09T22:38:27.524Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-09T22:38:47.664Z","type":"join"}
{"nick":"bnoordhuis","message":"anyone testing xp?","date":"2011-09-09T22:40:40.355Z","type":"message"}
{"nick":"bnoordhuis","message":"xp + mingw, that is","date":"2011-09-09T22:40:48.165Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301bnoordhuis: yeah, I did that","date":"2011-09-09T22:42:20.608Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: you're doing the black color thing again","date":"2011-09-09T22:42:42.942Z","type":"message"}
{"nick":"piscisaureus","message":"\u000308Ok, switching to yellow","date":"2011-09-09T22:43:30.149Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: finally!","date":"2011-09-09T22:45:10.342Z","type":"message"}
{"nick":"ryah","message":"yellow","date":"2011-09-09T22:45:19.712Z","type":"message"}
{"nick":"ryah","message":"<3","date":"2011-09-09T22:45:22.323Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: green light on solaris and osx","date":"2011-09-09T22:46:39.210Z","type":"message"}
{"nick":"piscisaureus","message":"\u000308still waiting for windows","date":"2011-09-09T22:47:08.110Z","type":"message"}
{"nick":"piscisaureus","message":"\u000308I assume that is unchanged","date":"2011-09-09T22:47:15.033Z","type":"message"}
{"nick":"piscisaureus","message":"\u000308s/assume/expect/","date":"2011-09-09T22:47:24.181Z","type":"message"}
{"nick":"ryah","message":"yeah","date":"2011-09-09T22:47:31.020Z","type":"message"}
{"nick":"bnoordhuis","message":"ryah: you've compiled it on sunos already? how? so fast!","date":"2011-09-09T22:47:33.567Z","type":"message"}
{"nick":"ryah","message":"bnoordhuis: ccache","date":"2011-09-09T22:47:45.956Z","type":"message"}
{"nick":"bnoordhuis","message":"ah, that's cheating","date":"2011-09-09T22:47:53.221Z","type":"message"}
{"nick":"DrPizza","message":"is yellow good or bad","date":"2011-09-09T22:51:21.261Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: you can prepare the blog post","date":"2011-09-09T22:51:33.059Z","type":"message"}
{"nick":"piscisaureus","message":"\u000308[02:10|% 100|+ 241|-  39]: Done","date":"2011-09-09T22:51:57.812Z","type":"message"}
{"nick":"piscisaureus","message":"\u0003083 down :-(","date":"2011-09-09T22:52:03.991Z","type":"message"}
{"nick":"piscisaureus","message":"\u000308but I don't see tests failing that I think should pass","date":"2011-09-09T22:52:21.035Z","type":"message"}
{"nick":"piscisaureus","message":"\u000308so let's release","date":"2011-09-09T22:52:28.874Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: let's upload the .exe first","date":"2011-09-09T22:52:50.853Z","type":"message"}
{"nick":"piscisaureus","message":"someone should try to run it on 2003","date":"2011-09-09T22:52:59.889Z","type":"message"}
{"nick":"ryah","action":"boots 2k3","date":"2011-09-09T22:53:13.412Z","type":"action"}
{"nick":"ryah","message":"piscisaureus: upload the .exe and i'll try","date":"2011-09-09T22:55:04.969Z","type":"message"}
{"nick":"igorzi","message":"please upload node.pdb also","date":"2011-09-09T22:56:13.186Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301http://nodejs.org/dist/v0.5.6/node.exe\u0003","date":"2011-09-09T22:57:38.788Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301uploading the pdb","date":"2011-09-09T22:57:44.029Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301ryah: I don't know, but piscisaureus is my login name","date":"2011-09-09T22:59:01.273Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: i can only enable users by email","date":"2011-09-09T23:01:31.529Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301ryah: I am already in","date":"2011-09-09T23:01:38.313Z","type":"message"}
{"nick":"ryah","message":"ok","date":"2011-09-09T23:02:07.903Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: win2k3 green light","date":"2011-09-09T23:05:02.636Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301ok good","date":"2011-09-09T23:05:08.209Z","type":"message"}
{"nick":"ryah","message":"linux also green","date":"2011-09-09T23:05:20.272Z","type":"message"}
{"nick":"bnoordhuis","message":"[14:04|% 100|+ 532|-  28]: Done <- sunos, slightly better than last time","date":"2011-09-09T23:05:45.326Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301renaming s/-rc4//","date":"2011-09-09T23:05:53.877Z","type":"message"}
{"nick":"piscisaureus","message":"\u000301$ make docs","date":"2011-09-09T23:06:51.925Z","type":"message"}
{"nick":"piscisaureus","message":"make: *** No rule to make target `docs'.  Stop.","date":"2011-09-09T23:06:52.091Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: make doc","date":"2011-09-09T23:07:26.089Z","type":"message"}
{"nick":"ryah","message":"we've got a lot of work ahead of us.","date":"2011-09-09T23:10:53.427Z","type":"message"}
{"nick":"bnoordhuis","message":"the blog.nodejs.org color scheme is truly awful :/","date":"2011-09-09T23:12:39.117Z","type":"message"}
{"nick":"bnoordhuis","message":"and that from someone who spends his day in a terminal","date":"2011-09-09T23:13:07.575Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm, we never give libev the chance to clean up","date":"2011-09-09T23:16:23.146Z","type":"message"}
{"nick":"bnoordhuis","message":"valgrind complains about reachable but unfree'd memory","date":"2011-09-09T23:16:42.289Z","type":"message"}
{"nick":"piscisaureus","message":"libuv also doesn't really clean up","date":"2011-09-09T23:16:43.162Z","type":"message"}
{"nick":"piscisaureus","message":"on windows there's a lot of cruft left when a loop exists, esp. when you have unref()'d","date":"2011-09-09T23:17:05.951Z","type":"message"}
{"nick":"bnoordhuis","message":"is it worth fixing?","date":"2011-09-09T23:17:29.977Z","type":"message"}
{"nick":"bnoordhuis","message":"makes tracking down memory leaks harder obviously","date":"2011-09-09T23:17:39.211Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: sure, after the release","date":"2011-09-09T23:17:44.787Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: if we are serious about multiplicity we have to give people a chance to cleanly destroy a loop","date":"2011-09-09T23:18:12.059Z","type":"message"}
{"nick":"piscisaureus","message":"and not quit","date":"2011-09-09T23:18:15.039Z","type":"message"}
{"nick":"bnoordhuis","message":"my thoughts exactly","date":"2011-09-09T23:18:40.807Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: beautiful","date":"2011-09-09T23:31:29.437Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: tweet the release with a link to the blog","date":"2011-09-09T23:34:00.805Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002b49bec5\u000f \u000310\u000f/ (4 files in 3 dirs)\u0002:\u000f Bump version to 0.5.6 - http://git.io/LK52qw","date":"2011-09-09T23:34:20.938Z","type":"message"}
{"nick":"DrPizza","message":"nice work piscisaureus et al.","date":"2011-09-09T23:34:29.788Z","type":"message"}
{"nick":"felixge","date":"2011-09-09T23:35:46.353Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2011-09-09T23:35:46.511Z","type":"quit"}
{"nick":"felixge","date":"2011-09-09T23:35:46.511Z","type":"join"}
{"nick":"felixge","reason":"Client Quit","date":"2011-09-09T23:38:19.149Z","type":"quit"}
{"nick":"ryah","message":"great! im taking off","date":"2011-09-09T23:38:25.960Z","type":"message"}
{"nick":"ryah","message":"good job bert!","date":"2011-09-09T23:38:29.346Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00020be4812\u000f \u000310\u000f/ src/node_version.h \u0002:\u000f Now working on v0.5.7 - http://git.io/KCUOtA","date":"2011-09-09T23:39:13.961Z","type":"message"}
{"nick":"piscisaureus","message":"phew","date":"2011-09-09T23:40:55.505Z","type":"message"}
{"nick":"piscisaureus","message":"finally","date":"2011-09-09T23:40:57.053Z","type":"message"}
{"nick":"igorzi","message":"awesome work, piscisaureus","date":"2011-09-09T23:42:20.068Z","type":"message"}
{"nick":"felixge","date":"2011-09-09T23:42:20.478Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2011-09-09T23:42:20.640Z","type":"quit"}
{"nick":"felixge","date":"2011-09-09T23:42:20.640Z","type":"join"}
{"nick":"bnoordhuis","message":"congratulations, piscisaureus :)","date":"2011-09-09T23:42:27.727Z","type":"message"}
{"nick":"piscisaureus","message":"thnx yourself guys.","date":"2011-09-09T23:42:56.583Z","type":"message"}
{"nick":"piscisaureus","message":":-)","date":"2011-09-09T23:43:05.189Z","type":"message"}
{"nick":"felixge","reason":"Client Quit","date":"2011-09-09T23:43:21.000Z","type":"quit"}
{"nick":"DrPizza","message":"piscisaureus: as a reward for a job well done, you can do 0.5.7 too","date":"2011-09-09T23:45:21.355Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u000252eca75\u000f \u000310\u000f/ include/uv-private/uv-unix.h \u0002:\u000f unix: uv_pipe_t should not depend on UV_TCP_PRIVATE_FIELDS - http://git.io/Nfv2pA","date":"2011-09-09T23:45:23.140Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u0002eb987bc\u000f \u000310\u000f/ (4 files)\u0002:\u000f ","date":"2011-09-09T23:45:23.477Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f unix: deduplicate stream init logic","date":"2011-09-09T23:45:23.634Z","type":"message"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f Move shared init logic into uv__stream_init(). - http://git.io/edDlKg","date":"2011-09-09T23:45:23.634Z","type":"message"}
{"nick":"piscisaureus","message":"I'm gonna have a beer.","date":"2011-09-09T23:46:00.960Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: are you taking the rest of the night off or do you want to get started on stdio / multicast?","date":"2011-09-09T23:46:19.373Z","type":"message"}
{"nick":"bnoordhuis","message":"or phode!","date":"2011-09-09T23:46:21.651Z","type":"message"}
{"nick":"DrPizza","message":"lol phode","date":"2011-09-09T23:46:29.355Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: there are bugs to fix.","date":"2011-09-09T23:51:16.345Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: but phode :-)","date":"2011-09-09T23:51:25.061Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: although I am kinda blocked on the eventemitter. How is that working out?","date":"2011-09-09T23:51:44.481Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: oh, i can get HashTable working, it's just kinda cumbersome","date":"2011-09-09T23:52:08.087Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: just create an array","date":"2011-09-09T23:52:21.485Z","type":"message"}
{"nick":"bnoordhuis","message":"oh btw, it's my birthday now","date":"2011-09-09T23:52:28.510Z","type":"message"}
{"nick":"bnoordhuis","message":"29 :(","date":"2011-09-09T23:52:35.747Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: oh, congrats (pie?)","date":"2011-09-09T23:52:37.838Z","type":"message"}
{"nick":"piscisaureus","message":"w00t","date":"2011-09-09T23:52:40.113Z","type":"message"}
{"nick":"piscisaureus","message":"29!","date":"2011-09-09T23:52:44.913Z","type":"message"}
{"nick":"piscisaureus","message":"getting close to ryah","date":"2011-09-09T23:52:53.926Z","type":"message"}
{"nick":"bnoordhuis","message":"catching up!","date":"2011-09-09T23:52:59.350Z","type":"message"}
{"nick":"DrPizza","message":"making me feelold","date":"2011-09-09T23:53:04.022Z","type":"message"}
{"nick":"bnoordhuis","message":"how old are you, peter?","date":"2011-09-09T23:53:13.210Z","type":"message"}
{"nick":"DrPizza","message":"30 :(","date":"2011-09-09T23:53:16.976Z","type":"message"}
{"nick":"bnoordhuis","message":"haha","date":"2011-09-09T23:53:20.949Z","type":"message"}
{"nick":"DrPizza","message":"I am but an empty husk of a man","date":"2011-09-09T23:53:38.232Z","type":"message"}
{"nick":"DrPizza","message":"well quite a fat empty husk","date":"2011-09-09T23:53:42.926Z","type":"message"}
{"nick":"bnoordhuis","message":"men get more attractive the more they age","date":"2011-09-09T23:53:46.080Z","type":"message"}
{"nick":"DrPizza","message":"but empty all the same","date":"2011-09-09T23:53:48.979Z","type":"message"}
{"nick":"bnoordhuis","message":"i keep telling myself","date":"2011-09-09T23:53:49.671Z","type":"message"}
{"nick":"DrPizza","message":"I get more spherical the more I age","date":"2011-09-09T23:53:55.417Z","type":"message"}
{"nick":"DrPizza","message":"and more bald","date":"2011-09-09T23:54:00.025Z","type":"message"}
{"nick":"DrPizza","message":"these are both good looks!","date":"2011-09-09T23:54:02.645Z","type":"message"}
{"nick":"igorzi","message":"happy bday, bnoordhuis","date":"2011-09-09T23:55:55.125Z","type":"message"}
{"nick":"bnoordhuis","message":"thanks, igorzi :)","date":"2011-09-09T23:56:01.548Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i'm going to fix that uv__stream_close() bug first","date":"2011-09-09T23:56:12.683Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I think I will fix test-cli-eval first","date":"2011-09-09T23:56:33.705Z","type":"message"}
