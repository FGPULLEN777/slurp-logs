{"nick":"ircretary","reason":"Remote host closed the connection","date":"2012-12-12T00:00:00.617Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus_: sorry, the last two \"update libuv\" in node.","date":"2012-12-12T00:00:03.798Z","type":"message"}
{"nick":"ircretary","date":"2012-12-12T00:00:07.697Z","type":"join"}
{"nick":"piscisaureus_","message":"ah","date":"2012-12-12T00:00:14.819Z","type":"message"}
{"nick":"piscisaureus_","message":"could be related to the rm-ev stuff","date":"2012-12-12T00:00:27.097Z","type":"message"}
{"nick":"piscisaureus_","message":"you should talk to ben about that","date":"2012-12-12T00:00:31.371Z","type":"message"}
{"nick":"piscisaureus_","message":"a test case would help very much I think :-)","date":"2012-12-12T00:00:40.066Z","type":"message"}
{"nick":"isaacs","message":"* bbc3af4 isaacs Revert \"deps: upgrade libuv to fc5984f\" (31 hours ago)","date":"2012-12-12T00:00:41.194Z","type":"message"}
{"nick":"isaacs","message":"* a8a12ff isaacs Revert \"deps: upgrade libuv to 665a316\" (32 hours ago)","date":"2012-12-12T00:00:41.327Z","type":"message"}
{"nick":"isaacs","message":"* 8ba1bec Ben Noordhuis deps: upgrade libuv to fc5984f (3 weeks ago)","date":"2012-12-12T00:00:41.456Z","type":"message"}
{"nick":"isaacs","message":"* b6a3b0a Ben Noordhuis deps: upgrade libuv to 665a316 (4 weeks ago)","date":"2012-12-12T00:00:41.457Z","type":"message"}
{"nick":"isaacs","message":"* a7ac1a1 Ben Noordhuis deps: upgrade libuv to 0ddf9d6 (5 weeks ago)","date":"2012-12-12T00:00:41.684Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: yeah, i'm working on a more minimal test case.","date":"2012-12-12T00:00:56.664Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: right now, only simple/test-tls-pause fails as a result of it, because it's the only case where we do a huge write.","date":"2012-12-12T00:01:16.503Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but also the benchmark/net-pipe.js breaks","date":"2012-12-12T00:01:25.066Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: the rm-ev stuff is pretty invasive (but important) so bugs are not entirely unexpected in that area","date":"2012-12-12T00:01:37.158Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: so I think we should release 0.10 as soon as streams2 plus some openssl stuff stabilizes","date":"2012-12-12T00:02:31.921Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: yeah, i'm guessing that there's a bug in libuv that is being triggered by streams2 but not by master, so we should work that out","date":"2012-12-12T00:02:40.579Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: agreed.  0.10 will be streams2 plus whatever else we finish by then.","date":"2012-12-12T00:02:51.285Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but we need to either sort out the libev removal breakage, or roll it back.","date":"2012-12-12T00:03:12.307Z","type":"message"}
{"nick":"isaacs","message":"i'd much MUCH prefer to actually remove it, and just fix the bug","date":"2012-12-12T00:03:19.985Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: not roll back. Just fix","date":"2012-12-12T00:03:26.527Z","type":"message"}
{"nick":"piscisaureus_","message":"it's very close to being good","date":"2012-12-12T00:03:31.211Z","type":"message"}
{"nick":"isaacs","message":"(ie, actually remove libev, not remove the removal)","date":"2012-12-12T00:03:34.104Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-12-12T00:03:41.134Z","type":"message"}
{"nick":"isaacs","message":"i feel that we are of a similar mind on this","date":"2012-12-12T00:03:46.806Z","type":"message"}
{"nick":"piscisaureus_","message":"in libuv not much needs to change otherwise except improve the new thread pool","date":"2012-12-12T00:03:48.314Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-12-12T00:03:55.083Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I discussed this with ben today, it's pretty clear on a detailed level what needs to be done","date":"2012-12-12T00:04:08.916Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: for the treadpool, or for libev removal?","date":"2012-12-12T00:06:07.524Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: threadpool","date":"2012-12-12T00:06:18.243Z","type":"message"}
{"nick":"piscisaureus_","message":"that's the \"other\" thing","date":"2012-12-12T00:06:21.642Z","type":"message"}
{"nick":"isaacs","message":"ah, right.","date":"2012-12-12T00:06:39.606Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2012-12-12T00:06:40.142Z","type":"message"}
{"nick":"isaacs","message":"that sounds great :)","date":"2012-12-12T00:06:42.904Z","type":"message"}
{"nick":"ArmyOfBruce","reason":"Excess Flood","date":"2012-12-12T00:20:13.686Z","type":"quit"}
{"nick":"ArmyOfBruce","date":"2012-12-12T00:20:41.628Z","type":"join"}
{"nick":"brson","reason":"Remote host closed the connection","date":"2012-12-12T00:20:44.860Z","type":"quit"}
{"nick":"brson","date":"2012-12-12T00:23:13.849Z","type":"join"}
{"nick":"isaacs","message":"piscisaureus_: so... i took this tcp-raw.js thing, and i changed it so that it's using a net.js client","date":"2012-12-12T00:58:48.533Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: and, what's really weird, the client ends up in the activeHandles, and the program hangs open","date":"2012-12-12T00:59:33.238Z","type":"message"}
{"nick":"isaacs","message":"even calling client.unref() doesn't make it stop..","date":"2012-12-12T01:00:03.933Z","type":"message"}
{"nick":"warz","date":"2012-12-12T01:00:29.510Z","type":"join"}
{"nick":"warz","reason":"Changing host","date":"2012-12-12T01:00:29.913Z","type":"quit"}
{"nick":"warz","date":"2012-12-12T01:00:30.048Z","type":"join"}
{"nick":"piscisaureus_","message":"isaacs: weird that unref() doesn't work.","date":"2012-12-12T01:09:47.522Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: yeah","date":"2012-12-12T01:10:04.804Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: what does process._getActiveHandles() and process._getActiveRequests show?","date":"2012-12-12T01:10:05.637Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: also, if you call client.close() does it stop","date":"2012-12-12T01:11:05.754Z","type":"message"}
{"nick":"piscisaureus_","message":"?","date":"2012-12-12T01:11:06.556Z","type":"message"}
{"nick":"isaacs","message":"i'm calling client.close()","date":"2012-12-12T01:11:28.207Z","type":"message"}
{"nick":"isaacs","message":"oh, wait, no, i'm not","date":"2012-12-12T01:11:45.054Z","type":"message"}
{"nick":"isaacs","message":"and yes, it does","date":"2012-12-12T01:11:46.506Z","type":"message"}
{"nick":"isaacs","message":"{ oncomplete: [Function: afterShutdown] }","date":"2012-12-12T01:11:48.155Z","type":"message"}
{"nick":"isaacs","message":"that's the diff, it looks like ^","date":"2012-12-12T01:11:54.684Z","type":"message"}
{"nick":"isaacs","message":"  this._handle.close();","date":"2012-12-12T01:12:18.223Z","type":"message"}
{"nick":"isaacs","message":"that closes it","date":"2012-12-12T01:12:21.463Z","type":"message"}
{"nick":"piscisaureus_","message":"so it should also exit if you unref it","date":"2012-12-12T01:12:40.389Z","type":"message"}
{"nick":"piscisaureus_","message":"there may be a bug in that code path somehow","date":"2012-12-12T01:12:55.732Z","type":"message"}
{"nick":"piscisaureus_","message":"in node 0.8, process.stdin._handle.close() makes node exit","date":"2012-12-12T01:13:30.807Z","type":"message"}
{"nick":"piscisaureus_","message":"as does process.stdin._handle.unref()","date":"2012-12-12T01:13:54.096Z","type":"message"}
{"nick":"piscisaureus_","message":"so at least it works sometimes ;-)","date":"2012-12-12T01:14:00.015Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-12-12T01:14:40.442Z","type":"message"}
{"nick":"isaacs","message":"this is just a plain old tcp client","date":"2012-12-12T01:14:49.522Z","type":"message"}
{"nick":"isaacs","message":"not stdin","date":"2012-12-12T01:14:50.982Z","type":"message"}
{"nick":"isaacs","message":"but yeah, it looks like client._handle.close() is being called by master, but not by streams2-net","date":"2012-12-12T01:15:06.129Z","type":"message"}
{"nick":"piscisaureus_","message":"well, that's a problem :-)","date":"2012-12-12T01:15:17.935Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: if you would readStop() then it would also exit I think","date":"2012-12-12T01:15:31.787Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: but as long as there is a tcp handle that is reading or writing, it wont exit","date":"2012-12-12T01:15:52.146Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-12-12T01:19:07.469Z","type":"message"}
{"nick":"isaacs","message":"yeah, it's weird.  so, i'm calling handle.close(), but then later, it seems to want that to be called again","date":"2012-12-12T01:19:22.340Z","type":"message"}
{"nick":"piscisaureus_","message":"that's wonly","date":"2012-12-12T01:19:34.313Z","type":"message"}
{"nick":"piscisaureus_","message":"*wonky","date":"2012-12-12T01:19:40.430Z","type":"message"}
{"nick":"piscisaureus_","message":"calling close() twice would most likely crash node, not make it work :-)","date":"2012-12-12T01:20:00.432Z","type":"message"}
{"nick":"piscisaureus_","message":"it'd be really nice if there was a reduced test case that we can use to debug libuv","date":"2012-12-12T01:20:18.891Z","type":"message"}
{"nick":"deoxxa","message":"isaacs: is that your kitty in your avatar on github? :3","date":"2012-12-12T01:20:31.171Z","type":"message"}
{"nick":"isaacs","message":"deoxxa: yessir","date":"2012-12-12T01:21:15.092Z","type":"message"}
{"nick":"deoxxa","message":"meow :3","date":"2012-12-12T01:21:19.065Z","type":"message"}
{"nick":"deoxxa","message":"i miss my cats now","date":"2012-12-12T01:21:33.520Z","type":"message"}
{"nick":"lohkey","date":"2012-12-12T01:29:21.573Z","type":"part"}
{"nick":"isaacs","message":"piscisaureus_: interesting.  i'm calling shutdown() twice.","date":"2012-12-12T01:31:18.011Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: that's the problem.","date":"2012-12-12T01:31:20.921Z","type":"message"}
{"nick":"piscisaureus_","message":"'ah","date":"2012-12-12T01:31:30.516Z","type":"message"}
{"nick":"piscisaureus_","message":"sounds like a libuv bug","date":"2012-12-12T01:31:35.991Z","type":"message"}
{"nick":"piscisaureus_","message":"or a bug in the binding layer","date":"2012-12-12T01:31:40.826Z","type":"message"}
{"nick":"piscisaureus_","message":"most likely libuv (by itself) would trigger an assertion fail if you did that","date":"2012-12-12T01:32:03.990Z","type":"message"}
{"nick":"isaacs","message":"yep, that's the thing","date":"2012-12-12T01:32:25.398Z","type":"message"}
{"nick":"piscisaureus_","message":"the second shutdown() probably would never actually happen, but as it is a req it keeps the lop alive","date":"2012-12-12T01:32:27.669Z","type":"message"}
{"nick":"isaacs","message":"yes.","date":"2012-12-12T01:32:34.924Z","type":"message"}
{"nick":"isaacs","message":"ok, well, this is a bug.  tracked it down.  all in a day's work :)","date":"2012-12-12T01:32:53.675Z","type":"message"}
{"nick":"isaacs","message":"now how to write a test for it...","date":"2012-12-12T01:32:57.703Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: the binding layer is pretty fragile atm, e.g. if you use it incorrectly weird stuff happens","date":"2012-12-12T01:33:00.357Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2012-12-12T01:33:04.478Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: that's why people should not :-)","date":"2012-12-12T01:33:08.564Z","type":"message"}
{"nick":"isaacs","message":"oh, for sure","date":"2012-12-12T01:33:14.193Z","type":"message"}
{"nick":"isaacs","message":"it's undocumented and awful.","date":"2012-12-12T01:33:17.925Z","type":"message"}
{"nick":"piscisaureus_","message":"(and possibly a good reason to harden the binding layer)","date":"2012-12-12T01:33:20.929Z","type":"message"}
{"nick":"isaacs","message":"and insanely verbose","date":"2012-12-12T01:33:23.645Z","type":"message"}
{"nick":"isaacs","message":"we can make it nice later.","date":"2012-12-12T01:33:28.704Z","type":"message"}
{"nick":"erickt","date":"2012-12-12T01:33:31.470Z","type":"join"}
{"nick":"isaacs","message":"it'd be nice if it was prettier","date":"2012-12-12T01:33:33.052Z","type":"message"}
{"nick":"isaacs","message":"if only to make the node internals easier to read","date":"2012-12-12T01:33:39.151Z","type":"message"}
{"nick":"piscisaureus_","message":"what is so verbose about that?","date":"2012-12-12T01:33:41.463Z","type":"message"}
{"nick":"piscisaureus_","message":"s/that/it/?","date":"2012-12-12T01:33:47.432Z","type":"message"}
{"nick":"pquerna","reason":"Read error: Operation timed out","date":"2012-12-12T01:34:22.004Z","type":"quit"}
{"nick":"isaacs","message":"compared with using require('net')?","date":"2012-12-12T01:35:09.390Z","type":"message"}
{"nick":"isaacs","message":"you're... joking, right?","date":"2012-12-12T01:35:12.748Z","type":"message"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2012-12-12T01:35:26.017Z","type":"quit"}
{"nick":"isaacs","message":"it's beer time.  thanks for your help, piscisaureus_.","date":"2012-12-12T01:38:28.397Z","type":"message"}
{"nick":"pquerna","date":"2012-12-12T01:39:58.732Z","type":"join"}
{"nick":"pquerna","reason":"Changing host","date":"2012-12-12T01:39:59.170Z","type":"quit"}
{"nick":"pquerna","date":"2012-12-12T01:39:59.305Z","type":"join"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-12-12T01:44:23.875Z","type":"quit"}
{"nick":"piscisaureus_","message":"isaacs: ah, yeah compare to net it's verbose :-)","date":"2012-12-12T01:46:47.785Z","type":"message"}
{"nick":"piscisaureus_","message":"but it's nice compared to what happens under the hood","date":"2012-12-12T01:47:02.316Z","type":"message"}
{"nick":"abraxas","date":"2012-12-12T01:47:08.291Z","type":"join"}
{"nick":"piscisaureus_","message":"that's why I do a talk about require('net').connect(80, 'nyan.cat').pipe(process.stdout), and just superficially discuss the public libuv interface","date":"2012-12-12T01:48:02.741Z","type":"message"}
{"nick":"piscisaureus_","message":"and, what libuv has to do is still nice compared to what the kernel actually does","date":"2012-12-12T01:48:21.385Z","type":"message"}
{"nick":"piscisaureus_","message":"welcome to vertical economies :-)","date":"2012-12-12T01:48:39.305Z","type":"message"}
{"nick":"jmar777","date":"2012-12-12T01:50:09.800Z","type":"join"}
{"nick":"lohkey_","date":"2012-12-12T01:52:10.649Z","type":"join"}
{"nick":"lohkey_","reason":"Client Quit","date":"2012-12-12T01:52:10.649Z","type":"quit"}
{"nick":"indexzero","date":"2012-12-12T01:53:04.189Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 250 seconds","date":"2012-12-12T02:04:46.621Z","type":"quit"}
{"nick":"mjr_","date":"2012-12-12T02:10:01.459Z","type":"join"}
{"nick":"joshthecoder","reason":"Quit: Leaving...","date":"2012-12-12T02:16:23.676Z","type":"quit"}
{"nick":"rje`mac","reason":"Ping timeout: 240 seconds","date":"2012-12-12T02:18:14.641Z","type":"quit"}
{"nick":"mjr_","reason":"Ping timeout: 255 seconds","date":"2012-12-12T02:18:29.485Z","type":"quit"}
{"nick":"rje","reason":"Ping timeout: 240 seconds","date":"2012-12-12T02:20:14.643Z","type":"quit"}
{"nick":"rje`mac","date":"2012-12-12T02:30:58.013Z","type":"join"}
{"nick":"rje","date":"2012-12-12T02:31:27.302Z","type":"join"}
{"nick":"ArmyOfBruce","new_nick":"brucem","date":"2012-12-12T02:35:18.117Z","type":"nick"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-12-12T02:38:14.139Z","type":"quit"}
{"nick":"erickt","date":"2012-12-12T02:39:37.848Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-12-12T02:44:16.660Z","type":"quit"}
{"nick":"abraxas","date":"2012-12-12T02:56:57.287Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 265 seconds","date":"2012-12-12T03:05:38.810Z","type":"quit"}
{"nick":"sblom","date":"2012-12-12T03:07:20.411Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2012-12-12T03:16:26.168Z","type":"quit"}
{"nick":"dap","date":"2012-12-12T03:23:57.418Z","type":"join"}
{"nick":"warz","date":"2012-12-12T03:39:50.386Z","type":"quit"}
{"nick":"kazupon","date":"2012-12-12T03:49:38.153Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-12T04:12:34.765Z","type":"quit"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-12-12T04:14:33.958Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-12T04:16:51.797Z","type":"join"}
{"nick":"lohkey","date":"2012-12-12T04:24:34.587Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-12T04:24:57.007Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2012-12-12T04:34:53.642Z","type":"quit"}
{"nick":"mmalecki","new_nick":"mmalecki[away]","date":"2012-12-12T04:37:11.014Z","type":"nick"}
{"nick":"loladiro","date":"2012-12-12T04:40:10.380Z","type":"join"}
{"nick":"ryah","date":"2012-12-12T04:51:16.725Z","type":"join"}
{"nick":"Benvie","date":"2012-12-12T05:27:18.458Z","type":"quit"}
{"nick":"joshthecoder","date":"2012-12-12T05:27:23.164Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-12-12T05:54:15.097Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-12-12T05:58:01.339Z","type":"quit"}
{"nick":"abraxas","reason":"Read error: Connection reset by peer","date":"2012-12-12T06:00:03.413Z","type":"quit"}
{"nick":"abraxas","date":"2012-12-12T06:00:28.592Z","type":"join"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2012-12-12T06:08:45.817Z","type":"quit"}
{"nick":"`3rdEden","date":"2012-12-12T07:44:52.775Z","type":"join"}
{"nick":"stagas","date":"2012-12-12T07:52:21.612Z","type":"join"}
{"nick":"bnoordhuis","date":"2012-12-12T07:54:25.288Z","type":"join"}
{"nick":"joshthecoder","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-12-12T07:55:15.052Z","type":"quit"}
{"nick":"rendar","date":"2012-12-12T07:58:25.129Z","type":"join"}
{"nick":"bnoordhuis","message":"morning all","date":"2012-12-12T08:12:05.168Z","type":"message"}
{"nick":"ryah","reason":"Quit: Lost terminal","date":"2012-12-12T08:29:25.685Z","type":"quit"}
{"nick":"Benvie","date":"2012-12-12T08:36:33.876Z","type":"join"}
{"nick":"Benvie","date":"2012-12-12T08:41:32.141Z","type":"quit"}
{"nick":"bnoordhuis","message":"isaacs: still around?","date":"2012-12-12T08:41:51.440Z","type":"message"}
{"nick":"Benvie","date":"2012-12-12T08:42:47.539Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: just barely","date":"2012-12-12T08:53:36.650Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: hey. so about streams2","date":"2012-12-12T08:53:47.063Z","type":"message"}
{"nick":"bnoordhuis","message":"did you manage to get some kind of reduced test case going?","date":"2012-12-12T08:54:11.660Z","type":"message"}
{"nick":"isaacs","message":"i got close to one","date":"2012-12-12T08:54:17.943Z","type":"message"}
{"nick":"isaacs","message":"in the process i figured out that i'm calling shutdown() two times in the client, which is wrong","date":"2012-12-12T08:54:29.074Z","type":"message"}
{"nick":"isaacs","message":"but i don't think that's the core issue","date":"2012-12-12T08:54:34.542Z","type":"message"}
{"nick":"bnoordhuis","message":"did you see that test case i posted?","date":"2012-12-12T08:54:47.271Z","type":"message"}
{"nick":"isaacs","message":"https://gist.github.com/4263245","date":"2012-12-12T08:54:47.493Z","type":"message"}
{"nick":"isaacs","message":"no, where is it?","date":"2012-12-12T08:54:57.166Z","type":"message"}
{"nick":"bnoordhuis","message":"one sec, i'll dig it up","date":"2012-12-12T08:55:24.159Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: https://gist.github.com/c9c968b1d8c7579bdff6","date":"2012-12-12T08:55:36.310Z","type":"message"}
{"nick":"isaacs","message":"so, i'm testing just the raw tcp_wrap interface client and server, and then the tcp_wrap server with net client, adn next i'm going to test the raw client vs net server.","date":"2012-12-12T08:55:42.434Z","type":"message"}
{"nick":"isaacs","message":"awesome.","date":"2012-12-12T08:56:16.903Z","type":"message"}
{"nick":"isaacs","message":"that's effectively what i'm doing with the raw business","date":"2012-12-12T08:56:26.466Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, neat","date":"2012-12-12T08:56:31.174Z","type":"message"}
{"nick":"bnoordhuis","message":"so it works fine with master but it hangs at n=0 with streams2","date":"2012-12-12T08:56:41.095Z","type":"message"}
{"nick":"bnoordhuis","message":"for reasons i don't quite comprehend - but hopefully you do","date":"2012-12-12T08:56:54.846Z","type":"message"}
{"nick":"isaacs","message":"yes.","date":"2012-12-12T08:57:06.432Z","type":"message"}
{"nick":"isaacs","message":"i don't comprehend them either :)","date":"2012-12-12T08:57:11.159Z","type":"message"}
{"nick":"isaacs","message":"but hopefully i'll have something reduced more by tomorrow","date":"2012-12-12T08:57:19.261Z","type":"message"}
{"nick":"isaacs","message":"0.8.16 tomorrow, 0.9.4 thursday","date":"2012-12-12T08:57:36.885Z","type":"message"}
{"nick":"bnoordhuis","message":"sweet","date":"2012-12-12T08:57:43.528Z","type":"message"}
{"nick":"bnoordhuis","message":"if i have some time today, i'll look some more at streams2","date":"2012-12-12T08:57:51.575Z","type":"message"}
{"nick":"isaacs","message":"probably sans-streams2-net, unless we figure it out and it's easy","date":"2012-12-12T08:57:52.300Z","type":"message"}
{"nick":"isaacs","message":"kk","date":"2012-12-12T08:57:55.251Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037v0.8\u000f * \u0002d65832c\u0002 : fs: fix WriteStream fd leak  Close the file descriptor when a write opera (+2 more commits) - http://git.io/n_MfXw","date":"2012-12-12T08:58:22.943Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037streams2-stdin-wip\u000f * \u00026a2ea26\u0002 : streams2: Call read(0) on resume()  Otherwise (especially with stdin) you (+2 more commits) - http://git.io/UkwdkA","date":"2012-12-12T08:59:02.989Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: that branch has the current state of things. commit history is a godawful mess ^","date":"2012-12-12T08:59:10.700Z","type":"message"}
{"nick":"bnoordhuis","message":"hah","date":"2012-12-12T08:59:15.660Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037streams2-stdin-wip\u000f * \u0002249af3b\u0002 : net: Don't call shutdown more than once - http://git.io/Dy05lg","date":"2012-12-12T09:00:10.036Z","type":"message"}
{"nick":"sergim","date":"2012-12-12T09:01:30.710Z","type":"join"}
{"nick":"isaacs","message":"oh, i guess that has the reverts of the libuv changes.","date":"2012-12-12T09:02:48.882Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: ohhh....","date":"2012-12-12T09:03:30.442Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: in your test, you need to do conn.resume()","date":"2012-12-12T09:03:36.281Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: the server is backed up because it's trying to write, and the client isn't reading it","date":"2012-12-12T09:03:50.221Z","type":"message"}
{"nick":"bnoordhuis","message":"isn't that a change from the old net api?","date":"2012-12-12T09:03:55.502Z","type":"message"}
{"nick":"isaacs","message":"yes, it is a change.","date":"2012-12-12T09:04:01.841Z","type":"message"}
{"nick":"bnoordhuis","message":"i thought the idea was to be backwards compatible","date":"2012-12-12T09:04:03.160Z","type":"message"}
{"nick":"isaacs","message":"yes, that is the idea.","date":"2012-12-12T09:04:08.931Z","type":"message"}
{"nick":"isaacs","message":"but i'm not sure how that's possible in this case.","date":"2012-12-12T09:04:15.376Z","type":"message"}
{"nick":"isaacs","message":"we can't solve the \"data events come right away ready or not\" problem without introducing the \"you have to do something to get the flow to happen\" problem","date":"2012-12-12T09:04:43.803Z","type":"message"}
{"nick":"bnoordhuis","message":"ah... that sounds like a pretty big change","date":"2012-12-12T09:05:10.332Z","type":"message"}
{"nick":"bnoordhuis","message":"the subject of many future angry blog posts","date":"2012-12-12T09:05:34.128Z","type":"message"}
{"nick":"isaacs","message":"perhaps","date":"2012-12-12T09:05:44.112Z","type":"message"}
{"nick":"isaacs","message":"all the more reason to get a 0.9 out asap with the change","date":"2012-12-12T09:05:52.212Z","type":"message"}
{"nick":"isaacs","message":"while we can still cheaply change it","date":"2012-12-12T09:06:03.789Z","type":"message"}
{"nick":"isaacs","message":"i *suspect* that it's rare that you make a request somewhere, and then don't care about the results.","date":"2012-12-12T09:07:06.779Z","type":"message"}
{"nick":"bnoordhuis","message":"what if i add a 'data' event listener?","date":"2012-12-12T09:07:29.820Z","type":"message"}
{"nick":"bnoordhuis","message":"should that auto-trigger resume()?","date":"2012-12-12T09:07:44.555Z","type":"message"}
{"nick":"isaacs","message":"that'd do it","date":"2012-12-12T09:07:46.101Z","type":"message"}
{"nick":"isaacs","message":"yes","date":"2012-12-12T09:07:47.398Z","type":"message"}
{"nick":"isaacs","message":".pipe() will also make it read() repeatedly until the end","date":"2012-12-12T09:07:55.332Z","type":"message"}
{"nick":"isaacs","message":"  net.createConnection(1234, function() { write(this) ; this.resume() });","date":"2012-12-12T09:08:08.833Z","type":"message"}
{"nick":"bnoordhuis","message":"right","date":"2012-12-12T09:08:20.458Z","type":"message"}
{"nick":"isaacs","message":"with that, i get up to 99, and then EPIPE","date":"2012-12-12T09:08:29.666Z","type":"message"}
{"nick":"isaacs","message":"the EPIPE seems wrong","date":"2012-12-12T09:08:39.875Z","type":"message"}
{"nick":"bnoordhuis","message":"so i don't know how common that usage pattern is but i've used it in the past for fire-and-forget things","date":"2012-12-12T09:08:47.573Z","type":"message"}
{"nick":"isaacs","message":"oh, master epipe's a bit, too","date":"2012-12-12T09:08:49.569Z","type":"message"}
{"nick":"bnoordhuis","message":"the EPIPE is in the server, because the client's closed the connection","date":"2012-12-12T09:09:05.508Z","type":"message"}
{"nick":"bnoordhuis","message":"so that's okay","date":"2012-12-12T09:09:16.221Z","type":"message"}
{"nick":"isaacs","message":"also, we have a special case for http.request().  if you don't add a 'response' handler, then it'll resume() it for you, since there's no way you could ever reead it","date":"2012-12-12T09:09:21.478Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2012-12-12T09:09:29.760Z","type":"message"}
{"nick":"isaacs","message":"awesome.  with the libuv changes, it hangs forever.","date":"2012-12-12T09:10:24.387Z","type":"message"}
{"nick":"isaacs","message":"(and with the conn.resume())","date":"2012-12-12T09:10:40.196Z","type":"message"}
{"nick":"isaacs","message":"so this is a good test.","date":"2012-12-12T09:11:25.356Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, i'll look into it","date":"2012-12-12T09:11:41.778Z","type":"message"}
{"nick":"isaacs","message":"here's the tcp-raw.js file using the net.js client: https://gist.github.com/4266289","date":"2012-12-12T09:11:49.027Z","type":"message"}
{"nick":"isaacs","message":"with a bunch of debuggery as well","date":"2012-12-12T09:12:30.175Z","type":"message"}
{"nick":"isaacs","message":"both this and tcp-raw.js work fine in streams2.","date":"2012-12-12T09:13:58.294Z","type":"message"}
{"nick":"isaacs","message":"oh, actually, nvm","date":"2012-12-12T09:14:19.614Z","type":"message"}
{"nick":"isaacs","message":"this fails with the libuv changes","date":"2012-12-12T09:14:26.363Z","type":"message"}
{"nick":"isaacs","message":"nvm.","date":"2012-12-12T09:14:39.064Z","type":"message"}
{"nick":"isaacs","action":"is up past his bedtime","date":"2012-12-12T09:14:45.791Z","type":"action"}
{"nick":"isaacs","message":"it works, just hanging because of the extra shutdown req","date":"2012-12-12T09:14:52.731Z","type":"message"}
{"nick":"isaacs","message":"so, i think the problem is on the server side, not the client","date":"2012-12-12T09:15:19.371Z","type":"message"}
{"nick":"isaacs","action":"zzzzZZzzz","date":"2012-12-12T09:16:07.270Z","type":"action"}
{"nick":"mmalecki[away]","new_nick":"mmalecki","date":"2012-12-12T09:17:53.811Z","type":"nick"}
{"nick":"indutny","message":"bnoordhuis: hi","date":"2012-12-12T09:19:54.293Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: have you seen latest graceful shutdown pull request https://github.com/joyent/node/pull/4347/files ?","date":"2012-12-12T09:20:25.890Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 244 seconds","date":"2012-12-12T09:49:39.055Z","type":"quit"}
{"nick":"kazupon","date":"2012-12-12T09:54:41.316Z","type":"join"}
{"nick":"sergim","reason":"Quit: Textual IRC Client: http://www.textualapp.com/","date":"2012-12-12T09:55:55.738Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2012-12-12T09:58:40.358Z","type":"quit"}
{"nick":"kazupon","date":"2012-12-12T11:05:22.633Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-12T11:05:33.225Z","type":"quit"}
{"nick":"hz","date":"2012-12-12T11:08:55.419Z","type":"join"}
{"nick":"roxlu","reason":"Ping timeout: 264 seconds","date":"2012-12-12T11:10:18.177Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: haven't seen it yet","date":"2012-12-12T11:30:22.281Z","type":"message"}
{"nick":"indutny","message":"ok, np","date":"2012-12-12T11:33:02.702Z","type":"message"}
{"nick":"indutny","message":"it should be on my desk by the end of day","date":"2012-12-12T11:35:03.329Z","type":"message"}
{"nick":"indutny","message":"bad joking","date":"2012-12-12T11:44:52.582Z","type":"message"}
{"nick":"bnoordhuis","message":"it's a pretty good joke though","date":"2012-12-12T11:57:43.418Z","type":"message"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-12-12T12:23:42.501Z","type":"quit"}
{"nick":"bradleymeck","date":"2012-12-12T12:29:45.666Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: what are you working on?","date":"2012-12-12T12:30:08.149Z","type":"message"}
{"nick":"sgallagh","date":"2012-12-12T12:30:58.625Z","type":"join"}
{"nick":"indutny","message":"tlsnappy","date":"2012-12-12T12:31:14.923Z","type":"message"}
{"nick":"indutny","message":"getting it back in action","date":"2012-12-12T12:31:18.640Z","type":"message"}
{"nick":"indutny","message":"right now it's a little bit fucked","date":"2012-12-12T12:31:25.037Z","type":"message"}
{"nick":"indutny","message":"but...","date":"2012-12-12T12:31:28.029Z","type":"message"}
{"nick":"bnoordhuis","message":"watch your language, young man","date":"2012-12-12T12:31:35.521Z","type":"message"}
{"nick":"indutny","message":"if you want to point me on something else - I'll be ok","date":"2012-12-12T12:31:37.281Z","type":"message"}
{"nick":"bnoordhuis","message":"no, i was just curious","date":"2012-12-12T12:31:45.785Z","type":"message"}
{"nick":"indutny","message":"ah, ok","date":"2012-12-12T12:31:49.407Z","type":"message"}
{"nick":"indutny","message":"so you're on HN again?","date":"2012-12-12T12:31:53.773Z","type":"message"}
{"nick":"bnoordhuis","message":"what's tlsnappy's issue?","date":"2012-12-12T12:31:56.889Z","type":"message"}
{"nick":"bnoordhuis","message":"hah no, reworking uv_cancel","date":"2012-12-12T12:32:06.648Z","type":"message"}
{"nick":"indutny","message":"I think race + incorrect SSL_shutdown","date":"2012-12-12T12:32:18.796Z","type":"message"}
{"nick":"indutny","message":"or, I've implemented BIO incorrectly","date":"2012-12-12T12:32:26.319Z","type":"message"}
{"nick":"indutny","message":"it's hard to guess","date":"2012-12-12T12:32:33.022Z","type":"message"}
{"nick":"indutny","message":"sometimes SSL_read success reading the same sequence","date":"2012-12-12T12:32:44.881Z","type":"message"}
{"nick":"indutny","message":"multiple times","date":"2012-12-12T12:32:45.780Z","type":"message"}
{"nick":"indutny","message":"from one BIO","date":"2012-12-12T12:32:52.550Z","type":"message"}
{"nick":"bnoordhuis","message":"right","date":"2012-12-12T12:33:27.733Z","type":"message"}
{"nick":"indutny","message":"seems to be a race","date":"2012-12-12T12:33:48.685Z","type":"message"}
{"nick":"indutny","message":"though, it's pretty hard to debug","date":"2012-12-12T12:33:50.725Z","type":"message"}
{"nick":"indutny","message":"especially, considering that drd doesn't work on lion","date":"2012-12-12T12:34:11.352Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2012-12-12T12:34:50.157Z","type":"quit"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2012-12-12T12:35:11.684Z","type":"quit"}
{"nick":"bnoordhuis","message":"time to switch to a real OS, fedor","date":"2012-12-12T12:35:12.886Z","type":"message"}
{"nick":"sgallagh","date":"2012-12-12T12:35:33.523Z","type":"join"}
{"nick":"bnoordhuis","message":"i hear good things about windows","date":"2012-12-12T12:35:41.200Z","type":"message"}
{"nick":"indutny","message":"hahahaha","date":"2012-12-12T12:45:32.393Z","type":"message"}
{"nick":"kazupon","date":"2012-12-12T13:11:13.534Z","type":"join"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2012-12-12T13:28:32.200Z","type":"quit"}
{"nick":"jmar777","date":"2012-12-12T13:40:25.681Z","type":"join"}
{"nick":"sgallagh","date":"2012-12-12T13:42:01.400Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 252 seconds","date":"2012-12-12T13:51:35.510Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-12-12T13:56:54.197Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-12T13:57:12.358Z","type":"join"}
{"nick":"philips_","reason":"Excess Flood","date":"2012-12-12T13:59:48.688Z","type":"quit"}
{"nick":"philips_","date":"2012-12-12T14:02:10.409Z","type":"join"}
{"nick":"Ralt","reason":"Remote host closed the connection","date":"2012-12-12T14:17:48.458Z","type":"quit"}
{"nick":"brucem","reason":"Ping timeout: 240 seconds","date":"2012-12-12T14:39:35.285Z","type":"quit"}
{"nick":"brucem","date":"2012-12-12T14:40:03.454Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2012-12-12T14:40:06.269Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-12T14:57:02.358Z","type":"quit"}
{"nick":"bradleymeck","date":"2012-12-12T15:21:28.784Z","type":"join"}
{"nick":"loladiro","date":"2012-12-12T15:24:09.469Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-12T15:31:08.441Z","type":"quit"}
{"nick":"`3rdEden","reason":"Quit: banana's","date":"2012-12-12T15:32:17.647Z","type":"quit"}
{"nick":"indexzero","date":"2012-12-12T15:34:00.908Z","type":"join"}
{"nick":"kazupon","date":"2012-12-12T15:37:23.596Z","type":"join"}
{"nick":"roxlu","date":"2012-12-12T15:38:35.060Z","type":"join"}
{"nick":"warz","date":"2012-12-12T15:39:24.955Z","type":"join"}
{"nick":"warz","reason":"Changing host","date":"2012-12-12T15:39:25.261Z","type":"quit"}
{"nick":"warz","date":"2012-12-12T15:39:25.395Z","type":"join"}
{"nick":"loladiro","date":"2012-12-12T15:40:32.549Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-12-12T15:40:49.326Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus_: mogge bertje","date":"2012-12-12T15:45:48.273Z","type":"message"}
{"nick":"sblom","date":"2012-12-12T15:57:37.496Z","type":"join"}
{"nick":"lohkey","date":"2012-12-12T15:58:58.626Z","type":"join"}
