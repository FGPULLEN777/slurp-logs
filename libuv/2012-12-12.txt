{"nick":"ircretary","reason":"Remote host closed the connection","date":"2012-12-12T00:00:00.617Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus_: sorry, the last two \"update libuv\" in node.","date":"2012-12-12T00:00:03.798Z","type":"message"}
{"nick":"ircretary","date":"2012-12-12T00:00:07.697Z","type":"join"}
{"nick":"piscisaureus_","message":"ah","date":"2012-12-12T00:00:14.819Z","type":"message"}
{"nick":"piscisaureus_","message":"could be related to the rm-ev stuff","date":"2012-12-12T00:00:27.097Z","type":"message"}
{"nick":"piscisaureus_","message":"you should talk to ben about that","date":"2012-12-12T00:00:31.371Z","type":"message"}
{"nick":"piscisaureus_","message":"a test case would help very much I think :-)","date":"2012-12-12T00:00:40.066Z","type":"message"}
{"nick":"isaacs","message":"* bbc3af4 isaacs Revert \"deps: upgrade libuv to fc5984f\" (31 hours ago)","date":"2012-12-12T00:00:41.194Z","type":"message"}
{"nick":"isaacs","message":"* a8a12ff isaacs Revert \"deps: upgrade libuv to 665a316\" (32 hours ago)","date":"2012-12-12T00:00:41.327Z","type":"message"}
{"nick":"isaacs","message":"* 8ba1bec Ben Noordhuis deps: upgrade libuv to fc5984f (3 weeks ago)","date":"2012-12-12T00:00:41.456Z","type":"message"}
{"nick":"isaacs","message":"* b6a3b0a Ben Noordhuis deps: upgrade libuv to 665a316 (4 weeks ago)","date":"2012-12-12T00:00:41.457Z","type":"message"}
{"nick":"isaacs","message":"* a7ac1a1 Ben Noordhuis deps: upgrade libuv to 0ddf9d6 (5 weeks ago)","date":"2012-12-12T00:00:41.684Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: yeah, i'm working on a more minimal test case.","date":"2012-12-12T00:00:56.664Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: right now, only simple/test-tls-pause fails as a result of it, because it's the only case where we do a huge write.","date":"2012-12-12T00:01:16.503Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but also the benchmark/net-pipe.js breaks","date":"2012-12-12T00:01:25.066Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: the rm-ev stuff is pretty invasive (but important) so bugs are not entirely unexpected in that area","date":"2012-12-12T00:01:37.158Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: so I think we should release 0.10 as soon as streams2 plus some openssl stuff stabilizes","date":"2012-12-12T00:02:31.921Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: yeah, i'm guessing that there's a bug in libuv that is being triggered by streams2 but not by master, so we should work that out","date":"2012-12-12T00:02:40.579Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: agreed.  0.10 will be streams2 plus whatever else we finish by then.","date":"2012-12-12T00:02:51.285Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but we need to either sort out the libev removal breakage, or roll it back.","date":"2012-12-12T00:03:12.307Z","type":"message"}
{"nick":"isaacs","message":"i'd much MUCH prefer to actually remove it, and just fix the bug","date":"2012-12-12T00:03:19.985Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: not roll back. Just fix","date":"2012-12-12T00:03:26.527Z","type":"message"}
{"nick":"piscisaureus_","message":"it's very close to being good","date":"2012-12-12T00:03:31.211Z","type":"message"}
{"nick":"isaacs","message":"(ie, actually remove libev, not remove the removal)","date":"2012-12-12T00:03:34.104Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-12-12T00:03:41.134Z","type":"message"}
{"nick":"isaacs","message":"i feel that we are of a similar mind on this","date":"2012-12-12T00:03:46.806Z","type":"message"}
{"nick":"piscisaureus_","message":"in libuv not much needs to change otherwise except improve the new thread pool","date":"2012-12-12T00:03:48.314Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-12-12T00:03:55.083Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I discussed this with ben today, it's pretty clear on a detailed level what needs to be done","date":"2012-12-12T00:04:08.916Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: for the treadpool, or for libev removal?","date":"2012-12-12T00:06:07.524Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: threadpool","date":"2012-12-12T00:06:18.243Z","type":"message"}
{"nick":"piscisaureus_","message":"that's the \"other\" thing","date":"2012-12-12T00:06:21.642Z","type":"message"}
{"nick":"isaacs","message":"ah, right.","date":"2012-12-12T00:06:39.606Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2012-12-12T00:06:40.142Z","type":"message"}
{"nick":"isaacs","message":"that sounds great :)","date":"2012-12-12T00:06:42.904Z","type":"message"}
{"nick":"ArmyOfBruce","reason":"Excess Flood","date":"2012-12-12T00:20:13.686Z","type":"quit"}
{"nick":"ArmyOfBruce","date":"2012-12-12T00:20:41.628Z","type":"join"}
{"nick":"brson","reason":"Remote host closed the connection","date":"2012-12-12T00:20:44.860Z","type":"quit"}
{"nick":"brson","date":"2012-12-12T00:23:13.849Z","type":"join"}
{"nick":"isaacs","message":"piscisaureus_: so... i took this tcp-raw.js thing, and i changed it so that it's using a net.js client","date":"2012-12-12T00:58:48.533Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: and, what's really weird, the client ends up in the activeHandles, and the program hangs open","date":"2012-12-12T00:59:33.238Z","type":"message"}
{"nick":"isaacs","message":"even calling client.unref() doesn't make it stop..","date":"2012-12-12T01:00:03.933Z","type":"message"}
{"nick":"warz","date":"2012-12-12T01:00:29.510Z","type":"join"}
{"nick":"warz","reason":"Changing host","date":"2012-12-12T01:00:29.913Z","type":"quit"}
{"nick":"warz","date":"2012-12-12T01:00:30.048Z","type":"join"}
{"nick":"piscisaureus_","message":"isaacs: weird that unref() doesn't work.","date":"2012-12-12T01:09:47.522Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: yeah","date":"2012-12-12T01:10:04.804Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: what does process._getActiveHandles() and process._getActiveRequests show?","date":"2012-12-12T01:10:05.637Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: also, if you call client.close() does it stop","date":"2012-12-12T01:11:05.754Z","type":"message"}
{"nick":"piscisaureus_","message":"?","date":"2012-12-12T01:11:06.556Z","type":"message"}
{"nick":"isaacs","message":"i'm calling client.close()","date":"2012-12-12T01:11:28.207Z","type":"message"}
{"nick":"isaacs","message":"oh, wait, no, i'm not","date":"2012-12-12T01:11:45.054Z","type":"message"}
{"nick":"isaacs","message":"and yes, it does","date":"2012-12-12T01:11:46.506Z","type":"message"}
{"nick":"isaacs","message":"{ oncomplete: [Function: afterShutdown] }","date":"2012-12-12T01:11:48.155Z","type":"message"}
{"nick":"isaacs","message":"that's the diff, it looks like ^","date":"2012-12-12T01:11:54.684Z","type":"message"}
{"nick":"isaacs","message":"  this._handle.close();","date":"2012-12-12T01:12:18.223Z","type":"message"}
{"nick":"isaacs","message":"that closes it","date":"2012-12-12T01:12:21.463Z","type":"message"}
{"nick":"piscisaureus_","message":"so it should also exit if you unref it","date":"2012-12-12T01:12:40.389Z","type":"message"}
{"nick":"piscisaureus_","message":"there may be a bug in that code path somehow","date":"2012-12-12T01:12:55.732Z","type":"message"}
{"nick":"piscisaureus_","message":"in node 0.8, process.stdin._handle.close() makes node exit","date":"2012-12-12T01:13:30.807Z","type":"message"}
{"nick":"piscisaureus_","message":"as does process.stdin._handle.unref()","date":"2012-12-12T01:13:54.096Z","type":"message"}
{"nick":"piscisaureus_","message":"so at least it works sometimes ;-)","date":"2012-12-12T01:14:00.015Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-12-12T01:14:40.442Z","type":"message"}
{"nick":"isaacs","message":"this is just a plain old tcp client","date":"2012-12-12T01:14:49.522Z","type":"message"}
{"nick":"isaacs","message":"not stdin","date":"2012-12-12T01:14:50.982Z","type":"message"}
{"nick":"isaacs","message":"but yeah, it looks like client._handle.close() is being called by master, but not by streams2-net","date":"2012-12-12T01:15:06.129Z","type":"message"}
{"nick":"piscisaureus_","message":"well, that's a problem :-)","date":"2012-12-12T01:15:17.935Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: if you would readStop() then it would also exit I think","date":"2012-12-12T01:15:31.787Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: but as long as there is a tcp handle that is reading or writing, it wont exit","date":"2012-12-12T01:15:52.146Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-12-12T01:19:07.469Z","type":"message"}
{"nick":"isaacs","message":"yeah, it's weird.  so, i'm calling handle.close(), but then later, it seems to want that to be called again","date":"2012-12-12T01:19:22.340Z","type":"message"}
{"nick":"piscisaureus_","message":"that's wonly","date":"2012-12-12T01:19:34.313Z","type":"message"}
{"nick":"piscisaureus_","message":"*wonky","date":"2012-12-12T01:19:40.430Z","type":"message"}
{"nick":"piscisaureus_","message":"calling close() twice would most likely crash node, not make it work :-)","date":"2012-12-12T01:20:00.432Z","type":"message"}
{"nick":"piscisaureus_","message":"it'd be really nice if there was a reduced test case that we can use to debug libuv","date":"2012-12-12T01:20:18.891Z","type":"message"}
{"nick":"deoxxa","message":"isaacs: is that your kitty in your avatar on github? :3","date":"2012-12-12T01:20:31.171Z","type":"message"}
{"nick":"isaacs","message":"deoxxa: yessir","date":"2012-12-12T01:21:15.092Z","type":"message"}
{"nick":"deoxxa","message":"meow :3","date":"2012-12-12T01:21:19.065Z","type":"message"}
{"nick":"deoxxa","message":"i miss my cats now","date":"2012-12-12T01:21:33.520Z","type":"message"}
{"nick":"lohkey","date":"2012-12-12T01:29:21.573Z","type":"part"}
{"nick":"isaacs","message":"piscisaureus_: interesting.  i'm calling shutdown() twice.","date":"2012-12-12T01:31:18.011Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: that's the problem.","date":"2012-12-12T01:31:20.921Z","type":"message"}
{"nick":"piscisaureus_","message":"'ah","date":"2012-12-12T01:31:30.516Z","type":"message"}
{"nick":"piscisaureus_","message":"sounds like a libuv bug","date":"2012-12-12T01:31:35.991Z","type":"message"}
{"nick":"piscisaureus_","message":"or a bug in the binding layer","date":"2012-12-12T01:31:40.826Z","type":"message"}
{"nick":"piscisaureus_","message":"most likely libuv (by itself) would trigger an assertion fail if you did that","date":"2012-12-12T01:32:03.990Z","type":"message"}
{"nick":"isaacs","message":"yep, that's the thing","date":"2012-12-12T01:32:25.398Z","type":"message"}
{"nick":"piscisaureus_","message":"the second shutdown() probably would never actually happen, but as it is a req it keeps the lop alive","date":"2012-12-12T01:32:27.669Z","type":"message"}
{"nick":"isaacs","message":"yes.","date":"2012-12-12T01:32:34.924Z","type":"message"}
{"nick":"isaacs","message":"ok, well, this is a bug.  tracked it down.  all in a day's work :)","date":"2012-12-12T01:32:53.675Z","type":"message"}
{"nick":"isaacs","message":"now how to write a test for it...","date":"2012-12-12T01:32:57.703Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: the binding layer is pretty fragile atm, e.g. if you use it incorrectly weird stuff happens","date":"2012-12-12T01:33:00.357Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2012-12-12T01:33:04.478Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: that's why people should not :-)","date":"2012-12-12T01:33:08.564Z","type":"message"}
{"nick":"isaacs","message":"oh, for sure","date":"2012-12-12T01:33:14.193Z","type":"message"}
{"nick":"isaacs","message":"it's undocumented and awful.","date":"2012-12-12T01:33:17.925Z","type":"message"}
{"nick":"piscisaureus_","message":"(and possibly a good reason to harden the binding layer)","date":"2012-12-12T01:33:20.929Z","type":"message"}
{"nick":"isaacs","message":"and insanely verbose","date":"2012-12-12T01:33:23.645Z","type":"message"}
{"nick":"isaacs","message":"we can make it nice later.","date":"2012-12-12T01:33:28.704Z","type":"message"}
{"nick":"erickt","date":"2012-12-12T01:33:31.470Z","type":"join"}
{"nick":"isaacs","message":"it'd be nice if it was prettier","date":"2012-12-12T01:33:33.052Z","type":"message"}
{"nick":"isaacs","message":"if only to make the node internals easier to read","date":"2012-12-12T01:33:39.151Z","type":"message"}
{"nick":"piscisaureus_","message":"what is so verbose about that?","date":"2012-12-12T01:33:41.463Z","type":"message"}
{"nick":"piscisaureus_","message":"s/that/it/?","date":"2012-12-12T01:33:47.432Z","type":"message"}
{"nick":"pquerna","reason":"Read error: Operation timed out","date":"2012-12-12T01:34:22.004Z","type":"quit"}
{"nick":"isaacs","message":"compared with using require('net')?","date":"2012-12-12T01:35:09.390Z","type":"message"}
{"nick":"isaacs","message":"you're... joking, right?","date":"2012-12-12T01:35:12.748Z","type":"message"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2012-12-12T01:35:26.017Z","type":"quit"}
{"nick":"isaacs","message":"it's beer time.  thanks for your help, piscisaureus_.","date":"2012-12-12T01:38:28.397Z","type":"message"}
{"nick":"pquerna","date":"2012-12-12T01:39:58.732Z","type":"join"}
{"nick":"pquerna","reason":"Changing host","date":"2012-12-12T01:39:59.170Z","type":"quit"}
{"nick":"pquerna","date":"2012-12-12T01:39:59.305Z","type":"join"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-12-12T01:44:23.875Z","type":"quit"}
{"nick":"piscisaureus_","message":"isaacs: ah, yeah compare to net it's verbose :-)","date":"2012-12-12T01:46:47.785Z","type":"message"}
{"nick":"piscisaureus_","message":"but it's nice compared to what happens under the hood","date":"2012-12-12T01:47:02.316Z","type":"message"}
{"nick":"abraxas","date":"2012-12-12T01:47:08.291Z","type":"join"}
{"nick":"piscisaureus_","message":"that's why I do a talk about require('net').connect(80, 'nyan.cat').pipe(process.stdout), and just superficially discuss the public libuv interface","date":"2012-12-12T01:48:02.741Z","type":"message"}
{"nick":"piscisaureus_","message":"and, what libuv has to do is still nice compared to what the kernel actually does","date":"2012-12-12T01:48:21.385Z","type":"message"}
{"nick":"piscisaureus_","message":"welcome to vertical economies :-)","date":"2012-12-12T01:48:39.305Z","type":"message"}
{"nick":"jmar777","date":"2012-12-12T01:50:09.800Z","type":"join"}
{"nick":"lohkey_","date":"2012-12-12T01:52:10.649Z","type":"join"}
{"nick":"lohkey_","reason":"Client Quit","date":"2012-12-12T01:52:10.649Z","type":"quit"}
{"nick":"indexzero","date":"2012-12-12T01:53:04.189Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 250 seconds","date":"2012-12-12T02:04:46.621Z","type":"quit"}
{"nick":"mjr_","date":"2012-12-12T02:10:01.459Z","type":"join"}
{"nick":"joshthecoder","reason":"Quit: Leaving...","date":"2012-12-12T02:16:23.676Z","type":"quit"}
{"nick":"rje`mac","reason":"Ping timeout: 240 seconds","date":"2012-12-12T02:18:14.641Z","type":"quit"}
{"nick":"mjr_","reason":"Ping timeout: 255 seconds","date":"2012-12-12T02:18:29.485Z","type":"quit"}
{"nick":"rje","reason":"Ping timeout: 240 seconds","date":"2012-12-12T02:20:14.643Z","type":"quit"}
{"nick":"rje`mac","date":"2012-12-12T02:30:58.013Z","type":"join"}
{"nick":"rje","date":"2012-12-12T02:31:27.302Z","type":"join"}
{"nick":"ArmyOfBruce","new_nick":"brucem","date":"2012-12-12T02:35:18.117Z","type":"nick"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-12-12T02:38:14.139Z","type":"quit"}
{"nick":"erickt","date":"2012-12-12T02:39:37.848Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-12-12T02:44:16.660Z","type":"quit"}
{"nick":"abraxas","date":"2012-12-12T02:56:57.287Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 265 seconds","date":"2012-12-12T03:05:38.810Z","type":"quit"}
{"nick":"sblom","date":"2012-12-12T03:07:20.411Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2012-12-12T03:16:26.168Z","type":"quit"}
{"nick":"dap","date":"2012-12-12T03:23:57.418Z","type":"join"}
{"nick":"warz","date":"2012-12-12T03:39:50.386Z","type":"quit"}
{"nick":"kazupon","date":"2012-12-12T03:49:38.153Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-12T04:12:34.765Z","type":"quit"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-12-12T04:14:33.958Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-12T04:16:51.797Z","type":"join"}
{"nick":"lohkey","date":"2012-12-12T04:24:34.587Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-12T04:24:57.007Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2012-12-12T04:34:53.642Z","type":"quit"}
{"nick":"mmalecki","new_nick":"mmalecki[away]","date":"2012-12-12T04:37:11.014Z","type":"nick"}
{"nick":"loladiro","date":"2012-12-12T04:40:10.380Z","type":"join"}
{"nick":"ryah","date":"2012-12-12T04:51:16.725Z","type":"join"}
{"nick":"Benvie","date":"2012-12-12T05:27:18.458Z","type":"quit"}
{"nick":"joshthecoder","date":"2012-12-12T05:27:23.164Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-12-12T05:54:15.097Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-12-12T05:58:01.339Z","type":"quit"}
{"nick":"abraxas","reason":"Read error: Connection reset by peer","date":"2012-12-12T06:00:03.413Z","type":"quit"}
{"nick":"abraxas","date":"2012-12-12T06:00:28.592Z","type":"join"}
{"nick":"lohkey","reason":"Quit: lohkey","date":"2012-12-12T06:08:45.817Z","type":"quit"}
{"nick":"`3rdEden","date":"2012-12-12T07:44:52.775Z","type":"join"}
{"nick":"stagas","date":"2012-12-12T07:52:21.612Z","type":"join"}
{"nick":"bnoordhuis","date":"2012-12-12T07:54:25.288Z","type":"join"}
{"nick":"joshthecoder","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-12-12T07:55:15.052Z","type":"quit"}
{"nick":"rendar","date":"2012-12-12T07:58:25.129Z","type":"join"}
