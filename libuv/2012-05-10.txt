{"nick":"orlandov1tw","reason":"Ping timeout: 250 seconds","date":"2012-05-10T00:07:23.145Z","type":"quit"}
{"nick":"orlandovftw","date":"2012-05-10T00:07:41.819Z","type":"join"}
{"nick":"mikeal","date":"2012-05-10T00:17:43.982Z","type":"join"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-05-10T00:18:24.400Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-05-10T00:19:01.325Z","type":"join"}
{"nick":"piscisaureus_","message":"Hmm. trillian crash","date":"2012-05-10T00:19:12.248Z","type":"message"}
{"nick":"piscisaureus_","message":"It's a sign","date":"2012-05-10T00:19:14.356Z","type":"message"}
{"nick":"piscisaureus_","message":"I quit. Bye all.","date":"2012-05-10T00:19:18.842Z","type":"message"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2012-05-10T00:19:26.222Z","type":"quit"}
{"nick":"mikeal","reason":"Client Quit","date":"2012-05-10T00:19:48.184Z","type":"quit"}
{"nick":"isaacs","message":"bnoordhuis: so, brendan gregg poked around at that vert.x benchmark","date":"2012-05-10T00:25:24.814Z","type":"message"}
{"nick":"bnoordhuis","message":"and?","date":"2012-05-10T00:25:58.511Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i dont' think we have anything to get excited about.  there's no 10x latency bubble for node to go fix.","date":"2012-05-10T00:26:02.636Z","type":"message"}
{"nick":"isaacs","message":"for starters, the numbers that his client shows don't match the number of connections the server shows.","date":"2012-05-10T00:26:21.838Z","type":"message"}
{"nick":"isaacs","message":"by about 30%","date":"2012-05-10T00:26:28.285Z","type":"message"}
{"nick":"isaacs","message":"second, he said that there was a \"crippled\" vert.x that was set to only run on one processor.","date":"2012-05-10T00:26:45.625Z","type":"message"}
{"nick":"isaacs","message":"however, when run in that mode, it still uses 1710ms of cpu time per second.","date":"2012-05-10T00:26:58.495Z","type":"message"}
{"nick":"bnoordhuis","message":"hah","date":"2012-05-10T00:27:07.894Z","type":"message"}
{"nick":"isaacs","message":"whereas node, by default, under load, uses exactly 1000ms of cpu time per seoncd","date":"2012-05-10T00:27:15.894Z","type":"message"}
{"nick":"isaacs","message":"when he restricted it with pbind, the performance was cut in half, and wildly erratic","date":"2012-05-10T00:27:36.146Z","type":"message"}
{"nick":"isaacs","message":"because the JVM does not like being on a single core.","date":"2012-05-10T00:27:42.680Z","type":"message"}
{"nick":"isaacs","message":"also, the fs.readFile in the response handler makes node's performaen die badly.","date":"2012-05-10T00:28:08.917Z","type":"message"}
{"nick":"isaacs","message":"take that out, actually restrict vert.x to a single core, and count requests properly, and node is slightly faster.","date":"2012-05-10T00:28:29.293Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, it's a pretty lousy (and naive) benchmark","date":"2012-05-10T00:28:29.608Z","type":"message"}
{"nick":"isaacs","message":"and more stable, and uses less memory.","date":"2012-05-10T00:28:44.169Z","type":"message"}
{"nick":"tjfontaine","message":"surprise surprise","date":"2012-05-10T00:28:45.654Z","type":"message"}
{"nick":"bnoordhuis","message":"well, even if vert.x was faster","date":"2012-05-10T00:28:47.895Z","type":"message"}
{"nick":"bnoordhuis","message":"i would just sit back and see if it's still around in six months time","date":"2012-05-10T00:29:09.659Z","type":"message"}
{"nick":"isaacs","message":"of course, the clustered node really ought to be performing much much better.","date":"2012-05-10T00:29:15.787Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: yeah, that's another thing.","date":"2012-05-10T00:29:19.963Z","type":"message"}
{"nick":"isaacs","message":"try installing it.","date":"2012-05-10T00:29:23.709Z","type":"message"}
{"nick":"isaacs","message":"it makes node 0.0 look like a cakewalk.","date":"2012-05-10T00:29:35.269Z","type":"message"}
{"nick":"bnoordhuis","message":"hah, that bad?","date":"2012-05-10T00:29:43.767Z","type":"message"}
{"nick":"mikeal","date":"2012-05-10T00:29:44.199Z","type":"join"}
{"nick":"orlandovftw","reason":"Ping timeout: 256 seconds","date":"2012-05-10T00:30:42.518Z","type":"quit"}
{"nick":"isaacs","message":"oh, it's awful","date":"2012-05-10T00:33:48.004Z","type":"message"}
{"nick":"isaacs","message":"brendan did notice some interesting behavior in the node server while benchmarking it, though.","date":"2012-05-10T00:34:08.560Z","type":"message"}
{"nick":"isaacs","message":"so this exercise may yield something useful.","date":"2012-05-10T00:34:16.166Z","type":"message"}
{"nick":"bnoordhuis","message":"what was it?","date":"2012-05-10T00:34:24.696Z","type":"message"}
{"nick":"isaacs","message":"but it might've just been gc causing a few outliers","date":"2012-05-10T00:34:25.026Z","type":"message"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-05-10T00:34:33.848Z","type":"quit"}
{"nick":"isaacs","message":"well, the bulk of the requests were much faster than vertx's, but there are a few that ran like 100ms or more.","date":"2012-05-10T00:34:47.256Z","type":"message"}
{"nick":"isaacs","message":"which sort of looks like gc tracks, but maybe we can smooth it out or something","date":"2012-05-10T00:35:01.058Z","type":"message"}
{"nick":"perezd","date":"2012-05-10T00:35:03.186Z","type":"join"}
{"nick":"isaacs","message":"the vert.x server's latency distribution was a bit wider curve, and not as fast, but didn't have the spike of outliers.","date":"2012-05-10T00:35:33.056Z","type":"message"}
{"nick":"bnoordhuis","message":"g1 is a little less naive than v8's gc, i don't doubt","date":"2012-05-10T00:36:03.076Z","type":"message"}
{"nick":"bnoordhuis","message":"the garbage collectors in the sun jvm are works of art","date":"2012-05-10T00:36:35.365Z","type":"message"}
{"nick":"bnoordhuis","message":"and lots and lots of man hours","date":"2012-05-10T00:36:42.608Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-05-10T00:42:32.961Z","type":"quit"}
{"nick":"txdv","message":"g1?","date":"2012-05-10T00:50:05.503Z","type":"message"}
{"nick":"bnoordhuis","message":"txdv: the default jvm gc","date":"2012-05-10T00:50:45.479Z","type":"message"}
{"nick":"txdv","message":"why not j1?","date":"2012-05-10T00:51:00.157Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-05-10T00:51:11.329Z","type":"quit"}
{"nick":"bnoordhuis","message":"ask the people at oracle nay sun","date":"2012-05-10T00:51:24.494Z","type":"message"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-05-10T00:59:53.190Z","type":"quit"}
{"nick":"erickt","reason":"Ping timeout: 240 seconds","date":"2012-05-10T01:01:15.307Z","type":"quit"}
{"nick":"theCole","reason":"Ping timeout: 260 seconds","date":"2012-05-10T01:05:06.993Z","type":"quit"}
{"nick":"pietern","reason":"Quit: pietern","date":"2012-05-10T01:13:17.110Z","type":"quit"}
{"nick":"erickt","date":"2012-05-10T01:14:12.153Z","type":"join"}
{"nick":"abraxas","date":"2012-05-10T01:37:30.701Z","type":"join"}
{"nick":"erickt","reason":"Ping timeout: 250 seconds","date":"2012-05-10T01:40:32.698Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-05-10T01:49:53.278Z","type":"join"}
{"nick":"piscisaureus_","message":"I didn't manage to actually quit","date":"2012-05-10T01:50:02.701Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: is brendangregg going to do a write up on that analysis","date":"2012-05-10T01:50:17.398Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: it looks like he did an in-depth analysis that the node folk might be interested in","date":"2012-05-10T01:50:41.916Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: i'm trying to convince him to","date":"2012-05-10T01:51:18.732Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: he said the problem is that it's a lot of work, and might inadvertently lend legitimacy to vert.x","date":"2012-05-10T01:51:39.020Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: we probably gotta fix that cluster stuff","date":"2012-05-10T01:51:39.523Z","type":"message"}
{"nick":"isaacs","message":"yeah, definitely gotta fix that","date":"2012-05-10T01:51:46.513Z","type":"message"}
{"nick":"isaacs","message":"it's not a v0.8 fc blocker.","date":"2012-05-10T01:51:50.565Z","type":"message"}
{"nick":"isaacs","message":"put it off a week if you can :)","date":"2012-05-10T01:51:59.665Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: well the thing *is* kinda legit right","date":"2012-05-10T01:52:00.832Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: almost everything about that benchmark article is mistaken, misleading, or outright wrong.","date":"2012-05-10T01:52:20.320Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: well my coworkers are pushing for it since they want to upgrade to 0.6 :-)","date":"2012-05-10T01:52:21.845Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: but yeah I will try to fix the refcount thing first","date":"2012-05-10T01:52:36.301Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I did not understand the node 0.0 comment btw","date":"2012-05-10T01:53:45.861Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: have you installed vert.x?","date":"2012-05-10T01:54:03.533Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: did he benchmark node 0.0 ?","date":"2012-05-10T01:54:05.497Z","type":"message"}
{"nick":"isaacs","message":"nono","date":"2012-05-10T01:54:08.287Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: nope","date":"2012-05-10T01:54:14.049Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: what's up with it?","date":"2012-05-10T01:54:19.841Z","type":"message"}
{"nick":"isaacs","message":"i was saying that installing vert.x is harder than node 0.0","date":"2012-05-10T01:54:21.786Z","type":"message"}
{"nick":"isaacs","message":"used to be","date":"2012-05-10T01:54:24.277Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: you need like different versions of java and stuff.  it's super convoluted, and very fiddly with classpath stuff.","date":"2012-05-10T01:54:41.135Z","type":"message"}
{"nick":"erickt","date":"2012-05-10T01:54:47.138Z","type":"join"}
{"nick":"piscisaureus_","message":"ah, I see","date":"2012-05-10T01:54:50.158Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but i mean, whatever.  JVMites are used to abuse.","date":"2012-05-10T01:55:08.693Z","type":"message"}
{"nick":"isaacs","message":"but if that doesn't get sorted out, vert.x will never get off the ground.","date":"2012-05-10T01:55:34.141Z","type":"message"}
{"nick":"isaacs","message":"if it does, it probably will still fade out, because that's what projects tend to do.","date":"2012-05-10T01:55:46.110Z","type":"message"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-05-10T01:55:52.895Z","type":"quit"}
{"nick":"piscisaureus_","message":"isaacs: to be honest, I kinda like the idea behind vert.x","date":"2012-05-10T01:56:25.910Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: but I think that it will be hard to work with","date":"2012-05-10T01:56:26.115Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: since you have threads which basically you need data sharing","date":"2012-05-10T01:56:40.909Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: hence, really \"data sharing\" with locks, or something else","date":"2012-05-10T01:57:04.591Z","type":"message"}
{"nick":"piscisaureus_","message":"which is not easy to accomplish even in the vm","date":"2012-05-10T01:57:12.934Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: but isn't the thing vmware-backed?","date":"2012-05-10T01:57:28.417Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: it's not entirely clear","date":"2012-05-10T01:57:46.046Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but yes, the author does work at vmware","date":"2012-05-10T01:57:53.805Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs\" anywa","date":"2012-05-10T01:58:58.894Z","type":"message"}
{"nick":"piscisaureus_","message":"er","date":"2012-05-10T01:59:00.775Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: anyway, brendangregg++","date":"2012-05-10T01:59:09.061Z","type":"message"}
{"nick":"isaacs","message":"yes","date":"2012-05-10T01:59:13.777Z","type":"message"}
{"nick":"isaacs","message":"the guy is a performance scientist.","date":"2012-05-10T01:59:21.329Z","type":"message"}
{"nick":"piscisaureus_","message":"it's always nice if people actually analyze these benchmarks and extract stuff for us to learn :-)","date":"2012-05-10T01:59:34.977Z","type":"message"}
{"nick":"isaacs","message":"if vert.x has managed to troll brendan enough to get him to poke his performance science skills into node.js, then i'm thankful.","date":"2012-05-10T01:59:47.047Z","type":"message"}
{"nick":"hij1nx","date":"2012-05-10T02:02:59.786Z","type":"join"}
{"nick":"piscisaureus_","message":":-)","date":"2012-05-10T02:04:14.056Z","type":"message"}
{"nick":"piscisaureus_","message":"No more worrying about concurrency. Vert.x allows you to write all your code as single threaded, freeing you from the hassle of multi-threaded programming, yet unlike other asynchronous framework it scales seamlessly over available cores without you having to fork.","date":"2012-05-10T02:05:58.645Z","type":"message"}
{"nick":"piscisaureus_","message":"So lame","date":"2012-05-10T02:06:05.051Z","type":"message"}
{"nick":"piscisaureus_","message":"Maybe we should have this --cluster option in node after all","date":"2012-05-10T02:06:16.479Z","type":"message"}
{"nick":"piscisaureus_","message":"So we can say \"node scales seamlessly blah blah blah\"","date":"2012-05-10T02:06:28.384Z","type":"message"}
{"nick":"perezd","date":"2012-05-10T02:07:56.622Z","type":"join"}
{"nick":"perezd","reason":"Remote host closed the connection","date":"2012-05-10T02:08:21.310Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-05-10T02:09:39.017Z","type":"quit"}
{"nick":"txdv","message":"is someone jealous of vert.x?","date":"2012-05-10T02:19:43.574Z","type":"message"}
{"nick":"txdv","message":"can someone give me a link to that benchmarjk","date":"2012-05-10T02:21:37.831Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-05-10T02:22:05.161Z","type":"quit"}
{"nick":"orlandovftw","date":"2012-05-10T02:23:50.974Z","type":"join"}
{"nick":"mikeal","date":"2012-05-10T02:24:29.277Z","type":"join"}
{"nick":"brson_","reason":"Quit: leaving","date":"2012-05-10T02:42:58.297Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-05-10T02:56:00.933Z","type":"quit"}
{"nick":"mikeal","date":"2012-05-10T03:00:37.113Z","type":"join"}
{"nick":"orlandovftw","reason":"Ping timeout: 248 seconds","date":"2012-05-10T03:10:50.439Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-05-10T03:18:45.553Z","type":"quit"}
{"nick":"theCole","date":"2012-05-10T03:24:58.186Z","type":"join"}
{"nick":"elijah-mbp","date":"2012-05-10T03:31:46.186Z","type":"join"}
{"nick":"theCole","reason":"Read error: Connection reset by peer","date":"2012-05-10T03:35:04.279Z","type":"quit"}
{"nick":"TheJH","date":"2012-05-10T04:01:03.788Z","type":"join"}
{"nick":"loladiro","date":"2012-05-10T04:04:18.328Z","type":"part"}
{"nick":"TheJH","reason":"Read error: Operation timed out","date":"2012-05-10T04:21:42.067Z","type":"quit"}
{"nick":"philips","reason":"Read error: Operation timed out","date":"2012-05-10T04:36:38.100Z","type":"quit"}
{"nick":"chilts","reason":"Read error: Operation timed out","date":"2012-05-10T04:37:29.704Z","type":"quit"}
{"nick":"chilts","date":"2012-05-10T04:37:43.290Z","type":"join"}
{"nick":"indexzero","date":"2012-05-10T04:38:01.868Z","type":"join"}
{"nick":"philips","date":"2012-05-10T04:38:55.673Z","type":"join"}
{"nick":"perezd","date":"2012-05-10T04:39:45.327Z","type":"join"}
{"nick":"bulatshakirzyano","reason":"Ping timeout: 260 seconds","date":"2012-05-10T04:51:50.877Z","type":"quit"}
{"nick":"bulatshakirzyano","date":"2012-05-10T04:52:28.351Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 245 seconds","date":"2012-05-10T04:56:04.659Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-05-10T05:02:38.408Z","type":"quit"}
{"nick":"abraxas","date":"2012-05-10T05:03:13.203Z","type":"join"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2012-05-10T05:03:30.359Z","type":"quit"}
{"nick":"abraxas","reason":"Read error: Connection reset by peer","date":"2012-05-10T05:03:34.359Z","type":"quit"}
{"nick":"abraxas","date":"2012-05-10T05:04:03.510Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 240 seconds","date":"2012-05-10T05:08:15.240Z","type":"quit"}
{"nick":"abraxas","date":"2012-05-10T05:09:22.578Z","type":"join"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-05-10T05:14:38.725Z","type":"quit"}
{"nick":"paddybyers","date":"2012-05-10T05:25:45.211Z","type":"join"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-05-10T05:28:29.077Z","type":"quit"}
{"nick":"igorzi_","date":"2012-05-10T05:58:39.373Z","type":"join"}
{"nick":"igorzi_","reason":"Client Quit","date":"2012-05-10T05:58:54.626Z","type":"quit"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-05-10T06:05:42.716Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 245 seconds","date":"2012-05-10T06:17:51.125Z","type":"quit"}
{"nick":"avsej_","new_nick":"avsej","date":"2012-05-10T06:23:59.970Z","type":"nick"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-05-10T06:29:06.605Z","type":"quit"}
{"nick":"bulatshakirzyano","reason":"Ping timeout: 245 seconds","date":"2012-05-10T06:30:21.120Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-05-10T06:32:49.460Z","type":"quit"}
{"nick":"orlandovftw","date":"2012-05-10T06:44:27.176Z","type":"join"}
{"nick":"orlandovftw","reason":"Client Quit","date":"2012-05-10T06:45:10.478Z","type":"quit"}
{"nick":"orlandovftw","date":"2012-05-10T06:45:27.177Z","type":"join"}
{"nick":"mraleph","date":"2012-05-10T07:11:59.174Z","type":"join"}
{"nick":"orlandovftw","reason":"Ping timeout: 260 seconds","date":"2012-05-10T08:36:01.977Z","type":"quit"}
{"nick":"felixge","date":"2012-05-10T08:36:13.177Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-05-10T08:36:13.523Z","type":"quit"}
{"nick":"felixge","date":"2012-05-10T08:36:13.727Z","type":"join"}
{"nick":"paddybyers","date":"2012-05-10T08:48:17.153Z","type":"join"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2012-05-10T08:48:20.089Z","type":"quit"}
{"nick":"mmalecki_","date":"2012-05-10T08:51:24.188Z","type":"join"}
{"nick":"mmalecki","reason":"Remote host closed the connection","date":"2012-05-10T08:54:10.793Z","type":"quit"}
{"nick":"mmalecki_","reason":"Client Quit","date":"2012-05-10T08:54:14.507Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T08:54:27.732Z","type":"join"}
{"nick":"mmalecki_","date":"2012-05-10T09:09:43.513Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 272 seconds","date":"2012-05-10T09:12:02.713Z","type":"quit"}
{"nick":"mmalecki_","reason":"Client Quit","date":"2012-05-10T09:12:20.534Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T09:12:36.377Z","type":"join"}
{"nick":"mmalecki_","date":"2012-05-10T09:16:19.252Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 252 seconds","date":"2012-05-10T09:17:55.157Z","type":"quit"}
{"nick":"mmalecki_","reason":"Client Quit","date":"2012-05-10T09:18:00.697Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T09:18:07.964Z","type":"join"}
{"nick":"mmalecki","reason":"Quit: Reconnecting","date":"2012-05-10T10:13:22.883Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T10:19:27.817Z","type":"join"}
{"nick":"mmalecki","reason":"Client Quit","date":"2012-05-10T10:24:03.214Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T10:24:31.904Z","type":"join"}
{"nick":"theCole","date":"2012-05-10T10:25:31.175Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 240 seconds","date":"2012-05-10T11:02:45.137Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2012-05-10T11:05:32.052Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T11:09:02.121Z","type":"join"}
{"nick":"theCole","reason":"Quit: theCole","date":"2012-05-10T11:20:48.516Z","type":"quit"}
{"nick":"TheJH","date":"2012-05-10T11:58:47.754Z","type":"join"}
{"nick":"bnoordhuis","date":"2012-05-10T11:58:51.842Z","type":"join"}
{"nick":"TheJH","reason":"Changing host","date":"2012-05-10T11:58:58.089Z","type":"quit"}
{"nick":"TheJH","date":"2012-05-10T11:58:58.292Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-05-10T12:07:18.361Z","type":"quit"}
{"nick":"loladiro","date":"2012-05-10T12:27:55.969Z","type":"join"}
{"nick":"c4milo","date":"2012-05-10T12:38:27.175Z","type":"join"}
{"nick":"mmalecki","new_nick":"mmalecki[away]","date":"2012-05-10T13:11:00.712Z","type":"nick"}
{"nick":"mmalecki[away]","reason":"Quit: leaving","date":"2012-05-10T13:11:29.655Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-05-10T13:27:33.173Z","type":"join"}
{"nick":"mmalecki","date":"2012-05-10T13:31:57.088Z","type":"join"}
{"nick":"loladiro","reason":"Remote host closed the connection","date":"2012-05-10T13:58:21.735Z","type":"quit"}
{"nick":"loladiro","date":"2012-05-10T13:58:40.089Z","type":"join"}
{"nick":"paddybyers","date":"2012-05-10T13:58:44.654Z","type":"join"}
{"nick":"theCole","date":"2012-05-10T14:02:58.170Z","type":"join"}
{"nick":"isaacs","date":"2012-05-10T14:10:09.640Z","type":"join"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307v0.6\u000f * r\u0002bc4126b\u000f \u000310\u000f/ src/win/fs.c \u0002:\u000f ","date":"2012-05-10T14:39:28.139Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f Windows: skip GetFileAttributes call when opening a file","date":"2012-05-10T14:39:28.139Z","type":"message"}
{"nick":"CIA-155","message":"\u0002libuv:\u000f  - http://git.io/CKnB4Q","date":"2012-05-10T14:39:28.139Z","type":"message"}
{"nick":"travis-ci","date":"2012-05-10T14:41:22.175Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#271 (v0.6 - bc4126b : Bert Belder): The build is still failing.","date":"2012-05-10T14:41:22.372Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/cb58a56...bc4126b","date":"2012-05-10T14:41:22.372Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1295556","date":"2012-05-10T14:41:22.372Z","type":"message"}
{"nick":"travis-ci","date":"2012-05-10T14:41:22.372Z","type":"part"}
{"nick":"indutny","message":"heeey ben","date":"2012-05-10T14:44:16.808Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: time to pull that patch in","date":"2012-05-10T14:44:26.499Z","type":"message"}
{"nick":"isaacs","message":"Good morning!","date":"2012-05-10T14:47:05.566Z","type":"message"}
{"nick":"indutny","message":"good morning! :)","date":"2012-05-10T14:47:17.459Z","type":"message"}
{"nick":"bnoordhuis","message":"sup fedor","date":"2012-05-10T14:52:14.755Z","type":"message"}
{"nick":"bnoordhuis","message":"what patch? the stdio thing?","date":"2012-05-10T14:52:25.743Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: ^","date":"2012-05-10T14:52:37.888Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: yep","date":"2012-05-10T14:52:42.801Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I fixed benchmark","date":"2012-05-10T14:52:47.731Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_ still needs to do the windows side of things","date":"2012-05-10T14:52:55.821Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_ still needs to do a lot of things actually","date":"2012-05-10T14:53:14.655Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2012-05-10T14:53:23.833Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-05-10T14:53:24.448Z","type":"message"}
{"nick":"indutny","message":"is it blocking 0.8?","date":"2012-05-10T14:53:36.187Z","type":"message"}
{"nick":"mmalecki","message":"that's when I realized it's an actual workday","date":"2012-05-10T14:53:44.484Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: yeah I am not getting at it.","date":"2012-05-10T14:53:47.805Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I have to do the cluster backoff first because it's blocking everyone here now","date":"2012-05-10T14:54:02.831Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: oh, i can do that - i intended to work on it today","date":"2012-05-10T14:54:26.464Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: ok I'll send you what I've got so far. I don't know if it compiles","date":"2012-05-10T14:54:45.093Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but I think it reasonable, except we need to fix ABI breakage","date":"2012-05-10T14:55:01.710Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-05-10T14:56:13.086Z","type":"quit"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u0002928d28a\u000f \u000310\u000f/ (lib/util.js test/simple/test-util.js)\u0002:\u000f ","date":"2012-05-10T14:56:20.672Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f util: make _extend() more robust","date":"2012-05-10T14:56:20.672Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f  - http://git.io/5aEcLw","date":"2012-05-10T14:56:20.672Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u000268f63fe\u000f \u000310\u000f/ lib/child_process.js \u0002:\u000f ","date":"2012-05-10T14:56:21.072Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f child_process: make copy of options arg","date":"2012-05-10T14:56:21.072Z","type":"message"}
{"nick":"CIA-155","message":"\u0002node:\u000f  - http://git.io/w8WzXg","date":"2012-05-10T14:56:21.072Z","type":"message"}
{"nick":"creationix","message":"piscisaureus_, fwiw, I'm excited for the ref refactor to get merged into master","date":"2012-05-10T14:57:08.139Z","type":"message"}
{"nick":"creationix","message":"piscisaureus_, I think it will make things much easier for my luv* projects","date":"2012-05-10T14:57:28.943Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: https://gist.github.com/2653691","date":"2012-05-10T14:57:55.584Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: apply to node/0.6","date":"2012-05-10T14:58:01.751Z","type":"message"}
{"nick":"piscisaureus_","message":"creationix: let's hope so,","date":"2012-05-10T14:58:07.309Z","type":"message"}
{"nick":"bnoordhuis","message":"it will","date":"2012-05-10T14:58:43.383Z","type":"message"}
{"nick":"creationix","message":"bnoordhuis, I did have a question about it though","date":"2012-05-10T14:59:11.293Z","type":"message"}
{"nick":"piscisaureus_","message":"crap","date":"2012-05-10T14:59:18.848Z","type":"message"}
{"nick":"bnoordhuis","message":"perhaps i have an answer","date":"2012-05-10T14:59:25.436Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I forgot to land some stuff I'm afraid","date":"2012-05-10T14:59:28.809Z","type":"message"}
{"nick":"creationix","message":"will is_active say a handle is inactive if there are pending events, but you're manually unref'ed it?","date":"2012-05-10T14:59:29.757Z","type":"message"}
{"nick":"theCole","reason":"Quit: theCole","date":"2012-05-10T14:59:49.228Z","type":"quit"}
{"nick":"creationix","message":"for my use, I don't care so much if it's holding the event loop open as it stuff may happen later","date":"2012-05-10T14:59:53.606Z","type":"message"}
{"nick":"bnoordhuis","message":"uv_is_active reports true if the handle is reading / writing but unref'd","date":"2012-05-10T15:01:14.259Z","type":"message"}
{"nick":"creationix","message":"perfect, then is_active + is_closing sounds like what I need","date":"2012-05-10T15:01:32.087Z","type":"message"}
{"nick":"bnoordhuis","message":"good :)","date":"2012-05-10T15:01:37.333Z","type":"message"}
{"nick":"creationix","message":"so after every uv_* function call that accepts a callback I should check to see if it's active, and then in the callback check again","date":"2012-05-10T15:02:58.951Z","type":"message"}
{"nick":"creationix","message":"would that be enough for all the cases?","date":"2012-05-10T15:03:03.450Z","type":"message"}
{"nick":"creationix","message":"I think everything that makes a handle active takes a callback","date":"2012-05-10T15:03:25.699Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-05-10T15:04:02.730Z","type":"quit"}
{"nick":"loladiro","date":"2012-05-10T15:04:05.966Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-05-10T15:09:03.058Z","type":"quit"}
{"nick":"bnoordhuis","message":"creationix: yes, that should work","date":"2012-05-10T15:09:43.667Z","type":"message"}
{"nick":"creationix","message":"ok, if that works, then I'm happy","date":"2012-05-10T15:10:14.529Z","type":"message"}
{"nick":"creationix","message":"no need for a callback","date":"2012-05-10T15:10:17.227Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: what's the motivation for doing it in libuv?","date":"2012-05-10T15:11:48.998Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: because you can't stop accepting in node","date":"2012-05-10T15:12:02.771Z","type":"message"}
{"nick":"bnoordhuis","message":"why not?","date":"2012-05-10T15:12:26.254Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: because there is no uv_listen_stop :-)","date":"2012-05-10T15:12:35.588Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: besides, we also have windows-specific hacks for improving load balancing","date":"2012-05-10T15:12:52.043Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: so it kinda makes sense to make this a libuv flag, right?","date":"2012-05-10T15:13:06.850Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't know, the idle watcher trick should work from within node","date":"2012-05-10T15:13:26.451Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: then you'd have to add uv_listen_stop","date":"2012-05-10T15:13:42.407Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: you can also just not call uv_accept and set an idle watcher instead.","date":"2012-05-10T15:13:57.095Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but that is not very nice for that particular connection, because libuv already accepted it when that happens","date":"2012-05-10T15:14:18.200Z","type":"message"}
{"nick":"loladiro","reason":"Ping timeout: 260 seconds","date":"2012-05-10T15:14:26.966Z","type":"quit"}
{"nick":"bnoordhuis","message":"it doesn't on unix","date":"2012-05-10T15:14:36.467Z","type":"message"}
{"nick":"piscisaureus_","message":"so basically libuv accepts it and then node decides to ignore it... that can't be good for latency :-)","date":"2012-05-10T15:14:37.902Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: it definitely does","date":"2012-05-10T15:14:44.088Z","type":"message"}
{"nick":"bnoordhuis","message":"nuh-uh, the listen fd signals readiness, libuv calls the onconnection callback, which calls uv_accept(), which calls accept()","date":"2012-05-10T15:15:18.731Z","type":"message"}
{"nick":"bnoordhuis","message":"or accept4() as the case may be","date":"2012-05-10T15:15:23.760Z","type":"message"}
{"nick":"felixge","reason":"Quit: felixge","date":"2012-05-10T15:15:29.180Z","type":"quit"}
{"nick":"bnoordhuis","message":"but if you don't call uv_accept(), nothing happens - the new connection remains in the pending queue","date":"2012-05-10T15:15:42.665Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: did you recently change that. cause I am looking at 0.6 and it definitely does it the other way","date":"2012-05-10T15:16:06.896Z","type":"message"}
{"nick":"bnoordhuis","message":"hm, that could be","date":"2012-05-10T15:16:17.625Z","type":"message"}
{"nick":"bnoordhuis","message":"oh right, accept() then uv_accept()","date":"2012-05-10T15:18:16.724Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, that's something i can change with no ill effects","date":"2012-05-10T15:18:30.463Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: ok I updated https://gist.github.com/2653691 - I still don't know if it compiles","date":"2012-05-10T15:19:01.252Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but the idea is there :-p","date":"2012-05-10T15:19:06.488Z","type":"message"}
{"nick":"bnoordhuis","message":"except maybe... i'll have to check if the various poll mechanisms do or don't keep signaling readiness","date":"2012-05-10T15:19:17.353Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: they all should, right?","date":"2012-05-10T15:19:35.802Z","type":"message"}
{"nick":"bnoordhuis","message":"listen fds are special","date":"2012-05-10T15:19:52.438Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I think uv__server_io stops the io watcher and restarts when the user calls uv_accept","date":"2012-05-10T15:19:58.160Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: so that's something to take into consideration","date":"2012-05-10T15:20:05.435Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2012-05-10T15:20:07.824Z","type":"message"}
{"nick":"isaacs","message":"mjr_: did you get a chance to try out that socket onError patch?","date":"2012-05-10T15:20:10.040Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: but, about chaning the accept/callback order","date":"2012-05-10T15:20:13.845Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: *changing","date":"2012-05-10T15:20:18.824Z","type":"message"}
{"nick":"bnoordhuis","message":"yes?","date":"2012-05-10T15:20:22.664Z","type":"message"}
{"nick":"mikeal","date":"2012-05-10T15:20:45.156Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: you can do that, but then the user can get a connection_cb, but uv_accept can throw an error in is face","date":"2012-05-10T15:20:48.130Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: in case of ECONNRESET etc","date":"2012-05-10T15:20:52.982Z","type":"message"}
{"nick":"piscisaureus_","message":"or ECONNABORTED, more likely","date":"2012-05-10T15:21:04.780Z","type":"message"}
{"nick":"mikeal","reason":"Read error: Connection reset by peer","date":"2012-05-10T15:21:12.650Z","type":"quit"}
{"nick":"mikeal","date":"2012-05-10T15:21:18.026Z","type":"join"}
{"nick":"bnoordhuis","message":"true","date":"2012-05-10T15:21:48.637Z","type":"message"}
{"nick":"bnoordhuis","message":"actually, i don't think we even have to change anything","date":"2012-05-10T15:21:58.189Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I think we do","date":"2012-05-10T15:22:06.804Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: why not?","date":"2012-05-10T15:22:09.070Z","type":"message"}
{"nick":"bnoordhuis","message":"at worst, there's one pending-but-accepted connection","date":"2012-05-10T15:22:10.133Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: i see two options that don't require changing the api / abi","date":"2012-05-10T15:26:34.546Z","type":"message"}
{"nick":"bnoordhuis","message":"1. do it all in node and live with the fact that there may be one accepted-but-not-uv_accepted connection","date":"2012-05-10T15:27:18.762Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: overlap it with the write wtcher","date":"2012-05-10T15:27:21.716Z","type":"message"}
{"nick":"bnoordhuis","message":"2. add an idle watcher in libuv that distributes the accept() calls","date":"2012-05-10T15:27:44.408Z","type":"message"}
{"nick":"bnoordhuis","message":"option 2 is arguably the cleanest, option 1 is the easiest :)","date":"2012-05-10T15:28:06.038Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I suppose I could live with option 1 for 0.6 but it'd be nice to do it in a clean way for 0.8","date":"2012-05-10T15:28:19.523Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I don't understand how (2) would fix the abi issue btw","date":"2012-05-10T15:28:35.728Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: do you have some leftover fields that you can use to create a list of backed-off server handles?","date":"2012-05-10T15:28:56.020Z","type":"message"}
{"nick":"mjr__","date":"2012-05-10T15:28:59.649Z","type":"join"}
{"nick":"bnoordhuis","message":"oh, maybe not abi - but we could add it to the loop to keep breakage to a minimum","date":"2012-05-10T15:29:08.947Z","type":"message"}
{"nick":"bnoordhuis","message":"dirty hack but it'd work","date":"2012-05-10T15:29:20.769Z","type":"message"}
{"nick":"indexzero_","date":"2012-05-10T15:29:26.437Z","type":"join"}
{"nick":"bnoordhuis","message":"for node, it could even be a *shock* *gasp* global","date":"2012-05-10T15:29:37.978Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I think union { ev_idle idle_watcher; ev_io write_watcher } also works","date":"2012-05-10T15:29:43.716Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: because servers don't need the write watcher anyway","date":"2012-05-10T15:29:52.374Z","type":"message"}
{"nick":"bnoordhuis","message":"ah, well...","date":"2012-05-10T15:30:01.642Z","type":"message"}
{"nick":"piscisaureus_","message":"unless sizeof(ev_idle) > sizeof(ev_io)","date":"2012-05-10T15:30:17.114Z","type":"message"}
{"nick":"piscisaureus_","message":"but that seems unlikely","date":"2012-05-10T15:30:22.542Z","type":"message"}
{"nick":"TooTallNate","date":"2012-05-10T15:31:22.703Z","type":"join"}
{"nick":"bnoordhuis","message":"no, it's smaller","date":"2012-05-10T15:31:33.240Z","type":"message"}
{"nick":"mjr_","reason":"Ping timeout: 245 seconds","date":"2012-05-10T15:31:36.370Z","type":"quit"}
{"nick":"mjr__","new_nick":"mjr_","date":"2012-05-10T15:31:36.595Z","type":"nick"}
{"nick":"bnoordhuis","message":"but it'll probably break more than it prevents from breaking","date":"2012-05-10T15:32:30.438Z","type":"message"}
{"nick":"bnoordhuis","message":"or maybe not, but it's quite ugly","date":"2012-05-10T15:32:54.935Z","type":"message"}
{"nick":"piscisaureus_","message":"sure","date":"2012-05-10T15:36:08.819Z","type":"message"}
{"nick":"piscisaureus_","message":"do whatever","date":"2012-05-10T15:36:10.388Z","type":"message"}
{"nick":"bnoordhuis","message":"i will do whatever","date":"2012-05-10T15:36:22.584Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I am going to rush out the refcount refactor for windows","date":"2012-05-10T15:36:47.234Z","type":"message"}
{"nick":"bnoordhuis","message":"good","date":"2012-05-10T15:36:51.613Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: btw I don't really see the point of keeping an *active* watcher list","date":"2012-05-10T15:36:59.584Z","type":"message"}
{"nick":"bnoordhuis","message":"it's useful for debugging","date":"2012-05-10T15:38:30.463Z","type":"message"}
{"nick":"erickt","date":"2012-05-10T15:38:30.910Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: yeah but it seems better to just keep a list of *all* handles","date":"2012-05-10T15:38:49.678Z","type":"message"}
{"nick":"AvianFlu","date":"2012-05-10T15:38:59.183Z","type":"join"}
{"nick":"bnoordhuis","message":"sure, that would work too","date":"2012-05-10T15:39:13.134Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_, TooTallNate, bnoordhuis, igorzi, indutny: reminder, skype in 0:20 ","date":"2012-05-10T15:40:54.939Z","type":"message"}
{"nick":"TooTallNate","message":"yup yup","date":"2012-05-10T15:41:06.881Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: yep, I'll try to make it. It's right after our standup","date":"2012-05-10T15:41:08.332Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2012-05-10T15:41:12.703Z","type":"message"}
{"nick":"isaacs","message":"it's right before mine.  that's why i like when it goes long.","date":"2012-05-10T15:41:32.705Z","type":"message"}
{"nick":"piscisaureus_","message":"ah crap I also have to review igor's patch","date":"2012-05-10T15:41:45.220Z","type":"message"}
{"nick":"indutny","message":"isaacs: 0:20 what time, PST?","date":"2012-05-10T15:44:02.662Z","type":"message"}
{"nick":"isaacs","message":"indutny: i mean, \"in 20 minutes\"","date":"2012-05-10T15:44:14.114Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2012-05-10T15:44:16.969Z","type":"message"}
{"nick":"rendar","date":"2012-05-10T15:44:22.137Z","type":"join"}
{"nick":"isaacs","message":"indutny: 17 now :)","date":"2012-05-10T15:44:22.909Z","type":"message"}
{"nick":"indutny","message":"hahaha :D","date":"2012-05-10T15:44:26.601Z","type":"message"}
{"nick":"isaacs","message":"or however long it takes for teh c9 standup to finish","date":"2012-05-10T15:44:32.439Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-05-10T15:45:30.271Z","type":"quit"}
{"nick":"indutny","message":"guys, call in 13 minutes","date":"2012-05-10T15:48:32.074Z","type":"message"}
{"nick":"indutny","message":":D","date":"2012-05-10T15:48:37.662Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm going to piggyback on the next_watcher","date":"2012-05-10T15:49:04.438Z","type":"message"}
{"nick":"loladiro","date":"2012-05-10T15:56:28.964Z","type":"join"}
{"nick":"c4milo","new_nick":"c4milo|meeting","date":"2012-05-10T16:00:06.412Z","type":"nick"}
{"nick":"bnoordhuis","message":"call?","date":"2012-05-10T16:00:10.773Z","type":"message"}
{"nick":"indutny","message":"in 1 minute","date":"2012-05-10T16:00:28.941Z","type":"message"}
{"nick":"indutny","message":":D","date":"2012-05-10T16:00:29.649Z","type":"message"}
{"nick":"indutny","message":"well, now","date":"2012-05-10T16:00:36.442Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-05-10T16:00:39.197Z","type":"quit"}
{"nick":"isaacs","message":"bnoordhuis: sign into skype","date":"2012-05-10T16:01:22.172Z","type":"message"}
{"nick":"bnoordhuis","message":"i am, i have","date":"2012-05-10T16:01:33.844Z","type":"message"}
{"nick":"bulatshakirzyano","date":"2012-05-10T16:05:20.686Z","type":"join"}
{"nick":"benvie","date":"2012-05-10T16:06:35.844Z","type":"quit"}
{"nick":"mikeal","date":"2012-05-10T16:06:37.057Z","type":"join"}
{"nick":"dap","date":"2012-05-10T16:08:16.963Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-05-10T16:08:26.676Z","type":"quit"}
{"nick":"c4milo|meeting","reason":"Remote host closed the connection","date":"2012-05-10T16:11:57.552Z","type":"quit"}
{"nick":"orlandovftw","date":"2012-05-10T16:12:35.946Z","type":"join"}
{"nick":"orlandovftw","reason":"Client Quit","date":"2012-05-10T16:12:41.096Z","type":"quit"}
{"nick":"orlandovftw","date":"2012-05-10T16:13:01.986Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-05-10T16:13:53.917Z","type":"join"}
{"nick":"piscisaureus_","message":"isaacs: i'm back","date":"2012-05-10T16:14:13.828Z","type":"message"}
{"nick":"mmalecki","reason":"Quit: leaving","date":"2012-05-10T16:26:01.229Z","type":"quit"}
{"nick":"bulatshakirzyano","reason":"Quit: Computer has gone to sleep.","date":"2012-05-10T16:31:34.067Z","type":"quit"}
{"nick":"igorzi","message":"indutny: hey, can you point me to your unix implementation of stdio in libuv?","date":"2012-05-10T16:36:01.749Z","type":"message"}
{"nick":"indutny","message":"igorzi: yep, one moment","date":"2012-05-10T16:37:28.941Z","type":"message"}
{"nick":"indutny","message":"igorzi: https://github.com/joyent/libuv/pull/413","date":"2012-05-10T16:37:43.153Z","type":"message"}
{"nick":"philips","reason":"Excess Flood","date":"2012-05-10T16:49:52.685Z","type":"quit"}
{"nick":"philips","date":"2012-05-10T16:50:56.420Z","type":"join"}
{"nick":"piscisaureus_","message":"igorzi: so your patch looks good to me. There are some conceptual \"issues\" with it but not much that should stop you from landing it.","date":"2012-05-10T16:56:49.425Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: The only exception is the \\\\?\\ vs \\??\\ issue, because in node we make paths start with \\\\?\\ so that would break.","date":"2012-05-10T16:56:49.626Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: yep, i'll get that fixed","date":"2012-05-10T16:57:57.187Z","type":"message"}
{"nick":"TooTallNate","message":"indutny: i didn't get very far on tests for stdio, but feel free to use: https://github.com/TooTallNate/node/compare/cp_stdio","date":"2012-05-10T17:01:37.162Z","type":"message"}
{"nick":"indutny","message":"TooTallNate: ok, will do! thank you","date":"2012-05-10T17:01:50.159Z","type":"message"}
{"nick":"erickt","reason":"Quit: erickt","date":"2012-05-10T17:02:51.042Z","type":"quit"}
{"nick":"TooTallNate","message":"sure thing","date":"2012-05-10T17:03:36.602Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: so if we do get a long path (that starts with \"\\\\?\\\") - we need to strip \"\\\\?\\\" and prepend \"\\??\\\"","date":"2012-05-10T17:05:04.564Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: yeah","date":"2012-05-10T17:05:27.084Z","type":"message"}
{"nick":"piscisaureus_","message":"igorzi: sounds like easy huh :-)","date":"2012-05-10T17:05:33.138Z","type":"message"}
{"nick":"erickt","date":"2012-05-10T17:10:09.850Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: hey... yt?","date":"2012-05-10T17:12:21.981Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: ho... ih","date":"2012-05-10T17:12:31.645Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: can you explain tim how to merge mozilla-central into smjs","date":"2012-05-10T17:12:50.511Z","type":"message"}
{"nick":"bnoordhuis","message":"oh god","date":"2012-05-10T17:13:00.309Z","type":"message"}
{"nick":"bnoordhuis","message":"that task is not for the faint of heart","date":"2012-05-10T17:13:07.007Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: http://piscisaureus.no.de/luvmonkey/latest","date":"2012-05-10T17:13:14.937Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-05-10T17:17:01.297Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus_: what's \\??\\ vs \\\\?\\ mean?","date":"2012-05-10T17:18:38.071Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: \\\\?\\ means unparsed path :-)","date":"2012-05-10T17:18:51.095Z","type":"message"}
{"nick":"isaacs","message":"so what does \\??\\ mean?","date":"2012-05-10T17:19:08.186Z","type":"message"}
{"nick":"indutny","message":"isaacs: some random windows crap","date":"2012-05-10T17:19:11.725Z","type":"message"}
{"nick":"indutny","message":":D","date":"2012-05-10T17:19:12.919Z","type":"message"}
{"nick":"indutny","message":"It's a named pipes, right?","date":"2012-05-10T17:19:19.624Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: \\\\?\\ allows paths longer than 256 characters","date":"2012-05-10T17:19:26.717Z","type":"message"}
{"nick":"indutny","message":"oooh","date":"2012-05-10T17:19:33.741Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: right","date":"2012-05-10T17:19:34.603Z","type":"message"}
{"nick":"isaacs","message":"yeah, i'm familiar with \\\\?\\ because that broken npm in the early days of 0.6","date":"2012-05-10T17:19:44.973Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: node handles that automatically because npm creates these vast pathes sometimes","date":"2012-05-10T17:19:47.477Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2012-05-10T17:19:51.917Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: a names pipe is \\\\.\\pipe :-)","date":"2012-05-10T17:20:00.525Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: \\??\\ is kinda oddball","date":"2012-05-10T17:20:09.621Z","type":"message"}
{"nick":"indutny","message":"yeah, I see now","date":"2012-05-10T17:20:15.219Z","type":"message"}
{"nick":"piscisaureus_","message":"I think it's an NT namespace or something","date":"2012-05-10T17:20:19.355Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: well, it doesn't help that some windows users run npm in C:\\Documents and Settings\\User Name\\Documents\\Programming\\Projects\\my-project","date":"2012-05-10T17:20:28.185Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: instead of /home/username/projects/my-project as god intended","date":"2012-05-10T17:20:41.688Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: hah, that's only on xp","date":"2012-05-10T17:20:58.110Z","type":"message"}
{"nick":"isaacs","message":"yeah, it's C:\\Users\\ now","date":"2012-05-10T17:21:11.339Z","type":"message"}
{"nick":"isaacs","message":"but yeah, 256 chars is way too restrictive","date":"2012-05-10T17:21:22.545Z","type":"message"}
{"nick":"isaacs","message":"even running `vcbuild test` in c:\\node-v0.6.17\\ ends up creating files over that limit","date":"2012-05-10T17:22:11.208Z","type":"message"}
{"nick":"isaacs","message":"so \\??\\ is a named pipe?","date":"2012-05-10T17:22:42.639Z","type":"message"}
{"nick":"bnoordhuis","message":"just you wait until the cp/m port is done","date":"2012-05-10T17:22:43.933Z","type":"message"}
{"nick":"bnoordhuis","message":"8 chars is all you get","date":"2012-05-10T17:22:59.181Z","type":"message"}
{"nick":"indutny","message":"nono","date":"2012-05-10T17:23:33.101Z","type":"message"}
{"nick":"indutny","message":"isaacs: http://msdn.microsoft.com/en-us/library/windows/desktop/aa365783(v=vs.85).aspx","date":"2012-05-10T17:23:54.395Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: a named pipe is \\\\.\\pipe\\","date":"2012-05-10T17:24:01.304Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: \\??\\ is really oddball weird","date":"2012-05-10T17:24:10.922Z","type":"message"}
{"nick":"piscisaureus_","message":"it's basically just some prefix that we have to add to a path to make junctions work","date":"2012-05-10T17:24:45.184Z","type":"message"}
{"nick":"indutny","message":"oh crap","date":"2012-05-10T17:26:13.897Z","type":"message"}
{"nick":"mjr_","message":"isaacs: we are running it now on two machines.  I haven't checked the logs.","date":"2012-05-10T17:30:18.953Z","type":"message"}
{"nick":"isaacs","message":"man, windows is so crazy!","date":"2012-05-10T17:30:59.477Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus_: do you think we need to handle a case if someone hands us a path that starts with \"\\??\\\" ?","date":"2012-05-10T17:33:17.826Z","type":"message"}
{"nick":"mikeal","date":"2012-05-10T17:35:07.627Z","type":"join"}
{"nick":"ljackson","reason":"Read error: Operation timed out","date":"2012-05-10T17:36:02.428Z","type":"quit"}
{"nick":"perezd","date":"2012-05-10T17:46:28.163Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus_: https://github.com/bnoordhuis/libuv/commit/580deb1 <- wip that seems to work well","date":"2012-05-10T17:51:22.700Z","type":"message"}
{"nick":"bnoordhuis","action":"sneaks off to the dining table","date":"2012-05-10T17:51:33.646Z","type":"action"}
{"nick":"brson","date":"2012-05-10T17:55:00.988Z","type":"join"}
{"nick":"felixge","date":"2012-05-10T17:59:55.161Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-05-10T17:59:55.396Z","type":"quit"}
{"nick":"felixge","date":"2012-05-10T17:59:55.600Z","type":"join"}
{"nick":"avalanche123","reason":"Quit: Textual IRC Client: http://www.textualapp.com/","date":"2012-05-10T18:01:23.931Z","type":"quit"}
{"nick":"avalanche123","date":"2012-05-10T18:17:42.162Z","type":"join"}
{"nick":"mmalecki","date":"2012-05-10T18:26:44.137Z","type":"join"}
{"nick":"ryah_","message":"DrPizza: yes im in london","date":"2012-05-10T18:33:26.211Z","type":"message"}
{"nick":"DrPizza","message":"huh","date":"2012-05-10T18:33:33.115Z","type":"message"}
{"nick":"DrPizza","message":"me too!","date":"2012-05-10T18:33:34.154Z","type":"message"}
{"nick":"ryah_","message":"we should meet :)","date":"2012-05-10T18:33:44.587Z","type":"message"}
{"nick":"DrPizza","message":"how long are you in town for?","date":"2012-05-10T18:33:51.089Z","type":"message"}
{"nick":"ryah_","message":"for 5 days","date":"2012-05-10T18:34:02.061Z","type":"message"}
{"nick":"DrPizza","message":"ok brb ","date":"2012-05-10T18:34:12.750Z","type":"message"}
{"nick":"ryah_","message":"do you have my email address?","date":"2012-05-10T18:34:31.380Z","type":"message"}
{"nick":"ryah_","message":"ry@tinyclouds.org","date":"2012-05-10T18:34:51.725Z","type":"message"}
{"nick":"indutny","message":"ryah_: are you going to visit Russia too? :)","date":"2012-05-10T18:35:03.909Z","type":"message"}
{"nick":"ryah_","message":"i have to run at the moment","date":"2012-05-10T18:35:06.567Z","type":"message"}
{"nick":"indutny","message":"ryah_: seems like you're traveling a lot","date":"2012-05-10T18:35:11.441Z","type":"message"}
{"nick":"mattpardee_","date":"2012-05-10T18:35:49.438Z","type":"join"}
{"nick":"mmalecki","message":"ryah_: and Poland?","date":"2012-05-10T18:36:18.836Z","type":"message"}
{"nick":"ryah_","message":"indutny: unfoetunatly not","date":"2012-05-10T18:36:51.680Z","type":"message"}
{"nick":"indutny","message":"ryah_: oh, ok then","date":"2012-05-10T18:37:03.011Z","type":"message"}
{"nick":"ryah_","message":"also on my pjone and slightly drunk... so spelling is bad","date":"2012-05-10T18:37:23.620Z","type":"message"}
{"nick":"ryah_","message":"ok must go. cheery-o","date":"2012-05-10T18:37:38.993Z","type":"message"}
{"nick":"indutny","message":":D","date":"2012-05-10T18:37:58.571Z","type":"message"}
{"nick":"DrPizza","message":"ryah_: are you on holiday or working?","date":"2012-05-10T18:41:11.753Z","type":"message"}
{"nick":"indutny","message":"DrPizza: I think ryah_ is practicing slippy-fingers-typing","date":"2012-05-10T18:42:09.726Z","type":"message"}
{"nick":"DrPizza","message":"always an important and valuable skill","date":"2012-05-10T18:42:19.168Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-05-10T18:43:55.057Z","type":"message"}
{"nick":"felixge","reason":"Ping timeout: 260 seconds","date":"2012-05-10T18:48:31.961Z","type":"quit"}
{"nick":"TooTallNate","message":"isaacs: so this is 99% working https://github.com/TooTallNate/node/commit/throw-call-sites","date":"2012-05-10T18:49:32.206Z","type":"message"}
{"nick":"TooTallNate","message":"the only one that doesn't work is test/message/stack_overflow.js","date":"2012-05-10T18:49:46.607Z","type":"message"}
{"nick":"TooTallNate","message":"but i'm not entirely sure why (yet)","date":"2012-05-10T18:49:55.617Z","type":"message"}
{"nick":"mraleph","date":"2012-05-10T18:50:19.619Z","type":"join"}
{"nick":"TooTallNate","message":"isaacs: i get output like this instead:","date":"2012-05-10T18:50:25.964Z","type":"message"}
{"nick":"TooTallNate","message":" /Users/nrajlich/node/test/message/stack_overflow.js:0","date":"2012-05-10T18:50:33.319Z","type":"message"}
{"nick":"TooTallNate","message":"(function (exports, require, module, __filename, __dirname) { // Copyright Joy","date":"2012-05-10T18:50:33.522Z","type":"message"}
{"nick":"TooTallNate","message":"^","date":"2012-05-10T18:50:33.719Z","type":"message"}
{"nick":"TooTallNate","message":"RangeError: Maximum call stack size exceeded","date":"2012-05-10T18:50:33.719Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: same here","date":"2012-05-10T18:51:02.435Z","type":"message"}
{"nick":"isaacs","message":"but it's even worse without felixge's patches","date":"2012-05-10T18:51:09.504Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: where does that module wrapper come into play?","date":"2012-05-10T18:51:22.813Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: you saw this? https://github.com/isaacs/node/compare/v0.6-merge","date":"2012-05-10T18:51:26.955Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: sorry, i meant to send you that before","date":"2012-05-10T18:51:37.482Z","type":"message"}
{"nick":"isaacs","message":"but it sounds like you're basically already caught up with it","date":"2012-05-10T18:51:51.293Z","type":"message"}
{"nick":"TooTallNate","message":"oh, hah","date":"2012-05-10T18:51:51.755Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: it's defined in lib/module.js i believe","date":"2012-05-10T18:52:07.248Z","type":"message"}
{"nick":"mmalecki_","date":"2012-05-10T18:52:09.421Z","type":"join"}
{"nick":"mmalecki","reason":"Read error: Connection reset by peer","date":"2012-05-10T18:52:56.126Z","type":"quit"}
{"nick":"TooTallNate","message":"isaacs: found it: src/node.js:567","date":"2012-05-10T18:54:39.144Z","type":"message"}
{"nick":"isaacs","message":"oh, right, there","date":"2012-05-10T18:54:49.846Z","type":"message"}
{"nick":"TooTallNate","message":"but i don't get why there's a difference","date":"2012-05-10T18:54:59.210Z","type":"message"}
{"nick":"mmalecki_","reason":"Client Quit","date":"2012-05-10T18:55:20.149Z","type":"quit"}
{"nick":"isaacs","message":"yeah, it's losing a frame for some reason","date":"2012-05-10T18:55:24.311Z","type":"message"}
{"nick":"mmalecki","date":"2012-05-10T18:55:27.586Z","type":"join"}
{"nick":"isaacs","message":"or, rather, the line number comes back as 0","date":"2012-05-10T18:55:30.401Z","type":"message"}
{"nick":"TooTallNate","message":"ya","date":"2012-05-10T18:56:01.947Z","type":"message"}
{"nick":"orlandovftw","reason":"Quit: leaving","date":"2012-05-10T19:00:05.278Z","type":"quit"}
{"nick":"paddybyers","date":"2012-05-10T19:01:26.956Z","type":"join"}
{"nick":"mattpardee_","reason":"Quit: Textual IRC Client: http://www.textualapp.com/","date":"2012-05-10T19:11:48.329Z","type":"quit"}
{"nick":"mattpardee_","date":"2012-05-10T19:14:26.072Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 260 seconds","date":"2012-05-10T19:16:54.859Z","type":"quit"}
{"nick":"loladiro","date":"2012-05-10T19:18:14.033Z","type":"join"}
{"nick":"brson","date":"2012-05-10T19:18:35.205Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 260 seconds","date":"2012-05-10T19:18:51.956Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T19:20:24.790Z","type":"join"}
{"nick":"loladiro","reason":"Read error: Connection reset by peer","date":"2012-05-10T19:24:36.233Z","type":"quit"}
{"nick":"loladiro","date":"2012-05-10T19:25:16.825Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 245 seconds","date":"2012-05-10T19:30:14.698Z","type":"quit"}
{"nick":"mjr_","reason":"Ping timeout: 245 seconds","date":"2012-05-10T19:36:29.633Z","type":"quit"}
{"nick":"mjr_","date":"2012-05-10T19:43:20.927Z","type":"join"}
{"nick":"ljackson","date":"2012-05-10T19:48:11.213Z","type":"join"}
{"nick":"orlandovftw","date":"2012-05-10T19:57:24.010Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 240 seconds","date":"2012-05-10T20:03:47.067Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T20:04:26.609Z","type":"join"}
{"nick":"TheJH","reason":"Ping timeout: 260 seconds","date":"2012-05-10T20:06:43.971Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-05-10T20:07:31.294Z","type":"join"}
{"nick":"mmalecki","reason":"Read error: Connection reset by peer","date":"2012-05-10T20:20:05.973Z","type":"quit"}
{"nick":"TooTallNate","message":"isaacs: if i try/catch the call stack error, err.stack is undefined...","date":"2012-05-10T20:25:19.236Z","type":"message"}
{"nick":"mmalecki","date":"2012-05-10T20:29:06.483Z","type":"join"}
{"nick":"isaacs","message":"TooTallNate: right, buecasue RangeErrors have no stack","date":"2012-05-10T20:31:45.633Z","type":"message"}
{"nick":"mmalecki","reason":"Quit: Reconnecting","date":"2012-05-10T20:35:09.534Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T20:35:17.091Z","type":"join"}
{"nick":"c4milo|meeting","date":"2012-05-10T20:36:21.152Z","type":"join"}
{"nick":"avalanche123","reason":"Ping timeout: 245 seconds","date":"2012-05-10T20:37:28.175Z","type":"quit"}
{"nick":"avalanche123","date":"2012-05-10T20:39:19.503Z","type":"join"}
{"nick":"c4milo|meeting","reason":"Remote host closed the connection","date":"2012-05-10T20:43:21.058Z","type":"quit"}
{"nick":"TooTallNate","message":"isaacs: well hmm, i'm guessing the discrepancy with this last one is just because of the difference in V8 versions","date":"2012-05-10T20:43:29.173Z","type":"message"}
{"nick":"TooTallNate","message":"maybe even a bug","date":"2012-05-10T20:43:33.947Z","type":"message"}
{"nick":"felixge","date":"2012-05-10T20:49:47.151Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-05-10T20:49:47.351Z","type":"quit"}
{"nick":"felixge","date":"2012-05-10T20:49:47.351Z","type":"join"}
{"nick":"isaacs","message":"TooTallNate: ok, that's fair.","date":"2012-05-10T20:52:32.186Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: i did see a few cases in my v6-merge branch at least, where it seemed to be printing out two error lines","date":"2012-05-10T20:53:05.998Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: really? like for what?","date":"2012-05-10T20:53:32.186Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: now i can't remember..","date":"2012-05-10T20:54:00.854Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: it was in some oddball crash that was also throwing in my domain.on('error') handler","date":"2012-05-10T20:54:21.853Z","type":"message"}
{"nick":"mjr_","message":"isaacs: you guys get anywhere with this annoying this?  Uncaught exception: TypeError: Property 'onIncoming' of object #<HTTPParser> is not a function","date":"2012-05-10T20:55:15.512Z","type":"message"}
{"nick":"mjr_","message":"It's happening a lot.  I can't tell if leaking memory is better, but it might be.","date":"2012-05-10T20:55:39.154Z","type":"message"}
{"nick":"isaacs","message":"mjr_: is it still happening with thatpatch?","date":"2012-05-10T20:56:31.271Z","type":"message"}
{"nick":"mjr_","message":"yes, I'm comparing error rates now, and they look the same for machines with the patch and those without","date":"2012-05-10T20:56:49.498Z","type":"message"}
{"nick":"isaacs","message":"mjr_: ok, then it's a different thing.","date":"2012-05-10T20:57:12.166Z","type":"message"}
{"nick":"mjr_","message":"isaacs: it's interesting that this is happening in two different processes.  They are both the ones that handle the media streams.","date":"2012-05-10T20:58:03.606Z","type":"message"}
{"nick":"mjr_","message":"It's got to be some odd condition related to aborting connections.","date":"2012-05-10T20:58:36.964Z","type":"message"}
{"nick":"mjr_","message":"isaacs: I'm tempted to patch this to have it ignore the data of onIncoming is null, but I'm guessing it'll leak something, and then we won't be as likely to fix it.","date":"2012-05-10T21:00:56.605Z","type":"message"}
{"nick":"isaacs","message":"mjr_: so, there's actually only one place where we call onIncoming","date":"2012-05-10T21:02:38.682Z","type":"message"}
{"nick":"isaacs","message":"mjr_: but two places where we set it, one for server and the other for client","date":"2012-05-10T21:02:50.242Z","type":"message"}
{"nick":"mjr_","message":"Would it help if you knew which one it used to be?","date":"2012-05-10T21:03:12.046Z","type":"message"}
{"nick":"isaacs","message":"mjr_: and, when we set it for a client, we do so in a nextTick","date":"2012-05-10T21:03:41.372Z","type":"message"}
{"nick":"isaacs","message":"so... there is exactly one tick where it's still null.","date":"2012-05-10T21:03:52.032Z","type":"message"}
{"nick":"isaacs","message":"can i test a hypothesis?","date":"2012-05-10T21:04:01.957Z","type":"message"}
{"nick":"mjr_","message":"test that shit","date":"2012-05-10T21:04:10.273Z","type":"message"}
{"nick":"mjr_","message":"I can open my lab to your testing","date":"2012-05-10T21:04:21.792Z","type":"message"}
{"nick":"isaacs","message":"mjr_: (also, yes, that would be useful, but i have a hypothesis about which one it is)","date":"2012-05-10T21:04:22.866Z","type":"message"}
{"nick":"isaacs","message":"one sec.","date":"2012-05-10T21:04:25.424Z","type":"message"}
{"nick":"mjr_","message":"OK.  I'm going to eat a chicken pot pie now, but I'll be nearby.","date":"2012-05-10T21:04:47.157Z","type":"message"}
{"nick":"isaacs","message":"running make test now to see if what i'm suggesting is even possible","date":"2012-05-10T21:04:48.020Z","type":"message"}
{"nick":"isaacs","message":"mjr_: i'm gonna run out and get tacos","date":"2012-05-10T21:05:29.829Z","type":"message"}
{"nick":"isaacs","message":"mjr_: but i'll be back son.","date":"2012-05-10T21:05:35.875Z","type":"message"}
{"nick":"isaacs","message":"*soon","date":"2012-05-10T21:05:37.069Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs is now a priest","date":"2012-05-10T21:06:01.059Z","type":"message"}
{"nick":"isaacs","message":"mjr_: ok, that broke all kinds of shit.","date":"2012-05-10T21:06:45.049Z","type":"message"}
{"nick":"isaacs","message":"mjr_: i need food.  i'll try again after lunch","date":"2012-05-10T21:06:55.401Z","type":"message"}
{"nick":"creationix","message":"mjr_, quick question, about how many https requests does your cluster handle in a typical day? or can you day","date":"2012-05-10T21:12:04.561Z","type":"message"}
{"nick":"creationix","message":"*can you say","date":"2012-05-10T21:12:21.081Z","type":"message"}
{"nick":"mjr_","message":"Let me check","date":"2012-05-10T21:12:31.578Z","type":"message"}
{"nick":"mjr_","message":"170M https requests / day, but that's request, not necessarily connection.","date":"2012-05-10T21:13:12.774Z","type":"message"}
{"nick":"mjr_","message":"Most clients open one connection and keep it open for a long time.","date":"2012-05-10T21:13:31.102Z","type":"message"}
{"nick":"mjr_","message":"We are almost about to move everything over to HTTPS, which is going to be exciting.","date":"2012-05-10T21:13:44.442Z","type":"message"}
{"nick":"creationix","message":"ok, so the guy wanting 900,000,000/day is doing something really huge or has estimating problems","date":"2012-05-10T21:13:57.242Z","type":"message"}
{"nick":"tjfontaine","message":"delusions of granduer","date":"2012-05-10T21:14:12.805Z","type":"message"}
{"nick":"mjr_","message":"I think we do more like 2B requests / day, but only 170M of them are HTTPS.","date":"2012-05-10T21:14:43.027Z","type":"message"}
{"nick":"creationix","message":"ahh, I thought it was all https","date":"2012-05-10T21:15:38.373Z","type":"message"}
{"nick":"mjr_","message":"After we switch to all HTTPS, then that's going to be 2B HTTPS / day.","date":"2012-05-10T21:15:43.332Z","type":"message"}
{"nick":"creationix","message":"still that's a ton of traffic either way","date":"2012-05-10T21:15:46.475Z","type":"message"}
{"nick":"mjr_","message":"HTTPS is really brittle in node right now, unfortunately.","date":"2012-05-10T21:15:57.907Z","type":"message"}
{"nick":"mmalecki","reason":"Ping timeout: 252 seconds","date":"2012-05-10T21:27:44.198Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T21:37:02.625Z","type":"join"}
{"nick":"mmalecki","reason":"Client Quit","date":"2012-05-10T21:40:34.112Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T21:41:56.241Z","type":"join"}
{"nick":"CoverSlide","reason":"Read error: Connection reset by peer","date":"2012-05-10T21:43:11.132Z","type":"quit"}
{"nick":"CoverSli1e","date":"2012-05-10T21:43:15.403Z","type":"join"}
{"nick":"CoverSli1e","reason":"Read error: Connection reset by peer","date":"2012-05-10T21:43:46.942Z","type":"quit"}
{"nick":"piscisaureus_","message":"bnoordhuis: hey, yt?","date":"2012-05-10T21:43:48.626Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I have a question about how these common methods are supposed to work?","date":"2012-05-10T21:44:01.200Z","type":"message"}
{"nick":"piscisaureus_","message":"s/\\?//","date":"2012-05-10T21:44:08.448Z","type":"message"}
{"nick":"CoverSlide","date":"2012-05-10T21:48:15.330Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 260 seconds","date":"2012-05-10T21:48:36.684Z","type":"quit"}
{"nick":"felixge","reason":"Quit: felixge","date":"2012-05-10T21:50:17.059Z","type":"quit"}
{"nick":"mmalecki","date":"2012-05-10T21:52:23.245Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-05-10T22:01:40.021Z","type":"quit"}
{"nick":"ircretary","reason":"Ping timeout: 260 seconds","date":"2012-05-10T22:12:50.483Z","type":"quit"}
{"nick":"bnoordhuis","message":"piscisaureus_: ih","date":"2012-05-10T22:13:42.284Z","type":"message"}
{"nick":"bnoordhuis","message":"what common methods?","date":"2012-05-10T22:13:50.392Z","type":"message"}
{"nick":"piscisaureus_","message":"uv__handle_start","date":"2012-05-10T22:13:57.016Z","type":"message"}
{"nick":"piscisaureus_","message":"etc","date":"2012-05-10T22:13:58.521Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: a handle is considered active when there's an active request, right?","date":"2012-05-10T22:14:39.195Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: or not?","date":"2012-05-10T22:14:42.295Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: active request or reading","date":"2012-05-10T22:15:25.725Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: exactly","date":"2012-05-10T22:15:39.762Z","type":"message"}
{"nick":"bnoordhuis","message":"more aptly worded, reading or writing","date":"2012-05-10T22:15:42.443Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: so how do you decide whether to call uv__handle_stop when a write req comes back?","date":"2012-05-10T22:16:07.868Z","type":"message"}
{"nick":"paddybyers_","date":"2012-05-10T22:16:57.211Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus_: by checking if the write queue is empty, off the top of my head","date":"2012-05-10T22:17:00.363Z","type":"message"}
{"nick":"piscisaureus_","message":"hmm ok","date":"2012-05-10T22:17:12.415Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: so no magic want that does it all :-)","date":"2012-05-10T22:17:23.774Z","type":"message"}
{"nick":"piscisaureus_","message":"*wand","date":"2012-05-10T22:17:37.435Z","type":"message"}
{"nick":"piscisaureus_","message":"hmm","date":"2012-05-10T22:17:40.568Z","type":"message"}
{"nick":"piscisaureus_","message":"painful","date":"2012-05-10T22:17:41.720Z","type":"message"}
{"nick":"bnoordhuis","message":"is it?","date":"2012-05-10T22:18:01.875Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2012-05-10T22:18:08.311Z","type":"message"}
{"nick":"piscisaureus_","message":"on uv-win we're not really very consistent in these things","date":"2012-05-10T22:18:24.743Z","type":"message"}
{"nick":"piscisaureus_","message":"on windows it would be active if","date":"2012-05-10T22:19:25.043Z","type":"message"}
{"nick":"piscisaureus_","message":"(tcp->flags & (UV_HANDLE_READING | UV_HANDLE_SHUTTING | UV_HANDLE_LISTENING) || tcp->active_reqs > 0)","date":"2012-05-10T22:19:25.243Z","type":"message"}
{"nick":"paddybyers","reason":"Ping timeout: 260 seconds","date":"2012-05-10T22:19:43.952Z","type":"quit"}
{"nick":"paddybyers_","new_nick":"paddybyers","date":"2012-05-10T22:19:44.569Z","type":"nick"}
{"nick":"bnoordhuis","message":"piscisaureus_: that's not so bad, is it? it almost fits on a single line","date":"2012-05-10T22:20:20.801Z","type":"message"}
{"nick":"piscisaureus_","message":":-p","date":"2012-05-10T22:20:28.054Z","type":"message"}
{"nick":"piscisaureus_","message":"now I have to dig that up from memory for all handle types","date":"2012-05-10T22:20:37.152Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I am not surprised this was painful for you","date":"2012-05-10T22:20:45.482Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: so, how does uv_ref(handle) work","date":"2012-05-10T22:21:00.449Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: how does it know whether to increment the loop refcount?","date":"2012-05-10T22:21:15.134Z","type":"message"}
{"nick":"piscisaureus_","message":"oh hmm nvm that should be easy","date":"2012-05-10T22:21:21.047Z","type":"message"}
{"nick":"piscisaureus_","message":":-op","date":"2012-05-10T22:21:22.640Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: it maintains a flag in handle->flags","date":"2012-05-10T22:21:30.006Z","type":"message"}
{"nick":"piscisaureus_","message":"ah","date":"2012-05-10T22:21:43.936Z","type":"message"}
{"nick":"piscisaureus_","message":"headache","date":"2012-05-10T22:21:48.568Z","type":"message"}
{"nick":"bnoordhuis","message":"so it knows when the handle is already ref'd","date":"2012-05-10T22:21:48.765Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, you're out of bits, aren't you? :)","date":"2012-05-10T22:21:59.831Z","type":"message"}
{"nick":"piscisaureus_","message":"yep\\","date":"2012-05-10T22:22:14.463Z","type":"message"}
{"nick":"piscisaureus_","message":"well I cut one lately","date":"2012-05-10T22:22:20.274Z","type":"message"}
{"nick":"piscisaureus_","message":"I suppose I could also cut UV_HANDLE_CLOSED but it's kinda nice to use it for assertions","date":"2012-05-10T22:22:32.057Z","type":"message"}
{"nick":"piscisaureus_","message":"so people don't uv_close the same handle twice","date":"2012-05-10T22:22:38.980Z","type":"message"}
{"nick":"piscisaureus_","message":"but strictly speaking it's not needed","date":"2012-05-10T22:22:44.494Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I am also going to need an UV_HANDLE_INTERNAL so uv_walk won't show people handles that are unknown to them","date":"2012-05-10T22:23:27.133Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I suppose you don't have internal handles in unix because it's all ev","date":"2012-05-10T22:23:45.165Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, though that might change on linux","date":"2012-05-10T22:23:57.804Z","type":"message"}
{"nick":"bnoordhuis","message":"or maybe all unices","date":"2012-05-10T22:24:06.110Z","type":"message"}
{"nick":"piscisaureus_","message":"2 headaches now","date":"2012-05-10T22:24:09.343Z","type":"message"}
{"nick":"bnoordhuis","message":"i was thinking of abstracting ev_io away into uv_io","date":"2012-05-10T22:24:16.566Z","type":"message"}
{"nick":"bnoordhuis","message":"or uv__io as the case may be","date":"2012-05-10T22:24:23.779Z","type":"message"}
{"nick":"bnoordhuis","message":"that would let me reuse the bulk of the code in src/unix with minimum hassle","date":"2012-05-10T22:24:39.905Z","type":"message"}
{"nick":"pietern","date":"2012-05-10T22:25:03.256Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: uv_poll :-)","date":"2012-05-10T22:25:39.345Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, but it would have to a handle that's not user-visible","date":"2012-05-10T22:25:56.791Z","type":"message"}
{"nick":"bnoordhuis","message":"*have to be","date":"2012-05-10T22:26:01.710Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah, I see","date":"2012-05-10T22:26:02.330Z","type":"message"}
{"nick":"piscisaureus_","message":"ah I can cherry pick the removal uv UV_HANDLE_UV_ALLOCED","date":"2012-05-10T22:26:21.339Z","type":"message"}
{"nick":"piscisaureus_","message":"\\o/","date":"2012-05-10T22:26:23.544Z","type":"message"}
{"nick":"piscisaureus_","message":"Ah, nice, it might just fit :-)","date":"2012-05-10T22:29:08.130Z","type":"message"}
{"nick":"avalanche123","message":"bnoordhuis piscisaureus_ what do you think about splitting uv_fs_cb into separate callbacks? mich like uv_write_cb, uv_read_cb and uv_connect_cb work?","date":"2012-05-10T22:30:07.480Z","type":"message"}
{"nick":"avalanche123","message":"*much","date":"2012-05-10T22:30:30.401Z","type":"message"}
{"nick":"bnoordhuis","message":"avalanche123: to what purpose?","date":"2012-05-10T22:32:02.799Z","type":"message"}
{"nick":"avalanche123","message":"to make it more consistent","date":"2012-05-10T22:32:23.292Z","type":"message"}
{"nick":"bnoordhuis","message":"i need a better reason :)","date":"2012-05-10T22:33:03.967Z","type":"message"}
{"nick":"bnoordhuis","message":"what would it improve?","date":"2012-05-10T22:33:07.581Z","type":"message"}
{"nick":"avalanche123","message":"well right now you have one data structure, uv_fs_s that is used in callbacks for fs_stat and fs_read requests","date":"2012-05-10T22:34:06.075Z","type":"message"}
{"nick":"avalanche123","message":"function with the same signature could be used in both places","date":"2012-05-10T22:34:28.498Z","type":"message"}
{"nick":"avalanche123","message":"but it would go terribly wrong obviously if used in the wrong place","date":"2012-05-10T22:34:44.345Z","type":"message"}
{"nick":"avalanche123","message":"because callbacks are explicit for other events, you can't mix them","date":"2012-05-10T22:35:09.025Z","type":"message"}
{"nick":"avalanche123","message":"you can't use uv_write_cb where uv_connect_cb is expected","date":"2012-05-10T22:36:09.639Z","type":"message"}
{"nick":"avalanche123","message":"but there is no such api hinting in case of fs events","date":"2012-05-10T22:36:34.797Z","type":"message"}
{"nick":"avalanche123","message":"also will make writing bindings simpler","date":"2012-05-10T22:37:03.327Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't quite follow","date":"2012-05-10T22:37:07.321Z","type":"message"}
{"nick":"bnoordhuis","message":"what's the difficulty with fs_stat vs fs_read?","date":"2012-05-10T22:37:14.688Z","type":"message"}
{"nick":"avalanche123","message":"I have to inspect request to do what I want, with uv_read for example I get data as a function parameter","date":"2012-05-10T22:38:06.872Z","type":"message"}
{"nick":"avalanche123","message":"you could have callback functions that take relevant arguments instead of the same argument for every event","date":"2012-05-10T22:40:19.130Z","type":"message"}
{"nick":"avalanche123","message":"don't feel like I make much sense, do i?","date":"2012-05-10T22:41:03.631Z","type":"message"}
{"nick":"bnoordhuis","message":"well, you haven't convinced me yet :)","date":"2012-05-10T22:41:14.504Z","type":"message"}
{"nick":"bnoordhuis","message":"we do plan to turn some fs operations into streams some time in the future","date":"2012-05-10T22:41:29.195Z","type":"message"}
{"nick":"avalanche123","message":"why?","date":"2012-05-10T22:41:54.813Z","type":"message"}
{"nick":"bnoordhuis","message":"to make our lives easier","date":"2012-05-10T22:42:30.773Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: because right now stuff is dangerous in node","date":"2012-05-10T22:43:00.731Z","type":"message"}
{"nick":"bnoordhuis","message":"and to optimize use cases like streaming files from disk to e.g. a socket or a pipe","date":"2012-05-10T22:43:01.173Z","type":"message"}
{"nick":"avalanche123","message":"that makes sense","date":"2012-05-10T22:43:13.832Z","type":"message"}
{"nick":"avalanche123","message":"should also make it more consistent with tcp/udp/tty/pipes","date":"2012-05-10T22:43:45.105Z","type":"message"}
{"nick":"avalanche123","message":"I'm writing bindings for ruby like I said and file system api just didn't fit with the rest","date":"2012-05-10T22:44:10.666Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123:","date":"2012-05-10T22:44:13.870Z","type":"message"}
{"nick":"piscisaureus_","message":"fd = open('file1', 'w');","date":"2012-05-10T22:44:14.065Z","type":"message"}
{"nick":"piscisaureus_","message":"write(fd, 'hello')","date":"2012-05-10T22:44:14.065Z","type":"message"}
{"nick":"piscisaureus_","message":"close(fd)","date":"2012-05-10T22:44:14.066Z","type":"message"}
{"nick":"piscisaureus_","message":"fs = open('file2', 'w');","date":"2012-05-10T22:44:14.066Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- Avalanche: the \"hello\" write might inadvertedly end up in file2","date":"2012-05-10T22:44:14.620Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: most users that use the low level fs api are aware of the risks, but this is just inconvenient.","date":"2012-05-10T22:44:39.019Z","type":"message"}
{"nick":"avalanche123","message":"piscisaureus_ this is not related to libuv?","date":"2012-05-10T22:45:03.287Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: well libuv is to blame :-)","date":"2012-05-10T22:45:12.880Z","type":"message"}
{"nick":"avalanche123","message":"ok, so some internals of libuv make it risky?","date":"2012-05-10T22:45:32.468Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: it is fallout from the fact that we use a thread pool and fs operations can be arbitrarily reordered","date":"2012-05-10T22:45:34.242Z","type":"message"}
{"nick":"avalanche123","message":"ah","date":"2012-05-10T22:45:39.436Z","type":"message"}
{"nick":"avalanche123","message":"this makes a lot of sense now","date":"2012-05-10T22:45:54.971Z","type":"message"}
{"nick":"avalanche123","message":"so in your example, second open() might return the same fd int?","date":"2012-05-10T22:46:52.867Z","type":"message"}
{"nick":"avalanche123","message":"and mess up the wrong file as a result","date":"2012-05-10T22:47:02.174Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: yes. The unix api even mandates this :-)","date":"2012-05-10T22:47:04.614Z","type":"message"}
{"nick":"piscisaureus_","message":"api->spec","date":"2012-05-10T22:47:08.911Z","type":"message"}
{"nick":"avalanche123","message":"reuse of fds","date":"2012-05-10T22:47:18.927Z","type":"message"}
{"nick":"avalanche123","message":"nice","date":"2012-05-10T22:47:20.833Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, always return the lowest free file descriptor","date":"2012-05-10T22:47:37.398Z","type":"message"}
{"nick":"bnoordhuis","message":"sometimes convenient, sometimes not","date":"2012-05-10T22:47:50.961Z","type":"message"}
{"nick":"avalanche123","message":"right","date":"2012-05-10T22:48:00.108Z","type":"message"}
{"nick":"piscisaureus_","message":"the guarantee that FDs are low us useful in certain scenarios","date":"2012-05-10T22:48:15.011Z","type":"message"}
{"nick":"piscisaureus_","message":"but it defintely also makes bugs harder to catch","date":"2012-05-10T22:48:30.651Z","type":"message"}
{"nick":"avalanche123","message":"could you wait for all queued operations for an fd to complete by blocking open() call?","date":"2012-05-10T22:48:51.915Z","type":"message"}
{"nick":"avalanche123","message":"or is that too naive?","date":"2012-05-10T22:48:55.756Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: no we just ensure the the close() syscall not made until all reqs complete","date":"2012-05-10T22:49:28.398Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: and maybe there will be some other ordering constraints too","date":"2012-05-10T22:49:48.637Z","type":"message"}
{"nick":"avalanche123","message":"gotcha","date":"2012-05-10T22:49:52.671Z","type":"message"}
{"nick":"avalanche123","message":"so this forces to use a different fd in the second open()","date":"2012-05-10T22:50:06.688Z","type":"message"}
{"nick":"piscisaureus_","message":"yep","date":"2012-05-10T22:50:10.904Z","type":"message"}
{"nick":"avalanche123","message":"smart","date":"2012-05-10T22:50:22.339Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: there could be more constraints, too","date":"2012-05-10T22:50:37.306Z","type":"message"}
{"nick":"avalanche123","message":"my main problem is that I use ffi to make my ruby bindings right","date":"2012-05-10T22:50:50.134Z","type":"message"}
{"nick":"avalanche123","message":"so I don't resort to C","date":"2012-05-10T22:50:55.335Z","type":"message"}
{"nick":"avalanche123","message":"or would prefer not to","date":"2012-05-10T22:51:01.715Z","type":"message"}
{"nick":"piscisaureus_","message":"for example, to avoid issues with reordered writes we always use an explicit offset for writes (in the node high-level fs functions)","date":"2012-05-10T22:51:09.304Z","type":"message"}
{"nick":"avalanche123","message":"oh","date":"2012-05-10T22:51:44.548Z","type":"message"}
{"nick":"piscisaureus_","message":"but we could also just queue in libuv and solve it that way","date":"2012-05-10T22:51:56.106Z","type":"message"}
{"nick":"avalanche123","message":"I see","date":"2012-05-10T22:52:29.026Z","type":"message"}
{"nick":"avalanche123","message":"can you explain?","date":"2012-05-10T22:52:37.207Z","type":"message"}
{"nick":"avalanche123","message":"queue what?","date":"2012-05-10T22:52:39.323Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: well, consider","date":"2012-05-10T22:52:53.073Z","type":"message"}
{"nick":"piscisaureus_","message":"write(fd, \"hello\")","date":"2012-05-10T22:53:00.932Z","type":"message"}
{"nick":"piscisaureus_","message":"write(fd, \"world\")","date":"2012-05-10T22:53:06.428Z","type":"message"}
{"nick":"avalanche123","message":"so you keep the offset count internally?","date":"2012-05-10T22:53:17.648Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: you expect to write \"helloworld\" here","date":"2012-05-10T22:53:25.627Z","type":"message"}
{"nick":"avalanche123","message":"right","date":"2012-05-10T22:53:29.701Z","type":"message"}
{"nick":"piscisaureus_","message":"but since the thread pool might reorder, yadda yadda","date":"2012-05-10T22:53:37.614Z","type":"message"}
{"nick":"avalanche123","message":"yeah I see now","date":"2012-05-10T22:53:47.190Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: so yeah node tracks the file pointer internally for this","date":"2012-05-10T22:53:49.936Z","type":"message"}
{"nick":"avalanche123","message":"you migh actually end up with '     world' and then 'helloworld'","date":"2012-05-10T22:54:09.689Z","type":"message"}
{"nick":"avalanche123","message":"neat","date":"2012-05-10T22:54:11.314Z","type":"message"}
{"nick":"avalanche123","message":"this is not part of libuv?","date":"2012-05-10T22:54:24.762Z","type":"message"}
{"nick":"avalanche123","message":"done in node?","date":"2012-05-10T22:54:37.006Z","type":"message"}
{"nick":"piscisaureus_","message":"it's done in node","date":"2012-05-10T22:55:08.795Z","type":"message"}
{"nick":"avalanche123","message":"I see","date":"2012-05-10T22:55:14.550Z","type":"message"}
{"nick":"piscisaureus_","message":"but the effect is kinda lame sometimes","date":"2012-05-10T22:55:17.307Z","type":"message"}
{"nick":"piscisaureus_","message":"because on mac pwrite() is not threadsafe","date":"2012-05-10T22:55:28.919Z","type":"message"}
{"nick":"piscisaureus_","message":"so we have to lock the entire thread pool","date":"2012-05-10T22:55:34.986Z","type":"message"}
{"nick":"avalanche123","message":"oh","date":"2012-05-10T22:55:44.175Z","type":"message"}
{"nick":"piscisaureus_","message":"I wonder if that is also true on recent OS X versions","date":"2012-05-10T22:56:09.204Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: you know?","date":"2012-05-10T22:56:11.051Z","type":"message"}
{"nick":"rendar","date":"2012-05-10T22:56:14.182Z","type":"quit"}
{"nick":"piscisaureus_","message":"avalanche123: if we have more control over the scheduling we could also alleviate the pain a little for that","date":"2012-05-10T22:56:39.913Z","type":"message"}
{"nick":"mjr_","message":"isaacs: did tacos give you any new insights \b into this parser exception mess?","date":"2012-05-10T22:57:14.832Z","type":"message"}
{"nick":"isaacs","message":"mjr_: yeah, i think i'm close.","date":"2012-05-10T22:57:34.480Z","type":"message"}
{"nick":"avalanche123","message":"piscisaureus_ async fs io is hard it, very interesting stuff","date":"2012-05-10T22:57:46.551Z","type":"message"}
{"nick":"avalanche123","message":"are you planing to move node tricks to libuv?","date":"2012-05-10T22:57:55.645Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-05-10T22:58:24.236Z","type":"quit"}
{"nick":"bnoordhuis","message":"piscisaureus_: not 100% sure but it think it's still an issue","date":"2012-05-10T22:58:42.449Z","type":"message"}
{"nick":"bnoordhuis","message":"*i think","date":"2012-05-10T22:58:45.488Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: yes, we will move some node tricks to libuv","date":"2012-05-10T22:59:01.738Z","type":"message"}
{"nick":"avalanche123","message":"for the ffi bindings I will have to write some helper functions in c to inspect fs_req_s but I am not sure you guys will accept that in the mainstream","date":"2012-05-10T22:59:12.278Z","type":"message"}
{"nick":"bnoordhuis","message":"when it comes to pull requests, i often ask myself \"how does this help *me*?\"","date":"2012-05-10T22:59:42.963Z","type":"message"}
{"nick":"avalanche123","message":"right and it won't help c guys","date":"2012-05-10T22:59:58.106Z","type":"message"}
{"nick":"avalanche123","message":"since they can just inspect the struct","date":"2012-05-10T23:00:08.062Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2012-05-10T23:00:19.242Z","type":"message"}
{"nick":"avalanche123","message":"that's why I'm wondering if fs api is changing to more explicit callbacks where I could get necessary data as part of function arguments","date":"2012-05-10T23:00:33.168Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: so what's stopping you from forking libuv and maintaining this stuff yourself","date":"2012-05-10T23:00:55.171Z","type":"message"}
{"nick":"mikeal","date":"2012-05-10T23:01:08.168Z","type":"join"}
{"nick":"piscisaureus_","message":"avalanche123: git is such a wonderful tool :-)","date":"2012-05-10T23:01:17.311Z","type":"message"}
{"nick":"avalanche123","message":"nothing really, just that it is a big project to take on maintaining :)","date":"2012-05-10T23:01:30.377Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: well floating 3 functions or so is not very big to maintain","date":"2012-05-10T23:01:46.189Z","type":"message"}
{"nick":"avalanche123","message":"ok, that's fair","date":"2012-05-10T23:02:11.870Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: maybe every now and then you have to merge with joyent/libuv/master, and maybe you need to update these functions slightly","date":"2012-05-10T23:02:30.084Z","type":"message"}
{"nick":"loladiro","date":"2012-05-10T23:02:34.516Z","type":"join"}
{"nick":"avalanche123","message":"now that I know fs is ok as is with you guys, I'll have to take this approach","date":"2012-05-10T23:02:38.623Z","type":"message"}
{"nick":"avalanche123","message":"yes, definitely doable","date":"2012-05-10T23:03:05.740Z","type":"message"}
{"nick":"piscisaureus_","message":"avalanche123: so it's not okay as-is, but it's just ineffecient to turn it all upside down and after that refactor it again","date":"2012-05-10T23:03:27.941Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-05-10T23:03:38.356Z","type":"quit"}
{"nick":"piscisaureus_","message":"avalanche123: expecially since the 0.8 deadline was today, moreorless","date":"2012-05-10T23:03:50.340Z","type":"message"}
{"nick":"avalanche123","message":"oh","date":"2012-05-10T23:04:04.640Z","type":"message"}
{"nick":"avalanche123","message":"ok you do what you gotta do then :)","date":"2012-05-10T23:04:17.263Z","type":"message"}
{"nick":"avalanche123","message":"I will still hope it gets turned upside down after refactor","date":"2012-05-10T23:04:31.786Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: actually it's kinda weird that uv_prepare and uv_check refs at all","date":"2012-05-10T23:05:47.850Z","type":"message"}
{"nick":"c4milo|meeting","date":"2012-05-10T23:06:20.155Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: I can't imagine any situation where you would want either of them to keep the loop alive","date":"2012-05-10T23:06:26.639Z","type":"message"}
{"nick":"c4milo|meeting","new_nick":"c4milo","date":"2012-05-10T23:07:22.895Z","type":"nick"}
{"nick":"isaacs","message":"mjr_: i'm almost 100% sure it's a result of the setTimeout in the http client parser usage","date":"2012-05-10T23:09:02.240Z","type":"message"}
{"nick":"isaacs","message":"mjr_: s/setTimeout/process.nextTick/","date":"2012-05-10T23:09:15.816Z","type":"message"}
{"nick":"mjr_","message":"isaacs: the nextTick business certainly does seem suspect, or at least frustrating because you lose the stack.","date":"2012-05-10T23:10:09.741Z","type":"message"}
{"nick":"isaacs","message":"mjr_: yeah","date":"2012-05-10T23:10:16.781Z","type":"message"}
{"nick":"isaacs","message":"there's some reason why we need a nextTick before assigning the listeners and emitting the socket event, i forget what it is","date":"2012-05-10T23:10:32.443Z","type":"message"}
{"nick":"isaacs","message":"but some tests fail if i just yank it out","date":"2012-05-10T23:10:36.747Z","type":"message"}
{"nick":"piscisaureus_","message":"I agree it looks fishy","date":"2012-05-10T23:11:28.462Z","type":"message"}
{"nick":"mjr_","message":"There are a few of those in node.  Every time I run into one, I think it'll be simple to fix, and then spend a frustrating hour on it, then give up.","date":"2012-05-10T23:11:54.819Z","type":"message"}
{"nick":"piscisaureus_","message":"I know there's one in dns but that's because c-ares can report events sychronously","date":"2012-05-10T23:12:18.193Z","type":"message"}
{"nick":"isaacs","message":"this nextTick is there to preserve an API behavior that was implemented before we had sockets being reused in teh agents.","date":"2012-05-10T23:13:20.868Z","type":"message"}
{"nick":"mjr_","message":"Oh, speaking of DNS, DTrace just revealed that we are re-reading /etc/hosts like maniacs.  Our /etc/hosts file is 300KB of auto-generated internal names and stuff.","date":"2012-05-10T23:13:27.764Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah","date":"2012-05-10T23:13:45.491Z","type":"message"}
{"nick":"piscisaureus_","message":"known issue","date":"2012-05-10T23:13:50.306Z","type":"message"}
{"nick":"piscisaureus_","message":"problem is basically that this happens in cares","date":"2012-05-10T23:14:13.205Z","type":"message"}
{"nick":"piscisaureus_","message":"deep inside cares even","date":"2012-05-10T23:14:31.000Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_ : and 300KB hosts file is kinda insane innit :-)","date":"2012-05-10T23:14:48.417Z","type":"message"}
{"nick":"mjr_","message":"piscisaureus_: not when you have over 100 physical machines and countless extra zones, including thousands of node processes, all of which you want to address individually.","date":"2012-05-10T23:15:22.474Z","type":"message"}
{"nick":"mjr_","message":"I mean, yes?  But no.","date":"2012-05-10T23:15:36.148Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: you can't really expect a dns lib author to use a btree for these cases","date":"2012-05-10T23:15:42.093Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: sure, you have good reasons to do it","date":"2012-05-10T23:15:51.294Z","type":"message"}
{"nick":"mjr_","message":"Indeed not. But we shouldn't re-read it every time.","date":"2012-05-10T23:15:58.671Z","type":"message"}
{"nick":"piscisaureus_","message":"so what should we do? mmap it?","date":"2012-05-10T23:16:27.241Z","type":"message"}
{"nick":"piscisaureus_","message":"cache it for 5 minutes?","date":"2012-05-10T23:16:33.834Z","type":"message"}
{"nick":"mjr_","message":"yeah, I guess mmap might be a good solution","date":"2012-05-10T23:16:51.013Z","type":"message"}
{"nick":"piscisaureus_","message":"load it, fstat it every 5 minutes, and keep it cached","date":"2012-05-10T23:17:04.652Z","type":"message"}
{"nick":"piscisaureus_","message":"the problem with mmaping is that it handles change moreorless transparently but you can't really detect if the file grows","date":"2012-05-10T23:17:27.802Z","type":"message"}
{"nick":"mjr_","message":"You can stat it every time you need it, as long as you don't stat it more than once every few seconds.","date":"2012-05-10T23:17:32.303Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: maybe you can do a simple caching dns module in node?","date":"2012-05-10T23:17:52.007Z","type":"message"}
{"nick":"mjr_","message":"Yeah, that's what I'm about to do if there isn't any other obvious solution.","date":"2012-05-10T23:18:12.379Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: the obvious solution is to patch c-ares or use the system resolver (the dns module can do that, too)","date":"2012-05-10T23:18:39.074Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: but patching cares is going to be a lot of work I think","date":"2012-05-10T23:19:03.016Z","type":"message"}
{"nick":"mjr_","message":"I know, kind of sucks.","date":"2012-05-10T23:19:10.888Z","type":"message"}
{"nick":"mjr_","message":"The system resolver usually has some kind of cache.","date":"2012-05-10T23:19:25.895Z","type":"message"}
{"nick":"mattpardee_","reason":"\"Textual IRC Client: http://www.textualapp.com/\"","date":"2012-05-10T23:19:26.231Z","type":"part"}
{"nick":"piscisaureus_","message":"mjr_: does getaddrinfo in the thread not work for you?","date":"2012-05-10T23:19:32.533Z","type":"message"}
{"nick":"mjr_","message":"But the libc API is sync.","date":"2012-05-10T23:19:35.135Z","type":"message"}
{"nick":"mjr_","message":"Oh, it probably works great.  I'm just using whatever node does by default.","date":"2012-05-10T23:19:47.326Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: node has a facility for doing that on the thread pool","date":"2012-05-10T23:19:47.524Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Leaving...","date":"2012-05-10T23:21:51.132Z","type":"quit"}
{"nick":"piscisaureus_","message":"mjr_: dns.lookup uses that, actually","date":"2012-05-10T23:22:10.516Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: so if you are using that too, then your system dns lib would be to blame and not cares","date":"2012-05-10T23:22:30.437Z","type":"message"}
{"nick":"mjr_","message":"Yeah, I'll give that a try.  I think we might win the most by having an in-app DNS cache.","date":"2012-05-10T23:23:20.964Z","type":"message"}
{"nick":"mjr_","message":"Cache everything for 1 minute or something.","date":"2012-05-10T23:23:33.837Z","type":"message"}
{"nick":"piscisaureus_","message":"reasonable","date":"2012-05-10T23:23:52.659Z","type":"message"}
{"nick":"piscisaureus_","message":"put in in an object","date":"2012-05-10T23:24:00.225Z","type":"message"}
{"nick":"piscisaureus_","message":"you get a \"nice\" hashtable lookup for free!","date":"2012-05-10T23:24:15.583Z","type":"message"}
{"nick":"mjr_","message":"I've done this for some of our monitoring tools already for reverse lookups. ","date":"2012-05-10T23:24:51.620Z","type":"message"}
{"nick":"isaacs","action":"can't wait to rewrite http.js","date":"2012-05-10T23:25:02.120Z","type":"action"}
{"nick":"mjr_","message":"isaacs: I'll be first in line to try it out.","date":"2012-05-10T23:25:15.240Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: alternatively you could scrap the big hosts file and get a proper dns server >:-)","date":"2012-05-10T23:25:17.875Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-05-10T23:25:37.589Z","type":"quit"}
{"nick":"CoverSlide","message":"what's the priority of being able to use http for both http and https","date":"2012-05-10T23:25:49.339Z","type":"message"}
{"nick":"mjr_","message":"piscisaureus_: yeah, we have DNS, but it's one more dependency, and for same-DC communication, I'd rather avoid it.","date":"2012-05-10T23:26:16.813Z","type":"message"}
{"nick":"isaacs","message":"mjr_: yes, i'm sure :)","date":"2012-05-10T23:26:39.452Z","type":"message"}
{"nick":"isaacs","message":"really, the problem with this thing is that node wasn't designed with socket pooling and keepalives in mind from the start.","date":"2012-05-10T23:26:56.674Z","type":"message"}
{"nick":"isaacs","message":"a lot of these features are kind of bolted on","date":"2012-05-10T23:27:02.731Z","type":"message"}
{"nick":"mjr_","message":"Before you rewrite it, we should tell you about our experience with explicit pooling.","date":"2012-05-10T23:27:30.052Z","type":"message"}
{"nick":"mjr_","message":"Danny is doing some good work in that area.  It's really tricky, and for us it's the next frontier of back pressure problems.","date":"2012-05-10T23:27:52.211Z","type":"message"}
{"nick":"isaacs","message":"mjr_: yes, that will be good","date":"2012-05-10T23:28:40.600Z","type":"message"}
{"nick":"isaacs","message":"mjr_: first target of attack will be to see if a js parser can perform admirably, so we don't have this slow creation bullshit","date":"2012-05-10T23:29:08.630Z","type":"message"}
{"nick":"bnoordhuis","message":"CoverSlide: why do you ask?","date":"2012-05-10T23:29:20.237Z","type":"message"}
{"nick":"isaacs","message":"mjr_: and then we can just throw them away, instead of keeping around these long-lived gc bombs.","date":"2012-05-10T23:29:27.292Z","type":"message"}
{"nick":"mjr_","message":"isaacs: I think you'll be able to make something good happen there in pure JS, but I'm guessing you won't be able to beat the performance of http_parser.","date":"2012-05-10T23:31:17.647Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2012-05-10T23:31:19.318Z","type":"quit"}
{"nick":"mjr_","message":"But who knows, I'm wrong all the time.","date":"2012-05-10T23:31:35.171Z","type":"message"}
{"nick":"isaacs","message":"mjr_: maybe not in a head-to-head parse-off, but in actual http load tests?  it's promising.","date":"2012-05-10T23:31:48.787Z","type":"message"}
{"nick":"isaacs","message":"mjr_: these long-lived objects are kind of tricky for the garbage collector.","date":"2012-05-10T23:32:06.260Z","type":"message"}
{"nick":"mjr_","message":"sunday, sunday, sunday","date":"2012-05-10T23:32:07.659Z","type":"message"}
{"nick":"mjr_","action":"will sell you the whole seat, but you'll only need the EDGE","date":"2012-05-10T23:32:26.382Z","type":"action"}
{"nick":"isaacs","action":"hearing mjr_ in the OH YEAH! voice","date":"2012-05-10T23:33:34.328Z","type":"action"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-05-10T23:33:36.743Z","type":"quit"}
{"nick":"mjr_","message":"I struggled for a long time to beat hiredis at parsing redis replies.  I couldn't get close enough not to worry.","date":"2012-05-10T23:33:38.969Z","type":"message"}
{"nick":"isaacs","date":"2012-05-10T23:34:04.153Z","type":"join"}
{"nick":"mjr_","message":"I do love a good parse-off though.","date":"2012-05-10T23:34:04.154Z","type":"message"}
{"nick":"mjr_","message":"I struggled for a long time to beat hiredis at parsing redis replies.  I couldn't get close enough not to worry.","date":"2012-05-10T23:34:42.980Z","type":"message"}
{"nick":"isaacs","message":"mjr_: i noticed that hiredis seems to fall over when i do hgetall and hmset","date":"2012-05-10T23:37:20.251Z","type":"message"}
{"nick":"isaacs","message":"it's like it doesn't speak the same version of redis as my redis does or something","date":"2012-05-10T23:37:33.648Z","type":"message"}
{"nick":"mjr_","message":"But the JS parser works?","date":"2012-05-10T23:37:42.127Z","type":"message"}
{"nick":"mikeal","date":"2012-05-10T23:38:14.149Z","type":"join"}
{"nick":"isaacs","message":"mjr_: yeah, beautifully","date":"2012-05-10T23:38:21.861Z","type":"message"}
{"nick":"isaacs","message":"mjr_: and it's still way crazy fast.","date":"2012-05-10T23:38:30.457Z","type":"message"}
{"nick":"mjr_","message":"Newer V8's have made the JS parser almost 2X faster.","date":"2012-05-10T23:38:41.935Z","type":"message"}
{"nick":"bnoordhuis","message":"crazy, isn't it?","date":"2012-05-10T23:38:54.636Z","type":"message"}
{"nick":"bnoordhuis","message":"well, there was some room for improvement in v8's ia32 and x64 assemblers","date":"2012-05-10T23:39:11.878Z","type":"message"}
{"nick":"bnoordhuis","message":"but still","date":"2012-05-10T23:39:13.340Z","type":"message"}
{"nick":"mjr_","message":"Still not as fast as hiredis, but it's closing the gap a bit.","date":"2012-05-10T23:39:14.570Z","type":"message"}
{"nick":"mjr_","message":"isaacs: I will trade you a hiredis bug fix for a node http parser crash fix.","date":"2012-05-10T23:39:52.931Z","type":"message"}
{"nick":"isaacs","message":"mjr_: no deal","date":"2012-05-10T23:40:25.169Z","type":"message"}
{"nick":"mjr_","action":"shakes fist","date":"2012-05-10T23:40:33.219Z","type":"action"}
{"nick":"isaacs","message":"mjr_: i am perfectly happy not using hiredis.","date":"2012-05-10T23:40:37.548Z","type":"message"}
{"nick":"isaacs","message":"mjr_: i WILL fix node's http bug anyway, though.","date":"2012-05-10T23:40:44.057Z","type":"message"}
{"nick":"isaacs","message":"mjr_: just because i like you.","date":"2012-05-10T23:40:49.518Z","type":"message"}
{"nick":"bnoordhuis","message":"it's a strange bug though","date":"2012-05-10T23:40:55.215Z","type":"message"}
{"nick":"bnoordhuis","message":"i can't see a code path that might cause that","date":"2012-05-10T23:41:02.583Z","type":"message"}
{"nick":"mjr_","message":"I resisted hiredis for a long time, but I couldn't deny the numbers.  Now that we have flame graph technology, I can revisit and hopefully close the gap even further.","date":"2012-05-10T23:41:25.492Z","type":"message"}
{"nick":"mjr_","message":"The old V8 profiler basically lied to me and wasted my time on countless dead ends.","date":"2012-05-10T23:41:50.175Z","type":"message"}
{"nick":"bnoordhuis","message":"now that would be a nice gsoc project, a valgrind + callgrind plugin that works with v8","date":"2012-05-10T23:43:38.209Z","type":"message"}
{"nick":"orlandovftw","reason":"Ping timeout: 260 seconds","date":"2012-05-10T23:51:41.571Z","type":"quit"}
{"nick":"ircretary","date":"2012-05-10T23:53:57.770Z","type":"join"}
{"nick":"piscisaureus_","message":"I am not so confident that the typical gsoc applicant can pull that off","date":"2012-05-10T23:56:28.273Z","type":"message"}
{"nick":"piscisaureus_","message":"but maybe I am too pessimistic here","date":"2012-05-10T23:56:34.982Z","type":"message"}
{"nick":"bnoordhuis","message":"one can dream though","date":"2012-05-10T23:58:07.106Z","type":"message"}
