{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-06-24T00:00:00.495Z","type":"quit"}
{"nick":"ircretary","date":"2013-06-24T00:00:08.403Z","type":"join"}
{"nick":"mikolalysenko","reason":"Ping timeout: 255 seconds","date":"2013-06-24T00:01:44.502Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-06-24T00:07:10.341Z","type":"quit"}
{"nick":"loladiro","date":"2013-06-24T00:08:08.197Z","type":"join"}
{"nick":"icarot","date":"2013-06-24T00:14:05.273Z","type":"join"}
{"nick":"perezd","date":"2013-06-24T00:30:19.732Z","type":"join"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-24T00:32:23.622Z","type":"nick"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-06-24T00:37:38.679Z","type":"quit"}
{"nick":"brson","date":"2013-06-24T00:41:49.715Z","type":"join"}
{"nick":"amartens","date":"2013-06-24T00:45:59.077Z","type":"join"}
{"nick":"kellabyte","date":"2013-06-24T00:56:47.503Z","type":"join"}
{"nick":"loladiro","date":"2013-06-24T00:58:30.626Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-24T01:06:00.900Z","type":"nick"}
{"nick":"icarot","reason":"Remote host closed the connection","date":"2013-06-24T01:06:48.529Z","type":"quit"}
{"nick":"mikolalysenko","date":"2013-06-24T01:07:29.279Z","type":"join"}
{"nick":"mikolalysenko","reason":"Ping timeout: 246 seconds","date":"2013-06-24T01:12:05.006Z","type":"quit"}
{"nick":"abraxas","date":"2013-06-24T01:28:24.037Z","type":"join"}
{"nick":"perezd","reason":"Quit: perezd","date":"2013-06-24T01:39:11.112Z","type":"quit"}
{"nick":"c4milo","date":"2013-06-24T01:41:39.346Z","type":"join"}
{"nick":"icarot","date":"2013-06-24T01:50:39.321Z","type":"join"}
{"nick":"trapito","date":"2013-06-24T01:51:09.948Z","type":"join"}
{"nick":"trapito","message":"Ahoy!","date":"2013-06-24T01:51:32.778Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 256 seconds","date":"2013-06-24T02:10:40.667Z","type":"quit"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-06-24T02:11:27.102Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-06-24T02:14:50.585Z","type":"join"}
{"nick":"perezd","date":"2013-06-24T02:16:34.362Z","type":"join"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-24T02:22:15.665Z","type":"nick"}
{"nick":"mikeal","date":"2013-06-24T02:24:21.632Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-06-24T02:24:30.682Z","type":"quit"}
{"nick":"groundwater","date":"2013-06-24T02:34:58.735Z","type":"join"}
{"nick":"amartens","date":"2013-06-24T02:41:48.021Z","type":"join"}
{"nick":"mikolalysenko","date":"2013-06-24T02:43:55.842Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 246 seconds","date":"2013-06-24T02:50:04.985Z","type":"quit"}
{"nick":"icarot","reason":"Ping timeout: 248 seconds","date":"2013-06-24T03:00:17.295Z","type":"quit"}
{"nick":"timoxley","date":"2013-06-24T03:06:28.019Z","type":"join"}
{"nick":"dap","reason":"Read error: Connection reset by peer","date":"2013-06-24T03:09:32.555Z","type":"quit"}
{"nick":"dap","date":"2013-06-24T03:10:06.100Z","type":"join"}
{"nick":"perezd","reason":"Quit: perezd","date":"2013-06-24T03:21:24.064Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-06-24T03:34:19.450Z","type":"quit"}
{"nick":"amartens","date":"2013-06-24T03:46:22.372Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 248 seconds","date":"2013-06-24T03:50:57.320Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-24T04:02:34.960Z","type":"nick"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-06-24T04:05:22.614Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-24T04:29:16.839Z","type":"nick"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-24T04:36:55.241Z","type":"quit"}
{"nick":"amartens","date":"2013-06-24T04:46:43.025Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 246 seconds","date":"2013-06-24T04:51:11.131Z","type":"quit"}
{"nick":"amartens","date":"2013-06-24T04:57:15.545Z","type":"join"}
{"nick":"arlolra","date":"2013-06-24T04:58:55.845Z","type":"join"}
{"nick":"timoxley","date":"2013-06-24T05:04:19.802Z","type":"join"}
{"nick":"icarot","date":"2013-06-24T05:16:46.770Z","type":"join"}
{"nick":"arlolra","reason":"Quit: Leaving...","date":"2013-06-24T05:22:18.701Z","type":"quit"}
{"nick":"icarot","reason":"Ping timeout: 264 seconds","date":"2013-06-24T05:29:55.606Z","type":"quit"}
{"nick":"mikolalysenko","reason":"Ping timeout: 264 seconds","date":"2013-06-24T05:37:07.645Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-06-24T06:04:51.808Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-06-24T06:14:45.738Z","type":"quit"}
{"nick":"mikeal","date":"2013-06-24T06:15:30.777Z","type":"join"}
{"nick":"mikolalysenko","date":"2013-06-24T06:43:03.737Z","type":"join"}
{"nick":"mikolalysenko","reason":"Ping timeout: 255 seconds","date":"2013-06-24T06:47:38.560Z","type":"quit"}
{"nick":"hz","date":"2013-06-24T07:07:28.091Z","type":"join"}
{"nick":"bajtos","date":"2013-06-24T07:14:06.119Z","type":"join"}
{"nick":"`3E","new_nick":"`3rdEden","date":"2013-06-24T07:25:15.958Z","type":"nick"}
{"nick":"rendar","date":"2013-06-24T07:43:16.895Z","type":"join"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-06-24T08:02:50.490Z","type":"quit"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-06-24T08:13:16.403Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-06-24T08:17:24.367Z","type":"join"}
{"nick":"bnoordhuis","message":"morning","date":"2013-06-24T08:19:07.946Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: good morning","date":"2013-06-24T08:21:07.388Z","type":"message"}
{"nick":"bajtos","message":"have you had a chance to look at node pr 5713?","date":"2013-06-24T08:21:33.532Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: chance? yes. done so. no","date":"2013-06-24T08:22:07.921Z","type":"message"}
{"nick":"trapito","reason":"Remote host closed the connection","date":"2013-06-24T08:22:23.269Z","type":"quit"}
{"nick":"bnoordhuis","message":"bajtos: can you give me the executive summary?","date":"2013-06-24T08:22:26.588Z","type":"message"}
{"nick":"bajtos","message":"sure","date":"2013-06-24T08:22:30.976Z","type":"message"}
{"nick":"bajtos","message":"SetVerbose does two things - reports uncaught exception to debugger and logs a message","date":"2013-06-24T08:22:52.577Z","type":"message"}
{"nick":"bajtos","message":"to log a message, V8 calls embedder's callback or prints to stdout if there is no callback registeed","date":"2013-06-24T08:23:21.827Z","type":"message"}
{"nick":"bajtos","message":"*registered","date":"2013-06-24T08:23:47.679Z","type":"message"}
{"nick":"bajtos","message":"node does not register any callbacks","date":"2013-06-24T08:24:08.929Z","type":"message"}
{"nick":"bajtos","message":"so my dilemma is how to approach this","date":"2013-06-24T08:24:38.680Z","type":"message"}
{"nick":"bajtos","message":"I can ignore all messages from V8, since it seems like there are only two kinds of them: uncaught exception and syntax error in debug-debugger.js, mirror-debugger.js & friends","date":"2013-06-24T08:25:29.122Z","type":"message"}
{"nick":"bajtos","message":"or I can rewrite node.js exception handling so that uncaught exceptions are logged via OnMessage callback","date":"2013-06-24T08:26:10.155Z","type":"message"}
{"nick":"bnoordhuis","message":"OnMessage?","date":"2013-06-24T08:27:00.492Z","type":"message"}
{"nick":"bajtos","message":"or I can modify V8 to allow OnMessage callback to detect what kind of message it is and throw away \"uncaught_exception\" message","date":"2013-06-24T08:27:04.703Z","type":"message"}
{"nick":"bnoordhuis","message":"do you mean the listener that you add with V8::AddMessageListener?","date":"2013-06-24T08:27:13.696Z","type":"message"}
{"nick":"bajtos","message":"yes","date":"2013-06-24T08:27:23.748Z","type":"message"}
{"nick":"bajtos","message":"I implemented the third option in commit 84f19c50","date":"2013-06-24T08:27:46.449Z","type":"message"}
{"nick":"bajtos","message":"I don't now how likely is V8 to accept this change","date":"2013-06-24T08:28:28.395Z","type":"message"}
{"nick":"bajtos","message":"plus I am little bit worried that we might miss a case where the exception is logged via ReportException, in which case it won't be logged at all","date":"2013-06-24T08:29:37.987Z","type":"message"}
{"nick":"bajtos","message":"I am leaning towards rewriting node.js exception handling, but that might break backwards compatibility in the sense that a different output will be reported","date":"2013-06-24T08:30:24.386Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah. that's not ideal","date":"2013-06-24T08:30:49.323Z","type":"message"}
{"nick":"bajtos","message":"But thenâ€¦ is it necessary to have so many different code paths for reporting exception?","date":"2013-06-24T08:31:38.911Z","type":"message"}
{"nick":"bajtos","message":"There is ReportException() with show_line true/false, then there is FatalException()","date":"2013-06-24T08:32:17.187Z","type":"message"}
{"nick":"bnoordhuis","message":"you can pretty much ignore ReportException","date":"2013-06-24T08:32:29.044Z","type":"message"}
{"nick":"bnoordhuis","message":"it's only used for what amounts to fatal errors","date":"2013-06-24T08:32:49.881Z","type":"message"}
{"nick":"bnoordhuis","message":"same for FatalException obviously :)","date":"2013-06-24T08:33:08.648Z","type":"message"}
{"nick":"bajtos","message":"that's the thing which puzzles me :-)","date":"2013-06-24T08:33:17.792Z","type":"message"}
{"nick":"bnoordhuis","message":"FatalException is an api function that calls ReportException (which is internal)","date":"2013-06-24T08:33:32.035Z","type":"message"}
{"nick":"bajtos","message":"ouch.","date":"2013-06-24T08:34:09.727Z","type":"message"}
{"nick":"bajtos","message":"So reporting uncaught exceptions from V8::AddMessageListener callback will also break API compatibility","date":"2013-06-24T08:34:40.781Z","type":"message"}
{"nick":"timoxley","date":"2013-06-24T08:34:49.094Z","type":"join"}
{"nick":"bajtos","message":"since users should use TryCatch.SetVerbose(true) instead of calling FatalException(TryCatch) ","date":"2013-06-24T08:35:18.128Z","type":"message"}
{"nick":"bajtos","message":"However. If native modules want to support \"break on uncaught exception\", then they have to call SetVerbose anyway","date":"2013-06-24T08:36:51.655Z","type":"message"}
{"nick":"bnoordhuis","message":"*affirmative nod*","date":"2013-06-24T08:37:32.066Z","type":"message"}
{"nick":"bajtos","message":"how about this solution? https://gist.github.com/bajtos/9ba2ebfd44ec7232ea75","date":"2013-06-24T08:41:13.368Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: i really, really don't want to expand the c++ api","date":"2013-06-24T08:43:32.095Z","type":"message"}
{"nick":"bnoordhuis","message":"if anything, i want it to get smaller over time","date":"2013-06-24T08:43:40.794Z","type":"message"}
{"nick":"bnoordhuis","message":"documenting the SetVerbose thing in addons.markdown is fine however","date":"2013-06-24T08:44:02.238Z","type":"message"}
{"nick":"bajtos","message":"in that case if you use both SetVerbose and FatalException, your exception will be logged twice ","date":"2013-06-24T08:44:44.162Z","type":"message"}
{"nick":"bajtos","message":"if that's an acceptable price to pay for smaller API, then ok","date":"2013-06-24T08:45:07.533Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: if TryCatch had a IsVerbose() method, you could avoid that, right?","date":"2013-06-24T08:47:33.232Z","type":"message"}
{"nick":"bajtos","message":"you know what? if native module authors were using NodeTryCatch already, then we won't have to think so hard about backward compatibility - we could simple change implementation (internals) and all modules will work without change. having our own API objects instead of exposing V8 API has some benefits.","date":"2013-06-24T08:47:48.388Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: I am not sure","date":"2013-06-24T08:47:57.771Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: since TryCatch is converted to a Message before it is sent to our handler","date":"2013-06-24T08:48:17.943Z","type":"message"}
{"nick":"bnoordhuis","message":"handler? i was talking about FatalException","date":"2013-06-24T08:48:52.964Z","type":"message"}
{"nick":"bajtos","message":"oh, I see your point","date":"2013-06-24T08:49:02.817Z","type":"message"}
{"nick":"bajtos","message":"yeah, that's a good idea","date":"2013-06-24T08:49:09.083Z","type":"message"}
{"nick":"bajtos","message":"adding IsVerbose() should be simple enough to have it accepted to V8 or added to our patch we are applying to V8","date":"2013-06-24T08:50:51.554Z","type":"message"}
{"nick":"bnoordhuis","message":"bajtos: upstream always!","date":"2013-06-24T08:53:09.210Z","type":"message"}
{"nick":"bnoordhuis","message":"if v8 rejects it, i probably will too","date":"2013-06-24T08:53:19.200Z","type":"message"}
{"nick":"bajtos","message":"hmm, ok","date":"2013-06-24T08:53:38.747Z","type":"message"}
{"nick":"bajtos","message":"I found one more problem","date":"2013-06-24T08:53:55.913Z","type":"message"}
{"nick":"bajtos","message":"I am not sure I we can call \"_fatalException\" event handler from AddMessageListener callback(), most likely we will have to do it in FatalException","date":"2013-06-24T08:55:29.717Z","type":"message"}
{"nick":"bajtos","message":"in which case we will report exception even if \"_fatalException\" handler returned true :(","date":"2013-06-24T08:56:09.630Z","type":"message"}
{"nick":"bnoordhuis","message":"i think that should be safe","date":"2013-06-24T08:58:27.201Z","type":"message"}
{"nick":"bnoordhuis","message":"but let me check","date":"2013-06-24T08:58:29.747Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, looks like it should be okay","date":"2013-06-24T09:00:42.347Z","type":"message"}
{"nick":"bajtos","message":"cool.","date":"2013-06-24T09:01:31.793Z","type":"message"}
{"nick":"bnoordhuis","message":"amusingly, any exceptions your listener throws, v8 stops from propagating :)","date":"2013-06-24T09:01:46.429Z","type":"message"}
{"nick":"bajtos","message":"except we can't access TryCatch from AddMessageListener","date":"2013-06-24T09:01:47.397Z","type":"message"}
{"nick":"bajtos","message":"I am taking it back","date":"2013-06-24T09:02:20.697Z","type":"message"}
{"nick":"bajtos","message":"we need to access TryCatch from FatalException() which is called *after* AddMessageListener callback, so that should be fine","date":"2013-06-24T09:02:51.752Z","type":"message"}
{"nick":"bajtos","message":"one more question","date":"2013-06-24T09:02:59.795Z","type":"message"}
{"nick":"bnoordhuis","message":"one more answer","date":"2013-06-24T09:03:05.239Z","type":"message"}
{"nick":"bajtos","message":":)","date":"2013-06-24T09:03:07.799Z","type":"message"}
{"nick":"amartens","date":"2013-06-24T09:03:09.085Z","type":"join"}
{"nick":"bajtos","message":"from what I was able to find, ReportException() is called directly from Load(process_l)","date":"2013-06-24T09:03:36.456Z","type":"message"}
{"nick":"bajtos","message":"is there a reason why this code cannot call FatalException instead? (i.e. why it is bypassing \"_fatalException\" handler)","date":"2013-06-24T09:04:19.672Z","type":"message"}
{"nick":"bnoordhuis","message":"because there's no going forward when Load() fails","date":"2013-06-24T09:04:42.067Z","type":"message"}
{"nick":"bnoordhuis","message":"FatalException is (since v0.10) only conditionally fatal","date":"2013-06-24T09:05:13.397Z","type":"message"}
{"nick":"bajtos","message":"ok, that makes sense","date":"2013-06-24T09:05:43.451Z","type":"message"}
{"nick":"bnoordhuis","message":"there's also the chicken/egg problemn: if Load() fails, the process object is probably in an undefined state","date":"2013-06-24T09:06:04.770Z","type":"message"}
{"nick":"bajtos","message":"do I understand it correctly, that FatalException is basically a wrapper around ReportException that adds ","date":"2013-06-24T09:06:09.791Z","type":"message"}
{"nick":"bajtos","message":"\"_fatalException\" handler logic","date":"2013-06-24T09:06:16.821Z","type":"message"}
{"nick":"bajtos","message":"?","date":"2013-06-24T09:06:23.815Z","type":"message"}
{"nick":"bnoordhuis","message":"yes. and exits if _fatalException doesn't handle it","date":"2013-06-24T09:06:31.194Z","type":"message"}
{"nick":"bajtos","message":"ok","date":"2013-06-24T09:06:55.923Z","type":"message"}
{"nick":"amartens","reason":"Ping timeout: 246 seconds","date":"2013-06-24T09:07:22.993Z","type":"quit"}
{"nick":"bajtos","message":"in that case I should call V8::AddMessageListener only after Load has finished (or modify AddMessageListener callback so that it does not call _fatalException handler if we are not loaded yet - perhaps via a global flag?)","date":"2013-06-24T09:09:12.390Z","type":"message"}
{"nick":"bajtos","message":"anyway, I think I should have all information I need now","date":"2013-06-24T09:09:48.794Z","type":"message"}
{"nick":"bajtos","message":"bnoordhuis: thanks for your help :)","date":"2013-06-24T09:10:47.407Z","type":"message"}
{"nick":"bnoordhuis","message":"np :)","date":"2013-06-24T09:11:02.222Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037v0.10\u000f * \u00023fac415\u0002 : doc: fs: synchronize watchFile/unwatchFile warning - http://git.io/6vOvAA","date":"2013-06-24T09:19:12.566Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #257 \u00037UNSTABLE\u000f osx-x64 (1/592) smartos-ia32 (1/592) osx-ia32 (1/592) smartos-x64 (2/592) http://jenkins.nodejs.org/job/nodejs-v0.10/257/","date":"2013-06-24T09:31:17.718Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #86 \u00037UNSTABLE\u000f windows-x64 (8/592) windows-ia32 (7/592) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/86/","date":"2013-06-24T09:47:40.928Z","type":"message"}
{"nick":"amartens","date":"2013-06-24T10:03:26.019Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 256 seconds","date":"2013-06-24T10:08:05.309Z","type":"quit"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-06-24T10:23:57.219Z","type":"quit"}
{"nick":"timoxley","reason":"Ping timeout: 276 seconds","date":"2013-06-24T10:49:19.186Z","type":"quit"}
{"nick":"amartens","date":"2013-06-24T11:03:48.073Z","type":"join"}
{"nick":"st_luke","date":"2013-06-24T11:06:46.413Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 246 seconds","date":"2013-06-24T11:08:06.004Z","type":"quit"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-06-24T11:15:15.915Z","type":"quit"}
{"nick":"bnoordhuis","message":"thoughts on adding better sprintf functionality to core?","date":"2013-06-24T11:45:23.770Z","type":"message"}
{"nick":"bnoordhuis","message":"util.format() doesn't quite cut it but i'd rather not change it this late in the game","date":"2013-06-24T11:45:53.380Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: hey, how does https://github.com/mmalecki/node/compare/0.10-no-idle-gc cut if for a 'remove idle GC on 0.8'?","date":"2013-06-24T11:46:07.684Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: wut?","date":"2013-06-24T11:46:25.876Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: I backported your patch since it never made it to 0.8","date":"2013-06-24T11:46:48.504Z","type":"message"}
{"nick":"mmalecki","message":"and yeah, I can't use the switch","date":"2013-06-24T11:47:00.065Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm still not sure what the question is :)","date":"2013-06-24T11:47:23.589Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: ot","date":"2013-06-24T11:47:57.624Z","type":"message"}
{"nick":"mmalecki","message":"er","date":"2013-06-24T11:47:59.397Z","type":"message"}
{"nick":"timoxley","date":"2013-06-24T11:48:12.608Z","type":"join"}
{"nick":"mmalecki","message":"it's a backport of your patch to remove idle GC on 0.10","date":"2013-06-24T11:48:12.876Z","type":"message"}
{"nick":"mmalecki","message":"to 0.8","date":"2013-06-24T11:48:14.183Z","type":"message"}
{"nick":"mmalecki","message":"so I'm wondering if I did it right :-)","date":"2013-06-24T11:48:23.964Z","type":"message"}
{"nick":"bnoordhuis","message":"ah okay","date":"2013-06-24T11:48:29.761Z","type":"message"}
{"nick":"bnoordhuis","message":"does it compile?","date":"2013-06-24T11:48:35.401Z","type":"message"}
{"nick":"mmalecki","message":"it does indeed happen to compile","date":"2013-06-24T11:48:43.820Z","type":"message"}
{"nick":"bnoordhuis","message":"does it crash within seconds?","date":"2013-06-24T11:48:54.523Z","type":"message"}
{"nick":"mmalecki","message":"what's even funnier, it's running on one of our frontend balancers","date":"2013-06-24T11:48:56.063Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll take that as a no :)","date":"2013-06-24T11:49:07.399Z","type":"message"}
{"nick":"indutny","message":"probably its working then?","date":"2013-06-24T11:49:10.658Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-06-24T11:49:11.201Z","type":"message"}
{"nick":"bnoordhuis","message":"then you probably did it right","date":"2013-06-24T11:49:11.556Z","type":"message"}
{"nick":"mmalecki","message":"but I'm wondering how bad this'll turn out to be after few hours","date":"2013-06-24T11:49:13.009Z","type":"message"}
{"nick":"bnoordhuis","message":"well, the gc in v0.8 is a little less advanced than the one in v0.10","date":"2013-06-24T11:49:42.886Z","type":"message"}
{"nick":"bnoordhuis","message":"but no doubt you monitor request latency and memory usage","date":"2013-06-24T11:49:58.195Z","type":"message"}
{"nick":"mmalecki","message":"oh, we even monitor GC latency. I got nervous when it reached 3 s","date":"2013-06-24T11:50:15.439Z","type":"message"}
{"nick":"bnoordhuis","message":"3 seconds for one gc run?","date":"2013-06-24T11:50:27.997Z","type":"message"}
{"nick":"mmalecki","message":"yeah","date":"2013-06-24T11:50:31.958Z","type":"message"}
{"nick":"bnoordhuis","message":"that's extremely bad","date":"2013-06-24T11:50:39.072Z","type":"message"}
{"nick":"mmalecki","message":"and like 1 GB of memory","date":"2013-06-24T11:50:42.775Z","type":"message"}
{"nick":"mmalecki","message":"isn't it?","date":"2013-06-24T11:50:44.920Z","type":"message"}
{"nick":"bnoordhuis","message":"what the...","date":"2013-06-24T11:50:53.889Z","type":"message"}
{"nick":"mmalecki","message":"I'm trying to see if removing idle GC fixes it at all","date":"2013-06-24T11:50:57.114Z","type":"message"}
{"nick":"bnoordhuis","message":"right","date":"2013-06-24T11:51:05.704Z","type":"message"}
{"nick":"bnoordhuis","message":"btw https://github.com/bnoordhuis/node-idle-gc","date":"2013-06-24T11:51:08.504Z","type":"message"}
{"nick":"mmalecki","message":"but I'm mostly just guessing anyway","date":"2013-06-24T11:51:11.279Z","type":"message"}
{"nick":"bnoordhuis","message":"that's the idle gc done right","date":"2013-06-24T11:51:12.805Z","type":"message"}
{"nick":"mmalecki","message":"oh yeah, I saw this one","date":"2013-06-24T11:51:19.184Z","type":"message"}
{"nick":"mmalecki","message":"I think I'll actually add it next","date":"2013-06-24T11:51:26.982Z","type":"message"}
{"nick":"bnoordhuis","message":"have you read the README?","date":"2013-06-24T11:51:53.796Z","type":"message"}
{"nick":"bnoordhuis","message":"for once i got to use a futurama quote in an appropriate context :)","date":"2013-06-24T11:52:11.411Z","type":"message"}
{"nick":"mmalecki","message":"hahahah","date":"2013-06-24T11:52:25.221Z","type":"message"}
{"nick":"mmalecki","message":"that always feels good, doesn't it?","date":"2013-06-24T11:52:36.862Z","type":"message"}
{"nick":"mmalecki","message":"btw, I'm going to be in Amsterdam this or next weekend","date":"2013-06-24T11:52:47.586Z","type":"message"}
{"nick":"mmalecki","message":"prepare your liver","date":"2013-06-24T11:52:55.370Z","type":"message"}
{"nick":"bnoordhuis","message":"hah, okay","date":"2013-06-24T11:53:29.006Z","type":"message"}
{"nick":"`3rdEden","message":"mmalecki: why do you back port it? Why not just use the command line flag?","date":"2013-06-24T11:54:16.097Z","type":"message"}
{"nick":"mmalecki","message":"`3rdEden: forever. it's actually easier to backport than fix forever.","date":"2013-06-24T11:54:50.127Z","type":"message"}
{"nick":"mmalecki","action":"is a lazy asshole","date":"2013-06-24T11:55:07.768Z","type":"action"}
{"nick":"bnoordhuis","message":"oh, i don't know about 'lazy'","date":"2013-06-24T11:55:24.036Z","type":"message"}
{"nick":"`3rdEden","message":"I thought they ran on aeternum ;p","date":"2013-06-24T11:55:37.028Z","type":"message"}
{"nick":"mmalecki","message":"`3rdEden: nah, aeternum is slaves only. it's a bit too bare for balancers","date":"2013-06-24T11:56:06.674Z","type":"message"}
{"nick":"`3rdEden","message":"mmalecki: ok, makes sense","date":"2013-06-24T11:56:24.907Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: I wonder about that sometimes too ;)","date":"2013-06-24T11:56:29.647Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: looks like it works. not too many gc's happening at all. thanks for giving it a look.","date":"2013-06-24T12:03:01.412Z","type":"message"}
{"nick":"amartens","date":"2013-06-24T12:04:05.077Z","type":"join"}
{"nick":"bnoordhuis","message":"mmalecki: no problem","date":"2013-06-24T12:05:15.998Z","type":"message"}
{"nick":"amartens","reason":"Ping timeout: 268 seconds","date":"2013-06-24T12:09:09.078Z","type":"quit"}
{"nick":"mmalecki","message":"gc: 28706043 ns, that's actually getting really weird","date":"2013-06-24T12:10:00.283Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: that's 28 ms. that's not too bad, is it?","date":"2013-06-24T12:32:10.414Z","type":"message"}
{"nick":"bnoordhuis","message":"i mean, it's not great either but at least it's not 3s","date":"2013-06-24T12:32:52.731Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: I meant it's weird that it's so much faster","date":"2013-06-24T12:33:42.856Z","type":"message"}
{"nick":"amartens","date":"2013-06-24T13:04:28.241Z","type":"join"}
{"nick":"kenperkins","reason":"Quit: Textual IRC Client: http://www.textualapp.com/","date":"2013-06-24T13:08:51.065Z","type":"quit"}
{"nick":"amartens","reason":"Ping timeout: 246 seconds","date":"2013-06-24T13:08:51.329Z","type":"quit"}
{"nick":"kenperkins","date":"2013-06-24T13:11:47.096Z","type":"join"}
{"nick":"c4milo","date":"2013-06-24T13:24:54.345Z","type":"join"}
{"nick":"mikolalysenko","date":"2013-06-24T13:41:44.019Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-24T13:42:01.520Z","type":"quit"}
{"nick":"amartens","date":"2013-06-24T14:04:44.341Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 268 seconds","date":"2013-06-24T14:09:24.080Z","type":"quit"}
{"nick":"groundwater","reason":"Quit: groundwater","date":"2013-06-24T14:16:34.956Z","type":"quit"}
{"nick":"papertigers","date":"2013-06-24T14:23:27.371Z","type":"join"}
{"nick":"c4milo","date":"2013-06-24T14:27:36.803Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-24T14:29:01.363Z","type":"nick"}
{"nick":"icarot","date":"2013-06-24T14:36:57.857Z","type":"join"}
{"nick":"amartens","date":"2013-06-24T15:05:09.353Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 248 seconds","date":"2013-06-24T15:09:21.348Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-06-24T15:16:53.369Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-24T15:25:14.961Z","type":"nick"}
{"nick":"groundwater","date":"2013-06-24T15:33:40.948Z","type":"join"}
{"nick":"loladiro","date":"2013-06-24T15:39:10.552Z","type":"join"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-06-24T15:50:21.807Z","type":"quit"}
{"nick":"isaacs","message":"So, this bug where http emits 'finish' before it's actually finished..","date":"2013-06-24T16:02:37.554Z","type":"message"}
{"nick":"isaacs","message":"this is an OLD bug.","date":"2013-06-24T16:02:42.336Z","type":"message"}
{"nick":"isaacs","message":"and i'm not sure how we never caught it before.","date":"2013-06-24T16:02:52.291Z","type":"message"}
{"nick":"isaacs","message":"(re #5712)","date":"2013-06-24T16:03:07.147Z","type":"message"}
{"nick":"isaacs","message":"i have a fix, but it breaks a bunch of tests, in a way that makes me think my fix is clearly wrong.","date":"2013-06-24T16:03:23.278Z","type":"message"}
{"nick":"bajtos","date":"2013-06-24T16:04:38.224Z","type":"join"}
{"nick":"amartens","date":"2013-06-24T16:05:38.111Z","type":"join"}
{"nick":"bnoordhuis","message":"laibach. greatest band ever? you decide","date":"2013-06-24T16:09:04.898Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: define 'old'? old as in weeks or months or old as in bert's sense of humor?","date":"2013-06-24T16:09:45.597Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: somewhere between the two","date":"2013-06-24T16:10:19.049Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: at least since 0.6","date":"2013-06-24T16:10:22.342Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: we've always documented that 'finish' means \"completely done, you can destroy now without losing data\"","date":"2013-06-24T16:10:34.809Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: and we have tests that verify that SOME data was passed through, but not that ALL of it is","date":"2013-06-24T16:10:53.080Z","type":"message"}
{"nick":"bajtos","reason":"Ping timeout: 240 seconds","date":"2013-06-24T16:10:54.048Z","type":"quit"}
{"nick":"isaacs","message":"actually, we didn't document 'finish' prior to 0.10","date":"2013-06-24T16:11:00.257Z","type":"message"}
{"nick":"isaacs","message":"but people USED it that way, and our code seems to think that's how it works","date":"2013-06-24T16:11:08.040Z","type":"message"}
{"nick":"isaacs","message":"(insofar as our code seems to think, but i guess node's http layer is not so thoughtful, really ;)","date":"2013-06-24T16:11:30.065Z","type":"message"}
{"nick":"bnoordhuis","message":"hm, okay","date":"2013-06-24T16:12:18.345Z","type":"message"}
{"nick":"bnoordhuis","message":"is it harmful to node core? or does it only affect user code","date":"2013-06-24T16:12:38.161Z","type":"message"}
{"nick":"isaacs","message":"res.write(lotsOfData); res.end(); res.on('finish', res.destroy); <-- will not ever send the full response.","date":"2013-06-24T16:14:36.286Z","type":"message"}
{"nick":"isaacs","message":"kind of just comes back to the old \"http isn't actually compliant streams2-style streams\" issue, i guess","date":"2013-06-24T16:15:05.726Z","type":"message"}
{"nick":"isaacs","message":"(old as in, \"since 0.10\")","date":"2013-06-24T16:15:13.338Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess that qualifies as 'bad' :)","date":"2013-06-24T16:16:58.021Z","type":"message"}
{"nick":"qard","date":"2013-06-24T16:22:12.950Z","type":"join"}
{"nick":"dap","date":"2013-06-24T16:23:49.128Z","type":"join"}
{"nick":"hueniverse","reason":"Read error: Connection reset by peer","date":"2013-06-24T16:24:32.650Z","type":"quit"}
{"nick":"isaacs","message":"ohhh... i figured out what was wrong with my fix.","date":"2013-06-24T16:25:26.501Z","type":"message"}
{"nick":"isaacs","message":"sometimes the 'close' comes instead of 'drain'","date":"2013-06-24T16:25:33.168Z","type":"message"}
{"nick":"isaacs","message":"so i was never calling _finish in those cases.","date":"2013-06-24T16:25:41.242Z","type":"message"}
{"nick":"isaacs","message":"k, i'll clean up this patch, and it'll work as documented.","date":"2013-06-24T16:25:51.474Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: that sounds like what I was working on in the tls 0.10 client","date":"2013-06-24T16:29:21.439Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2013-06-24T16:30:07.801Z","type":"message"}
{"nick":"isaacs","message":"first, though, time for yoga practice.","date":"2013-06-24T16:30:29.824Z","type":"message"}
{"nick":"isaacs","action":"&","date":"2013-06-24T16:30:32.573Z","type":"action"}
{"nick":"LOUDBOT","message":"I WANT HER TO ONLY SCREAM WHEN MY COCK IS DEEP INSIDE HER. OTHERWISE SHE NEEDS TO KEEP HER FUCKING TRAP SHUT.","date":"2013-06-24T16:30:32.847Z","type":"message"}
{"nick":"isaacs","message":"whoa, loudbot, nsfw, dude!","date":"2013-06-24T16:30:42.016Z","type":"message"}
{"nick":"bnoordhuis","message":"you mean that's not water cooler talk in the states?","date":"2013-06-24T16:31:22.218Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: - With Mark, TJ and others, debugged muntar ECONNRESETs; determined that","date":"2013-06-24T16:32:02.917Z","type":"message"}
{"nick":"isaacs","message":"  these were due to node 0.10.x behavior; TJ developed a fix","date":"2013-06-24T16:32:05.948Z","type":"message"}
{"nick":"tjfontaine","message":"er","date":"2013-06-24T16:32:08.843Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: what was the 0.10.x behavior you fixed?","date":"2013-06-24T16:32:13.697Z","type":"message"}
{"nick":"isaacs","message":"just curiousl","date":"2013-06-24T16:32:15.065Z","type":"message"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-06-24T16:32:22.858Z","type":"quit"}
{"nick":"tjfontaine","message":"isaacs: tls client was waiting for end and finish, but finish had already fired","date":"2013-06-24T16:32:32.400Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: (could ask in scrum@ of course, but seems relevant here)","date":"2013-06-24T16:32:37.966Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: ahhh..","date":"2013-06-24T16:32:41.241Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-06-24T16:32:42.083Z","type":"message"}
{"nick":"tjfontaine","message":"https://gist.github.com/tjfontaine/7ab373992c16cbe8b4cc","date":"2013-06-24T16:32:42.832Z","type":"message"}
{"nick":"isaacs","message":"that's definitely related to this http issue, then, i think","date":"2013-06-24T16:32:50.311Z","type":"message"}
{"nick":"isaacs","message":"because we assume that 'finish' will come AFTER the response is flushed out","date":"2013-06-24T16:33:02.271Z","type":"message"}
{"nick":"isaacs","message":"which is generally always post-END","date":"2013-06-24T16:33:06.931Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-06-24T16:33:19.149Z","type":"message"}
{"nick":"isaacs","message":"ok, heading out.  i'll be back in a few hours.","date":"2013-06-24T16:33:27.804Z","type":"message"}
{"nick":"hueniverse","date":"2013-06-24T16:34:05.995Z","type":"join"}
{"nick":"st_luke","date":"2013-06-24T16:35:41.704Z","type":"join"}
{"nick":"bajtos","date":"2013-06-24T16:38:09.178Z","type":"join"}
{"nick":"bajtos","message":"bnoordhuis: but feel free to look at the changes, any suggestions for improvement are welcome","date":"2013-06-24T16:38:31.213Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 248 seconds","date":"2013-06-24T16:40:01.363Z","type":"quit"}
{"nick":"dominictarr","date":"2013-06-24T16:43:36.515Z","type":"join"}
{"nick":"bajtos","reason":"Ping timeout: 240 seconds","date":"2013-06-24T16:44:24.033Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-24T16:45:03.590Z","type":"nick"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-06-24T16:45:38.661Z","type":"quit"}
{"nick":"icarot","reason":"Ping timeout: 264 seconds","date":"2013-06-24T16:53:55.526Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-24T16:55:23.308Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-06-24T16:55:35.277Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-06-24T16:56:51.010Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-06-24T17:02:38.285Z","type":"quit"}
{"nick":"loladiro","date":"2013-06-24T17:04:42.380Z","type":"join"}
{"nick":"mikeal","date":"2013-06-24T17:07:18.363Z","type":"join"}
{"nick":"mmalecki","message":"bnoordhuis: surprisingly, turning idle GC off seemed to help","date":"2013-06-24T17:14:00.403Z","type":"message"}
{"nick":"brson","date":"2013-06-24T17:14:07.513Z","type":"join"}
{"nick":"dannycoates","date":"2013-06-24T17:18:35.750Z","type":"join"}
{"nick":"bnoordhuis","message":"mmalecki: yeah, that doesn't surprise me","date":"2013-06-24T17:24:56.011Z","type":"message"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2013-06-24T17:32:56.549Z","type":"quit"}
{"nick":"amartens1","date":"2013-06-24T17:37:19.076Z","type":"join"}
{"nick":"dominictarr","date":"2013-06-24T17:37:54.784Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 246 seconds","date":"2013-06-24T17:40:06.002Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-06-24T17:41:31.951Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-06-24T17:47:22.325Z","type":"quit"}
{"nick":"inolen","date":"2013-06-24T17:49:28.745Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 246 seconds","date":"2013-06-24T17:52:02.098Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-24T17:52:30.364Z","type":"nick"}
{"nick":"mikolalysenko","reason":"Ping timeout: 256 seconds","date":"2013-06-24T17:57:00.713Z","type":"quit"}
{"nick":"loladiro","reason":"Ping timeout: 256 seconds","date":"2013-06-24T17:58:59.719Z","type":"quit"}
{"nick":"loladiro","date":"2013-06-24T18:00:42.140Z","type":"join"}
{"nick":"sblom","date":"2013-06-24T18:01:09.736Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-06-24T18:01:52.462Z","type":"join"}
{"nick":"AvianFlu","date":"2013-06-24T18:04:09.074Z","type":"join"}
{"nick":"sblom","reason":"Ping timeout: 256 seconds","date":"2013-06-24T18:17:58.704Z","type":"quit"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-06-24T18:22:35.342Z","type":"quit"}
{"nick":"bnoordhuis","message":"tjfontaine: ping","date":"2013-06-24T18:22:52.373Z","type":"message"}
{"nick":"tjfontaine","message":"pong","date":"2013-06-24T18:23:43.813Z","type":"message"}
{"nick":"saghul","reason":"Ping timeout: 268 seconds","date":"2013-06-24T18:24:05.083Z","type":"quit"}
{"nick":"c4milo","date":"2013-06-24T18:24:14.427Z","type":"join"}
{"nick":"tjfontaine","message":"bnoordhuis: pong","date":"2013-06-24T18:24:23.491Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: sup tj? what's the status on that mmap patch?","date":"2013-06-24T18:24:53.965Z","type":"message"}
{"nick":"bnoordhuis","message":"the correct answer is 'merged upstream'","date":"2013-06-24T18:25:06.366Z","type":"message"}
{"nick":"tjfontaine","message":"heh, then I only have incorrect answers at the moment","date":"2013-06-24T18:25:19.396Z","type":"message"}
{"nick":"bnoordhuis","message":"have you opened a CR?","date":"2013-06-24T18:25:36.428Z","type":"message"}
{"nick":"tjfontaine","message":"I'm trying to work on a test case for this silly tls bug, and/or http bug depending on how you look at it","date":"2013-06-24T18:25:38.862Z","type":"message"}
{"nick":"tjfontaine","message":"no, I need to do their gerrit/reitveld/reviewboard steps, whichever one that is","date":"2013-06-24T18:26:14.737Z","type":"message"}
{"nick":"sblom","date":"2013-06-24T18:26:19.321Z","type":"join"}
{"nick":"bnoordhuis","message":"well, okay. when will you do it?","date":"2013-06-24T18:28:17.758Z","type":"message"}
{"nick":"tjfontaine","message":"hopefully before nodeconf, we also have fbsd in the jpc now, so I can probably keep an eye on regressions there as well","date":"2013-06-24T18:28:50.161Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 255 seconds","date":"2013-06-24T18:29:38.515Z","type":"quit"}
{"nick":"bnoordhuis","message":"jpc?","date":"2013-06-24T18:29:59.277Z","type":"message"}
{"nick":"tjfontaine","message":"joyent public cloud","date":"2013-06-24T18:30:15.249Z","type":"message"}
{"nick":"bnoordhuis","message":"ah, nice","date":"2013-06-24T18:30:46.849Z","type":"message"}
{"nick":"leonvv","date":"2013-06-24T18:38:00.045Z","type":"join"}
{"nick":"tjfontaine","message":"of course my trivial test case works","date":"2013-06-24T18:38:22.408Z","type":"message"}
{"nick":"tjfontaine","message":"oh well, maybe it didn't","date":"2013-06-24T18:39:36.732Z","type":"message"}
{"nick":"saghul","date":"2013-06-24T18:40:59.528Z","type":"join"}
{"nick":"sblom","reason":"Ping timeout: 248 seconds","date":"2013-06-24T18:41:37.322Z","type":"quit"}
{"nick":"mraleph","date":"2013-06-24T18:43:45.186Z","type":"part"}
{"nick":"sblom","date":"2013-06-24T18:44:55.739Z","type":"join"}
{"nick":"mikolalysenko","date":"2013-06-24T18:44:56.280Z","type":"join"}
{"nick":"tjfontaine","message":"well this certainly exercises a different kind of bug","date":"2013-06-24T18:46:00.752Z","type":"message"}
{"nick":"tjfontaine","message":"(node) warning: Recursive process.nextTick detected. This will break in the next version of node. Please use setImmediate for recursive deferral.","date":"2013-06-24T18:46:01.109Z","type":"message"}
{"nick":"tjfontaine","message":"RangeError: Maximum call stack size exceeded","date":"2013-06-24T18:46:04.220Z","type":"message"}
{"nick":"tjfontaine","message":"by george, I think I got it","date":"2013-06-24T18:47:22.514Z","type":"message"}
{"nick":"saghul","reason":"Ping timeout: 255 seconds","date":"2013-06-24T18:54:23.516Z","type":"quit"}
{"nick":"sblom","reason":"Ping timeout: 256 seconds","date":"2013-06-24T18:55:56.767Z","type":"quit"}
{"nick":"mikolalysenko","reason":"Ping timeout: 246 seconds","date":"2013-06-24T18:56:24.190Z","type":"quit"}
{"nick":"sblom","date":"2013-06-24T19:01:17.503Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-24T19:03:11.512Z","type":"nick"}
{"nick":"brson","date":"2013-06-24T19:08:51.537Z","type":"join"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-24T19:13:00.423Z","type":"nick"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-24T19:22:31.855Z","type":"quit"}
{"nick":"indutny","message":"tjfontaine: fbsd?","date":"2013-06-24T19:25:51.340Z","type":"message"}
{"nick":"indutny","message":"in joyent cloud","date":"2013-06-24T19:25:55.604Z","type":"message"}
{"nick":"indutny","message":"is it available to everyone?","date":"2013-06-24T19:26:01.035Z","type":"message"}
{"nick":"indutny","message":"oh right","date":"2013-06-24T19:27:19.947Z","type":"message"}
{"nick":"indutny","message":"gosh, that's totally awesome","date":"2013-06-24T19:27:26.754Z","type":"message"}
{"nick":"leonvv","reason":"Remote host closed the connection","date":"2013-06-24T19:29:22.611Z","type":"quit"}
{"nick":"loladiro","message":"bnoordhuis: Do you have time to discuss libuv's fs functionality? It currently being so separate from the rest of the library seems really unfortunate. I would implement something, but I figured I'd get your ideas first.","date":"2013-06-24T19:31:45.023Z","type":"message"}
{"nick":"bnoordhuis","message":"loladiro: shoot","date":"2013-06-24T19:32:30.598Z","type":"message"}
{"nick":"bnoordhuis","message":"i had the awesome idea to use nan tagging to store pointers in js numbers","date":"2013-06-24T19:33:19.553Z","type":"message"}
{"nick":"bnoordhuis","message":"but v8 is eating my nans :(","date":"2013-06-24T19:33:24.788Z","type":"message"}
{"nick":"bnoordhuis","message":"> var b = Buffer(8); b.fill(0xFF); b[6] = 0xF8; b[7] = 0x7F; var f = b.readDoubleLE(0); b.writeDoubleLE(f, 0); b","date":"2013-06-24T19:33:25.370Z","type":"message"}
{"nick":"bnoordhuis","message":"<Buffer 00 00 00 00 00 00 f8 7f>","date":"2013-06-24T19:33:28.652Z","type":"message"}
{"nick":"bnoordhuis","message":"i kind of knew it normalizes them. i'm still sad though :(","date":"2013-06-24T19:33:53.815Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: you talk to the v8 people regularly right?","date":"2013-06-24T19:36:33.540Z","type":"message"}
{"nick":"bnoordhuis","message":"do you know why they don't store doubles unboxed on x64?","date":"2013-06-24T19:37:01.924Z","type":"message"}
{"nick":"bnoordhuis","message":"it seems like an obvious optimization but there's probably a reason for it","date":"2013-06-24T19:37:42.545Z","type":"message"}
{"nick":"loladiro","message":"bnoordhuis: Alright, the main thing I really want is not having to worry about what kind of underlying I/O I'm using and just being able to call uv_write on everything (rather than checking and sometimes using uv_fs_write with an entirely different callback interface, etc.). Of course files are not streams, so I'm not sure how to properly integrate that with the uv_read mechanism. I also noticed that uv.h contains reference to a uv_file_t type ","date":"2013-06-24T19:38:14.607Z","type":"message"}
{"nick":"loladiro","message":"be implemented in the future. What was the thinking on that?","date":"2013-06-24T19:38:15.267Z","type":"message"}
{"nick":"bnoordhuis","message":"loladiro: uv_file_t is just a typedef for either HANDLE or int, nothing more","date":"2013-06-24T19:38:46.104Z","type":"message"}
{"nick":"loladiro","message":"I was referring to this comment:","date":"2013-06-24T19:39:16.019Z","type":"message"}
{"nick":"loladiro","message":"\"* uv_stream_t is the parent class of uv_tcp_t, uv_pipe_t, uv_tty_t, and","date":"2013-06-24T19:39:18.006Z","type":"message"}
{"nick":"loladiro","message":" * soon uv_file_t.\"","date":"2013-06-24T19:39:18.531Z","type":"message"}
{"nick":"loladiro","message":"I know about the uv_file typedef","date":"2013-06-24T19:39:26.655Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, that. that was wishful thinking from bert :)","date":"2013-06-24T19:39:31.561Z","type":"message"}
{"nick":"loladiro","message":"Figured ;). What was the reason this was never really tackled?","date":"2013-06-24T19:40:06.300Z","type":"message"}
{"nick":"bnoordhuis","message":"well, on-disk files and non-files are pretty disparate, both in libuv and in operating systems","date":"2013-06-24T19:40:57.278Z","type":"message"}
{"nick":"bnoordhuis","message":"the idea of making uv_write() your one-stop solution to everything i/o-based is kind of appealing","date":"2013-06-24T19:41:26.578Z","type":"message"}
{"nick":"bnoordhuis","message":"however, streams don't support positional writes, to name something","date":"2013-06-24T19:41:42.295Z","type":"message"}
{"nick":"bnoordhuis","message":"you could maybe concoct an uv_lseek() function but...","date":"2013-06-24T19:42:36.669Z","type":"message"}
{"nick":"loladiro","message":"hmm","date":"2013-06-24T19:46:13.433Z","type":"message"}
{"nick":"loladiro","message":"I don't actually know if that would be such a bad idea","date":"2013-06-24T19:49:59.517Z","type":"message"}
{"nick":"loladiro","message":"Or a separate uv_write and uv_pwrite that at least use the same callback","date":"2013-06-24T19:50:58.917Z","type":"message"}
{"nick":"bnoordhuis","message":"loladiro: well, it's something we can consider","date":"2013-06-24T19:51:31.189Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe open an issue to kickstart the discussion","date":"2013-06-24T19:51:49.223Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-06-24T19:52:52.805Z","type":"nick"}
{"nick":"loladiro","message":"bnoordhuis: Alright, will do.","date":"2013-06-24T19:53:02.554Z","type":"message"}
{"nick":"saghul","date":"2013-06-24T19:55:11.458Z","type":"join"}
{"nick":"mikolalysenko","date":"2013-06-24T19:55:33.984Z","type":"join"}
{"nick":"c4milo","date":"2013-06-24T20:00:36.342Z","type":"join"}
{"nick":"st_luke","date":"2013-06-24T20:00:57.362Z","type":"join"}
{"nick":"tjfontaine","message":"isaacs: when you're around can you talk to me about #5712 and its relation to the tls bug I was chasing yesterday","date":"2013-06-24T20:11:17.705Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: i'm back","date":"2013-06-24T20:13:50.916Z","type":"message"}
{"nick":"tjfontaine","message":"ok, so","date":"2013-06-24T20:14:07.036Z","type":"message"}
{"nick":"tjfontaine","message":"the real fix to my issue should be the fix in the http layer, right?","date":"2013-06-24T20:14:27.200Z","type":"message"}
{"nick":"mikolalysenko","reason":"Ping timeout: 256 seconds","date":"2013-06-24T20:15:16.790Z","type":"quit"}
{"nick":"tjfontaine","message":"or should the tls client also guard against this case?","date":"2013-06-24T20:15:22.337Z","type":"message"}
{"nick":"isaacs","message":"i think 'finish' should mean \"ended and flushed\"","date":"2013-06-24T20:16:46.365Z","type":"message"}
{"nick":"isaacs","message":"ended, flushed, drained, all done","date":"2013-06-24T20:16:51.352Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-06-24T20:18:26.420Z","type":"nick"}
{"nick":"isaacs","message":"tjfontaine: so, i wonder if there IS a case where an http 'end' might still happen post-'finish'","date":"2013-06-24T20:19:39.121Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: that was the nut of the bug you were seeing, right?","date":"2013-06-24T20:20:35.717Z","type":"message"}
{"nick":"tjfontaine","message":"in this case what is happening is a PUT that returns 404, connection:close, finish has fired, but by the time tls gets to the shutdown it still thinks it's waiting to hear that finish and then only sees an end","date":"2013-06-24T20:20:54.010Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-06-24T20:21:10.125Z","type":"quit"}
{"nick":"tjfontaine","message":"but I'm having a hell of a time reproducing it standalone","date":"2013-06-24T20:21:38.011Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 255 seconds","date":"2013-06-24T20:24:50.489Z","type":"quit"}
{"nick":"mikolalysenko","date":"2013-06-24T20:25:58.514Z","type":"join"}
{"nick":"isaacs","message":"i see","date":"2013-06-24T20:26:57.521Z","type":"message"}
{"nick":"isaacs","message":"there probably still ought to be a guard in tls.js","date":"2013-06-24T20:27:13.774Z","type":"message"}
{"nick":"isaacs","message":"but i think i could probably make that happne","date":"2013-06-24T20:27:25.243Z","type":"message"}
{"nick":"isaacs","message":"one sec","date":"2013-06-24T20:27:26.269Z","type":"message"}
{"nick":"tjfontaine","message":"which happen?","date":"2013-06-24T20:27:42.461Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: the tls stuff","date":"2013-06-24T20:48:05.268Z","type":"message"}
{"nick":"tjfontaine","message":"the guard like I did in https://gist.github.com/tjfontaine/7ab373992c16cbe8b4cc or the test case for it?","date":"2013-06-24T20:48:43.853Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: a reproducible test case.","date":"2013-06-24T20:49:02.092Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2013-06-24T20:49:04.653Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: actually, my fix for finish busts this...","date":"2013-06-24T20:49:08.096Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: arguably, in a way that is not bad.","date":"2013-06-24T20:49:19.385Z","type":"message"}
{"nick":"isaacs","message":"but, there's a client-side issue here as well.","date":"2013-06-24T20:49:28.473Z","type":"message"}
{"nick":"isaacs","message":"if you PUT, and try to upload a lot of data, and the server, without reading all the data, sends a 404 with connection:close","date":"2013-06-24T20:49:50.170Z","type":"message"}
{"nick":"isaacs","message":"your write will fail.","date":"2013-06-24T20:49:54.833Z","type":"message"}
{"nick":"isaacs","message":"with EPIPE","date":"2013-06-24T20:49:57.451Z","type":"message"}
{"nick":"isaacs","message":"because the server destroys the connection","date":"2013-06-24T20:50:03.778Z","type":"message"}
{"nick":"tjfontaine","message":"I was working on the client side, with an agent it tries to reuse the connection and you generally get a RESET because the (non-default) agent dispatches it again","date":"2013-06-24T20:51:15.151Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-06-24T20:51:50.777Z","type":"quit"}
{"nick":"isaacs","message":"right","date":"2013-06-24T20:52:01.301Z","type":"message"}
{"nick":"isaacs","message":"i'm not sure what the right answer is in this case.","date":"2013-06-24T20:52:09.247Z","type":"message"}
{"nick":"isaacs","message":"where the write() buffer is all full and waiting, and you get a close from the server","date":"2013-06-24T20:52:20.242Z","type":"message"}
{"nick":"isaacs","message":"it seems like it's the server's prerogative to not read() the request body","date":"2013-06-24T20:52:28.485Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-06-24T20:53:14.448Z","type":"message"}
{"nick":"isaacs","message":"but it also seems like, if the client sees a connection:close, and then a response, it should give up or something","date":"2013-06-24T20:55:16.338Z","type":"message"}
{"nick":"isaacs","message":"i don't know","date":"2013-06-24T20:55:19.403Z","type":"message"}
{"nick":"`3rdEden","new_nick":"`3E|Zz","date":"2013-06-24T20:55:33.943Z","type":"nick"}
{"nick":"tjfontaine","message":"well the client was trying to close, but it was stuck in established waiting for a world that would never come","date":"2013-06-24T20:56:09.987Z","type":"message"}
{"nick":"tjfontaine","message":"I dunno","date":"2013-06-24T20:56:20.795Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-06-24T20:57:46.986Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: can you see if this fixes your tls issue? https://github.com/joyent/node/pull/5739","date":"2013-06-24T20:58:16.261Z","type":"message"}
{"nick":"isaacs","message":"oh, wait, that's 0.10, not 0.8, huh?","date":"2013-06-24T20:58:28.372Z","type":"message"}
{"nick":"tjfontaine","message":"no this is 0.10 client that I was debugging","date":"2013-06-24T20:58:39.053Z","type":"message"}
{"nick":"mikeal","date":"2013-06-24T20:58:58.342Z","type":"join"}
{"nick":"isaacs","message":"kewl","date":"2013-06-24T20:59:01.750Z","type":"message"}
{"nick":"tjfontaine","message":"conversation partitioning","date":"2013-06-24T20:59:20.694Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: let's keep this here, i'm getting confused :)","date":"2013-06-24T20:59:23.241Z","type":"message"}
{"nick":"isaacs","action":"sends some carrier pigeons to FiDi...","date":"2013-06-24T20:59:35.232Z","type":"action"}
{"nick":"tjfontaine","message":"anyway I have to run to that meeting with max, but I will try as soon as that's done","date":"2013-06-24T20:59:39.829Z","type":"message"}
{"nick":"isaacs","action":"and a telegraph to Alameda","date":"2013-06-24T20:59:44.218Z","type":"action"}
{"nick":"isaacs","message":"right","date":"2013-06-24T20:59:47.681Z","type":"message"}
{"nick":"isaacs","message":"thanks, lmk if that fixes the thing youer' seeing.  i'll try to repro","date":"2013-06-24T20:59:56.156Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: and actually, i take back what I said about the EPIPE thing.  the client should raise an error, because the write() failed.","date":"2013-06-24T21:01:01.742Z","type":"message"}
{"nick":"isaacs","message":"so EPIPE is completely appropriate here.","date":"2013-06-24T21:01:06.769Z","type":"message"}
{"nick":"isaacs","message":"if you're uploading a bug body, clearly you don't expect to be shut down","date":"2013-06-24T21:01:25.119Z","type":"message"}
{"nick":"mikeal","reason":"Ping timeout: 268 seconds","date":"2013-06-24T21:03:48.077Z","type":"quit"}
{"nick":"isaacs","message":"s/bug/big/","date":"2013-06-24T21:08:57.113Z","type":"message"}
{"nick":"tjfontaine","message":"well we get a reset because the fd is still there, and the server says \"hey wtf I already told you to close\"","date":"2013-06-24T21:09:11.464Z","type":"message"}
{"nick":"papertigers","reason":"Quit: papertigers","date":"2013-06-24T21:14:54.592Z","type":"quit"}
{"nick":"mmalecki","message":"who'd I ask for help if I wanted to add a dtrace probe to node?","date":"2013-06-24T21:22:22.455Z","type":"message"}
{"nick":"mikeal","date":"2013-06-24T21:29:14.261Z","type":"join"}
{"nick":"rendar","date":"2013-06-24T21:39:07.218Z","type":"quit"}
{"nick":"groundwater","reason":"Quit: groundwater","date":"2013-06-24T21:54:07.584Z","type":"quit"}
{"nick":"icarot","date":"2013-06-24T21:56:09.947Z","type":"join"}
{"nick":"groundwater","date":"2013-06-24T22:07:03.469Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-06-24T22:08:50.119Z","type":"quit"}
{"nick":"groundwater","reason":"Client Quit","date":"2013-06-24T22:10:23.418Z","type":"quit"}
{"nick":"hz","date":"2013-06-24T22:13:52.947Z","type":"quit"}
{"nick":"mikolalysenko","reason":"Ping timeout: 248 seconds","date":"2013-06-24T22:18:09.556Z","type":"quit"}
{"nick":"groundwater","date":"2013-06-24T22:19:53.045Z","type":"join"}
{"nick":"loladiro","date":"2013-06-24T22:23:02.522Z","type":"join"}
{"nick":"tjfontaine","message":"mmalecki: me I guess","date":"2013-06-24T22:32:41.758Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-06-24T22:35:12.116Z","type":"quit"}
{"nick":"mikeal","date":"2013-06-24T22:35:59.790Z","type":"join"}
{"nick":"c4milo","date":"2013-06-24T22:37:46.249Z","type":"join"}
{"nick":"tjfontaine","message":"isaacs: no, that change didn't fix the ECONNRESET I was seeing","date":"2013-06-24T22:40:15.451Z","type":"message"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-06-24T22:40:42.086Z","type":"quit"}
{"nick":"mikolalysenko","date":"2013-06-24T22:58:58.540Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-06-24T23:11:14.338Z","type":"quit"}
{"nick":"sblom","reason":"Ping timeout: 255 seconds","date":"2013-06-24T23:13:35.546Z","type":"quit"}
{"nick":"mmalecki","message":"tjfontaine: so how'd I go about adding a host field to the probe?","date":"2013-06-24T23:17:36.367Z","type":"message"}
{"nick":"mmalecki","message":"like req.headers.host?","date":"2013-06-24T23:17:43.524Z","type":"message"}
{"nick":"timoxley","date":"2013-06-24T23:18:36.041Z","type":"join"}
{"nick":"tjfontaine","message":"mmalecki: looking in the v0.10 source tree you would add that field to the struct and the translator in src/node_dtrace.h and src/node.d","date":"2013-06-24T23:20:16.907Z","type":"message"}
{"nick":"tjfontaine","message":"mmalecki: then in src/node_dtrace.cc in HTTP_SERVER* you'll want to fill that field in","date":"2013-06-24T23:20:51.380Z","type":"message"}
{"nick":"tjfontaine","message":"the macros generally","date":"2013-06-24T23:21:02.563Z","type":"message"}
{"nick":"tjfontaine","message":"to be done nicely we'll want an SLURP_HTTP_CONNECTION that uses SLURP_CONNECTION but adds that field","date":"2013-06-24T23:21:56.171Z","type":"message"}
{"nick":"tjfontaine","message":"presuming this is on the http server side of the probes?","date":"2013-06-24T23:22:10.479Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-06-24T23:22:17.146Z","type":"quit"}
{"nick":"mmalecki","message":"yup, server side","date":"2013-06-24T23:22:44.465Z","type":"message"}
{"nick":"mmalecki","message":"okay, will give it a try, thanks","date":"2013-06-24T23:22:54.172Z","type":"message"}
{"nick":"mmalecki","message":"(assuming that you guys want such a thing)","date":"2013-06-24T23:23:01.716Z","type":"message"}
{"nick":"tjfontaine","message":"ok, because there are some outstanding bugs in the http client stuff","date":"2013-06-24T23:23:12.877Z","type":"message"}
{"nick":"tjfontaine","message":"mmalecki: it seems useful to me, but also something that probably could be instrumented with dtrace-provider","date":"2013-06-24T23:23:43.398Z","type":"message"}
{"nick":"tjfontaine","message":"because the builtin http server doesn't really care much about vhost style operations","date":"2013-06-24T23:24:42.241Z","type":"message"}
{"nick":"mikeal","date":"2013-06-24T23:28:25.361Z","type":"join"}
{"nick":"c4milo_","date":"2013-06-24T23:31:19.409Z","type":"join"}
{"nick":"c4milo_","reason":"Remote host closed the connection","date":"2013-06-24T23:31:59.560Z","type":"quit"}
{"nick":"dannycoates","reason":"Remote host closed the connection","date":"2013-06-24T23:32:10.860Z","type":"quit"}
{"nick":"c4milo_","date":"2013-06-24T23:32:16.339Z","type":"join"}
{"nick":"c4milo_","reason":"Remote host closed the connection","date":"2013-06-24T23:39:21.898Z","type":"quit"}
{"nick":"loladiro","date":"2013-06-24T23:50:57.022Z","type":"join"}
{"nick":"groundwater","reason":"Quit: groundwater","date":"2013-06-24T23:51:12.485Z","type":"quit"}
{"nick":"isaacs","message":"tjfontaine: that's too bad","date":"2013-06-24T23:52:55.784Z","type":"message"}
{"nick":"tjfontaine","message":"indeed","date":"2013-06-24T23:53:50.646Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: doing the same test from my GH-5712 branch with https also fails.","date":"2013-06-24T23:53:55.800Z","type":"message"}
{"nick":"isaacs","message":"times out","date":"2013-06-24T23:53:58.812Z","type":"message"}
{"nick":"tjfontaine","message":"can you add a debug  line abovee the waiting fn to see if it's also stuck there for you?","date":"2013-06-24T23:54:26.173Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: what was the guard that you put in tls.js?","date":"2013-06-24T23:54:26.448Z","type":"message"}
{"nick":"tjfontaine","message":"https://gist.github.com/tjfontaine/7ab373992c16cbe8b4cc","date":"2013-06-24T23:54:32.605Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: nope.","date":"2013-06-24T23:55:35.992Z","type":"message"}
{"nick":"isaacs","message":"has no effect","date":"2013-06-24T23:55:41.522Z","type":"message"}
{"nick":"tjfontaine","message":"is this._finished false there?","date":"2013-06-24T23:57:09.551Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: the res.finish never emits","date":"2013-06-24T23:58:01.265Z","type":"message"}
{"nick":"tjfontaine","message":"right, so before your patch finish had already emit'd","date":"2013-06-24T23:58:18.344Z","type":"message"}
{"nick":"tjfontaine","message":"and now it's stuck in never land","date":"2013-06-24T23:58:30.348Z","type":"message"}
{"nick":"tjfontaine","message":"this particular failure case feels related to specifically the tls client","date":"2013-06-24T23:59:05.384Z","type":"message"}
