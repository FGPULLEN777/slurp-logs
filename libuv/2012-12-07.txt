{"nick":"ircretary","reason":"Remote host closed the connection","date":"2012-12-07T00:00:00.908Z","type":"quit"}
{"nick":"ircretary","date":"2012-12-07T00:00:07.847Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-07T00:04:03.395Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-12-07T00:07:40.070Z","type":"quit"}
{"nick":"mikeal","date":"2012-12-07T00:26:02.399Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-12-07T00:32:27.981Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-12-07T00:39:31.749Z","type":"quit"}
{"nick":"ArmyOfBruce","reason":"Excess Flood","date":"2012-12-07T00:57:09.370Z","type":"quit"}
{"nick":"ArmyOfBruce","date":"2012-12-07T00:57:40.749Z","type":"join"}
{"nick":"ArmyOfBruce","reason":"Excess Flood","date":"2012-12-07T00:59:28.068Z","type":"quit"}
{"nick":"ArmyOfBruce","date":"2012-12-07T00:59:59.235Z","type":"join"}
{"nick":"ArmyOfBruce","reason":"Excess Flood","date":"2012-12-07T01:24:03.027Z","type":"quit"}
{"nick":"ArmyOfBruce","date":"2012-12-07T01:24:33.845Z","type":"join"}
{"nick":"loladiro","date":"2012-12-07T01:26:51.650Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2012-12-07T01:32:33.307Z","type":"quit"}
{"nick":"EhevuTov","date":"2012-12-07T01:33:26.266Z","type":"join"}
{"nick":"EhevuTov","reason":"Ping timeout: 248 seconds","date":"2012-12-07T01:38:29.082Z","type":"quit"}
{"nick":"abraxas","date":"2012-12-07T01:40:20.252Z","type":"join"}
{"nick":"AvianFlu","new_nick":"SushianFlu","date":"2012-12-07T01:40:47.322Z","type":"nick"}
{"nick":"mjr_","date":"2012-12-07T01:46:22.185Z","type":"join"}
{"nick":"loladiro","reason":"Read error: Connection reset by peer","date":"2012-12-07T01:59:33.800Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-07T01:59:52.919Z","type":"join"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-12-07T02:01:48.008Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2012-12-07T02:02:55.735Z","type":"quit"}
{"nick":"benoitc","date":"2012-12-07T02:09:28.153Z","type":"join"}
{"nick":"SushianFlu","new_nick":"AvianFlu","date":"2012-12-07T02:20:18.197Z","type":"nick"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2012-12-07T02:42:16.679Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2012-12-07T03:07:48.457Z","type":"quit"}
{"nick":"benoitc","date":"2012-12-07T03:16:28.293Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-12-07T03:40:32.750Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-07T03:50:52.151Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 252 seconds","date":"2012-12-07T03:52:35.783Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2012-12-07T04:08:10.926Z","type":"quit"}
{"nick":"benoitc","date":"2012-12-07T04:09:28.358Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-12-07T04:26:04.302Z","type":"join"}
{"nick":"bnoordhuis","date":"2012-12-07T04:35:49.951Z","type":"join"}
{"nick":"bnoordhuis","message":"morning","date":"2012-12-07T04:38:01.570Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-12-07T04:38:09.760Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2012-12-07T05:08:32.251Z","type":"quit"}
{"nick":"jmar777","date":"2012-12-07T05:08:46.302Z","type":"join"}
{"nick":"benoitc","date":"2012-12-07T05:16:00.287Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2012-12-07T05:17:06.671Z","type":"quit"}
{"nick":"jmar777","date":"2012-12-07T05:19:11.387Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2012-12-07T05:24:27.351Z","type":"quit"}
{"nick":"bradleymeck","date":"2012-12-07T05:37:28.278Z","type":"join"}
{"nick":"bradleymeck","reason":"Client Quit","date":"2012-12-07T05:37:55.448Z","type":"quit"}
{"nick":"EhevuTov","date":"2012-12-07T06:05:14.742Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2012-12-07T06:08:54.064Z","type":"quit"}
{"nick":"benoitc","date":"2012-12-07T06:14:00.654Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2012-12-07T06:32:30.377Z","type":"quit"}
{"nick":"benoitc","date":"2012-12-07T06:36:31.411Z","type":"join"}
{"nick":"kristate","date":"2012-12-07T06:42:02.785Z","type":"join"}
{"nick":"felixge","date":"2012-12-07T06:58:58.761Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-12-07T06:58:58.761Z","type":"quit"}
{"nick":"felixge","date":"2012-12-07T06:58:58.761Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: morning","date":"2012-12-07T07:12:44.454Z","type":"message"}
{"nick":"warz","date":"2012-12-07T07:14:46.935Z","type":"quit"}
{"nick":"rendar","date":"2012-12-07T07:33:47.845Z","type":"join"}
{"nick":"mikeal","date":"2012-12-07T08:00:35.746Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: morning fedor","date":"2012-12-07T08:13:24.169Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so about select() stuff","date":"2012-12-07T08:14:18.461Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: what about it?","date":"2012-12-07T08:14:33.001Z","type":"message"}
{"nick":"indutny","message":"err","date":"2012-12-07T08:14:37.835Z","type":"message"}
{"nick":"indutny","message":"https://github.com/joyent/libuv/pull/622","date":"2012-12-07T08:14:38.114Z","type":"message"}
{"nick":"indutny","message":"the same :)","date":"2012-12-07T08:14:40.286Z","type":"message"}
{"nick":"bnoordhuis","message":"want me to review it again?","date":"2012-12-07T08:15:13.182Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2012-12-07T08:15:55.254Z","type":"message"}
{"nick":"indutny","message":"I'm especially worried about returning EAGAIN","date":"2012-12-07T08:16:08.722Z","type":"message"}
{"nick":"indutny","message":"so please take a look at code","date":"2012-12-07T08:16:16.123Z","type":"message"}
{"nick":"indutny","message":"and let me know what you think about returning EAGAIN in such cases","date":"2012-12-07T08:16:28.395Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i mentioned that yesterday, didn't i?","date":"2012-12-07T08:21:43.885Z","type":"message"}
{"nick":"bnoordhuis","message":"as in, why mask the actual error with EAGAIN?","date":"2012-12-07T08:21:54.835Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: btw, https://github.com/joyent/node/issues/4386","date":"2012-12-07T08:24:21.666Z","type":"message"}
{"nick":"indutny","message":"well","date":"2012-12-07T08:24:23.136Z","type":"message"}
{"nick":"indutny","message":"what do you think it should be instead?","date":"2012-12-07T08:24:32.299Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-07T08:24:37.348Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: the actual error","date":"2012-12-07T08:24:39.320Z","type":"message"}
{"nick":"indutny","message":"how to get it?","date":"2012-12-07T08:24:43.040Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: return uv__set_sys_error(loop, errno)","date":"2012-12-07T08:24:58.401Z","type":"message"}
{"nick":"indutny","message":"why do you think errno contains anything useful?","date":"2012-12-07T08:25:13.912Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: what makes you think it doesn't?","date":"2012-12-07T08:25:49.951Z","type":"message"}
{"nick":"indutny","message":"well, uv_async_init does some stuff that probably doesn't","date":"2012-12-07T08:26:08.381Z","type":"message"}
{"nick":"indutny","message":"let me check","date":"2012-12-07T08:26:10.623Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: let's make sure we're on the same page here","date":"2012-12-07T08:26:27.217Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2012-12-07T08:26:32.446Z","type":"message"}
{"nick":"indutny","message":"it doesn't","date":"2012-12-07T08:26:34.559Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-07T08:26:35.024Z","type":"message"}
{"nick":"bnoordhuis","message":"this is about the error path in uv__stream_init where kqueue() fails due to EMFILE or what have you","date":"2012-12-07T08:26:43.818Z","type":"message"}
{"nick":"indutny","message":"no","date":"2012-12-07T08:27:02.127Z","type":"message"}
{"nick":"indutny","message":"not about this","date":"2012-12-07T08:27:03.728Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, what then?","date":"2012-12-07T08:27:22.337Z","type":"message"}
{"nick":"indutny","message":"there're a lot of other initialization in that method","date":"2012-12-07T08:27:52.741Z","type":"message"}
{"nick":"indutny","message":"like initializing semaphore, mutex, async handle","date":"2012-12-07T08:28:03.322Z","type":"message"}
{"nick":"indutny","message":"and if one fails - whole method will fail","date":"2012-12-07T08:28:18.038Z","type":"message"}
{"nick":"indutny","message":"ok, anyway","date":"2012-12-07T08:28:54.117Z","type":"message"}
{"nick":"indutny","message":"I've updated patch","date":"2012-12-07T08:28:57.477Z","type":"message"}
{"nick":"indutny","message":"please check it","date":"2012-12-07T08:29:00.162Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ^","date":"2012-12-07T08:29:05.629Z","type":"message"}
{"nick":"indutny","message":"while I'll read yours","date":"2012-12-07T08:29:11.651Z","type":"message"}
{"nick":"indutny","message":";)","date":"2012-12-07T08:29:12.788Z","type":"message"}
{"nick":"mjr_","reason":"Quit: mjr_","date":"2012-12-07T08:31:19.076Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: commented https://github.com/joyent/node/pull/4386","date":"2012-12-07T08:31:38.004Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i'm off to do the groceries, back in an hour or so","date":"2012-12-07T08:38:32.178Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2012-12-07T08:38:34.404Z","type":"quit"}
{"nick":"indutny","message":"ok","date":"2012-12-07T08:38:36.216Z","type":"message"}
{"nick":"bnoordhuis","message":"provided i don't get snowed in","date":"2012-12-07T08:38:37.267Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2012-12-07T08:38:41.639Z","type":"message"}
{"nick":"indutny","message":"is it snowy in NL?","date":"2012-12-07T08:38:44.614Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2012-12-07T08:38:46.911Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-12-07T08:39:03.850Z","type":"message"}
{"nick":"EhevuTov","date":"2012-12-07T08:39:08.601Z","type":"join"}
{"nick":"indutny","message":"it's very snowy in Moscow too","date":"2012-12-07T08:39:09.222Z","type":"message"}
{"nick":"indutny","message":"I can't even imagine how much snow is in Omsk right now","date":"2012-12-07T08:39:20.216Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't doubt that for a second :)","date":"2012-12-07T08:39:23.523Z","type":"message"}
{"nick":"bnoordhuis","message":"why are you in moscow btw?","date":"2012-12-07T08:39:28.584Z","type":"message"}
{"nick":"indutny","message":"hehe","date":"2012-12-07T08:39:29.089Z","type":"message"}
{"nick":"indutny","message":"I like working there","date":"2012-12-07T08:39:38.447Z","type":"message"}
{"nick":"indutny","message":"I mean","date":"2012-12-07T08:39:43.170Z","type":"message"}
{"nick":"bnoordhuis","message":"ah okay, good reason","date":"2012-12-07T08:39:45.097Z","type":"message"}
{"nick":"indutny","message":"city is much better","date":"2012-12-07T08:39:46.273Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, gotta be afk. biab","date":"2012-12-07T08:39:53.748Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-07T08:39:56.368Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2012-12-07T08:40:56.571Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-12-07T08:51:28.082Z","type":"quit"}
{"nick":"mikeal","date":"2012-12-07T08:52:18.145Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2012-12-07T09:06:01.763Z","type":"quit"}
{"nick":"joshthecoder","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-12-07T09:13:06.295Z","type":"quit"}
{"nick":"`3rdEden","date":"2012-12-07T09:17:49.388Z","type":"join"}
{"nick":"CoverSlide","reason":"Read error: Operation timed out","date":"2012-12-07T09:35:00.714Z","type":"quit"}
{"nick":"loladiro","date":"2012-12-07T09:37:02.676Z","type":"part"}
{"nick":"felixge","reason":"Quit: http://www.debuggable.com/","date":"2012-12-07T09:37:11.171Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: back?","date":"2012-12-07T09:37:38.298Z","type":"message"}
{"nick":"hz","date":"2012-12-07T10:13:35.109Z","type":"join"}
{"nick":"kristate","reason":"Read error: Connection reset by peer","date":"2012-12-07T10:29:02.610Z","type":"quit"}
{"nick":"kristate","date":"2012-12-07T10:29:25.710Z","type":"join"}
{"nick":"felixge","date":"2012-12-07T10:49:40.311Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-12-07T10:49:40.311Z","type":"quit"}
{"nick":"felixge","date":"2012-12-07T10:49:40.311Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: back","date":"2012-12-07T11:30:28.890Z","type":"message"}
{"nick":"bnoordhuis","message":"that trip to the supermarket took slightly longer than anticipated :)","date":"2012-12-07T11:30:52.614Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-12-07T11:32:22.957Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-07T11:32:24.144Z","type":"message"}
{"nick":"indutny","message":"I've just came here too","date":"2012-12-07T11:32:27.706Z","type":"message"}
{"nick":"indutny","message":"brb","date":"2012-12-07T11:32:28.404Z","type":"message"}
{"nick":"indutny","message":"back","date":"2012-12-07T11:37:12.028Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so","date":"2012-12-07T11:37:13.876Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: does it looks good to you now?","date":"2012-12-07T11:37:19.973Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-12-07T11:37:53.364Z","type":"message"}
{"nick":"indutny","message":"I see now","date":"2012-12-07T11:37:54.628Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't feel strongly about it","date":"2012-12-07T11:39:31.316Z","type":"message"}
{"nick":"bnoordhuis","message":"but like i said, it's a pretty common pattern in libuv","date":"2012-12-07T11:39:38.803Z","type":"message"}
{"nick":"bnoordhuis","message":"and i don't like seeing casts all over the place, it distracts from the actual logic","date":"2012-12-07T11:40:00.251Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-07T11:40:09.351Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ah so this mmap() stuff is just to not use brk","date":"2012-12-07T11:40:43.264Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ok, lgtm then","date":"2012-12-07T11:40:46.253Z","type":"message"}
{"nick":"bnoordhuis","message":"cool","date":"2012-12-07T11:40:48.748Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll let bertje check it as well, in case i break windows","date":"2012-12-07T11:41:06.482Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-12-07T11:41:28.249Z","type":"message"}
{"nick":"indutny","message":"is windows POSIX too?","date":"2012-12-07T11:41:35.337Z","type":"message"}
{"nick":"indutny","message":":D","date":"2012-12-07T11:41:36.349Z","type":"message"}
{"nick":"bnoordhuis","message":"au contraire","date":"2012-12-07T11:41:48.684Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll let him check if it doesn't break the windows build","date":"2012-12-07T11:41:56.629Z","type":"message"}
{"nick":"bnoordhuis","message":"so all this snow is great","date":"2012-12-07T11:42:58.130Z","type":"message"}
{"nick":"bnoordhuis","message":"if it were actually freezing","date":"2012-12-07T11:43:03.325Z","type":"message"}
{"nick":"bnoordhuis","message":"but it's a few degrees above zero so it's all turning into slush :/","date":"2012-12-07T11:43:13.872Z","type":"message"}
{"nick":"indutny","message":"heh","date":"2012-12-07T11:43:23.618Z","type":"message"}
{"nick":"indutny","message":"the same was in moscow a couple of days ago","date":"2012-12-07T11:43:29.194Z","type":"message"}
{"nick":"indutny","message":"it was all in water","date":"2012-12-07T11:43:34.735Z","type":"message"}
{"nick":"indutny","message":"and snow","date":"2012-12-07T11:43:42.180Z","type":"message"}
{"nick":"indutny","message":"mixed","date":"2012-12-07T11:43:43.376Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah. muck","date":"2012-12-07T11:43:48.918Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: so hey, do the channels freeze in the winter?","date":"2012-12-07T11:43:55.826Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: yes. people skate on them","date":"2012-12-07T11:44:06.443Z","type":"message"}
{"nick":"mmalecki","message":"I actually want to get my skates","date":"2012-12-07T11:44:08.211Z","type":"message"}
{"nick":"mmalecki","message":"WIN.","date":"2012-12-07T11:44:12.473Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, it's fun","date":"2012-12-07T11:44:18.282Z","type":"message"}
{"nick":"mmalecki","message":"actually, I'll have to buy them there","date":"2012-12-07T11:46:09.827Z","type":"message"}
{"nick":"mmalecki","message":"I don't really want to pack them into my bag","date":"2012-12-07T11:46:20.795Z","type":"message"}
{"nick":"bnoordhuis","message":"they're not that expensive here","date":"2012-12-07T11:47:38.295Z","type":"message"}
{"nick":"bnoordhuis","message":"you can probably even hire them","date":"2012-12-07T11:47:43.359Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm. native linux aio works with pipes, files but not ttys","date":"2012-12-07T11:48:08.023Z","type":"message"}
{"nick":"bnoordhuis","message":"oh well, it's still an improvement over 2.6 kernels","date":"2012-12-07T11:48:58.837Z","type":"message"}
{"nick":"indutny","message":"huh?","date":"2012-12-07T11:57:49.631Z","type":"message"}
{"nick":"indutny","message":"ttys a fucked","date":"2012-12-07T11:58:00.685Z","type":"message"}
{"nick":"indutny","message":"and noone loves them","date":"2012-12-07T11:58:12.788Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: so should I translate tcp.c to use that #define?","date":"2012-12-07T11:58:21.275Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: uv__stream_fd","date":"2012-12-07T11:58:23.942Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: yes, for the sake of consistency","date":"2012-12-07T11:58:50.399Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-07T11:58:54.283Z","type":"message"}
{"nick":"indutny","message":"what about assignments to io_watcher.fd ?","date":"2012-12-07T11:59:00.518Z","type":"message"}
{"nick":"indutny","message":"I currently left them untouched","date":"2012-12-07T11:59:13.379Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I feel like I want to rewrite openssl","date":"2012-12-07T12:02:52.688Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: but then I feel like noone will use it in next few years of hard work","date":"2012-12-07T12:03:03.368Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: because it just won't be mature enough","date":"2012-12-07T12:03:12.785Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: you're also not the first to do it, cf. gnutls, polarssl, etc.","date":"2012-12-07T12:03:25.457Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: yeah, yeah","date":"2012-12-07T12:03:33.266Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: actually, the only feature I really need is isolates","date":"2012-12-07T12:03:41.656Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: their fine grained locking is such a mess","date":"2012-12-07T12:04:06.738Z","type":"message"}
{"nick":"indutny","message":"and generates a lot of CPU noise","date":"2012-12-07T12:04:27.159Z","type":"message"}
{"nick":"indutny","message":"actually, I think node can be slow because of this too","date":"2012-12-07T12:04:39.683Z","type":"message"}
{"nick":"indutny","message":"setting memory barriers on almost every ssl call is definitely bad idea","date":"2012-12-07T12:04:56.131Z","type":"message"}
{"nick":"indutny","message":"it just kills pipelining","date":"2012-12-07T12:05:04.364Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: what do you think?","date":"2012-12-07T12:05:08.897Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: what i always say when you bring up performance issues","date":"2012-12-07T12:05:32.874Z","type":"message"}
{"nick":"bnoordhuis","message":"have you profiled it? :)","date":"2012-12-07T12:05:36.323Z","type":"message"}
{"nick":"indutny","message":"well yes","date":"2012-12-07T12:05:43.344Z","type":"message"}
{"nick":"indutny","message":"it's slower than nginx and stud","date":"2012-12-07T12:05:47.886Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-12-07T12:05:49.467Z","type":"message"}
{"nick":"indutny","message":"even moving everything blocking to threads doesn't help much","date":"2012-12-07T12:06:09.495Z","type":"message"}
{"nick":"bnoordhuis","message":"but do pthreads functions actually show up?","date":"2012-12-07T12:06:12.553Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2012-12-07T12:06:18.285Z","type":"message"}
{"nick":"indutny","message":"not much","date":"2012-12-07T12:06:20.199Z","type":"message"}
{"nick":"indutny","message":"but yes","date":"2012-12-07T12:06:21.256Z","type":"message"}
{"nick":"indutny","message":"also","date":"2012-12-07T12:06:22.676Z","type":"message"}
{"nick":"indutny","message":"how will you profile pipelining?","date":"2012-12-07T12:06:29.101Z","type":"message"}
{"nick":"indutny","message":"i.e. memory barriers doesn't take time by themselfes","date":"2012-12-07T12:06:44.223Z","type":"message"}
{"nick":"bnoordhuis","message":"you mean cpu pipelining?","date":"2012-12-07T12:06:50.377Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2012-12-07T12:06:54.865Z","type":"message"}
{"nick":"bnoordhuis","message":"perf","date":"2012-12-07T12:06:58.915Z","type":"message"}
{"nick":"bnoordhuis","message":"provided your machine has the hardware counters for it","date":"2012-12-07T12:07:08.730Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2012-12-07T12:07:18.493Z","type":"message"}
{"nick":"indutny","message":"it can do it?","date":"2012-12-07T12:07:20.318Z","type":"message"}
{"nick":"indutny","message":"oh...","date":"2012-12-07T12:07:22.295Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2012-12-07T12:07:22.557Z","type":"message"}
{"nick":"indutny","message":"not sure if virtualbox provides such apis","date":"2012-12-07T12:07:32.934Z","type":"message"}
{"nick":"indutny","message":"but I could try","date":"2012-12-07T12:07:35.530Z","type":"message"}
{"nick":"bnoordhuis","message":"you're still running linux in a vm?","date":"2012-12-07T12:08:27.034Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2012-12-07T12:08:35.493Z","type":"message"}
{"nick":"indutny","message":"and I don't have free box for it","date":"2012-12-07T12:08:45.467Z","type":"message"}
{"nick":"indutny","message":"well, I'll have one soon","date":"2012-12-07T12:08:49.733Z","type":"message"}
{"nick":"indutny","message":"but it's arm box","date":"2012-12-07T12:08:52.323Z","type":"message"}
{"nick":"indutny","message":"pretty sure it won't be that useful for profiling","date":"2012-12-07T12:09:02.604Z","type":"message"}
{"nick":"bnoordhuis","message":"probably not","date":"2012-12-07T12:09:07.733Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't know if arm cpus have hardware performance counters like that","date":"2012-12-07T12:09:22.255Z","type":"message"}
{"nick":"indutny","message":"well","date":"2012-12-07T12:09:27.283Z","type":"message"}
{"nick":"indutny","message":"even if they have","date":"2012-12-07T12:09:30.122Z","type":"message"}
{"nick":"indutny","message":"profiling on slow cpu is kind of retarded","date":"2012-12-07T12:09:36.928Z","type":"message"}
{"nick":"bnoordhuis","message":"hm, i don't know","date":"2012-12-07T12:09:45.289Z","type":"message"}
{"nick":"bnoordhuis","message":"developers usually have machines that are a lot beefier than what most users have","date":"2012-12-07T12:11:13.152Z","type":"message"}
{"nick":"bnoordhuis","message":"so you think 'hey, my shiny new app runs pretty well'","date":"2012-12-07T12:11:38.138Z","type":"message"}
{"nick":"bnoordhuis","message":"but it's a dog on the machines of your users","date":"2012-12-07T12:11:50.402Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2012-12-07T12:14:10.662Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-07T12:14:11.189Z","type":"message"}
{"nick":"indutny","message":"so","date":"2012-12-07T12:14:12.199Z","type":"message"}
{"nick":"indutny","message":"I did perf","date":"2012-12-07T12:14:13.718Z","type":"message"}
{"nick":"indutny","message":"82% of time was spent in [kernel.kallsyms]","date":"2012-12-07T12:14:41.252Z","type":"message"}
{"nick":"indutny","message":"shit came real :)","date":"2012-12-07T12:14:57.978Z","type":"message"}
{"nick":"indutny","message":"I think I need to test it for more time","date":"2012-12-07T12:15:04.602Z","type":"message"}
{"nick":"indutny","message":"it's routine for extracting debug symbols, right?","date":"2012-12-07T12:15:45.927Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-12-07T12:22:19.658Z","type":"message"}
{"nick":"indutny","message":"it's /proc/sys/kernel/kptr_restrict","date":"2012-12-07T12:22:21.918Z","type":"message"}
{"nick":"indutny","message":"disabled it","date":"2012-12-07T12:22:25.841Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: yt?","date":"2012-12-07T12:24:48.343Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: ih","date":"2012-12-07T12:24:52.883Z","type":"message"}
{"nick":"indutny","message":"24.24%  node  [kernel.kallsyms]    [k] _raw_spin_unlock_irqrestore                                                                                                                                        ◆","date":"2012-12-07T12:24:57.863Z","type":"message"}
{"nick":"indutny","message":" 22.42%  node  [kernel.kallsyms]    [k] finish_task_switch                                                                                                                                                 ▒","date":"2012-12-07T12:24:58.124Z","type":"message"}
{"nick":"indutny","message":" 13.35%  node  [kernel.kallsyms]    [k] read_tsc             ","date":"2012-12-07T12:24:58.124Z","type":"message"}
{"nick":"indutny","message":"so I suppose it's pretty important to fix it","date":"2012-12-07T12:25:11.314Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-12-07T12:25:13.587Z","type":"message"}
{"nick":"indutny","message":"by adding isolates","date":"2012-12-07T12:25:16.065Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: use -i, that'll profile the process itself as well, not just the kernel","date":"2012-12-07T12:25:56.411Z","type":"message"}
{"nick":"indutny","message":"when recording?","date":"2012-12-07T12:26:05.835Z","type":"message"}
{"nick":"bnoordhuis","message":"you're using `perf record`, right?","date":"2012-12-07T12:26:06.103Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2012-12-07T12:26:08.961Z","type":"message"}
{"nick":"bnoordhuis","message":"good. yes, add -i","date":"2012-12-07T12:26:23.368Z","type":"message"}
{"nick":"indutny","message":"started siege","date":"2012-12-07T12:26:24.437Z","type":"message"}
{"nick":"indutny","message":"lets wait","date":"2012-12-07T12:26:28.763Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, and make sure it's compiled with -g","date":"2012-12-07T12:26:43.934Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-12-07T12:27:49.236Z","type":"message"}
{"nick":"indutny","message":"well, I see other stuff there","date":"2012-12-07T12:27:53.794Z","type":"message"}
{"nick":"indutny","message":"so I suppose yes","date":"2012-12-07T12:27:55.961Z","type":"message"}
{"nick":"indutny","message":"it's just top ones","date":"2012-12-07T12:28:05.360Z","type":"message"}
{"nick":"indutny","message":"47.53%  node  [kernel.kallsyms]    [k] read_tsc                                                                                                                                                           ◆","date":"2012-12-07T12:28:22.061Z","type":"message"}
{"nick":"indutny","message":" 23.75%  node  [kernel.kallsyms]    [k] _raw_spin_unlock_irqrestore                                                                                                                                        ▒","date":"2012-12-07T12:28:22.323Z","type":"message"}
{"nick":"indutny","message":" 11.31%  node  [kernel.kallsyms]    [k] finish_task_switch                                                                                                                                                 ▒","date":"2012-12-07T12:28:22.323Z","type":"message"}
{"nick":"indutny","message":"  3.35%  node  node                 [.] uv__async_io                                                                                                                                                       ▒","date":"2012-12-07T12:28:22.323Z","type":"message"}
{"nick":"indutny","message":"  2.52%  node  perf-9164.map        [.] 0xa6112ae1            ","date":"2012-12-07T12:28:22.323Z","type":"message"}
{"nick":"indutny","message":"it's a little bit different now","date":"2012-12-07T12:28:30.644Z","type":"message"}
{"nick":"indutny","message":"gettimeofday()?","date":"2012-12-07T12:28:49.001Z","type":"message"}
{"nick":"indutny","message":"is it the only thing that's using read_tsc","date":"2012-12-07T12:28:58.332Z","type":"message"}
{"nick":"bnoordhuis","message":"hm, we don't use that on linux","date":"2012-12-07T12:29:07.541Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-07T12:29:11.134Z","type":"message"}
{"nick":"indutny","message":"so probably it's some VM stuff","date":"2012-12-07T12:29:15.929Z","type":"message"}
{"nick":"indutny","message":"btw, this call might be really slow on VM","date":"2012-12-07T12:29:22.671Z","type":"message"}
{"nick":"bnoordhuis","message":"libuv calls clock_gettime(CLOCK_MONOTONIC) and that reads from the vdso","date":"2012-12-07T12:29:26.496Z","type":"message"}
{"nick":"indutny","message":"but I don't know for sure","date":"2012-12-07T12:29:30.602Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, that's probably it","date":"2012-12-07T12:29:32.646Z","type":"message"}
{"nick":"indutny","message":"also","date":"2012-12-07T12:29:51.657Z","type":"message"}
{"nick":"indutny","message":"it's 1 CPU VM","date":"2012-12-07T12:29:54.365Z","type":"message"}
{"nick":"indutny","message":"and 2 threads","date":"2012-12-07T12:29:57.246Z","type":"message"}
{"nick":"indutny","message":"I probably need to add one more CPU to it","date":"2012-12-07T12:30:03.128Z","type":"message"}
{"nick":"bnoordhuis","message":"though... rdtsc is not a privileged instruction","date":"2012-12-07T12:30:04.159Z","type":"message"}
{"nick":"bnoordhuis","message":"i.e. the host doesn't have to emulate it","date":"2012-12-07T12:30:16.517Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2012-12-07T12:30:36.067Z","type":"message"}
{"nick":"bnoordhuis","message":"oh wait, not privileged is correct","date":"2012-12-07T12:31:17.830Z","type":"message"}
{"nick":"bnoordhuis","message":"i.e. you can run it from ring 3","date":"2012-12-07T12:31:22.177Z","type":"message"}
{"nick":"bnoordhuis","message":"but you _can_ virtualize it on intel cpus","date":"2012-12-07T12:31:30.111Z","type":"message"}
{"nick":"bnoordhuis","message":"probably on amd cpus as well","date":"2012-12-07T12:31:33.967Z","type":"message"}
{"nick":"indutny","message":"indeed","date":"2012-12-07T12:32:49.402Z","type":"message"}
{"nick":"indutny","message":"ok, added one more CPU","date":"2012-12-07T12:34:30.420Z","type":"message"}
{"nick":"indutny","message":"and running perf again","date":"2012-12-07T12:34:35.157Z","type":"message"}
{"nick":"bnoordhuis","message":"aio in linux 3.7 is *much* improved","date":"2012-12-07T12:37:40.051Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe something for node 0.12","date":"2012-12-07T12:37:47.687Z","type":"message"}
{"nick":"bnoordhuis","message":"it kind of sucks that /dev files don't work","date":"2012-12-07T12:38:33.703Z","type":"message"}
{"nick":"bnoordhuis","message":"but i can work around that","date":"2012-12-07T12:38:44.450Z","type":"message"}
{"nick":"indutny","message":" 41.18%  node  [kernel.kallsyms]    [k] acpi_pm_read                                                                                                                                                       ◆","date":"2012-12-07T12:38:51.381Z","type":"message"}
{"nick":"indutny","message":" 10.01%  node  [kernel.kallsyms]    [k] _raw_spin_unlock_irqrestore                                                                                                                                        ▒","date":"2012-12-07T12:38:51.382Z","type":"message"}
{"nick":"indutny","message":"  8.46%  node  [kernel.kallsyms]    [k] __do_softirq                                                                                                                                                       ▒","date":"2012-12-07T12:38:51.382Z","type":"message"}
{"nick":"indutny","message":"  8.15%  node  perf-2514.map        [.] 0x89f26360                                                                                                                                                         ▒","date":"2012-12-07T12:38:51.382Z","type":"message"}
{"nick":"indutny","message":"  5.57%  node  [kernel.kallsyms]    [k] hrtimer_peek_ahead_timers                                                                                                                                          ▒","date":"2012-12-07T12:38:51.382Z","type":"message"}
{"nick":"indutny","message":"  1.80%  node  node                 [.] uv__async_io                                                                                                                                                       ▒","date":"2012-12-07T12:38:51.382Z","type":"message"}
{"nick":"indutny","message":"  1.67%  node  libc-2.15.so         [.] __memcpy_ssse3_rep                                                                                                                                                 ▒","date":"2012-12-07T12:38:51.531Z","type":"message"}
{"nick":"indutny","message":"  1.47%  node  node                 [.] node::StreamWrap::WriteBuffer(v8::Arguments const&)","date":"2012-12-07T12:38:52.445Z","type":"message"}
{"nick":"indutny","message":"acpi thing scaries me :)","date":"2012-12-07T12:39:06.223Z","type":"message"}
{"nick":"indutny","message":"I'm starting to think that perf doesn't really work well in VM","date":"2012-12-07T12:39:19.914Z","type":"message"}
{"nick":"indutny","message":"so","date":"2012-12-07T12:39:27.773Z","type":"message"}
{"nick":"indutny","message":"a lot of time spent in uv__async_io","date":"2012-12-07T12:39:33.216Z","type":"message"}
{"nick":"indutny","message":"which I tried to fix","date":"2012-12-07T12:39:35.373Z","type":"message"}
{"nick":"indutny","message":"but you guys reverted it :(","date":"2012-12-07T12:39:43.368Z","type":"message"}
{"nick":"bnoordhuis","message":"it's kind of surprising","date":"2012-12-07T12:39:51.985Z","type":"message"}
{"nick":"bnoordhuis","message":"it never shows up here","date":"2012-12-07T12:39:56.632Z","type":"message"}
{"nick":"bnoordhuis","message":"i wonder if it's an artifact of running in a vm","date":"2012-12-07T12:40:06.536Z","type":"message"}
{"nick":"bnoordhuis","message":"grr, /proc and /sys files don't work either","date":"2012-12-07T12:41:49.181Z","type":"message"}
{"nick":"bnoordhuis","message":"seems like that something that should be pretty trivial to fix though","date":"2012-12-07T12:41:58.951Z","type":"message"}
{"nick":"indutny","message":"indeed it seems to be","date":"2012-12-07T12:56:25.019Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: can you prof tlsnappy on your box?","date":"2012-12-07T12:56:33.474Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: sure, in a sec","date":"2012-12-07T12:56:55.772Z","type":"message"}
{"nick":"indutny","message":"just clone, npm install, and node example/server.js","date":"2012-12-07T12:57:07.509Z","type":"message"}
{"nick":"indutny","message":"and it'll start https server on 44300","date":"2012-12-07T12:57:12.556Z","type":"message"}
{"nick":"roxlu_","reason":"Quit: leaving","date":"2012-12-07T13:08:59.827Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: what should i test it with? i mean ab settings","date":"2012-12-07T13:11:31.707Z","type":"message"}
{"nick":"indutny","message":"well","date":"2012-12-07T13:11:46.224Z","type":"message"}
{"nick":"indutny","message":"better use siege","date":"2012-12-07T13:11:49.495Z","type":"message"}
{"nick":"indutny","message":"-c 100 -r 10000","date":"2012-12-07T13:12:01.282Z","type":"message"}
{"nick":"indutny","message":"and of course -b","date":"2012-12-07T13:12:04.884Z","type":"message"}
{"nick":"indutny","message":"for ab","date":"2012-12-07T13:12:08.623Z","type":"message"}
{"nick":"indutny","message":"just -c 100 -n 100000","date":"2012-12-07T13:12:17.858Z","type":"message"}
{"nick":"indutny","message":"and https://localhost:44300/","date":"2012-12-07T13:12:30.260Z","type":"message"}
{"nick":"indutny","message":"or /big","date":"2012-12-07T13:12:38.019Z","type":"message"}
{"nick":"bnoordhuis","message":"-k?","date":"2012-12-07T13:12:57.819Z","type":"message"}
{"nick":"indutny","message":"not necessary","date":"2012-12-07T13:14:37.353Z","type":"message"}
{"nick":"indutny","message":"it's slower even without it","date":"2012-12-07T13:14:51.225Z","type":"message"}
{"nick":"bnoordhuis","message":"[ perf record: Captured and wrote 630.525 MB perf.data (~27548037 samples) ]","date":"2012-12-07T13:15:11.228Z","type":"message"}
{"nick":"bnoordhuis","message":"Warning:","date":"2012-12-07T13:15:11.492Z","type":"message"}
{"nick":"bnoordhuis","message":"Processed 27461700 events and lost 6 chunks!","date":"2012-12-07T13:15:11.492Z","type":"message"}
{"nick":"indutny","message":"wow","date":"2012-12-07T13:15:18.205Z","type":"message"}
{"nick":"bnoordhuis","message":"as a fyi","date":"2012-12-07T13:15:19.258Z","type":"message"}
{"nick":"indutny","message":"a lot of data","date":"2012-12-07T13:15:21.342Z","type":"message"}
{"nick":"bnoordhuis","message":"that's with -c 1000","date":"2012-12-07T13:15:23.419Z","type":"message"}
{"nick":"bnoordhuis","message":"err, perf record -i -c 1000","date":"2012-12-07T13:15:33.441Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2012-12-07T13:15:39.924Z","type":"message"}
{"nick":"indutny","message":"and what report tells you?","date":"2012-12-07T13:15:48.522Z","type":"message"}
{"nick":"bnoordhuis","message":" 20.77%  node  perf-3923.map         [.] 0x000025cf83c2aec8                                                                                                                                   ◆","date":"2012-12-07T13:16:29.441Z","type":"message"}
{"nick":"bnoordhuis","message":"  4.19%  node  node                  [.] uv__async_io                                                                                                                                         ▒","date":"2012-12-07T13:16:33.871Z","type":"message"}
{"nick":"bnoordhuis","message":"  3.63%  node  node                  [.] v8::internal::JSObject::LocalLookupRealNamedProperty(v8::internal::String*, v8::internal::LookupResult*)                                             ▒","date":"2012-12-07T13:16:37.955Z","type":"message"}
{"nick":"bnoordhuis","message":"  2.70%  node  libpthread-2.15.so    [.] pthread_getspecific                                                                                                                                  ▒","date":"2012-12-07T13:16:41.878Z","type":"message"}
{"nick":"bnoordhuis","message":"  2.67%  node  libc-2.15.so          [.] _int_malloc                                                                                                                                          ▒","date":"2012-12-07T13:16:45.803Z","type":"message"}
{"nick":"indutny","message":"what's first?","date":"2012-12-07T13:16:46.601Z","type":"message"}
{"nick":"indutny","message":"v8 stuff?","date":"2012-12-07T13:16:50.078Z","type":"message"}
{"nick":"bnoordhuis","message":"no, that's perf itself","date":"2012-12-07T13:16:56.254Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-12-07T13:16:59.193Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe i should raise -c a little :)","date":"2012-12-07T13:17:03.115Z","type":"message"}
{"nick":"indutny","message":"odd stats","date":"2012-12-07T13:17:03.643Z","type":"message"}
{"nick":"indutny","message":"it should definitely contain some BN_* stuff","date":"2012-12-07T13:17:18.615Z","type":"message"}
{"nick":"bnoordhuis","message":"that's with out/Release/node, it probably doesn't have debug symbols","date":"2012-12-07T13:17:44.020Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2012-12-07T13:17:53.881Z","type":"message"}
{"nick":"indutny","message":"probably","date":"2012-12-07T13:17:55.111Z","type":"message"}
{"nick":"bnoordhuis","message":"though it's not stripped","date":"2012-12-07T13:17:58.975Z","type":"message"}
{"nick":"bnoordhuis","message":"with -c 10000:","date":"2012-12-07T13:18:29.071Z","type":"message"}
{"nick":"bnoordhuis","message":" 19.89%  node  perf-4018.map         [.] 0x0000032ea8223d61","date":"2012-12-07T13:18:30.979Z","type":"message"}
{"nick":"bnoordhuis","message":"  7.22%  node  node                  [.] uv__async_io","date":"2012-12-07T13:18:31.250Z","type":"message"}
{"nick":"bnoordhuis","message":"  2.32%  node  node                  [.] v8::internal::JSObject::LocalLookupRealNamedProperty(v8::internal::String*, v8::internal::LookupResult*)","date":"2012-12-07T13:18:31.511Z","type":"message"}
{"nick":"bnoordhuis","message":"  2.06%  node  libpthread-2.15.so    [.] pthread_getspecific","date":"2012-12-07T13:18:34.483Z","type":"message"}
{"nick":"bnoordhuis","message":"  1.40%  node  node                  [.] v8::internal::JSObject::SetPropertyForResult(v8::internal::LookupResult*, v8::internal::String*, v8::internal::Object*, PropertyAttributes, v8::intern","date":"2012-12-07T13:18:36.941Z","type":"message"}
{"nick":"bnoordhuis","message":"  0.96%  node  libc-2.15.so          [.] _int_malloc","date":"2012-12-07T13:18:40.920Z","type":"message"}
{"nick":"indutny","message":"still odd","date":"2012-12-07T13:19:35.574Z","type":"message"}
{"nick":"indutny","message":"a question","date":"2012-12-07T13:19:45.802Z","type":"message"}
{"nick":"bnoordhuis","message":"let's try one more run, this time with -a -s -i","date":"2012-12-07T13:19:52.851Z","type":"message"}
{"nick":"indutny","message":"is it profiling only one thread?","date":"2012-12-07T13:19:53.708Z","type":"message"}
{"nick":"indutny","message":"because it seems like it does so","date":"2012-12-07T13:20:03.917Z","type":"message"}
{"nick":"indutny","message":"a lot of uv__async_io","date":"2012-12-07T13:20:11.248Z","type":"message"}
{"nick":"indutny","message":"and not that much openssl stuff","date":"2012-12-07T13:20:16.523Z","type":"message"}
{"nick":"bnoordhuis","message":"  9.97%             node  node                           [.] bn_mul_add_words","date":"2012-12-07T13:20:27.760Z","type":"message"}
{"nick":"bnoordhuis","message":"  5.74%               ab  libcrypto.so.1.0.0             [.] 0x00000000000dd1f5","date":"2012-12-07T13:20:28.020Z","type":"message"}
{"nick":"bnoordhuis","message":"  5.49%             node  node                           [.] BN_from_montgomery_word","date":"2012-12-07T13:20:28.020Z","type":"message"}
{"nick":"bnoordhuis","message":"  5.18%             node  node                           [.] bn_sqr_comba8","date":"2012-12-07T13:20:30.806Z","type":"message"}
{"nick":"bnoordhuis","message":"  3.88%             node  node                           [.] sha1_block_data_order","date":"2012-12-07T13:20:33.314Z","type":"message"}
{"nick":"bnoordhuis","message":"  3.69%             node  node                           [.] OPENSSL_cleanse","date":"2012-12-07T13:20:36.403Z","type":"message"}
{"nick":"bnoordhuis","message":"  3.15%             node  perf-4064.map                  [.] 0x00000d3efa74c0d4","date":"2012-12-07T13:20:38.802Z","type":"message"}
{"nick":"bnoordhuis","message":"that's with -a for all cpus","date":"2012-12-07T13:20:41.142Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2012-12-07T13:20:41.836Z","type":"message"}
{"nick":"indutny","message":"that's much better!","date":"2012-12-07T13:20:44.908Z","type":"message"}
{"nick":"bnoordhuis","message":"and -s for per-thread stats","date":"2012-12-07T13:20:47.375Z","type":"message"}
{"nick":"bnoordhuis","message":"fscking OPENSSL_cleanse","date":"2012-12-07T13:21:08.932Z","type":"message"}
{"nick":"bnoordhuis","message":"i hates it","date":"2012-12-07T13:21:12.009Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2012-12-07T13:22:28.237Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2012-12-07T13:22:29.339Z","type":"message"}
{"nick":"indutny","message":"it's really fucking shit","date":"2012-12-07T13:22:35.816Z","type":"message"}
{"nick":"indutny","message":"but","date":"2012-12-07T13:22:36.804Z","type":"message"}
{"nick":"indutny","message":"what's really interesting","date":"2012-12-07T13:22:40.743Z","type":"message"}
{"nick":"indutny","message":"is why nginx and anything else is much faster when using the same junk","date":"2012-12-07T13:22:53.692Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: btw, I've updated select() patch","date":"2012-12-07T13:24:01.899Z","type":"message"}
{"nick":"bnoordhuis","message":"is nginx using the same ciphers?","date":"2012-12-07T13:24:23.281Z","type":"message"}
{"nick":"bnoordhuis","message":"if nginx uses rc4 or des, it's small wonder it's faster","date":"2012-12-07T13:24:43.848Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2012-12-07T13:25:29.791Z","type":"message"}
{"nick":"indutny","message":"absolutely the same","date":"2012-12-07T13:25:34.238Z","type":"message"}
{"nick":"indutny","message":"and even the same headers","date":"2012-12-07T13:25:51.224Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: are the tls frames identical?","date":"2012-12-07T13:27:51.390Z","type":"message"}
{"nick":"bnoordhuis","message":"or at least similar","date":"2012-12-07T13:27:54.371Z","type":"message"}
{"nick":"indutny","message":"I haven't checked it","date":"2012-12-07T13:28:00.971Z","type":"message"}
{"nick":"indutny","message":"honestly","date":"2012-12-07T13:28:03.121Z","type":"message"}
{"nick":"indutny","message":"but it may matter though...","date":"2012-12-07T13:28:18.960Z","type":"message"}
{"nick":"indutny","message":"well","date":"2012-12-07T13:28:21.615Z","type":"message"}
{"nick":"bnoordhuis","message":"i'd take a bottom-up approach here","date":"2012-12-07T13:28:24.056Z","type":"message"}
{"nick":"bnoordhuis","message":"start at the lowest levels and work up from there","date":"2012-12-07T13:28:30.362Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2012-12-07T13:28:43.841Z","type":"message"}
{"nick":"indutny","message":"sounds like a plan","date":"2012-12-07T13:28:51.011Z","type":"message"}
{"nick":"bnoordhuis","message":"also, maybe trace nginx and tlsnappy with callgrind and compare the results","date":"2012-12-07T13:29:17.200Z","type":"message"}
{"nick":"indutny","message":"this is the next step","date":"2012-12-07T13:31:22.434Z","type":"message"}
{"nick":"indutny","message":"actually","date":"2012-12-07T13:31:46.914Z","type":"message"}
{"nick":"indutny","message":"what do you think about balancing workload between threads?","date":"2012-12-07T13:31:55.380Z","type":"message"}
{"nick":"indutny","message":"why can't it outperform single threaded process? :)","date":"2012-12-07T13:32:23.938Z","type":"message"}
{"nick":"bnoordhuis","message":"i think that balancing the workload between threads is, in general, a good idea","date":"2012-12-07T13:32:33.931Z","type":"message"}
{"nick":"bnoordhuis","message":"are you asking that question in a particular context?","date":"2012-12-07T13:32:43.190Z","type":"message"}
{"nick":"indutny","message":"well","date":"2012-12-07T13:32:48.614Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: uv__stream_io(stream->loop, NULL, UV__POLLERR) <- that'll trigger a segfault","date":"2012-12-07T13:42:28.743Z","type":"message"}
{"nick":"bnoordhuis","message":"i assume it's safe to use &w->io_watcher there?","date":"2012-12-07T13:42:49.284Z","type":"message"}
{"nick":"bnoordhuis","message":"err, &stream->io_watcher","date":"2012-12-07T13:43:04.430Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess i might as well remove it, uv__stream_io only deals with POLLOUT and POLLIN","date":"2012-12-07T13:44:02.020Z","type":"message"}
{"nick":"jmar777","date":"2012-12-07T13:47:50.177Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: i think there are still at least two bugs in your select() patch","date":"2012-12-07T14:19:25.383Z","type":"message"}
{"nick":"bnoordhuis","message":"but i think i fixed them","date":"2012-12-07T14:21:43.952Z","type":"message"}
{"nick":"bnoordhuis","message":"down to one failing test","date":"2012-12-07T14:24:05.728Z","type":"message"}
{"nick":"bnoordhuis","message":"Assertion failed: (r == 1), function uv__stream_osx_interrupt_select, file ../../src/unix/stream.c, line 212.","date":"2012-12-07T14:24:06.696Z","type":"message"}
{"nick":"bnoordhuis","message":"and it's failing with errno=ENOTCONN","date":"2012-12-07T14:24:15.373Z","type":"message"}
{"nick":"bnoordhuis","message":"now that i'm looking at it, you're creating a regular unix socket but it's not listening and not connected","date":"2012-12-07T14:26:10.550Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess that should be socketpair()...","date":"2012-12-07T14:26:18.029Z","type":"message"}
{"nick":"felixge","reason":"Remote host closed the connection","date":"2012-12-07T14:27:01.925Z","type":"quit"}
{"nick":"felixge","date":"2012-12-07T14:27:15.749Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-12-07T14:27:15.749Z","type":"quit"}
{"nick":"felixge","date":"2012-12-07T14:27:15.749Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: https://github.com/bnoordhuis/libuv/compare/issue622 <- please review","date":"2012-12-07T14:32:55.214Z","type":"message"}
{"nick":"piscisaureus_","date":"2012-12-07T14:37:53.434Z","type":"join"}
{"nick":"bnoordhuis","message":"mogge bertje, lekker geslapen?","date":"2012-12-07T14:41:42.051Z","type":"message"}
{"nick":"kristate","reason":"Ping timeout: 240 seconds","date":"2012-12-07T14:54:35.269Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Ping timeout: 244 seconds","date":"2012-12-07T14:55:46.100Z","type":"quit"}
{"nick":"tommybergeron","date":"2012-12-07T15:04:33.543Z","type":"join"}
{"nick":"piscisaureus_","date":"2012-12-07T15:05:06.441Z","type":"join"}
{"nick":"kristate","date":"2012-12-07T15:05:07.802Z","type":"join"}
{"nick":"piscisaureus_","message":"hey bnoordhuis","date":"2012-12-07T15:05:13.098Z","type":"message"}
{"nick":"piscisaureus_","message":"not feeling like it today?","date":"2012-12-07T15:05:15.880Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: depends on what you mean by 'it'","date":"2012-12-07T15:06:13.070Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: taking the train and all that","date":"2012-12-07T15:06:22.890Z","type":"message"}
{"nick":"bnoordhuis","message":"oh that. no, i anticipated chaos and delays","date":"2012-12-07T15:06:34.204Z","type":"message"}
{"nick":"piscisaureus_","message":"ha, right","date":"2012-12-07T15:06:48.169Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-12-07T15:10:04.883Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-12-07T15:12:50.387Z","type":"join"}
{"nick":"mjr_","date":"2012-12-07T15:15:12.523Z","type":"join"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2012-12-07T15:18:47.167Z","type":"quit"}
{"nick":"jmar777","date":"2012-12-07T15:19:13.764Z","type":"join"}
{"nick":"indutny_a","date":"2012-12-07T15:29:35.222Z","type":"join"}
{"nick":"indutny_a","message":"Hey Ben","date":"2012-12-07T15:29:50.639Z","type":"message"}
{"nick":"indutny_a","message":"So can you try kevent on /dev/tty?","date":"2012-12-07T15:30:24.065Z","type":"message"}
{"nick":"indutny_a","message":"bnoordhuis:^","date":"2012-12-07T15:30:46.986Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny_a: come again?","date":"2012-12-07T15:31:12.143Z","type":"message"}
{"nick":"indutny_a","message":"Huh?","date":"2012-12-07T15:33:03.462Z","type":"message"}
{"nick":"indutny_a","message":"I'm in car atm","date":"2012-12-07T15:33:16.301Z","type":"message"}
{"nick":"indutny_a","message":"sorry","date":"2012-12-07T15:33:20.051Z","type":"message"}
{"nick":"bnoordhuis","message":"you young 'uns. in my time we read a book when we were in a car","date":"2012-12-07T15:34:50.900Z","type":"message"}
{"nick":"bnoordhuis","message":"not while driving, mind you","date":"2012-12-07T15:34:54.656Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: yeah, it's hard to read a book being drunk","date":"2012-12-07T15:35:25.303Z","type":"message"}
{"nick":"bnoordhuis","message":"no, it's because we were too busy texting","date":"2012-12-07T15:36:01.667Z","type":"message"}
{"nick":"mmalecki","message":"ah, right","date":"2012-12-07T15:36:11.594Z","type":"message"}
{"nick":"CoverSlide","date":"2012-12-07T15:43:10.472Z","type":"join"}
{"nick":"hz","reason":"Disconnected by services","date":"2012-12-07T15:43:47.729Z","type":"quit"}
{"nick":"hz","date":"2012-12-07T15:43:51.788Z","type":"join"}
{"nick":"hz","reason":"Read error: Connection reset by peer","date":"2012-12-07T15:45:08.191Z","type":"quit"}
{"nick":"hz","date":"2012-12-07T15:45:24.692Z","type":"join"}
{"nick":"felixge","reason":"Quit: felixge","date":"2012-12-07T15:52:53.709Z","type":"quit"}
{"nick":"indutny_a","message":"So about return value","date":"2012-12-07T15:56:06.386Z","type":"message"}
{"nick":"indutny_a","message":"bnoordhuis:it returns 0 on success","date":"2012-12-07T15:56:38.064Z","type":"message"}
{"nick":"indutny_a","message":"-1 if probe failed bnoordhuis ","date":"2012-12-07T15:56:48.023Z","type":"message"}
{"nick":"indutny_a","message":"and errno in case of failed initialization","date":"2012-12-07T15:57:11.708Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny_a: yes, only you had a bad check further down","date":"2012-12-07T15:57:14.487Z","type":"message"}
{"nick":"indutny_a","message":"Ah, ok","date":"2012-12-07T15:57:25.150Z","type":"message"}
{"nick":"bnoordhuis","message":"something like if (r > 0) return r","date":"2012-12-07T15:57:27.096Z","type":"message"}
{"nick":"indutny_a","message":"are you sure?","date":"2012-12-07T15:57:36.460Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2012-12-07T15:57:55.398Z","type":"message"}
{"nick":"bnoordhuis","message":"can you review my fixups?","date":"2012-12-07T15:58:02.954Z","type":"message"}
{"nick":"bnoordhuis","message":"https://github.com/bnoordhuis/libuv/commit/209c966 <- that","date":"2012-12-07T15:58:28.698Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: is there a company meeting today?","date":"2012-12-07T15:58:45.211Z","type":"message"}
