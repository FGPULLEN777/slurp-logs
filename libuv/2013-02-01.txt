{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-02-01T00:00:00.834Z","type":"quit"}
{"nick":"ircretary","date":"2013-02-01T00:00:07.684Z","type":"join"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-02-01T00:00:37.324Z","type":"quit"}
{"nick":"hz","date":"2013-02-01T00:00:44.434Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-01T00:07:20.909Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-02-01T00:11:52.906Z","type":"quit"}
{"nick":"isaacs","message":"so, i had this idea that it'd be faster if Readable.push() could detect if it's piping, and just write the data to the dests.","date":"2013-02-01T00:17:08.426Z","type":"message"}
{"nick":"isaacs","message":"turns out, that's quite a bit slower.","date":"2013-02-01T00:17:20.076Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: really? know why?","date":"2013-02-01T00:17:34.157Z","type":"message"}
{"nick":"isaacs","message":"inorite?","date":"2013-02-01T00:18:15.085Z","type":"message"}
{"nick":"c4milo","date":"2013-02-01T00:18:19.048Z","type":"join"}
{"nick":"isaacs","message":"without the shortcut: min:2.78 avg:2.87 max:2.99 median:2.84","date":"2013-02-01T00:18:20.935Z","type":"message"}
{"nick":"isaacs","message":"with the shortcut:min:2.20 avg:2.76 max:2.94 median:2.83","date":"2013-02-01T00:18:27.365Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: hm. can you paste your change set? like to see it.","date":"2013-02-01T00:19:26.371Z","type":"message"}
{"nick":"tjfontaine","message":"oh I thought you we were going to see 50% drops :)","date":"2013-02-01T00:19:32.996Z","type":"message"}
{"nick":"isaacs","message":"https://gist.github.com/4688017","date":"2013-02-01T00:19:44.194Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-01T00:19:50.968Z","type":"quit"}
{"nick":"isaacs","message":"no, more like 5%","date":"2013-02-01T00:20:00.414Z","type":"message"}
{"nick":"isaacs","message":"or less, even","date":"2013-02-01T00:20:07.244Z","type":"message"}
{"nick":"isaacs","message":"but still!  relevant!","date":"2013-02-01T00:20:11.314Z","type":"message"}
{"nick":"isaacs","message":"and very reproducible","date":"2013-02-01T00:20:17.264Z","type":"message"}
{"nick":"isaacs","message":"it's not just function length or checks, either","date":"2013-02-01T00:20:26.984Z","type":"message"}
{"nick":"tjfontaine","message":"ya clearly","date":"2013-02-01T00:20:39.051Z","type":"message"}
{"nick":"isaacs","message":"the \"without the shortcut\" just puts the same onread() call in both conditionals","date":"2013-02-01T00:20:39.177Z","type":"message"}
{"nick":"isaacs","message":"(i thought about that)","date":"2013-02-01T00:20:49.473Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-01T00:20:56.152Z","type":"quit"}
{"nick":"isaacs","message":"i guess that idea is just not a good idea","date":"2013-02-01T00:21:13.893Z","type":"message"}
{"nick":"trevnorris","message":"yeah. I think onread is what's kicking us.","date":"2013-02-01T00:21:28.977Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: it was hardly ever calling onread, though!  and it was slower!","date":"2013-02-01T00:21:46.883Z","type":"message"}
{"nick":"isaacs","message":"i tried adding a tracker to see how often it's doing the shortcut.  it's like 99% or more!","date":"2013-02-01T00:22:00.013Z","type":"message"}
{"nick":"isaacs","message":"that is calling onread basically never!","date":"2013-02-01T00:22:06.312Z","type":"message"}
{"nick":"isaacs","message":"sometimes working with a JIT is lovely.  and then sometimes it's maddening :)","date":"2013-02-01T00:22:21.743Z","type":"message"}
{"nick":"TooTallNate","date":"2013-02-01T00:22:29.256Z","type":"join"}
{"nick":"trevnorris","message":"seriously? hm. strange. this will be a fun one to debug.","date":"2013-02-01T00:22:31.847Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: think I verified the error thing. If you push data too quickly then it can't keep up writing it all out to buffers and crashes w/ out of mem errors.","date":"2013-02-01T00:23:22.357Z","type":"message"}
{"nick":"trevnorris","message":"check this: https://gist.github.com/4687602","date":"2013-02-01T00:23:26.291Z","type":"message"}
{"nick":"trevnorris","message":"was using 3.25GB when it crashed. the process dies at 1GB. so there was a lot of buffer there.","date":"2013-02-01T00:24:10.490Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: what's tmp.js?","date":"2013-02-01T00:24:20.481Z","type":"message"}
{"nick":"trevnorris","message":"tmp.js is the file i'm running this in.","date":"2013-02-01T00:24:32.587Z","type":"message"}
{"nick":"trevnorris","message":"i'll include that too","date":"2013-02-01T00:24:41.415Z","type":"message"}
{"nick":"isaacs","message":"k","date":"2013-02-01T00:24:43.531Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: updated. though that version uses my benchmark api.","date":"2013-02-01T00:26:09.942Z","type":"message"}
{"nick":"mikeal","date":"2013-02-01T00:26:24.954Z","type":"join"}
{"nick":"trevnorris","message":"if you just run the for loop until it crashes should get the same effect","date":"2013-02-01T00:26:30.505Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-02-01T00:29:15.571Z","type":"quit"}
{"nick":"jmar777","date":"2013-02-01T00:29:48.993Z","type":"join"}
{"nick":"c4milo","date":"2013-02-01T00:33:06.601Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: yeah, this is not allowed:","date":"2013-02-01T00:33:29.585Z","type":"message"}
{"nick":"isaacs","message":"  for (var i = 0; i < ITER; i++) {","date":"2013-02-01T00:33:29.995Z","type":"message"}
{"nick":"isaacs","message":"    rs.push(buff);","date":"2013-02-01T00:33:30.121Z","type":"message"}
{"nick":"isaacs","message":"  }","date":"2013-02-01T00:33:30.121Z","type":"message"}
{"nick":"isaacs","message":"rs.push() returns false sometimes.","date":"2013-02-01T00:33:37.375Z","type":"message"}
{"nick":"isaacs","message":"if it returns false, you have to stop pushing until rs._read() is called again","date":"2013-02-01T00:33:47.275Z","type":"message"}
{"nick":"trevnorris","message":"oh yeah. I realize that.","date":"2013-02-01T00:33:58.035Z","type":"message"}
{"nick":"jmar777","reason":"Ping timeout: 248 seconds","date":"2013-02-01T00:34:11.917Z","type":"quit"}
{"nick":"trevnorris","message":"was wondering what happens if you're piping data in from on place and out the other. then the connection is disrupted so you can't push out the data you're receiving. is that a possible scenario?","date":"2013-02-01T00:35:06.616Z","type":"message"}
{"nick":"isaacs","message":"no","date":"2013-02-01T00:37:08.033Z","type":"message"}
{"nick":"isaacs","message":"the correct behavior there is to buffer until the program crashes","date":"2013-02-01T00:37:16.063Z","type":"message"}
{"nick":"isaacs","message":"which, as you point out, we're doing a nice job of :)","date":"2013-02-01T00:37:22.783Z","type":"message"}
{"nick":"trevnorris","message":"heh","date":"2013-02-01T00:37:34.326Z","type":"message"}
{"nick":"isaacs","message":"if you're calling rs.push(), it's your responsibility to respect the return value","date":"2013-02-01T00:37:47.473Z","type":"message"}
{"nick":"isaacs","message":"you can swap out any writable stream, and call ws.write() without respecting the return value.  same issue.","date":"2013-02-01T00:38:03.172Z","type":"message"}
{"nick":"isaacs","message":"buffer until crash.","date":"2013-02-01T00:38:06.652Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: guess I was thinking there should be a failsafe or something. if the gc could keep up then the system would run out of memory.","date":"2013-02-01T00:39:04.562Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: the os will shoot your process before that happens.","date":"2013-02-01T00:39:34.221Z","type":"message"}
{"nick":"isaacs","message":"it's fine.","date":"2013-02-01T00:39:36.901Z","type":"message"}
{"nick":"isaacs","message":"you'll start getting malloc failures and whatnot.","date":"2013-02-01T00:39:42.232Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: try with --expose_gc and call gc() in your loop.  you'll see.","date":"2013-02-01T00:39:53.321Z","type":"message"}
{"nick":"isaacs","message":"those things cant be gc'ed anyway, because there's a reference to them","date":"2013-02-01T00:40:01.101Z","type":"message"}
{"nick":"isaacs","message":"srsly, there's no failsafe.  it's just, \"Don't do that\"","date":"2013-02-01T00:40:11.641Z","type":"message"}
{"nick":"isaacs","message":"the failsafe is to respect the return value.","date":"2013-02-01T00:40:22.441Z","type":"message"}
{"nick":"trevnorris","message":"heh, that's cool. I just remember running something like `var a = []; while (true) a.push(new Buffer(1024);` and my system crashed before the process was killed.","date":"2013-02-01T00:42:09.491Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: weird.","date":"2013-02-01T00:43:18.989Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-02-01T00:43:42.646Z","type":"quit"}
{"nick":"loladiro","date":"2013-02-01T00:44:48.466Z","type":"join"}
{"nick":"trevnorris","message":"i'll try that just before I head out and let you know how it goes. =)","date":"2013-02-01T00:45:49.850Z","type":"message"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-02-01T00:46:52.287Z","type":"nick"}
{"nick":"bradleymeck","date":"2013-02-01T00:48:23.963Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: when net receives data, does it go directly to a buffer? can't figure out why so much gc'ing is going on.","date":"2013-02-01T00:49:42.079Z","type":"message"}
{"nick":"isaacs","message":"handle.ondata gets a buffer with start and length","date":"2013-02-01T00:52:30.132Z","type":"message"}
{"nick":"isaacs","message":"it does seem a bit inefficient that the tcp_wrap has a single ondata callback, which is *sometimes* called with bufer,start,end and sometimes just called with no arguments.","date":"2013-02-01T00:54:30.981Z","type":"message"}
{"nick":"isaacs","message":"a lot of deopts from that.","date":"2013-02-01T00:54:34.861Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-01T01:00:04.800Z","type":"quit"}
{"nick":"stagas_","date":"2013-02-01T01:00:43.327Z","type":"join"}
{"nick":"c4milo","date":"2013-02-01T01:00:46.517Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 240 seconds","date":"2013-02-01T01:02:08.251Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-02-01T01:02:23.091Z","type":"nick"}
{"nick":"trevnorris","message":"isaacs: net.js has `if (!writeReq || typeof writeReq !== 'object')`, but above calls createWriteReq which appears to force return an object.","date":"2013-02-01T01:03:34.206Z","type":"message"}
{"nick":"trevnorris","message":"only way it'd fail is if this._handle was not a handle, right?","date":"2013-02-01T01:03:53.645Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: it returns the result of handle.writeWhatever()","date":"2013-02-01T01:04:01.285Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: which might not be an object.","date":"2013-02-01T01:04:07.375Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: src/stream_wrap.cc, line 462:     return scope.Close(v8::Null(node_isolate));","date":"2013-02-01T01:05:56.124Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: if there's an error writing, it'll return null","date":"2013-02-01T01:06:07.474Z","type":"message"}
{"nick":"trevnorris","message":"ah ok. thanks.","date":"2013-02-01T01:06:27.092Z","type":"message"}
{"nick":"trevnorris","message":"was trying to trace that back.","date":"2013-02-01T01:06:41.638Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i guess the typeof check is unnecessary","date":"2013-02-01T01:09:27.461Z","type":"message"}
{"nick":"googol","date":"2013-02-01T01:09:58.563Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: ok, so WriteBuffer is malloc'ing every call. so writing out a massive number of small buffers just to be immediately cleaned up could be hurting the gc?","date":"2013-02-01T01:16:33.972Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-02-01T01:16:44.991Z","type":"quit"}
{"nick":"isaacs","message":"not sure","date":"2013-02-01T01:16:45.767Z","type":"message"}
{"nick":"trevnorris","message":"well. i'm confused. now time to see if I can crash my machine and head home.","date":"2013-02-01T01:18:57.629Z","type":"message"}
{"nick":"trevnorris","reason":"Ping timeout: 245 seconds","date":"2013-02-01T01:25:51.829Z","type":"quit"}
{"nick":"lohkey","date":"2013-02-01T01:29:44.198Z","type":"part"}
{"nick":"TooTallNate","date":"2013-02-01T01:37:40.570Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 252 seconds","date":"2013-02-01T01:38:12.229Z","type":"quit"}
{"nick":"hz","date":"2013-02-01T01:39:29.016Z","type":"quit"}
{"nick":"abraxas","date":"2013-02-01T01:44:48.427Z","type":"join"}
{"nick":"Benvie","reason":"Read error: Connection reset by peer","date":"2013-02-01T01:55:12.763Z","type":"quit"}
{"nick":"Benvie","date":"2013-02-01T01:55:28.324Z","type":"join"}
{"nick":"qmx|away","reason":"Ping timeout: 260 seconds","date":"2013-02-01T02:18:34.985Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-02-01T02:22:21.667Z","type":"quit"}
{"nick":"qmx|away","date":"2013-02-01T02:29:08.924Z","type":"join"}
{"nick":"pooya","reason":"Read error: Connection reset by peer","date":"2013-02-01T02:29:09.056Z","type":"quit"}
{"nick":"pooya","date":"2013-02-01T02:29:31.355Z","type":"join"}
{"nick":"qmx|away","reason":"Ping timeout: 248 seconds","date":"2013-02-01T02:33:39.971Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-02-01T02:36:30.969Z","type":"quit"}
{"nick":"qmx|away","date":"2013-02-01T02:40:49.714Z","type":"join"}
{"nick":"jmar777","date":"2013-02-01T02:43:35.029Z","type":"join"}
{"nick":"qmx|away","reason":"Ping timeout: 252 seconds","date":"2013-02-01T02:48:36.288Z","type":"quit"}
{"nick":"qmx|away","date":"2013-02-01T02:51:49.731Z","type":"join"}
{"nick":"stagas","date":"2013-02-01T02:52:07.284Z","type":"join"}
{"nick":"qmx|away","reason":"Ping timeout: 248 seconds","date":"2013-02-01T02:56:35.942Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-02-01T02:59:36.055Z","type":"quit"}
{"nick":"sblom","reason":"Ping timeout: 264 seconds","date":"2013-02-01T02:59:36.411Z","type":"quit"}
{"nick":"stagas","reason":"Quit: ChatZilla 0.9.89-rdmsoft [XULRunner 1.9.0.17/2009122204]","date":"2013-02-01T03:01:53.150Z","type":"quit"}
{"nick":"dap","date":"2013-02-01T03:07:20.730Z","type":"join"}
{"nick":"stagas","date":"2013-02-01T03:09:02.219Z","type":"join"}
{"nick":"loladiro","date":"2013-02-01T03:13:33.186Z","type":"part"}
{"nick":"qmx|away","date":"2013-02-01T03:18:38.839Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-02-01T03:19:09.594Z","type":"quit"}
{"nick":"trevnorris","date":"2013-02-01T04:07:05.669Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: so... `var a = []; while (true) a.push(new Buffer(1024);` doesn't cause the process to die. just brought my system to a hault.","date":"2013-02-01T04:08:26.259Z","type":"message"}
{"nick":"trevnorris","action":"&","date":"2013-02-01T04:12:27.479Z","type":"action"}
{"nick":"LOUDBOT","message":"IS THAT PADRE ON YOUR LAUNCH BAR? I BELIEVE IT IS","date":"2013-02-01T04:12:27.838Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-01T04:15:08.062Z","type":"quit"}
{"nick":"mraleph","date":"2013-02-01T04:15:44.708Z","type":"join"}
{"nick":"mraleph1","reason":"Ping timeout: 276 seconds","date":"2013-02-01T04:19:20.264Z","type":"quit"}
{"nick":"CoverSlide","date":"2013-02-01T04:23:41.532Z","type":"join"}
{"nick":"pooya","date":"2013-02-01T04:26:50.170Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 264 seconds","date":"2013-02-01T04:30:12.416Z","type":"quit"}
{"nick":"tjfontaine","message":"trevnorris: by halt, do you mean swapping itself to death? :)","date":"2013-02-01T04:33:34.967Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: what's strange is I was monitoring my system, and it never reached swap.","date":"2013-02-01T04:35:41.325Z","type":"message"}
{"nick":"trevnorris","message":"my system just completely stopped responding.","date":"2013-02-01T04:36:17.201Z","type":"message"}
{"nick":"tjfontaine","message":"ah interesting","date":"2013-02-01T04:36:21.379Z","type":"message"}
{"nick":"isaacs","message":"anyone know what this means? Deferred TaggedToI: not a heap number","date":"2013-02-01T04:43:40.503Z","type":"message"}
{"nick":"isaacs","message":"trevnorris, tjfontaine, indutny: ^","date":"2013-02-01T04:43:50.503Z","type":"message"}
{"nick":"isaacs","message":"?","date":"2013-02-01T04:43:51.323Z","type":"message"}
{"nick":"tjfontaine","message":"er wha","date":"2013-02-01T04:48:08.077Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: it's coming from deps/v8/src/ia32/lithium-codegen-ia32.cc:4532","date":"2013-02-01T04:50:08.360Z","type":"message"}
{"nick":"tjfontaine","message":"ya but","date":"2013-02-01T04:50:41.865Z","type":"message"}
{"nick":"trevnorris","message":"i'm tracing back and seeing what condition causes that message to appear. one min","date":"2013-02-01T04:51:33.917Z","type":"message"}
{"nick":"indutny","message":"isaacs: I'm not sure","date":"2013-02-01T04:55:48.364Z","type":"message"}
{"nick":"indutny","message":"how are you getting this?","date":"2013-02-01T04:56:01.330Z","type":"message"}
{"nick":"indutny","message":"ah, well","date":"2013-02-01T04:57:18.797Z","type":"message"}
{"nick":"indutny","message":"its just deoptimizing","date":"2013-02-01T04:57:23.111Z","type":"message"}
{"nick":"indutny","message":"so it has expected heap number","date":"2013-02-01T04:57:32.777Z","type":"message"}
{"nick":"indutny","message":"and received something else","date":"2013-02-01T04:57:36.772Z","type":"message"}
{"nick":"indutny","message":"that's all","date":"2013-02-01T04:57:38.264Z","type":"message"}
{"nick":"indutny","message":"I guess some variable isn't monomorphic","date":"2013-02-01T04:57:47.356Z","type":"message"}
{"nick":"indutny","message":"isaacs: ^^","date":"2013-02-01T04:57:49.837Z","type":"message"}
{"nick":"tjfontaine","message":"sure, but I'm guessing he's expecting it to be?","date":"2013-02-01T04:58:00.289Z","type":"message"}
{"nick":"indutny","message":"he = v8, yes","date":"2013-02-01T04:58:17.693Z","type":"message"}
{"nick":"tjfontaine","message":"no I mean, I presumed he was looking for a reason he was deopt'ing","date":"2013-02-01T04:58:33.842Z","type":"message"}
{"nick":"indutny","message":"probably because you're doing some operation on integers","date":"2013-02-01T04:58:36.917Z","type":"message"}
{"nick":"indutny","message":"well, the reason for deopt is simple","date":"2013-02-01T04:58:49.615Z","type":"message"}
{"nick":"indutny","message":"v8 has received oddball instead of heap number","date":"2013-02-01T04:59:00.148Z","type":"message"}
{"nick":"indutny","message":"like null, undefined","date":"2013-02-01T04:59:08.775Z","type":"message"}
{"nick":"indutny","message":"or just string","date":"2013-02-01T04:59:10.403Z","type":"message"}
{"nick":"tjfontaine","message":"or object","date":"2013-02-01T04:59:13.535Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-02-01T04:59:16.285Z","type":"message"}
{"nick":"tjfontaine","message":"again","date":"2013-02-01T04:59:21.276Z","type":"message"}
{"nick":"tjfontaine","message":"I was thinking he was looking for more information than that","date":"2013-02-01T04:59:29.447Z","type":"message"}
{"nick":"indutny","message":"well, I need to see code where it happens","date":"2013-02-01T04:59:46.246Z","type":"message"}
{"nick":"indutny","message":"i.e. I need more information too","date":"2013-02-01T04:59:55.402Z","type":"message"}
{"nick":"isaacs","message":"indutny: the function is so tiny...","date":"2013-02-01T05:01:02.842Z","type":"message"}
{"nick":"isaacs","message":"indutny: it's this:","date":"2013-02-01T05:01:06.272Z","type":"message"}
{"nick":"isaacs","message":"function pipeOnDrain(src, dest) {","date":"2013-02-01T05:01:18.602Z","type":"message"}
{"nick":"isaacs","message":"  var state = src._readableState;","date":"2013-02-01T05:01:18.734Z","type":"message"}
{"nick":"isaacs","message":"  state.awaitDrain--;","date":"2013-02-01T05:01:18.734Z","type":"message"}
{"nick":"isaacs","message":"  if (state.awaitDrain === 0)","date":"2013-02-01T05:01:18.734Z","type":"message"}
{"nick":"isaacs","message":"    flow(src);","date":"2013-02-01T05:01:18.734Z","type":"message"}
{"nick":"isaacs","message":"}","date":"2013-02-01T05:01:21.122Z","type":"message"}
{"nick":"isaacs","message":"and awaitDrain is always an integer","date":"2013-02-01T05:01:26.412Z","type":"message"}
{"nick":"indutny","message":"I guess awaitDrain isn't always heap number","date":"2013-02-01T05:01:32.847Z","type":"message"}
{"nick":"indutny","message":"integer != heap number","date":"2013-02-01T05:01:37.932Z","type":"message"}
{"nick":"isaacs","message":"ah.","date":"2013-02-01T05:01:41.492Z","type":"message"}
{"nick":"isaacs","message":"intersting","date":"2013-02-01T05:01:43.682Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-02-01T05:01:55.274Z","type":"message"}
{"nick":"indutny","message":"are you always just incrementing/decrementing it?","date":"2013-02-01T05:02:05.331Z","type":"message"}
{"nick":"trevnorris","message":"indutny: think there may be a problem that it's expecting an Smi, but gets something else?","date":"2013-02-01T05:02:08.726Z","type":"message"}
{"nick":"indutny","message":"seems like so","date":"2013-02-01T05:02:24.753Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-02-01T05:02:30.591Z","type":"message"}
{"nick":"indutny","message":"trevnorris: no, not really","date":"2013-02-01T05:02:49.613Z","type":"message"}
{"nick":"indutny","message":"at least that's not what comment tells us","date":"2013-02-01T05:02:59.375Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-02-01T05:03:28.465Z","type":"quit"}
{"nick":"indutny","message":"isaacs: looks like it shouldn't be heap number at any time","date":"2013-02-01T05:03:43.277Z","type":"message"}
{"nick":"indutny","message":"so this deoptimization is pretty strange","date":"2013-02-01T05:03:50.883Z","type":"message"}
{"nick":"indutny","message":"is it happening only once?","date":"2013-02-01T05:04:03.301Z","type":"message"}
{"nick":"indutny","message":"or periodically","date":"2013-02-01T05:04:08.240Z","type":"message"}
{"nick":"trevnorris","message":"it's being called from DoDeferredTaggedToI","date":"2013-02-01T05:04:19.527Z","type":"message"}
{"nick":"brson","date":"2013-02-01T05:04:21.067Z","type":"join"}
{"nick":"isaacs","message":"indutny: a few times","date":"2013-02-01T05:04:36.840Z","type":"message"}
{"nick":"trevnorris","message":"but i'm having a hard time figuring out how it gets there","date":"2013-02-01T05:04:44.292Z","type":"message"}
{"nick":"indutny","message":"isaacs: ok, so that's probably not a serious thing","date":"2013-02-01T05:04:47.739Z","type":"message"}
{"nick":"indutny","message":"trevnorris: me too","date":"2013-02-01T05:04:49.988Z","type":"message"}
{"nick":"indutny","message":"but if you want to really figure it out - it'll be probably better to file issue","date":"2013-02-01T05:05:02.608Z","type":"message"}
{"nick":"indutny","message":"on v8's tracker","date":"2013-02-01T05:05:06.693Z","type":"message"}
{"nick":"indutny","message":"describing what we have","date":"2013-02-01T05:05:10.370Z","type":"message"}
{"nick":"indutny","message":"and what we see","date":"2013-02-01T05:05:12.705Z","type":"message"}
{"nick":"indutny","message":"they'll either answer it","date":"2013-02-01T05:05:17.816Z","type":"message"}
{"nick":"indutny","message":"or fix it","date":"2013-02-01T05:05:19.434Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-02-01T05:05:20.375Z","type":"message"}
{"nick":"trevnorris","message":"here's the comment right above the error:","date":"2013-02-01T05:05:22.873Z","type":"message"}
{"nick":"trevnorris","message":"\"\"Check for undefined. Undefined is converted to zero for truncating conversions\"","date":"2013-02-01T05:05:28.866Z","type":"message"}
{"nick":"indutny","message":"trevnorris: there're other places with this deopt","date":"2013-02-01T05:05:41.676Z","type":"message"}
{"nick":"trevnorris","message":"nope. this is the only place","date":"2013-02-01T05:05:49.943Z","type":"message"}
{"nick":"indutny","message":"ah no","date":"2013-02-01T05:05:53.364Z","type":"message"}
{"nick":"indutny","message":"well, where can you see this comment?","date":"2013-02-01T05:06:00.912Z","type":"message"}
{"nick":"indutny","message":"I'm looking at lithium-ia32-codegen","date":"2013-02-01T05:06:13.744Z","type":"message"}
{"nick":"indutny","message":"err","date":"2013-02-01T05:06:15.906Z","type":"message"}
{"nick":"indutny","message":"lithium-codegen-ia32","date":"2013-02-01T05:06:19.043Z","type":"message"}
{"nick":"trevnorris","message":"src/ia32/lithium-codegen-ia32.cc","date":"2013-02-01T05:06:21.179Z","type":"message"}
{"nick":"isaacs","message":"hm.","date":"2013-02-01T05:06:22.419Z","type":"message"}
{"nick":"trevnorris","message":"indutny: yeah, but x64/lithium-codegen-x64.cc depends on it","date":"2013-02-01T05:06:39.749Z","type":"message"}
{"nick":"indutny","message":"    // Deoptimize if we don't have a heap number.","date":"2013-02-01T05:06:46.292Z","type":"message"}
{"nick":"indutny","message":"    __ RecordComment(\"Deferred TaggedToI: not a heap number\");","date":"2013-02-01T05:06:46.440Z","type":"message"}
{"nick":"indutny","message":"can't see this comment","date":"2013-02-01T05:06:53.506Z","type":"message"}
{"nick":"indutny","message":"ah, you're looking at another case","date":"2013-02-01T05:07:09.669Z","type":"message"}
{"nick":"trevnorris","message":"suck, sorry. talking w/ my wife and doing this doesn't have good results.","date":"2013-02-01T05:07:24.490Z","type":"message"}
{"nick":"trevnorris","message":"indutny: x64/lithium-x64.h:1810","date":"2013-02-01T05:09:38.968Z","type":"message"}
{"nick":"trevnorris","message":"\"Truncating conversion from a tagged value to an int32\"","date":"2013-02-01T05:09:44.912Z","type":"message"}
{"nick":"indutny","message":"it's not truncating in our case","date":"2013-02-01T05:10:00.181Z","type":"message"}
{"nick":"trevnorris","message":"indutny: that's exactly it","date":"2013-02-01T05:10:08.170Z","type":"message"}
{"nick":"trevnorris","message":"there's an if statement \"if (instr->truncating())\"","date":"2013-02-01T05:10:22.450Z","type":"message"}
{"nick":"trevnorris","message":"and the first thing in the else is the message","date":"2013-02-01T05:10:29.240Z","type":"message"}
{"nick":"indutny","message":"so I guess what's really happening here","date":"2013-02-01T05:12:02.096Z","type":"message"}
{"nick":"indutny","message":"is that v8 compiles this function without enough type information","date":"2013-02-01T05:12:11.339Z","type":"message"}
{"nick":"indutny","message":"and thoughts that it is a heap number","date":"2013-02-01T05:12:17.581Z","type":"message"}
{"nick":"indutny","message":"then it encounters it and see that it's actually as SMI","date":"2013-02-01T05:12:28.028Z","type":"message"}
{"nick":"indutny","message":"and stops doing this shit","date":"2013-02-01T05:12:31.202Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-02-01T05:12:31.855Z","type":"message"}
{"nick":"indutny","message":"gtg","date":"2013-02-01T05:12:34.334Z","type":"message"}
{"nick":"indutny","message":"ttyl","date":"2013-02-01T05:12:34.820Z","type":"message"}
{"nick":"isaacs","message":"k, have fun","date":"2013-02-01T05:12:37.544Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: having a function in a closure like pipeOnDrain causes v8 to try to recompile the function every time it's returned","date":"2013-02-01T05:14:49.311Z","type":"message"}
{"nick":"trevnorris","message":"and every time it mis judges the type info","date":"2013-02-01T05:15:04.970Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: you'll see something similar with \"marking writeReq.oncomplete\"","date":"2013-02-01T05:16:29.053Z","type":"message"}
{"nick":"isaacs","message":"yeah, fixed that already","date":"2013-02-01T05:16:46.311Z","type":"message"}
{"nick":"trevnorris","message":"it has to recompile every callback that's called.","date":"2013-02-01T05:16:46.436Z","type":"message"}
{"nick":"trevnorris","message":"cool","date":"2013-02-01T05:16:52.975Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: pushed to my fork, branch=stream-pipe-refactor, if you're curious","date":"2013-02-01T05:20:53.093Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i'm off for the night","date":"2013-02-01T05:20:56.509Z","type":"message"}
{"nick":"trevnorris","message":"cool. i'll take a look. thanks.","date":"2013-02-01T05:21:06.105Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-02-01T05:23:08.021Z","type":"quit"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-02-01T05:27:59.231Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-02-01T05:47:44.622Z","type":"join"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-02-01T05:58:21.800Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-02-01T06:02:33.115Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 276 seconds","date":"2013-02-01T06:13:36.414Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-02-01T06:19:18.099Z","type":"quit"}
{"nick":"stagas","reason":"Ping timeout: 245 seconds","date":"2013-02-01T06:24:11.085Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-02-01T06:25:40.014Z","type":"join"}
{"nick":"pooya","date":"2013-02-01T06:27:37.323Z","type":"join"}
{"nick":"paddybyers","date":"2013-02-01T06:29:57.901Z","type":"join"}
{"nick":"AvianFlu","date":"2013-02-01T06:33:37.560Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 245 seconds","date":"2013-02-01T06:34:11.826Z","type":"quit"}
{"nick":"abraxas","date":"2013-02-01T07:14:50.481Z","type":"join"}
{"nick":"trevnorris","message":"freaking a. so between v8 versions of v0.8 and v0.9, parseInt changed.","date":"2013-02-01T07:25:34.680Z","type":"message"}
{"nick":"trevnorris","message":"couldn't figure out why a test would pass with one and not the other","date":"2013-02-01T07:25:52.599Z","type":"message"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-02-01T07:26:28.395Z","type":"quit"}
{"nick":"paddybyers","reason":"Read error: Connection reset by peer","date":"2013-02-01T07:27:53.344Z","type":"quit"}
{"nick":"paddybyers","date":"2013-02-01T07:28:08.166Z","type":"join"}
{"nick":"rendar","date":"2013-02-01T07:28:52.695Z","type":"join"}
{"nick":"pooya","date":"2013-02-01T07:34:08.562Z","type":"join"}
{"nick":"`3rdEden","date":"2013-02-01T07:42:50.428Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-02-01T07:51:08.822Z","type":"quit"}
{"nick":"abraxas","date":"2013-02-01T07:51:42.364Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 264 seconds","date":"2013-02-01T07:56:30.154Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: oh, meant to say. When I say DEOPT, I mean bailout. (e.g. \"**** DEOPT: <fn> at bailout\")","date":"2013-02-01T07:57:15.971Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 245 seconds","date":"2013-02-01T07:57:31.109Z","type":"quit"}
{"nick":"trevnorris","message":"but guess that's confusing. i'll start saying bailout. ;-)","date":"2013-02-01T07:57:34.308Z","type":"message"}
{"nick":"brson","date":"2013-02-01T07:59:21.804Z","type":"join"}
{"nick":"indutny","message":"yeah","date":"2013-02-01T08:01:29.467Z","type":"message"}
{"nick":"indutny","message":"please do not mess with namings","date":"2013-02-01T08:01:33.745Z","type":"message"}
{"nick":"felixge","date":"2013-02-01T08:05:21.018Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-02-01T08:05:23.229Z","type":"quit"}
{"nick":"felixge","date":"2013-02-01T08:05:23.358Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-01T08:07:30.220Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-02-01T08:08:51.437Z","type":"join"}
{"nick":"mikeal","date":"2013-02-01T08:11:16.175Z","type":"join"}
{"nick":"paddybyers","date":"2013-02-01T08:19:58.605Z","type":"join"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-02-01T08:48:42.534Z","type":"quit"}
{"nick":"trevnorris","message":"indutny: guess I started using them interchangeably because can't remember seeing a DEOPT w/ a bailout after it.","date":"2013-02-01T08:52:15.794Z","type":"message"}
{"nick":"indutny","message":"well, bailout and deopt are kind of different things","date":"2013-02-01T08:52:32.505Z","type":"message"}
{"nick":"indutny","message":"deopt happens in runtime","date":"2013-02-01T08:52:41.157Z","type":"message"}
{"nick":"indutny","message":"when some odd inputs received","date":"2013-02-01T08:52:44.654Z","type":"message"}
{"nick":"indutny","message":"bailout happens during optimization","date":"2013-02-01T08:52:48.916Z","type":"message"}
{"nick":"indutny","message":"therefore bailouts are usually happens at program start","date":"2013-02-01T08:53:03.887Z","type":"message"}
{"nick":"indutny","message":"and don't happening afterwards","date":"2013-02-01T08:53:15.443Z","type":"message"}
{"nick":"indutny","message":"and deopts are happening through whole execution time","date":"2013-02-01T08:53:23.511Z","type":"message"}
{"nick":"pooya","date":"2013-02-01T08:55:01.995Z","type":"join"}
{"nick":"trevnorris","message":"interesting. thanks.","date":"2013-02-01T08:55:14.128Z","type":"message"}
{"nick":"indutny","message":"np","date":"2013-02-01T08:55:42.200Z","type":"message"}
{"nick":"trevnorris","message":"don't know why i'm so obsessed with this optimization thing.","date":"2013-02-01T08:56:06.912Z","type":"message"}
{"nick":"indutny","message":"well, its good thing to do","date":"2013-02-01T08:56:20.702Z","type":"message"}
{"nick":"indutny","message":"but you should measure things first","date":"2013-02-01T08:56:24.780Z","type":"message"}
{"nick":"indutny","message":"sometimes it isn't that important","date":"2013-02-01T08:56:31.022Z","type":"message"}
{"nick":"indutny","message":"and also","date":"2013-02-01T08:56:33.319Z","type":"message"}
{"nick":"indutny","message":"v8 is changing","date":"2013-02-01T08:56:38.646Z","type":"message"}
{"nick":"indutny","message":"so eventually some deopts might disappear","date":"2013-02-01T08:56:47.665Z","type":"message"}
{"nick":"indutny","message":"or some might appear","date":"2013-02-01T08:56:51.073Z","type":"message"}
{"nick":"indutny","message":"we should change code carefully, ideally the fastest JS code looks a bit like C","date":"2013-02-01T08:57:11.845Z","type":"message"}
{"nick":"pooya","reason":"Client Quit","date":"2013-02-01T08:57:19.306Z","type":"quit"}
{"nick":"trevnorris","message":"true. guess I see this as more a hobby then part of my programming.","date":"2013-02-01T08:57:19.466Z","type":"message"}
{"nick":"indutny","message":"there're no reason to step beyond this, since quirks won't work forever","date":"2013-02-01T08:57:35.906Z","type":"message"}
{"nick":"trevnorris","message":"just spent 2 hours figuring out the best way to check arguments based on expected inputs (e.g. optional argument types)","date":"2013-02-01T08:58:05.880Z","type":"message"}
{"nick":"trevnorris","message":"yeah. I can't believe how well v8 can inline code.","date":"2013-02-01T08:58:21.633Z","type":"message"}
{"nick":"trevnorris","message":"their handling of Smi's is incredible.","date":"2013-02-01T08:58:34.460Z","type":"message"}
{"nick":"brson","reason":"Remote host closed the connection","date":"2013-02-01T08:59:17.385Z","type":"quit"}
{"nick":"trevnorris","message":"indutny: so what do you think about this approach:","date":"2013-02-01T09:02:33.995Z","type":"message"}
{"nick":"trevnorris","message":"user facing functions basically handle arguments checking, since they're the most likely to slow things down.","date":"2013-02-01T09:02:41.833Z","type":"message"}
{"nick":"trevnorris","message":"then return another function passing the good values, so v8 always knows what to expect.","date":"2013-02-01T09:02:45.692Z","type":"message"}
{"nick":"trevnorris","message":"sort of what I did here: http://git.io/TJkNsQ","date":"2013-02-01T09:05:03.578Z","type":"message"}
{"nick":"indutny","message":"my opinion, benchmark first","date":"2013-02-01T09:07:23.686Z","type":"message"}
{"nick":"indutny","message":"optimize later","date":"2013-02-01T09:07:27.290Z","type":"message"}
{"nick":"indutny","message":"I don't want to touch code that isn't relevant to our performance problems","date":"2013-02-01T09:07:37.877Z","type":"message"}
{"nick":"indutny","message":"because usually time is spent in user-land anyway","date":"2013-02-01T09:07:49.776Z","type":"message"}
{"nick":"trevnorris","message":"true true.","date":"2013-02-01T09:08:53.985Z","type":"message"}
{"nick":"wolfeida_","date":"2013-02-01T09:09:10.979Z","type":"join"}
{"nick":"trevnorris","message":"and definitely understand my micro-performance obsessive side is not my programmer side.","date":"2013-02-01T09:10:08.431Z","type":"message"}
{"nick":"trevnorris","message":"just find it relaxing to pick apart the little things sometimes.","date":"2013-02-01T09:10:22.555Z","type":"message"}
{"nick":"wolfeid__","date":"2013-02-01T09:10:48.428Z","type":"join"}
{"nick":"wolfeidau","reason":"Ping timeout: 276 seconds","date":"2013-02-01T09:11:25.028Z","type":"quit"}
{"nick":"wolfeida_","reason":"Ping timeout: 245 seconds","date":"2013-02-01T09:13:46.814Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-02-01T09:17:09.894Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-02-01T09:17:43.925Z","type":"join"}
{"nick":"Ralt","reason":"Remote host closed the connection","date":"2013-02-01T09:37:01.277Z","type":"quit"}
{"nick":"trevnorris","message":"indutny: want your opinion. isaacs mentioned something like `var a = []; while (true) a.push(Buffer(1024));` should crash the process before the system runs out of memory.","date":"2013-02-01T09:41:33.848Z","type":"message"}
{"nick":"trevnorris","message":"but it caused my system to halt.","date":"2013-02-01T09:41:46.210Z","type":"message"}
{"nick":"trevnorris","message":"think there should be a failsafe for a process to kill itself if it detects the system is running low?","date":"2013-02-01T09:42:09.237Z","type":"message"}
{"nick":"indutny","message":"wut? :)","date":"2013-02-01T09:42:21.274Z","type":"message"}
{"nick":"indutny","message":"well, you basically want to emulate OOM","date":"2013-02-01T09:42:29.009Z","type":"message"}
{"nick":"indutny","message":"the best way to do it","date":"2013-02-01T09:42:33.987Z","type":"message"}
{"nick":"indutny","message":"is to compile 32bit version of node","date":"2013-02-01T09:42:39.476Z","type":"message"}
{"nick":"indutny","message":"and run this code","date":"2013-02-01T09:42:41.920Z","type":"message"}
{"nick":"indutny","message":"running x64 version will halt your system","date":"2013-02-01T09:42:50.294Z","type":"message"}
{"nick":"indutny","message":"because it'll allocate all available virtual memory too","date":"2013-02-01T09:42:57.270Z","type":"message"}
{"nick":"indutny","message":"and will start swapping out everything you've in RAM","date":"2013-02-01T09:43:09.134Z","type":"message"}
{"nick":"trevnorris","message":"yeah, i'm curious about that. i was monitoring my system while doing that and it halted at 6.3GB of RAM usage, even though I have 8.","date":"2013-02-01T09:43:56.026Z","type":"message"}
{"nick":"trevnorris","message":"maybe it wasn't telling me everything...","date":"2013-02-01T09:44:17.958Z","type":"message"}
{"nick":"trevnorris","message":"well, i'll be jumping off soon, so i'll try the 32bit thing and let you know how it goes.","date":"2013-02-01T09:44:37.484Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-02-01T09:45:23.013Z","type":"message"}
{"nick":"trevnorris","message":"well, here we go...","date":"2013-02-01T09:51:58.012Z","type":"message"}
{"nick":"trevnorris","message":"still going, but just got \"terminate called after throwing an instance of 'std::bad_alloc'\"","date":"2013-02-01T09:52:50.726Z","type":"message"}
{"nick":"trevnorris","message":"nice. just died with \"Aborted (core dumped)\"","date":"2013-02-01T09:54:08.118Z","type":"message"}
{"nick":"indutny","message":"yep","date":"2013-02-01T09:54:08.766Z","type":"message"}
{"nick":"indutny","message":"OOM","date":"2013-02-01T09:54:12.421Z","type":"message"}
{"nick":"trevnorris","message":"much better than halting my system.","date":"2013-02-01T09:54:25.714Z","type":"message"}
{"nick":"indutny","message":"yep, that's because 32bit processes are limited to 2gb heap","date":"2013-02-01T09:57:04.029Z","type":"message"}
{"nick":"trevnorris","message":"cool. so think i'd be good to build in a self checker to prevent 64bit systems from blowing up?","date":"2013-02-01T09:58:38.656Z","type":"message"}
{"nick":"googol","reason":"Ping timeout: 264 seconds","date":"2013-02-01T09:59:00.432Z","type":"quit"}
{"nick":"indutny","message":"trevnorris: huh?","date":"2013-02-01T10:00:15.088Z","type":"message"}
{"nick":"indutny","message":"trevnorris: you want to make checker patch for node.js?","date":"2013-02-01T10:00:25.107Z","type":"message"}
{"nick":"trevnorris","message":"indutny: i dunno. just thought that there might be a time a script has memory leak, and since externally allocated memory won't cause the process to die automatically it might be good to have the process check the system/itself and die if a limit was reached.","date":"2013-02-01T10:04:11.340Z","type":"message"}
{"nick":"trevnorris","message":"just a nicety to prevent from having to restart a server if it halted on accident.","date":"2013-02-01T10:04:41.728Z","type":"message"}
{"nick":"indutny","message":"that's OS' work","date":"2013-02-01T10:04:43.437Z","type":"message"}
{"nick":"indutny","message":"you can limit memory available for process","date":"2013-02-01T10:05:02.639Z","type":"message"}
{"nick":"indutny","message":"if you want to","date":"2013-02-01T10:05:04.766Z","type":"message"}
{"nick":"trevnorris","message":"indutny: so we could just tell the OS to not allow a script to allocate more than X MB of external memory?","date":"2013-02-01T10:06:06.751Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-02-01T10:06:13.916Z","type":"message"}
{"nick":"indutny","message":"well","date":"2013-02-01T10:06:20.833Z","type":"message"}
{"nick":"trevnorris","message":"ah, well that's easy.","date":"2013-02-01T10:06:21.321Z","type":"message"}
{"nick":"indutny","message":"sort of","date":"2013-02-01T10:06:24.188Z","type":"message"}
{"nick":"indutny","message":"but I don't want to do this from node","date":"2013-02-01T10:06:30.305Z","type":"message"}
{"nick":"indutny","message":"this should be done by separate utilities","date":"2013-02-01T10:06:38.337Z","type":"message"}
{"nick":"trevnorris","message":"how do you mean?","date":"2013-02-01T10:06:49.280Z","type":"message"}
{"nick":"indutny","message":"ulimit -m","date":"2013-02-01T10:07:30.174Z","type":"message"}
{"nick":"indutny","message":"ulimit -d","date":"2013-02-01T10:07:31.636Z","type":"message"}
{"nick":"trevnorris","message":"ah, ok.","date":"2013-02-01T10:09:41.732Z","type":"message"}
{"nick":"abraxas","reason":"*.net *.split","date":"2013-02-01T10:10:12.361Z","type":"quit"}
{"nick":"rvagg","reason":"*.net *.split","date":"2013-02-01T10:10:12.623Z","type":"quit"}
{"nick":"abraxas","date":"2013-02-01T10:10:42.460Z","type":"join"}
{"nick":"indutny","message":"ulimit -m seems to be borked","date":"2013-02-01T10:10:43.836Z","type":"message"}
{"nick":"indutny","message":"but ulimit -d should work","date":"2013-02-01T10:10:49.540Z","type":"message"}
{"nick":"trevnorris","message":"so, for example, on a server the node process should run as it's own user with it's own resource limits?","date":"2013-02-01T10:13:03.728Z","type":"message"}
{"nick":"rvagg","date":"2013-02-01T10:13:11.949Z","type":"join"}
{"nick":"indutny","message":"ulimit is not user wide","date":"2013-02-01T10:15:47.853Z","type":"message"}
{"nick":"indutny","message":"its session wide","date":"2013-02-01T10:15:50.962Z","type":"message"}
{"nick":"indutny","message":"but yeah, limits can be applied on user level too","date":"2013-02-01T10:15:59.917Z","type":"message"}
{"nick":"indutny","message":"anyway, I'm not going to teach you this :)","date":"2013-02-01T10:16:05.494Z","type":"message"}
{"nick":"indutny","message":"all this information is pretty easy googlable","date":"2013-02-01T10:16:15.380Z","type":"message"}
{"nick":"trevnorris","message":"man, even with the work on improving streams. still behind ~17%","date":"2013-02-01T10:21:53.094Z","type":"message"}
{"nick":"trevnorris","message":"thanks for the info.","date":"2013-02-01T10:23:37.897Z","type":"message"}
{"nick":"trevnorris","reason":"\"off to bed\"","date":"2013-02-01T10:23:45.403Z","type":"part"}
{"nick":"indutny","message":"ttyl","date":"2013-02-01T10:23:50.504Z","type":"message"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-02-01T10:31:46.336Z","type":"quit"}
{"nick":"abraxas","date":"2013-02-01T10:32:19.451Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 248 seconds","date":"2013-02-01T10:36:36.734Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-02-01T10:38:38.152Z","type":"quit"}
{"nick":"AvianFlu","reason":"Read error: Connection reset by peer","date":"2013-02-01T10:52:07.055Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-02-01T10:52:45.880Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-02-01T11:04:09.584Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-02-01T11:19:21.704Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: morning","date":"2013-02-01T11:24:49.021Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: hi","date":"2013-02-01T12:02:08.351Z","type":"message"}
{"nick":"indutny","message":"howdy?","date":"2013-02-01T12:02:12.905Z","type":"message"}
{"nick":"indutny","action":"is still fighting with streams2","date":"2013-02-01T12:05:10.270Z","type":"action"}
{"nick":"bnoordhuis","message":"ah, streams2...","date":"2013-02-01T12:22:39.677Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-02-01T12:22:49.526Z","type":"message"}
{"nick":"indutny","message":"pretty painful thing","date":"2013-02-01T12:22:56.391Z","type":"message"}
{"nick":"indutny","message":"but I'm starting to believe that it's generally good","date":"2013-02-01T12:23:08.121Z","type":"message"}
{"nick":"bnoordhuis","message":"yes? how come?","date":"2013-02-01T12:23:15.703Z","type":"message"}
{"nick":"bnoordhuis","message":"also, i'm kind of pissed off at the v8 people that they won't accept this patch: https://codereview.chromium.org/11418101","date":"2013-02-01T12:23:30.291Z","type":"message"}
{"nick":"bnoordhuis","message":"it makes the python binary configurable","date":"2013-02-01T12:23:44.110Z","type":"message"}
{"nick":"bnoordhuis","message":"seems innocent enough to me","date":"2013-02-01T12:23:51.377Z","type":"message"}
{"nick":"bnoordhuis","message":"but there's this obstructionist that's blocking it for no good reason afaict","date":"2013-02-01T12:24:07.674Z","type":"message"}
{"nick":"bnoordhuis","message":"maybe we should just fork v8 and be done with it :)","date":"2013-02-01T12:24:20.341Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, back to streams2. what's good about it?","date":"2013-02-01T12:24:32.121Z","type":"message"}
{"nick":"sgallagh","date":"2013-02-01T12:25:26.787Z","type":"join"}
{"nick":"indutny","message":":)","date":"2013-02-01T12:25:47.579Z","type":"message"}
{"nick":"indutny","message":"well, back pressure","date":"2013-02-01T12:25:55.661Z","type":"message"}
{"nick":"indutny","message":"and multiplexing","date":"2013-02-01T12:25:59.285Z","type":"message"}
{"nick":"indutny","message":"well, not multiplexing","date":"2013-02-01T12:26:04.148Z","type":"message"}
{"nick":"indutny","message":"multipiping","date":"2013-02-01T12:26:06.272Z","type":"message"}
{"nick":"indutny","message":"right now it doesn't work at all","date":"2013-02-01T12:26:12.058Z","type":"message"}
{"nick":"indutny","message":"also, I think we might eventually end up emitting 'readable'/'drain' events from libuv","date":"2013-02-01T12:26:30.633Z","type":"message"}
{"nick":"indutny","message":"directly after kevent()/epoll_wait() call","date":"2013-02-01T12:26:42.108Z","type":"message"}
{"nick":"bnoordhuis","message":"why?","date":"2013-02-01T12:26:48.585Z","type":"message"}
{"nick":"indutny","message":"well, why not?","date":"2013-02-01T12:26:55.003Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-02-01T12:26:55.532Z","type":"message"}
{"nick":"bnoordhuis","message":"why not not?","date":"2013-02-01T12:27:05.447Z","type":"message"}
{"nick":"indutny","message":"well, because its more natural","date":"2013-02-01T12:27:22.933Z","type":"message"}
{"nick":"indutny","message":"don't you think so?","date":"2013-02-01T12:27:25.372Z","type":"message"}
{"nick":"indutny","message":"what do you like more washing hands from firehose","date":"2013-02-01T12:27:47.205Z","type":"message"}
{"nick":"indutny","message":"or washing them in sink","date":"2013-02-01T12:27:50.993Z","type":"message"}
{"nick":"bnoordhuis","message":"'more natural' is not really a convincing argument, fedor :)","date":"2013-02-01T12:27:57.107Z","type":"message"}
{"nick":"indutny","message":"I mean faucet","date":"2013-02-01T12:28:01.795Z","type":"message"}
{"nick":"indutny","message":"ok, it might be too radical :)","date":"2013-02-01T12:28:14.131Z","type":"message"}
{"nick":"indutny","message":"but the idea behind streams2 is pretty good","date":"2013-02-01T12:28:23.021Z","type":"message"}
{"nick":"indutny","message":"and, for example, tls is going to be a way more better","date":"2013-02-01T12:28:36.029Z","type":"message"}
{"nick":"indutny","message":"because of it","date":"2013-02-01T12:28:39.787Z","type":"message"}
{"nick":"indutny","message":"so, before streams2, we was only aware of push-streams","date":"2013-02-01T12:29:08.330Z","type":"message"}
{"nick":"indutny","message":"now we support pull-streams too","date":"2013-02-01T12:29:14.773Z","type":"message"}
{"nick":"indutny","message":"which is very useful too","date":"2013-02-01T12:29:20.290Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ok, lets turn it around. why do you think its bad?","date":"2013-02-01T12:30:26.414Z","type":"message"}
{"nick":"indutny","message":"I can point few things myself","date":"2013-02-01T12:30:34.552Z","type":"message"}
{"nick":"indutny","message":"(not saying its 100% perfect)","date":"2013-02-01T12:30:39.807Z","type":"message"}
{"nick":"indutny","message":"1) Complex internal logic","date":"2013-02-01T12:30:45.870Z","type":"message"}
{"nick":"indutny","message":"2) Hard to wrap in mind","date":"2013-02-01T12:30:55.529Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-02-01T12:33:46.934Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: any comments? :)","date":"2013-02-01T12:34:14.015Z","type":"message"}
{"nick":"benoitc","date":"2013-02-01T12:39:02.879Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: yes, in a minute","date":"2013-02-01T12:40:43.508Z","type":"message"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-02-01T12:42:55.020Z","type":"nick"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-02-01T13:03:39.479Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: delay :)","date":"2013-02-01T13:03:55.023Z","type":"message"}
{"nick":"indutny","message":"i think you hang up","date":"2013-02-01T13:03:58.383Z","type":"message"}
{"nick":"bnoordhuis","message":"such is family life: all delay, all the time","date":"2013-02-01T13:04:24.387Z","type":"message"}
{"nick":"indutny","message":"oh good","date":"2013-02-01T13:04:53.769Z","type":"message"}
{"nick":"indutny","message":"s/oo/o/","date":"2013-02-01T13:05:00.212Z","type":"message"}
{"nick":"bnoordhuis","message":"re events, libuv has a 'not needed? not added' policy","date":"2013-02-01T13:05:03.385Z","type":"message"}
{"nick":"indutny","message":"ok, lets pretend I wasn't saying that kevent/epoll_wait thing","date":"2013-02-01T13:07:16.703Z","type":"message"}
{"nick":"indutny","message":"any other objections against streams2?","date":"2013-02-01T13:07:22.916Z","type":"message"}
{"nick":"bnoordhuis","message":"from me? no","date":"2013-02-01T13:23:35.596Z","type":"message"}
{"nick":"indutny","message":"k","date":"2013-02-01T13:24:36.880Z","type":"message"}
{"nick":"indutny","message":"ok, gtg","date":"2013-02-01T13:31:30.467Z","type":"message"}
{"nick":"hz","date":"2013-02-01T13:32:24.422Z","type":"join"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-02-01T13:33:44.083Z","type":"quit"}
{"nick":"sgallagh","date":"2013-02-01T13:42:59.981Z","type":"join"}
{"nick":"rendar","reason":"Ping timeout: 245 seconds","date":"2013-02-01T13:52:56.826Z","type":"quit"}
{"nick":"jmar777","date":"2013-02-01T13:53:17.387Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-02-01T13:55:30.961Z","type":"quit"}
{"nick":"jmar777","date":"2013-02-01T13:56:07.596Z","type":"join"}
{"nick":"rendar","date":"2013-02-01T13:57:05.505Z","type":"join"}
{"nick":"jmar777","reason":"Ping timeout: 264 seconds","date":"2013-02-01T14:00:48.430Z","type":"quit"}
{"nick":"jmar777","date":"2013-02-01T14:02:20.303Z","type":"join"}
{"nick":"stagas","date":"2013-02-01T14:15:05.237Z","type":"join"}
{"nick":"hz","reason":"Read error: Connection reset by peer","date":"2013-02-01T14:35:26.473Z","type":"quit"}
{"nick":"hz","date":"2013-02-01T14:35:56.419Z","type":"join"}
{"nick":"bradleymeck","date":"2013-02-01T15:11:12.320Z","type":"join"}
{"nick":"c4milo","date":"2013-02-01T15:19:19.456Z","type":"join"}
{"nick":"isaacs","message":"good morning","date":"2013-02-01T15:22:33.011Z","type":"message"}
{"nick":"isaacs","message":"indutny, trevnorris: We're not going to check for OOM errors in node.  that is the operating system's job.  run your node in a vm or zone and limit the whole operating system, or throw it away if it blows up.","date":"2013-02-01T15:27:36.417Z","type":"message"}
{"nick":"isaacs","message":"indutny: i had an idea as i was waking up this morning, actually, about multipiping.","date":"2013-02-01T15:28:04.361Z","type":"message"}
{"nick":"isaacs","message":"indutny: right now, we pipe() to multiple places, then we keep track of how many need to drain, and wait for them all.","date":"2013-02-01T15:28:33.947Z","type":"message"}
{"nick":"isaacs","message":"indutny: but it means more complicated logic.","date":"2013-02-01T15:28:38.427Z","type":"message"}
{"nick":"isaacs","message":"indutny: with streams1, we just resume() on *any* drain event.","date":"2013-02-01T15:28:49.477Z","type":"message"}
{"nick":"isaacs","message":"indutny: so, if you do s.pipe(fast);s.pipe(slow)","date":"2013-02-01T15:29:01.937Z","type":"message"}
{"nick":"isaacs","message":"let's say they both return false.","date":"2013-02-01T15:29:10.546Z","type":"message"}
{"nick":"isaacs","message":"indutny: then fast.emit('drain')","date":"2013-02-01T15:29:16.086Z","type":"message"}
{"nick":"isaacs","message":"but slow hasn't","date":"2013-02-01T15:29:18.016Z","type":"message"}
{"nick":"isaacs","message":"indutny: now you write another chunk to both of them.  and slow returns false again, and you pause again","date":"2013-02-01T15:29:32.966Z","type":"message"}
{"nick":"isaacs","message":"indutny: the only way that's a problem is if they're both repeatedly returning false, and one of them emits drain much faster every time.","date":"2013-02-01T15:29:52.736Z","type":"message"}
{"nick":"isaacs","message":"then slow will blow up","date":"2013-02-01T15:29:55.776Z","type":"message"}
{"nick":"isaacs","message":"indutny: but with high/low watermarks, that won't usually happen.  fast will be empty, and slow won't so slow will be the only one returning false.","date":"2013-02-01T15:30:26.246Z","type":"message"}
{"nick":"isaacs","message":"indutny:  so... i think we can get rid of the awaitDrain counter entirely.  it just means that multipipe will be a bit more aggressive.","date":"2013-02-01T15:30:43.606Z","type":"message"}
{"nick":"isaacs","message":"indutny: the current setup is slowing down the common case in favor of an uncommon edge case","date":"2013-02-01T15:31:54.265Z","type":"message"}
{"nick":"mmalecki","new_nick":"mmalecki[out]","date":"2013-02-01T15:34:46.062Z","type":"nick"}
{"nick":"isaacs","message":"nevermind, it doesn't make a difference at all.","date":"2013-02-01T15:39:48.070Z","type":"message"}
{"nick":"isaacs","message":"optimizing code that runs on a vm is hard.","date":"2013-02-01T15:39:58.539Z","type":"message"}
{"nick":"pooya","date":"2013-02-01T15:42:48.385Z","type":"join"}
{"nick":"AvianFlu","date":"2013-02-01T15:57:21.628Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-02-01T15:57:56.358Z","type":"join"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2013-02-01T16:01:59.173Z","type":"quit"}
{"nick":"indutny","message":"isaacs: hoya","date":"2013-02-01T16:07:10.894Z","type":"message"}
{"nick":"indutny","message":" :)","date":"2013-02-01T16:08:32.305Z","type":"message"}
{"nick":"indutny","message":"isaacs: wanna help me with tls stuff?","date":"2013-02-01T16:08:39.835Z","type":"message"}
{"nick":"indutny","message":"I think I did quite a bit progress on it https://github.com/indutny/node/compare/feature-crypto-tls-streams2","date":"2013-02-01T16:09:00.268Z","type":"message"}
{"nick":"indutny","message":"still there're tests that are failing","date":"2013-02-01T16:09:10.572Z","type":"message"}
{"nick":"indutny","message":"I would be really pleased if you'll look into the code and share your thoughts on how I'm using streams2","date":"2013-02-01T16:09:28.256Z","type":"message"}
{"nick":"indutny","message":"also","date":"2013-02-01T16:09:28.907Z","type":"message"}
{"nick":"indutny","message":"nvm","date":"2013-02-01T16:09:40.893Z","type":"message"}
{"nick":"indutny","message":"ok, please look at the code :)","date":"2013-02-01T16:09:48.093Z","type":"message"}
{"nick":"indutny","message":"and let me know what you think","date":"2013-02-01T16:09:51.551Z","type":"message"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-02-01T16:13:29.915Z","type":"quit"}
{"nick":"isaacs","message":"ok, will do","date":"2013-02-01T16:13:42.167Z","type":"message"}
{"nick":"indutny","message":"thanks","date":"2013-02-01T16:14:22.697Z","type":"message"}
{"nick":"isaacs","message":"indutny: you should not be emitting 'readable;' yourself","date":"2013-02-01T16:21:31.513Z","type":"message"}
{"nick":"indutny","message":"huh?","date":"2013-02-01T16:21:49.799Z","type":"message"}
{"nick":"indutny","message":"how would I ask reader to pull some data","date":"2013-02-01T16:22:02.517Z","type":"message"}
{"nick":"isaacs","message":"read(0)","date":"2013-02-01T16:22:51.181Z","type":"message"}
{"nick":"dap","date":"2013-02-01T16:22:58.233Z","type":"join"}
{"nick":"isaacs","message":"that way, i'tll only pull if it is actually below the stream water marks","date":"2013-02-01T16:23:07.061Z","type":"message"}
{"nick":"isaacs","message":"and it will end up emitting 'readable' if it actually pulls in data","date":"2013-02-01T16:23:23.951Z","type":"message"}
{"nick":"isaacs","message":"so you never have a case where you emit 'readable' but don't actually have data to read.","date":"2013-02-01T16:23:31.911Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2013-02-01T16:24:10.489Z","type":"message"}
{"nick":"indutny","message":"ok, I'll call .read(0) then","date":"2013-02-01T16:24:18.197Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-02-01T16:26:53.678Z","type":"quit"}
{"nick":"indutny","message":"yes, seems to be working","date":"2013-02-01T16:27:15.224Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033bnoordhuis\u000f created branch fix-cares-econnrefused - http://git.io/VRIyFA","date":"2013-02-01T16:38:06.763Z","type":"message"}
{"nick":"bnoordhuis","message":"^ review anyone?","date":"2013-02-01T16:38:14.986Z","type":"message"}
{"nick":"qmx","new_nick":"qmx|lunch","date":"2013-02-01T16:42:12.894Z","type":"nick"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-02-01T16:46:18.137Z","type":"quit"}
{"nick":"isaacs","message":"indutny: your commit history in that branch reminds me of http://www.youtube.com/watch?v=IIEVqFB4WUo","date":"2013-02-01T16:47:03.655Z","type":"message"}
{"nick":"indutny","message":"hahaha","date":"2013-02-01T16:47:49.044Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: it seems ok to me, but is it possible to add a test?","date":"2013-02-01T16:53:30.781Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: even in test-internet?","date":"2013-02-01T16:53:41.031Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: i don't know many servers that reliably return SERVFAIL","date":"2013-02-01T16:54:04.446Z","type":"message"}
{"nick":"isaacs","message":"yeah.","date":"2013-02-01T16:54:13.810Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess i could write a mock server in js...","date":"2013-02-01T16:54:21.257Z","type":"message"}
{"nick":"isaacs","message":"meh","date":"2013-02-01T16:56:00.519Z","type":"message"}
{"nick":"isaacs","message":"does it solve this issue that you're reproducing?  if so, lgtm","date":"2013-02-01T16:56:08.809Z","type":"message"}
{"nick":"bnoordhuis","message":"cool","date":"2013-02-01T16:58:00.837Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u00026aed61f\u0002 : dns, cares: don't filter NOTIMP, REFUSED, SERVFAIL  Report the aforementi - http://git.io/6a6RaA","date":"2013-02-01T16:59:38.954Z","type":"message"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-02-01T17:04:43.376Z","type":"quit"}
{"nick":"sgallagh","date":"2013-02-01T17:05:51.326Z","type":"join"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-02-01T17:06:08.598Z","type":"quit"}
{"nick":"tjfontaine","message":"heh mock dns server in js","date":"2013-02-01T17:10:58.209Z","type":"message"}
{"nick":"bnoordhuis","message":"tjfontaine: one that sends back a fixed SERVFAIL or NOTIMP response","date":"2013-02-01T17:12:47.347Z","type":"message"}
{"nick":"bnoordhuis","message":"i had no intention of implementing all the RFCs :)","date":"2013-02-01T17:12:54.763Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: heh ya, I know, if it's something desired I could do it as well :)","date":"2013-02-01T17:13:14.846Z","type":"message"}
{"nick":"tjfontaine","message":"actually I guess that's really only a few bytes of cached buffer with a bit twiddle here and there","date":"2013-02-01T17:14:32.096Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037streams1\u000f * \u0002f30f063\u0002 : pre-streams2 js - http://git.io/AzYNlA","date":"2013-02-01T17:29:10.665Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: so, i'm seeing very consistent results that v0.8's raw net throughput is faster than master's.","date":"2013-02-01T17:30:37.477Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: https://gist.github.com/4692744","date":"2013-02-01T17:30:40.517Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: then may i suggest you fix that?","date":"2013-02-01T17:31:00.681Z","type":"message"}
{"nick":"isaacs","message":"ah","date":"2013-02-01T17:31:04.787Z","type":"message"}
{"nick":"isaacs","message":"ha","date":"2013-02-01T17:31:06.307Z","type":"message"}
{"nick":"isaacs","message":"yes.","date":"2013-02-01T17:31:08.177Z","type":"message"}
{"nick":"isaacs","message":"how about we roll back libuv and src/ to v0.8 ;)","date":"2013-02-01T17:31:23.287Z","type":"message"}
{"nick":"bnoordhuis","message":"if that would fix it, i'd be okay with it :)","date":"2013-02-01T17:31:49.378Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm not really sure what's happening here","date":"2013-02-01T17:31:57.781Z","type":"message"}
{"nick":"bnoordhuis","message":"i think it's not just one component","date":"2013-02-01T17:32:03.839Z","type":"message"}
{"nick":"bnoordhuis","message":"for one, v8 3.15's gc seems to kick in way too slow","date":"2013-02-01T17:32:37.134Z","type":"message"}
{"nick":"bnoordhuis","message":"which causes weird interactions with libuv and the slab allocator","date":"2013-02-01T17:32:51.751Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess i should take a day and sit down and go over it in microscopic detail","date":"2013-02-01T17:33:08.354Z","type":"message"}
{"nick":"isaacs","message":"hm.  that's a pretty good theory","date":"2013-02-01T17:33:16.605Z","type":"message"}
{"nick":"isaacs","message":"bring back idle notifications?","date":"2013-02-01T17:33:32.825Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, that might help","date":"2013-02-01T17:33:46.645Z","type":"message"}
{"nick":"bnoordhuis","message":"though not in the braindead v0.8 way","date":"2013-02-01T17:33:55.140Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-02-01T17:34:52.794Z","type":"message"}
{"nick":"sgallagh","date":"2013-02-01T17:35:02.362Z","type":"join"}
{"nick":"sblom","date":"2013-02-01T17:38:52.080Z","type":"join"}
{"nick":"pooya","date":"2013-02-01T17:55:03.222Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-02-01T18:00:05.645Z","type":"quit"}
{"nick":"brson","date":"2013-02-01T18:00:52.131Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 264 seconds","date":"2013-02-01T18:08:30.186Z","type":"quit"}
{"nick":"qmx|lunch","new_nick":"qmx","date":"2013-02-01T18:16:33.323Z","type":"nick"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u0002c7c1ed0\u0002 : gitignore: Ignore release tarballs and shasum files - http://git.io/H9TrCg","date":"2013-02-01T18:18:11.557Z","type":"message"}
{"nick":"brson","date":"2013-02-01T18:18:22.074Z","type":"join"}
{"nick":"trevnorris","date":"2013-02-01T18:19:58.970Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: actually, that's a very good theory.  check out http://static.izs.me/flamegraphs/net-raw-nodomain-2013-02-01-17-19-54.svg","date":"2013-02-01T18:20:21.525Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: see that spike on the left?","date":"2013-02-01T18:20:26.324Z","type":"message"}
{"nick":"isaacs","message":"er, right.  (the other left)","date":"2013-02-01T18:20:29.914Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: that's teh slab allocator adjusting the amount of external memory, and then spending a bunch of time in gc","date":"2013-02-01T18:21:40.664Z","type":"message"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-02-01T18:22:01.138Z","type":"quit"}
{"nick":"isaacs","message":"bnoordhuis: the spike on the left is new Buffer doing the same thing","date":"2013-02-01T18:22:20.984Z","type":"message"}
{"nick":"isaacs","message":"it's like the Two Towers from lotr","date":"2013-02-01T18:22:35.453Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: wanna dig into a juicy performance problem?  that's where it's at, i think.","date":"2013-02-01T18:23:46.212Z","type":"message"}
{"nick":"TooTallNate","date":"2013-02-01T18:23:54.458Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: cool. just going to fix up your suggestions on my PR real quick then I'll take a look.","date":"2013-02-01T18:24:38.759Z","type":"message"}
{"nick":"isaacs","message":"hmmm.... except: http://static.izs.me/flamegraphs/net-raw-v08-2013-02-01-18-24-07.svg","date":"2013-02-01T18:24:50.422Z","type":"message"}
{"nick":"isaacs","message":"looks like v0.8 spends MORE of its time in gc","date":"2013-02-01T18:24:56.991Z","type":"message"}
{"nick":"isaacs","message":"so... that's odd.","date":"2013-02-01T18:24:59.761Z","type":"message"}
{"nick":"isaacs","message":"hmm... maybe we need to just move process._makeCallback back to C++","date":"2013-02-01T18:26:28.640Z","type":"message"}
{"nick":"EhevuTov","date":"2013-02-01T18:26:28.957Z","type":"join"}
{"nick":"isaacs","message":"it's odd, but it seems like we're spending quite a bit of time in that js function.","date":"2013-02-01T18:26:46.820Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: what's the small mound on the far right?","date":"2013-02-01T18:27:02.573Z","type":"message"}
{"nick":"trevnorris","message":"there are two bars of \"uv__stream_io\"","date":"2013-02-01T18:27:18.502Z","type":"message"}
{"nick":"trevnorris","message":"where in v0.8 there's only one","date":"2013-02-01T18:27:23.416Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: that's process._makeCallback calling into afterWrite","date":"2013-02-01T18:27:48.689Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: but from there doesn't it have to go through MakeCallback?","date":"2013-02-01T18:28:14.964Z","type":"message"}
{"nick":"trevnorris","message":"(or, mean to get there)","date":"2013-02-01T18:28:30.001Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: wait, small mound in which graph?","date":"2013-02-01T18:28:42.779Z","type":"message"}
{"nick":"trevnorris","message":"net-raw-domain","date":"2013-02-01T18:28:56.273Z","type":"message"}
{"nick":"trevnorris","message":"the two graphs have almost the same curve, except for the mount on the far right.","date":"2013-02-01T18:29:26.101Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yeah","date":"2013-02-01T18:29:30.608Z","type":"message"}
{"nick":"isaacs","message":"if you full-screen it, you should be able to hover and see the function calls","date":"2013-02-01T18:29:39.408Z","type":"message"}
{"nick":"isaacs","message":"(the UI here needs work, but it's a useful tool)","date":"2013-02-01T18:29:47.068Z","type":"message"}
{"nick":"trevnorris","message":"i can see the function calls. goes uv__stream__io -> StreamWrap::AfterWrite -> MakeCallback","date":"2013-02-01T18:30:44.537Z","type":"message"}
{"nick":"trevnorris","message":"in the v0.8 graph that path is on the far left.","date":"2013-02-01T18:31:30.076Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: and it also exists on the far left on the nodomain graph.","date":"2013-02-01T18:32:50.446Z","type":"message"}
{"nick":"isaacs","message":"weird, i can't seem ti find selfPipeAfterWrite in the v0.8 graph","date":"2013-02-01T18:33:45.726Z","type":"message"}
{"nick":"isaacs","message":"view src says it's there :)","date":"2013-02-01T18:33:51.295Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: it's going to be super tiny. two locations, 9 and 14 samples respectively.","date":"2013-02-01T18:34:34.815Z","type":"message"}
{"nick":"isaacs","message":"oh, right","date":"2013-02-01T18:34:43.005Z","type":"message"}
{"nick":"`3rdEden","date":"2013-02-01T18:35:57.482Z","type":"join"}
{"nick":"isaacs","message":"oic, it's the tiny narrow tower in the middle plateau area","date":"2013-02-01T18:36:03.134Z","type":"message"}
{"nick":"isaacs","message":"on the far right of it","date":"2013-02-01T18:36:08.854Z","type":"message"}
{"nick":"isaacs","message":"*fascinating!* so, why does selfPipe take so much more time on master??","date":"2013-02-01T18:36:19.934Z","type":"message"}
{"nick":"isaacs","message":"again, i'm thinking that maybe moving makeCallback to JS was just a bad ide.a","date":"2013-02-01T18:36:49.954Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: i'm confused. it also exists in C-land where other C libs call it.","date":"2013-02-01T18:37:19.660Z","type":"message"}
{"nick":"trevnorris","message":"only MakeCallback calls _makeCallback.","date":"2013-02-01T18:37:29.963Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: the C version just calls the JS version","date":"2013-02-01T18:37:30.833Z","type":"message"}
{"nick":"isaacs","message":"in v0.8, the C version would call your thing","date":"2013-02-01T18:37:38.513Z","type":"message"}
{"nick":"isaacs","message":"but like, setting the appropriate domain was really tricky, and we did it all in c++","date":"2013-02-01T18:37:54.663Z","type":"message"}
{"nick":"isaacs","message":"i have a few patches that remove the bailouts in makecallback","date":"2013-02-01T18:38:11.383Z","type":"message"}
{"nick":"isaacs","message":"lemme see if that changes anything on this tgraph","date":"2013-02-01T18:38:16.533Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: is there a brief description of what MakeCallback/_makeCallback does? (i mean, more than what's obvious)","date":"2013-02-01T18:39:39.103Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: it does:  if (obj.domain._disposed) return; obj.domain.enter(); obj[fn](arg, arg, arg); obj.domain.exit()","date":"2013-02-01T18:40:30.091Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: it's the call from C++ into JS","date":"2013-02-01T18:40:48.331Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: so the point of makecallback is specifically to handle the domain thing?","date":"2013-02-01T18:41:02.846Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yes.  it's to have a single choke-point where all C++ code passes into JS, so that we can set hte domain appropriately","date":"2013-02-01T18:41:31.191Z","type":"message"}
{"nick":"pooya","date":"2013-02-01T18:41:31.560Z","type":"join"}
{"nick":"trevnorris","message":"cool. i'll mull over that while making the benchmark changes. just feels like there's something evading me.","date":"2013-02-01T18:42:35.375Z","type":"message"}
{"nick":"isaacs","message":"pretty much identical.  http://static.izs.me/flamegraphs/net-raw-2013-02-01-16-10-57.svg vs http://static.izs.me/flamegraphs/net-raw-pipe-refactor-2013-02-01-18-42-16.svg","date":"2013-02-01T18:43:23.190Z","type":"message"}
{"nick":"isaacs","message":"hmm.... i've been suspicious of the bindings or libuv or v8 because it's not in lib.  but i wasn't thinking about src/node.js introducing problems.","date":"2013-02-01T18:44:09.699Z","type":"message"}
{"nick":"isaacs","message":"i wonder if we'll see any perf boost by moving process._makeCallback BACK into C++?","date":"2013-02-01T18:44:35.409Z","type":"message"}
{"nick":"trevnorris","message":"i'm still curious. in v0.8 uv__stream_io is only called from ev_invode_pending, but in master it's called from uv__io_poll and uv_run","date":"2013-02-01T18:45:04.461Z","type":"message"}
{"nick":"trevnorris","message":"know why that is?","date":"2013-02-01T18:45:42.669Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: was there not a single \"choke-point\" before adding _makeComplete? (I mean, wouldn't everything needed to have been added to nextTick)","date":"2013-02-01T18:50:06.890Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: that's because ev_invoke_pending doesn't exist any more, since we removed libev :)","date":"2013-02-01T18:52:43.773Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: uv is doing that now","date":"2013-02-01T18:52:48.193Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: well, there was a single choke-point, but it was in C++","date":"2013-02-01T18:52:58.793Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: so the C++ MakeCallback was much more complicated.  It had to look up the global domain, call domain.enter(), etc.","date":"2013-02-01T18:53:15.023Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: moving it to JS let us remove like 50 loc","date":"2013-02-01T18:53:27.493Z","type":"message"}
{"nick":"isaacs","message":"i'm going to try this this afternoon","date":"2013-02-01T18:53:40.323Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: so did methods from MakeCallback previously needed to be added to nextTick? (or did nextTick even exist)","date":"2013-02-01T18:54:17.347Z","type":"message"}
{"nick":"isaacs","message":"i think we need a v0.8.19 release, too, for new npm","date":"2013-02-01T18:54:19.972Z","type":"message"}
{"nick":"isaacs","message":"and libuv bug fixes","date":"2013-02-01T18:54:24.222Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: nextTick has existed for a very very long time :)","date":"2013-02-01T18:54:36.072Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: but no, they just got called.","date":"2013-02-01T18:54:42.242Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: there was no functional difference.  we just moved the logic from C++ to JS","date":"2013-02-01T18:54:52.642Z","type":"message"}
{"nick":"trevnorris","message":"whoa, yeah. that whole thing changed a lot.","date":"2013-02-01T18:56:27.843Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: also, why are all the callbacks in master being run in a try finally?","date":"2013-02-01T18:58:35.220Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: so that if they throw, we know, but don't catch the error","date":"2013-02-01T18:59:02.559Z","type":"message"}
{"nick":"trevnorris","message":"hm. that prevents v8 from optimizing the function.","date":"2013-02-01T18:59:43.023Z","type":"message"}
{"nick":"isaacs","message":"sure.","date":"2013-02-01T19:01:45.547Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: and the errors are already being caught for functions coming from the spinner in Tick()","date":"2013-02-01T19:01:46.263Z","type":"message"}
{"nick":"trevnorris","message":"(if I understand correctly)","date":"2013-02-01T19:01:51.016Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i dont' think it matters.","date":"2013-02-01T19:02:15.317Z","type":"message"}
{"nick":"isaacs","message":"we're spending maybe 1-2% of our time in tickCallback","date":"2013-02-01T19:02:22.347Z","type":"message"}
{"nick":"isaacs","message":"who cares?","date":"2013-02-01T19:02:24.867Z","type":"message"}
{"nick":"isaacs","message":"we dont' do the try/finally think in events.js for that reason, but that's much hotter","date":"2013-02-01T19:03:13.212Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: sorry dude. i'm way confused by the code logic. a function is called from _makeCallback, but then it runs _tickCallback() before returning every time.","date":"2013-02-01T19:04:00.966Z","type":"message"}
{"nick":"trevnorris","message":"which also runs a bunch of functions that had been added by nextTick()","date":"2013-02-01T19:04:17.116Z","type":"message"}
{"nick":"trevnorris","message":"right?","date":"2013-02-01T19:04:18.022Z","type":"message"}
{"nick":"trevnorris","message":"I guess the name makeCallback is confusing me. when I traced the objects coming it, things like obj.oncomplete were being run. so is it more of a _runCallback?","date":"2013-02-01T19:05:48.913Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-02-01T19:07:53.896Z","type":"message"}
{"nick":"isaacs","message":"it runs any functions that were added to nextTick in this current \"tick\"","date":"2013-02-01T19:08:12.083Z","type":"message"}
{"nick":"isaacs","message":"so that nextTick is actually end-of-tick","date":"2013-02-01T19:08:22.523Z","type":"message"}
{"nick":"isaacs","message":"which is what it's sort of used for anyway","date":"2013-02-01T19:08:28.533Z","type":"message"}
{"nick":"isaacs","message":"yes, it's more like runCallback than makeCallback","date":"2013-02-01T19:09:19.540Z","type":"message"}
{"nick":"isaacs","message":"\"make\" in teh sense of \"do\" rather than in the sense of \"create\"","date":"2013-02-01T19:09:32.066Z","type":"message"}
{"nick":"lohkey","date":"2013-02-01T19:09:34.455Z","type":"join"}
{"nick":"trevnorris","message":"ahhh. ok.","date":"2013-02-01T19:09:50.298Z","type":"message"}
{"nick":"trevnorris","message":"and it looked like if a function in the current tick queue errored, then all ticks within the queue for that tick were dropped. right?","date":"2013-02-01T19:09:52.964Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: actually, no, not if it's domain-handled.","date":"2013-02-01T19:10:07.432Z","type":"message"}
{"nick":"isaacs","message":"or on('uncaughtException') handled","date":"2013-02-01T19:10:14.202Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-01T19:10:34.526Z","type":"quit"}
{"nick":"isaacs","message":"i've gotta run.  i'll be back in a few hours.","date":"2013-02-01T19:10:51.272Z","type":"message"}
{"nick":"trevnorris","message":"cool.","date":"2013-02-01T19:10:55.815Z","type":"message"}
{"nick":"isaacs","message":"then moving makeCallback back into C++","date":"2013-02-01T19:11:10.042Z","type":"message"}
{"nick":"isaacs","message":":)","date":"2013-02-01T19:11:11.642Z","type":"message"}
{"nick":"isaacs","message":"just to see what happens, anyway :)","date":"2013-02-01T19:11:17.062Z","type":"message"}
{"nick":"trevnorris","message":"good way to do it","date":"2013-02-01T19:11:27.350Z","type":"message"}
{"nick":"isaacs","message":"if that doesn't fix things, i'll start working through the other major changes in src/node.js","date":"2013-02-01T19:11:30.845Z","type":"message"}
{"nick":"isaacs","action":"&","date":"2013-02-01T19:11:38.991Z","type":"action"}
{"nick":"LOUDBOT","message":"WRT VEHEMENTLY AGREEING WITH QUOTES YOU'VE FORGOTTEN YOU SAID","date":"2013-02-01T19:11:39.515Z","type":"message"}
{"nick":"mikeal","date":"2013-02-01T19:13:23.565Z","type":"join"}
{"nick":"googol","date":"2013-02-01T19:16:40.914Z","type":"join"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-02-01T19:21:12.777Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-02-01T19:40:04.565Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-02-01T19:41:05.488Z","type":"quit"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-02-01T19:43:34.305Z","type":"quit"}
{"nick":"hz","date":"2013-02-01T19:43:40.434Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 245 seconds","date":"2013-02-01T19:50:01.114Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-02-01T19:54:30.606Z","type":"join"}
{"nick":"LOUDBOT","reason":"Ping timeout: 260 seconds","date":"2013-02-01T19:57:20.036Z","type":"quit"}
{"nick":"CAPSLOCKBOT","reason":"Ping timeout: 260 seconds","date":"2013-02-01T19:57:20.168Z","type":"quit"}
{"nick":"mikeal","date":"2013-02-01T20:11:16.558Z","type":"join"}
{"nick":"LOUDBOT","date":"2013-02-01T20:16:50.518Z","type":"join"}
{"nick":"CAPSLOCKBOT","date":"2013-02-01T20:16:50.519Z","type":"join"}
{"nick":"AvianFlu_","date":"2013-02-01T20:26:55.614Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 255 seconds","date":"2013-02-01T20:29:44.528Z","type":"quit"}
{"nick":"googol","reason":"Ping timeout: 248 seconds","date":"2013-02-01T20:30:12.738Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-02-01T20:40:49.857Z","type":"join"}
{"nick":"paddybyers","reason":"Ping timeout: 255 seconds","date":"2013-02-01T20:46:17.604Z","type":"quit"}
{"nick":"tdb2","reason":"Read error: Connection reset by peer","date":"2013-02-01T20:46:33.241Z","type":"quit"}
{"nick":"hij1nx","message":"isaacs: how would you feel about two additional functions on the url module that would parse the subdomain and domain from the host (something like this: https://gist.github.com/4692867#file-domain-parser-test-js ) ","date":"2013-02-01T20:53:24.055Z","type":"message"}
{"nick":"bnoordhuis","message":"god no","date":"2013-02-01T20:57:12.151Z","type":"message"}
{"nick":"trevnorris","message":"hij1nx: why that approach? all urls follow the same string sequence. and new tlds are always being added.","date":"2013-02-01T20:59:58.014Z","type":"message"}
{"nick":"hij1nx","message":"trevnorris: how often are they added? i wasnt sure, i just started looking at this issue","date":"2013-02-01T21:02:50.124Z","type":"message"}
{"nick":"hij1nx","message":"bnoordhuis: oh. this is really bad?","date":"2013-02-01T21:03:05.567Z","type":"message"}
{"nick":"bnoordhuis","message":"hij1nx: not bad as in bad but bad as in unnecessary","date":"2013-02-01T21:03:43.243Z","type":"message"}
{"nick":"bnoordhuis","message":"it's the kind of thing that's perfect for a module","date":"2013-02-01T21:03:56.457Z","type":"message"}
{"nick":"hij1nx","message":"well, does anyone know how you can get the domain+tld out of a host without the subdomain?","date":"2013-02-01T21:04:20.011Z","type":"message"}
{"nick":"trevnorris","message":"hij1nx: one sec.","date":"2013-02-01T21:04:50.528Z","type":"message"}
{"nick":"hij1nx","message":"trevnorris: it needs to not include the subdomain and must support short domains (such as bit.ly)","date":"2013-02-01T21:05:46.267Z","type":"message"}
{"nick":"trevnorris","message":"hij1nx: yeah. domain names follow a standard, and can be grabbed by a single regex.","date":"2013-02-01T21:06:23.050Z","type":"message"}
{"nick":"hij1nx","message":"trevnorris: yes, they follow a standard, but i've not seen a regex than can do it properly.","date":"2013-02-01T21:06:53.252Z","type":"message"}
{"nick":"trevnorris","message":"just give me a min.","date":"2013-02-01T21:07:06.218Z","type":"message"}
{"nick":"hij1nx","message":"trevnorris: ok :) for instance, i wrote this intitally `/^(.*?)(\\.([a-z\\.]{2,6}))$/`, as it turns out, this common problem is not as simple as it thought it would be.","date":"2013-02-01T21:08:06.850Z","type":"message"}
{"nick":"trevnorris","message":"hij1nx: try this out: `url.match(/^(\\w+:\\/\\/)?([\\w.]+)/)[2].split('.').splice(-2).join('.')`","date":"2013-02-01T21:14:49.773Z","type":"message"}
{"nick":"trevnorris","message":"one  sec.","date":"2013-02-01T21:15:37.597Z","type":"message"}
{"nick":"trevnorris","message":"hij1nx: ok, this works: `url.match(/^(\\w+:\\/\\/)?([\\w-.]+)/)[2].split('.').splice(-2).join('.')`","date":"2013-02-01T21:16:29.965Z","type":"message"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-02-01T21:17:28.572Z","type":"quit"}
{"nick":"hij1nx","message":"trevnorris: it gets the tld, but thats all, thats not hard to do.","date":"2013-02-01T21:17:50.047Z","type":"message"}
{"nick":"hij1nx","message":"trevnorris: it needs to get the domainname+tld (without subdomain)","date":"2013-02-01T21:18:11.203Z","type":"message"}
{"nick":"trevnorris","message":"hij1nx: hm? what's the url you're using?","date":"2013-02-01T21:18:16.356Z","type":"message"}
{"nick":"hij1nx","message":"trevnorris: we should also move this conversation out of libuv","date":"2013-02-01T21:18:32.161Z","type":"message"}
{"nick":"hij1nx","message":"trevnorris: check my pm","date":"2013-02-01T21:18:42.380Z","type":"message"}
{"nick":"indutny","message":"looks like I'm going to listen Prodigy today","date":"2013-02-01T21:19:31.168Z","type":"message"}
{"nick":"paddybyers","date":"2013-02-01T21:30:04.472Z","type":"join"}
{"nick":"rendar","date":"2013-02-01T21:33:07.870Z","type":"quit"}
{"nick":"brson","date":"2013-02-01T21:39:51.516Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-02-01T21:43:59.151Z","type":"quit"}
{"nick":"stagas","message":"bnoordhuis: is it a rule that core utils are supposed to be only stuff that core uses internally? otherwise I expect the 'url' lib to have every possible utility to work with urls like that","date":"2013-02-01T21:44:07.068Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033bnoordhuis\u000f created branch fedor-indutny-review-this - http://git.io/ywt72w","date":"2013-02-01T21:44:31.259Z","type":"message"}
{"nick":"jmar777","date":"2013-02-01T21:44:34.999Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: ^","date":"2013-02-01T21:44:40.652Z","type":"message"}
{"nick":"bnoordhuis","message":"stagas: we have the objective and scientific rule of 'no unnecessary fluff'","date":"2013-02-01T21:45:06.488Z","type":"message"}
{"nick":"bnoordhuis","message":"the thing with domain parsing is that you'll never be able to please everyone","date":"2013-02-01T21:45:39.413Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: for the love of. thank you. my benchmarks always choked there.","date":"2013-02-01T21:45:40.299Z","type":"message"}
{"nick":"bnoordhuis","message":"hence it's better to keep it out of the core","date":"2013-02-01T21:45:50.303Z","type":"message"}
{"nick":"stagas","message":"bnoordhuis: so the tld/domain/subdomain splitting is fluff? it's standardized and not trivial to get it right","date":"2013-02-01T21:45:52.151Z","type":"message"}
{"nick":"trevnorris","message":"stagas: throw this in if you want it: https://gist.github.com/0b341dbd844d50282728","date":"2013-02-01T21:46:21.662Z","type":"message"}
{"nick":"bnoordhuis","message":"stagas: how standardized is standardized?","date":"2013-02-01T21:46:34.822Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 276 seconds","date":"2013-02-01T21:47:00.383Z","type":"quit"}
{"nick":"bnoordhuis","message":"for example, the nl tld is a valid domain insofar that you can send email to it","date":"2013-02-01T21:47:02.196Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: lgtm","date":"2013-02-01T21:47:03.647Z","type":"message"}
{"nick":"bnoordhuis","message":"(i know the guy who receives that mail)","date":"2013-02-01T21:47:10.907Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: thanks","date":"2013-02-01T21:47:21.992Z","type":"message"}
{"nick":"bnoordhuis","message":"stagas: another issue is that, to quote a python maintainer, core is where modules go to die","date":"2013-02-01T21:48:27.872Z","type":"message"}
{"nick":"bnoordhuis","message":"once it's in core, it's almost impossible to change without breaking everyone's code","date":"2013-02-01T21:48:41.734Z","type":"message"}
{"nick":"jmar777","reason":"Ping timeout: 245 seconds","date":"2013-02-01T21:48:46.818Z","type":"quit"}
{"nick":"bnoordhuis","message":"so make a module of it, put it on npm and ask me again in five years time :)","date":"2013-02-01T21:49:11.331Z","type":"message"}
{"nick":"bnoordhuis","message":"github is so slow today...","date":"2013-02-01T21:49:38.123Z","type":"message"}
{"nick":"trevnorris","message":"stagas: am I missing something? require('url').parse('http://my.freaking.url.co.uk/hi?foo=bar#line1')","date":"2013-02-01T21:50:25.040Z","type":"message"}
{"nick":"trevnorris","message":"hij1nx: ^","date":"2013-02-01T21:50:32.009Z","type":"message"}
{"nick":"trevnorris","message":"oooh. it doesn't show the domain name... got it","date":"2013-02-01T21:50:58.998Z","type":"message"}
{"nick":"brson","date":"2013-02-01T21:51:22.233Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-01T21:53:27.879Z","type":"quit"}
{"nick":"c4milo","date":"2013-02-01T21:53:53.295Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: \"use hex here ;)\" <- is that your russian sense of humor again or ?","date":"2013-02-01T21:53:56.031Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: wouldn't that be helpful on Buffer.prototype.inspect?","date":"2013-02-01T21:54:07.818Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: well, I really I think it would be better to use 0xf","date":"2013-02-01T21:54:11.697Z","type":"message"}
{"nick":"indutny","message":"not jokes","date":"2013-02-01T21:54:20.529Z","type":"message"}
{"nick":"indutny","message":"it's just odd for me when someone does `&` with number which is not 1,2,4,8","date":"2013-02-01T21:54:40.924Z","type":"message"}
{"nick":"bnoordhuis","message":"ah, is that what you mean. len('15') < len('0xf')","date":"2013-02-01T21:54:42.229Z","type":"message"}
{"nick":"indutny","message":"and it's decimal","date":"2013-02-01T21:54:45.155Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: nope, see my point ^","date":"2013-02-01T21:54:59.253Z","type":"message"}
{"nick":"indutny","message":"it's just convention","date":"2013-02-01T21:55:14.751Z","type":"message"}
{"nick":"indutny","message":"for me","date":"2013-02-01T21:55:16.243Z","type":"message"}
{"nick":"bnoordhuis","message":"you'll get used to it","date":"2013-02-01T21:55:43.986Z","type":"message"}
{"nick":"bnoordhuis","message":"give it another ten years, fedor","date":"2013-02-01T21:55:47.764Z","type":"message"}
{"nick":"indutny","message":"em?","date":"2013-02-01T21:56:01.525Z","type":"message"}
{"nick":"indutny","message":"ok, its not that important","date":"2013-02-01T21:56:08.915Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: mwah, maybe. that function isn't called often","date":"2013-02-01T21:56:19.420Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll wait for the bug reports to come in","date":"2013-02-01T21:56:24.524Z","type":"message"}
{"nick":"trevnorris","message":"heh, ok.","date":"2013-02-01T21:56:28.295Z","type":"message"}
{"nick":"bnoordhuis","message":"hexWrite otoh should probably be optimized too","date":"2013-02-01T21:56:47.955Z","type":"message"}
{"nick":"trevnorris","message":"now, can someone tell me wtf I can't see that in my code tree? i want to run my benchmark against it","date":"2013-02-01T21:56:58.791Z","type":"message"}
{"nick":"trevnorris","message":"seriously, I had to one off that test because it was so freaking slow","date":"2013-02-01T21:57:10.929Z","type":"message"}
{"nick":"bnoordhuis","message":"can't see what?","date":"2013-02-01T21:57:11.857Z","type":"message"}
{"nick":"trevnorris","message":"that commit","date":"2013-02-01T21:57:19.284Z","type":"message"}
{"nick":"bnoordhuis","message":"git pull --rebase?","date":"2013-02-01T21:57:31.150Z","type":"message"}
{"nick":"bnoordhuis","message":"then git push your-fork","date":"2013-02-01T21:57:52.197Z","type":"message"}
{"nick":"bnoordhuis","message":"or do you mean something else?","date":"2013-02-01T21:58:03.023Z","type":"message"}
{"nick":"felixge","reason":"Quit: felixge","date":"2013-02-01T21:58:23.177Z","type":"quit"}
{"nick":"trevnorris","message":"bnoordhuis: I have a clone of node, along with my fork, and just did a `git pull; git checkout d1eb9a773` and gives me an error","date":"2013-02-01T21:58:53.716Z","type":"message"}
{"nick":"c4milo","reason":"Ping timeout: 264 seconds","date":"2013-02-01T21:58:54.180Z","type":"quit"}
{"nick":"bnoordhuis","message":"indutny: i mean that in another ten years you'll know the bit patterns of the numbers in the range 0-255 by heart","date":"2013-02-01T21:59:29.574Z","type":"message"}
{"nick":"trevnorris","message":"oh. mother freaking github. it was showing your commit as if it existed on joyent/node","date":"2013-02-01T21:59:30.825Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: well, I think I already know them","date":"2013-02-01T21:59:43.322Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: its just odd for me to do binary operation with decimal numbers","date":"2013-02-01T21:59:59.069Z","type":"message"}
{"nick":"bnoordhuis","message":"and by 'know' i mean 'drilled into your dna', 'subconscious'","date":"2013-02-01T22:00:01.241Z","type":"message"}
{"nick":"indutny","message":"meh","date":"2013-02-01T22:00:09.152Z","type":"message"}
{"nick":"indutny","message":"you don't see my point","date":"2013-02-01T22:00:12.288Z","type":"message"}
{"nick":"bnoordhuis","message":"i do","date":"2013-02-01T22:00:32.308Z","type":"message"}
{"nick":"bnoordhuis","message":"eight years ago i probably would've said the same thing","date":"2013-02-01T22:00:41.530Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: oh, that's right - i pushed it to a branch at joyent/node","date":"2013-02-01T22:01:09.166Z","type":"message"}
{"nick":"trevnorris","message":"really? which one?","date":"2013-02-01T22:01:19.929Z","type":"message"}
{"nick":"indutny","message":"you're so old","date":"2013-02-01T22:01:22.238Z","type":"message"}
{"nick":"indutny","message":"and stubborn :)","date":"2013-02-01T22:01:24.517Z","type":"message"}
{"nick":"bnoordhuis","message":"both are true unfortunately","date":"2013-02-01T22:01:32.751Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: one that i've deleted again :)","date":"2013-02-01T22:01:47.315Z","type":"message"}
{"nick":"bnoordhuis","message":"it's in master now","date":"2013-02-01T22:01:56.021Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: lol. well thanks for cleaning up after yourself. ;-)","date":"2013-02-01T22:02:03.260Z","type":"message"}
{"nick":"indutny","message":"ok, film time","date":"2013-02-01T22:02:57.578Z","type":"message"}
{"nick":"indutny","message":"ttyl","date":"2013-02-01T22:02:58.528Z","type":"message"}
{"nick":"indutny","message":"isaacs: so you don't have any comments except .read(0) ? :)","date":"2013-02-01T22:03:13.923Z","type":"message"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-02-01T22:04:06.303Z","type":"quit"}
{"nick":"trevnorris","message":"bnoordhuis: so you pushed d1eb9a7 to github? hm, must be taking a while to update...","date":"2013-02-01T22:06:15.873Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: yeah, github's painfully slow today","date":"2013-02-01T22:06:34.397Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, guess my push timed out :/","date":"2013-02-01T22:06:50.803Z","type":"message"}
{"nick":"trevnorris","message":"heh, yeah. that' bad.","date":"2013-02-01T22:07:07.907Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u00023f65916\u0002 : buffer: optimize Buffer.prototype.toString('hex')  Move the implementatio - http://git.io/2oCkMQ","date":"2013-02-01T22:07:33.633Z","type":"message"}
{"nick":"bnoordhuis","message":"huzzah!","date":"2013-02-01T22:07:38.898Z","type":"message"}
{"nick":"indutny","message":"great","date":"2013-02-01T22:08:53.680Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: awesomeness. 31x's faster!","date":"2013-02-01T22:10:06.599Z","type":"message"}
{"nick":"sblom","reason":"Ping timeout: 240 seconds","date":"2013-02-01T22:11:06.771Z","type":"quit"}
{"nick":"isaacs","message":"indutny: i haven't looked at it closely enough","date":"2013-02-01T22:13:29.590Z","type":"message"}
{"nick":"isaacs","message":"indutny: been studying benchmarks and flamegraphs all day","date":"2013-02-01T22:13:42.609Z","type":"message"}
{"nick":"isaacs","message":"hij1nx, stagas, trevnorris: bnoordhuis speaks my mind here.  our url parser is finished.","date":"2013-02-01T22:15:09.938Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: good work on hex optimization","date":"2013-02-01T22:16:00.308Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: very nice.","date":"2013-02-01T22:16:05.418Z","type":"message"}
{"nick":"bnoordhuis","message":"isn't it? :)","date":"2013-02-01T22:16:11.049Z","type":"message"}
{"nick":"AvianFlu_","reason":"Remote host closed the connection","date":"2013-02-01T22:17:41.932Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: dang you. have to make a couple small requests in the PR which sends me back and helps me realize the api could be really improved. ;-)","date":"2013-02-01T22:23:32.070Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: that's my job :)","date":"2013-02-01T22:23:50.381Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i was thinking, we should also have a node::MakeCallback benchmark","date":"2013-02-01T22:24:08.091Z","type":"message"}
{"nick":"isaacs","message":"like, a binary addon that just calls noode::MakeCallback a zillion times","date":"2013-02-01T22:24:33.651Z","type":"message"}
{"nick":"trevnorris","message":"totally. was thinking it would be helpful to have a cc side to the benchmarks, but didn't want to go there yet. =)","date":"2013-02-01T22:25:00.536Z","type":"message"}
{"nick":"isaacs","message":"sure","date":"2013-02-01T22:25:07.971Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: the most important considerations with this, even slightly more than having benchmarks that are trustworth, is having benchmarks that can be consistently read, and are easy to add to.","date":"2013-02-01T22:25:34.821Z","type":"message"}
{"nick":"isaacs","message":"it should be a trivial task to add a new benchmark ot the list","date":"2013-02-01T22:25:46.910Z","type":"message"}
{"nick":"isaacs","message":"i mean, look at ab.  it's total shit.  doesn't even work reliably on os x","date":"2013-02-01T22:26:01.030Z","type":"message"}
{"nick":"isaacs","message":"but everyone uses it, because it's super easy, and just spits out easy-to-parse data","date":"2013-02-01T22:26:15.970Z","type":"message"}
{"nick":"isaacs","message":"it also comes with apache, which is on every system.  so there's that.","date":"2013-02-01T22:26:42.170Z","type":"message"}
{"nick":"trevnorris","message":"sounds good to me. also like the io.cc test bnoordhuis wrote up. really helpful to set the upper limit of what we can do.","date":"2013-02-01T22:28:29.072Z","type":"message"}
{"nick":"jmar777","date":"2013-02-01T22:28:55.587Z","type":"join"}
{"nick":"isaacs","message":"yeah","date":"2013-02-01T22:29:09.688Z","type":"message"}
{"nick":"isaacs","message":"i'm 5-why-ing preemptively if it turns out that process._makeCallback is the source of our regressions","date":"2013-02-01T22:29:39.478Z","type":"message"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-02-01T22:30:13.097Z","type":"nick"}
{"nick":"trevnorris","message":"isaacs: i'll be surprised if it does too much. I stripped out as much as I could (e.g. domains) and didn't do too much.","date":"2013-02-01T22:30:55.790Z","type":"message"}
{"nick":"indutny","message":"isaacs: haha, I thought about that before","date":"2013-02-01T22:34:21.793Z","type":"message"}
{"nick":"indutny","message":"isaacs: actually it is","date":"2013-02-01T22:34:26.345Z","type":"message"}
{"nick":"indutny","message":"but not that much","date":"2013-02-01T22:34:29.133Z","type":"message"}
{"nick":"indutny","message":"so like, I was replacing MakeCallback code with the code from v0.8 branch","date":"2013-02-01T22:34:39.438Z","type":"message"}
{"nick":"indutny","message":"benchmarks are 3-5% better as far as I can remember","date":"2013-02-01T22:34:50.652Z","type":"message"}
{"nick":"isaacs","message":"well, that's more than enough reason to do it","date":"2013-02-01T22:37:07.883Z","type":"message"}
{"nick":"c4milo","date":"2013-02-01T22:37:29.473Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: is it just the _makeCallback that will change? or will a bunch of changes to, say, _tickCallback also be made?","date":"2013-02-01T22:39:32.674Z","type":"message"}
{"nick":"bnoordhuis","message":"anyone mind if i kill off Buffer._charsWritten before v0.10?","date":"2013-02-01T22:41:50.670Z","type":"message"}
{"nick":"bnoordhuis","message":"i think koichi and i agreed to take it out before v0.8 but i forgot back then :/","date":"2013-02-01T22:42:16.312Z","type":"message"}
{"nick":"trevnorris","message":"we can do that? there were some optimizations I noticed, but couldn't because that was in the way.","date":"2013-02-01T22:42:18.960Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-01T22:42:31.217Z","type":"quit"}
{"nick":"bnoordhuis","message":"isaacs, indutny: ^","date":"2013-02-01T22:43:45.515Z","type":"message"}
{"nick":"c4milo","date":"2013-02-01T22:44:30.560Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: I don't mind","date":"2013-02-01T22:47:34.367Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: go for it.","date":"2013-02-01T22:52:26.343Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: it's a _property anyway","date":"2013-02-01T22:52:30.293Z","type":"message"}
{"nick":"isaacs","message":"it's in our own house.  we can do whatever we want with it.","date":"2013-02-01T22:52:41.583Z","type":"message"}
{"nick":"isaacs","message":":)","date":"2013-02-01T22:52:44.453Z","type":"message"}
{"nick":"bnoordhuis","message":":)","date":"2013-02-01T22:52:48.355Z","type":"message"}
{"nick":"isaacs","message":"it's a shame about git revert being so stupid.","date":"2013-02-01T22:53:16.175Z","type":"message"}
{"nick":"isaacs","message":"it tries.  bless its little heart.","date":"2013-02-01T22:53:27.178Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: heh, which commit you trying to revert?","date":"2013-02-01T22:55:53.855Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-02-01T22:57:45.954Z","type":"quit"}
{"nick":"googol","date":"2013-02-01T23:06:05.362Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: one from about 7 months ago when we moved MakeCallback to JS","date":"2013-02-01T23:10:58.525Z","type":"message"}
{"nick":"roxlu","message":"hi guys I wanted to give uv_threads a try, and I'm experiencing some wierd behavior when I stop/uv_join my thread. I get a segfault. It looks like the thread is destroyed before I can return from the thread function","date":"2013-02-01T23:14:14.812Z","type":"message"}
{"nick":"roxlu","message":"I'm usinng this code: https://gist.github.com/62e8a92beff6845eed92 ","date":"2013-02-01T23:14:28.380Z","type":"message"}
{"nick":"roxlu","message":"line 35 isn't executed","date":"2013-02-01T23:15:04.494Z","type":"message"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-02-01T23:17:22.756Z","type":"quit"}
{"nick":"hz","date":"2013-02-01T23:17:26.441Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-02-01T23:20:52.288Z","type":"quit"}
{"nick":"jmar777","date":"2013-02-01T23:21:29.296Z","type":"join"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-02-01T23:21:42.673Z","type":"quit"}
{"nick":"jmar777","date":"2013-02-01T23:22:29.585Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: well... have fun with that. got it to build, but the tests just hang.","date":"2013-02-01T23:23:05.935Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yeah, you have to then go through and re-make all the node.js changes to node.cc","date":"2013-02-01T23:23:55.146Z","type":"message"}
{"nick":"isaacs","message":"like, that was the POINT of moving it to JS, so that those other changes would be easier :)","date":"2013-02-01T23:24:06.176Z","type":"message"}
{"nick":"isaacs","message":"i can't very well expect git-revert to also rewrite the JS changes in C++","date":"2013-02-01T23:24:25.326Z","type":"message"}
{"nick":"trevnorris","message":"seriously. did you use a merge strategy in your revert?","date":"2013-02-01T23:24:39.481Z","type":"message"}
{"nick":"isaacs","message":"got tests passing","date":"2013-02-01T23:24:40.025Z","type":"message"}
{"nick":"isaacs","message":"well, i reverted the commit, then mung-until-good","date":"2013-02-01T23:24:53.765Z","type":"message"}
{"nick":"isaacs","message":"it helps to be somewhat familiar with the code :)","date":"2013-02-01T23:25:06.865Z","type":"message"}
{"nick":"trevnorris","message":"seriously. I basically did `git revert -X theirs 0109a9f9` and called it good. too bad the tests didn't. :)","date":"2013-02-01T23:25:48.373Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: imho, I think the js side could be faster than the cc side. it just needs a lot more love.","date":"2013-02-01T23:27:42.152Z","type":"message"}
{"nick":"trevnorris","message":"a big problem I saw was that the function was deopted enough that v8 just flagged it to never be optimized again.","date":"2013-02-01T23:28:49.592Z","type":"message"}
{"nick":"isaacs","message":"ok, time for benchmarking :)","date":"2013-02-01T23:29:38.872Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: you can pull my make-callback-in-js-revert branch if you're interested","date":"2013-02-01T23:29:51.312Z","type":"message"}
{"nick":"trevnorris","message":"thanks. i'll take a look when these benchmark api changes are done.","date":"2013-02-01T23:30:15.263Z","type":"message"}
{"nick":"isaacs","message":"sure","date":"2013-02-01T23:30:46.441Z","type":"message"}
{"nick":"isaacs","message":"k, well, that was pointless :)","date":"2013-02-01T23:34:31.059Z","type":"message"}
{"nick":"isaacs","message":"not pointless, i guess","date":"2013-02-01T23:36:42.048Z","type":"message"}
{"nick":"isaacs","message":"a little bit better.","date":"2013-02-01T23:36:44.398Z","type":"message"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-02-01T23:36:44.779Z","type":"quit"}
{"nick":"hz","date":"2013-02-01T23:36:49.428Z","type":"join"}
{"nick":"isaacs","message":"but there's still this huge bunch of time spent in StreamWrap::AfterWrite","date":"2013-02-01T23:36:56.088Z","type":"message"}
{"nick":"isaacs","message":"oh... wait a second.  the only diff is that in master, it's splitting it into two stacks, because one shows up on node`uv__io_poll","date":"2013-02-01T23:38:06.117Z","type":"message"}
{"nick":"isaacs","message":"and the other is not.","date":"2013-02-01T23:38:09.127Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-02-01T23:51:02.814Z","type":"quit"}
{"nick":"jmar777","date":"2013-02-01T23:51:39.290Z","type":"join"}
{"nick":"isaacs","message":"yeah, likeliest suspect at this point is gc","date":"2013-02-01T23:52:04.546Z","type":"message"}
{"nick":"isaacs","message":"we're spending a lot of time marking and sweeping","date":"2013-02-01T23:52:12.436Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033bnoordhuis\u000f created branch optimize-buffer-write - http://git.io/tCWO_A","date":"2013-02-01T23:53:49.713Z","type":"message"}
{"nick":"paddybyers","reason":"Ping timeout: 245 seconds","date":"2013-02-01T23:53:53.426Z","type":"quit"}
{"nick":"bnoordhuis","message":"^ review anyone?","date":"2013-02-01T23:53:54.583Z","type":"message"}
{"nick":"trevnorris","message":"sec","date":"2013-02-01T23:55:13.005Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i'll look at yours if you look at mine: https://github.com/joyent/node/pull/4705","date":"2013-02-01T23:55:38.344Z","type":"message"}
{"nick":"bnoordhuis","message":"iew","date":"2013-02-01T23:55:45.211Z","type":"message"}
{"nick":"bnoordhuis","message":"but okay, if that's what it takes","date":"2013-02-01T23:55:53.587Z","type":"message"}
{"nick":"jmar777","reason":"Ping timeout: 264 seconds","date":"2013-02-01T23:56:30.119Z","type":"quit"}
{"nick":"bnoordhuis","message":"a hearty lgtm from me","date":"2013-02-01T23:56:40.329Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: kewl.","date":"2013-02-01T23:57:34.332Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: hex2bin should not allow any chars > f","date":"2013-02-01T23:57:43.742Z","type":"message"}
{"nick":"bnoordhuis","message":"it doesn't","date":"2013-02-01T23:57:57.830Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: other than that, lgtm, as long as the tests pass.","date":"2013-02-01T23:57:58.992Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: if (c >= 'A' && c <= 'Z') return 10 + (c - 'A');","date":"2013-02-01T23:58:13.812Z","type":"message"}
{"nick":"bnoordhuis","message":"oh","date":"2013-02-01T23:58:20.474Z","type":"message"}
{"nick":"bnoordhuis","message":"ah","date":"2013-02-01T23:58:21.781Z","type":"message"}
{"nick":"bnoordhuis","action":"blushes","date":"2013-02-01T23:58:24.813Z","type":"action"}
{"nick":"roxlu","message":"does libuv have util functions to e.g. get the current time in millis ? ","date":"2013-02-01T23:58:26.185Z","type":"message"}
{"nick":"bnoordhuis","message":"roxlu: you mean calendar time?","date":"2013-02-01T23:58:51.922Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u0002916aeba\u0002 : debugger: Make the debugger timeout configurable  If the NODE_DEBUGGER_TI - http://git.io/xMs-sQ","date":"2013-02-01T23:59:05.079Z","type":"message"}
{"nick":"roxlu","message":"yeah or time since the app started, or system time ","date":"2013-02-01T23:59:11.851Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: fyi: this *does* make the test-debugger-repl* tests a bit slower.","date":"2013-02-01T23:59:20.681Z","type":"message"}
{"nick":"roxlu","message":"any increasing timer wil do","date":"2013-02-01T23:59:21.702Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: nice. 11x's faster","date":"2013-02-01T23:59:26.516Z","type":"message"}
{"nick":"bnoordhuis","message":"roxlu: there's uv_hrtime() which is monotonic","date":"2013-02-01T23:59:28.614Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: but it also makes them not fail EVERY @#$@$ING TIME","date":"2013-02-01T23:59:35.531Z","type":"message"}
{"nick":"roxlu","message":"awesome!","date":"2013-02-01T23:59:40.311Z","type":"message"}
