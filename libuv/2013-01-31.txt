{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-01-31T00:00:01.267Z","type":"quit"}
{"nick":"ircretary","date":"2013-01-31T00:00:08.637Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-01-31T00:01:32.621Z","type":"quit"}
{"nick":"loladiro","date":"2013-01-31T00:15:02.060Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: i'll be able to get ReadableStream back up to par.","date":"2013-01-31T00:19:06.078Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-01-31T00:19:24.368Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 240 seconds","date":"2013-01-31T00:19:39.959Z","type":"quit"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-01-31T00:30:16.881Z","type":"nick"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-31T00:31:45.137Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-31T00:45:09.122Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-01-31T01:03:29.527Z","type":"join"}
{"nick":"c4milo","date":"2013-01-31T01:17:45.460Z","type":"join"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-01-31T01:22:26.121Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-31T01:37:30.538Z","type":"quit"}
{"nick":"c4milo","date":"2013-01-31T01:38:19.061Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-31T01:40:06.425Z","type":"quit"}
{"nick":"abraxas","date":"2013-01-31T01:43:21.038Z","type":"join"}
{"nick":"sblom","reason":"Ping timeout: 276 seconds","date":"2013-01-31T01:50:26.973Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-01-31T02:03:40.526Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-01-31T02:03:41.933Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-31T02:05:04.247Z","type":"quit"}
{"nick":"googol","date":"2013-01-31T02:08:53.966Z","type":"join"}
{"nick":"lohkey","reason":"Ping timeout: 244 seconds","date":"2013-01-31T02:25:24.168Z","type":"quit"}
{"nick":"aitt","date":"2013-01-31T02:26:04.938Z","type":"join"}
{"nick":"aitt","message":"hi, anyone around?","date":"2013-01-31T02:26:17.076Z","type":"message"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-01-31T02:27:40.076Z","type":"nick"}
{"nick":"pooya","date":"2013-01-31T02:32:42.295Z","type":"join"}
{"nick":"karupanerura","reason":"Ping timeout: 276 seconds","date":"2013-01-31T02:33:26.410Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-01-31T02:37:30.803Z","type":"join"}
{"nick":"karupanerura","date":"2013-01-31T02:39:28.936Z","type":"join"}
{"nick":"sgallagh","date":"2013-01-31T02:49:44.317Z","type":"join"}
{"nick":"sgallagh","reason":"Client Quit","date":"2013-01-31T02:54:13.186Z","type":"quit"}
{"nick":"sgallagh","date":"2013-01-31T02:56:02.844Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-31T02:58:44.437Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-31T03:01:51.882Z","type":"join"}
{"nick":"wolfeidau","date":"2013-01-31T03:03:26.321Z","type":"join"}
{"nick":"sgallagh","reason":"Ping timeout: 256 seconds","date":"2013-01-31T03:07:08.799Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-01-31T03:14:05.138Z","type":"quit"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-01-31T03:15:15.895Z","type":"quit"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-01-31T03:26:33.692Z","type":"quit"}
{"nick":"txdv","message":"aitt: es","date":"2013-01-31T03:33:39.905Z","type":"message"}
{"nick":"txdv","message":"yes","date":"2013-01-31T03:33:45.524Z","type":"message"}
{"nick":"pooya","date":"2013-01-31T04:04:49.893Z","type":"join"}
{"nick":"pooya","reason":"Client Quit","date":"2013-01-31T04:08:47.107Z","type":"quit"}
{"nick":"aitt","message":"sorry, i forgot about this window, anyway, i was going to ask a lame question and figured it out myself, thanks anyway =)","date":"2013-01-31T04:09:02.473Z","type":"message"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-01-31T04:11:47.443Z","type":"nick"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-31T04:16:49.582Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-01-31T04:27:23.281Z","type":"join"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-01-31T04:28:10.264Z","type":"quit"}
{"nick":"c4milo","date":"2013-01-31T04:38:21.195Z","type":"join"}
{"nick":"wolfeidau","date":"2013-01-31T05:05:01.014Z","type":"join"}
{"nick":"kazupon","date":"2013-01-31T05:05:50.453Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-01-31T05:06:43.426Z","type":"quit"}
{"nick":"kazupon","date":"2013-01-31T05:06:53.553Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-31T05:08:13.199Z","type":"quit"}
{"nick":"brson","date":"2013-01-31T05:09:44.052Z","type":"join"}
{"nick":"aitt","message":"i was wondering, am i doing anything wrong if the only way i can get my program to compile is having the uv.h include before windows.h ?  ","date":"2013-01-31T05:11:51.031Z","type":"message"}
{"nick":"aitt","message":"i see a lot of redefinition errors if i don't do it that way","date":"2013-01-31T05:12:02.729Z","type":"message"}
{"nick":"aitt","message":"i'm using msvc btw","date":"2013-01-31T05:12:10.062Z","type":"message"}
{"nick":"aitt","message":"2010 IIRC","date":"2013-01-31T05:12:13.346Z","type":"message"}
{"nick":"LOUDBOT","message":"WHY ARE YOU DISCRIMINATING AGAINST AARP","date":"2013-01-31T05:12:13.673Z","type":"message"}
{"nick":"stagas_","date":"2013-01-31T05:23:13.024Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 276 seconds","date":"2013-01-31T05:25:45.324Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-01-31T05:25:52.338Z","type":"nick"}
{"nick":"CoverSlide","reason":"Ping timeout: 240 seconds","date":"2013-01-31T05:29:39.588Z","type":"quit"}
{"nick":"CoverSlide","date":"2013-01-31T05:31:26.152Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-31T05:46:32.534Z","type":"quit"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-01-31T05:50:31.984Z","type":"quit"}
{"nick":"pooya","date":"2013-01-31T06:03:26.736Z","type":"join"}
{"nick":"paddybyers","date":"2013-01-31T06:36:23.735Z","type":"join"}
{"nick":"pooya","reason":"Quit: pooya","date":"2013-01-31T07:20:39.961Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-31T07:26:46.315Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-01-31T07:28:33.986Z","type":"quit"}
{"nick":"kazupon","date":"2013-01-31T07:33:45.442Z","type":"join"}
{"nick":"`3rdEden","date":"2013-01-31T07:37:37.091Z","type":"join"}
{"nick":"aitt","reason":"Quit: Page closed","date":"2013-01-31T07:51:30.870Z","type":"quit"}
{"nick":"rendar","date":"2013-01-31T07:52:17.044Z","type":"join"}
{"nick":"brson","reason":"Read error: Connection reset by peer","date":"2013-01-31T07:53:25.958Z","type":"quit"}
{"nick":"EhevuTov","reason":"Remote host closed the connection","date":"2013-01-31T08:20:31.098Z","type":"quit"}
{"nick":"hz","date":"2013-01-31T08:53:11.485Z","type":"join"}
{"nick":"hz","reason":"Client Quit","date":"2013-01-31T08:54:41.823Z","type":"quit"}
{"nick":"hz","date":"2013-01-31T08:56:31.440Z","type":"join"}
{"nick":"paddybyers_","date":"2013-01-31T09:03:06.117Z","type":"join"}
{"nick":"EhevuTov","date":"2013-01-31T09:06:11.200Z","type":"join"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-01-31T09:06:26.938Z","type":"quit"}
{"nick":"paddybyers","reason":"Ping timeout: 248 seconds","date":"2013-01-31T09:06:28.756Z","type":"quit"}
{"nick":"paddybyers_","new_nick":"paddybyers","date":"2013-01-31T09:06:28.880Z","type":"nick"}
{"nick":"hz","date":"2013-01-31T09:06:30.472Z","type":"join"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-01-31T09:09:57.753Z","type":"quit"}
{"nick":"hz","date":"2013-01-31T09:10:01.459Z","type":"join"}
{"nick":"indutny","message":"morning","date":"2013-01-31T09:10:31.768Z","type":"message"}
{"nick":"rendar","message":"hi","date":"2013-01-31T09:10:54.134Z","type":"message"}
{"nick":"indutny","message":"isaacs: yt?","date":"2013-01-31T09:11:15.649Z","type":"message"}
{"nick":"hz","reason":"Read error: Connection reset by peer","date":"2013-01-31T09:11:17.561Z","type":"quit"}
{"nick":"hz","date":"2013-01-31T09:18:52.417Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-01-31T09:23:44.812Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-01-31T09:32:40.276Z","type":"quit"}
{"nick":"rje`mac","reason":"Ping timeout: 245 seconds","date":"2013-01-31T09:34:11.902Z","type":"quit"}
{"nick":"rphillips","reason":"Ping timeout: 260 seconds","date":"2013-01-31T09:35:47.927Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: morning","date":"2013-01-31T09:36:00.358Z","type":"message"}
{"nick":"rphillips","date":"2013-01-31T09:36:21.042Z","type":"join"}
{"nick":"rje`mac","date":"2013-01-31T09:36:39.165Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: morning","date":"2013-01-31T09:38:23.301Z","type":"message"}
{"nick":"indutny","message":"so, I'm seriously thinking about rewriting some parts of tls.js","date":"2013-01-31T09:41:11.496Z","type":"message"}
{"nick":"indutny","message":"especially this big .cycle() thing","date":"2013-01-31T09:41:23.716Z","type":"message"}
{"nick":"indutny","message":"it looks like it isn't needed anymore after streams2 came","date":"2013-01-31T09:41:38.868Z","type":"message"}
{"nick":"indutny","message":"since all interactions are on-demand, and should be done explicitely by either user of encrypted side","date":"2013-01-31T09:41:59.796Z","type":"message"}
{"nick":"indutny","message":"or user of clear side","date":"2013-01-31T09:42:03.349Z","type":"message"}
{"nick":"indutny","message":"s/explicitely/explicitly/","date":"2013-01-31T09:42:18.377Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: what do you think?","date":"2013-01-31T09:42:25.291Z","type":"message"}
{"nick":"bnoordhuis","message":"do i need to have an opinion?","date":"2013-01-31T09:42:59.801Z","type":"message"}
{"nick":"indutny","message":"not sure, but it would be good to hear one","date":"2013-01-31T09:43:14.078Z","type":"message"}
{"nick":"indutny","message":"otherwise its my thoughts only","date":"2013-01-31T09:43:20.725Z","type":"message"}
{"nick":"bnoordhuis","message":"it sounds reasonable","date":"2013-01-31T09:44:14.585Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-01-31T09:45:16.074Z","type":"message"}
{"nick":"indutny","message":"thanks :)","date":"2013-01-31T09:45:17.344Z","type":"message"}
{"nick":"googol","reason":"Ping timeout: 240 seconds","date":"2013-01-31T09:46:39.347Z","type":"quit"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-31T09:49:01.280Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: btw, what are you working on?","date":"2013-01-31T09:54:38.011Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: profiling tooling","date":"2013-01-31T09:56:22.562Z","type":"message"}
{"nick":"bnoordhuis","message":"also some strongloop issues","date":"2013-01-31T09:56:34.141Z","type":"message"}
{"nick":"indutny","message":"understood","date":"2013-01-31T09:58:01.586Z","type":"message"}
{"nick":"hz","date":"2013-01-31T09:59:47.594Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-01-31T10:10:18.274Z","type":"quit"}
{"nick":"bnoordhuis","message":"you know that feeling when you write reasonably complex code and it works on the first try?","date":"2013-01-31T10:45:53.361Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-31T10:46:07.182Z","type":"message"}
{"nick":"indutny","message":"that feeling when you think something is not right here","date":"2013-01-31T10:46:17.397Z","type":"message"}
{"nick":"bnoordhuis","message":"exactly :)","date":"2013-01-31T10:46:24.809Z","type":"message"}
{"nick":"indutny","message":"but I can't see what exactly","date":"2013-01-31T10:46:26.723Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-01-31T10:46:27.995Z","type":"message"}
{"nick":"indutny","message":"As the wise contemporary philosophers the Wu-Tang Clan once said:","date":"2013-01-31T10:50:24.414Z","type":"message"}
{"nick":"indutny","message":"\"Cache Rules Everything Around Me ( C.R.E.A.M ) \"","date":"2013-01-31T10:50:24.547Z","type":"message"}
{"nick":"indutny","message":"Many people believe this is just typical rappers exhibiting the materialistic nature of modern life. However, they were in fact visionaries describing the importance of memory hierarchy utilisation on processor performance.","date":"2013-01-31T10:50:24.675Z","type":"message"}
{"nick":"mraleph","reason":"Read error: Connection reset by peer","date":"2013-01-31T11:24:05.916Z","type":"quit"}
{"nick":"mraleph1","date":"2013-01-31T11:24:11.803Z","type":"join"}
{"nick":"felixge","date":"2013-01-31T11:38:27.294Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2013-01-31T11:38:27.494Z","type":"quit"}
{"nick":"felixge","date":"2013-01-31T11:38:27.624Z","type":"join"}
{"nick":"indutny","message":"shit, streams2 are broken by definition","date":"2013-01-31T11:42:53.683Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-01-31T11:43:04.252Z","type":"message"}
{"nick":"indutny","message":"many things are too complex for 3rd-party developers","date":"2013-01-31T11:43:19.087Z","type":"message"}
{"nick":"mmalecki","message":"indutny: streams2 are too complex IMO","date":"2013-01-31T11:43:32.629Z","type":"message"}
{"nick":"indutny","message":"isaacs: where art thou","date":"2013-01-31T11:43:51.540Z","type":"message"}
{"nick":"indutny","message":"mmalecki: not really","date":"2013-01-31T11:43:57.583Z","type":"message"}
{"nick":"mmalecki","message":"not only for 3rd-party, the implementation is complex","date":"2013-01-31T11:43:58.135Z","type":"message"}
{"nick":"indutny","message":"idea is good","date":"2013-01-31T11:44:06.482Z","type":"message"}
{"nick":"indutny","message":"implementation is not that good","date":"2013-01-31T11:44:09.824Z","type":"message"}
{"nick":"indutny","message":"I think it should be the same as with BSD sockets","date":"2013-01-31T11:44:20.957Z","type":"message"}
{"nick":"indutny","message":"and APIs seems to follow this","date":"2013-01-31T11:44:32.865Z","type":"message"}
{"nick":"indutny","message":"but they don't in details","date":"2013-01-31T11:44:37.124Z","type":"message"}
{"nick":"indutny","message":"so basically, I think both ._read and ._write should be able to return partial data","date":"2013-01-31T11:51:40.528Z","type":"message"}
{"nick":"indutny","message":"return/or write","date":"2013-01-31T11:51:52.753Z","type":"message"}
{"nick":"indutny","message":"otherwise it only complicates things","date":"2013-01-31T11:52:04.606Z","type":"message"}
{"nick":"indutny","message":"for example, right now in ._read method I can't call cb(null, new Buffer(0)) because it'll be treated as EOF","date":"2013-01-31T11:52:29.385Z","type":"message"}
{"nick":"indutny","message":"well, it's the same as read(2)","date":"2013-01-31T11:53:00.319Z","type":"message"}
{"nick":"indutny","message":"hm... I need to think about it","date":"2013-01-31T11:53:08.964Z","type":"message"}
{"nick":"hz","date":"2013-01-31T12:22:44.474Z","type":"join"}
{"nick":"jmar777","date":"2013-01-31T12:46:51.243Z","type":"join"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-01-31T13:00:28.402Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-31T13:01:00.297Z","type":"join"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-01-31T13:07:41.550Z","type":"nick"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-01-31T13:21:02.333Z","type":"quit"}
{"nick":"sgallagh","date":"2013-01-31T13:30:52.022Z","type":"join"}
{"nick":"c4milo","date":"2013-01-31T14:07:22.106Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Ben Noordhuis\u000f \u00037master\u000f * \u00027f3c783\u0002 : unix: don't clobber errno in signal handler - http://git.io/rCROmA","date":"2013-01-31T14:28:35.868Z","type":"message"}
{"nick":"indutny","message":"isaacs: morning?","date":"2013-01-31T14:31:45.723Z","type":"message"}
{"nick":"bradleymeck","date":"2013-01-31T15:09:55.036Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-01-31T15:38:57.453Z","type":"join"}
{"nick":"isaacs","message":"Good morning","date":"2013-01-31T15:40:23.910Z","type":"message"}
{"nick":"isaacs","message":"call in 0:20","date":"2013-01-31T15:40:27.284Z","type":"message"}
{"nick":"isaacs","message":"indutny: what would be the value of calling cb(null, new Buffer(0))?","date":"2013-01-31T15:41:20.354Z","type":"message"}
{"nick":"indutny","message":"isaacs: I'll discuss it soon with you :)","date":"2013-01-31T15:51:57.354Z","type":"message"}
{"nick":"indutny","message":"basically, I've a strong feel that streams2 are not ready for prime time","date":"2013-01-31T15:52:07.662Z","type":"message"}
{"nick":"indutny","message":"isaacs: for example, http is expecting underlying socket to be push-stream","date":"2013-01-31T15:53:09.282Z","type":"message"}
{"nick":"indutny","message":"while, by default, every stream is pull-stream","date":"2013-01-31T15:53:26.246Z","type":"message"}
{"nick":"indutny","message":"and it doesn't play nicely together","date":"2013-01-31T15:53:36.880Z","type":"message"}
{"nick":"indutny","message":"I just can't handle it the way I want in tls.js","date":"2013-01-31T15:53:53.622Z","type":"message"}
{"nick":"indutny","message":"because http requires me to push data, but I want it to pull data","date":"2013-01-31T15:54:12.305Z","type":"message"}
{"nick":"indutny","message":"isaacs: em... yt?","date":"2013-01-31T15:54:34.295Z","type":"message"}
{"nick":"TooTallNate","date":"2013-01-31T16:00:24.252Z","type":"join"}
{"nick":"bnoordhuis","message":"call?","date":"2013-01-31T16:02:09.073Z","type":"message"}
{"nick":"sblom","date":"2013-01-31T16:02:12.952Z","type":"join"}
{"nick":"indutny","message":"call?","date":"2013-01-31T16:02:45.311Z","type":"message"}
{"nick":"TooTallNate","message":" /cc isaacs ","date":"2013-01-31T16:02:57.167Z","type":"message"}
{"nick":"piscisaureus_","message":"all?","date":"2013-01-31T16:05:44.837Z","type":"message"}
{"nick":"piscisaureus_","message":"ISAAAAAAAAAAACS","date":"2013-01-31T16:05:52.347Z","type":"message"}
{"nick":"isaacs","message":"call","date":"2013-01-31T16:05:53.517Z","type":"message"}
{"nick":"isaacs","message":"one sec","date":"2013-01-31T16:05:54.367Z","type":"message"}
{"nick":"isaacs","message":"sorry","date":"2013-01-31T16:05:55.127Z","type":"message"}
{"nick":"bnoordhuis","message":"first time isaacs is late","date":"2013-01-31T16:06:06.950Z","type":"message"}
{"nick":"indutny","message":"ohaha","date":"2013-01-31T16:06:12.804Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-01-31T16:07:17.946Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-01-31T16:10:32.248Z","type":"join"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-01-31T16:12:40.283Z","type":"quit"}
{"nick":"qmx","new_nick":"qmx|lunch","date":"2013-01-31T16:17:41.465Z","type":"nick"}
{"nick":"dap","date":"2013-01-31T16:20:00.833Z","type":"join"}
{"nick":"indutny","message":"isaacs: so returning to our burritas","date":"2013-01-31T16:21:47.398Z","type":"message"}
{"nick":"indutny","message":"isaacs: net.Socket and http should be really streams2","date":"2013-01-31T16:21:59.907Z","type":"message"}
{"nick":"indutny","message":"not just emulation","date":"2013-01-31T16:22:03.231Z","type":"message"}
{"nick":"indutny","message":"well former one looks like 100% compatible","date":"2013-01-31T16:22:20.379Z","type":"message"}
{"nick":"indutny","message":"but http.Connection is a bit problematic","date":"2013-01-31T16:22:28.203Z","type":"message"}
{"nick":"indutny","message":"and the thing is that you might think its used internally and wtf, why anyone needs it","date":"2013-01-31T16:22:47.627Z","type":"message"}
{"nick":"indutny","message":"but I need it for at least three things: tls.js, spdy and tlsnappy:)","date":"2013-01-31T16:22:59.202Z","type":"message"}
{"nick":"indutny","message":"the all heavily rely on how it works","date":"2013-01-31T16:23:08.557Z","type":"message"}
{"nick":"indutny","message":"and before 0.9.x it was pretty stable","date":"2013-01-31T16:23:16.149Z","type":"message"}
{"nick":"indutny","message":"isaacs: yt?","date":"2013-01-31T16:28:50.135Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-01-31T16:28:51.135Z","type":"message"}
{"nick":"piscisaureus_","message":"sblom: hey","date":"2013-01-31T16:29:01.280Z","type":"message"}
{"nick":"piscisaureus_","message":"sblom: ComponentGroupRef Id=\"Product.Generated\" <-- do you know what that does?","date":"2013-01-31T16:29:08.353Z","type":"message"}
{"nick":"TooTallNate","message":"indutny: i'd like to understand the problem as well","date":"2013-01-31T16:32:35.316Z","type":"message"}
{"nick":"TooTallNate","message":"indutny: i *think* i'm still seeing some weirdness with net.Socket and streams2","date":"2013-01-31T16:32:54.428Z","type":"message"}
{"nick":"TooTallNate","message":"but i don't have a definitive test case yet","date":"2013-01-31T16:33:03.242Z","type":"message"}
{"nick":"indutny","message":"TooTallNate: interesting","date":"2013-01-31T16:33:07.839Z","type":"message"}
{"nick":"indutny","message":"the problem is that http module is relying on .ondata property","date":"2013-01-31T16:33:16.266Z","type":"message"}
{"nick":"indutny","message":"which don't really fit streams2 ideology","date":"2013-01-31T16:33:29.042Z","type":"message"}
{"nick":"indutny","message":"because I want my stream to be pulled","date":"2013-01-31T16:33:37.880Z","type":"message"}
{"nick":"indutny","message":"but there're noone to do this","date":"2013-01-31T16:33:43.424Z","type":"message"}
{"nick":"sblom","reason":"Quit: leaving","date":"2013-01-31T16:33:46.708Z","type":"quit"}
{"nick":"TooTallNate","message":"indutny: are you depending on the http \"createConnection\" option?","date":"2013-01-31T16:34:42.260Z","type":"message"}
{"nick":"indutny","message":"no, not really","date":"2013-01-31T16:34:59.373Z","type":"message"}
{"nick":"indutny","message":"I'm porting tls.js CryptoStream on streams2","date":"2013-01-31T16:35:18.584Z","type":"message"}
{"nick":"piscisaureus_","message":"sbom: nvm. However what bugs me is the ungodly mess with components and componentgroups in the wix project","date":"2013-01-31T16:35:25.888Z","type":"message"}
{"nick":"brucem","message":"he left.","date":"2013-01-31T16:35:44.321Z","type":"message"}
{"nick":"AvianFlu","date":"2013-01-31T16:39:49.042Z","type":"join"}
{"nick":"piscisaureus_","message":":-(","date":"2013-01-31T16:48:05.354Z","type":"message"}
{"nick":"piscisaureus_","message":"boo","date":"2013-01-31T16:48:06.683Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: you <3 msoft? :)","date":"2013-01-31T16:48:33.939Z","type":"message"}
{"nick":"isaacs","message":"indutny: hey","date":"2013-01-31T16:53:10.755Z","type":"message"}
{"nick":"indutny","message":"ho","date":"2013-01-31T16:53:18.555Z","type":"message"}
{"nick":"indutny","message":"isaacs: so like I said","date":"2013-01-31T16:53:29.012Z","type":"message"}
{"nick":"indutny","message":"I think we should fix http before 0.10","date":"2013-01-31T16:53:37.631Z","type":"message"}
{"nick":"isaacs","message":"right, so, http should not be flipping connection into a different mode.","date":"2013-01-31T16:53:43.564Z","type":"message"}
{"nick":"isaacs","message":"agreed.","date":"2013-01-31T16:53:45.414Z","type":"message"}
{"nick":"isaacs","message":"let's do it","date":"2013-01-31T16:53:46.464Z","type":"message"}
{"nick":"indutny","message":"haha","date":"2013-01-31T16:53:50.151Z","type":"message"}
{"nick":"isaacs","message":"http should be calling read() like a gentleman","date":"2013-01-31T16:53:53.234Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-31T16:53:56.805Z","type":"message"}
{"nick":"isaacs","message":"indutny: the tricky thing there is the parser.","date":"2013-01-31T16:54:09.384Z","type":"message"}
{"nick":"indutny","message":"if underlying stream doesn't support ondata","date":"2013-01-31T16:54:09.729Z","type":"message"}
{"nick":"indutny","message":"or something like this","date":"2013-01-31T16:54:12.743Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-01-31T16:54:14.604Z","type":"message"}
{"nick":"indutny","message":"surely, parser is pretty tricky","date":"2013-01-31T16:54:35.197Z","type":"message"}
{"nick":"isaacs","message":"but we can have http IncomingMessage streams be something like a transform.","date":"2013-01-31T16:54:35.404Z","type":"message"}
{"nick":"isaacs","message":"that was actually my plan for refactoring http in 0.12","date":"2013-01-31T16:54:44.874Z","type":"message"}
{"nick":"indutny","message":"yes, that's how I imagine it","date":"2013-01-31T16:54:45.162Z","type":"message"}
{"nick":"indutny","message":"nice.","date":"2013-01-31T16:54:58.094Z","type":"message"}
{"nick":"isaacs","message":"so you actually can do socket.pipe(message)","date":"2013-01-31T16:55:04.664Z","type":"message"}
{"nick":"isaacs","message":"then the message's _transform function writes it to the parser, and gets the body bits out","date":"2013-01-31T16:55:18.413Z","type":"message"}
{"nick":"indutny","message":"isaacs: that's how I see tls.js http://twitpic.com/bzr5fx","date":"2013-01-31T16:55:54.084Z","type":"message"}
{"nick":"c4milo_","date":"2013-01-31T16:56:02.285Z","type":"join"}
{"nick":"AvianFlu_","date":"2013-01-31T16:56:31.334Z","type":"join"}
{"nick":"stagas_","date":"2013-01-31T16:56:50.234Z","type":"join"}
{"nick":"indutny","message":"isaacs: and it fits streams2 model pretty well","date":"2013-01-31T16:57:14.009Z","type":"message"}
{"nick":"isaacs","message":"indutny: so on the left is the socket, and on the right is http?","date":"2013-01-31T16:57:15.922Z","type":"message"}
{"nick":"AvianFlu","reason":"Disconnected by services","date":"2013-01-31T16:57:16.054Z","type":"quit"}
{"nick":"AvianFlu_","new_nick":"AvianFlu","date":"2013-01-31T16:57:18.319Z","type":"nick"}
{"nick":"c4milo","reason":"Read error: Connection reset by peer","date":"2013-01-31T16:57:33.174Z","type":"quit"}
{"nick":"stagas","reason":"Read error: Connection reset by peer","date":"2013-01-31T16:57:33.884Z","type":"quit"}
{"nick":"indutny","message":"yes","date":"2013-01-31T16:57:35.895Z","type":"message"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-01-31T16:57:45.229Z","type":"nick"}
{"nick":"indutny","message":"and right now it doesn't work properly","date":"2013-01-31T16:57:49.636Z","type":"message"}
{"nick":"indutny","message":"not just because of http","date":"2013-01-31T16:57:54.793Z","type":"message"}
{"nick":"indutny","message":"I'm still trying to figure out best way of doing it","date":"2013-01-31T16:58:01.550Z","type":"message"}
{"nick":"indutny","message":"also, what should implementor do if it has received ._read() call, but it can't read any data right now","date":"2013-01-31T16:58:22.640Z","type":"message"}
{"nick":"indutny","message":"i.e. it needs some information to come before it.","date":"2013-01-31T16:58:38.022Z","type":"message"}
{"nick":"indutny","message":"I was trying to call cb(null, new Buffer(0)), but this emits EOF","date":"2013-01-31T16:58:55.444Z","type":"message"}
{"nick":"isaacs","message":"indutny: so, you can think of _read as either \"go get some data, and then call this callback\"","date":"2013-01-31T16:58:58.211Z","type":"message"}
{"nick":"isaacs","message":"indutny: or just a signal tat more data is requested.","date":"2013-01-31T16:59:06.581Z","type":"message"}
{"nick":"isaacs","message":"indutny: and then call Stream.push(chunk) when you have it","date":"2013-01-31T16:59:13.201Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-31T16:59:19.379Z","type":"message"}
{"nick":"isaacs","message":"indutny: ie, if _read is called, and you have no data, then just do nothing.","date":"2013-01-31T16:59:20.871Z","type":"message"}
{"nick":"isaacs","message":"indutny: and call Stream.push(chunk) whenever you DO have some data","date":"2013-01-31T16:59:29.741Z","type":"message"}
{"nick":"indutny","message":"so probably I made a right decision by implementing .read in tls.js","date":"2013-01-31T16:59:31.997Z","type":"message"}
{"nick":"isaacs","message":"you should implement _read, not read","date":"2013-01-31T16:59:47.563Z","type":"message"}
{"nick":"indutny","message":"isaacs: well, with CryptoStream I will not know when to call .push()","date":"2013-01-31T16:59:54.429Z","type":"message"}
{"nick":"indutny","message":"because I want someone to pull data from me","date":"2013-01-31T17:00:00.658Z","type":"message"}
{"nick":"indutny","message":"at least, in my implementation","date":"2013-01-31T17:00:08.997Z","type":"message"}
{"nick":"indutny","message":"thus, I can emit 'readable' and expect someone to try reading from me","date":"2013-01-31T17:00:22.160Z","type":"message"}
{"nick":"indutny","message":"even if I've 0 bytes","date":"2013-01-31T17:00:28.031Z","type":"message"}
{"nick":"isaacs","message":"hmm..","date":"2013-01-31T17:00:38.010Z","type":"message"}
{"nick":"indutny","message":"is this incorrect?","date":"2013-01-31T17:00:46.312Z","type":"message"}
{"nick":"isaacs","message":"why don't you know when to call push()?","date":"2013-01-31T17:00:49.290Z","type":"message"}
{"nick":"indutny","message":"because I've removed .cycle() function","date":"2013-01-31T17:01:05.924Z","type":"message"}
{"nick":"isaacs","message":"indutny: when someone calls _read(), you check if there's data.  if not, then do nothing.  if so, then call push(chunk)","date":"2013-01-31T17:01:10.200Z","type":"message"}
{"nick":"indutny","message":"and doing SSL_read/SSL_write explicitely","date":"2013-01-31T17:01:15.339Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2013-01-31T17:01:24.599Z","type":"message"}
{"nick":"indutny","message":"isaacs: I should invoke cb(), otherwise .read() won't call ._read()","date":"2013-01-31T17:01:40.799Z","type":"message"}
{"nick":"indutny","message":"next time","date":"2013-01-31T17:01:42.901Z","type":"message"}
{"nick":"isaacs","message":"the callback is optional, actually","date":"2013-01-31T17:01:50.559Z","type":"message"}
{"nick":"indutny","message":"that's pretty complex","date":"2013-01-31T17:02:00.352Z","type":"message"}
{"nick":"isaacs","message":"because we expect users to implement _read(), and we know that users suck at getting streams right, it's pretty flexible.","date":"2013-01-31T17:02:09.329Z","type":"message"}
{"nick":"isaacs","message":"now, if you NEVER call the cb, and you NEVER call push(), then ok, you're not going to do much.","date":"2013-01-31T17:02:24.829Z","type":"message"}
{"nick":"indutny","message":"well, hm...","date":"2013-01-31T17:02:43.394Z","type":"message"}
{"nick":"isaacs","message":"but Readable.push() just calls the cb that it would call when data is available.","date":"2013-01-31T17:02:43.739Z","type":"message"}
{"nick":"isaacs","message":"it's the same function, actually","date":"2013-01-31T17:02:46.398Z","type":"message"}
{"nick":"indutny","message":"I believe something is good in this approach","date":"2013-01-31T17:03:00.006Z","type":"message"}
{"nick":"indutny","message":"err","date":"2013-01-31T17:03:04.941Z","type":"message"}
{"nick":"indutny","message":"s/good/bad/","date":"2013-01-31T17:03:06.556Z","type":"message"}
{"nick":"indutny","message":"sorry :)","date":"2013-01-31T17:03:08.460Z","type":"message"}
{"nick":"isaacs","message":"hah","date":"2013-01-31T17:03:23.518Z","type":"message"}
{"nick":"isaacs","message":"> console.error(stream.Readable.prototype.push.toString())","date":"2013-01-31T17:03:25.918Z","type":"message"}
{"nick":"isaacs","message":"function (chunk) {","date":"2013-01-31T17:03:26.051Z","type":"message"}
{"nick":"isaacs","message":"  var rs = this._readableState;","date":"2013-01-31T17:03:26.051Z","type":"message"}
{"nick":"isaacs","message":"  rs.onread(null, chunk);","date":"2013-01-31T17:03:26.588Z","type":"message"}
{"nick":"indutny","message":"yes, but why .onread should be the same as ._read()'s cb?","date":"2013-01-31T17:03:45.863Z","type":"message"}
{"nick":"indutny","message":"it might change somewhere between?","date":"2013-01-31T17:03:54.065Z","type":"message"}
{"nick":"indutny","message":"not in node's core, but by some users","date":"2013-01-31T17:04:05.823Z","type":"message"}
{"nick":"isaacs","message":"because when we call _read() in read(), we do this._read(size, state.onread)","date":"2013-01-31T17:04:08.518Z","type":"message"}
{"nick":"isaacs","message":"we always pass the exact same callback to _read","date":"2013-01-31T17:04:20.277Z","type":"message"}
{"nick":"indutny","message":"yeah, I know, but why can't anyone change state.onread?","date":"2013-01-31T17:04:22.493Z","type":"message"}
{"nick":"isaacs","message":"well, you can, but GAH yo ushould not do that.","date":"2013-01-31T17:04:32.198Z","type":"message"}
{"nick":"indutny","message":"isaacs: better not pass callback at all then","date":"2013-01-31T17:04:32.670Z","type":"message"}
{"nick":"indutny","message":"this is inconsistent","date":"2013-01-31T17:04:57.681Z","type":"message"}
{"nick":"isaacs","message":"indutny: in practice, in every stream we do, we always pass the same callback to our read functions.  it's fine.","date":"2013-01-31T17:05:11.077Z","type":"message"}
{"nick":"isaacs","message":"why would we create a new function every time that just does the same thing?","date":"2013-01-31T17:05:20.067Z","type":"message"}
{"nick":"isaacs","message":"all it's doing is putting the data into the readable queue","date":"2013-01-31T17:05:28.727Z","type":"message"}
{"nick":"indutny","message":"well, not calling callback is something wrong to me","date":"2013-01-31T17:05:43.741Z","type":"message"}
{"nick":"isaacs","message":"stream.push() IS calling the cb","date":"2013-01-31T17:06:00.837Z","type":"message"}
{"nick":"indutny","message":"it's still wrong","date":"2013-01-31T17:06:09.084Z","type":"message"}
{"nick":"indutny","message":"because .push() doesn't accept cb as argument","date":"2013-01-31T17:06:14.671Z","type":"message"}
{"nick":"isaacs","message":"push IS the callback","date":"2013-01-31T17:06:20.102Z","type":"message"}
{"nick":"indutny","message":"oh...","date":"2013-01-31T17:06:24.685Z","type":"message"}
{"nick":"isaacs","message":"(almost)","date":"2013-01-31T17:06:27.446Z","type":"message"}
{"nick":"indutny","message":"why do we need cb at all?","date":"2013-01-31T17:06:29.565Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-01-31T17:06:30.823Z","type":"message"}
{"nick":"isaacs","message":"because it's an API that people are familiar with?  i don't know.","date":"2013-01-31T17:06:40.226Z","type":"message"}
{"nick":"isaacs","message":"it makes it a bit nicer when you do fs.read(this.fd, cb)?","date":"2013-01-31T17:06:52.956Z","type":"message"}
{"nick":"isaacs","message":"rather than fs.read(this.fd, function(er, data) { if (er) return this.emit('error', er); this.push(data) })","date":"2013-01-31T17:07:25.276Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-31T17:09:15.574Z","type":"message"}
{"nick":"indutny","message":"let me wrap it up in my head","date":"2013-01-31T17:09:20.455Z","type":"message"}
{"nick":"indutny","message":"I guess I misunderstanding something","date":"2013-01-31T17:09:29.147Z","type":"message"}
{"nick":"indutny","message":"s/guess I/guess I am/","date":"2013-01-31T17:09:45.559Z","type":"message"}
{"nick":"isaacs","message":"indutny: the idea is that you can use _read/push as a way to interact with push-style streams under the hood","date":"2013-01-31T17:10:26.194Z","type":"message"}
{"nick":"isaacs","message":"indutny: _read->src.resume(); src.on('data') -> if (!push(data)) src.pause()","date":"2013-01-31T17:10:47.103Z","type":"message"}
{"nick":"indutny","message":"ok, but there're still other type of streams","date":"2013-01-31T17:10:47.485Z","type":"message"}
{"nick":"isaacs","message":"sure","date":"2013-01-31T17:10:52.243Z","type":"message"}
{"nick":"indutny","message":"and lets suppose this streams can't push :)","date":"2013-01-31T17:11:04.562Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-01-31T17:11:11.093Z","type":"message"}
{"nick":"isaacs","message":"so youer' pulling out of openssl","date":"2013-01-31T17:11:13.993Z","type":"message"}
{"nick":"indutny","message":"I see streams2 API as sort of BSD sockets API","date":"2013-01-31T17:11:16.550Z","type":"message"}
{"nick":"indutny","message":"tls' work is to notify user when he can pull data","date":"2013-01-31T17:11:39.418Z","type":"message"}
{"nick":"indutny","message":"and user tries to read data","date":"2013-01-31T17:12:07.304Z","type":"message"}
{"nick":"indutny","message":"look at read(2) call in man, it can return -1 and set errno to, lets say, EINTR","date":"2013-01-31T17:12:27.168Z","type":"message"}
{"nick":"indutny","message":"err","date":"2013-01-31T17:12:39.653Z","type":"message"}
{"nick":"indutny","message":"I mean EAGAIN","date":"2013-01-31T17:12:42.883Z","type":"message"}
{"nick":"indutny","message":"my opinion, is that it'd be good to have same thing in streams2","date":"2013-01-31T17:13:12.880Z","type":"message"}
{"nick":"isaacs","message":"yes","date":"2013-01-31T17:13:29.221Z","type":"message"}
{"nick":"isaacs","message":"read() -> null, wait for 'readable;'","date":"2013-01-31T17:13:37.451Z","type":"message"}
{"nick":"isaacs","message":"that's the exposed interface.","date":"2013-01-31T17:13:40.622Z","type":"message"}
{"nick":"indutny","message":"yes, something like this","date":"2013-01-31T17:13:43.747Z","type":"message"}
{"nick":"isaacs","message":"push/_read is just the machinery","date":"2013-01-31T17:13:45.951Z","type":"message"}
{"nick":"isaacs","message":"that's how it already works","date":"2013-01-31T17:13:49.511Z","type":"message"}
{"nick":"indutny","message":"huh?","date":"2013-01-31T17:13:52.613Z","type":"message"}
{"nick":"indutny","message":"well, that's how it works for external users","date":"2013-01-31T17:14:04.482Z","type":"message"}
{"nick":"indutny","message":"but what about stream internals","date":"2013-01-31T17:14:09.198Z","type":"message"}
{"nick":"isaacs","message":"if you use push(), and you impelemtn _read(), then what you get *exposed* is that read() returns a buffer or null, and if it returns null, then you get a readable event","date":"2013-01-31T17:14:21.501Z","type":"message"}
{"nick":"isaacs","message":"you can certainly implemnet stream.read instead of stream._read","date":"2013-01-31T17:14:47.271Z","type":"message"}
{"nick":"isaacs","message":"but it's more work, and less dry","date":"2013-01-31T17:14:58.370Z","type":"message"}
{"nick":"indutny","message":"well, I can ignore watermarks in it ;)","date":"2013-01-31T17:15:28.754Z","type":"message"}
{"nick":"isaacs","message":"yes.","date":"2013-01-31T17:15:35.140Z","type":"message"}
{"nick":"indutny","message":"ok, good","date":"2013-01-31T17:15:44.337Z","type":"message"}
{"nick":"isaacs","message":"but ignoring water marks is not so nice","date":"2013-01-31T17:15:52.150Z","type":"message"}
{"nick":"indutny","message":"so it seems for me that overriding .read() is the only way to make pull-stream","date":"2013-01-31T17:16:03.494Z","type":"message"}
{"nick":"isaacs","message":"i don't see why","date":"2013-01-31T17:16:15.350Z","type":"message"}
{"nick":"indutny","message":"because otherwise I would net to call ._read() myself and push data that was read","date":"2013-01-31T17:16:55.179Z","type":"message"}
{"nick":"isaacs","message":"stream._read = function(n,cb) { var d = pullSomeData(); if (d) return cb(null, d); }","date":"2013-01-31T17:17:25.399Z","type":"message"}
{"nick":"indutny","message":"that doesn't work","date":"2013-01-31T17:17:39.171Z","type":"message"}
{"nick":"indutny","message":"suppose if there're no data","date":"2013-01-31T17:17:44.174Z","type":"message"}
{"nick":"isaacs","message":"why not?","date":"2013-01-31T17:17:44.429Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2013-01-31T17:17:47.109Z","type":"message"}
{"nick":"indutny","message":"i.e. callback isn't called","date":"2013-01-31T17:17:49.024Z","type":"message"}
{"nick":"isaacs","message":"how will you know when there is data?","date":"2013-01-31T17:17:52.259Z","type":"message"}
{"nick":"indutny","message":"stream.reading = true","date":"2013-01-31T17:17:53.449Z","type":"message"}
{"nick":"indutny","message":"s/stream/state/","date":"2013-01-31T17:17:57.323Z","type":"message"}
{"nick":"indutny","message":"I will not know","date":"2013-01-31T17:18:02.707Z","type":"message"}
{"nick":"indutny","message":"but I can emit 'readable'","date":"2013-01-31T17:18:09.159Z","type":"message"}
{"nick":"isaacs","message":"how would you impleemnt read()?","date":"2013-01-31T17:18:10.118Z","type":"message"}
{"nick":"isaacs","message":"i mean, how do you know when to emit 'readable'?","date":"2013-01-31T17:18:22.268Z","type":"message"}
{"nick":"indutny","message":"see my image :)","date":"2013-01-31T17:18:23.051Z","type":"message"}
{"nick":"indutny","message":"I'll emit it everytime I receive any data","date":"2013-01-31T17:18:33.646Z","type":"message"}
{"nick":"indutny","message":"on both ends","date":"2013-01-31T17:18:35.415Z","type":"message"}
{"nick":"indutny","message":"wait a minute, I'll show you a WIP","date":"2013-01-31T17:19:39.355Z","type":"message"}
{"nick":"isaacs","message":"how do you receive data?","date":"2013-01-31T17:20:02.127Z","type":"message"}
{"nick":"isaacs","message":"BIO_read is async?  or synchronous?","date":"2013-01-31T17:20:14.547Z","type":"message"}
{"nick":"indutny","message":"synchronous","date":"2013-01-31T17:21:03.314Z","type":"message"}
{"nick":"indutny","message":"same is SSL_read","date":"2013-01-31T17:21:05.436Z","type":"message"}
{"nick":"indutny","message":"and SSL_write","date":"2013-01-31T17:21:07.466Z","type":"message"}
{"nick":"indutny","message":"isaacs: https://github.com/indutny/node/compare/feature-crypto-tls-streams2","date":"2013-01-31T17:21:22.033Z","type":"message"}
{"nick":"indutny","message":"so right now I'm overriding .read =","date":"2013-01-31T17:21:57.775Z","type":"message"}
{"nick":"isaacs","message":"ok, so, you just call BIO_read/SSL_read on read() call","date":"2013-01-31T17:22:52.215Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-31T17:23:00.752Z","type":"message"}
{"nick":"indutny","message":"and call BIO_write/SSL_write on ._write() call","date":"2013-01-31T17:23:09.552Z","type":"message"}
{"nick":"isaacs","message":"and then how do you know to emit 'readable'?","date":"2013-01-31T17:23:15.565Z","type":"message"}
{"nick":"indutny","message":"but I'd like to call BIO_read/SSL_read in _read","date":"2013-01-31T17:23:18.970Z","type":"message"}
{"nick":"isaacs","message":"so, you're emitting 'readable' when you might not actually be readable","date":"2013-01-31T17:23:31.325Z","type":"message"}
{"nick":"isaacs","message":"that'll work, but it's not \"correct\"","date":"2013-01-31T17:23:45.315Z","type":"message"}
{"nick":"indutny","message":"well, I'm always readable, but not always have data to read ;)","date":"2013-01-31T17:23:46.359Z","type":"message"}
{"nick":"indutny","message":"why not?","date":"2013-01-31T17:23:50.272Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-01-31T17:23:50.945Z","type":"message"}
{"nick":"isaacs","message":"'readable' should only be emitted when you have data to read","date":"2013-01-31T17:23:59.475Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2013-01-31T17:24:16.527Z","type":"message"}
{"nick":"indutny","message":"I see your point","date":"2013-01-31T17:24:18.579Z","type":"message"}
{"nick":"isaacs","message":"you should be calling BIO_read in your _maybeReadable function","date":"2013-01-31T17:24:24.464Z","type":"message"}
{"nick":"indutny","message":"so probably I need to cycle data manually","date":"2013-01-31T17:24:25.355Z","type":"message"}
{"nick":"isaacs","message":"and then if there's data, self.push(chunk)","date":"2013-01-31T17:24:32.284Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-01-31T17:24:35.591Z","type":"message"}
{"nick":"isaacs","message":"so, your _maybeReadable effectivelyIS the cycle function","date":"2013-01-31T17:24:43.514Z","type":"message"}
{"nick":"indutny","message":"but how would I stop?","date":"2013-01-31T17:24:44.315Z","type":"message"}
{"nick":"indutny","message":"i.e. it looks like watermarks wouldn't really work well with it","date":"2013-01-31T17:25:03.560Z","type":"message"}
{"nick":"isaacs","message":"well... actually... you call your _read instead of maybeReadable","date":"2013-01-31T17:25:07.194Z","type":"message"}
{"nick":"indutny","message":"well, suppose I receive a lot of data","date":"2013-01-31T17:25:20.384Z","type":"message"}
{"nick":"indutny","message":"from net.Socket","date":"2013-01-31T17:25:24.535Z","type":"message"}
{"nick":"isaacs","message":"in yoru _read function, you check if youre below the highWaterMark","date":"2013-01-31T17:25:27.104Z","type":"message"}
{"nick":"isaacs","message":"if you're below it, pull from ssl","date":"2013-01-31T17:25:32.794Z","type":"message"}
{"nick":"indutny","message":"oh, so I should do it myself? :)","date":"2013-01-31T17:25:45.890Z","type":"message"}
{"nick":"isaacs","message":"if you're not, then just don't do anything,a nd let hte data stay wherever it is, so that it exerts backpressure on whoever's putting it there","date":"2013-01-31T17:25:48.263Z","type":"message"}
{"nick":"isaacs","message":"one second, gonna gist something","date":"2013-01-31T17:25:53.323Z","type":"message"}
{"nick":"indutny","message":"I mean, I can do it","date":"2013-01-31T17:25:55.955Z","type":"message"}
{"nick":"indutny","message":"and I understand internal logic","date":"2013-01-31T17:26:01.358Z","type":"message"}
{"nick":"indutny","message":"I just want to do it like it's 3rd party module","date":"2013-01-31T17:26:10.410Z","type":"message"}
{"nick":"indutny","message":"and avoid using internal stuff","date":"2013-01-31T17:26:22.259Z","type":"message"}
{"nick":"indutny","message":"as much as possible","date":"2013-01-31T17:26:28.435Z","type":"message"}
{"nick":"qmx|lunch","new_nick":"qmx","date":"2013-01-31T17:28:25.667Z","type":"nick"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-31T17:29:35.949Z","type":"quit"}
{"nick":"isaacs","message":"indutny: https://gist.github.com/4684623","date":"2013-01-31T17:32:58.648Z","type":"message"}
{"nick":"isaacs","message":"indutny: yeah, i want that as well.","date":"2013-01-31T17:33:16.278Z","type":"message"}
{"nick":"indutny","message":"isaacs: I see","date":"2013-01-31T17:33:32.914Z","type":"message"}
{"nick":"indutny","message":"and it's understood","date":"2013-01-31T17:33:35.278Z","type":"message"}
{"nick":"isaacs","message":"here's how i look at it: if you have to override the public read() or write() methods, and manage backpressure etc yourself, then the API is lacking.","date":"2013-01-31T17:33:38.806Z","type":"message"}
{"nick":"indutny","message":"I'm just afraid that CryptoStream's case might be very common","date":"2013-01-31T17:33:44.635Z","type":"message"}
{"nick":"isaacs","message":"of course, the API might be lacking, and maybe we can't finish it very easily, ok, whatever.","date":"2013-01-31T17:33:52.318Z","type":"message"}
{"nick":"indutny","message":"isaacs: agreed","date":"2013-01-31T17:33:52.699Z","type":"message"}
{"nick":"isaacs","message":"but we should be using the documented methods to build our stuff.","date":"2013-01-31T17:34:04.338Z","type":"message"}
{"nick":"isaacs","message":"so, one thing i dont' like in my gist:","date":"2013-01-31T17:34:08.267Z","type":"message"}
{"nick":"isaacs","message":"there should be a clear way to know whether or not you *should* get data, other than doing _read","date":"2013-01-31T17:34:32.511Z","type":"message"}
{"nick":"isaacs","message":"so maybe the _write functions should just do read(0) to trigger a _read conditionally.","date":"2013-01-31T17:34:42.817Z","type":"message"}
{"nick":"isaacs","message":"yeah, actually, that's the right answer.","date":"2013-01-31T17:34:47.717Z","type":"message"}
{"nick":"isaacs","message":"updating gist.","date":"2013-01-31T17:34:49.927Z","type":"message"}
{"nick":"indutny","message":"yes, that's what I'm doing now","date":"2013-01-31T17:35:20.691Z","type":"message"}
{"nick":"indutny","message":"sort of","date":"2013-01-31T17:35:26.813Z","type":"message"}
{"nick":"isaacs","message":"ok, updated gist: https://gist.github.com/4684623","date":"2013-01-31T17:35:41.417Z","type":"message"}
{"nick":"isaacs","message":"we DO need a way to say, \"I'm done reading, but I don't have data right now.  ask again later.\"","date":"2013-01-31T17:36:08.616Z","type":"message"}
{"nick":"isaacs","message":"maybe Buffer(0) could be that.","date":"2013-01-31T17:36:13.736Z","type":"message"}
{"nick":"indutny","message":"yeees!","date":"2013-01-31T17:36:19.915Z","type":"message"}
{"nick":"isaacs","message":"i don't know.","date":"2013-01-31T17:36:20.556Z","type":"message"}
{"nick":"indutny","message":"that's what I'm talking about","date":"2013-01-31T17:36:23.339Z","type":"message"}
{"nick":"isaacs","message":"yes.","date":"2013-01-31T17:36:25.426Z","type":"message"}
{"nick":"isaacs","message":"i see this now.","date":"2013-01-31T17:36:26.906Z","type":"message"}
{"nick":"isaacs","message":"thanks","date":"2013-01-31T17:36:27.867Z","type":"message"}
{"nick":"indutny","message":"I'm not sure about way of doing it","date":"2013-01-31T17:36:31.205Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-01-31T17:36:34.646Z","type":"message"}
{"nick":"indutny","message":"is Buffer(0) good fit for it","date":"2013-01-31T17:36:36.747Z","type":"message"}
{"nick":"mmalecki","message":"creating an empty Buffer might be a significant overhead","date":"2013-01-31T17:36:37.234Z","type":"message"}
{"nick":"isaacs","message":"without delving into private bs","date":"2013-01-31T17:36:39.651Z","type":"message"}
{"nick":"indutny","message":"mmalecki: not really, it's cached now","date":"2013-01-31T17:36:44.657Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: an empty buffer is effectively free.","date":"2013-01-31T17:36:48.076Z","type":"message"}
{"nick":"mmalecki","message":"oh. good.","date":"2013-01-31T17:36:51.015Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: it's up there with new Array(0)","date":"2013-01-31T17:36:54.126Z","type":"message"}
{"nick":"isaacs","message":"indutny: i don't know.","date":"2013-01-31T17:37:10.246Z","type":"message"}
{"nick":"isaacs","message":"indutny: there are cases like fs where \"no data\" is effectively treated like eof","date":"2013-01-31T17:37:22.925Z","type":"message"}
{"nick":"indutny","message":"btw, I'm going to talk about streams2 at Yandex soon","date":"2013-01-31T17:37:24.188Z","type":"message"}
{"nick":"isaacs","message":"indutny: awesome :)","date":"2013-01-31T17:37:28.985Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-01-31T17:37:31.856Z","type":"message"}
{"nick":"indutny","message":"so I need to get better understanding of it :)","date":"2013-01-31T17:37:37.854Z","type":"message"}
{"nick":"isaacs","message":"indutny: do you use keynote?  you can feel free to steal from my slides.","date":"2013-01-31T17:37:44.825Z","type":"message"}
{"nick":"indutny","message":"isaacs: yep, I'll use keynote","date":"2013-01-31T17:37:55.511Z","type":"message"}
{"nick":"indutny","message":"do you have your slides somewhere online?","date":"2013-01-31T17:38:14.787Z","type":"message"}
{"nick":"isaacs","message":"yeah, lemme grab you the url...","date":"2013-01-31T17:41:38.383Z","type":"message"}
{"nick":"isaacs","message":"indutny: http://dl.dropbox.com/u/3685/presentations/streams2/streams2-ko.key","date":"2013-01-31T17:41:59.563Z","type":"message"}
{"nick":"sblom","date":"2013-01-31T17:42:06.426Z","type":"join"}
{"nick":"isaacs","message":"indutny: that's the one from korea, which is the third one i gave in that trip, so it's the most polished.","date":"2013-01-31T17:42:15.962Z","type":"message"}
{"nick":"pooya","date":"2013-01-31T17:42:20.542Z","type":"join"}
{"nick":"indutny","message":":)","date":"2013-01-31T17:42:40.626Z","type":"message"}
{"nick":"indutny","message":"great","date":"2013-01-31T17:42:41.813Z","type":"message"}
{"nick":"indutny","message":"thank you","date":"2013-01-31T17:42:45.570Z","type":"message"}
{"nick":"isaacs","message":"some stuff has changed since then, of course.","date":"2013-01-31T17:43:45.232Z","type":"message"}
{"nick":"isaacs","message":"but the basics are still accurate","date":"2013-01-31T17:43:55.081Z","type":"message"}
{"nick":"sblom","message":"piscisaureus_: What did I break in the installer? I meant to mention that there's a change that works with WiX 3.6 and 3.7, but probably not with 3.5 (which I think is what we currently use).","date":"2013-01-31T17:44:06.085Z","type":"message"}
{"nick":"piscisaureus_","message":"sblom: I get an error that a feature/@level tag is missing","date":"2013-01-31T17:44:33.154Z","type":"message"}
{"nick":"piscisaureus_","message":"sblom: it's trivial to fix though.","date":"2013-01-31T17:44:37.347Z","type":"message"}
{"nick":"sblom","message":"oh, interesting.","date":"2013-01-31T17:44:45.366Z","type":"message"}
{"nick":"isaacs","message":"sblom: i should probably pull your changes onto my build vm and make sure it'll work when i do an actual release.","date":"2013-01-31T17:44:46.941Z","type":"message"}
{"nick":"sblom","message":"isaacs: I'd love it if you would.","date":"2013-01-31T17:44:55.883Z","type":"message"}
{"nick":"indutny","message":"isaacs: so what do you think about stream.dontHaveAnythingPleaseComeAgainLater() ? :)","date":"2013-01-31T17:45:00.374Z","type":"message"}
{"nick":"sblom","message":"This is one of those things that's pretty much impossible to write auto-tests for. :(","date":"2013-01-31T17:45:16.724Z","type":"message"}
{"nick":"sblom","message":"I've been doing upgrades and uninstalls and reinstalls and non-standard directory installs, but I've still possibly missed some things.","date":"2013-01-31T17:45:41.126Z","type":"message"}
{"nick":"piscisaureus_","message":"sblom: maybe it's an issue with _my_ wix version","date":"2013-01-31T17:46:01.195Z","type":"message"}
{"nick":"sblom","message":"piscisaureus_: It sounds like a legitimate complaint from WiX to me.","date":"2013-01-31T17:46:17.521Z","type":"message"}
{"nick":"piscisaureus_","message":"sblom: it's this line:","date":"2013-01-31T17:46:56.552Z","type":"message"}
{"nick":"piscisaureus_","message":"<Feature Id=\"nodejs.shortcuts\" Title=\"node.js shortcuts\" Description=\"$(var.ProductDescription) Shortcuts\">","date":"2013-01-31T17:46:56.680Z","type":"message"}
{"nick":"piscisaureus_","message":"It lacks a Feature=\"1\"","date":"2013-01-31T17:47:02.841Z","type":"message"}
{"nick":"piscisaureus_","message":"er, Level=\"1\"","date":"2013-01-31T17:47:11.269Z","type":"message"}
{"nick":"sblom","message":"piscisaureus_: I'll double-check that it works with WiX 3.7.","date":"2013-01-31T17:47:23.934Z","type":"message"}
{"nick":"isaacs","message":"indutny: yeah, need to figure out some nice API for that.","date":"2013-01-31T17:47:24.299Z","type":"message"}
{"nick":"sblom","message":"It probably does.","date":"2013-01-31T17:47:32.998Z","type":"message"}
{"nick":"isaacs","message":"indutny: in the meantime, just set this._readableState.reading = false if you're not going to call the cb","date":"2013-01-31T17:47:36.559Z","type":"message"}
{"nick":"indutny","message":"isaacs: this sounds like a plan","date":"2013-01-31T17:47:53.481Z","type":"message"}
{"nick":"mikeal","date":"2013-01-31T17:48:33.939Z","type":"join"}
{"nick":"sblom","message":"piscisaureus_: Still builds for me, so it definitely should be there.","date":"2013-01-31T17:49:14.499Z","type":"message"}
{"nick":"sblom","message":"i.e. it's compatible across the gamut","date":"2013-01-31T17:49:24.929Z","type":"message"}
{"nick":"sblom","message":"piscisaureus_: While you're thinking about the <Feature> stuff in WiX, jimschubert's change uses feature.application.shortcuts and feature.internet.shortcuts for Feature/@Id. I was thinking it should be nodejs.shortcuts.application and nodejs.shortcuts.internet just to keep the hierarchy alive.","date":"2013-01-31T17:51:46.220Z","type":"message"}
{"nick":"sblom","message":"jimschubert raised a mild defense of starting them with \"feature\" in his pull request.","date":"2013-01-31T17:52:18.994Z","type":"message"}
{"nick":"sblom","message":"What are your thoughts?","date":"2013-01-31T17:52:22.834Z","type":"message"}
{"nick":"sblom","message":"I actually feel fairly strongly that we should be consistent here, and I think that means I should rename them.","date":"2013-01-31T17:52:50.551Z","type":"message"}
{"nick":"sblom","message":"In fact, let me upgrade: I'm renaming them unless you object.","date":"2013-01-31T17:52:59.887Z","type":"message"}
{"nick":"sblom","message":"piscisaureus_: done (and included your Level=\"1\" fix)","date":"2013-01-31T17:55:39.697Z","type":"message"}
{"nick":"brson","date":"2013-01-31T18:04:22.130Z","type":"join"}
{"nick":"MI6","reason":"Remote host closed the connection","date":"2013-01-31T18:05:48.638Z","type":"quit"}
{"nick":"MI6","date":"2013-01-31T18:05:59.118Z","type":"join"}
{"nick":"isaacs","message":"sblom: whoohoo!  destination folder!!","date":"2013-01-31T18:06:16.906Z","type":"message"}
{"nick":"isaacs","message":"sblom: woohoo!  custom shortcut optional setups!!","date":"2013-01-31T18:06:36.996Z","type":"message"}
{"nick":"indutny","message":"isaacs: surprisingly it works :)","date":"2013-01-31T18:08:37.947Z","type":"message"}
{"nick":"indutny","message":"isaacs: with .ondata quirk and reading = false","date":"2013-01-31T18:08:44.766Z","type":"message"}
{"nick":"indutny","message":"I need to figure out some details like ending streams and etc","date":"2013-01-31T18:08:55.235Z","type":"message"}
{"nick":"indutny","message":"and make it stable :)","date":"2013-01-31T18:08:59.018Z","type":"message"}
{"nick":"indutny","message":"and after that we can replace old retarded tls.js with new shining one","date":"2013-01-31T18:09:08.489Z","type":"message"}
{"nick":"loladiro","date":"2013-01-31T18:09:14.365Z","type":"join"}
{"nick":"isaacs","message":"indutny: !!!! \\o/","date":"2013-01-31T18:09:31.054Z","type":"message"}
{"nick":"isaacs","message":"indutny: you are a hero","date":"2013-01-31T18:09:33.284Z","type":"message"}
{"nick":"indutny","message":"meh, not really","date":"2013-01-31T18:12:08.580Z","type":"message"}
{"nick":"isaacs","message":"indutny: i think we can do Buffer(0) as a \"i have no more, but not eof yet\".  and null as eof","date":"2013-01-31T18:12:10.082Z","type":"message"}
{"nick":"indutny","message":"it's still looks awkward","date":"2013-01-31T18:12:13.544Z","type":"message"}
{"nick":"isaacs","message":"indutny: that might work.","date":"2013-01-31T18:12:15.012Z","type":"message"}
{"nick":"indutny","message":"isaacs: yes, this lgtm","date":"2013-01-31T18:12:24.592Z","type":"message"}
{"nick":"indutny","message":"brb","date":"2013-01-31T18:12:32.538Z","type":"message"}
{"nick":"rendar","reason":"Ping timeout: 245 seconds","date":"2013-01-31T18:13:46.104Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-01-31T18:19:30.070Z","type":"quit"}
{"nick":"rendar","date":"2013-01-31T18:21:21.533Z","type":"join"}
{"nick":"sblom","message":"isaacs: Did it build and run for you? Or was that excitement just from reading the pull request?","date":"2013-01-31T18:26:31.155Z","type":"message"}
{"nick":"isaacs","message":"sblom: yeah, it ran","date":"2013-01-31T18:26:38.783Z","type":"message"}
{"nick":"isaacs","message":"it installed","date":"2013-01-31T18:26:40.223Z","type":"message"}
{"nick":"isaacs","message":"it works","date":"2013-01-31T18:26:40.983Z","type":"message"}
{"nick":"sblom","message":"Great.","date":"2013-01-31T18:26:41.998Z","type":"message"}
{"nick":"isaacs","message":"oddly, i now have a nodejs in C:\\program files (x86) as well as one in c:\\program files","date":"2013-01-31T18:26:52.083Z","type":"message"}
{"nick":"isaacs","message":"maybe some older install?  an x64 one?","date":"2013-01-31T18:27:02.242Z","type":"message"}
{"nick":"bnoordhuis","message":"template <class Type, class ReturnType>","date":"2013-01-31T18:27:17.304Z","type":"message"}
{"nick":"bnoordhuis","message":"struct Sorter<std::less<ReturnType>, Type, ReturnType>","date":"2013-01-31T18:27:17.440Z","type":"message"}
{"nick":"bnoordhuis","message":"Sort(ReturnType (Type::*fn)() const)","date":"2013-01-31T18:27:17.571Z","type":"message"}
{"nick":"bnoordhuis","message":"{ return Sorter<std::less<ReturnType>, Type, ReturnType>(fn);","date":"2013-01-31T18:27:17.571Z","type":"message"}
{"nick":"bnoordhuis","message":"}","date":"2013-01-31T18:27:17.571Z","type":"message"}
{"nick":"bnoordhuis","message":"^ c++ is so awesome :/","date":"2013-01-31T18:27:21.845Z","type":"message"}
{"nick":"bnoordhuis","message":"that'd be a oneliner in any other language","date":"2013-01-31T18:27:33.985Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_, bnoordhuis: Hey, so... odd question: why do we not do feof, and instead just assume that read() returning 0 means eof?","date":"2013-01-31T18:27:56.125Z","type":"message"}
{"nick":"sblom","message":"isaacs: I'm sure that isn't supposed to happen. Lemme try to reproduce it.","date":"2013-01-31T18:28:01.661Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: feof? what/where?","date":"2013-01-31T18:28:16.891Z","type":"message"}
{"nick":"isaacs","message":"sblom: the one that's not in x86 is 0.9.8","date":"2013-01-31T18:28:17.352Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: when we read files in a fs.ReadStream","date":"2013-01-31T18:28:29.102Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ++","date":"2013-01-31T18:28:36.477Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: we just go until we get no bytes.","date":"2013-01-31T18:28:38.341Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: which is fine, i guess","date":"2013-01-31T18:28:43.491Z","type":"message"}
{"nick":"indutny","message":"isaacs: because it's ok :)","date":"2013-01-31T18:28:57.123Z","type":"message"}
{"nick":"sblom","message":"isaacs: and the one in x86 is earlier?","date":"2013-01-31T18:29:05.120Z","type":"message"}
{"nick":"isaacs","message":"sblom: no, the one in x86 is the one i just installed","date":"2013-01-31T18:29:14.461Z","type":"message"}
{"nick":"isaacs","message":"sblom: the one in non-x86 is older","date":"2013-01-31T18:29:22.001Z","type":"message"}
{"nick":"sblom","message":"ahh, I get it.","date":"2013-01-31T18:29:22.900Z","type":"message"}
{"nick":"sblom","message":"Okay--I'll go play with this for a bit.","date":"2013-01-31T18:29:41.051Z","type":"message"}
{"nick":"isaacs","message":"sblom: ","date":"2013-01-31T18:29:50.411Z","type":"message"}
{"nick":"isaacs","message":"c:\\node>node","date":"2013-01-31T18:29:50.691Z","type":"message"}
{"nick":"isaacs","message":"> process.execPath","date":"2013-01-31T18:29:50.820Z","type":"message"}
{"nick":"isaacs","message":"'C:\\\\Program Files\\\\nodejs\\\\node.exe'","date":"2013-01-31T18:29:50.820Z","type":"message"}
{"nick":"isaacs","message":"> process.version","date":"2013-01-31T18:29:50.820Z","type":"message"}
{"nick":"isaacs","message":"'v0.9.8'","date":"2013-01-31T18:29:52.941Z","type":"message"}
{"nick":"isaacs","message":"sblom: i assume that menas that i installed the x64 msi","date":"2013-01-31T18:30:06.271Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: that's how it works. feof() is a libc abstraction thing, the actual syscall just returns 0 once eof is hit","date":"2013-01-31T18:30:07.662Z","type":"message"}
{"nick":"isaacs","message":"sblom: which i might have done","date":"2013-01-31T18:30:09.300Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: oh, ok.  good answer :)","date":"2013-01-31T18:30:19.390Z","type":"message"}
{"nick":"sblom","message":"yeah--I believe that part. Thing is, they both have the same product GUID, so installing one should remove the other.","date":"2013-01-31T18:30:29.134Z","type":"message"}
{"nick":"sblom","message":"Or at least that's my expectation.","date":"2013-01-31T18:30:35.650Z","type":"message"}
{"nick":"isaacs","message":"sblom: oh, ok","date":"2013-01-31T18:30:37.920Z","type":"message"}
{"nick":"sblom","message":"We actually had someone request the ability to install both.","date":"2013-01-31T18:30:45.438Z","type":"message"}
{"nick":"isaacs","message":"sblom: so it might be an actual bug with the new one","date":"2013-01-31T18:30:47.080Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-31T18:30:53.721Z","type":"quit"}
{"nick":"isaacs","message":"sblom: or maybe a new feature!","date":"2013-01-31T18:30:55.450Z","type":"message"}
{"nick":"sblom","message":"But I think that's a complication we don't want to have to figure out just yet.","date":"2013-01-31T18:30:55.732Z","type":"message"}
{"nick":"sblom","message":"Heh--maybe.","date":"2013-01-31T18:31:00.281Z","type":"message"}
{"nick":"sblom","message":"I'm betting more bug.","date":"2013-01-31T18:31:09.262Z","type":"message"}
{"nick":"sblom","message":":s","date":"2013-01-31T18:31:13.841Z","type":"message"}
{"nick":"trevnorris","date":"2013-01-31T18:31:50.009Z","type":"join"}
{"nick":"mikeal","date":"2013-01-31T18:31:55.629Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: while i've got you: https://github.com/joyent/node/issues/1776","date":"2013-01-31T18:32:25.889Z","type":"message"}
{"nick":"lohkey","date":"2013-01-31T18:32:26.538Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: i think we need to expose RSTs somehow to net cliens","date":"2013-01-31T18:32:45.819Z","type":"message"}
{"nick":"isaacs","message":"*clients","date":"2013-01-31T18:32:47.579Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, i'm not sure why we do it like that","date":"2013-01-31T18:33:00.123Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: yes, it is a thing that you need to handle.. but how can you handle it if we don't show you it?","date":"2013-01-31T18:33:10.179Z","type":"message"}
{"nick":"indutny","message":"RST?","date":"2013-01-31T18:33:29.924Z","type":"message"}
{"nick":"isaacs","message":"resets","date":"2013-01-31T18:33:32.689Z","type":"message"}
{"nick":"indutny","message":"yes, but how would we handle it","date":"2013-01-31T18:33:41.935Z","type":"message"}
{"nick":"indutny","message":"it's not really exposed AFAIK","date":"2013-01-31T18:33:46.800Z","type":"message"}
{"nick":"isaacs","message":"i dunno","date":"2013-01-31T18:33:49.708Z","type":"message"}
{"nick":"isaacs","message":"self.emit('reset'); self.destroy()?","date":"2013-01-31T18:33:57.508Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: am I right?","date":"2013-01-31T18:33:57.638Z","type":"message"}
{"nick":"`3rdEden","date":"2013-01-31T18:33:59.118Z","type":"join"}
{"nick":"isaacs","message":"something","date":"2013-01-31T18:34:02.048Z","type":"message"}
{"nick":"indutny","message":"well...","date":"2013-01-31T18:34:05.901Z","type":"message"}
{"nick":"indutny","message":"not exactly this","date":"2013-01-31T18:34:08.221Z","type":"message"}
{"nick":"indutny","message":"I mean how to handle this in C-land","date":"2013-01-31T18:34:14.718Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: apparently it's because of this -> https://github.com/joyent/node/issues/1571","date":"2013-01-31T18:34:38.026Z","type":"message"}
{"nick":"isaacs","message":"ugh, that guy again?","date":"2013-01-31T18:35:06.467Z","type":"message"}
{"nick":"isaacs","message":"who gave him commit access??","date":"2013-01-31T18:35:10.639Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah. good thing we let him go","date":"2013-01-31T18:35:13.631Z","type":"message"}
{"nick":"indutny","message":"aaah","date":"2013-01-31T18:35:26.877Z","type":"message"}
{"nick":"indutny","message":"ECONNRESET","date":"2013-01-31T18:35:31.984Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: ECONNRESET just bubbles up from libuv/binding layer","date":"2013-01-31T18:35:36.081Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-31T18:35:40.266Z","type":"message"}
{"nick":"indutny","message":"I remember now","date":"2013-01-31T18:35:42.250Z","type":"message"}
{"nick":"bnoordhuis","message":"but lib/net.js squelches it","date":"2013-01-31T18:35:49.304Z","type":"message"}
{"nick":"indutny","message":"squelches?","date":"2013-01-31T18:35:59.871Z","type":"message"}
{"nick":"indutny","message":"yeew","date":"2013-01-31T18:36:05.277Z","type":"message"}
{"nick":"bnoordhuis","message":"suppresses :)","date":"2013-01-31T18:36:13.983Z","type":"message"}
{"nick":"indutny","message":"ook","date":"2013-01-31T18:36:21.230Z","type":"message"}
{"nick":"isaacs","message":"what's weird is that the referenced test *doesn't* fail with econnreset now","date":"2013-01-31T18:37:01.666Z","type":"message"}
{"nick":"isaacs","message":"when i take out that bit","date":"2013-01-31T18:37:03.916Z","type":"message"}
{"nick":"indutny","message":"isaacs: oh, btw","date":"2013-01-31T18:37:22.257Z","type":"message"}
{"nick":"indutny","message":"I remember another problem with streams2","date":"2013-01-31T18:37:29.136Z","type":"message"}
{"nick":"indutny","message":"partial writes","date":"2013-01-31T18:37:30.939Z","type":"message"}
{"nick":"isaacs","message":"k","date":"2013-01-31T18:37:32.456Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: indeed. (just checked it too)","date":"2013-01-31T18:37:39.256Z","type":"message"}
{"nick":"isaacs","message":"partial writes?","date":"2013-01-31T18:37:41.296Z","type":"message"}
{"nick":"indutny","message":"why ._write() can't succeed with partial write?","date":"2013-01-31T18:37:43.584Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-01-31T18:37:44.566Z","type":"message"}
{"nick":"indutny","message":"suppose ._write() was called with 16kb buffer","date":"2013-01-31T18:37:56.095Z","type":"message"}
{"nick":"isaacs","message":"ohh, like, you gave me a buffer, and i was able to write some of it, but not all of it?","date":"2013-01-31T18:37:59.436Z","type":"message"}
{"nick":"indutny","message":"but only 8kb was written","date":"2013-01-31T18:38:04.609Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-31T18:38:06.256Z","type":"message"}
{"nick":"bnoordhuis","action":"runs tests","date":"2013-01-31T18:38:24.869Z","type":"action"}
{"nick":"indutny","message":"I can buffer it","date":"2013-01-31T18:38:25.305Z","type":"message"}
{"nick":"isaacs","message":"well, the way it actually works in streams1 land, is that you wouldn't take a new pending chunk until you're done with hte old pending chunk","date":"2013-01-31T18:38:28.806Z","type":"message"}
{"nick":"indutny","message":"but my internal buffering won't affect watermarks","date":"2013-01-31T18:38:34.852Z","type":"message"}
{"nick":"isaacs","message":"indutny: that's how it works in streams2, also","date":"2013-01-31T18:38:39.155Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2013-01-31T18:38:46.747Z","type":"message"}
{"nick":"isaacs","message":"indutny: _write(chunk,cb) don't call cb until you're done writing the whole thing","date":"2013-01-31T18:38:48.575Z","type":"message"}
{"nick":"indutny","message":"should I just stop calling callback","date":"2013-01-31T18:38:52.401Z","type":"message"}
{"nick":"isaacs","message":"if you have to call your underlying write function a bunch of times, that's fine","date":"2013-01-31T18:38:55.865Z","type":"message"}
{"nick":"indutny","message":"that's what I was afraid of :)","date":"2013-01-31T18:38:58.591Z","type":"message"}
{"nick":"isaacs","message":"but don't call cb till your'e done","date":"2013-01-31T18:39:00.475Z","type":"message"}
{"nick":"isaacs","message":"and only call that one once :)","date":"2013-01-31T18:39:05.345Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-01-31T18:39:05.601Z","type":"message"}
{"nick":"indutny","message":"you see, I learned a lot today :)","date":"2013-01-31T18:39:15.565Z","type":"message"}
{"nick":"isaacs","message":"the writable side doesnt' actually change much from streams1 to streams2","date":"2013-01-31T18:39:28.725Z","type":"message"}
{"nick":"isaacs","message":"except that you have to do less work to handle pending stuff","date":"2013-01-31T18:39:39.564Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-31T18:40:03.592Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: so, yo udo get a TON of econnresets in other tests when you remove that bit.","date":"2013-01-31T18:41:02.724Z","type":"message"}
{"nick":"isaacs","message":"(ton = 5.  they're 400lbs each, apparently.)","date":"2013-01-31T18:41:16.433Z","type":"message"}
{"nick":"bnoordhuis","message":":)","date":"2013-01-31T18:41:22.431Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, i'm seeing that as well","date":"2013-01-31T18:41:29.850Z","type":"message"}
{"nick":"bnoordhuis","message":"also AssertionError: \"ECONNRESET\" == \"EPIPE\"","date":"2013-01-31T18:41:36.538Z","type":"message"}
{"nick":"bnoordhuis","message":"in pummel/test-tls-ci-reneg-attack","date":"2013-01-31T18:41:54.361Z","type":"message"}
{"nick":"bnoordhuis","message":"[03:49|% 100|+ 558|-   3]: Done <- all failures in the pummel tests interestingly enough","date":"2013-01-31T18:42:21.858Z","type":"message"}
{"nick":"isaacs","message":"simple/test-http-multi-line-headers is failing with an econnreset","date":"2013-01-31T18:43:13.342Z","type":"message"}
{"nick":"trevnorris","message":"sup everyone? isaacs if you push to a Readable stream, but there's nothing reading it out, what should happen?","date":"2013-01-31T18:43:19.693Z","type":"message"}
{"nick":"isaacs","message":"which is kind of expected, looking at the code.","date":"2013-01-31T18:43:19.832Z","type":"message"}
{"nick":"isaacs","message":"i mean, the server destroys the connection","date":"2013-01-31T18:43:23.382Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: it should eventually have push() return false","date":"2013-01-31T18:43:32.472Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: passes for me","date":"2013-01-31T18:43:39.017Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: for me the process just dies, out of memory","date":"2013-01-31T18:43:42.930Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: well, you should stop push()ing when it returns false","date":"2013-01-31T18:43:53.542Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: wait for another _read call","date":"2013-01-31T18:44:01.281Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: weird.","date":"2013-01-31T18:44:32.931Z","type":"message"}
{"nick":"bnoordhuis","message":"the pummel/test-tls-ci-reneg-attack failure is more or less expected, i think","date":"2013-01-31T18:44:39.960Z","type":"message"}
{"nick":"isaacs","message":"ok, so... we can't just yank that code out.  we have to do *something* with ECONNRESETs, i guess.","date":"2013-01-31T18:44:49.731Z","type":"message"}
{"nick":"bnoordhuis","message":"it gets ECONNRESET but that's squelched, and the next write errors with EPIPE","date":"2013-01-31T18:44:56.631Z","type":"message"}
{"nick":"isaacs","message":"they're not so abnormal, after all.","date":"2013-01-31T18:44:57.751Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: figured. just wanted to know if there was a failsafe to dump unread data if it was filling up.","date":"2013-01-31T18:45:05.220Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: right, sounds like the test could just be updated to expect ECONNRESET instead of EPIPE","date":"2013-01-31T18:45:15.871Z","type":"message"}
{"nick":"bnoordhuis","message":"yep","date":"2013-01-31T18:45:19.517Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: nope.","date":"2013-01-31T18:45:23.630Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: it's up to you to respect backpressure.","date":"2013-01-31T18:45:28.990Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: it's like calling write(chunk) forever and not respecting the return value","date":"2013-01-31T18:45:38.450Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: got it. yeah. I just put a .push() if a for loop and tried to kick the crap out of it.","date":"2013-01-31T18:45:58.782Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: hahah","date":"2013-01-31T18:46:05.890Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: should be a while(push()); loop","date":"2013-01-31T18:46:16.240Z","type":"message"}
{"nick":"trevnorris","message":"ah, that makes sense.","date":"2013-01-31T18:46:32.770Z","type":"message"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-01-31T18:49:40.880Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-31T18:50:02.730Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: so if I am just pushing constantly, I should only see continued increase of memory consumption, right?","date":"2013-01-31T18:51:41.159Z","type":"message"}
{"nick":"isaacs","message":"yes.","date":"2013-01-31T18:51:55.676Z","type":"message"}
{"nick":"isaacs","message":"that's what i would expect","date":"2013-01-31T18:52:02.369Z","type":"message"}
{"nick":"trevnorris","message":"hm. don't think that's what I'm seeing. I'll run massif on it and post the results.","date":"2013-01-31T18:53:07.709Z","type":"message"}
{"nick":"indutny","message":"again this word","date":"2013-01-31T18:55:57.031Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: wash your mouth","date":"2013-01-31T18:56:02.031Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: wut?","date":"2013-01-31T18:56:12.281Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033bnoordhuis\u000f created branch issue1776 - http://git.io/bJlL_A","date":"2013-01-31T18:57:40.501Z","type":"message"}
{"nick":"pfox__","message":"howdy. so.","date":"2013-01-31T18:57:43.546Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: ^ if you can look into why that other test is failing for you","date":"2013-01-31T18:57:57.698Z","type":"message"}
{"nick":"pfox__","message":"looks like joyent/libuv master is broken in mingw32. is that a high priority for you guys?","date":"2013-01-31T18:58:04.546Z","type":"message"}
{"nick":"bnoordhuis","message":"then you're free to steal my commit :)","date":"2013-01-31T18:58:06.249Z","type":"message"}
{"nick":"pfox__","message":"just trying to figure out if i need to patch/fix on my own or what.","date":"2013-01-31T18:58:12.267Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: no, but we'll take patches","date":"2013-01-31T18:58:13.826Z","type":"message"}
{"nick":"pfox__","action":"nods","date":"2013-01-31T18:58:17.842Z","type":"action"}
{"nick":"bnoordhuis","message":"what is broken?","date":"2013-01-31T18:58:20.259Z","type":"message"}
{"nick":"pfox__","message":"lemme get a paste","date":"2013-01-31T18:58:25.686Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i'm seeing 4 simple tests failing with that same diff","date":"2013-01-31T18:59:11.272Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: testing another thing atm, i'll be on that in a few minutes","date":"2013-01-31T18:59:18.721Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, no rush","date":"2013-01-31T18:59:23.592Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: (the fifth was @#$!@#!ing debugger tests)","date":"2013-01-31T18:59:30.671Z","type":"message"}
{"nick":"pfox__","message":"bnoordhuis: http://pastebin.mozilla.org/2101375","date":"2013-01-31T18:59:30.873Z","type":"message"}
{"nick":"bnoordhuis","message":"it's not like it's terribly bothering me :)","date":"2013-01-31T18:59:35.522Z","type":"message"}
{"nick":"bnoordhuis","message":"ah, the debugger tests... they make me sad :9","date":"2013-01-31T18:59:52.810Z","type":"message"}
{"nick":"trevnorris","message":"pfox__: you work out of MTV?","date":"2013-01-31T19:00:21.960Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: ah, it's trying to compile unix code","date":"2013-01-31T19:00:32.591Z","type":"message"}
{"nick":"isaacs","message":"indutny: so.. with returning Buffer(0)","date":"2013-01-31T19:00:52.590Z","type":"message"}
{"nick":"isaacs","message":"indutny: let's say, you call read().  that triggers _read().  i call teh cb(null,Buffer(0))","date":"2013-01-31T19:01:10.540Z","type":"message"}
{"nick":"isaacs","message":"indutny: now, we're in a state where, you don't know that you'll need to read() again, and you're waiting for a readable event, and i'm not doing anything.","date":"2013-01-31T19:01:28.160Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: right, i know what that is (and i'm afraid i kind of broke it)","date":"2013-01-31T19:01:32.067Z","type":"message"}
{"nick":"isaacs","message":"indutny: i think for anything other than crypto streams, this is very dangerous.","date":"2013-01-31T19:01:40.770Z","type":"message"}
{"nick":"isaacs","message":"indutny: we should not tell people about this :)","date":"2013-01-31T19:01:45.790Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: if you compile with `make OS=mingw`, it should work","date":"2013-01-31T19:01:46.306Z","type":"message"}
{"nick":"pfox__","message":"trevnorris: no. im a rust contributor, so i use their pastebin out of habit","date":"2013-01-31T19:01:47.314Z","type":"message"}
{"nick":"pfox__","message":"bnoordhuis: ok, i'll try that..","date":"2013-01-31T19:02:06.059Z","type":"message"}
{"nick":"isaacs","message":"indutny: it'll only work if some *other* thing is going to trigger another read() at some point in the future (which crypto streams will)","date":"2013-01-31T19:02:07.520Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: was it you that fixed a Buffer(0) bug since the class points to NULL or something?","date":"2013-01-31T19:02:10.161Z","type":"message"}
{"nick":"trevnorris","message":"pfox__: ah, cool.","date":"2013-01-31T19:02:25.151Z","type":"message"}
{"nick":"pfox__","message":"wouldn't i love to work out of their, though :)","date":"2013-01-31T19:02:40.479Z","type":"message"}
{"nick":"pfox__","message":"someday, perhaps.","date":"2013-01-31T19:02:44.696Z","type":"message"}
{"nick":"pfox__","message":"there, even","date":"2013-01-31T19:02:48.089Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: it's because of this -> OS ?= $(shell sh -c 'uname -s | tr \"[A-Z]\" \"[a-z]\"')","date":"2013-01-31T19:02:53.975Z","type":"message"}
{"nick":"pfox__","message":"bnoordhuis: OS=mingw cleared it right up. thanks.","date":"2013-01-31T19:04:11.158Z","type":"message"}
{"nick":"bnoordhuis","message":"i guess i didn't break it after all, it just never worked. before, you had to set MSVC=1","date":"2013-01-31T19:04:32.610Z","type":"message"}
{"nick":"bnoordhuis","message":"anyway...","date":"2013-01-31T19:04:53.457Z","type":"message"}
{"nick":"pfox__","message":"hey, no biggie","date":"2013-01-31T19:06:11.089Z","type":"message"}
{"nick":"pfox__","message":"i'm trying to land the libuv update and mingw32 is my last checkbox","date":"2013-01-31T19:06:22.274Z","type":"message"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-01-31T19:06:49.016Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-31T19:07:19.005Z","type":"join"}
{"nick":"indutny","message":"isaacs: sorry, was afk","date":"2013-01-31T19:12:48.806Z","type":"message"}
{"nick":"isaacs","message":"np","date":"2013-01-31T19:12:57.942Z","type":"message"}
{"nick":"indutny","message":"isaacs: why is it dangerous?","date":"2013-01-31T19:13:11.411Z","type":"message"}
{"nick":"indutny","message":"it should be documented","date":"2013-01-31T19:13:16.585Z","type":"message"}
{"nick":"indutny","message":"and that's it","date":"2013-01-31T19:13:18.112Z","type":"message"}
{"nick":"indutny","message":"like if you call cb(null, new Buffer(0)) we'll wait for 'readable' event","date":"2013-01-31T19:13:31.738Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033bnoordhuis\u000f created branch fix-mingw - http://git.io/80G3ZQ","date":"2013-01-31T19:14:02.381Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: can you try that patch? ^","date":"2013-01-31T19:14:13.968Z","type":"message"}
{"nick":"indutny","message":"brb","date":"2013-01-31T19:14:22.757Z","type":"message"}
{"nick":"c4milo_","reason":"Ping timeout: 264 seconds","date":"2013-01-31T19:14:30.161Z","type":"quit"}
{"nick":"bnoordhuis","action":"is off to dinner","date":"2013-01-31T19:14:54.211Z","type":"action"}
{"nick":"pfox__","message":"bnoordhuis: ok","date":"2013-01-31T19:16:12.703Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-31T19:21:04.934Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f created branch stream-nodata-noteof - http://git.io/u1WEtQ","date":"2013-01-31T19:22:38.846Z","type":"message"}
{"nick":"isaacs","message":"indutny: here's the patch ^","date":"2013-01-31T19:22:39.986Z","type":"message"}
{"nick":"isaacs","message":"indutny: well, that's the thing.  there won't BE a readable event.","date":"2013-01-31T19:22:47.116Z","type":"message"}
{"nick":"isaacs","message":"indutny: because we wn't even ask for more data until you read() again, but there wont' be more data until you read(), so how do you know when to read() if you don't know when there'll be more data?","date":"2013-01-31T19:23:10.366Z","type":"message"}
{"nick":"isaacs","message":"indutny: you need something to have at least some guess as to when there MIGHT be data, and that thing call read(0)","date":"2013-01-31T19:23:30.976Z","type":"message"}
{"nick":"isaacs","message":"indutny: really, if you're not writing crypto pair streams, you probably should just not be returning empty buffers","date":"2013-01-31T19:23:54.475Z","type":"message"}
{"nick":"cucucu","date":"2013-01-31T19:24:14.075Z","type":"join"}
{"nick":"c4milo","date":"2013-01-31T19:24:24.124Z","type":"join"}
{"nick":"isaacs","message":"indutny: here's another possibility...","date":"2013-01-31T19:24:35.295Z","type":"message"}
{"nick":"isaacs","message":"indutny: instead of having the pair be a \"cleartext\" side and a \"encrypted\" side","date":"2013-01-31T19:24:59.815Z","type":"message"}
{"nick":"isaacs","message":"indutny: what if it was a pair of transform streams.","date":"2013-01-31T19:25:06.405Z","type":"message"}
{"nick":"isaacs","message":"indutny: so one stream is ClearToEncrypted, and the other is EncryptedToClear","date":"2013-01-31T19:25:22.615Z","type":"message"}
{"nick":"wolfeidau","date":"2013-01-31T19:27:05.473Z","type":"join"}
{"nick":"cucucu","message":"hi, i was wondering, is there a way to install libuv on linux using the default makefile? the compile step is fine but i wasn't able to install and i didn't see the point on using gyp since i already have it compiled, am i missing something?","date":"2013-01-31T19:27:36.417Z","type":"message"}
{"nick":"pfox__","message":"bnoordhuis: actually that patch breaks everything, even w/ OS=mingw","date":"2013-01-31T19:28:15.596Z","type":"message"}
{"nick":"pfox__","message":"let's just leave it be","date":"2013-01-31T19:28:17.738Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: here: https://gist.github.com/4685660","date":"2013-01-31T19:31:01.448Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-31T19:31:02.718Z","type":"quit"}
{"nick":"mikeal","date":"2013-01-31T19:31:12.171Z","type":"join"}
{"nick":"TooTallNate","message":"isaacs: Transform streams makes sense to me for crypto","date":"2013-01-31T19:31:47.653Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: plus, are we using any in core yet? it would be a good thing to do so","date":"2013-01-31T19:32:23.349Z","type":"message"}
{"nick":"TooTallNate","message":"oh, zlib probably","date":"2013-01-31T19:32:43.760Z","type":"message"}
{"nick":"TooTallNate","message":"yup","date":"2013-01-31T19:32:52.730Z","type":"message"}
{"nick":"isaacs","message":"yeah, we're using them for crypto hash decipher, etc.","date":"2013-01-31T19:33:02.339Z","type":"message"}
{"nick":"TooTallNate","message":"oh ok","date":"2013-01-31T19:33:56.911Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: i was saying makes sense in the context of what you and indutny were talking about","date":"2013-01-31T19:34:08.624Z","type":"message"}
{"nick":"TooTallNate","message":"\"tls\" i gues","date":"2013-01-31T19:34:10.668Z","type":"message"}
{"nick":"TooTallNate","message":"guess","date":"2013-01-31T19:34:12.520Z","type":"message"}
{"nick":"isaacs","message":"yah","date":"2013-01-31T19:34:17.478Z","type":"message"}
{"nick":"isaacs","message":"Cryptostream","date":"2013-01-31T19:34:21.168Z","type":"message"}
{"nick":"TooTallNate","message":"that's one of the ones internal to tls.Socket right?","date":"2013-01-31T19:34:57.746Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-01-31T19:35:34.558Z","type":"message"}
{"nick":"EhevuTov","date":"2013-01-31T19:35:36.852Z","type":"join"}
{"nick":"isaacs","message":"actually, there is no tls.Socket","date":"2013-01-31T19:35:53.938Z","type":"message"}
{"nick":"TooTallNate","message":"ya, i was just noticing that","date":"2013-01-31T19:36:03.051Z","type":"message"}
{"nick":"TooTallNate","message":"it's just tls.connect()","date":"2013-01-31T19:36:07.909Z","type":"message"}
{"nick":"isaacs","message":"https uses tls.CleartextStream for stuff","date":"2013-01-31T19:36:10.768Z","type":"message"}
{"nick":"isaacs","message":"that's the thing you actually see in tls.connect","date":"2013-01-31T19:36:17.277Z","type":"message"}
{"nick":"isaacs","message":"the actual socket is connected to the encrypted side of the pair","date":"2013-01-31T19:36:25.937Z","type":"message"}
{"nick":"indutny","message":"isaacs: interesting","date":"2013-01-31T19:38:06.998Z","type":"message"}
{"nick":"indutny","message":"though its not really transforming","date":"2013-01-31T19:38:38.447Z","type":"message"}
{"nick":"indutny","message":"and things a bit more interesting","date":"2013-01-31T19:38:42.748Z","type":"message"}
{"nick":"isaacs","message":"yeah.","date":"2013-01-31T19:38:46.006Z","type":"message"}
{"nick":"isaacs","message":"i know","date":"2013-01-31T19:38:47.865Z","type":"message"}
{"nick":"indutny","message":"since for example","date":"2013-01-31T19:38:48.716Z","type":"message"}
{"nick":"indutny","message":"TCP data might be written to encrypted side","date":"2013-01-31T19:39:02.765Z","type":"message"}
{"nick":"indutny","message":"and immediately read from it","date":"2013-01-31T19:39:07.149Z","type":"message"}
{"nick":"indutny","message":"without producing any cleartext output","date":"2013-01-31T19:39:13.328Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-01-31T19:39:16.415Z","type":"message"}
{"nick":"indutny","message":"or getting any input","date":"2013-01-31T19:39:18.294Z","type":"message"}
{"nick":"isaacs","message":"ok, scratch that.","date":"2013-01-31T19:39:19.585Z","type":"message"}
{"nick":"indutny","message":"so it won't apply here","date":"2013-01-31T19:39:21.282Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-31T19:39:22.973Z","type":"message"}
{"nick":"indutny","message":"just wanted to make my point clear","date":"2013-01-31T19:39:27.188Z","type":"message"}
{"nick":"isaacs","message":"it's actually two separate duplexes that are just conencted at the hip","date":"2013-01-31T19:39:30.405Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2013-01-31T19:39:34.863Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-31T19:39:38.050Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: from the table you'll see that it'll be impossible to get the js streams api as fast as v0.8 since the raw transfer is only just as fast.","date":"2013-01-31T19:39:38.969Z","type":"message"}
{"nick":"indutny","message":"my diagram is the most correct model of it","date":"2013-01-31T19:39:45.118Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: yes.","date":"2013-01-31T19:39:52.025Z","type":"message"}
{"nick":"indutny","message":"big mess inside called OpenSSL","date":"2013-01-31T19:39:53.507Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: we have to figure out why the raw bindings are slower, first.","date":"2013-01-31T19:40:08.255Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: then we can dig into the s","date":"2013-01-31T19:40:13.425Z","type":"message"}
{"nick":"isaacs","message":"*js","date":"2013-01-31T19:40:14.565Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: ok. i'll leave that one up to ya'll and keep working on _streams_readable","date":"2013-01-31T19:40:47.184Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: what are you doing in _streams_readable, exactly?","date":"2013-01-31T19:40:58.174Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: just wondering because i was going to dig into pipe() today","date":"2013-01-31T19:41:05.834Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: first thing is checking where it's deopting, switching contexts, etc.","date":"2013-01-31T19:41:55.764Z","type":"message"}
{"nick":"isaacs","message":"oh, ok","date":"2013-01-31T19:42:00.113Z","type":"message"}
{"nick":"isaacs","message":"kewl.","date":"2013-01-31T19:42:01.084Z","type":"message"}
{"nick":"isaacs","message":"that's good stuff","date":"2013-01-31T19:42:14.573Z","type":"message"}
{"nick":"TooTallNate","message":"i like trev's low-level optimizations :)","date":"2013-01-31T19:42:40.995Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: heh, thanks. for some reason I can do this for hours.","date":"2013-01-31T19:43:10.320Z","type":"message"}
{"nick":"TooTallNate","message":"well i welcome it cause it's the kind of crap i don't want to deal with :p","date":"2013-01-31T19:43:28.701Z","type":"message"}
{"nick":"indutny","message":"isaacs: https://github.com/joyent/node/commit/8916a6cf63c0 <- lgtm","date":"2013-01-31T19:43:35.185Z","type":"message"}
{"nick":"AvianFlu","date":"2013-01-31T19:54:38.060Z","type":"join"}
{"nick":"isaacs","message":"indutny: ok, i'm gonna pull that in, and we can go from there.","date":"2013-01-31T19:59:19.572Z","type":"message"}
{"nick":"isaacs","message":"indutny: if it gets ugly or something, we can work something else out","date":"2013-01-31T19:59:26.952Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u00027e1cf84\u0002 : stream: Don't signal EOF on '' or Buffer(0)  Those values, if passed to t - http://git.io/HxkdWA","date":"2013-01-31T19:59:47.962Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: I swear I remember piscisaureus_ talking about an issue returning Buffer(0) because something like data_ would just point to null.","date":"2013-01-31T20:02:09.773Z","type":"message"}
{"nick":"trevnorris","message":"and v8 would throw a fit about it when doing a specific operation.","date":"2013-01-31T20:02:41.766Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: nah, it's fine","date":"2013-01-31T20:03:17.850Z","type":"message"}
{"nick":"isaacs","message":"> b = new Buffer(0); [b.length, b[0], b.toString(), Array.prototype.slice.call(b)]","date":"2013-01-31T20:03:18.220Z","type":"message"}
{"nick":"isaacs","message":"[ 0, undefined, '', [] ]","date":"2013-01-31T20:03:21.380Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: maybe SlowBuffer(0)?","date":"2013-01-31T20:03:28.750Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: yeah. maybe that was it.","date":"2013-01-31T20:03:35.760Z","type":"message"}
{"nick":"isaacs","message":"> b = new buffer.SlowBuffer(0); [b.length, b[0], b.toString(), Array.prototype.slice.call(b)]","date":"2013-01-31T20:04:18.269Z","type":"message"}
{"nick":"isaacs","message":"[ 0, undefined, '', [] ]","date":"2013-01-31T20:04:21.289Z","type":"message"}
{"nick":"isaacs","message":"nah, that's fine, too","date":"2013-01-31T20:04:23.819Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: ah, it was bnoordhuis (http://logs.nodejs.org/libuv/2013-01-15)","date":"2013-01-31T20:06:24.795Z","type":"message"}
{"nick":"trevnorris","message":"search for 'Buffer(0)'","date":"2013-01-31T20:06:30.099Z","type":"message"}
{"nick":"cucucu","reason":"Quit: Page closed","date":"2013-01-31T20:06:55.811Z","type":"quit"}
{"nick":"isaacs","message":"ah.  well that's weird.","date":"2013-01-31T20:08:10.826Z","type":"message"}
{"nick":"isaacs","message":"if new Buffer(0) is a problem, then it's a problem.","date":"2013-01-31T20:08:41.786Z","type":"message"}
{"nick":"isaacs","message":"ie, a problem we need to fix, not just avoid by not using it","date":"2013-01-31T20:08:51.576Z","type":"message"}
{"nick":"isaacs","message":"people creaet empty buffers sometimes","date":"2013-01-31T20:08:57.596Z","type":"message"}
{"nick":"isaacs","message":"indutny: fwiw, \"\" is treated teh same way as Buffer(0)","date":"2013-01-31T20:09:08.136Z","type":"message"}
{"nick":"indutny","message":"huh?","date":"2013-01-31T20:09:48.187Z","type":"message"}
{"nick":"mikeal","date":"2013-01-31T20:10:07.243Z","type":"join"}
{"nick":"isaacs","message":"indutny: if returning Buffer(0) in the crypto stream makes bad happen, you can use an empty string, it's the same.","date":"2013-01-31T20:10:11.645Z","type":"message"}
{"nick":"isaacs","message":"indutny: (see my conv with trevnorris right above this)","date":"2013-01-31T20:10:27.496Z","type":"message"}
{"nick":"TooTallNate","message":"i don't get what Buffer(0) has to do with crypto","date":"2013-01-31T20:10:44.426Z","type":"message"}
{"nick":"isaacs","action":"away for the insertion of food into mouth","date":"2013-01-31T20:10:47.905Z","type":"action"}
{"nick":"isaacs","message":"TooTallNate: the CryptoStream classes will use that for \"no data right now, but maybe try again later\"","date":"2013-01-31T20:11:01.685Z","type":"message"}
{"nick":"isaacs","message":"oh, shit, there's a problem with that patch.","date":"2013-01-31T20:11:10.426Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: just saw a mention of returning a zero buffer, and remembered a conversation bnoordhuis and indutny had a while back","date":"2013-01-31T20:11:12.835Z","type":"message"}
{"nick":"isaacs","message":"you could have a decoder return a 0-length string...","date":"2013-01-31T20:11:20.324Z","type":"message"}
{"nick":"isaacs","message":"but i guess that was a problem before, also.","date":"2013-01-31T20:11:24.914Z","type":"message"}
{"nick":"isaacs","message":"oh well, lunch time","date":"2013-01-31T20:11:40.204Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: wouldn't you just not call the _read's callback function until you had more data?","date":"2013-01-31T20:12:13.003Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: scroll up.  you don't know when to ask for more data.","date":"2013-01-31T20:12:28.234Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: so you're actually not reading right now","date":"2013-01-31T20:12:36.093Z","type":"message"}
{"nick":"isaacs","message":"and you need a future read() call to trigger a _read","date":"2013-01-31T20:12:53.763Z","type":"message"}
{"nick":"isaacs","message":"and the actual _read is sync","date":"2013-01-31T20:13:10.473Z","type":"message"}
{"nick":"isaacs","message":"ok, srsly, gotta run","date":"2013-01-31T20:13:15.633Z","type":"message"}
{"nick":"isaacs","action":"&","date":"2013-01-31T20:13:17.103Z","type":"action"}
{"nick":"LOUDBOT","message":"HOLY CRAP WE WOULDN'T WANT PEOPLE PAYING OFF DEBT","date":"2013-01-31T20:13:17.461Z","type":"message"}
{"nick":"TooTallNate","action":"!","date":"2013-01-31T20:13:34.226Z","type":"action"}
{"nick":"LOUDBOT","message":"I HAVE BEEN ON TWITTER LESS THAN 12 HOURS AND ALREADY I HAVE HAD TO BLOCK THREE SPAMBOTS. SHAME OF YOU, TWITTER. I AM HERE TO MAKE REAL","date":"2013-01-31T20:13:34.573Z","type":"message"}
{"nick":"mikeal1","date":"2013-01-31T20:20:52.568Z","type":"join"}
{"nick":"mikeal","reason":"Read error: Connection reset by peer","date":"2013-01-31T20:20:52.698Z","type":"quit"}
{"nick":"trevnorris","message":"think there's something funky with assert.throws. the test throws a RangeError, but the test only checks for Error.","date":"2013-01-31T20:22:58.788Z","type":"message"}
{"nick":"trevnorris","message":"shouldn't that fail?","date":"2013-01-31T20:23:00.954Z","type":"message"}
{"nick":"trevnorris","message":"but if I throw an Error and expect a RangeError then it fails.","date":"2013-01-31T20:24:04.143Z","type":"message"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-01-31T20:29:39.483Z","type":"quit"}
{"nick":"mikeal1","reason":"Ping timeout: 255 seconds","date":"2013-01-31T20:29:44.413Z","type":"quit"}
{"nick":"`3rdEden","date":"2013-01-31T20:31:29.194Z","type":"join"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-01-31T20:32:22.312Z","type":"quit"}
{"nick":"bnoordhuis","message":"trevnorris: that Buffer(0) bug is already fixed","date":"2013-01-31T20:33:05.181Z","type":"message"}
{"nick":"bnoordhuis","message":"i landed a workaround in deps/v8 and the v8 people have fixed it upstream","date":"2013-01-31T20:33:20.561Z","type":"message"}
{"nick":"CoverSlide","action":"?","date":"2013-01-31T20:33:31.928Z","type":"action"}
{"nick":"LOUDBOT","message":"WE NEED A STICKY: FUCKING LRN2PORTFORWARD","date":"2013-01-31T20:33:32.249Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: cool. that's the part I couldn't remember. just remembered there was discussion on it, and wanted to make sure.","date":"2013-01-31T20:33:35.401Z","type":"message"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-31T20:38:24.828Z","type":"quit"}
{"nick":"googol","date":"2013-01-31T20:43:39.348Z","type":"join"}
{"nick":"mikeal","date":"2013-01-31T20:43:52.618Z","type":"join"}
{"nick":"pfox__","message":"bnoordhuis: don't know if you saw my comment above.. that patch broke everything on mingw32. i've already worked around in our build scripting using OS=mingw. thanks for the help.","date":"2013-01-31T20:44:23.179Z","type":"message"}
{"nick":"bnoordhuis","message":"pfox__: yeah, i saw. already killed the branch :)","date":"2013-01-31T20:44:42.471Z","type":"message"}
{"nick":"bnoordhuis","message":"thanks for trying it","date":"2013-01-31T20:44:49.352Z","type":"message"}
{"nick":"pfox__","message":"np","date":"2013-01-31T20:44:58.867Z","type":"message"}
{"nick":"stagas_","date":"2013-01-31T20:48:51.286Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 244 seconds","date":"2013-01-31T20:50:02.278Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-01-31T20:50:16.842Z","type":"nick"}
{"nick":"EhevuTov","date":"2013-01-31T20:51:50.595Z","type":"join"}
{"nick":"stagas_","date":"2013-01-31T21:02:31.940Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 264 seconds","date":"2013-01-31T21:05:30.195Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-01-31T21:05:41.225Z","type":"nick"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-01-31T21:11:05.176Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-01-31T21:12:45.347Z","type":"quit"}
{"nick":"c4milo","date":"2013-01-31T21:13:15.065Z","type":"join"}
{"nick":"bradleymeck","reason":"Ping timeout: 245 seconds","date":"2013-01-31T21:14:36.047Z","type":"quit"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-01-31T21:15:45.188Z","type":"quit"}
{"nick":"hz","date":"2013-01-31T21:15:48.470Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 248 seconds","date":"2013-01-31T21:17:23.935Z","type":"quit"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-01-31T21:18:16.436Z","type":"quit"}
{"nick":"hz","date":"2013-01-31T21:18:19.435Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: RangeError inherits from Error","date":"2013-01-31T21:20:31.820Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: > new RangeError instanceof Error","date":"2013-01-31T21:20:47.000Z","type":"message"}
{"nick":"isaacs","message":"true","date":"2013-01-31T21:20:47.400Z","type":"message"}
{"nick":"trevnorris","message":"mother effing. forgot to use `new`","date":"2013-01-31T21:21:01.876Z","type":"message"}
{"nick":"trevnorris","message":">> RangeError instanceof Error","date":"2013-01-31T21:21:11.451Z","type":"message"}
{"nick":"trevnorris","message":"fasle","date":"2013-01-31T21:21:25.017Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: anyways. thanks","date":"2013-01-31T21:21:34.304Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: oh and bnoordhuis reminded me that he made a fix to v8, and filed a bug. is now fixed in upstream.","date":"2013-01-31T21:22:19.104Z","type":"message"}
{"nick":"trevnorris","message":"(for the SlowBuffer(0) thing)","date":"2013-01-31T21:22:28.828Z","type":"message"}
{"nick":"loladiro","date":"2013-01-31T21:24:55.541Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 245 seconds","date":"2013-01-31T21:28:46.867Z","type":"quit"}
{"nick":"hz","date":"2013-01-31T21:31:18.500Z","type":"quit"}
{"nick":"isaacs","message":"trevnorris: yeah, RangeError is a function ;)","date":"2013-01-31T21:34:10.862Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-01-31T21:34:16.570Z","type":"quit"}
{"nick":"isaacs","message":"kewl","date":"2013-01-31T21:34:21.871Z","type":"message"}
{"nick":"isaacs","message":"can someone review this? https://github.com/isaacs/node/commit/master","date":"2013-01-31T21:34:28.911Z","type":"message"}
{"nick":"isaacs","message":"basically, the zero-length-ness of a _read result must be *before* being written to the decoder, since base64 returns zero-length strings routinely","date":"2013-01-31T21:35:14.451Z","type":"message"}
{"nick":"indexzero","date":"2013-01-31T21:35:16.015Z","type":"join"}
{"nick":"hz","date":"2013-01-31T21:35:52.437Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-01-31T21:38:07.868Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: that part makes sense. and crazy amount of additional testing for it. =)","date":"2013-01-31T21:38:40.031Z","type":"message"}
{"nick":"stagas","reason":"Read error: Connection timed out","date":"2013-01-31T21:39:29.146Z","type":"quit"}
{"nick":"stagas","date":"2013-01-31T21:40:05.464Z","type":"join"}
{"nick":"CoverSlide","reason":"Remote host closed the connection","date":"2013-01-31T21:40:36.585Z","type":"quit"}
{"nick":"isaacs","message":"trevnorris: it's more of moving the code around","date":"2013-01-31T21:42:09.626Z","type":"message"}
{"nick":"isaacs","message":"than actually adding that much more stuff","date":"2013-01-31T21:42:15.226Z","type":"message"}
{"nick":"isaacs","message":"i just moved the existing test into a function so i could call them both","date":"2013-01-31T21:42:27.176Z","type":"message"}
{"nick":"isaacs","message":"landing it.","date":"2013-01-31T21:42:35.666Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u0002a6c1847\u0002 : stream: Don't stop reading on zero-length decoded output  Fixes regressio - http://git.io/pLKwcw","date":"2013-01-31T21:42:45.841Z","type":"message"}
{"nick":"EhevuTov","date":"2013-01-31T21:48:20.408Z","type":"join"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-01-31T21:54:33.006Z","type":"quit"}
{"nick":"c4milo","date":"2013-01-31T22:00:49.942Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: how is Readable push failing with a JS out of memory error? does that mean the incoming bits are being stored in the v8 heap?","date":"2013-01-31T22:03:52.008Z","type":"message"}
{"nick":"rendar","date":"2013-01-31T22:08:38.819Z","type":"quit"}
{"nick":"trevnorris","message":"and wtf. valgrind is telling me that the process memory usage doesn't grow beyond 1.8 MB. where's bnoordhuis when you need him?","date":"2013-01-31T22:10:35.335Z","type":"message"}
{"nick":"wolfeidau","date":"2013-01-31T22:17:38.285Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: Buffers aren't in the V8 heap.  it's dying with a standard OOM error.","date":"2013-01-31T22:19:44.742Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: the OS is shooting your process in the head, because it's using a buttload of memory","date":"2013-01-31T22:19:55.606Z","type":"message"}
{"nick":"isaacs","message":"ok, this push->pipe refactor is not doing anything.","date":"2013-01-31T22:20:11.502Z","type":"message"}
{"nick":"isaacs","message":"has no effect.","date":"2013-01-31T22:20:15.241Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: what exact IS a deopt?","date":"2013-01-31T22:20:24.141Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: i'm confused. after running it until it dies, v8 tells me it's gc'd 7GB memory. does that include external memory?","date":"2013-01-31T22:21:00.720Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i'm not su","date":"2013-01-31T22:21:35.348Z","type":"message"}
{"nick":"isaacs","message":"re","date":"2013-01-31T22:21:36.890Z","type":"message"}
{"nick":"trevnorris","message":"and the error msg is \"FATAL ERROR: JS Allocation failed - process out of memory\". I've only ever gotten that when the v8 heap overfills. anyways, about deopt:","date":"2013-01-31T22:22:21.022Z","type":"message"}
{"nick":"trevnorris","message":"this explains it way better than I can: http://floitsch.blogspot.com/2012/03/optimizing-for-v8-inlining.html","date":"2013-01-31T22:23:17.837Z","type":"message"}
{"nick":"isaacs","message":"oh, hahhahaha","date":"2013-01-31T22:32:09.614Z","type":"message"}
{"nick":"isaacs","message":"so..","date":"2013-01-31T22:32:11.244Z","type":"message"}
{"nick":"isaacs","message":"i've been trying to track down why net-pipe is deopting Socket.write() so often","date":"2013-01-31T22:32:23.034Z","type":"message"}
{"nick":"isaacs","message":"turns out... i'm doing a console.log","date":"2013-01-31T22:32:27.243Z","type":"message"}
{"nick":"isaacs","message":"BADERP, that writes a string.","date":"2013-01-31T22:32:32.803Z","type":"message"}
{"nick":"trevnorris","message":"heh, awesome.","date":"2013-01-31T22:33:33.471Z","type":"message"}
{"nick":"isaacs","message":"i could probably make this benchmark faster by having console.log convert to a buffer before doing process.stdout.write","date":"2013-01-31T22:34:34.882Z","type":"message"}
{"nick":"trevnorris","message":"(oh, and if you click on \"Sidebar\" in top left, the entire thing is awesome)","date":"2013-01-31T22:35:24.223Z","type":"message"}
{"nick":"trevnorris","message":"that sounds good. writing a benchmark that really hits the exact problem can be a real pain when you're checking the tiny bits.","date":"2013-01-31T22:35:58.656Z","type":"message"}
{"nick":"trevnorris","message":"he has an article on polymorphic calls in assembly. talk about micro optimizations.","date":"2013-01-31T22:36:56.679Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: think you'd also be surprised how many type checks can cause a DEOPT.","date":"2013-01-31T22:37:53.334Z","type":"message"}
{"nick":"trevnorris","message":"especially if you're expecting types of arguments in specific places, for optional arguments.","date":"2013-01-31T22:38:19.265Z","type":"message"}
{"nick":"trevnorris","message":"that's why I created: https://gist.github.com/4670377","date":"2013-01-31T22:38:40.327Z","type":"message"}
{"nick":"trevnorris","message":"(but haven't had a lot of time to work on it)","date":"2013-01-31T22:38:53.532Z","type":"message"}
{"nick":"isaacs","message":"well, that gets rid of the write deopts.","date":"2013-01-31T22:40:51.528Z","type":"message"}
{"nick":"isaacs","message":"but the benchmark doesn't improve in the slightest.","date":"2013-01-31T22:40:59.718Z","type":"message"}
{"nick":"isaacs","message":"i just had it push all the output lines into an array, and then dump at the end","date":"2013-01-31T22:41:18.348Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: yeah. next hardest thing about doing this is identifying which deopts are screwing you.","date":"2013-01-31T22:41:40.741Z","type":"message"}
{"nick":"trevnorris","message":"how often were you running console.log?","date":"2013-01-31T22:41:50.048Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: and awesome idea about the buffer/stdout thing. i'm going to convert my tests in my PR to do that.","date":"2013-01-31T22:43:18.499Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: every second","date":"2013-01-31T22:46:43.435Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: so, it looked like a lot","date":"2013-01-31T22:46:53.395Z","type":"message"}
{"nick":"isaacs","message":"most of the readable side is where the slowness is, thoguh, and that's not getting deopted","date":"2013-01-31T22:47:06.194Z","type":"message"}
{"nick":"isaacs","message":"it's just slow :)","date":"2013-01-31T22:47:09.228Z","type":"message"}
{"nick":"trevnorris","message":"heh","date":"2013-01-31T22:47:28.116Z","type":"message"}
{"nick":"trevnorris","message":"i'm looking at that now.","date":"2013-01-31T22:47:32.845Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: i'm getting a fair amount of deopts from \"process._makeCallback\", but i'll save that for another time.","date":"2013-01-31T22:51:13.027Z","type":"message"}
{"nick":"trevnorris","message":"you working on _stream_readable?","date":"2013-01-31T22:51:18.336Z","type":"message"}
{"nick":"trevnorris","message":"also, what cli options are you using to trace?","date":"2013-01-31T22:51:47.509Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: --trace_inlining and --trace_deopts","date":"2013-01-31T22:52:08.111Z","type":"message"}
{"nick":"isaacs","message":"yeah, _makeCallback gets deopted a lot","date":"2013-01-31T22:52:27.101Z","type":"message"}
{"nick":"tjfontaine","message":"isn't a bailout worse than a deopt?","date":"2013-01-31T22:52:29.211Z","type":"message"}
{"nick":"isaacs","message":"the args array is a lot of different types.","date":"2013-01-31T22:52:31.601Z","type":"message"}
{"nick":"isaacs","message":"so that kind of makes sense.","date":"2013-01-31T22:52:34.121Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: i'm not sure","date":"2013-01-31T22:52:39.074Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: also try add --trace-opt and --code-comments","date":"2013-01-31T22:52:44.666Z","type":"message"}
{"nick":"trevnorris","message":"code comments is awesome. it shows the assembly trace to why it was deopt'd","date":"2013-01-31T22:53:34.659Z","type":"message"}
{"nick":"tjfontaine","message":"lets be serious, v8 is just an awesome vm :)","date":"2013-01-31T22:54:21.588Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-31T22:54:31.637Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: yeah. I can let my micro optimization spirit fun free.","date":"2013-01-31T22:54:51.337Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: and just to make sure it wasn't a typo. you using --trace_deopts or --trace_deopt?","date":"2013-01-31T22:55:22.613Z","type":"message"}
{"nick":"isaacs","message":"--trace_deopt","date":"2013-01-31T22:55:31.579Z","type":"message"}
{"nick":"trevnorris","message":"ah, cool","date":"2013-01-31T22:55:37.024Z","type":"message"}
{"nick":"isaacs","message":"i'm gonna relocate.  bbiab","date":"2013-01-31T22:55:47.039Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: oh, and the tick-parser for --prof makes my little heart leap for joy.","date":"2013-01-31T22:57:13.295Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: then you add dtrace+ustack resulting flamegraphs and there's little reason to have slow code","date":"2013-01-31T22:58:06.851Z","type":"message"}
{"nick":"trevnorris","message":"still have to learn how to use that.","date":"2013-01-31T22:58:39.783Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis just taught me how to use valgrind w/ massif","date":"2013-01-31T22:58:53.794Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: i've seen the flame graphs. they look cool, but I have a hard time reading them.","date":"2013-01-31T23:01:11.104Z","type":"message"}
{"nick":"trevnorris","message":"can you like click on them and get additional info?","date":"2013-01-31T23:01:27.687Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: well you hover you see the function name at the top of the graph","date":"2013-01-31T23:01:44.931Z","type":"message"}
{"nick":"trevnorris","message":"ahhhh. ok","date":"2013-01-31T23:01:52.697Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: what you're seeing are the call stacks that are seen the most often","date":"2013-01-31T23:02:10.225Z","type":"message"}
{"nick":"trevnorris","message":"interesting.","date":"2013-01-31T23:02:40.325Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: you know much about valgrind?","date":"2013-01-31T23:02:46.695Z","type":"message"}
{"nick":"trevnorris","message":"getting results that I don't understand.","date":"2013-01-31T23:03:04.225Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: I've used it, not regularly, but I'll try and help","date":"2013-01-31T23:03:14.924Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: created a for loop that Readable.push continuously. doesn't wait for drain. tracing the gc, says it has cleaned up 7GB before the process crashed.","date":"2013-01-31T23:04:33.410Z","type":"message"}
{"nick":"trevnorris","message":"but valgrind only reports the process using a few MB of memory.","date":"2013-01-31T23:04:48.239Z","type":"message"}
{"nick":"wolfeidau","reason":"Read error: Connection reset by peer","date":"2013-01-31T23:06:13.690Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-01-31T23:06:28.562Z","type":"join"}
{"nick":"indutny","reason":"Ping timeout: 248 seconds","date":"2013-01-31T23:08:49.261Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-01-31T23:09:00.012Z","type":"quit"}
{"nick":"tjfontaine","message":"trevnorris: have you pastebin'd the valgrind output?","date":"2013-01-31T23:10:05.330Z","type":"message"}
{"nick":"loladiro","date":"2013-01-31T23:11:23.396Z","type":"join"}
{"nick":"brson","reason":"Remote host closed the connection","date":"2013-01-31T23:11:27.266Z","type":"quit"}
{"nick":"indutny","date":"2013-01-31T23:11:37.080Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: https://gist.github.com/4687602","date":"2013-01-31T23:13:01.947Z","type":"message"}
{"nick":"trevnorris","message":"wait... what?","date":"2013-01-31T23:13:20.810Z","type":"message"}
{"nick":"trevnorris","message":"now it's saying 3.2GB (i had just run this test with a bunch of different options, but failed to check it)","date":"2013-01-31T23:14:02.779Z","type":"message"}
{"nick":"brson","date":"2013-01-31T23:14:29.411Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: well, thanks for helping me realize my complete lack of attention to that detail. ;-)","date":"2013-01-31T23:15:47.221Z","type":"message"}
{"nick":"tjfontaine","message":":)","date":"2013-01-31T23:16:22.872Z","type":"message"}
{"nick":"mikeal","date":"2013-01-31T23:17:08.617Z","type":"join"}
{"nick":"trevnorris","message":"indutny: strange thing. if you push continuously to a Readable stream, the process will fail b/c the gc can't keep up.","date":"2013-01-31T23:17:30.251Z","type":"message"}
{"nick":"stagas_","date":"2013-01-31T23:20:12.315Z","type":"join"}
{"nick":"trevnorris","message":"indutny: or something like it. my test shows 2.5GB of buffers fill with back pressure, but the process then fails, reaching 1GB usage.","date":"2013-01-31T23:21:22.501Z","type":"message"}
{"nick":"stagas","reason":"Ping timeout: 252 seconds","date":"2013-01-31T23:21:56.140Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-01-31T23:22:07.192Z","type":"nick"}
{"nick":"trevnorris","message":"tjfontaine: so guess I accidentally passed the right option. just ran it again as a sanity check and said max usage was 1.8MB","date":"2013-01-31T23:22:09.034Z","type":"message"}
{"nick":"paddybyers","reason":"Read error: Connection reset by peer","date":"2013-01-31T23:23:32.237Z","type":"quit"}
{"nick":"googol","reason":"Ping timeout: 260 seconds","date":"2013-01-31T23:23:39.168Z","type":"quit"}
{"nick":"paddybyers","date":"2013-01-31T23:23:53.852Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-01-31T23:28:51.072Z","type":"quit"}
{"nick":"jmar777","date":"2013-01-31T23:38:51.687Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-01-31T23:38:51.852Z","type":"quit"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-01-31T23:38:52.856Z","type":"quit"}
{"nick":"hz","date":"2013-01-31T23:38:54.452Z","type":"join"}
{"nick":"trevnorris","message":"TooTallNate: how do you build w/ node-gyp using a custom build of node?","date":"2013-01-31T23:39:44.102Z","type":"message"}
{"nick":"tjfontaine","message":"--nodedir=/path/to/node","date":"2013-01-31T23:41:56.323Z","type":"message"}
{"nick":"tjfontaine","message":"don't use relative though, in my experience it isn't always happy with it","date":"2013-01-31T23:42:12.509Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: --nodedir=path/to/node","date":"2013-01-31T23:42:59.671Z","type":"message"}
{"nick":"TooTallNate","message":"where \"node\" is the node source code dir","date":"2013-01-31T23:43:13.110Z","type":"message"}
{"nick":"TooTallNate","message":"and/or git checkout","date":"2013-01-31T23:43:17.802Z","type":"message"}
{"nick":"TooTallNate","message":"oh sorry tjfontaine ","date":"2013-01-31T23:43:27.156Z","type":"message"}
{"nick":"TooTallNate","message":"i'm retarded hahah","date":"2013-01-31T23:43:30.188Z","type":"message"}
{"nick":"tjfontaine","message":"sok, I'm happy to be right :)","date":"2013-01-31T23:43:36.218Z","type":"message"}
{"nick":"TooTallNate","message":"i wasn't aware of the relative problem though","date":"2013-01-31T23:44:00.595Z","type":"message"}
{"nick":"TooTallNate","message":"i always do --nodedir=~/node","date":"2013-01-31T23:44:07.007Z","type":"message"}
{"nick":"TooTallNate","message":"which expands to absolute path","date":"2013-01-31T23:44:12.940Z","type":"message"}
{"nick":"tjfontaine","message":"ya, but I think ../ isn't as nice","date":"2013-01-31T23:44:28.339Z","type":"message"}
{"nick":"trevnorris","message":"so like: node-gyp build --nodedir=...?","date":"2013-01-31T23:45:39.741Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: ya","date":"2013-01-31T23:45:59.954Z","type":"message"}
{"nick":"trevnorris","message":"TooTallNate: tells me I have to run configure first, and when I run the same w/ configure still tells me \"gyp info using node@0.8.17\"","date":"2013-01-31T23:47:15.529Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: oh, well nodedir will build a binary *for* the version in the dir you specify","date":"2013-01-31T23:50:16.497Z","type":"message"}
{"nick":"TooTallNate","message":"trevnorris: but if you want to run node-gyp using a different node executable","date":"2013-01-31T23:50:32.753Z","type":"message"}
{"nick":"TooTallNate","message":"then you can do like \"./node `which node-gyp` rebuild\"","date":"2013-01-31T23:50:51.170Z","type":"message"}
{"nick":"TooTallNate","message":"something like that","date":"2013-01-31T23:50:53.183Z","type":"message"}
{"nick":"trevnorris","message":"oh I don't care. just thought that line meant what version of node it was building for.","date":"2013-01-31T23:50:58.439Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-01-31T23:50:59.739Z","type":"quit"}
{"nick":"trevnorris","message":"whoot! it worked. awesome.","date":"2013-01-31T23:52:04.364Z","type":"message"}
{"nick":"trevnorris","message":"thanks. was just misreading the config output.","date":"2013-01-31T23:52:33.318Z","type":"message"}
{"nick":"paddybyers","reason":"Ping timeout: 248 seconds","date":"2013-01-31T23:55:47.923Z","type":"quit"}
{"nick":"felixge","reason":"Quit: felixge","date":"2013-01-31T23:59:40.779Z","type":"quit"}
