{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-05-24T00:00:01.317Z","type":"quit"}
{"nick":"ircretary","date":"2013-05-24T00:00:08.674Z","type":"join"}
{"nick":"mordy_","message":"hrm, another question. do i need to uv_close a uv_async_t?","date":"2013-05-24T00:07:24.981Z","type":"message"}
{"nick":"bnoordhuis","message":"mordy_: yes","date":"2013-05-24T00:08:35.104Z","type":"message"}
{"nick":"bnoordhuis","message":"just make sure the other thread isn't using it anymore","date":"2013-05-24T00:08:54.195Z","type":"message"}
{"nick":"mordy_","message":"bnoordhuis: hrm, just making sure. i can use uv_async if i only want to have a function called once the event loop regains control?","date":"2013-05-24T00:10:55.187Z","type":"message"}
{"nick":"mordy_","message":"i see a lot of words abotu threads in the header","date":"2013-05-24T00:11:05.777Z","type":"message"}
{"nick":"bnoordhuis","message":"mordy_: uv_async is for when you have another thread (or maybe a signal handler) that does whatever","date":"2013-05-24T00:11:48.918Z","type":"message"}
{"nick":"bnoordhuis","message":"and you want the thread to be able to wake up the main thread from uv_run","date":"2013-05-24T00:12:25.084Z","type":"message"}
{"nick":"bnoordhuis","message":"common usage looks something like this: uv_async_init(...); pthread_create(...); uv_run(...)","date":"2013-05-24T00:13:09.752Z","type":"message"}
{"nick":"mordy_","message":"ahhh","date":"2013-05-24T00:13:15.152Z","type":"message"}
{"nick":"mordy_","message":"no, i need something more like ev_feed","date":"2013-05-24T00:13:27.615Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-05-24T00:13:48.958Z","type":"quit"}
{"nick":"bnoordhuis","message":"you want to artificially make a handle 'ready'?","date":"2013-05-24T00:13:51.854Z","type":"message"}
{"nick":"mordy_","message":"yes. more specifically, i have an error handler which needs to be invoked (this is passed into me as a callback), and i want to only invoke the callback when the user doesn't have control of the event loop","date":"2013-05-24T00:15:37.495Z","type":"message"}
{"nick":"mordy_","message":"i guess i can use prepare/check for this, but then it gets complicated","date":"2013-05-24T00:16:34.890Z","type":"message"}
{"nick":"bnoordhuis","message":"hm, not sure i'm following","date":"2013-05-24T00:17:18.283Z","type":"message"}
{"nick":"bnoordhuis","message":"you have a callback but you only want to call (have it called?) when inside uv_run?","date":"2013-05-24T00:17:52.164Z","type":"message"}
{"nick":"mordy_","message":"yes","date":"2013-05-24T00:18:00.981Z","type":"message"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-05-24T00:18:19.511Z","type":"quit"}
{"nick":"bnoordhuis","message":"when exactly should it get called? what's stopping you from calling it whenever?","date":"2013-05-24T00:18:33.108Z","type":"message"}
{"nick":"bnoordhuis","message":"(trying to understand the issue)","date":"2013-05-24T00:18:39.553Z","type":"message"}
{"nick":"mordy_","message":"bnoordhuis: the library i'm using has a distinct guarantee that its own callbacks are only invoked when the user does not have control of its event loop (i.e. it has specific wrappers for starting and stopping the event loop)...","date":"2013-05-24T00:20:57.266Z","type":"message"}
{"nick":"mordy_","message":"and basically it can't invoke its callbacks (which the user defines for it) unless the 'start' function has been called","date":"2013-05-24T00:21:22.977Z","type":"message"}
{"nick":"kazupon","date":"2013-05-24T00:21:48.265Z","type":"join"}
{"nick":"mordy_","message":"now if i call that library's callback, it might invoke the user's callback, etc. etc.","date":"2013-05-24T00:21:50.132Z","type":"message"}
{"nick":"mordy_","message":"and then nasty things can happen, for example the library freeing something from within the callback while it is still in scope in the user code","date":"2013-05-24T00:22:31.414Z","type":"message"}
{"nick":"mordy_","message":"i'm dealing with like four layers here, so i can elaborate more if needed","date":"2013-05-24T00:22:49.476Z","type":"message"}
{"nick":"bnoordhuis","message":"i... think i follow :)","date":"2013-05-24T00:23:02.571Z","type":"message"}
{"nick":"bnoordhuis","message":"you basically want to run on a fresh stack each time?","date":"2013-05-24T00:23:21.821Z","type":"message"}
{"nick":"mordy_","message":"exactly","date":"2013-05-24T00:23:26.343Z","type":"message"}
{"nick":"bnoordhuis","message":"you probably want an idle handle","date":"2013-05-24T00:23:35.738Z","type":"message"}
{"nick":"bnoordhuis","message":"that defers the action to the next tick of the event loop","date":"2013-05-24T00:23:48.715Z","type":"message"}
{"nick":"bnoordhuis","message":"with the guarantee that the loop won't block in epoll_wait/kevent/etc.","date":"2013-05-24T00:24:01.565Z","type":"message"}
{"nick":"bnoordhuis","message":"idle handle == uv_idle_t in case there's any confusion","date":"2013-05-24T00:24:57.365Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-05-24T00:26:05.125Z","type":"quit"}
{"nick":"mordy_","message":"ok, let's tryt his","date":"2013-05-24T00:26:19.064Z","type":"message"}
{"nick":"mordy_","message":"this","date":"2013-05-24T00:26:20.214Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: hey, this bug 5504","date":"2013-05-24T00:28:47.669Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: where hte EOF busy-loops","date":"2013-05-24T00:28:52.513Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: were you able to reproduce this on linux?  i can't seem to.","date":"2013-05-24T00:29:00.469Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: using the test case posted in the comments.","date":"2013-05-24T00:29:06.745Z","type":"message"}
{"nick":"st_luke","date":"2013-05-24T00:30:33.262Z","type":"join"}
{"nick":"bnoordhuis","message":"isaacs: no, it never triggers for me","date":"2013-05-24T00:32:00.465Z","type":"message"}
{"nick":"bnoordhuis","message":"but the strace log the guy posted looks legitimate","date":"2013-05-24T00:32:10.980Z","type":"message"}
{"nick":"tjfontaine","message":"do we know which kernel he's on? the default centos version?","date":"2013-05-24T00:33:28.453Z","type":"message"}
{"nick":"bnoordhuis","message":"2.6.18 iirc","date":"2013-05-24T00:33:42.384Z","type":"message"}
{"nick":"bnoordhuis","message":"but let me check that","date":"2013-05-24T00:33:49.492Z","type":"message"}
{"nick":"bnoordhuis","message":"CentOS 6.3, kernel version 2.6.32-279.14.1.el6.x86_64","date":"2013-05-24T00:34:45.047Z","type":"message"}
{"nick":"AvianFlu","date":"2013-05-24T00:34:55.440Z","type":"join"}
{"nick":"bnoordhuis","message":"that's like modern, by centos standards","date":"2013-05-24T00:35:01.992Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-05-24T00:35:06.717Z","type":"message"}
{"nick":"isaacs","message":"Linux 7527bd77-ab3e-474b-ace7-eed6053931e7 3.1.10joyent-ubuntu-10-opt #1 SMP Fri Jan 20 09:55:31 PST 2012 x86_64 GNU/Linux","date":"2013-05-24T00:35:13.170Z","type":"message"}
{"nick":"bnoordhuis","message":"btw, https://github.com/joyent/node/issues/5108#issuecomment-16960802","date":"2013-05-24T00:36:12.067Z","type":"message"}
{"nick":"bnoordhuis","message":"the fact that he hits the assertion means node doesn't close the handle","date":"2013-05-24T00:36:28.692Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-05-24T00:36:38.709Z","type":"quit"}
{"nick":"timoxley","date":"2013-05-24T00:37:54.178Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: if this is in fact a bug in Node's js layer, and not in libuv, then why the OS/kernel specificity?","date":"2013-05-24T00:41:36.100Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: that seems odd to me","date":"2013-05-24T00:41:45.077Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: i don't know, maybe it's just coincidence","date":"2013-05-24T00:42:48.418Z","type":"message"}
{"nick":"bnoordhuis","message":"at least one guy reported the same issue but on debian","date":"2013-05-24T00:43:01.015Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-05-24T00:43:04.857Z","type":"message"}
{"nick":"isaacs","message":"but i can't reproduce it on debian","date":"2013-05-24T00:43:08.768Z","type":"message"}
{"nick":"isaacs","message":"or on smartos, or osx ","date":"2013-05-24T00:43:13.122Z","type":"message"}
{"nick":"tjfontaine","message":"which could just as easily had an ancient kernel","date":"2013-05-24T00:43:14.742Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2013-05-24T00:43:17.549Z","type":"message"}
{"nick":"isaacs","message":"it sounds like a \"old linux kernel\" bug","date":"2013-05-24T00:43:26.877Z","type":"message"}
{"nick":"isaacs","message":"not necessarily a specific distro or whatever.","date":"2013-05-24T00:43:37.590Z","type":"message"}
{"nick":"bnoordhuis","message":"could be","date":"2013-05-24T00:43:56.425Z","type":"message"}
{"nick":"bnoordhuis","message":"hm, debian 6... that's also 2.6.32 iirc","date":"2013-05-24T00:44:08.725Z","type":"message"}
{"nick":"bnoordhuis","message":"still, could be coincidence - and there's that assertion that got hit","date":"2013-05-24T00:45:29.541Z","type":"message"}
{"nick":"bnoordhuis","message":"even if there is a kernel bug, there's still a bug in node as well :)","date":"2013-05-24T00:45:51.577Z","type":"message"}
{"nick":"tjfontaine","message":"well, it's certainly somethign easier to trip on older kernels","date":"2013-05-24T00:46:10.871Z","type":"message"}
{"nick":"tjfontaine","message":"I'd also be curious to know if they are tripping on bare metal or under virtualization","date":"2013-05-24T00:46:33.084Z","type":"message"}
{"nick":"bnoordhuis","message":"both, according to #5108. there are mentions of both bare metal and openvz","date":"2013-05-24T00:46:59.429Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 276 seconds","date":"2013-05-24T00:47:22.094Z","type":"quit"}
{"nick":"tjfontaine","message":"well, openvz is close enough to bare metal for this case, certainly no xen/kvm/vmware in the mix","date":"2013-05-24T00:47:26.285Z","type":"message"}
{"nick":"bnoordhuis","message":"openvz is not hardware virtualization however","date":"2013-05-24T00:47:29.251Z","type":"message"}
{"nick":"bnoordhuis","message":"it's more like lxc or solaris zones","date":"2013-05-24T00:48:02.550Z","type":"message"}
{"nick":"tjfontaine","message":"right so it's possible that such a rare bug is even harder to hit in [para]virtualization","date":"2013-05-24T00:48:50.333Z","type":"message"}
{"nick":"bnoordhuis","message":"that's quite possible, yes","date":"2013-05-24T00:49:45.366Z","type":"message"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2013-05-24T00:50:14.619Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-05-24T00:51:15.744Z","type":"join"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-05-24T00:58:48.888Z","type":"quit"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-05-24T00:59:31.875Z","type":"quit"}
{"nick":"st_luke","date":"2013-05-24T01:04:02.240Z","type":"join"}
{"nick":"bnoordhuis","reason":"Read error: Operation timed out","date":"2013-05-24T01:05:36.219Z","type":"quit"}
{"nick":"isaacs","message":"Well, this is pretty weird...","date":"2013-05-24T01:05:45.739Z","type":"message"}
{"nick":"isaacs","message":"if the server writes a really big buffer, then a node client sends it an ECONNRESET","date":"2013-05-24T01:06:04.734Z","type":"message"}
{"nick":"isaacs","message":"even if ou don't destroy from the client","date":"2013-05-24T01:06:12.254Z","type":"message"}
{"nick":"indexzero","date":"2013-05-24T01:13:56.746Z","type":"join"}
{"nick":"isaacs","message":"ircretary: tell bnoordhuis Check this out: https://github.com/joyent/node/issues/5542","date":"2013-05-24T01:15:19.879Z","type":"message"}
{"nick":"ircretary","message":"isaacs: I'll be sure to tell bnoordhuis","date":"2013-05-24T01:15:20.215Z","type":"message"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2013-05-24T01:16:07.944Z","type":"quit"}
{"nick":"skebcio","reason":"Read error: Operation timed out","date":"2013-05-24T01:21:52.593Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-24T01:22:09.333Z","type":"join"}
{"nick":"TooTallNate","reason":"Read error: Connection reset by peer","date":"2013-05-24T01:25:28.661Z","type":"quit"}
{"nick":"dap1","reason":"Quit: Leaving.","date":"2013-05-24T01:25:34.382Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-05-24T01:26:16.098Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 240 seconds","date":"2013-05-24T01:27:06.969Z","type":"quit"}
{"nick":"skebcio","date":"2013-05-24T01:31:11.890Z","type":"join"}
{"nick":"indexzero","date":"2013-05-24T01:32:54.269Z","type":"join"}
{"nick":"stagas","reason":"Remote host closed the connection","date":"2013-05-24T01:39:55.029Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-05-24T01:47:04.362Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-05-24T01:54:00.472Z","type":"join"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-05-24T01:59:30.899Z","type":"nick"}
{"nick":"piscisaureus_","reason":"Ping timeout: 264 seconds","date":"2013-05-24T01:59:55.342Z","type":"quit"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-05-24T02:09:52.889Z","type":"quit"}
{"nick":"skebcio_","date":"2013-05-24T02:12:55.384Z","type":"join"}
{"nick":"skebcio","reason":"Read error: Connection reset by peer","date":"2013-05-24T02:12:59.355Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-05-24T02:13:56.853Z","type":"join"}
{"nick":"indexzero","date":"2013-05-24T02:16:44.683Z","type":"join"}
{"nick":"dannycoates","new_nick":"dannycoates|afk","date":"2013-05-24T02:17:34.530Z","type":"nick"}
{"nick":"skebcio_","reason":"Ping timeout: 240 seconds","date":"2013-05-24T02:18:28.531Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 260 seconds","date":"2013-05-24T02:18:47.824Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-05-24T02:20:49.430Z","type":"nick"}
{"nick":"skebcio","date":"2013-05-24T02:21:44.678Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-05-24T02:21:58.964Z","type":"quit"}
{"nick":"indexzero","date":"2013-05-24T02:22:48.541Z","type":"join"}
{"nick":"dannycoates|afk","reason":"Remote host closed the connection","date":"2013-05-24T02:23:16.864Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-05-24T02:25:02.394Z","type":"nick"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-05-24T02:26:01.892Z","type":"quit"}
{"nick":"indexzero","reason":"Client Quit","date":"2013-05-24T02:26:59.095Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-05-24T02:32:41.762Z","type":"quit"}
{"nick":"amartens","date":"2013-05-24T02:33:38.977Z","type":"join"}
{"nick":"TooTallNate","date":"2013-05-24T02:33:55.104Z","type":"join"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-05-24T02:35:21.703Z","type":"nick"}
{"nick":"amartens","reason":"Ping timeout: 260 seconds","date":"2013-05-24T02:38:23.818Z","type":"quit"}
{"nick":"inolen","date":"2013-05-24T02:50:07.656Z","type":"join"}
{"nick":"loladiro","date":"2013-05-24T02:52:26.130Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-05-24T02:52:51.426Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-24T02:55:45.639Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-05-24T03:00:55.426Z","type":"quit"}
{"nick":"wmil","date":"2013-05-24T03:14:56.113Z","type":"join"}
{"nick":"loladiro","date":"2013-05-24T03:17:25.365Z","type":"join"}
{"nick":"AvianFlu","date":"2013-05-24T03:27:13.458Z","type":"join"}
{"nick":"st_luke","date":"2013-05-24T03:28:31.248Z","type":"join"}
{"nick":"amartens","date":"2013-05-24T03:33:59.265Z","type":"join"}
{"nick":"amartens","reason":"Ping timeout: 248 seconds","date":"2013-05-24T03:38:09.105Z","type":"quit"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-05-24T03:38:24.865Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-05-24T03:43:21.360Z","type":"quit"}
{"nick":"wmil","reason":"Remote host closed the connection","date":"2013-05-24T03:45:06.313Z","type":"quit"}
{"nick":"brson","date":"2013-05-24T03:47:11.656Z","type":"join"}
{"nick":"kazupon","date":"2013-05-24T03:54:58.278Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-05-24T03:55:17.575Z","type":"quit"}
{"nick":"indexzero","date":"2013-05-24T03:56:06.519Z","type":"join"}
{"nick":"wmil","date":"2013-05-24T04:11:04.283Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-05-24T04:18:55.447Z","type":"quit"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-05-24T04:20:27.839Z","type":"quit"}
{"nick":"wmil","reason":"Remote host closed the connection","date":"2013-05-24T04:22:15.350Z","type":"quit"}
{"nick":"timoxley","date":"2013-05-24T04:23:06.120Z","type":"join"}
{"nick":"indexzero","date":"2013-05-24T04:24:06.747Z","type":"join"}
{"nick":"timoxley","reason":"Read error: Connection reset by peer","date":"2013-05-24T04:24:58.423Z","type":"quit"}
{"nick":"amartens","date":"2013-05-24T04:29:51.305Z","type":"join"}
{"nick":"normanm","date":"2013-05-24T04:32:47.288Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-05-24T04:34:33.010Z","type":"quit"}
{"nick":"brson","reason":"Ping timeout: 248 seconds","date":"2013-05-24T04:36:53.620Z","type":"quit"}
{"nick":"timoxley","date":"2013-05-24T04:38:24.107Z","type":"join"}
{"nick":"brson","date":"2013-05-24T04:38:52.104Z","type":"join"}
{"nick":"benoitc","reason":"Ping timeout: 260 seconds","date":"2013-05-24T04:45:19.933Z","type":"quit"}
{"nick":"timoxley","reason":"Read error: Connection reset by peer","date":"2013-05-24T04:49:55.690Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-05-24T04:50:33.434Z","type":"quit"}
{"nick":"timoxley","date":"2013-05-24T04:52:55.284Z","type":"join"}
{"nick":"wmil","date":"2013-05-24T04:58:30.603Z","type":"join"}
{"nick":"wmil","reason":"Remote host closed the connection","date":"2013-05-24T05:00:48.042Z","type":"quit"}
{"nick":"timoxley","reason":"Read error: Connection reset by peer","date":"2013-05-24T05:03:20.069Z","type":"quit"}
{"nick":"timoxley","date":"2013-05-24T05:06:37.123Z","type":"join"}
{"nick":"indexzero","date":"2013-05-24T05:09:20.771Z","type":"join"}
{"nick":"timoxley","reason":"Read error: Connection reset by peer","date":"2013-05-24T05:11:23.047Z","type":"quit"}
{"nick":"indexzero","reason":"Client Quit","date":"2013-05-24T05:12:17.587Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-05-24T05:16:52.578Z","type":"join"}
{"nick":"timoxley","date":"2013-05-24T05:21:17.532Z","type":"join"}
{"nick":"st_luke","date":"2013-05-24T05:27:21.245Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-05-24T05:27:38.586Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-05-24T05:37:27.491Z","type":"join"}
{"nick":"TooTallNate","date":"2013-05-24T05:47:18.467Z","type":"join"}
{"nick":"TooTallNate","reason":"Client Quit","date":"2013-05-24T05:48:35.729Z","type":"quit"}
{"nick":"bajtos","date":"2013-05-24T05:53:28.232Z","type":"join"}
{"nick":"mikeal","date":"2013-05-24T05:57:35.264Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-05-24T05:57:35.714Z","type":"quit"}
{"nick":"mikeal","date":"2013-05-24T06:00:10.743Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-05-24T06:07:10.361Z","type":"quit"}
{"nick":"rendar","date":"2013-05-24T06:34:26.711Z","type":"join"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-05-24T06:59:11.127Z","type":"quit"}
{"nick":"`3rdEden","date":"2013-05-24T06:59:11.272Z","type":"join"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-05-24T07:26:31.243Z","type":"quit"}
{"nick":"juliangruber","reason":"Read error: Operation timed out","date":"2013-05-24T07:26:44.501Z","type":"quit"}
{"nick":"juliangruber","date":"2013-05-24T07:28:28.421Z","type":"join"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-05-24T07:37:09.979Z","type":"quit"}
{"nick":"loladiro","date":"2013-05-24T07:39:54.843Z","type":"join"}
{"nick":"paddybyers","date":"2013-05-24T07:40:29.124Z","type":"join"}
{"nick":"txdv","reason":"Ping timeout: 264 seconds","date":"2013-05-24T07:56:19.368Z","type":"quit"}
{"nick":"benoitc","date":"2013-05-24T08:01:38.593Z","type":"join"}
{"nick":"stagas","date":"2013-05-24T08:17:00.764Z","type":"join"}
{"nick":"dominictarr","date":"2013-05-24T08:29:53.097Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-05-24T08:47:05.181Z","type":"join"}
{"nick":"hz","date":"2013-05-24T08:47:20.296Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-05-24T08:57:36.280Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-05-24T09:04:38.728Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-05-24T09:19:21.075Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-24T09:22:48.740Z","type":"join"}
{"nick":"jez0990_","new_nick":"jez0990","date":"2013-05-24T09:24:58.805Z","type":"nick"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-05-24T09:26:38.698Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-05-24T09:31:29.768Z","type":"join"}
{"nick":"txdv","date":"2013-05-24T09:32:22.146Z","type":"join"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-05-24T10:00:13.261Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-24T10:21:39.850Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 240 seconds","date":"2013-05-24T10:29:43.259Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-24T10:40:13.764Z","type":"join"}
{"nick":"dominictarr","date":"2013-05-24T10:41:04.519Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-05-24T10:42:21.563Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-05-24T10:49:15.990Z","type":"quit"}
{"nick":"dominictarr","date":"2013-05-24T10:49:48.837Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-05-24T11:21:52.124Z","type":"quit"}
{"nick":"dominictarr","date":"2013-05-24T11:22:06.629Z","type":"join"}
{"nick":"dominictarr","reason":"Client Quit","date":"2013-05-24T11:22:06.768Z","type":"quit"}
{"nick":"stagas","reason":"Read error: Connection reset by peer","date":"2013-05-24T11:31:05.209Z","type":"quit"}
{"nick":"timoxley","date":"2013-05-24T11:40:38.177Z","type":"join"}
{"nick":"bajtos","date":"2013-05-24T12:00:50.313Z","type":"join"}
{"nick":"saghul","message":"hi! I noticed the error handling in case a stream is not bound is a bit inconsistent: on write EBADF is returned, but read_start or shutdown assert, would a PR failing gracefully be ok?","date":"2013-05-24T12:15:07.854Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis piscisaureus_ ^","date":"2013-05-24T12:15:15.895Z","type":"message"}
{"nick":"saghul","message":"(I only checked unix)","date":"2013-05-24T12:15:31.193Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: not bound? you mean not connected?","date":"2013-05-24T12:20:46.501Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis it doesn't have a fd yet, so not connected, not listening, not anything","date":"2013-05-24T12:21:17.725Z","type":"message"}
{"nick":"bnoordhuis","message":"i lean more towards making uv_write() assert in that case","date":"2013-05-24T12:22:20.974Z","type":"message"}
{"nick":"bnoordhuis","message":"because it's obviously an application bug","date":"2013-05-24T12:22:34.867Z","type":"message"}
{"nick":"saghul","message":"I know, but this means the application need to keep some state in order to give an error to the user, aborting is a bit abrupt","date":"2013-05-24T12:23:56.374Z","type":"message"}
{"nick":"saghul","message":"in pyuv I can convert errors to exceptions, but asserts kind of kill me","date":"2013-05-24T12:24:19.976Z","type":"message"}
{"nick":"bnoordhuis","message":"well, that's the idea :)","date":"2013-05-24T12:24:54.824Z","type":"message"}
{"nick":"saghul","message":"well, and what happens in release mode?","date":"2013-05-24T12:26:33.883Z","type":"message"}
{"nick":"saghul","message":"let me change the question :-) what is the policy regarding asserts in libuv? what errors should assert and which should return -1 and set the error in the loop?","date":"2013-05-24T12:28:20.874Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: runtime errors should (and do) set an error","date":"2013-05-24T12:28:44.528Z","type":"message"}
{"nick":"bnoordhuis","message":"application bugs should, in general, assert","date":"2013-05-24T12:28:55.844Z","type":"message"}
{"nick":"saghul","message":"I see. In python aborting is not usually nice, but I guess it have to live with that","date":"2013-05-24T12:31:27.441Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-05-24T12:32:45.464Z","type":"quit"}
{"nick":"bnoordhuis","message":"saghul: you can track the state and intercept the call to uv_write() in your bindings","date":"2013-05-24T12:33:03.608Z","type":"message"}
{"nick":"bnoordhuis","message":"but i'm not telling you anything you didn't already know, i bet :)","date":"2013-05-24T12:33:19.878Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis :-)","date":"2013-05-24T12:33:27.906Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: I would say in the particular case, ENOTCONN","date":"2013-05-24T12:33:38.705Z","type":"message"}
{"nick":"piscisaureus_","message":"it's a bit of *shrug* though","date":"2013-05-24T12:33:51.542Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: The problem with asserting in these cases is that you can't really offer low-level bindings for libuv if it is that zealous","date":"2013-05-24T12:34:55.953Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: because the bindings","date":"2013-05-24T12:35:15.080Z","type":"message"}
{"nick":"piscisaureus_","message":"er","date":"2013-05-24T12:35:19.012Z","type":"message"}
{"nick":"piscisaureus_","message":"because \"user\" the bindings might do stupid things but the assert error doesn","date":"2013-05-24T12:35:44.481Z","type":"message"}
{"nick":"piscisaureus_","message":"'t make sense to him/her","date":"2013-05-24T12:35:51.194Z","type":"message"}
{"nick":"txdv","message":"https://code.google.com/p/v8/source/browse/branches/3.0/src/api.cc#1294","date":"2013-05-24T12:35:58.570Z","type":"message"}
{"nick":"saghul","message":"reading the Doom 3 code review post eh ;-)","date":"2013-05-24T12:36:40.511Z","type":"message"}
{"nick":"saghul","message":"piscisaureus_ exactly!","date":"2013-05-24T12:36:44.489Z","type":"message"}
{"nick":"txdv","message":"yeah","date":"2013-05-24T12:36:59.539Z","type":"message"}
{"nick":"txdv","message":"he bashed v8 code so I found it funny","date":"2013-05-24T12:37:25.294Z","type":"message"}
{"nick":"hz","reason":"Ping timeout: 264 seconds","date":"2013-05-24T12:43:43.367Z","type":"quit"}
{"nick":"loladiro_","date":"2013-05-24T12:46:51.668Z","type":"join"}
{"nick":"loladiro","reason":"Ping timeout: 256 seconds","date":"2013-05-24T12:48:02.480Z","type":"quit"}
{"nick":"loladiro","date":"2013-05-24T12:50:15.173Z","type":"join"}
{"nick":"loladiro_","reason":"Ping timeout: 248 seconds","date":"2013-05-24T12:51:17.606Z","type":"quit"}
{"nick":"dominictarr","date":"2013-05-24T12:55:14.153Z","type":"join"}
{"nick":"timoxley","reason":"Quit: Computer has gone to sleep.","date":"2013-05-24T13:05:20.384Z","type":"quit"}
{"nick":"loladiro","reason":"Read error: Connection reset by peer","date":"2013-05-24T13:08:16.021Z","type":"quit"}
{"nick":"loladiro","date":"2013-05-24T13:09:06.617Z","type":"join"}
{"nick":"hz","date":"2013-05-24T13:09:18.884Z","type":"join"}
{"nick":"hz","reason":"Changing host","date":"2013-05-24T13:09:19.028Z","type":"quit"}
{"nick":"hz","date":"2013-05-24T13:09:19.028Z","type":"join"}
{"nick":"c4milo","date":"2013-05-24T13:11:10.937Z","type":"join"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-05-24T13:14:01.634Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-05-24T13:16:09.268Z","type":"join"}
{"nick":"pachet","date":"2013-05-24T13:30:16.753Z","type":"join"}
{"nick":"pachet","reason":"Changing host","date":"2013-05-24T13:30:16.753Z","type":"quit"}
{"nick":"pachet","date":"2013-05-24T13:30:16.753Z","type":"join"}
{"nick":"loladiro_","date":"2013-05-24T13:32:04.855Z","type":"join"}
{"nick":"loladiro","reason":"Ping timeout: 248 seconds","date":"2013-05-24T13:33:25.608Z","type":"quit"}
{"nick":"loladiro_","new_nick":"loladiro","date":"2013-05-24T13:33:25.752Z","type":"nick"}
{"nick":"hz_","date":"2013-05-24T13:40:47.671Z","type":"join"}
{"nick":"hz_","reason":"Changing host","date":"2013-05-24T13:40:47.809Z","type":"quit"}
{"nick":"hz_","date":"2013-05-24T13:40:47.809Z","type":"join"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-05-24T13:40:47.809Z","type":"quit"}
{"nick":"hz_","new_nick":"hz","date":"2013-05-24T13:40:52.609Z","type":"nick"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-05-24T13:41:01.039Z","type":"quit"}
{"nick":"kazupon","date":"2013-05-24T13:43:12.608Z","type":"join"}
{"nick":"bnoordhuis","message":"txdv: what am i looking at? or rather, what's the context?","date":"2013-05-24T13:45:26.210Z","type":"message"}
{"nick":"txdv","message":"that c++ can make your eyes bleed","date":"2013-05-24T13:45:42.837Z","type":"message"}
{"nick":"txdv","message":"that is what the author of the doom3 review said about this code","date":"2013-05-24T13:45:52.285Z","type":"message"}
{"nick":"bnoordhuis","message":"guess he's never taken a look at just about any boost code","date":"2013-05-24T13:46:30.568Z","type":"message"}
{"nick":"txdv","message":"What is the goal of boost?","date":"2013-05-24T13:47:01.256Z","type":"message"}
{"nick":"txdv","message":"creating an abstraction of everything known to humanity?","date":"2013-05-24T13:47:22.317Z","type":"message"}
{"nick":"bnoordhuis","message":"purportedly it's to make life easier for c++ programmers","date":"2013-05-24T13:48:08.748Z","type":"message"}
{"nick":"pachet","message":"the goal is to boost","date":"2013-05-24T13:48:09.144Z","type":"message"}
{"nick":"pachet","message":"all the things","date":"2013-05-24T13:48:10.658Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-05-24T13:48:49.520Z","type":"quit"}
{"nick":"loladiro_","date":"2013-05-24T13:52:12.166Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 256 seconds","date":"2013-05-24T13:53:12.507Z","type":"quit"}
{"nick":"loladiro","reason":"Ping timeout: 256 seconds","date":"2013-05-24T13:55:28.495Z","type":"quit"}
{"nick":"loladiro_","new_nick":"loladiro","date":"2013-05-24T13:55:28.858Z","type":"nick"}
{"nick":"kevinswiber","date":"2013-05-24T14:02:37.431Z","type":"join"}
{"nick":"saghul","message":"LoL http://www.cdecl.org/?utm_source=buffer&utm_medium=twitter&utm_campaign=Buffer&utm_content=buffera00a8","date":"2013-05-24T14:05:47.313Z","type":"message"}
{"nick":"loladiro_","date":"2013-05-24T14:10:40.532Z","type":"join"}
{"nick":"loladiro","reason":"Ping timeout: 276 seconds","date":"2013-05-24T14:12:04.245Z","type":"quit"}
{"nick":"loladiro_","reason":"Ping timeout: 252 seconds","date":"2013-05-24T14:17:25.521Z","type":"quit"}
{"nick":"txdv","message":"Can I cancel a connection request?","date":"2013-05-24T14:20:46.565Z","type":"message"}
{"nick":"saghul","message":"txdv IIRC no, only getaddrinfo, fs and work request are cancelable atm","date":"2013-05-24T14:29:17.147Z","type":"message"}
{"nick":"saghul","message":"*requests","date":"2013-05-24T14:29:23.398Z","type":"message"}
{"nick":"txdv","message":"so no timeout for connection?","date":"2013-05-24T14:29:50.573Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-05-24T14:31:25.237Z","type":"quit"}
{"nick":"loladiro","date":"2013-05-24T14:32:11.954Z","type":"join"}
{"nick":"loladiro","reason":"Client Quit","date":"2013-05-24T14:36:34.525Z","type":"quit"}
{"nick":"loladiro","date":"2013-05-24T14:36:53.409Z","type":"join"}
{"nick":"saghul","message":"txdv since you can't really reuse a handle once you have failed to connect you can uv_close() it on timeout and create a new one","date":"2013-05-24T14:39:11.100Z","type":"message"}
{"nick":"saghul","message":"txdv: https://groups.google.com/d/msg/libuv/MdU5m_xk3qo/xT6D3TFswWkJ","date":"2013-05-24T14:40:00.124Z","type":"message"}
{"nick":"txdv","message":"saghul: i just figured out that I can simulate blocking connect calls and stuff","date":"2013-05-24T14:43:23.156Z","type":"message"}
{"nick":"saghul","message":"by await-ing the connect callback?","date":"2013-05-24T14:44:03.795Z","type":"message"}
{"nick":"txdv","message":"running the event loop with run_once until the callback is called","date":"2013-05-24T14:44:42.998Z","type":"message"}
{"nick":"saghul","message":"aha","date":"2013-05-24T14:45:09.071Z","type":"message"}
{"nick":"loladiro_","date":"2013-05-24T14:45:47.913Z","type":"join"}
{"nick":"txdv","message":"now i am like implementing all blocking C# interfaces","date":"2013-05-24T14:46:12.686Z","type":"message"}
{"nick":"loladiro","reason":"Ping timeout: 276 seconds","date":"2013-05-24T14:46:31.222Z","type":"quit"}
{"nick":"loladiro_","new_nick":"loladiro","date":"2013-05-24T14:46:31.364Z","type":"nick"}
{"nick":"dap","date":"2013-05-24T14:50:45.950Z","type":"join"}
{"nick":"isaacs","message":"good morning","date":"2013-05-24T14:52:07.240Z","type":"message"}
{"nick":"bnoordhuis","date":"2013-05-24T14:56:12.304Z","type":"join"}
{"nick":"saghul","message":"txdv that's what I did here: https://github.com/saghul/evergreen but using coroutines to 'wait' for callbacks","date":"2013-05-24T14:58:45.753Z","type":"message"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-05-24T15:02:13.549Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-05-24T15:06:49.751Z","type":"nick"}
{"nick":"groundwater","date":"2013-05-24T15:11:27.635Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: ping","date":"2013-05-24T15:14:03.625Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: so, this \"large write reset\" thing is really weird","date":"2013-05-24T15:14:17.360Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: if the other side is going away withotu closing the connection... why?","date":"2013-05-24T15:14:24.632Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i mean, the other side is node.  i didn't call socket.destroy. so... wtf?","date":"2013-05-24T15:14:35.224Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: pong","date":"2013-05-24T15:15:19.107Z","type":"message"}
{"nick":"bnoordhuis","message":"there might be something wrong with the test","date":"2013-05-24T15:15:32.266Z","type":"message"}
{"nick":"bnoordhuis","message":"it sometimes hangs, at other times it fails with that ECONNRESET error","date":"2013-05-24T15:15:45.037Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: hanging is correct behavior.","date":"2013-05-24T15:16:29.839Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: because i've taken out the bits where i was actually doing asserts and such","date":"2013-05-24T15:16:40.548Z","type":"message"}
{"nick":"isaacs","message":"and closing the server","date":"2013-05-24T15:16:43.566Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i get ECONNRESET every time","date":"2013-05-24T15:16:59.392Z","type":"message"}
{"nick":"isaacs","message":"but i'm definitely NOT ever explicitly trying to close the socket from the client side.","date":"2013-05-24T15:17:09.964Z","type":"message"}
{"nick":"bnoordhuis","message":"on what os are you testing it?","date":"2013-05-24T15:17:10.790Z","type":"message"}
{"nick":"isaacs","message":"os x","date":"2013-05-24T15:17:12.994Z","type":"message"}
{"nick":"isaacs","message":"but same behavior on ubuntu","date":"2013-05-24T15:17:17.853Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-05-24T15:17:28.345Z","type":"quit"}
{"nick":"bnoordhuis","message":"try running it through `strace -f`","date":"2013-05-24T15:17:31.924Z","type":"message"}
{"nick":"bnoordhuis","message":"that makes it hang for me about once every 3, 4 runs","date":"2013-05-24T15:17:46.595Z","type":"message"}
{"nick":"isaacs","message":"huh","date":"2013-05-24T15:18:13.995Z","type":"message"}
{"nick":"bnoordhuis","message":"back in a bit, pizza's ready :)","date":"2013-05-24T15:18:40.354Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: so, question remains... how come the socket is getting closed?","date":"2013-05-24T15:18:43.622Z","type":"message"}
{"nick":"isaacs","message":"ah, enjoy :)","date":"2013-05-24T15:18:46.635Z","type":"message"}
{"nick":"txdv","message":"saghul: yeah, I did it with coroutines too","date":"2013-05-24T15:19:38.736Z","type":"message"}
{"nick":"txdv","message":"but","date":"2013-05-24T15:19:48.553Z","type":"message"}
{"nick":"txdv","message":"i mean you can just keep spinning the event loop while waiting for an event","date":"2013-05-24T15:19:59.260Z","type":"message"}
{"nick":"txdv","message":"it will handle all the other stuff events derived from the event loop","date":"2013-05-24T15:20:11.623Z","type":"message"}
{"nick":"txdv","message":"but will basically block the real thread until it is done","date":"2013-05-24T15:20:23.364Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: same behavior on smartos","date":"2013-05-24T15:21:32.088Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: and strace-f has no change for me.","date":"2013-05-24T15:21:37.390Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: I think this is a bug in the client, dropping the connection when it should not","date":"2013-05-24T15:21:51.156Z","type":"message"}
{"nick":"mordy_","message":"another sanity check here. none of uv's callbacks (i.e. for read, write, etc.) will ever be invoked until after control is returned to uv_run, right?","date":"2013-05-24T15:22:26.092Z","type":"message"}
{"nick":"piscisaureus_","message":"mordy_: yes","date":"2013-05-24T15:22:51.678Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-05-24T15:25:56.854Z","type":"nick"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-05-24T15:28:56.326Z","type":"quit"}
{"nick":"isaacs","message":"this is so bizarre..","date":"2013-05-24T15:31:57.897Z","type":"message"}
{"nick":"timoxley","date":"2013-05-24T15:33:07.857Z","type":"join"}
{"nick":"isaacs","message":"ohhhh.... the client socket isn't keeping the event loop open.","date":"2013-05-24T15:34:28.960Z","type":"message"}
{"nick":"isaacs","message":"well that's strange.","date":"2013-05-24T15:35:08.293Z","type":"message"}
{"nick":"isaacs","message":"BUT! the client *definitely* is in process._getActiveHandles","date":"2013-05-24T15:36:18.909Z","type":"message"}
{"nick":"travis-ci","date":"2013-05-24T15:36:20.118Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] wwwouter/node#6 (master - b09fccc : wwwouter): The build is still failing.","date":"2013-05-24T15:36:20.265Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/wwwouter/node/compare/c1ed72d5d8c1...b09fccc0cdef","date":"2013-05-24T15:36:20.265Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/wwwouter/node/builds/7466024","date":"2013-05-24T15:36:20.265Z","type":"message"}
{"nick":"travis-ci","date":"2013-05-24T15:36:20.265Z","type":"part"}
{"nick":"isaacs","message":"bnoordhuis, piscisaureus_: I don't see how this can not be a bug.","date":"2013-05-24T15:36:29.308Z","type":"message"}
{"nick":"isaacs","message":"i'll write a sipmler test for it.","date":"2013-05-24T15:36:37.477Z","type":"message"}
{"nick":"stagas","date":"2013-05-24T15:37:02.636Z","type":"join"}
{"nick":"kazupon","date":"2013-05-24T15:38:12.626Z","type":"join"}
{"nick":"txdv","reason":"Ping timeout: 252 seconds","date":"2013-05-24T15:48:26.228Z","type":"quit"}
{"nick":"isaacs","message":"https://gist.github.com/isaacs/5644453","date":"2013-05-24T15:49:58.851Z","type":"message"}
{"nick":"mikeal","date":"2013-05-24T15:54:08.421Z","type":"join"}
{"nick":"isaacs","message":"ugh, who's travis-ci is that?","date":"2013-05-24T15:56:35.320Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u00029c7078c\u0002 : Remove .travis.yml file. - http://git.io/Pmzl8g","date":"2013-05-24T15:58:17.089Z","type":"message"}
{"nick":"`3rdEden","reason":"Remote host closed the connection","date":"2013-05-24T15:58:35.011Z","type":"quit"}
