{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-08-22T00:00:01.499Z","type":"quit"}
{"nick":"trevnorris","message":"wow. 45 minutes to figure out I typed er.thrownDomain as er.domainThrown :-/","date":"2013-08-22T00:00:08.834Z","type":"message"}
{"nick":"ircretary","date":"2013-08-22T00:00:10.013Z","type":"join"}
{"nick":"tjfontaine","message":"heh","date":"2013-08-22T00:00:16.209Z","type":"message"}
{"nick":"tjfontaine","message":"whish we had a statically typed language :P","date":"2013-08-22T00:00:23.497Z","type":"message"}
{"nick":"tjfontaine","message":"https://github.com/tjfontaine/node/compare/v0.10 any problems with me pushing? just tooling changes","date":"2013-08-22T00:01:39.864Z","type":"message"}
{"nick":"tjfontaine","message":"we're close to fully automatic steps, and we'll just let jenkins do it at that point","date":"2013-08-22T00:02:08.355Z","type":"message"}
{"nick":"tjfontaine","message":"for now I still like being a human in the loop","date":"2013-08-22T00:02:42.096Z","type":"message"}
{"nick":"amartens","reason":"Quit: Leaving.","date":"2013-08-22T00:03:25.801Z","type":"quit"}
{"nick":"trevnorris","message":"anyone have a moment for a quick review? https://github.com/joyent/node/pull/6096","date":"2013-08-22T00:04:29.595Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: it is SO trippy to see @NodeJS tweeting about a release, and i didn't do it.","date":"2013-08-22T00:05:53.048Z","type":"message"}
{"nick":"isaacs","message":"every time so far, i've had this haunting \"wait a second.... did i...?  how come I don't... oh, right, tj.\"","date":"2013-08-22T00:06:18.578Z","type":"message"}
{"nick":"isaacs","message":"senility's gonna be fun.","date":"2013-08-22T00:06:33.117Z","type":"message"}
{"nick":"tjfontaine","message":"haha","date":"2013-08-22T00:07:06.738Z","type":"message"}
{"nick":"MI6","message":"\u0002node-review\u0002: #69 \u00037UNSTABLE\u000f osx-x64 (1/597) windows-x64 (8/597) windows-ia32 (8/597) centos-ia32 (2/597) centos-x64 (2/597) smartos-x64 (2/597) linux-ia32 (1/597) http://jenkins.nodejs.org/job/node-review/69/","date":"2013-08-22T00:08:13.193Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Timothy J Fontaine\u000f \u00037v0.10\u000f * \u00023f1dba1\u0002 : tools: script release steps after jenkins build (+1 more commits) - http://git.io/TnqVwA","date":"2013-08-22T00:09:27.189Z","type":"message"}
{"nick":"tjfontaine","message":"and isaacs can hate on my bash \"style\"","date":"2013-08-22T00:09:47.892Z","type":"message"}
{"nick":"tjfontaine","message":"in large part it's just your code anyway","date":"2013-08-22T00:10:08.299Z","type":"message"}
{"nick":"bradleymeck","date":"2013-08-22T00:10:51.390Z","type":"join"}
{"nick":"isaacs","message":"tjfontaine: hahah, bash has no style, we all know that :)","date":"2013-08-22T00:12:05.703Z","type":"message"}
{"nick":"tjfontaine","message":"too true :)","date":"2013-08-22T00:12:32.749Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: minor nit: it should be using either the node user or the root user for everything on nodejs.org, though","date":"2013-08-22T00:14:24.422Z","type":"message"}
{"nick":"trevnorris","message":"awesome. hidden functionality for all! yet another way to intercept all errors. ;)","date":"2013-08-22T00:14:32.329Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: if you are lucky, you will not be the only one doing builds forever.","date":"2013-08-22T00:14:33.842Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: that requires fixing how jenkins communicates with nodejs.org, I wasn't thrilled with the idea of it having access to node@","date":"2013-08-22T00:15:04.588Z","type":"message"}
{"nick":"isaacs","message":"ahh","date":"2013-08-22T00:15:28.592Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: it's a little different if/when we come up with a good solution for storing all the artifacts in manta","date":"2013-08-22T00:15:32.615Z","type":"message"}
{"nick":"ecr1","reason":"Quit: ecr1","date":"2013-08-22T00:15:35.974Z","type":"quit"}
{"nick":"isaacs","message":"tjfontaine: i guess that makes sense.","date":"2013-08-22T00:15:36.482Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-08-22T00:15:40.012Z","type":"message"}
{"nick":"tjfontaine","message":"so I think I know why jenkins has been happy for the past week or so","date":"2013-08-22T00:17:28.299Z","type":"message"}
{"nick":"tjfontaine","message":"at least as far as the frontend is concerned","date":"2013-08-22T00:17:36.711Z","type":"message"}
{"nick":"tjfontaine","message":"https://github.com/jenkinsci/tap-plugin/commit/9acbb140d87ce08c93bdb870056428614afe0bbe","date":"2013-08-22T00:17:51.976Z","type":"message"}
{"nick":"tjfontaine","message":"we were getting DoS'd by a robot","date":"2013-08-22T00:18:02.970Z","type":"message"}
{"nick":"tjfontaine","message":"because the tap plugin has a security exploit","date":"2013-08-22T00:18:12.382Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #1442 \u00037UNSTABLE\u000f smartos-x64 (2/597) linux-ia32 (1/597) http://jenkins.nodejs.org/job/nodejs-v0.10/1442/","date":"2013-08-22T00:18:25.294Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-08-22T00:19:26.752Z","type":"quit"}
{"nick":"leonvv","reason":"Remote host closed the connection","date":"2013-08-22T00:20:27.701Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-08-22T00:20:55.394Z","type":"quit"}
{"nick":"isaacs","message":"tjfontaine: whoa, what?","date":"2013-08-22T00:23:23.157Z","type":"message"}
{"nick":"isaacs","message":"srsly?","date":"2013-08-22T00:23:24.566Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: I haven't confirmed with the author, but that's what it seems like","date":"2013-08-22T00:25:11.770Z","type":"message"}
{"nick":"isaacs","message":"wild","date":"2013-08-22T00:25:33.785Z","type":"message"}
{"nick":"trevnorris","action":"&","date":"2013-08-22T00:26:34.052Z","type":"action"}
{"nick":"LOUDBOT","message":"THE INABILITY TO COMPREHEND SIMPLE STATEMENTS WILL ALWAYS BE A BARRIER TO YOUR ACCEPTANCE IN POLITE SOCIETY","date":"2013-08-22T00:26:34.744Z","type":"message"}
{"nick":"trevnorris","message":"I know LOUDBOT, but you can deal with it.","date":"2013-08-22T00:26:51.282Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-08-22T00:30:27.162Z","type":"quit"}
{"nick":"isaacs","message":"LOUDBOT: twitlast","date":"2013-08-22T00:34:38.060Z","type":"message"}
{"nick":"LOUDBOT","message":"http://twitter.com/LOUDBOT/status/370343217616543744 (dirk_frog/##church-of-loudbot)","date":"2013-08-22T00:34:38.738Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #169 \u00037UNSTABLE\u000f windows-ia32 (9/597) windows-x64 (8/597) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/169/","date":"2013-08-22T00:35:48.601Z","type":"message"}
{"nick":"LeftWing__","date":"2013-08-22T00:36:17.511Z","type":"join"}
{"nick":"LeftWing","reason":"Remote host closed the connection","date":"2013-08-22T00:36:52.927Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #119 \u00034FAILURE\u000f windows-x64 (3/193) http://jenkins.nodejs.org/job/libuv-master-gyp/119/","date":"2013-08-22T00:37:42.632Z","type":"message"}
{"nick":"chrisdickinson","reason":"Read error: Operation timed out","date":"2013-08-22T00:37:47.754Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-08-22T00:39:26.860Z","type":"quit"}
{"nick":"chrisdickinson","date":"2013-08-22T00:39:30.478Z","type":"join"}
{"nick":"AvianFlu","date":"2013-08-22T00:39:51.119Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 264 seconds","date":"2013-08-22T00:41:02.891Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-08-22T00:41:24.914Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-08-22T00:41:52.588Z","type":"join"}
{"nick":"groundwater","reason":"Quit: groundwater","date":"2013-08-22T00:44:28.051Z","type":"quit"}
{"nick":"isaacs","message":"tjfontaine, bnoordhuis, trevnorris: If any of you care to lgtm https://github.com/isaacs/node/commit/0ad3d4b2b631226f64de56ceac459306d401a085 then I'll go ahead and land vm2","date":"2013-08-22T00:45:04.862Z","type":"message"}
{"nick":"isaacs","message":"i'm going to try to work out how best to write a test for it","date":"2013-08-22T00:45:11.933Z","type":"message"}
{"nick":"isaacs","message":"it's kind of tricky","date":"2013-08-22T00:45:14.634Z","type":"message"}
{"nick":"c4milo","date":"2013-08-22T00:46:47.468Z","type":"join"}
{"nick":"tjfontaine","message":"isaacs: your code lgtm, I defer to others on the rest of vm2","date":"2013-08-22T00:50:15.498Z","type":"message"}
{"nick":"tjfontaine","message":"to do this util.inspect change for buffers means I'll need to implement https://github.com/joyent/node/issues/5822","date":"2013-08-22T00:51:16.120Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: the test is esay until it isn't.","date":"2013-08-22T00:52:26.919Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: comes down to line-parsing.","date":"2013-08-22T00:52:32.189Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: what doesn't these days :)","date":"2013-08-22T00:52:41.225Z","type":"message"}
{"nick":"isaacs","message":"ohh... wait, i can just do vm direclty.","date":"2013-08-22T00:52:49.279Z","type":"message"}
{"nick":"TooTallNate","date":"2013-08-22T00:53:09.606Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2013-08-22T00:53:43.976Z","type":"quit"}
{"nick":"isaacs","message":"tjfontaine: ok, adding a test, and i'm pushing it onto master.","date":"2013-08-22T00:58:23.386Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033isaacs\u000f \u00037master\u000f * \u0002eef5527\u0002 : vm: Put back display_errors flag (+1 more commits) - http://git.io/c9aYlQ","date":"2013-08-22T00:59:09.002Z","type":"message"}
{"nick":"isaacs","message":"Domenic_: ^ thanks","date":"2013-08-22T00:59:19.484Z","type":"message"}
{"nick":"tjfontaine","message":"wee","date":"2013-08-22T00:59:51.769Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: do we have a problem with setting a default max bufferLength in util.format?","date":"2013-08-22T01:01:27.027Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: meh.  i think that's fine","date":"2013-08-22T01:01:40.042Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: it should probably be the default Buffer.inspect, right?","date":"2013-08-22T01:01:48.064Z","type":"message"}
{"nick":"TooTallNate","reason":"Read error: Connection reset by peer","date":"2013-08-22T01:01:55.485Z","type":"quit"}
{"nick":"isaacs","message":"tjfontaine: then users can override it however they want.","date":"2013-08-22T01:01:56.023Z","type":"message"}
{"nick":"isaacs","message":"Buffer.prototype.inspect = function() { return '<' + this.slice(0, 12).toString('hex') + '...>' }","date":"2013-08-22T01:02:23.453Z","type":"message"}
{"nick":"isaacs","message":"or something","date":"2013-08-22T01:02:26.482Z","type":"message"}
{"nick":"tjfontaine","message":"I was thinking about actually passing the options to the custom inspect (which we should anyway) and then have Buffer.prototype.inspect do the right thing with respect to it","date":"2013-08-22T01:02:33.899Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: oh, ok","date":"2013-08-22T01:03:10.792Z","type":"message"}
{"nick":"isaacs","message":"yeah, that's fine,too","date":"2013-08-22T01:03:15.712Z","type":"message"}
{"nick":"isaacs","message":"but i don't think that Buffer.inspect should have any special privileges in that options object","date":"2013-08-22T01:03:33.011Z","type":"message"}
{"nick":"isaacs","message":"ie, i don't think we should add a \"maxBufferLength\" option in util.inspect","date":"2013-08-22T01:03:49.142Z","type":"message"}
{"nick":"tjfontaine","message":"ok, I'll do them as separate things","date":"2013-08-22T01:04:02.467Z","type":"message"}
{"nick":"abraxas","date":"2013-08-22T01:04:22.532Z","type":"join"}
{"nick":"isaacs","message":"but really, you never want to see more than the first 20 bytes or so dumped out from console.log","date":"2013-08-22T01:04:26.782Z","type":"message"}
{"nick":"isaacs","message":"it's pretty uch always terrible","date":"2013-08-22T01:04:32.964Z","type":"message"}
{"nick":"tjfontaine","message":"right","date":"2013-08-22T01:04:33.535Z","type":"message"}
{"nick":"isaacs","message":"if you do want that, fine, overwrite the method","date":"2013-08-22T01:04:42.921Z","type":"message"}
{"nick":"tjfontaine","message":"should I put a require('buffer').inspectLength?","date":"2013-08-22T01:05:02.407Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #170 \u00037UNSTABLE\u000f windows-ia32 (8/597) windows-x64 (8/597) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/170/","date":"2013-08-22T01:05:11.111Z","type":"message"}
{"nick":"tjfontaine","message":"oh wait","date":"2013-08-22T01:05:27.155Z","type":"message"}
{"nick":"tjfontaine","message":"we have that already, it's not respected though","date":"2013-08-22T01:05:32.663Z","type":"message"}
{"nick":"tjfontaine","message":"weee","date":"2013-08-22T01:05:39.614Z","type":"message"}
{"nick":"tjfontaine","message":"bug fix!","date":"2013-08-22T01:05:41.164Z","type":"message"}
{"nick":"isaacs","message":"huzzah!","date":"2013-08-22T01:05:45.440Z","type":"message"}
{"nick":"_andrewclarkson","reason":"Ping timeout: 250 seconds","date":"2013-08-22T01:07:07.279Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-08-22T01:07:20.840Z","type":"nick"}
{"nick":"isaacs","message":"also, it sucks that you can't prevent printing the display line for syntax errors without disabling it for runtime errors as well","date":"2013-08-22T01:08:16.960Z","type":"message"}
{"nick":"isaacs","message":"the vm api kinda sucks","date":"2013-08-22T01:08:20.549Z","type":"message"}
{"nick":"isaacs","message":"oh well","date":"2013-08-22T01:08:21.828Z","type":"message"}
{"nick":"isaacs","message":"gotta run to dinner.  have fun :)","date":"2013-08-22T01:08:35.668Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-08-22T01:08:54.624Z","type":"quit"}
{"nick":"tjfontaine","message":"enjoy","date":"2013-08-22T01:09:23.452Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #461 \u00037UNSTABLE\u000f smartos-x64 (202/635) smartos-ia32 (108/635) osx-x64 (32/635) osx-ia32 (7/635) linux-ia32 (1/635) http://jenkins.nodejs.org/job/nodejs-master/461/","date":"2013-08-22T01:09:35.217Z","type":"message"}
{"nick":"tjfontaine","message":"err","date":"2013-08-22T01:09:49.106Z","type":"message"}
{"nick":"tjfontaine","message":"ah","date":"2013-08-22T01:10:08.268Z","type":"message"}
{"nick":"isaacs","message":"wow","date":"2013-08-22T01:10:16.567Z","type":"message"}
{"nick":"tjfontaine","message":"duplicate tests in flight","date":"2013-08-22T01:10:30.932Z","type":"message"}
{"nick":"tjfontaine","message":"*jobs","date":"2013-08-22T01:10:33.344Z","type":"message"}
{"nick":"isaacs","message":"ohh, ok","date":"2013-08-22T01:10:34.307Z","type":"message"}
{"nick":"tjfontaine","message":"https://github.com/tjfontaine/node/compare/util-fmt-buffer","date":"2013-08-22T01:18:56.360Z","type":"message"}
{"nick":"othiym23","message":"util-fat-butter","date":"2013-08-22T01:19:12.250Z","type":"message"}
{"nick":"othiym23","message":"that's the mikeal version of that patch","date":"2013-08-22T01:19:18.897Z","type":"message"}
{"nick":"tjfontaine","message":"hehe","date":"2013-08-22T01:19:59.971Z","type":"message"}
{"nick":"othiym23","message":"tjfontaine: lgtm, not that I matter","date":"2013-08-22T01:20:09.522Z","type":"message"}
{"nick":"tjfontaine","message":"you matter, just not for our policy :P","date":"2013-08-22T01:21:22.632Z","type":"message"}
{"nick":"othiym23","message":"haha","date":"2013-08-22T01:21:30.273Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-08-22T01:22:23.044Z","type":"nick"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-08-22T01:24:43.518Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-08-22T01:24:59.420Z","type":"join"}
{"nick":"tjfontaine","message":"lul https://github.com/joyent/node/pull/6097","date":"2013-08-22T01:25:05.722Z","type":"message"}
{"nick":"othiym23","message":"nice try, guy","date":"2013-08-22T01:27:11.365Z","type":"message"}
{"nick":"othiym23","action":"&","date":"2013-08-22T01:27:13.596Z","type":"action"}
{"nick":"LOUDBOT","message":"JUST USE 80 GRAPHICS CARDS FOR YOUR PROCESSOR DUH","date":"2013-08-22T01:27:14.030Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-08-22T01:29:52.650Z","type":"quit"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2013-08-22T01:44:43.758Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-08-22T01:57:07.312Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-08-22T02:31:14.488Z","type":"join"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-08-22T02:36:19.594Z","type":"nick"}
{"nick":"trevnorris","message":"isaacs: ping","date":"2013-08-22T02:36:52.055Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-08-22T02:50:41.190Z","type":"nick"}
{"nick":"MI6","message":"\u0002nodejs-master-windows\u0002: #257 \u00037UNSTABLE\u000f windows-x64 (18/635) windows-ia32 (22/635) http://jenkins.nodejs.org/job/nodejs-master-windows/257/","date":"2013-08-22T02:55:15.122Z","type":"message"}
{"nick":"mordy__","message":"hrm, rather unrelated to uv, but how does one run node under valgrind?","date":"2013-08-22T03:06:55.410Z","type":"message"}
{"nick":"mordy__","message":"seems to take about 1 minute to initialize and thereafter is extremely slow","date":"2013-08-22T03:07:06.270Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: welcome to valgrind","date":"2013-08-22T03:41:20.921Z","type":"message"}
{"nick":"mordy__","message":"it's slow for most stuff","date":"2013-08-22T03:41:37.946Z","type":"message"}
{"nick":"mordy__","message":"but itseems exceptionally slow for node","date":"2013-08-22T03:41:44.139Z","type":"message"}
{"nick":"mordy__","message":"btw are there any magic compilation options to help debug things like memory corruption?","date":"2013-08-22T03:42:18.249Z","type":"message"}
{"nick":"mordy__","message":"most things have a special option to disable internal pooling","date":"2013-08-22T03:42:36.396Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: personally after using UMEM_DEBUG I'll not likely be going back to valgrind","date":"2013-08-22T03:42:51.160Z","type":"message"}
{"nick":"mordy__","message":"hrm, what is UMEM_DEBUG","date":"2013-08-22T03:43:01.188Z","type":"message"}
{"nick":"mordy__","action":"searches","date":"2013-08-22T03:43:03.340Z","type":"action"}
{"nick":"tjfontaine","message":"http://ewaldertl.blogspot.com/2010/05/debugging-memory-problems-on-solaris.html","date":"2013-08-22T03:44:03.841Z","type":"message"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-08-22T03:44:16.109Z","type":"quit"}
{"nick":"tjfontaine","message":"there's considerably less overhead involved, and is much easier to figure out wtf is going on","date":"2013-08-22T03:44:54.156Z","type":"message"}
{"nick":"tjfontaine","message":"I'd be surprised if you could notice the overhead in most cases","date":"2013-08-22T03:45:07.523Z","type":"message"}
{"nick":"mordy__","message":"but then you'd have to use solaris","date":"2013-08-22T03:45:24.586Z","type":"message"}
{"nick":"tjfontaine","message":"which is not the case with valgrind because of how many evil things it has to do","date":"2013-08-22T03:45:25.283Z","type":"message"}
{"nick":"mordy__","message":"i once had a VM around","date":"2013-08-22T03:45:38.022Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: I use smartos, but yes illumos/sunos","date":"2013-08-22T03:45:41.457Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: it's pretty easy to spin up in the joyent public cloud :)","date":"2013-08-22T03:45:55.127Z","type":"message"}
{"nick":"mordy__","message":"trond (a coworker) uses solaris a lot.. me.. i'm happy with osx, linux and windows","date":"2013-08-22T03:46:21.905Z","type":"message"}
{"nick":"mordy__","message":"well, not \"happy\"","date":"2013-08-22T03:46:25.010Z","type":"message"}
{"nick":"mordy__","message":"but hrm","date":"2013-08-22T03:46:30.189Z","type":"message"}
{"nick":"mordy__","message":"i will look into how i can use this public cloud thingy","date":"2013-08-22T03:46:41.956Z","type":"message"}
{"nick":"tjfontaine","message":"you could also get up and into an environment to debug things using `mlogin` for manta","date":"2013-08-22T03:47:23.095Z","type":"message"}
{"nick":"tjfontaine","message":"per hour it's slightly more expensive than spinning up your own JPC instance, but it's much faster to jump into","date":"2013-08-22T03:47:56.368Z","type":"message"}
{"nick":"Apage43","date":"2013-08-22T03:48:30.497Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Timothy J Fontaine\u000f \u00037master\u000f * \u00022769d97\u0002 : buffer: adhere to INSPECT_MAX_BYTES - http://git.io/UpHtBw","date":"2013-08-22T03:52:35.746Z","type":"message"}
{"nick":"kuplatupsu","reason":"Read error: Operation timed out","date":"2013-08-22T03:55:33.088Z","type":"quit"}
{"nick":"kuplatupsu","date":"2013-08-22T03:55:40.960Z","type":"join"}
{"nick":"wolfeidau","reason":"Read error: Connection reset by peer","date":"2013-08-22T03:55:58.024Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-08-22T03:56:26.448Z","type":"join"}
{"nick":"kazupon","date":"2013-08-22T03:59:29.498Z","type":"join"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-08-22T04:03:03.950Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #462 \u00037UNSTABLE\u000f smartos-x64 (206/636) smartos-ia32 (9/636) osx-x64 (6/636) osx-ia32 (5/636) linux-ia32 (5/636) linux-x64 (5/636) http://jenkins.nodejs.org/job/nodejs-master/462/","date":"2013-08-22T04:07:41.937Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-08-22T04:10:34.431Z","type":"quit"}
{"nick":"mikeal","date":"2013-08-22T04:20:33.181Z","type":"join"}
{"nick":"kuplatupsu","reason":"Ping timeout: 246 seconds","date":"2013-08-22T04:23:34.977Z","type":"quit"}
{"nick":"mordy__","reason":"Ping timeout: 264 seconds","date":"2013-08-22T04:23:55.112Z","type":"quit"}
{"nick":"mordy__","date":"2013-08-22T04:24:08.206Z","type":"join"}
{"nick":"kuplatupsu","date":"2013-08-22T04:25:23.722Z","type":"join"}
{"nick":"c4milo","date":"2013-08-22T04:33:15.063Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-08-22T04:38:07.994Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-08-22T04:42:58.443Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-08-22T04:44:06.412Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-master-windows\u0002: #258 \u00037UNSTABLE\u000f windows-x64 (23/636) windows-ia32 (23/636) http://jenkins.nodejs.org/job/nodejs-master-windows/258/","date":"2013-08-22T04:45:42.396Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: ping","date":"2013-08-22T04:55:27.754Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-08-22T05:02:50.864Z","type":"nick"}
{"nick":"tjfontaine","message":"ircretary: tell trevnorris my inspect commit unfortunately broke test-buffer.js but I think it found a bug with StringSlice https://github.com/tjfontaine/node/compare/buffer-slice-max I should be able to try and slice more, but only get max length","date":"2013-08-22T05:05:13.689Z","type":"message"}
{"nick":"ircretary","message":"tjfontaine: I'll be sure to tell trevnorris","date":"2013-08-22T05:05:13.905Z","type":"message"}
{"nick":"AvianFlu","reason":"Ping timeout: 264 seconds","date":"2013-08-22T05:05:16.349Z","type":"quit"}
{"nick":"tjfontaine","message":"ircretary: tell trevnorris but definitely bad tj.","date":"2013-08-22T05:05:29.441Z","type":"message"}
{"nick":"ircretary","message":"tjfontaine: I'll be sure to tell trevnorris","date":"2013-08-22T05:05:29.657Z","type":"message"}
{"nick":"hueniverse","date":"2013-08-22T05:06:37.280Z","type":"join"}
{"nick":"AvianFlu","date":"2013-08-22T05:07:32.904Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: sup","date":"2013-08-22T05:11:04.286Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: i'm taking care of it.","date":"2013-08-22T05:16:46.836Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: I should have caught the issue in review. my bad.","date":"2013-08-22T05:17:28.510Z","type":"message"}
{"nick":"tjfontaine","message":"you don't like my solution?","date":"2013-08-22T05:18:21.339Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: the strictness of the check is a feature, not a bug.","date":"2013-08-22T05:22:20.503Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: it should have been: this.toString('hex', 0, max)...","date":"2013-08-22T05:22:38.901Z","type":"message"}
{"nick":"trevnorris","message":"I should have caught that in my review. sorry about that.","date":"2013-08-22T05:23:23.961Z","type":"message"}
{"nick":"tjfontaine","message":"I'm unconvinced, since you do the MIN check in other methods","date":"2013-08-22T05:23:31.185Z","type":"message"}
{"nick":"tjfontaine","message":"but whatever","date":"2013-08-22T05:23:42.551Z","type":"message"}
{"nick":"trevnorris","message":"> b.asciiSlice(0, 10);","date":"2013-08-22T05:24:26.279Z","type":"message"}
{"nick":"trevnorris","message":"RangeError: out of range index","date":"2013-08-22T05:24:30.313Z","type":"message"}
{"nick":"trevnorris","message":"all slices throw on oob","date":"2013-08-22T05:24:39.284Z","type":"message"}
{"nick":"tjfontaine","message":"ya, I don't think they should :)","date":"2013-08-22T05:24:49.478Z","type":"message"}
{"nick":"tjfontaine","message":"that's why I made the change in the macro","date":"2013-08-22T05:25:01.306Z","type":"message"}
{"nick":"trevnorris","message":"we have toString() as the friendly wrapper","date":"2013-08-22T05:25:42.198Z","type":"message"}
{"nick":"tjfontaine","message":"I will admit there's a flaw in my use of MIN and lack of full checking, but I still think it's desirable for the API to support values larger than length","date":"2013-08-22T05:27:00.913Z","type":"message"}
{"nick":"tjfontaine","message":"but I don't care strongly enough to really push the issue, it's just how I would expect things to work based on other .slice()'s in js","date":"2013-08-22T05:27:40.012Z","type":"message"}
{"nick":"trevnorris","message":"I hate that slice() was made to work like Array#slice(). and I've tried to make the other methods throw if you do","date":"2013-08-22T05:32:12.781Z","type":"message"}
{"nick":"trevnorris","message":"e.g. fill will throw if negative or over max.","date":"2013-08-22T05:32:32.860Z","type":"message"}
{"nick":"tjfontaine","message":"then it shouldn't have been named slice :)","date":"2013-08-22T05:33:01.829Z","type":"message"}
{"nick":"trevnorris","message":"hah, yeah. legacy crap I guess.","date":"2013-08-22T05:33:13.695Z","type":"message"}
{"nick":"tjfontaine","message":"it's not just Array.prototype.slice that behaves that way though, string does as well","date":"2013-08-22T05:33:18.461Z","type":"message"}
{"nick":"trevnorris","message":"yeah. the difference is, imho, that those are working within the v8 heap so they offer some protection if you try to access oob.","date":"2013-08-22T05:35:53.066Z","type":"message"}
{"nick":"trevnorris","message":"after I found a security flaw that allowed a user to pass a negative offset to slice and grab arbitrary memory i've been of the opinion that working with raw memory needs stricter standards.","date":"2013-08-22T05:35:54.284Z","type":"message"}
{"nick":"trevnorris","message":"and the user needs to know when there's been an attempt to access oob","date":"2013-08-22T05:36:24.189Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-08-22T05:37:32.530Z","type":"nick"}
{"nick":"tjfontaine","message":"\"yes\" but of course, that's not what happens with (new Buffer(1))[100] :P","date":"2013-08-22T05:37:38.808Z","type":"message"}
{"nick":"trevnorris","message":"heh.","date":"2013-08-22T05:37:59.757Z","type":"message"}
{"nick":"tjfontaine","message":"doing the right thing on .write and .read make sense, protecting against wrap arounds from negatives also make sense","date":"2013-08-22T05:38:21.020Z","type":"message"}
{"nick":"tjfontaine","message":"making a function named like an existing concept behave different, meh","date":"2013-08-22T05:38:44.097Z","type":"message"}
{"nick":"tjfontaine","message":"but also, just mho","date":"2013-08-22T05:38:59.395Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-08-22T05:39:12.962Z","type":"quit"}
{"nick":"tjfontaine","message":"like an asshole, everyone has one","date":"2013-08-22T05:39:14.082Z","type":"message"}
{"nick":"trevnorris","message":"hah","date":"2013-08-22T05:39:17.810Z","type":"message"}
{"nick":"mikeal","date":"2013-08-22T05:39:40.293Z","type":"join"}
{"nick":"trevnorris","message":"issue with (new Buffer(1))[100] = 10; is that it'll treat the buffer as an Object and allow you to place a value at that index.","date":"2013-08-22T05:39:51.272Z","type":"message"}
{"nick":"trevnorris","message":"it just won't be written to memory. and yeah. that could be confusing as hell.","date":"2013-08-22T05:40:06.808Z","type":"message"}
{"nick":"tjfontaine","message":"sure, but you said 'access', which also implies read, so by your desire it shoudl also OOB","date":"2013-08-22T05:40:30.590Z","type":"message"}
{"nick":"tjfontaine","message":"anyway, we just need to make test-buffer.js pass, so you land what you see fit :P","date":"2013-08-22T05:41:09.377Z","type":"message"}
{"nick":"tjfontaine","message":"and I'm sorry for not running the test suite, or looking at the jenkins output :)","date":"2013-08-22T05:41:37.158Z","type":"message"}
{"nick":"trevnorris","message":"eh, happens to all of us :)","date":"2013-08-22T05:41:49.266Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: also, it operates more like DataView:","date":"2013-08-22T05:43:36.997Z","type":"message"}
{"nick":"trevnorris","message":"> dv.getUint8(10);","date":"2013-08-22T05:43:41.628Z","type":"message"}
{"nick":"trevnorris","message":"> RangeError: Offset is outside the bounds of the DataView","date":"2013-08-22T05:43:46.951Z","type":"message"}
{"nick":"trevnorris","message":"it does have the same caveat of working like an Object w/ array indexes. unfortunately not much we can do about that.","date":"2013-08-22T05:44:24.490Z","type":"message"}
{"nick":"tjfontaine","message":"but .get isn't [] :)","date":"2013-08-22T05:44:33.173Z","type":"message"}
{"nick":"tjfontaine","message":"it's just one of those things","date":"2013-08-22T05:44:48.586Z","type":"message"}
{"nick":"trevnorris","message":"basically, imho, using any instance methods to manipulate external memory in any way should always throw on oob.","date":"2013-08-22T05:45:36.906Z","type":"message"}
{"nick":"trevnorris","message":"and that's how DataView works too","date":"2013-08-22T05:45:44.137Z","type":"message"}
{"nick":"trevnorris","message":"but since we have the .slice() legacy syntax to support, that's the one fail.","date":"2013-08-22T05:46:10.419Z","type":"message"}
{"nick":"tjfontaine","message":"I agree in principle, but slicing doesn't imply mutation","date":"2013-08-22T05:46:24.106Z","type":"message"}
{"nick":"trevnorris","message":"but it does allow raw access to the memory.","date":"2013-08-22T05:47:16.086Z","type":"message"}
{"nick":"trevnorris","message":"498200b was the fix for the bug","date":"2013-08-22T05:47:31.734Z","type":"message"}
{"nick":"tjfontaine","message":"I remember, I was here","date":"2013-08-22T05:47:38.237Z","type":"message"}
{"nick":"trevnorris","message":"wow, seems like an eternity ago.","date":"2013-08-22T05:47:51.299Z","type":"message"}
{"nick":"trevnorris","message":"ok. last point I have is that any attempt to access external memory should throw oob. dataview does it with their .get*() even though it doesn't imply mutation.","date":"2013-08-22T05:49:14.724Z","type":"message"}
{"nick":"trevnorris","message":"i'll throw in the fix and we can continue the discussion tomorrow. :)","date":"2013-08-22T05:49:35.439Z","type":"message"}
{"nick":"trevnorris","message":"but I really need some halo.","date":"2013-08-22T05:49:52.410Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: oh, and thanks for catching my dropping support for INSPECT_MAX_BYTES. don't know why I would have just removed it like that.","date":"2013-08-22T05:50:50.191Z","type":"message"}
{"nick":"tjfontaine","message":"hehe, it was funny to walk through the steps with isaacs for it, and then make a suggestion, look at the code and go: \"WTF ITS ALREADY THERE\"","date":"2013-08-22T05:52:28.118Z","type":"message"}
{"nick":"trevnorris","message":"haha. yeah, sorry for wasting your time on that.","date":"2013-08-22T05:54:36.223Z","type":"message"}
{"nick":"trevnorris","message":"makes me want to look at the commit log and see if there's some explanation why I would have just removed it all together.","date":"2013-08-22T05:54:56.863Z","type":"message"}
{"nick":"tjfontaine","message":"you probably intended to put it back, but just forgot","date":"2013-08-22T05:55:17.677Z","type":"message"}
{"nick":"tjfontaine","message":"there's a \"bug\" in the way it works on v0.10 anyway","date":"2013-08-22T05:55:36.611Z","type":"message"}
{"nick":"trevnorris","message":"oh, yeah. that was it. I had to do a massive rebase and I remember some code accidentally getting left out that was picked up in review. guess that wasn't one of them.","date":"2013-08-22T05:56:25.631Z","type":"message"}
{"nick":"tjfontaine","message":"https://gist.github.com/tjfontaine/6303645","date":"2013-08-22T05:56:44.433Z","type":"message"}
{"nick":"trevnorris","message":"heh, so it displays max bytes + 1 it looks like","date":"2013-08-22T05:57:28.087Z","type":"message"}
{"nick":"tjfontaine","message":"yes, and doesn't get the ... calculation right","date":"2013-08-22T05:57:41.358Z","type":"message"}
{"nick":"trevnorris","message":"well, guess it's not critical or anything. probably been like that for a while and noone's complained.","date":"2013-08-22T05:58:17.761Z","type":"message"}
{"nick":"tjfontaine","message":"yup","date":"2013-08-22T05:58:27.273Z","type":"message"}
{"nick":"tjfontaine","message":"it does its job, of not flooding you with a huge buffer","date":"2013-08-22T05:58:37.812Z","type":"message"}
{"nick":"tjfontaine","message":"50 bytes is arguably too much anyway :)","date":"2013-08-22T05:58:48.129Z","type":"message"}
{"nick":"trevnorris","message":"thinking about it, I should have realized there was an issue there when in repl I did a Buffer(0x3fffffff) and it crashed node while trying to create the inspect string.","date":"2013-08-22T06:00:00.432Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Trevor Norris\u000f \u00037master\u000f * \u0002fa89cf5\u0002 : buffer: fix inspect throw if slice length too long - http://git.io/QXOntg","date":"2013-08-22T06:00:26.492Z","type":"message"}
{"nick":"tjfontaine","message":"ya, ben had a similar issue which lead me to this","date":"2013-08-22T06:00:28.244Z","type":"message"}
{"nick":"tjfontaine","message":"anyway, imma sleep, have fun with halo, thanks for your time :)","date":"2013-08-22T06:01:47.934Z","type":"message"}
{"nick":"trevnorris","message":"and thank you for fixing my stuff :)","date":"2013-08-22T06:02:02.529Z","type":"message"}
{"nick":"trevnorris","message":"night","date":"2013-08-22T06:02:03.684Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #463 \u00037UNSTABLE\u000f smartos-x64 (202/636) http://jenkins.nodejs.org/job/nodejs-master/463/","date":"2013-08-22T06:09:45.626Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-08-22T06:11:48.172Z","type":"quit"}
{"nick":"bajtos","date":"2013-08-22T06:17:16.703Z","type":"join"}
{"nick":"Somebody","date":"2013-08-22T06:25:15.762Z","type":"join"}
{"nick":"julianduque","reason":"Quit: leaving","date":"2013-08-22T06:32:35.230Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-master-windows\u0002: #259 \u00037UNSTABLE\u000f windows-x64 (18/636) windows-ia32 (21/636) http://jenkins.nodejs.org/job/nodejs-master-windows/259/","date":"2013-08-22T06:36:25.958Z","type":"message"}
{"nick":"creationix","message":"What does it mean when uv_spawn says \"invalid argument\" as the error","date":"2013-08-22T06:55:05.498Z","type":"message"}
{"nick":"creationix","message":"all my values in the options struct look right","date":"2013-08-22T06:55:16.551Z","type":"message"}
{"nick":"creationix","message":"I think it's related to options.stdio_count because when I set that to 0 it runs the child process, but later segfailts for other reasons (probably my code)","date":"2013-08-22T06:55:59.688Z","type":"message"}
{"nick":"creationix","message":"but my options.stdio array has 3 items and I would like to have them hooked up","date":"2013-08-22T06:56:17.770Z","type":"message"}
{"nick":"creationix","message":"(using latest stable libuv)","date":"2013-08-22T06:56:35.710Z","type":"message"}
{"nick":"creationix","message":"looking at the node code, it sets it to the length of the container array https://github.com/joyent/node/blob/v0.10.17-release/src/process_wrap.cc#L99","date":"2013-08-22T06:58:22.657Z","type":"message"}
{"nick":"creationix","message":"here is my code https://github.com/creationix/luv/blob/master/luv_functions.c#L1087","date":"2013-08-22T06:59:12.639Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-v0.10-windows\u0002: #171 \u00037UNSTABLE\u000f windows-ia32 (8/597) windows-x64 (7/597) http://jenkins.nodejs.org/job/nodejs-v0.10-windows/171/","date":"2013-08-22T07:06:23.301Z","type":"message"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-08-22T07:09:11.116Z","type":"nick"}
{"nick":"rendar","date":"2013-08-22T07:12:30.922Z","type":"join"}
{"nick":"creationix","message":"ok, looking at the libuv source I think I see the problem","date":"2013-08-22T07:29:15.609Z","type":"message"}
{"nick":"creationix","message":"hmm, no I don't","date":"2013-08-22T07:29:33.916Z","type":"message"}
{"nick":"creationix","message":"alright, found the assert I was failing.  A more useful error message would have been nice","date":"2013-08-22T07:39:33.174Z","type":"message"}
{"nick":"creationix","message":"https://github.com/joyent/libuv/blob/master/src/unix/process.c#L201-L202","date":"2013-08-22T07:39:34.081Z","type":"message"}
{"nick":"dominictarr","date":"2013-08-22T08:02:58.650Z","type":"join"}
{"nick":"mikeal","reason":"Read error: Connection reset by peer","date":"2013-08-22T08:21:57.691Z","type":"quit"}
{"nick":"mikeal","date":"2013-08-22T08:22:14.248Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 245 seconds","date":"2013-08-22T08:31:48.164Z","type":"quit"}
{"nick":"mikeal","date":"2013-08-22T08:33:39.384Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 245 seconds","date":"2013-08-22T08:38:03.164Z","type":"quit"}
{"nick":"mikeal","date":"2013-08-22T08:40:12.192Z","type":"join"}
{"nick":"mikeal","reason":"Read error: Connection reset by peer","date":"2013-08-22T08:44:05.988Z","type":"quit"}
{"nick":"mikeal","date":"2013-08-22T08:44:24.071Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-08-22T08:46:56.460Z","type":"join"}
{"nick":"Somebody","reason":"Remote host closed the connection","date":"2013-08-22T08:47:59.200Z","type":"quit"}
{"nick":"hz","date":"2013-08-22T08:50:28.921Z","type":"join"}
{"nick":"raffiki","date":"2013-08-22T09:33:07.020Z","type":"join"}
{"nick":"bnoordhuis","message":"who set +r on #node.js?","date":"2013-08-22T09:35:06.108Z","type":"message"}
{"nick":"leonvv","date":"2013-08-22T09:53:35.244Z","type":"join"}
{"nick":"indutny","message":"hi","date":"2013-08-22T09:59:42.264Z","type":"message"}
{"nick":"rendar","reason":"Ping timeout: 264 seconds","date":"2013-08-22T10:00:50.855Z","type":"quit"}
{"nick":"bnoordhuis","message":"ho","date":"2013-08-22T10:07:02.872Z","type":"message"}
{"nick":"kazupon_","date":"2013-08-22T10:09:51.677Z","type":"join"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2013-08-22T10:10:07.448Z","type":"quit"}
{"nick":"rendar","date":"2013-08-22T10:13:30.377Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: sadly tjfontaine released v0.10 yesterday","date":"2013-08-22T10:13:56.367Z","type":"message"}
{"nick":"indutny","message":"ignoring my pursuations","date":"2013-08-22T10:14:03.349Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: morning","date":"2013-08-22T10:14:06.220Z","type":"message"}
{"nick":"indutny","message":"pursuits","date":"2013-08-22T10:14:18.238Z","type":"message"}
{"nick":"indutny","message":"oh whatever","date":"2013-08-22T10:14:36.153Z","type":"message"}
{"nick":"indutny","message":"persuasions","date":"2013-08-22T10:14:44.700Z","type":"message"}
{"nick":"trevnorris","message":"indutny: morning to you too","date":"2013-08-22T10:15:02.362Z","type":"message"}
{"nick":"indutny","message":"morning :)","date":"2013-08-22T10:15:28.795Z","type":"message"}
{"nick":"stagas","date":"2013-08-22T10:16:30.364Z","type":"join"}
{"nick":"bnoordhuis","message":"trevnorris: you're up late, trevor :)","date":"2013-08-22T10:18:22.775Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: why sadly?","date":"2013-08-22T10:18:33.540Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: yup. started on a blog post and turned into a rabbit hole.","date":"2013-08-22T10:18:58.949Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: I wanted to get fsevents into","date":"2013-08-22T10:19:49.799Z","type":"message"}
{"nick":"indutny","message":"and release with that bug fixes","date":"2013-08-22T10:19:55.935Z","type":"message"}
{"nick":"indutny","message":"s/fixes/fixed","date":"2013-08-22T10:20:00.542Z","type":"message"}
{"nick":"trevnorris","message":"oy github you dumbass. now to list repos by most forks you need to search for: stars:>1","date":"2013-08-22T10:20:22.404Z","type":"message"}
{"nick":"trevnorris","message":"oh, and we should have a party or something when we reach 25k stars on github :P","date":"2013-08-22T10:20:57.987Z","type":"message"}
{"nick":"bnoordhuis","message":"i stopped caring about that","date":"2013-08-22T10:21:42.492Z","type":"message"}
{"nick":"bnoordhuis","message":"10,000 commits however will be the party of the century","date":"2013-08-22T10:21:50.958Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, maybe just of the week","date":"2013-08-22T10:22:04.901Z","type":"message"}
{"nick":"trevnorris","message":"awesome. didn't realize node was that close. ok, sounds good to me.","date":"2013-08-22T10:22:32.093Z","type":"message"}
{"nick":"bnoordhuis","message":"indutny: i think i would've blocked that. it's a pretty big change, testing it for a few more days would be good","date":"2013-08-22T10:22:47.175Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm not a big fan of the \"if it compiles, ship it\" approach","date":"2013-08-22T10:23:19.086Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: when you have a min, have any opposition to https://github.com/joyent/node/pull/6096 ?","date":"2013-08-22T10:23:36.149Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: ook","date":"2013-08-22T10:24:01.023Z","type":"message"}
{"nick":"bnoordhuis","message":"aw, more code reviews?","date":"2013-08-22T10:24:45.851Z","type":"message"}
{"nick":"indutny","message":"wtf","date":"2013-08-22T10:25:07.083Z","type":"message"}
{"nick":"indutny","message":"you just removed all that code? :)","date":"2013-08-22T10:25:11.799Z","type":"message"}
{"nick":"trevnorris","message":"well, more like relocated it","date":"2013-08-22T10:25:40.077Z","type":"message"}
{"nick":"indutny","message":"oh, damien katz is unemployed again","date":"2013-08-22T10:25:58.682Z","type":"message"}
{"nick":"leonvv","reason":"Remote host closed the connection","date":"2013-08-22T10:29:20.798Z","type":"quit"}
{"nick":"bnoordhuis","message":"there's something i don't get about how v8 declares V8_EXPORT","date":"2013-08-22T10:33:08.853Z","type":"message"}
{"nick":"bnoordhuis","message":"it's set to __attribute((visibility(\"default\"))) only when BUILDING_V8_SHARED is set","date":"2013-08-22T10:33:29.406Z","type":"message"}
{"nick":"bnoordhuis","message":"v8 compiles with -fvisibility-hidden so how come the static library works?","date":"2013-08-22T10:33:47.803Z","type":"message"}
{"nick":"bnoordhuis","message":"err, -fvisibility=hidden","date":"2013-08-22T10:33:58.199Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm probably missing something - i just don't know what :)","date":"2013-08-22T10:34:38.547Z","type":"message"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-08-22T10:37:03.983Z","type":"quit"}
{"nick":"indutny","message":"bnoordhuis: haha :)","date":"2013-08-22T10:38:03.418Z","type":"message"}
{"nick":"hz","date":"2013-08-22T10:40:25.861Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-08-22T10:42:21.899Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #1443 \u00037UNSTABLE\u000f smartos-x64 (2/597) osx-x64 (1/597) http://jenkins.nodejs.org/job/nodejs-v0.10/1443/","date":"2013-08-22T10:45:14.419Z","type":"message"}
{"nick":"hz","date":"2013-08-22T10:49:10.011Z","type":"join"}
{"nick":"kazupon_","reason":"Remote host closed the connection","date":"2013-08-22T10:49:18.626Z","type":"quit"}
{"nick":"kazupon","date":"2013-08-22T10:51:22.533Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-08-22T10:54:53.022Z","type":"quit"}
{"nick":"hz","date":"2013-08-22T11:00:38.543Z","type":"quit"}
{"nick":"qmx","reason":"Ping timeout: 264 seconds","date":"2013-08-22T11:04:18.253Z","type":"quit"}
{"nick":"qmx","date":"2013-08-22T11:06:36.736Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: reviewed the fsevents thing","date":"2013-08-22T11:17:24.524Z","type":"message"}
{"nick":"indutny","message":"thanks","date":"2013-08-22T11:17:31.513Z","type":"message"}
{"nick":"bnoordhuis","message":"if you fix the nits, you can land it if you want","date":"2013-08-22T11:18:18.424Z","type":"message"}
{"nick":"bnoordhuis","message":"which i asssume you do :)","date":"2013-08-22T11:18:26.847Z","type":"message"}
{"nick":"trevnorris","message":"ok, almost 4:30am. probably need a couple hours of sleep.","date":"2013-08-22T11:19:44.742Z","type":"message"}
{"nick":"trevnorris","message":"night guys","date":"2013-08-22T11:19:48.397Z","type":"message"}
{"nick":"trevnorris","action":"&","date":"2013-08-22T11:20:10.146Z","type":"action"}
{"nick":"LOUDBOT","message":"WHAT KIND OF FLOUR DO YOU USE IN SAUSAGE GRAVY","date":"2013-08-22T11:20:10.708Z","type":"message"}
{"nick":"trevnorris","message":"LOUDBOT: all-purpose flour","date":"2013-08-22T11:20:28.781Z","type":"message"}
{"nick":"LOUDBOT","message":"trevnorris: BITCHES DON'T KNOW 'BOUT MY KILOCALORIES","date":"2013-08-22T11:20:29.395Z","type":"message"}
{"nick":"indutny","message":":)","date":"2013-08-22T11:21:44.465Z","type":"message"}
{"nick":"bnoordhuis","message":"sleep tight, trevor","date":"2013-08-22T11:22:47.279Z","type":"message"}
{"nick":"Denmad","reason":"Quit: ZNC - http://znc.in","date":"2013-08-22T11:41:59.736Z","type":"quit"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-08-22T11:53:46.038Z","type":"quit"}
{"nick":"bajtos","date":"2013-08-22T12:01:03.902Z","type":"join"}
{"nick":"bradleymeck","date":"2013-08-22T12:04:40.252Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Fedor Indutny\u000f \u00037master\u000f * \u0002e0f64a8\u0002 : fsevents: use shared FSEventStream - http://git.io/xYPNtg","date":"2013-08-22T12:27:05.152Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: thank you","date":"2013-08-22T12:27:13.048Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 256 seconds","date":"2013-08-22T12:30:12.831Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-08-22T12:30:48.180Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-master\u0002: #180 \u00037UNSTABLE\u000f smartos (9/192) windows (4/193) http://jenkins.nodejs.org/job/libuv-master/180/","date":"2013-08-22T12:32:57.259Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #120 \u00037UNSTABLE\u000f windows-x64 (3/193) smartos-ia32 (2/192) smartos-x64 (2/192) windows-ia32 (3/193) http://jenkins.nodejs.org/job/libuv-master-gyp/120/","date":"2013-08-22T12:33:25.255Z","type":"message"}
{"nick":"indutny","message":"ooops","date":"2013-08-22T12:35:21.340Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Fedor Indutny\u000f \u00037master\u000f * \u0002cd2794c\u0002 : fsevents: use shared FSEventStream - http://git.io/vyLY-g","date":"2013-08-22T12:35:22.282Z","type":"message"}
{"nick":"indutny","message":"fogive me ben","date":"2013-08-22T12:35:24.189Z","type":"message"}
{"nick":"abraxas","date":"2013-08-22T12:37:19.570Z","type":"join"}
{"nick":"MI6","message":"\u0002libuv-master\u0002: #181 \u00037UNSTABLE\u000f smartos (10/192) osx (1/193) windows (3/193) http://jenkins.nodejs.org/job/libuv-master/181/","date":"2013-08-22T12:41:04.400Z","type":"message"}
{"nick":"abraxas","reason":"Ping timeout: 246 seconds","date":"2013-08-22T12:41:37.999Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-node-integration\u0002: #164 \u00034FAILURE\u000f smartos-ia32 (196/636) http://jenkins.nodejs.org/job/libuv-node-integration/164/","date":"2013-08-22T12:42:56.448Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-master-gyp\u0002: #121 \u00037UNSTABLE\u000f windows-x64 (3/193) smartos-ia32 (4/192) smartos-x64 (2/192) windows-ia32 (4/193) http://jenkins.nodejs.org/job/libuv-master-gyp/121/","date":"2013-08-22T12:44:54.523Z","type":"message"}
{"nick":"AvianFlu","date":"2013-08-22T12:57:32.373Z","type":"join"}
{"nick":"MI6","message":"\u0002libuv-node-integration\u0002: #165 \u00037UNSTABLE\u000f smartos-ia32 (196/636) smartos-x64 (9/636) http://jenkins.nodejs.org/job/libuv-node-integration/165/","date":"2013-08-22T13:05:00.890Z","type":"message"}
{"nick":"rendar","reason":"Ping timeout: 240 seconds","date":"2013-08-22T13:24:38.646Z","type":"quit"}
{"nick":"piscisaureus_","date":"2013-08-22T13:28:08.803Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-08-22T13:29:16.229Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: hey","date":"2013-08-22T13:31:57.855Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: ho","date":"2013-08-22T13:32:16.027Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: after you did the errno refactor, did you decide to pass around windows error codes internally","date":"2013-08-22T13:32:17.384Z","type":"message"}
{"nick":"piscisaureus_","message":"(and translate at the edges?)","date":"2013-08-22T13:32:22.879Z","type":"message"}
{"nick":"piscisaureus_","message":"or pass around uv error codes?","date":"2013-08-22T13:32:28.381Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: almost exclusively the former","date":"2013-08-22T13:32:39.463Z","type":"message"}
{"nick":"c4milo","date":"2013-08-22T13:32:41.653Z","type":"join"}
{"nick":"bnoordhuis","message":"there were a few places where that turned out to be inconvenient","date":"2013-08-22T13:32:53.282Z","type":"message"}
{"nick":"piscisaureus_","message":"hm right","date":"2013-08-22T13:32:59.593Z","type":"message"}
{"nick":"bnoordhuis","message":"but almost everywhere windows error codes are used internally","date":"2013-08-22T13:33:03.078Z","type":"message"}
{"nick":"piscisaureus_","message":"I'm fixing a bug in process.h and I get the feeling that it is completely botched at the moment ...","date":"2013-08-22T13:33:20.285Z","type":"message"}
{"nick":"piscisaureus_","message":"er, process.c","date":"2013-08-22T13:33:23.507Z","type":"message"}
{"nick":"bnoordhuis","message":"what is?","date":"2013-08-22T13:33:30.492Z","type":"message"}
{"nick":"piscisaureus_","message":"well, right now uv_spawn on windows will return a windows error code about half the cases","date":"2013-08-22T13:33:58.364Z","type":"message"}
{"nick":"piscisaureus_","message":"and an uv error code the other half of the cases","date":"2013-08-22T13:34:06.855Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-08-22T13:34:28.600Z","type":"quit"}
{"nick":"piscisaureus_","message":"so I did a crappy job reviewing, apparently","date":"2013-08-22T13:34:30.121Z","type":"message"}
{"nick":"bnoordhuis","message":":)","date":"2013-08-22T13:34:35.787Z","type":"message"}
{"nick":"piscisaureus_","message":"and some other guy did a crappy patch L)","date":"2013-08-22T13:34:46.559Z","type":"message"}
{"nick":"bnoordhuis","message":"at least you can do a good job fixing it","date":"2013-08-22T13:34:56.108Z","type":"message"}
{"nick":"c4milo","date":"2013-08-22T13:35:09.830Z","type":"join"}
{"nick":"piscisaureus_","message":"I'm considering to abuse the c type system and some sed magic to find all the bugs","date":"2013-08-22T13:35:34.843Z","type":"message"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-08-22T13:37:05.784Z","type":"quit"}
{"nick":"bnoordhuis","message":"warning: conversion to '__uint16_t' from 'int' may alter its value [-Wconversion] <- i'm not sure that's a useful warning, gcc...","date":"2013-08-22T13:38:01.096Z","type":"message"}
{"nick":"bnoordhuis","message":"it's true when int is 16 bits","date":"2013-08-22T13:38:18.940Z","type":"message"}
{"nick":"bnoordhuis","message":"but it's not like gcc runs on 16 bits architectures","date":"2013-08-22T13:38:49.113Z","type":"message"}
{"nick":"bnoordhuis","message":"or libuv","date":"2013-08-22T13:38:50.663Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: well - maybe just temporary","date":"2013-08-22T13:40:59.133Z","type":"message"}
{"nick":"piscisaureus_","message":"struct winerr { DWORD e }","date":"2013-08-22T13:41:07.574Z","type":"message"}
{"nick":"piscisaureus_","message":"inline xwinerr XGetLastError() {","date":"2013-08-22T13:41:15.615Z","type":"message"}
{"nick":"piscisaureus_","message":"  xwinerr r;","date":"2013-08-22T13:41:15.828Z","type":"message"}
{"nick":"piscisaureus_","message":"  r.e = GetLastError();","date":"2013-08-22T13:41:15.828Z","type":"message"}
{"nick":"piscisaureus_","message":"  return r;","date":"2013-08-22T13:41:15.828Z","type":"message"}
{"nick":"piscisaureus_","message":"and then some sed crap","date":"2013-08-22T13:41:23.541Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: also, uv_translate_sys_error should probably assert() when you pass in an uv error","date":"2013-08-22T13:45:47.404Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: sure","date":"2013-08-22T13:46:38.086Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: also: uv_dlopen -> returns -1 on failure, or an error value?","date":"2013-08-22T13:53:19.042Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: -1 currently. dlopen() itself doesn't really return an error","date":"2013-08-22T13:54:25.340Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll probably change that to UV_ENOENT or something","date":"2013-08-22T13:54:47.511Z","type":"message"}
{"nick":"kellabyte","date":"2013-08-22T13:57:24.703Z","type":"join"}
{"nick":"kellabyte","reason":"Changing host","date":"2013-08-22T13:57:30.752Z","type":"quit"}
{"nick":"kellabyte","date":"2013-08-22T13:57:30.962Z","type":"join"}
{"nick":"kellabyte","reason":"Changing host","date":"2013-08-22T13:57:30.962Z","type":"quit"}
{"nick":"kellabyte","date":"2013-08-22T13:57:30.962Z","type":"join"}
{"nick":"jmar777","date":"2013-08-22T14:27:10.032Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: running tests","date":"2013-08-22T14:28:46.921Z","type":"message"}
{"nick":"indutny","message":"with backported libuv features","date":"2013-08-22T14:28:52.608Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-08-22T14:29:39.481Z","type":"quit"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-08-22T14:32:59.925Z","type":"quit"}
{"nick":"mikeal","date":"2013-08-22T14:34:16.888Z","type":"join"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-08-22T14:39:30.053Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-08-22T14:39:39.999Z","type":"quit"}
{"nick":"jmar777","date":"2013-08-22T14:39:48.627Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Fedor Indutny\u000f \u00037v0.10\u000f * \u0002684e212\u0002 : fsevents: use shared FSEventStream (+2 more commits) - http://git.io/ZU4IlA","date":"2013-08-22T14:41:05.518Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: mind me updating libuv in node.js v0.10?","date":"2013-08-22T14:41:48.784Z","type":"message"}
{"nick":"indutny","message":"ah, that's not how it work now","date":"2013-08-22T14:42:01.277Z","type":"message"}
{"nick":"indutny","message":"we need to do a libuv release first","date":"2013-08-22T14:42:07.303Z","type":"message"}
{"nick":"indutny","message":"bnoordhuis: who is responsible for this?","date":"2013-08-22T14:42:20.733Z","type":"message"}
{"nick":"tjfontaine","message":"I can do it","date":"2013-08-22T14:45:03.485Z","type":"message"}
{"nick":"indutny","message":"good","date":"2013-08-22T14:45:12.439Z","type":"message"}
{"nick":"indutny","message":"tjfontaine: please ;)","date":"2013-08-22T14:45:15.884Z","type":"message"}
{"nick":"tjfontaine","message":"do you mind if it happens in a couple hours after I get to work? :)","date":"2013-08-22T14:45:41.080Z","type":"message"}
{"nick":"hz","date":"2013-08-22T14:46:05.308Z","type":"join"}
{"nick":"AvianFlu","date":"2013-08-22T14:46:22.754Z","type":"join"}
{"nick":"MI6","message":"\u0002libuv-v0.10-gyp\u0002: #72 \u00037UNSTABLE\u000f windows-x64 (5/188) windows-ia32 (3/188) smartos-x64 (2/187) smartos-ia32 (2/187) http://jenkins.nodejs.org/job/libuv-v0.10-gyp/72/","date":"2013-08-22T14:46:48.693Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-v0.10\u0002: #108 \u00037UNSTABLE\u000f smartos (2/187) windows (4/188) http://jenkins.nodejs.org/job/libuv-v0.10/108/","date":"2013-08-22T14:46:53.693Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-node-integration\u0002: #166 \u00037UNSTABLE\u000f linux-ia32 (2/597) smartos-x64 (2/597) http://jenkins.nodejs.org/job/libuv-node-integration/166/","date":"2013-08-22T14:58:07.921Z","type":"message"}
{"nick":"indutny","message":"tjfontaine: sure","date":"2013-08-22T15:10:36.515Z","type":"message"}
{"nick":"indutny","message":"np","date":"2013-08-22T15:10:37.123Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #464 \u00037UNSTABLE\u000f smartos-x64 (202/636) smartos-ia32 (2/636) osx-ia32 (1/636) linux-ia32 (1/636) http://jenkins.nodejs.org/job/nodejs-master/464/","date":"2013-08-22T15:17:18.215Z","type":"message"}
{"nick":"mordy__","message":"hrm.. now i'm trying to figure out if there's a handle leak somewhere in my extension","date":"2013-08-22T15:18:54.134Z","type":"message"}
{"nick":"mordy__","message":"does v8 have a magic option to disable its own heap so stuff can show up in valgrind?","date":"2013-08-22T15:19:28.491Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 240 seconds","date":"2013-08-22T15:21:26.539Z","type":"quit"}
{"nick":"indutny","message":"mordy__: own heap? :)","date":"2013-08-22T15:24:23.154Z","type":"message"}
{"nick":"indutny","message":"you must be kidding","date":"2013-08-22T15:24:31.899Z","type":"message"}
{"nick":"indutny","message":"handle leak could it happen if you'll create a lot of handles in a single handlescope","date":"2013-08-22T15:24:56.560Z","type":"message"}
{"nick":"indutny","message":"and it'll eat all memory and cpu","date":"2013-08-22T15:25:10.239Z","type":"message"}
{"nick":"indutny","message":"but I suspect you're talking about different thing","date":"2013-08-22T15:25:18.027Z","type":"message"}
{"nick":"indutny","message":"mordy__: what's happening?","date":"2013-08-22T15:25:22.754Z","type":"message"}
{"nick":"mordy__","message":"hrm, i'm not sure i'm creating that many handles -- i'd expect it all to be freed once the HandleScope goes out of exit","date":"2013-08-22T15:25:56.123Z","type":"message"}
{"nick":"mordy__","message":"memory is just growing and growing and growing for each iteration","date":"2013-08-22T15:26:08.276Z","type":"message"}
{"nick":"mordy__","message":"v8's handle system still has me confused","date":"2013-08-22T15:27:07.539Z","type":"message"}
{"nick":"mordy__","message":"i'm more familiar with something like foo = get_foo(...); decref(foo);","date":"2013-08-22T15:27:35.654Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 245 seconds","date":"2013-08-22T15:28:20.149Z","type":"quit"}
{"nick":"indutny","message":"mordy__: does handlescope closes?","date":"2013-08-22T15:28:44.217Z","type":"message"}
{"nick":"indutny","message":"i.e. are you allocating handles in loop?","date":"2013-08-22T15:28:49.580Z","type":"message"}
{"nick":"mordy__","message":"indutny: i'm getting handles in a loop.. i'm not explicitly calling ::New anywhere though","date":"2013-08-22T15:30:32.665Z","type":"message"}
{"nick":"mordy__","message":"and right now i have something like: HandleScope scope; for (...) { ... } ","date":"2013-08-22T15:30:50.322Z","type":"message"}
{"nick":"hz","reason":"Disconnected by services","date":"2013-08-22T15:30:56.140Z","type":"quit"}
{"nick":"mordy__","message":"or does each iteration need its own HandleScope","date":"2013-08-22T15:30:59.150Z","type":"message"}
{"nick":"hz","date":"2013-08-22T15:31:00.165Z","type":"join"}
{"nick":"mordy__","message":"the loop is short lived in any event","date":"2013-08-22T15:31:14.957Z","type":"message"}
{"nick":"mikeal","date":"2013-08-22T15:31:22.216Z","type":"join"}
{"nick":"mordy__","message":"so it's not an event loop or anything where it's the \"effective\" bottom frame","date":"2013-08-22T15:31:34.908Z","type":"message"}
{"nick":"Domenic_","reason":"Excess Flood","date":"2013-08-22T15:33:36.914Z","type":"quit"}
{"nick":"Domenic_","date":"2013-08-22T15:33:54.936Z","type":"join"}
{"nick":"indutny","message":"ah","date":"2013-08-22T15:34:05.588Z","type":"message"}
{"nick":"indutny","message":"ok","date":"2013-08-22T15:34:06.059Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-08-22T15:40:59.669Z","type":"join"}
{"nick":"mordy__","message":"hrm, the only thing that *could* leak is a Persistent handle, right?","date":"2013-08-22T15:44:23.783Z","type":"message"}
{"nick":"raffiki","reason":"Ping timeout: 264 seconds","date":"2013-08-22T15:47:19.017Z","type":"quit"}
{"nick":"mordy__","message":"    tp->payload = Persistent<Object>::New(Object::New());","date":"2013-08-22T15:48:07.804Z","type":"message"}
{"nick":"mordy__","message":"wonder if there's something wrong with that incantation","date":"2013-08-22T15:48:23.811Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-08-22T15:48:49.051Z","type":"quit"}
{"nick":"groundwater","date":"2013-08-22T15:51:40.163Z","type":"join"}
{"nick":"paulfryzel","date":"2013-08-22T15:54:35.422Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033piscisaureus\u000f created branch reviewme - http://git.io/cZi-9g","date":"2013-08-22T15:55:42.994Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- anyone wants to review that?","date":"2013-08-22T15:55:49.724Z","type":"message"}
{"nick":"rendar","date":"2013-08-22T15:57:43.312Z","type":"join"}
{"nick":"isaacs","message":"piscisaureus_: nah, i'm sure it's fine","date":"2013-08-22T16:01:29.069Z","type":"message"}
{"nick":"isaacs","message":";P","date":"2013-08-22T16:01:32.240Z","type":"message"}
{"nick":"raffiki","date":"2013-08-22T16:01:34.150Z","type":"join"}
{"nick":"piscisaureus_","message":"Ok, I'll take that as a yes","date":"2013-08-22T16:01:52.070Z","type":"message"}
{"nick":"piscisaureus_","message":"after all you're a libuv committer","date":"2013-08-22T16:01:57.262Z","type":"message"}
{"nick":"piscisaureus_","message":"let's make jankins chase it to be sure","date":"2013-08-22T16:02:13.695Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-review\u0002: #39 \u00037UNSTABLE\u000f smartos-ia32 (8/192) linux-ia32 (6/192) windows-ia32 (6/193) osx-ia32 (6/193) windows-x64 (3/193) smartos-x64 (9/192) linux-x64 (5/192) osx-x64 (3/193) http://jenkins.nodejs.org/job/libuv-review/39/","date":"2013-08-22T16:02:49.114Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: i'm only a libuv committer by virtue of being a joyent admin","date":"2013-08-22T16:03:25.949Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but, the code looks simple enough, and looks like it does what it says on teh tin","date":"2013-08-22T16:03:47.630Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: shhhh. Don't wake up the dogs.","date":"2013-08-22T16:03:53.834Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-08-22T16:04:18.193Z","type":"quit"}
{"nick":"piscisaureus_","message":":)","date":"2013-08-22T16:04:19.074Z","type":"message"}
{"nick":"piscisaureus_","message":"oh shit actually","date":"2013-08-22T16:04:40.090Z","type":"message"}
{"nick":"piscisaureus_","message":"I forgot to update a bunch of tests","date":"2013-08-22T16:04:45.867Z","type":"message"}
{"nick":"c4milo","date":"2013-08-22T16:05:27.948Z","type":"join"}
{"nick":"isaacs","message":"right, those :)","date":"2013-08-22T16:06:40.416Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Bert Belder\u000f \u00037reviewme\u000f * \u0002f1c29a5\u0002 : process: make the 'status' parameter for exit_cb an int64_t - http://git.io/fgBy2A","date":"2013-08-22T16:11:47.326Z","type":"message"}
{"nick":"TooTallNate","date":"2013-08-22T16:14:11.675Z","type":"join"}
{"nick":"MI6","message":"\u0002libuv-review\u0002: #40 \u00037UNSTABLE\u000f smartos-ia32 (4/192) linux-ia32 (2/192) windows-ia32 (3/193) osx-ia32 (6/193) windows-x64 (3/193) smartos-x64 (7/192) linux-x64 (7/192) http://jenkins.nodejs.org/job/libuv-review/40/","date":"2013-08-22T16:17:15.497Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-08-22T16:19:13.509Z","type":"quit"}
{"nick":"mordy__","message":"grr.. i have no way to even start figuring out how to debug this","date":"2013-08-22T16:27:48.704Z","type":"message"}
{"nick":"mordy__","message":"and google is useless since you get a ton of results about leaks in javascript code","date":"2013-08-22T16:29:06.495Z","type":"message"}
{"nick":"paulfryzel","reason":"Remote host closed the connection","date":"2013-08-22T16:30:10.856Z","type":"quit"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033Bert Belder\u000f \u00037reviewme\u000f * \u0002791a3c5\u0002 : process: make the 'status' parameter for exit_cb an int64_t - http://git.io/QOXQbw","date":"2013-08-22T16:30:19.828Z","type":"message"}
{"nick":"paulfryzel","date":"2013-08-22T16:30:46.753Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/libuv:\u0002 \u00033piscisaureus\u000f created branch reviewme-for-comparison - http://git.io/v672OA","date":"2013-08-22T16:33:17.915Z","type":"message"}
{"nick":"paulfryzel","reason":"Ping timeout: 240 seconds","date":"2013-08-22T16:35:02.535Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-review\u0002: #41 \u00037UNSTABLE\u000f smartos-ia32 (2/192) linux-ia32 (7/192) windows-ia32 (3/193) osx-ia32 (3/193) windows-x64 (3/193) smartos-x64 (6/192) http://jenkins.nodejs.org/job/libuv-review/41/","date":"2013-08-22T16:35:44.934Z","type":"message"}
{"nick":"bajtos","date":"2013-08-22T16:36:31.372Z","type":"join"}
{"nick":"abraxas","date":"2013-08-22T16:37:57.791Z","type":"join"}
{"nick":"tjfontaine","message":"piscisaureus_: could you find some time to comment on #6088 and decide if libuv unix or windows is right on whether to assert or not on a closed uv_async_send :)","date":"2013-08-22T16:38:51.039Z","type":"message"}
{"nick":"brson","date":"2013-08-22T16:39:04.158Z","type":"join"}
{"nick":"piscisaureus_","message":"windows is right","date":"2013-08-22T16:39:19.220Z","type":"message"}
{"nick":"piscisaureus_","message":"you shouldn't uv_async_send on a uv_async_t handle that might be closing","date":"2013-08-22T16:39:35.682Z","type":"message"}
{"nick":"piscisaureus_","message":"you are inevitably creating a race condition","date":"2013-08-22T16:39:41.283Z","type":"message"}
{"nick":"piscisaureus_","message":"if you don't want that to happen, don't close the handle","date":"2013-08-22T16:40:11.706Z","type":"message"}
{"nick":"piscisaureus_","message":"or make sure to tear down the thread that might cause uv_async_send first","date":"2013-08-22T16:40:23.728Z","type":"message"}
{"nick":"piscisaureus_","message":"s/cause/call/","date":"2013-08-22T16:40:28.091Z","type":"message"}
{"nick":"tjfontaine","message":"you don't have to convince me, I agree, it's just that unix lets to go through without much worry :)","date":"2013-08-22T16:41:21.098Z","type":"message"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-08-22T16:41:40.807Z","type":"nick"}
{"nick":"TooTallNate","reason":"Read error: Connection reset by peer","date":"2013-08-22T16:41:44.542Z","type":"quit"}
{"nick":"piscisaureus_","message":"I don't understand why my patch causes all this trouble in jenkins (http://jenkins.nodejs.org/job/libuv-review/41/)","date":"2013-08-22T16:41:47.567Z","type":"message"}
{"nick":"piscisaureus_","message":"whereas on my local machine all is fine","date":"2013-08-22T16:41:53.129Z","type":"message"}
{"nick":"piscisaureus_","message":"on linux, too","date":"2013-08-22T16:42:02.743Z","type":"message"}
{"nick":"abraxas","reason":"Ping timeout: 240 seconds","date":"2013-08-22T16:42:14.536Z","type":"quit"}
{"nick":"tjfontaine","message":"lets see what #42 has to say","date":"2013-08-22T16:42:46.995Z","type":"message"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-08-22T16:43:11.019Z","type":"quit"}
{"nick":"tjfontaine","message":"oh reviewme-for-comparison is master?","date":"2013-08-22T16:43:34.684Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-review\u0002: #42 \u00037UNSTABLE\u000f smartos-ia32 (2/192) windows-ia32 (3/193) windows-x64 (3/193) smartos-x64 (2/192) http://jenkins.nodejs.org/job/libuv-review/42/","date":"2013-08-22T16:43:49.086Z","type":"message"}
{"nick":"piscisaureus_","message":"tjfontaine: yes","date":"2013-08-22T16:44:27.519Z","type":"message"}
{"nick":"piscisaureus_","message":"tjfontaine: #41 is my patches","date":"2013-08-22T16:44:43.829Z","type":"message"}
{"nick":"tjfontaine","message":"#40 was also, right?","date":"2013-08-22T16:44:57.842Z","type":"message"}
{"nick":"piscisaureus_","message":"yes, but that had actual bugs","date":"2013-08-22T16:45:03.576Z","type":"message"}
{"nick":"piscisaureus_","message":"and most likely #41 too but I can't figure out what","date":"2013-08-22T16:45:24.647Z","type":"message"}
{"nick":"piscisaureus_","message":"also it only affects linux somehow","date":"2013-08-22T16:45:33.485Z","type":"message"}
{"nick":"tjfontaine","message":"I'll kick another build of that branch","date":"2013-08-22T16:46:19.526Z","type":"message"}
{"nick":"piscisaureus_","message":"cool","date":"2013-08-22T16:46:22.774Z","type":"message"}
{"nick":"tjfontaine","message":"#43 is building","date":"2013-08-22T16:46:34.389Z","type":"message"}
{"nick":"piscisaureus_","message":"I have to run. Be back later tonight probably","date":"2013-08-22T16:46:36.786Z","type":"message"}
{"nick":"piscisaureus_","message":"thanks tjfontaine","date":"2013-08-22T16:46:38.798Z","type":"message"}
{"nick":"piscisaureus_","message":"I'll keep an eye on it on my phone","date":"2013-08-22T16:46:55.907Z","type":"message"}
{"nick":"c4milo","date":"2013-08-22T16:48:37.947Z","type":"join"}
{"nick":"mordy__","message":"hrm, how can i print out how much stuff v8 has allocated (either in terms of memory, or better yet, in handles)?","date":"2013-08-22T16:50:38.030Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-review\u0002: #43 \u00037UNSTABLE\u000f smartos-ia32 (3/192) windows-ia32 (3/193) windows-x64 (3/193) smartos-x64 (2/192) http://jenkins.nodejs.org/job/libuv-review/43/","date":"2013-08-22T16:50:59.208Z","type":"message"}
{"nick":"tjfontaine","message":"piscisaureus_: looks good, just noise the last time in the CI infra","date":"2013-08-22T16:51:31.695Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 256 seconds","date":"2013-08-22T16:52:01.138Z","type":"quit"}
{"nick":"tjfontaine","message":"mordy__: do you have a test case I can try?","date":"2013-08-22T16:54:48.572Z","type":"message"}
{"nick":"amartens","date":"2013-08-22T16:56:41.669Z","type":"join"}
{"nick":"mordy__","message":"tjfontaine: well, i have two git repos and a script to reproduce it; i can't say any of it is minimal though","date":"2013-08-22T16:57:51.632Z","type":"message"}
{"nick":"tjfontaine","message":"sure, but it is reproducible","date":"2013-08-22T16:58:39.225Z","type":"message"}
{"nick":"tjfontaine","message":"is it public?","date":"2013-08-22T16:58:42.906Z","type":"message"}
{"nick":"mordy__","message":"yeah all stuff is public.. just the setup is kinda.. big","date":"2013-08-22T17:02:57.243Z","type":"message"}
{"nick":"mordy__","message":"there's also a server.. let's see if this works on the \"small\" version","date":"2013-08-22T17:03:13.766Z","type":"message"}
{"nick":"mordy__","message":"hrm, it does","date":"2013-08-22T17:05:43.996Z","type":"message"}
{"nick":"tjfontaine","message":"is that good for your efforts, or would it still be helpful for me to investigate?","date":"2013-08-22T17:06:21.384Z","type":"message"}
{"nick":"mordy__","message":"i'm making a small shellscript right now to download all the deps","date":"2013-08-22T17:09:04.815Z","type":"message"}
{"nick":"mordy__","message":"it's an interesting exercise nonethheless","date":"2013-08-22T17:09:15.206Z","type":"message"}
{"nick":"tjfontaine","message":"k","date":"2013-08-22T17:10:09.526Z","type":"message"}
{"nick":"jez0990_","reason":"Quit: http://quassel-irc.org - Chat comfortably. Anywhere.","date":"2013-08-22T17:13:09.411Z","type":"quit"}
{"nick":"jez0990","date":"2013-08-22T17:13:59.546Z","type":"join"}
{"nick":"TooTallNate","date":"2013-08-22T17:14:59.166Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #465 \u00037UNSTABLE\u000f smartos-x64 (202/636) smartos-ia32 (2/636) http://jenkins.nodejs.org/job/nodejs-master/465/","date":"2013-08-22T17:17:23.649Z","type":"message"}
{"nick":"raffiki","reason":"Ping timeout: 253 seconds","date":"2013-08-22T17:17:28.064Z","type":"quit"}
{"nick":"tjfontaine","message":"what the hell.","date":"2013-08-22T17:18:15.535Z","type":"message"}
{"nick":"ecr","date":"2013-08-22T17:18:44.816Z","type":"join"}
{"nick":"dominictarr","date":"2013-08-22T17:20:27.776Z","type":"join"}
{"nick":"indutny","message":"tjfontaine: what's up with release?","date":"2013-08-22T17:21:30.459Z","type":"message"}
{"nick":"mordy__","message":"oh wow.. this actually seems to work http://paste.scsys.co.uk/266213","date":"2013-08-22T17:22:09.879Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #466 \u00037UNSTABLE\u000f smartos-x64 (7/636) smartos-ia32 (1/636) http://jenkins.nodejs.org/job/nodejs-master/466/","date":"2013-08-22T17:33:45.861Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 245 seconds","date":"2013-08-22T17:51:23.160Z","type":"quit"}
{"nick":"MI6","message":"\u0002libuv-master\u0002: #182 \u00037UNSTABLE\u000f smartos (9/192) windows (3/193) http://jenkins.nodejs.org/job/libuv-master/182/","date":"2013-08-22T17:53:46.212Z","type":"message"}
{"nick":"mordy__","message":"hrm; it seems GetPropertyNames() leaks","date":"2013-08-22T17:55:46.345Z","type":"message"}
{"nick":"mordy__","message":"or at least it seems the heap usage inflates whenever i call that","date":"2013-08-22T17:55:57.537Z","type":"message"}
{"nick":"brson","date":"2013-08-22T18:02:04.158Z","type":"join"}
{"nick":"bnoordhuis","date":"2013-08-22T18:05:19.913Z","type":"join"}
{"nick":"mordy__","message":"hrm, the further i investigate, the more the leak seems to be in GetPropertyNames","date":"2013-08-22T18:05:28.826Z","type":"message"}
{"nick":"trevnorris","message":"heh, looks like I pissed a few people off. note to self, don't do a blog post at 4am. :P","date":"2013-08-22T18:06:03.514Z","type":"message"}
{"nick":"mordy__","message":"yep, the leak is there","date":"2013-08-22T18:06:58.136Z","type":"message"}
{"nick":"MI6","message":"\u0002libuv-node-integration\u0002: #167 \u00037UNSTABLE\u000f smartos-ia32 (2/636) smartos-x64 (8/636) http://jenkins.nodejs.org/job/libuv-node-integration/167/","date":"2013-08-22T18:07:15.426Z","type":"message"}
{"nick":"mordy__","message":"http://paste.scsys.co.uk/266218","date":"2013-08-22T18:07:48.608Z","type":"message"}
{"nick":"mordy__","message":"the output is basically stats.used_heap_size() over stats.total_heap_size() where V8::GetHeapStatistics(&stats)","date":"2013-08-22T18:08:28.138Z","type":"message"}
{"nick":"mordy__","message":"is that the right way to get an object length anyway?","date":"2013-08-22T18:12:01.223Z","type":"message"}
{"nick":"tjfontaine","message":"8350ec5d   268853        0 <anonymous> (as <anon>)","date":"2013-08-22T18:12:09.432Z","type":"message"}
{"nick":"tjfontaine","message":"that's a lot of closures","date":"2013-08-22T18:12:12.781Z","type":"message"}
{"nick":"mordy__","message":"hrm, let's see why","date":"2013-08-22T18:14:24.582Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: and a ton of objects being held that are { cas: {} }","date":"2013-08-22T18:14:25.015Z","type":"message"}
{"nick":"mordy__","message":"hrm; those objects are only created in the callback stage","date":"2013-08-22T18:15:23.664Z","type":"message"}
{"nick":"mordy__","message":"the Cas object is an ObjectTemplate->NewInstance()","date":"2013-08-22T18:15:32.689Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: what happened?","date":"2013-08-22T18:15:42.826Z","type":"message"}
{"nick":"mordy__","message":"maybe it's the actual object itself which is leaking","date":"2013-08-22T18:16:24.948Z","type":"message"}
{"nick":"mordy__","message":"tjfontaine: curious -- did the sh script work without issue?","date":"2013-08-22T18:16:56.145Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: i just stayed up too late and got punchy with my wording. now i'm getting flamed for it :)","date":"2013-08-22T18:16:57.250Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: mostly, bench2.js needs to be 127.0.0.1, and couchbase has broken dtrace build but I fixed that","date":"2013-08-22T18:17:36.398Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: you have a lot of arrays holding the following","date":"2013-08-22T18:17:46.707Z","type":"message"}
{"nick":"tjfontaine","message":"[","date":"2013-08-22T18:17:52.291Z","type":"message"}
{"nick":"tjfontaine","message":"    {","date":"2013-08-22T18:17:52.507Z","type":"message"}
{"nick":"tjfontaine","message":"        callback: function <anonymous> (as <anon>),","date":"2013-08-22T18:17:52.723Z","type":"message"}
{"nick":"tjfontaine","message":"        domain: null,","date":"2013-08-22T18:17:52.723Z","type":"message"}
{"nick":"tjfontaine","message":"    },","date":"2013-08-22T18:17:52.933Z","type":"message"}
{"nick":"mordy__","message":"hrm; arrays","date":"2013-08-22T18:18:08.006Z","type":"message"}
{"nick":"tjfontaine","message":"others holding [ \"keybase\" ]","date":"2013-08-22T18:18:25.223Z","type":"message"}
{"nick":"paulfryzel","date":"2013-08-22T18:20:19.776Z","type":"join"}
{"nick":"tjfontaine","message":"trevnorris: wade into the flame war, you get burned","date":"2013-08-22T18:20:26.181Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: i'm medium rare right now ;)","date":"2013-08-22T18:20:52.610Z","type":"message"}
{"nick":"trevnorris","message":"but seriously, I knew what I was getting into","date":"2013-08-22T18:21:02.356Z","type":"message"}
{"nick":"c4milo_","date":"2013-08-22T18:21:42.435Z","type":"join"}
{"nick":"c4milo","reason":"Read error: Connection reset by peer","date":"2013-08-22T18:21:47.683Z","type":"quit"}
{"nick":"mordy__","message":"hrmr.. array of [keybase]","date":"2013-08-22T18:22:00.797Z","type":"message"}
{"nick":"bradleymeck","date":"2013-08-22T18:22:23.205Z","type":"join"}
{"nick":"tjfontaine","message":"also { value: \"valbase******************************\" }","date":"2013-08-22T18:22:27.288Z","type":"message"}
{"nick":"tjfontaine","message":"lots of those objects","date":"2013-08-22T18:22:31.547Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: think the main problem was in my tired state I assumed too much on how people would interpret what I said.","date":"2013-08-22T18:23:13.422Z","type":"message"}
{"nick":"mordy__","message":"this all points to ResponseInfo.payload not being destroyed; though i've printf'd on ~ResponseInfo and it seems to be doing what it's supposed to","date":"2013-08-22T18:23:32.569Z","type":"message"}
{"nick":"mordy__","message":"hrm","date":"2013-08-22T18:23:46.603Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: the only addition to your script was a: for i in $(seq 1 20); do sleep 3; gcore -o core.$i $NODEPID; done -- then looking at the cores in mdb","date":"2013-08-22T18:26:15.546Z","type":"message"}
{"nick":"indutny","message":"tjfontaine: ping","date":"2013-08-22T18:28:13.216Z","type":"message"}
{"nick":"tjfontaine","message":"indutny: we can do the release, I just want to talk to ben about #6088 and if its a fix that maybe goes into libuv 0.10","date":"2013-08-22T18:28:53.079Z","type":"message"}
{"nick":"tjfontaine","message":"\"fix\"","date":"2013-08-22T18:29:00.352Z","type":"message"}
{"nick":"indutny","message":"ah, ok ))","date":"2013-08-22T18:29:18.739Z","type":"message"}
{"nick":"indutny","message":"thanks","date":"2013-08-22T18:29:19.500Z","type":"message"}
{"nick":"mordy__","message":"ah hrm","date":"2013-08-22T18:29:43.987Z","type":"message"}
{"nick":"mordy__","message":"so it seems the payload object is leaking","date":"2013-08-22T18:30:04.582Z","type":"message"}
{"nick":"mordy__","message":"it's being created with Persistent<Object>::New","date":"2013-08-22T18:30:11.723Z","type":"message"}
{"nick":"mordy__","message":"do i also need to do a MakeWeak maybe?","date":"2013-08-22T18:30:17.390Z","type":"message"}
{"nick":"mordy__","message":"considering it's being called from \"global scope\"","date":"2013-08-22T18:30:25.941Z","type":"message"}
{"nick":"groundwater","message":"trevnorris: do you mean your callbacks and closures blog?","date":"2013-08-22T18:30:26.665Z","type":"message"}
{"nick":"tjfontaine","message":"yes, if you're not holding a reference to it on purpose","date":"2013-08-22T18:30:28.204Z","type":"message"}
{"nick":"mordy__","message":"(called right out of UV)","date":"2013-08-22T18:30:30.266Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: does it need to be persistent, is it being sent straight to JS land and you don't need to clean up after it in C++?","date":"2013-08-22T18:30:59.754Z","type":"message"}
{"nick":"trevnorris","message":"groundwater: heh, yeah. i've had to make 3 updates thus far to say what I thought I was saying.","date":"2013-08-22T18:31:19.576Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: if it's really a C++ object that needs dealloc'd destructed, then yes leave it persistent and MakeWeak that delete's this (or use ObjectWrap)","date":"2013-08-22T18:31:44.335Z","type":"message"}
{"nick":"mordy__","message":"hrm.. indeed. it can be local","date":"2013-08-22T18:31:45.786Z","type":"message"}
{"nick":"trevnorris","message":"so, note to self, hold on to a blog post for 24 hours before making it public.","date":"2013-08-22T18:31:46.090Z","type":"message"}
{"nick":"groundwater","message":"trevnorris: not sure which update i read, but i definitely learned from it","date":"2013-08-22T18:31:49.430Z","type":"message"}
{"nick":"groundwater","message":"i've generally moved away from spawning closures in any sort of time-critical loop, but now there is some data to back it up","date":"2013-08-22T18:32:28.250Z","type":"message"}
{"nick":"mordy__","message":"tjfontaine: hrm, i seem to have plugged the leak","date":"2013-08-22T18:36:26.016Z","type":"message"}
{"nick":"jmar777","reason":"Read error: Connection reset by peer","date":"2013-08-22T18:36:35.719Z","type":"quit"}
{"nick":"mordy__","message":"so basically i made the ResponseInfo's payload non-persistent","date":"2013-08-22T18:36:37.603Z","type":"message"}
{"nick":"mordy__","message":"and i gave it its own HandleScope","date":"2013-08-22T18:36:42.720Z","type":"message"}
{"nick":"mordy__","message":"which seems.. nasty i guess","date":"2013-08-22T18:36:54.650Z","type":"message"}
{"nick":"jmar777","date":"2013-08-22T18:37:07.500Z","type":"join"}
{"nick":"tjfontaine","message":"mordy__: glad we were able to help","date":"2013-08-22T18:37:26.967Z","type":"message"}
{"nick":"rendar","reason":"Ping timeout: 248 seconds","date":"2013-08-22T18:40:05.697Z","type":"quit"}
{"nick":"mordy__","message":"tjfontaine: i think what's confusing to me now is; Persistent<Object>::New(Object::New()); // it seems the object is kept alive both by the *explicit* persistent reference _and_ the implicit HandleScope","date":"2013-08-22T18:41:12.694Z","type":"message"}
{"nick":"mordy__","message":"is this correct?","date":"2013-08-22T18:41:20.091Z","type":"message"}
{"nick":"tjfontaine","message":"once the HandleScope is out of scope the implicit reference should be gone","date":"2013-08-22T18:44:21.816Z","type":"message"}
{"nick":"LeftWing__","new_nick":"LeftWing","date":"2013-08-22T18:44:23.681Z","type":"nick"}
{"nick":"hz","date":"2013-08-22T18:46:08.065Z","type":"quit"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2013-08-22T18:47:23.926Z","type":"quit"}
{"nick":"EhevuTov","date":"2013-08-22T18:47:41.995Z","type":"join"}
{"nick":"mordy__","message":"hrm, which doesn't help if your HandleScope is at the bottom of the stack","date":"2013-08-22T18:49:17.467Z","type":"message"}
{"nick":"mordy__","message":"how would one create a \"Detached\" handle?","date":"2013-08-22T18:51:08.636Z","type":"message"}
{"nick":"mordy__","message":"or is this integral to v8 that every handle *must* have a scope","date":"2013-08-22T18:51:35.362Z","type":"message"}
{"nick":"tjfontaine","message":"what do you want a detached handle to do?","date":"2013-08-22T18:52:29.258Z","type":"message"}
{"nick":"MI6","message":"\u0002nodejs-master-windows\u0002: #260 \u00037UNSTABLE\u000f windows-x64 (15/636) windows-ia32 (18/636) http://jenkins.nodejs.org/job/nodejs-master-windows/260/","date":"2013-08-22T18:58:19.604Z","type":"message"}
{"nick":"mordy__","message":"tjfontaine: make C++-lang own the handle for a specified duration of time until it's ready to transfer ownership back to js. assuming the handle is created from the outermost scope.. without incurring the overhead of a HandleScope (unless the overhead is trivial?)","date":"2013-08-22T18:59:59.758Z","type":"message"}
{"nick":"indutny","message":"mordy__: use Persistent","date":"2013-08-22T19:00:16.156Z","type":"message"}
{"nick":"indutny","message":"and .Dispose() it when done","date":"2013-08-22T19:00:20.684Z","type":"message"}
{"nick":"indutny","message":"you can keep Persistent<Value> as a member of your class or structure","date":"2013-08-22T19:00:34.730Z","type":"message"}
{"nick":"indutny","message":"it doesn't need to be inside handlescope","date":"2013-08-22T19:00:42.249Z","type":"message"}
{"nick":"tjfontaine","message":"what indutny says, but a handlescope overhead isn't that bad, it depends on how hot the path is","date":"2013-08-22T19:01:07.940Z","type":"message"}
{"nick":"tjfontaine","message":"brb lunch","date":"2013-08-22T19:01:12.382Z","type":"message"}
{"nick":"mordy__","message":"ok","date":"2013-08-22T19:01:15.459Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: 'UPDATE2: I fogot' and 'I've update the example' :)","date":"2013-08-22T19:10:47.391Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: damn you! ;)  man I really suck at my own language.","date":"2013-08-22T19:12:38.034Z","type":"message"}
{"nick":"mordy__","message":"hrm, on that note.. what's the most efficient way of passing an 8 byte opaque value to-from js?","date":"2013-08-22T19:13:53.213Z","type":"message"}
{"nick":"mordy__","message":"i tried to be clever and make an ObjectTemplate which does SetPointerInInternalField on 64 bit platforms","date":"2013-08-22T19:14:26.906Z","type":"message"}
{"nick":"bnoordhuis","message":"mordy__: doesn't work, SetPointerInInternalField() needs an aligned pointer","date":"2013-08-22T19:16:48.750Z","type":"message"}
{"nick":"bnoordhuis","message":"apart from the obvious 32 bits thing, of course","date":"2013-08-22T19:17:13.491Z","type":"message"}
{"nick":"bnoordhuis","message":"if you need < 2**53 bits, then you could pack it into a double with Number::New() :)","date":"2013-08-22T19:17:56.589Z","type":"message"}
{"nick":"paulfryzel","reason":"Ping timeout: 240 seconds","date":"2013-08-22T19:18:14.735Z","type":"quit"}
{"nick":"mordy__","message":"for 32 bits i just allocated a pointer","date":"2013-08-22T19:18:15.624Z","type":"message"}
{"nick":"bnoordhuis","message":"kidding aside, you probably either want an External or Object::SetPointerInInternalField()","date":"2013-08-22T19:18:32.726Z","type":"message"}
{"nick":"mordy__","message":"but, apparently String::NewUndetectable seems quicker","date":"2013-08-22T19:18:53.608Z","type":"message"}
{"nick":"indutny","message":"I fogot?","date":"2013-08-22T19:19:02.855Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't know, we don't use that in node","date":"2013-08-22T19:19:12.664Z","type":"message"}
{"nick":"tjfontaine","message":"oh that's kinda evil","date":"2013-08-22T19:19:41.694Z","type":"message"}
{"nick":"bnoordhuis","message":"Object::SetIndexedPropertiesToExternalArrayData() works too and is probably faster still","date":"2013-08-22T19:19:54.025Z","type":"message"}
{"nick":"bnoordhuis","message":"more evil too though","date":"2013-08-22T19:20:01.413Z","type":"message"}
{"nick":"mordy__","message":"ah hrm","date":"2013-08-22T19:23:02.622Z","type":"message"}
{"nick":"tjfontaine","message":"External is the API v8 exports for \"arbitrarily wrapped data\"","date":"2013-08-22T19:24:08.692Z","type":"message"}
{"nick":"mordy__","message":"hrm; External is the quickest","date":"2013-08-22T19:29:23.151Z","type":"message"}
{"nick":"groundwater","message":"External is probably friendliest","date":"2013-08-22T19:30:04.600Z","type":"message"}
{"nick":"paulfryzel","date":"2013-08-22T19:32:31.180Z","type":"join"}
{"nick":"kevinswiber","date":"2013-08-22T19:33:43.939Z","type":"join"}
{"nick":"mordy__","message":"hrm, i wonder what sizeof(handle) is. just sizeof(void*) ?","date":"2013-08-22T19:39:07.908Z","type":"message"}
{"nick":"chrisdickinson","message":"trevnorris: neat blog post, made me go dive in and explore what was going on","date":"2013-08-22T19:39:42.807Z","type":"message"}
{"nick":"chrisdickinson","message":"also, i think i beat your primes :)","date":"2013-08-22T19:39:47.587Z","type":"message"}
{"nick":"trevnorris","message":"chrisdickinson: ooh, do tell!","date":"2013-08-22T19:39:56.817Z","type":"message"}
{"nick":"chrisdickinson","message":"trevnorris: well, one, if you pull genPrimes out of the loop, things move a lot faster. so i did that for both of ours. otherwise it's just some bit-twiddling","date":"2013-08-22T19:40:27.591Z","type":"message"}
{"nick":"chrisdickinson","message":"https://gist.github.com/chrisdickinson/2d371c365f8bb0d9c9ab","date":"2013-08-22T19:41:04.953Z","type":"message"}
{"nick":"chrisdickinson","message":"basically relying on (x / 8) === (x >>> 3), (x * 8) === (x << 3), (x % 8) === (x & 7)","date":"2013-08-22T19:41:37.104Z","type":"message"}
{"nick":"chrisdickinson","message":"so i get to kill two modulos and three divs","date":"2013-08-22T19:42:09.894Z","type":"message"}
{"nick":"trevnorris","message":"chrisdickinson: poop. seems I didn't explain it well enough in my post that the genPrimes() function itself was the challenge. Not the entire loop n stuff.","date":"2013-08-22T19:42:20.048Z","type":"message"}
{"nick":"trevnorris","message":"but that trick is awesome","date":"2013-08-22T19:42:26.106Z","type":"message"}
{"nick":"trevnorris","action":"off to benchmark","date":"2013-08-22T19:42:31.083Z","type":"action"}
{"nick":"chrisdickinson","message":"i compared 'em inside of the loop too","date":"2013-08-22T19:43:07.804Z","type":"message"}
{"nick":"chrisdickinson","message":"trevnorris: not sure if you saw: https://gist.github.com/chrisdickinson/7d344ca7454adfd11a15","date":"2013-08-22T19:43:40.272Z","type":"message"}
{"nick":"chrisdickinson","message":"(basically, the closure example is slower not because of allocation etc, but because it keeps v8 from inlining -- and that's where the memory usage comes from too!)","date":"2013-08-22T19:44:14.216Z","type":"message"}
{"nick":"chrisdickinson","message":"(since it can't inline, it has to continue to allocate / run gc on the calls)","date":"2013-08-22T19:44:34.600Z","type":"message"}
{"nick":"chrisdickinson","message":"ah! i totally flubbed that last bit about moving it out","date":"2013-08-22T19:45:03.904Z","type":"message"}
{"nick":"chrisdickinson","message":"sorry about that!","date":"2013-08-22T19:45:15.891Z","type":"message"}
{"nick":"chrisdickinson","message":"(also, i promise i wasn't testing yours with the process.stdout.write bits in there -- i just wanted to verify output after benching.)","date":"2013-08-22T19:48:11.668Z","type":"message"}
{"nick":"trevnorris","message":"chrisdickinson: ok, those bit shifting tricks really gave it a boost. awesome job.","date":"2013-08-22T19:52:27.729Z","type":"message"}
{"nick":"chrisdickinson","message":"thanks :)","date":"2013-08-22T19:52:35.119Z","type":"message"}
{"nick":"chrisdickinson","message":"1 sec, i think i see one more opportunity for a speedup :)","date":"2013-08-22T19:54:43.385Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-08-22T19:59:11.040Z","type":"quit"}
{"nick":"paulfryzel","reason":"Remote host closed the connection","date":"2013-08-22T20:00:26.078Z","type":"quit"}
{"nick":"mordy__","message":"is there some magic compilation flag i can use to avoid all those calls to pthread_getspecific?","date":"2013-08-22T20:00:30.342Z","type":"message"}
{"nick":"paulfryzel","date":"2013-08-22T20:01:02.080Z","type":"join"}
{"nick":"tjfontaine","message":"coming from the Isolate::GetCurrent()?","date":"2013-08-22T20:01:32.500Z","type":"message"}
{"nick":"mordy__","message":"hrm i'm actually not seeing Isolate::GetCurrent in the path","date":"2013-08-22T20:03:20.961Z","type":"message"}
{"nick":"mordy__","message":"not sure how to make this callgrind graph to text","date":"2013-08-22T20:03:49.712Z","type":"message"}
{"nick":"mordy__","message":"http://i.imgur.com/eA3pUGB.png","date":"2013-08-22T20:04:49.739Z","type":"message"}
{"nick":"paulfryzel","reason":"Ping timeout: 246 seconds","date":"2013-08-22T20:05:04.883Z","type":"quit"}
{"nick":"mordy__","message":"granted it's only 2% of execution time","date":"2013-08-22T20:05:22.243Z","type":"message"}
{"nick":"TooTallNate","date":"2013-08-22T20:16:26.316Z","type":"join"}
{"nick":"julianduque","date":"2013-08-22T20:19:07.165Z","type":"join"}
{"nick":"ecr","reason":"Quit: ecr","date":"2013-08-22T20:22:34.569Z","type":"quit"}
{"nick":"st_luke","date":"2013-08-22T20:24:41.973Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-08-22T20:29:16.672Z","type":"quit"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-08-22T20:31:52.078Z","type":"quit"}
{"nick":"ecr","date":"2013-08-22T20:33:17.750Z","type":"join"}
{"nick":"ecr","reason":"Client Quit","date":"2013-08-22T20:33:36.595Z","type":"quit"}
{"nick":"brson","reason":"Read error: Connection reset by peer","date":"2013-08-22T20:36:48.270Z","type":"quit"}
{"nick":"brson","date":"2013-08-22T20:37:11.537Z","type":"join"}
{"nick":"bnoordhuis","message":"mordy__: yeah, that's Isolate::GetCurrent()","date":"2013-08-22T20:40:57.934Z","type":"message"}
{"nick":"bnoordhuis","message":"mordy__: you can't really avoid it, not everything in v8 takes an explicit isolate argument","date":"2013-08-22T20:41:15.888Z","type":"message"}
{"nick":"bnoordhuis","message":"it's better now than it used to be","date":"2013-08-22T20:41:33.567Z","type":"message"}
{"nick":"bnoordhuis","message":"when the isolates stuff first landed in v8, it was spending 4-5% of its time in pthread_getspecific()","date":"2013-08-22T20:41:53.124Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: you around?","date":"2013-08-22T20:42:50.642Z","type":"message"}
{"nick":"mikeal","date":"2013-08-22T20:43:16.966Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 240 seconds","date":"2013-08-22T20:44:14.578Z","type":"quit"}
{"nick":"brson","date":"2013-08-22T20:45:38.963Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-08-22T20:52:07.333Z","type":"quit"}
{"nick":"jmar777","date":"2013-08-22T21:09:39.647Z","type":"join"}
{"nick":"othiym23","message":"does the HTTP parser enforce a maximum length restriction on queries?","date":"2013-08-22T21:17:47.681Z","type":"message"}
{"nick":"othiym23","message":"http_parser.c, node_http_parser.cc and v0.10's lib/http.js did not provide me with satisfactory answers","date":"2013-08-22T21:18:18.576Z","type":"message"}
{"nick":"bnoordhuis","message":"othiym23: no","date":"2013-08-22T21:20:23.371Z","type":"message"}
{"nick":"othiym23","message":"will it return a 414 if you send it, like, a 512MiB URL?","date":"2013-08-22T21:21:29.655Z","type":"message"}
{"nick":"ik","message":"it'll send you home with a letter to your parents","date":"2013-08-22T21:22:00.664Z","type":"message"}
{"nick":"mordy__","message":"if ou want to use the url parser function thingy","date":"2013-08-22T21:23:07.752Z","type":"message"}
{"nick":"mordy__","message":"those things use uint16_t for offsets","date":"2013-08-22T21:23:22.723Z","type":"message"}
{"nick":"mordy__","message":"but the parser itself just maintains lexical state","date":"2013-08-22T21:23:57.963Z","type":"message"}
{"nick":"rendar","date":"2013-08-22T21:24:03.022Z","type":"join"}
{"nick":"pachet","reason":"Quit: ;[","date":"2013-08-22T21:24:36.596Z","type":"quit"}
{"nick":"c4milo_","reason":"Remote host closed the connection","date":"2013-08-22T21:28:31.177Z","type":"quit"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-08-22T21:28:44.446Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2013-08-22T21:33:16.171Z","type":"quit"}
{"nick":"ecr","date":"2013-08-22T21:33:57.789Z","type":"join"}
{"nick":"st_luke","date":"2013-08-22T21:53:17.501Z","type":"join"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2013-08-22T22:02:08.806Z","type":"quit"}
{"nick":"rendar","date":"2013-08-22T22:12:18.034Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-08-22T22:15:19.475Z","type":"quit"}
{"nick":"tjfontaine","message":"isaacs: https://github.com/joyent/node/pull/6098 btw","date":"2013-08-22T22:24:38.323Z","type":"message"}
{"nick":"mordy__","message":"hrm, is there a magic flag to tell node to use RTLD_NOW?","date":"2013-08-22T22:28:25.843Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 256 seconds","date":"2013-08-22T22:30:53.360Z","type":"quit"}
{"nick":"kevinswiber","reason":"Remote host closed the connection","date":"2013-08-22T22:34:47.007Z","type":"quit"}
{"nick":"Somebody","date":"2013-08-22T22:38:30.559Z","type":"join"}
{"nick":"othiym23","message":"gonna be a BAD PERSON","date":"2013-08-22T22:55:36.282Z","type":"message"}
{"nick":"othiym23","message":"puttin' util._extend RIGHT THERE IN MY CODE","date":"2013-08-22T22:55:43.909Z","type":"message"}
{"nick":"brson","date":"2013-08-22T23:10:24.245Z","type":"join"}
{"nick":"Somebody","reason":"Remote host closed the connection","date":"2013-08-22T23:12:32.044Z","type":"quit"}
{"nick":"mordy__","message":"hrm.. apparently one cannot inherit (in js) from a \"native\" class?","date":"2013-08-22T23:12:52.777Z","type":"message"}
{"nick":"tjfontaine","message":"define \"native\"","date":"2013-08-22T23:13:19.370Z","type":"message"}
{"nick":"mordy__","message":"ObjectWrap","date":"2013-08-22T23:13:25.223Z","type":"message"}
{"nick":"mordy__","message":"i found this.. somewhere","date":"2013-08-22T23:13:35.789Z","type":"message"}
{"nick":"mordy__","message":"http://comments.gmane.org/gmane.comp.lang.javascript.nodejs/18876","date":"2013-08-22T23:13:41.124Z","type":"message"}
{"nick":"tjfontaine","message":"talk to me about what you're trying to do","date":"2013-08-22T23:15:11.928Z","type":"message"}
{"nick":"mordy__","message":"tbh my javascript knowledge is rather limited (quite ironic for the stuff i've been working with). i'm trying to provide nice wrappers around *some* of my C++ entry points, while i want some others to be exposed","date":"2013-08-22T23:16:40.767Z","type":"message"}
{"nick":"mordy__","message":"right now what seems to work is encapsulating the existing object - but this means defining the boilerplate for all the methods which don't really have any javascript-specific logic","date":"2013-08-22T23:17:08.631Z","type":"message"}
{"nick":"mordy__","message":"btw your help earlier with finding those leaks was much appreciated","date":"2013-08-22T23:17:27.451Z","type":"message"}
{"nick":"tjfontaine","message":"no problem, so what I think we should talk about is generic design of how this could work, unfortunately often there is an amount of boilerplate that will always need written for a binary addon","date":"2013-08-22T23:19:01.215Z","type":"message"}
{"nick":"tjfontaine","message":"I'm going to describe what I consider the ideal design of a binary addon interface, there are other ways to achieve this, but these are my opinions","date":"2013-08-22T23:20:24.739Z","type":"message"}
{"nick":"tjfontaine","message":"so, your main piece is going to be v8::External","date":"2013-08-22T23:21:05.807Z","type":"message"}
{"nick":"tjfontaine","message":"you have an: Persistent<External> handle = Persistent<External>::New(External::New(library_init()));","date":"2013-08-22T23:22:11.778Z","type":"message"}
{"nick":"tjfontaine","message":"or maybe instead of library_init() it may be: new CppClass()","date":"2013-08-22T23:22:38.705Z","type":"message"}
{"nick":"ecr","reason":"Quit: ecr","date":"2013-08-22T23:23:07.204Z","type":"quit"}
{"nick":"tjfontaine","message":"you then handle.MakeWeak() and in the callback for that you `delete ptr` or `library_destroy(ptr)`","date":"2013-08-22T23:23:19.649Z","type":"message"}
{"nick":"tjfontaine","message":"you then pass that handle up to javascript, it's a safe object to pass around, you stick that on your class you have defined in js","date":"2013-08-22T23:23:48.236Z","type":"message"}
{"nick":"tjfontaine","message":"var MyLibrary = function() { this._handle = bindings.init(); }","date":"2013-08-22T23:24:08.384Z","type":"message"}
{"nick":"tjfontaine","message":"then, when you want to expose a function you:","date":"2013-08-22T23:24:23.306Z","type":"message"}
{"nick":"tjfontaine","message":"MyLibrary.prototyp.foo = function(bar) { return bindings.foo(this._handle, bar); };","date":"2013-08-22T23:24:51.102Z","type":"message"}
{"nick":"tjfontaine","message":"so, when you `new MyLibrary()` in js, it grabs the necessary handle, and then holds a reference -- when that JS object goes out of scope your native side is notified","date":"2013-08-22T23:25:41.854Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: does that wall of text make sense?","date":"2013-08-22T23:26:47.526Z","type":"message"}
{"nick":"mordy__","message":"tjfontaine: it does. i'm looking at what we have right now and comparing it","date":"2013-08-22T23:27:53.805Z","type":"message"}
{"nick":"tjfontaine","message":"ObjectWrap basically does this same model, but it's kinda hidden inside a world of C++ and v8 ObjectTemplate's","date":"2013-08-22T23:28:29.227Z","type":"message"}
{"nick":"tjfontaine","message":"and there's no reason to do so much work in C++ when you could do most of it in JS and let the JIT help you","date":"2013-08-22T23:28:47.776Z","type":"message"}
{"nick":"mordy__","message":"that's another matter of discussion -- which bits are more efficient in C++ and which are better off jit'ed","date":"2013-08-22T23:29:50.958Z","type":"message"}
{"nick":"tjfontaine","message":"depends on what your library is for","date":"2013-08-22T23:30:14.094Z","type":"message"}
{"nick":"tjfontaine","message":"more often than not you want to start in the JIT and push out to C++","date":"2013-08-22T23:30:26.295Z","type":"message"}
{"nick":"tjfontaine","message":"consider, it's very expensive to mutate an object in C++ -- whereas the boundary jump is actually pretty cheap","date":"2013-08-22T23:31:28.715Z","type":"message"}
{"nick":"tjfontaine","message":"so it's cheaper to call a function in JS to construct an object than it is to construct that object in C++ -- Assuming of course that you're constantly recreating this object in C++ in a hot path","date":"2013-08-22T23:32:16.531Z","type":"message"}
{"nick":"mordy__","message":"then there's the issue of maintainability.. my goal here over our old api was to have a \"single API\"","date":"2013-08-22T23:33:06.892Z","type":"message"}
{"nick":"mordy__","message":"so we have a FunctionTemplate we construct, point it to our ctor, and do stuff there","date":"2013-08-22T23:34:49.062Z","type":"message"}
{"nick":"tjfontaine","message":"you mean, trying to reuse as much of your existing C++ as possible?","date":"2013-08-22T23:35:17.444Z","type":"message"}
{"nick":"mordy__","message":"tjfontaine: that, and also not have a hunk of javascript containing complex logic to interact with another complex hunk of C++","date":"2013-08-22T23:35:59.054Z","type":"message"}
{"nick":"toothr","new_nick":"toothrot","date":"2013-08-22T23:36:54.968Z","type":"nick"}
{"nick":"tjfontaine","message":"I don't think your JS should be all that complex, it should just be doing argument validation before actually doing the boundary jump","date":"2013-08-22T23:36:58.973Z","type":"message"}
{"nick":"tjfontaine","message":"also, I hope your stuff doesn't use C++ exceptions ...","date":"2013-08-22T23:37:29.673Z","type":"message"}
{"nick":"mordy__","message":"and that's the kinda mentality things get into when the prevailing thought is: \"oh, we don't need to make it pretty. it's just a binding\"","date":"2013-08-22T23:37:35.420Z","type":"message"}
{"nick":"mordy__","message":"we used to, but i removed 'em","date":"2013-08-22T23:37:39.184Z","type":"message"}
{"nick":"tjfontaine","message":"good.","date":"2013-08-22T23:37:46.517Z","type":"message"}
{"nick":"tjfontaine","message":"it's never going to be pretty because it is a binding, but (imo) you shouldn't be exposing a native function directly to a user, my preference is that it always goes through a JS shim","date":"2013-08-22T23:38:21.631Z","type":"message"}
{"nick":"mordy__","message":"but we deal a lot with complex types; i.e. it's not just \"oh, pass a string and be done with it\"","date":"2013-08-22T23:39:00.368Z","type":"message"}
{"nick":"othiym23","message":"do any of you have a fast way to mimic Sets or object-keyed maps in pure JS?","date":"2013-08-22T23:39:15.731Z","type":"message"}
{"nick":"othiym23","message":"assume for the sake of discussion that I can't just turn on WeakMaps","date":"2013-08-22T23:39:25.809Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: does that mean you're doing marshalling of JS objects to C++ types?","date":"2013-08-22T23:39:39.939Z","type":"message"}
{"nick":"othiym23","message":"ideally something that's faster than O(n) to check membership","date":"2013-08-22T23:40:26.104Z","type":"message"}
{"nick":"mordy__","message":"tjfontaine: not marshalling per se. in C land our basic unit of operation is an lcb_<type>_cmd_t where <type> is one of several operations.. i think we have about 6 or 7 of these...","date":"2013-08-22T23:40:49.601Z","type":"message"}
{"nick":"tjfontaine","message":"othiym23: I've seen some, but nothing I've used enough to suggest","date":"2013-08-22T23:41:06.194Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: ok","date":"2013-08-22T23:41:38.007Z","type":"message"}
{"nick":"mordy__","message":"for efficiency's sake, it's much better to allocate an array of such objects and then pass it to the API","date":"2013-08-22T23:41:49.037Z","type":"message"}
{"nick":"othiym23","message":"this is one of those rare cases where I miss Ruby's object IDs","date":"2013-08-22T23:41:55.153Z","type":"message"}
{"nick":"mordy__","message":"to make things more complicated, the API doesn't take an actual structure, it takes an lcb_<type>_cmd_t**","date":"2013-08-22T23:42:11.006Z","type":"message"}
{"nick":"othiym23","message":"because these are Error objects, I don't want to just hash the properties or whatever, because I don't want to realize the stack until I have to","date":"2013-08-22T23:42:16.965Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: actually it sounds like a pretty sane mechanism","date":"2013-08-22T23:42:34.494Z","type":"message"}
{"nick":"mordy__","message":"why thank you. i was part of the team that designed it","date":"2013-08-22T23:43:13.550Z","type":"message"}
{"nick":"tjfontaine","message":"so this interface is all C?","date":"2013-08-22T23:44:18.265Z","type":"message"}
{"nick":"mordy__","message":"yeah. all C","date":"2013-08-22T23:44:25.201Z","type":"message"}
{"nick":"mordy__","message":"to make things more amusing, we do async I/O with pluggable backends","date":"2013-08-22T23:44:38.298Z","type":"message"}
{"nick":"mordy__","message":"and we have a uv interface as well","date":"2013-08-22T23:44:42.917Z","type":"message"}
{"nick":"tjfontaine","message":"tjfontaine.github.io/node-addon-layer","date":"2013-08-22T23:44:49.498Z","type":"message"}
{"nick":"ecr","date":"2013-08-22T23:45:13.291Z","type":"join"}
{"nick":"tjfontaine","message":"it's not finished just yet, but you might prefer to look at C instead of C++","date":"2013-08-22T23:45:40.627Z","type":"message"}
{"nick":"ecr","reason":"Client Quit","date":"2013-08-22T23:45:41.205Z","type":"quit"}
{"nick":"TooTallNate","message":"https://cloudup.com/cvWmomB2QGS","date":"2013-08-22T23:46:49.373Z","type":"message"}
{"nick":"TooTallNate","message":"^ windows installer fail","date":"2013-08-22T23:46:54.644Z","type":"message"}
{"nick":"TooTallNate","message":"any ideas?","date":"2013-08-22T23:46:56.653Z","type":"message"}
{"nick":"tjfontaine","message":"ugh","date":"2013-08-22T23:47:29.735Z","type":"message"}
{"nick":"tjfontaine","message":"what's in eventviewer?","date":"2013-08-22T23:47:35.429Z","type":"message"}
{"nick":"mordy__","message":"tjfontaine: perhaps in the future (and i much prefer C over C++).. i'm currently going over a refactor of our existing stuff","date":"2013-08-22T23:48:34.381Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: https://cloudup.com/cIDizGpP813","date":"2013-08-22T23:48:35.546Z","type":"message"}
{"nick":"TooTallNate","message":"(this is XP obviously)","date":"2013-08-22T23:48:49.394Z","type":"message"}
{"nick":"mordy__","message":"curious though. does that api just wrap the C++ interface, or does it (or will it) access stuff normally not available to the C API","date":"2013-08-22T23:49:03.325Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: do you have access to the box, or is this a report from someone else?","date":"2013-08-22T23:49:24.867Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: it's my VM","date":"2013-08-22T23:49:32.899Z","type":"message"}
{"nick":"mordy__","action":"wonders if california is on fire","date":"2013-08-22T23:49:59.013Z","type":"action"}
{"nick":"tjfontaine","message":"mordy__: it's a wrapping of the v8 api mostly, aimed at working for v0.8+","date":"2013-08-22T23:50:07.093Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: hrm, interesting is 0.10.17 the first to fail?","date":"2013-08-22T23:50:28.255Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: i was on v0.10.1 before, so i'm not really sure","date":"2013-08-22T23:50:44.905Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: specifically can you go back to say 0.10.0 and see it fail thee?","date":"2013-08-22T23:50:47.593Z","type":"message"}
{"nick":"tjfontaine","message":"*there","date":"2013-08-22T23:50:50.145Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: the first release I would have done for that would have been 10.14 I think, so 10.10 should be going back far enough","date":"2013-08-22T23:51:18.119Z","type":"message"}
{"nick":"TooTallNate","message":"ok i'll try it","date":"2013-08-22T23:51:27.009Z","type":"message"}
{"nick":"AvianFlu","date":"2013-08-22T23:52:45.988Z","type":"join"}
{"nick":"TooTallNate","message":"tjfontaine: same error with the v0.10.10 msi","date":"2013-08-22T23:53:13.358Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: ok, at least it's not my WiX version that's causing your troubles","date":"2013-08-22T23:53:53.084Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: can you fully uninstall node and try again?","date":"2013-08-22T23:54:06.053Z","type":"message"}
{"nick":"tjfontaine","message":"also \"reboot 3 times\"","date":"2013-08-22T23:54:17.881Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: it's in a broken state it seems, it's not even in the Add/Remove list","date":"2013-08-22T23:54:18.465Z","type":"message"}
{"nick":"tjfontaine","message":":P","date":"2013-08-22T23:54:18.677Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: break out the registry cleaner I guess","date":"2013-08-22T23:54:27.617Z","type":"message"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Timothy J Fontaine\u000f \u00037master\u000f * \u0002546ae2e\u0002 : util: pass opts to custom inspect functions - http://git.io/_XSScg","date":"2013-08-22T23:54:31.817Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: minor nit: commit messages should be present-tense","date":"2013-08-22T23:54:43.269Z","type":"message"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-08-22T23:54:51.977Z","type":"quit"}
{"nick":"tjfontaine","message":"isaacs: thanks!","date":"2013-08-22T23:55:07.275Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: i can't believe i never thought of that actually","date":"2013-08-22T23:55:33.042Z","type":"message"}
{"nick":"mordy__","message":"hrm, is there much of a difference between ","date":"2013-08-22T23:55:35.665Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: passing the ctx as a second arg","date":"2013-08-22T23:55:40.178Z","type":"message"}
{"nick":"mordy__","message":"this._handle.whatever and bindings.whatever.handle(..) ?","date":"2013-08-22T23:55:56.777Z","type":"message"}
{"nick":"TooTallNate","message":"i was imagining a PITA migration for modules that already implement .inspect(), but this is a much better solution","date":"2013-08-22T23:56:02.553Z","type":"message"}
{"nick":"wolfeidau","date":"2013-08-22T23:56:13.477Z","type":"join"}
{"nick":"mordy__","message":"err.. bindings.whatever(this._handle,..)","date":"2013-08-22T23:56:22.322Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: heh, hopefully I didn't berak anyone :P","date":"2013-08-22T23:56:24.521Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: well the PITA migration was in the case of passing ctx as the *first* argument","date":"2013-08-22T23:56:51.228Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: difference from what stand point","date":"2013-08-22T23:56:53.741Z","type":"message"}
{"nick":"TooTallNate","message":"i.e. breaking backwards compat","date":"2013-08-22T23:56:55.896Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: right","date":"2013-08-22T23:56:58.445Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: so you avoided that completely from what it seems to me","date":"2013-08-22T23:57:27.058Z","type":"message"}
{"nick":"tjfontaine","message":"mordy__: the former requires constructing an object in C++, the later requires storing and passing a wrapped value","date":"2013-08-22T23:57:30.925Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: ya, it didn't even occur to me to do it any other way :)","date":"2013-08-22T23:57:55.638Z","type":"message"}
{"nick":"tjfontaine","message":"TooTallNate: I wonder if people even know they get a depth argument as it is anyway","date":"2013-08-22T23:58:11.831Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: i've never seen anyone utilize it :p","date":"2013-08-22T23:58:21.771Z","type":"message"}
{"nick":"TooTallNate","message":"i never have at least","date":"2013-08-22T23:58:26.877Z","type":"message"}
{"nick":"TooTallNate","message":"haha","date":"2013-08-22T23:58:27.422Z","type":"message"}
{"nick":"tjfontaine","message":"exactly.","date":"2013-08-22T23:58:28.002Z","type":"message"}
{"nick":"TooTallNate","message":"so maybe it would have been fine :p","date":"2013-08-22T23:58:37.629Z","type":"message"}
{"nick":"tjfontaine","message":"Buffer.prototype.inspect doesn't either","date":"2013-08-22T23:58:37.846Z","type":"message"}
{"nick":"TooTallNate","message":"baba","date":"2013-08-22T23:58:38.817Z","type":"message"}
{"nick":"TooTallNate","message":"haha","date":"2013-08-22T23:58:39.826Z","type":"message"}
{"nick":"TooTallNate","message":"tjfontaine: AND the .inspect() function wasn't even documented before your commit just now!","date":"2013-08-22T23:59:07.289Z","type":"message"}
{"nick":"TooTallNate","message":"so we probably could have gotten away with it as the first arg :p but whatev's this is safer in the end","date":"2013-08-22T23:59:25.195Z","type":"message"}
{"nick":"tjfontaine","message":"yup","date":"2013-08-22T23:59:28.419Z","type":"message"}
