{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-03-26T00:00:00.881Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #117 \u00037UNSTABLE\u000f linux-ia32 (1/569) windows-ia32 (4/569) osx-ia32 (2/569) windows-x64 (5/569) http://jenkins.nodejs.org/job/nodejs-master/117/","date":"2013-03-26T00:00:03.305Z","type":"message"}
{"nick":"ircretary","date":"2013-03-26T00:00:08.602Z","type":"join"}
{"nick":"sblom","reason":"Ping timeout: 276 seconds","date":"2013-03-26T00:04:38.602Z","type":"quit"}
{"nick":"trevnorris","message":"bnoordhuis: i'm trying a perf improvement by storing references to old persists and not disposing them.","date":"2013-03-26T00:21:44.496Z","type":"message"}
{"nick":"tjfontaine","message":"that's an interesting concept","date":"2013-03-26T00:22:04.346Z","type":"message"}
{"nick":"trevnorris","message":"problem is i'm not sure of the syntax to store a persistent handle in a persistent<object>[n]","date":"2013-03-26T00:22:11.586Z","type":"message"}
{"nick":"tjfontaine","message":"could you use a queue by size and push/pop them as they become free/needed?","date":"2013-03-26T00:22:57.140Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-26T00:22:59.935Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: that's what i'm trying to do, except when I try to \"p_saved[n] = target\" it gives me an error","date":"2013-03-26T00:23:50.049Z","type":"message"}
{"nick":"trevnorris","message":"error: assigning to 'v8::Object *volatile' from incompatible type 'v8::Value *'","date":"2013-03-26T00:23:57.345Z","type":"message"}
{"nick":"benoitc","date":"2013-03-26T00:24:30.199Z","type":"join"}
{"nick":"bnoordhuis","message":"you have an array of Persistent<Object> handles?","date":"2013-03-26T00:24:35.762Z","type":"message"}
{"nick":"tjfontaine","message":"oh the weakcallback gets a value and not an object?","date":"2013-03-26T00:24:44.777Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: yeah. i'm declaring \"Persistent<Object> p_saved[n]\"","date":"2013-03-26T00:25:09.074Z","type":"message"}
{"nick":"trevnorris","message":"then on MakeWeakCallback i'd like to store one, not dispose it, then use it later.","date":"2013-03-26T00:25:53.056Z","type":"message"}
{"nick":"bnoordhuis","message":"you can't re-set a Persistent","date":"2013-03-26T00:26:13.394Z","type":"message"}
{"nick":"bnoordhuis","message":"re-set, reassign","date":"2013-03-26T00:26:25.251Z","type":"message"}
{"nick":"trevnorris","message":"what do you mean re-set?","date":"2013-03-26T00:26:25.940Z","type":"message"}
{"nick":"bnoordhuis","message":"that is, once you create it, you can't make it point to something else","date":"2013-03-26T00:26:54.447Z","type":"message"}
{"nick":"trevnorris","message":"oh, i don't need to assign it anything. they're used as misc storage containers to track the external memory.","date":"2013-03-26T00:26:55.775Z","type":"message"}
{"nick":"trevnorris","message":"i'm attaching the persistent handles to the objects. so it's the other way around.","date":"2013-03-26T00:27:07.385Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, you've lost me :)","date":"2013-03-26T00:27:07.598Z","type":"message"}
{"nick":"bnoordhuis","message":"so where do the persistent handles point to?","date":"2013-03-26T00:27:24.063Z","type":"message"}
{"nick":"trevnorris","message":"an empty object. it's just used to store a reference of the data so gc known when to clean it up.","date":"2013-03-26T00:27:49.085Z","type":"message"}
{"nick":"bnoordhuis","message":"ah","date":"2013-03-26T00:27:55.746Z","type":"message"}
{"nick":"trevnorris","message":"here: https://github.com/trevnorris/node/blob/buffer-buffet/src/node_smalloc.cc#L77-L78","date":"2013-03-26T00:28:42.761Z","type":"message"}
{"nick":"trevnorris","message":"yeah. so all i'll need to to is remove the existing external data, and point it somewhere else.","date":"2013-03-26T00:29:06.507Z","type":"message"}
{"nick":"trevnorris","message":"that's totally do-able.","date":"2013-03-26T00:29:09.831Z","type":"message"}
{"nick":"bnoordhuis","message":"why the ObjectTemplate and NewInstance()?","date":"2013-03-26T00:30:08.401Z","type":"message"}
{"nick":"bnoordhuis","message":"just Object::New() should work, right?","date":"2013-03-26T00:30:17.192Z","type":"message"}
{"nick":"trevnorris","message":"for some reason it's faster than Object::New() in that case.","date":"2013-03-26T00:30:24.862Z","type":"message"}
{"nick":"trevnorris","message":"i'm just going off the benchmarks for that.","date":"2013-03-26T00:30:30.652Z","type":"message"}
{"nick":"bnoordhuis","message":"okay. that would surprise me but i guess anything's possible","date":"2013-03-26T00:31:40.912Z","type":"message"}
{"nick":"trevnorris","message":"i have to run, but be on later. i read through the chat logs, so if you would know the syntax for storing one to an array the help is appreciate. =)","date":"2013-03-26T00:33:23.411Z","type":"message"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-03-26T00:33:35.131Z","type":"quit"}
{"nick":"tjfontaine","message":"well, you're making a Persistent<Object> array and trying to store a Value in it :P","date":"2013-03-26T00:33:59.389Z","type":"message"}
{"nick":"kazupon","date":"2013-03-26T00:38:09.995Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Manav Rathi\u000f \u00037master\u000f * \u0002d205761\u0002 : tls: expose SSL_CTX_set_timeout via tls.createServer  Add the `sessionTim - http://git.io/cZk5Gw","date":"2013-03-26T00:39:11.852Z","type":"message"}
{"nick":"c4milo","date":"2013-03-26T00:42:03.122Z","type":"join"}
{"nick":"c4milo_","date":"2013-03-26T00:44:03.572Z","type":"join"}
{"nick":"sblom","date":"2013-03-26T00:45:46.602Z","type":"join"}
{"nick":"tjfontaine","message":"sblom: did you see my comments on 4966?","date":"2013-03-26T00:48:05.405Z","type":"message"}
{"nick":"dap","new_nick":"Guest93187","date":"2013-03-26T00:50:37.899Z","type":"nick"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-26T00:50:47.209Z","type":"quit"}
{"nick":"Guest93187","reason":"Quit: Leaving.","date":"2013-03-26T00:53:28.034Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-26T00:54:31.578Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #118 \u00037UNSTABLE\u000f osx-x64 (1/569) windows-ia32 (4/569) osx-ia32 (2/569) windows-x64 (5/569) smartos-ia32 (1/569) smartos-x64 (2/569) http://jenkins.nodejs.org/job/nodejs-master/118/","date":"2013-03-26T00:55:17.951Z","type":"message"}
{"nick":"c4milo","reason":"Ping timeout: 256 seconds","date":"2013-03-26T00:56:22.724Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-26T00:56:30.086Z","type":"join"}
{"nick":"dominictarr","date":"2013-03-26T00:59:09.986Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-26T01:01:12.216Z","type":"quit"}
{"nick":"sblom","message":"tjfontaine: Yeah--I did see that.","date":"2013-03-26T01:03:39.438Z","type":"message"}
{"nick":"dominictarr","reason":"Ping timeout: 240 seconds","date":"2013-03-26T01:03:39.784Z","type":"quit"}
{"nick":"sblom","message":"I'm digesting.","date":"2013-03-26T01:04:08.040Z","type":"message"}
{"nick":"dominictarr","date":"2013-03-26T01:07:07.492Z","type":"join"}
{"nick":"sblom","message":"tjfontaine: I don't understand all of this yet.","date":"2013-03-26T01:09:54.896Z","type":"message"}
{"nick":"sblom","message":"But if I'm reading right, your net.js change is just handling a few possibly null refs. and the real meat of your change is in tcp.c, right?","date":"2013-03-26T01:11:02.657Z","type":"message"}
{"nick":"sblom","message":"tjfontaine: I'll be away for a bit, but I'll hop back on this evening.","date":"2013-03-26T01:13:48.442Z","type":"message"}
{"nick":"sblom","date":"2013-03-26T01:13:54.083Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-26T01:23:42.824Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-26T01:25:46.795Z","type":"quit"}
{"nick":"AvianFlu","date":"2013-03-26T01:38:29.320Z","type":"join"}
{"nick":"benoitc","date":"2013-03-26T01:38:30.480Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: in that timeout/nexttick/domain/debug thing...","date":"2013-03-26T01:43:11.819Z","type":"message"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-03-26T01:43:30.283Z","type":"nick"}
{"nick":"isaacs","message":"bnoordhuis: it looks like when you run via the debugger, it's not overriding process._tickCallback with process._tickDomainCallback","date":"2013-03-26T01:43:31.983Z","type":"message"}
{"nick":"bnoordhuis","message":"that sounds plausible","date":"2013-03-26T01:44:00.470Z","type":"message"}
{"nick":"abraxas","date":"2013-03-26T01:45:31.767Z","type":"join"}
{"nick":"brson","reason":"Read error: Operation timed out","date":"2013-03-26T01:52:21.610Z","type":"quit"}
{"nick":"luxigo","date":"2013-03-26T01:54:00.106Z","type":"join"}
{"nick":"bnoordhuis","message":"it's not v8, at least","date":"2013-03-26T01:55:22.634Z","type":"message"}
{"nick":"bnoordhuis","message":"it has this bug where it will sometimes munge function arguments in debug contexts","date":"2013-03-26T01:55:39.463Z","type":"message"}
{"nick":"bnoordhuis","message":"but downgrading v8 doesn't fix it so that's probably not it","date":"2013-03-26T01:55:55.946Z","type":"message"}
{"nick":"tjfontaine","message":"ircretary: tell sblom ideally the change to net.js should not happen, instead the master process should send a valid socket even though it failed to bind","date":"2013-03-26T02:05:56.355Z","type":"message"}
{"nick":"ircretary","message":"tjfontaine: I'll be sure to tell sblom","date":"2013-03-26T02:05:56.576Z","type":"message"}
{"nick":"luxigo","reason":"Remote host closed the connection","date":"2013-03-26T02:07:13.092Z","type":"quit"}
{"nick":"TooTallNate","reason":"Quit: Computer has gone to sleep.","date":"2013-03-26T02:09:29.920Z","type":"quit"}
{"nick":"isaacs","message":"bnoordhuis: i have a test with a console.trace() shoing that it's clearly in _tickCallback, not _tickDomainCallback","date":"2013-03-26T02:15:09.478Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i think what's happening is that we're processing ticks while the swap-out happens","date":"2013-03-26T02:15:32.881Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 252 seconds","date":"2013-03-26T02:17:03.197Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-26T02:23:15.380Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-26T02:25:57.825Z","type":"join"}
{"nick":"brson","date":"2013-03-26T02:37:59.834Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-26T02:41:11.080Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-26T02:41:27.824Z","type":"join"}
{"nick":"loladiro","date":"2013-03-26T02:49:30.208Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-26T03:04:12.229Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-26T03:09:12.816Z","type":"join"}
{"nick":"wolfeidau","reason":"Read error: Connection reset by peer","date":"2013-03-26T03:09:45.803Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-03-26T03:10:02.647Z","type":"join"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-03-26T03:10:06.846Z","type":"nick"}
{"nick":"mikeal","date":"2013-03-26T03:15:11.692Z","type":"join"}
{"nick":"c4milo_","reason":"Remote host closed the connection","date":"2013-03-26T03:15:40.076Z","type":"quit"}
{"nick":"c4milo_","date":"2013-03-26T03:16:09.903Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-26T03:20:34.585Z","type":"quit"}
{"nick":"c4milo_","reason":"Ping timeout: 272 seconds","date":"2013-03-26T03:20:58.767Z","type":"quit"}
{"nick":"skebcio_","reason":"Quit: No Ping reply in 180 seconds.","date":"2013-03-26T03:21:02.963Z","type":"quit"}
{"nick":"skebcio","date":"2013-03-26T03:21:22.210Z","type":"join"}
{"nick":"hz","date":"2013-03-26T03:23:33.825Z","type":"quit"}
{"nick":"erickt_","date":"2013-03-26T03:36:19.875Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-26T03:41:31.435Z","type":"quit"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-03-26T03:41:37.733Z","type":"quit"}
{"nick":"trevnorris","date":"2013-03-26T03:41:39.285Z","type":"join"}
{"nick":"tjfontaine","message":"wb trevnorris ","date":"2013-03-26T03:42:02.708Z","type":"message"}
{"nick":"trevnorris","message":"hello","date":"2013-03-26T03:42:34.075Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-26T03:45:57.709Z","type":"quit"}
{"nick":"trevnorris","message":"i hate domains with a passion. and even more since so many developers act like they're node's saving grace.","date":"2013-03-26T03:49:24.246Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-03-26T03:50:07.451Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: \"this job would be great, if it weren't for the users\"","date":"2013-03-26T03:54:25.518Z","type":"message"}
{"nick":"trevnorris","message":"lol","date":"2013-03-26T03:54:39.644Z","type":"message"}
{"nick":"trevnorris","message":"what developers seem to completely forget is that domains require context jumping. which pretty much pisses on any performance improvements if you want to access variables outside the function scope.","date":"2013-03-26T03:54:56.927Z","type":"message"}
{"nick":"tjfontaine","message":"it's a common mantra, users could be replaced with just about everything","date":"2013-03-26T03:55:06.292Z","type":"message"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-03-26T03:57:14.533Z","type":"quit"}
{"nick":"tjfontaine","message":"trevnorris: sometimes it's a perf hit you're willing to take","date":"2013-03-26T03:57:20.566Z","type":"message"}
{"nick":"trevnorris","message":"it's not for me. i spent almost a week figuring out how to prevent the domain virus from infecting the code of those who don't want to use it.","date":"2013-03-26T03:58:20.074Z","type":"message"}
{"nick":"tjfontaine","message":"and that's admirable :)","date":"2013-03-26T03:58:37.392Z","type":"message"}
{"nick":"tjfontaine","message":"and helpful","date":"2013-03-26T03:58:43.869Z","type":"message"}
{"nick":"mikeal","date":"2013-03-26T03:59:47.596Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2013-03-26T04:03:13.803Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2013-03-26T04:12:36.602Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-26T04:33:27.023Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-26T04:44:01.860Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-26T04:44:45.329Z","type":"join"}
{"nick":"mikeal","reason":"Read error: Connection reset by peer","date":"2013-03-26T05:13:37.138Z","type":"quit"}
{"nick":"trevnorris","message":"isaacs: sup?","date":"2013-03-26T05:16:37.283Z","type":"message"}
{"nick":"mikeal","date":"2013-03-26T05:18:28.116Z","type":"join"}
{"nick":"trevnorris","message":"domain problem fixed.","date":"2013-03-26T05:22:42.925Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: and I figured out what was wrong w/ the persistent array thing. what i meant to do was create an array of void pointers, not an array of persistents themselves.","date":"2013-03-26T05:27:05.126Z","type":"message"}
{"nick":"TooTallNate","date":"2013-03-26T05:29:39.822Z","type":"join"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-03-26T05:36:43.408Z","type":"quit"}
{"nick":"SomeoneWeird","date":"2013-03-26T05:39:18.812Z","type":"join"}
{"nick":"kazupon_","date":"2013-03-26T06:05:02.128Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-03-26T06:05:18.152Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-03-26T06:24:24.329Z","type":"nick"}
{"nick":"kazupon","date":"2013-03-26T06:25:28.940Z","type":"join"}
{"nick":"kazupon_","reason":"Ping timeout: 245 seconds","date":"2013-03-26T06:27:04.892Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-03-26T06:45:19.882Z","type":"join"}
{"nick":"trevnorris","message":"indutny: you around?","date":"2013-03-26T06:49:31.068Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2013-03-26T06:49:35.649Z","type":"message"}
{"nick":"indutny","message":"sort of","date":"2013-03-26T06:49:36.580Z","type":"message"}
{"nick":"trevnorris","message":"is it possible to refer to a Persistent handle by a pointer? or do those also get moved around?","date":"2013-03-26T06:50:09.446Z","type":"message"}
{"nick":"indutny","message":"huh?","date":"2013-03-26T06:51:27.886Z","type":"message"}
{"nick":"indutny","message":"surely it's possible...","date":"2013-03-26T06:51:41.111Z","type":"message"}
{"nick":"indutny","message":"but I'm not sure that we're talking about the same thing","date":"2013-03-26T06:51:47.118Z","type":"message"}
{"nick":"trevnorris","message":"i'm trying to create an array of persistent handle pointers. and when the make weak callback is fired, instead of Disposing it save it and use it later.","date":"2013-03-26T06:52:01.121Z","type":"message"}
{"nick":"trevnorris","message":"problem is it seems the pointer in memory is being cleaned up, even though I'm not calling Dispose on the persistent handle.","date":"2013-03-26T06:55:10.790Z","type":"message"}
{"nick":"indutny","message":"oh gosh :)","date":"2013-03-26T06:56:04.753Z","type":"message"}
{"nick":"trevnorris","message":"heh. this probably seems insane.","date":"2013-03-26T06:57:09.624Z","type":"message"}
{"nick":"indutny","message":"yeah, totally looks insane :)","date":"2013-03-26T06:58:18.202Z","type":"message"}
{"nick":"trevnorris","message":"so if what I explained makes sense, think it's possible?","date":"2013-03-26T06:59:15.581Z","type":"message"}
{"nick":"indutny","message":"it should be","date":"2013-03-26T06:59:36.006Z","type":"message"}
{"nick":"trevnorris","message":"here's the snippet of what i've got: https://gist.github.com/trevnorris/5243611#file-persist-array-cc-L29","date":"2013-03-26T07:03:04.827Z","type":"message"}
{"nick":"indutny","message":"oh gosh","date":"2013-03-26T07:05:13.757Z","type":"message"}
{"nick":"trevnorris","message":"lol","date":"2013-03-26T07:05:26.707Z","type":"message"}
{"nick":"trevnorris","message":"i'll take that as my syntax is totally FUBAR.","date":"2013-03-26T07:09:55.780Z","type":"message"}
{"nick":"rendar","date":"2013-03-26T07:14:28.162Z","type":"join"}
{"nick":"trevnorris","message":"ok. well I got it working w/o using pointers. now to figure out the other...","date":"2013-03-26T07:41:48.756Z","type":"message"}
{"nick":"dominictarr","date":"2013-03-26T07:53:16.337Z","type":"join"}
{"nick":"trevnorris","message":"indutny: the array of pointers to existing persistents is killing me. every time I think my syntax is correct it gives me an \"error: taking the address of a temporary object of type\"","date":"2013-03-26T07:56:20.372Z","type":"message"}
{"nick":"dominictarr","reason":"Client Quit","date":"2013-03-26T07:57:20.672Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-26T07:59:23.484Z","type":"join"}
{"nick":"paddybyers","date":"2013-03-26T07:59:49.709Z","type":"join"}
