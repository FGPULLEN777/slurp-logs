{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-03-22T00:00:01.378Z","type":"quit"}
{"nick":"ircretary","date":"2013-03-22T00:00:08.771Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: i mean, that's why i put that stupid hack in there in the first place.","date":"2013-03-22T00:00:16.360Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: but if we can move the heuristic to libuv, and not have it in node, that'd make me a bit happier :)","date":"2013-03-22T00:00:33.045Z","type":"message"}
{"nick":"isaacs","message":"sweep the problem under the deps/uv/ rug","date":"2013-03-22T00:01:31.862Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: no, i removed that","date":"2013-03-22T00:04:30.488Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: but i mean, writev approach is good for big messages, bad for small ones","date":"2013-03-22T00:05:06.459Z","type":"message"}
{"nick":"bnoordhuis","message":"unfortunately, yes","date":"2013-03-22T00:05:29.161Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i seem to recall ryah doing something similar once upon a time, before there was a libuv","date":"2013-03-22T00:06:50.151Z","type":"message"}
{"nick":"bnoordhuis","message":"yes. that was a long time ago","date":"2013-03-22T00:07:09.374Z","type":"message"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-22T00:07:09.741Z","type":"quit"}
{"nick":"isaacs","message":"bnoordhuis: and basically coming to the same conclusion, that writev was not a savings.","date":"2013-03-22T00:07:17.074Z","type":"message"}
{"nick":"bnoordhuis","message":"also didn't work out but he had a different approach iirc","date":"2013-03-22T00:07:20.104Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-03-22T00:07:23.365Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T00:07:26.733Z","type":"quit"}
{"nick":"isaacs","message":"he had this JS-level linked-list thingie that it'd walk over.","date":"2013-03-22T00:07:35.501Z","type":"message"}
{"nick":"isaacs","message":"and pull the data out of the strings from v8, rather than convert to buffers.","date":"2013-03-22T00:07:50.980Z","type":"message"}
{"nick":"bnoordhuis","message":"the thing is, there is room for optimization - but only if you're willing to trade latency for throughput","date":"2013-03-22T00:08:29.283Z","type":"message"}
{"nick":"bnoordhuis","message":"which most web 3.2 people with their interactive game web chat cam rooms probably don't want","date":"2013-03-22T00:09:01.256Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: sorry. someone stopped by my desk.....","date":"2013-03-22T00:12:30.622Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, no worries","date":"2013-03-22T00:13:02.896Z","type":"message"}
{"nick":"trevnorris","message":"have an idea, but you can tell me if it's possible.","date":"2013-03-22T00:13:17.003Z","type":"message"}
{"nick":"trevnorris","message":"sort of a linked list w/ a heap. where if the message is < N then it's written to the heap. and if it's larger it's left out.","date":"2013-03-22T00:14:05.726Z","type":"message"}
{"nick":"benoitc","date":"2013-03-22T00:14:06.260Z","type":"join"}
{"nick":"bnoordhuis","message":"and then?","date":"2013-03-22T00:14:17.115Z","type":"message"}
{"nick":"tjfontaine","message":"https://dl.dropbox.com/u/35720/jenkins-no-cla.png https://dl.dropbox.com/u/35720/jenkins-cla.png","date":"2013-03-22T00:14:31.176Z","type":"message"}
{"nick":"c4milo","date":"2013-03-22T00:14:46.566Z","type":"join"}
{"nick":"isaacs","message":"tjfontaine: neat.","date":"2013-03-22T00:15:06.906Z","type":"message"}
{"nick":"tjfontaine","message":"indutny has apparently signed twice","date":"2013-03-22T00:15:20.296Z","type":"message"}
{"nick":"bnoordhuis","message":"hah, that's awesome","date":"2013-03-22T00:15:21.391Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: so w/o cork is slow for small buffers. w/ cork it's slow for large buffers?","date":"2013-03-22T00:16:33.136Z","type":"message"}
{"nick":"bnoordhuis","message":"pretty much yes","date":"2013-03-22T00:16:58.678Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-22T00:17:04.615Z","type":"join"}
{"nick":"trevnorris","message":"and it's slow for large buffers because of the copy?","date":"2013-03-22T00:17:09.212Z","type":"message"}
{"nick":"bnoordhuis","message":"or rather the other way around","date":"2013-03-22T00:17:13.212Z","type":"message"}
{"nick":"bnoordhuis","message":"corking slows down small buffers, speeds up large buffers","date":"2013-03-22T00:17:23.187Z","type":"message"}
{"nick":"trevnorris","message":"erm. and why does it slow down small buffers?","date":"2013-03-22T00:17:55.240Z","type":"message"}
{"nick":"bnoordhuis","message":"because each call to req.connection.write() traverses up to libuv and back","date":"2013-03-22T00:18:32.595Z","type":"message"}
{"nick":"bnoordhuis","message":"and mallocs some memory in the process","date":"2013-03-22T00:18:40.925Z","type":"message"}
{"nick":"bnoordhuis","message":"the call stack is something i could flatten or batch up","date":"2013-03-22T00:19:25.091Z","type":"message"}
{"nick":"bnoordhuis","message":"but the malloc thing is more complicatd","date":"2013-03-22T00:19:37.182Z","type":"message"}
{"nick":"dominictarr","date":"2013-03-22T00:19:56.834Z","type":"join"}
{"nick":"bnoordhuis","message":"well, i'm going to sleep on it","date":"2013-03-22T00:21:07.301Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: could always blockheap/slab the uv structures","date":"2013-03-22T00:21:10.258Z","type":"message"}
{"nick":"trevnorris","message":"so when data is sent to uv_write, does it need to copy that. or can it just use the same mem pointer","date":"2013-03-22T00:21:10.740Z","type":"message"}
{"nick":"tjfontaine","message":"or is that already happening, I forget, anyway","date":"2013-03-22T00:21:57.223Z","type":"message"}
{"nick":"bnoordhuis","message":"ask me all about it tomorrow. i'm off to bed","date":"2013-03-22T00:22:36.794Z","type":"message"}
{"nick":"bnoordhuis","message":"have a good night, guys","date":"2013-03-22T00:22:40.881Z","type":"message"}
{"nick":"tjfontaine","message":"sleep well","date":"2013-03-22T00:22:44.223Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so if i understand, data passed to uv_write needs to be copied, correct?","date":"2013-03-22T00:24:06.737Z","type":"message"}
{"nick":"loladiro","date":"2013-03-22T00:24:21.164Z","type":"join"}
{"nick":"dominictarr","reason":"Ping timeout: 264 seconds","date":"2013-03-22T00:24:31.686Z","type":"quit"}
{"nick":"trevnorris","message":"eh. i'll leave this to the professionals.","date":"2013-03-22T00:26:19.106Z","type":"message"}
{"nick":"trevnorris","action":"dives back into buffers","date":"2013-03-22T00:26:27.748Z","type":"action"}
{"nick":"bnoordhuis","reason":"Ping timeout: 245 seconds","date":"2013-03-22T00:27:05.046Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T00:27:40.121Z","type":"join"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-03-22T00:30:53.260Z","type":"quit"}
{"nick":"kazupon_","date":"2013-03-22T00:31:26.190Z","type":"join"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2013-03-22T00:31:34.937Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T00:40:20.348Z","type":"quit"}
{"nick":"kevireilly","reason":"Read error: Connection reset by peer","date":"2013-03-22T00:56:44.624Z","type":"quit"}
{"nick":"kevireillyy","date":"2013-03-22T00:56:52.420Z","type":"join"}
{"nick":"c4milo","date":"2013-03-22T01:01:24.518Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Gil Pedersen\u000f \u00037v0.10\u000f * \u0002c3aae9c\u0002 : stream: Fix stall in Transform under very specific conditions  The stall  - http://git.io/yvyGsA","date":"2013-03-22T01:03:50.449Z","type":"message"}
{"nick":"eris0xff","date":"2013-03-22T01:06:40.142Z","type":"join"}
{"nick":"eris0xff","message":"hi","date":"2013-03-22T01:06:46.346Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-03-22T01:07:59.620Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T01:09:20.296Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-03-22T01:17:46.564Z","type":"nick"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-03-22T01:19:57.356Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T01:25:14.609Z","type":"quit"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-03-22T01:27:22.817Z","type":"nick"}
{"nick":"wolfeidau","reason":"Read error: Connection reset by peer","date":"2013-03-22T01:27:23.507Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-03-22T01:27:45.518Z","type":"join"}
{"nick":"kazupon_","reason":"Remote host closed the connection","date":"2013-03-22T01:29:35.733Z","type":"quit"}
{"nick":"dpemmons","date":"2013-03-22T01:31:34.831Z","type":"join"}
{"nick":"kevireillyy","reason":"Read error: Connection reset by peer","date":"2013-03-22T01:36:45.166Z","type":"quit"}
{"nick":"kevireilly","date":"2013-03-22T01:36:46.625Z","type":"join"}
{"nick":"c4milo","date":"2013-03-22T01:38:45.594Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T01:40:50.358Z","type":"quit"}
{"nick":"erickt","date":"2013-03-22T01:42:10.307Z","type":"join"}
{"nick":"erickt","reason":"Client Quit","date":"2013-03-22T01:42:38.918Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-22T01:42:59.159Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-22T01:43:59.095Z","type":"quit"}
{"nick":"abraxas","date":"2013-03-22T01:45:23.501Z","type":"join"}
{"nick":"bradleymeck","date":"2013-03-22T01:47:18.351Z","type":"join"}
{"nick":"sblom","reason":"Ping timeout: 246 seconds","date":"2013-03-22T01:48:26.172Z","type":"quit"}
{"nick":"bradleymeck","message":"when is it safe to free a uv_async_t?","date":"2013-03-22T02:01:09.341Z","type":"message"}
{"nick":"erickt","date":"2013-03-22T02:02:39.530Z","type":"join"}
{"nick":"bradleymeck","message":"guess only after the entire loop is done… hmmm","date":"2013-03-22T02:19:55.750Z","type":"message"}
{"nick":"loladiro","date":"2013-03-22T02:32:48.473Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-22T02:34:07.232Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-22T02:42:58.599Z","type":"join"}
{"nick":"indexzero","date":"2013-03-22T02:47:17.588Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T02:48:09.216Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T02:49:16.227Z","type":"join"}
{"nick":"hz","date":"2013-03-22T03:22:02.768Z","type":"quit"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-03-22T03:30:29.154Z","type":"nick"}
{"nick":"c4milo","date":"2013-03-22T03:32:45.507Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T03:48:11.795Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T03:51:57.730Z","type":"quit"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2013-03-22T03:54:46.907Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-03-22T04:10:30.553Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-03-22T04:17:39.620Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #53 \u00037UNSTABLE\u000f linux-x64 (1/564) osx-x64 (2/564) windows-x64 (4/564) osx-ia32 (2/564) smartos-ia32 (1/564) windows-ia32 (5/564) http://jenkins.nodejs.org/job/nodejs-v0.10/53/","date":"2013-03-22T04:18:05.868Z","type":"message"}
{"nick":"indexzero","date":"2013-03-22T04:18:10.130Z","type":"join"}
{"nick":"indexzero","reason":"Client Quit","date":"2013-03-22T04:20:01.837Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-03-22T04:22:43.294Z","type":"nick"}
{"nick":"erickt","reason":"Quit: erickt","date":"2013-03-22T04:26:18.933Z","type":"quit"}
{"nick":"bradleymeck","message":"does queueing uv_async_t leak memory if i dont free it during the cb somehow??","date":"2013-03-22T04:33:39.391Z","type":"message"}
{"nick":"mikeal","date":"2013-03-22T05:58:29.272Z","type":"join"}
{"nick":"trevnorris","date":"2013-03-22T06:00:38.261Z","type":"join"}
{"nick":"bradleymeck","message":"indutny: uvcat is finally memory stable, learned to seriously dislike dynamically allocating uv_async_t in the process though","date":"2013-03-22T06:04:20.122Z","type":"message"}
{"nick":"bradleymeck","message":"release tomorrowish?","date":"2013-03-22T06:04:43.709Z","type":"message"}
{"nick":"kazupon","date":"2013-03-22T06:07:32.558Z","type":"join"}
{"nick":"dominictarr","date":"2013-03-22T06:57:54.052Z","type":"join"}
{"nick":"bradleymeck","message":"kinda funny that after 3 hours im seeing i leaked 8 bytes of memory","date":"2013-03-22T07:10:01.883Z","type":"message"}
{"nick":"rendar","date":"2013-03-22T07:22:15.719Z","type":"join"}
{"nick":"`3rdEden","date":"2013-03-22T07:24:03.619Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T07:26:22.097Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-22T07:31:35.974Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-22T07:34:02.085Z","type":"quit"}
{"nick":"`3rdEden_","date":"2013-03-22T07:40:36.572Z","type":"join"}
{"nick":"`3rdEden","new_nick":"`3E","date":"2013-03-22T07:40:43.893Z","type":"nick"}
{"nick":"`3rdEden_","new_nick":"`3rdEden","date":"2013-03-22T07:41:02.619Z","type":"nick"}
{"nick":"`3E","reason":"Remote host closed the connection","date":"2013-03-22T07:55:30.432Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T07:55:51.396Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T08:03:57.117Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-22T08:08:36.879Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T08:09:46.913Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-03-22T08:17:29.250Z","type":"nick"}
{"nick":"benoitc","date":"2013-03-22T08:19:37.022Z","type":"join"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-03-22T08:28:55.648Z","type":"nick"}
{"nick":"bradleymeck","message":"indutny: freeing in cb gave segfault","date":"2013-03-22T08:39:06.404Z","type":"message"}
{"nick":"indutny","message":"interesting","date":"2013-03-22T08:39:14.643Z","type":"message"}
{"nick":"indutny","message":"in close cb?","date":"2013-03-22T08:39:16.789Z","type":"message"}
{"nick":"bradleymeck","message":"ah, brain dead, was doing in the async_cb after the close, but close_cb could be firing after","date":"2013-03-22T08:40:34.234Z","type":"message"}
{"nick":"trevnorris","message":"indutny: having a brain fart. don't get how to use the syntax of the following:","date":"2013-03-22T08:42:36.599Z","type":"message"}
{"nick":"trevnorris","message":"template <class S> explicit V8_INLINE(Persistent(Handle<S> that)) : Handle<T>(*that) { }","date":"2013-03-22T08:42:37.162Z","type":"message"}
{"nick":"indutny","message":"укь","date":"2013-03-22T08:44:09.887Z","type":"message"}
{"nick":"indutny","message":"erm","date":"2013-03-22T08:44:16.130Z","type":"message"}
{"nick":"indutny","message":"its just construction of peristent handle from handle :)","date":"2013-03-22T08:44:26.681Z","type":"message"}
{"nick":"indutny","message":"Peristent<Value> p(handle);","date":"2013-03-22T08:44:35.349Z","type":"message"}
{"nick":"bradleymeck","message":"well well","date":"2013-03-22T08:44:55.362Z","type":"message"}
{"nick":"trevnorris","message":"ah, duh.","date":"2013-03-22T08:46:55.271Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-22T08:55:28.193Z","type":"quit"}
{"nick":"dominictarr","reason":"Read error: Connection reset by peer","date":"2013-03-22T08:57:55.354Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-22T08:58:22.182Z","type":"join"}
{"nick":"trevnorris","message":"ok. almost have the new buffers working.","date":"2013-03-22T09:05:21.409Z","type":"message"}
{"nick":"cjd","message":"cool, how'd you end up doing it?","date":"2013-03-22T09:05:56.432Z","type":"message"}
{"nick":"trevnorris","message":"thought lots of pain.","date":"2013-03-22T09:06:33.901Z","type":"message"}
{"nick":"trevnorris","message":"and by working, i mean building.","date":"2013-03-22T09:06:42.349Z","type":"message"}
{"nick":"trevnorris","message":"since SlowBuffers don't exist anymore needed to re implement several things.","date":"2013-03-22T09:07:41.871Z","type":"message"}
{"nick":"cjd","message":"hmm","date":"2013-03-22T09:08:42.834Z","type":"message"}
{"nick":"cjd","message":"still using the allocation method you had yesterday?","date":"2013-03-22T09:08:58.812Z","type":"message"}
{"nick":"cjd","message":"(allocate lots of small buffers instead of a slab)","date":"2013-03-22T09:09:11.006Z","type":"message"}
{"nick":"stagas","date":"2013-03-22T09:10:01.078Z","type":"join"}
{"nick":"cjd","message":"it occurs to me that if you could reach in to the v8 heap, small allocations would be a huge win since they would go in eden and they would be cleaned up quickly","date":"2013-03-22T09:10:04.196Z","type":"message"}
{"nick":"trevnorris","message":"indutny already did some looking into that type of thing. if he can't do it i definitely cant (or at least not anytime soon)","date":"2013-03-22T09:10:47.204Z","type":"message"}
{"nick":"cjd","action":"might write an evil patch just to benchmark it","date":"2013-03-22T09:11:20.592Z","type":"action"}
{"nick":"cjd","message":"troll you guys by distributing a patch which \"makes node.js networking 50% faster but maintainers won't accept it\"  :D","date":"2013-03-22T09:12:00.755Z","type":"message"}
{"nick":"trevnorris","message":"ugh. of course node_crypto has to use that crazy ass Buffer::Replace to hot swap the external memory.","date":"2013-03-22T09:12:43.436Z","type":"message"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-22T09:17:48.125Z","type":"quit"}
{"nick":"trevnorris","message":"indutny: how important is the whole HeapProfiler bit in node_buffer?","date":"2013-03-22T09:21:09.469Z","type":"message"}
{"nick":"loladiro","date":"2013-03-22T09:21:11.669Z","type":"join"}
{"nick":"stagas_","date":"2013-03-22T09:53:17.460Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 260 seconds","date":"2013-03-22T09:55:31.920Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T09:55:42.035Z","type":"nick"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T09:55:49.865Z","type":"quit"}
{"nick":"stagas_","date":"2013-03-22T10:01:11.939Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 256 seconds","date":"2013-03-22T10:01:24.188Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T10:01:27.445Z","type":"nick"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T10:03:52.349Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-22T10:09:08.496Z","type":"join"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-03-22T10:12:06.042Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-22T10:13:14.924Z","type":"join"}
{"nick":"Kakera","date":"2013-03-22T10:15:49.294Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-22T10:23:59.750Z","type":"quit"}
{"nick":"dominictarr","date":"2013-03-22T10:26:19.320Z","type":"join"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2013-03-22T10:27:53.765Z","type":"quit"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-22T10:33:24.558Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-22T10:40:51.630Z","type":"quit"}
{"nick":"stagas_","date":"2013-03-22T10:43:27.558Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 240 seconds","date":"2013-03-22T10:44:16.006Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T10:44:22.499Z","type":"nick"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-03-22T10:51:32.772Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-03-22T10:54:40.522Z","type":"join"}
{"nick":"indutny","message":"back","date":"2013-03-22T10:57:32.954Z","type":"message"}
{"nick":"indutny","message":"gosh, this income declaration stuff is so boring","date":"2013-03-22T10:57:39.484Z","type":"message"}
{"nick":"indutny","message":"hope I'll figure it out by monday","date":"2013-03-22T10:57:46.302Z","type":"message"}
{"nick":"stagas_","date":"2013-03-22T10:58:17.338Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 255 seconds","date":"2013-03-22T11:00:29.563Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T11:00:41.786Z","type":"nick"}
{"nick":"kazupon","date":"2013-03-22T11:03:12.200Z","type":"join"}
{"nick":"sgallagh","date":"2013-03-22T11:04:28.970Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-03-22T11:11:52.317Z","type":"join"}
{"nick":"stagas_","date":"2013-03-22T11:18:22.457Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T11:18:41.892Z","type":"quit"}
{"nick":"stagas","reason":"Ping timeout: 252 seconds","date":"2013-03-22T11:20:03.492Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T11:20:18.201Z","type":"nick"}
{"nick":"benoitc","date":"2013-03-22T11:21:08.702Z","type":"join"}
{"nick":"piscisaureus_","message":"olla nodies","date":"2013-03-22T11:21:19.087Z","type":"message"}
{"nick":"wolfeidau","date":"2013-03-22T11:24:13.352Z","type":"join"}
{"nick":"stagas_","date":"2013-03-22T11:28:17.046Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 256 seconds","date":"2013-03-22T11:30:33.080Z","type":"quit"}
{"nick":"indutny","message":"piscisaureus_: how are you doing?","date":"2013-03-22T11:31:07.807Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: great. And you?","date":"2013-03-22T11:31:20.256Z","type":"message"}
{"nick":"stagas","date":"2013-03-22T11:31:30.279Z","type":"join"}
{"nick":"indutny","message":"fine too","date":"2013-03-22T11:32:37.230Z","type":"message"}
{"nick":"indutny","message":"brb","date":"2013-03-22T11:33:17.712Z","type":"message"}
{"nick":"stagas_","reason":"Ping timeout: 264 seconds","date":"2013-03-22T11:33:48.431Z","type":"quit"}
{"nick":"stagas","reason":"Read error: Connection reset by peer","date":"2013-03-22T11:34:11.260Z","type":"quit"}
{"nick":"stagas","date":"2013-03-22T11:36:18.984Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-22T11:44:45.507Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T11:49:32.043Z","type":"quit"}
{"nick":"Kakera","reason":"Ping timeout: 260 seconds","date":"2013-03-22T11:51:00.303Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-22T11:51:09.511Z","type":"join"}
{"nick":"Kakera","date":"2013-03-22T11:52:48.720Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-03-22T11:55:07.662Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T12:10:30.864Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 256 seconds","date":"2013-03-22T12:35:09.112Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-03-22T12:42:10.672Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-03-22T12:56:25.306Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2013-03-22T12:58:45.711Z","type":"quit"}
{"nick":"hz","date":"2013-03-22T13:10:15.434Z","type":"join"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-03-22T13:13:03.517Z","type":"nick"}
{"nick":"stagas_","date":"2013-03-22T13:15:39.621Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 245 seconds","date":"2013-03-22T13:17:13.416Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T13:17:19.443Z","type":"nick"}
{"nick":"bnoordhuis","date":"2013-03-22T13:23:25.781Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-22T13:23:50.123Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-22T13:35:31.661Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T13:37:54.454Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-22T13:45:32.557Z","type":"join"}
{"nick":"kazupon","date":"2013-03-22T13:54:13.664Z","type":"join"}
{"nick":"`3rdEden","new_nick":"`3E|BAI","date":"2013-03-22T13:57:44.743Z","type":"nick"}
{"nick":"kazupon","reason":"Ping timeout: 264 seconds","date":"2013-03-22T14:03:06.526Z","type":"quit"}
{"nick":"rendar","date":"2013-03-22T14:31:33.482Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T14:37:33.707Z","type":"join"}
{"nick":"`3E|BAI","new_nick":"`3rdEden","date":"2013-03-22T14:39:54.406Z","type":"nick"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-22T14:41:39.345Z","type":"quit"}
{"nick":"indexzero","date":"2013-03-22T14:44:16.925Z","type":"join"}
{"nick":"rendar","date":"2013-03-22T14:44:34.425Z","type":"join"}
{"nick":"stagas_","date":"2013-03-22T14:53:17.652Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 264 seconds","date":"2013-03-22T14:55:18.484Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T14:55:27.182Z","type":"nick"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-03-22T14:56:35.786Z","type":"nick"}
{"nick":"stagas_","date":"2013-03-22T15:07:54.026Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 276 seconds","date":"2013-03-22T15:09:57.459Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T15:10:03.582Z","type":"nick"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-22T15:10:53.126Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T15:18:14.912Z","type":"join"}
{"nick":"isaacs","message":"mornin piscisaureus_ ","date":"2013-03-22T15:18:19.306Z","type":"message"}
{"nick":"piscisaureus_","message":"morning isaacs","date":"2013-03-22T15:18:27.701Z","type":"message"}
{"nick":"piscisaureus_","message":"how are you doing?","date":"2013-03-22T15:18:30.594Z","type":"message"}
{"nick":"isaacs","message":"good","date":"2013-03-22T15:18:33.885Z","type":"message"}
{"nick":"loladiro","date":"2013-03-22T15:21:19.155Z","type":"join"}
{"nick":"piscisaureus_","message":"isaacs: anything exciting going on in the valley these days?","date":"2013-03-22T15:24:29.800Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 256 seconds","date":"2013-03-22T15:26:11.770Z","type":"quit"}
{"nick":"dap","date":"2013-03-22T15:27:00.689Z","type":"join"}
{"nick":"indutny","message":"there's some people going in nearby valley","date":"2013-03-22T15:28:00.395Z","type":"message"}
{"nick":"indutny","message":"not sure if they're exciting","date":"2013-03-22T15:28:03.955Z","type":"message"}
{"nick":"indutny","message":"but I can ask them if you want","date":"2013-03-22T15:28:08.467Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-22T15:41:36.176Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T15:44:20.212Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-22T15:45:09.422Z","type":"join"}
{"nick":"piscisaureus_","message":"There's valleys in russia?","date":"2013-03-22T15:45:31.844Z","type":"message"}
{"nick":"`3rdEden","reason":"Quit: bbl","date":"2013-03-22T15:51:12.731Z","type":"quit"}
{"nick":"tjfontaine","message":"valleys of ice and snow","date":"2013-03-22T15:52:16.102Z","type":"message"}
{"nick":"kazupon","date":"2013-03-22T15:59:07.597Z","type":"join"}
{"nick":"isaacs","message":"piscisaureus_: probably not.","date":"2013-03-22T15:59:47.071Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but up in oakland and sf, it's always a fun time happy adventure magical suprise parade party","date":"2013-03-22T16:00:08.738Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: nice :)","date":"2013-03-22T16:00:21.940Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: silicon valley is boring town, though","date":"2013-03-22T16:00:24.296Z","type":"message"}
{"nick":"isaacs","message":"anyone wanna review this? https://github.com/joyent/node/pull/5115","date":"2013-03-22T16:05:57.392Z","type":"message"}
{"nick":"Ralt_","reason":"Remote host closed the connection","date":"2013-03-22T16:08:07.212Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-22T16:14:11.117Z","type":"quit"}
{"nick":"piscisaureus_","new_nick":"piscisaureus_mee","date":"2013-03-22T16:14:14.344Z","type":"nick"}
{"nick":"bnoordhuis","date":"2013-03-22T16:16:37.669Z","type":"join"}
{"nick":"sblom","date":"2013-03-22T16:19:58.534Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T16:20:22.821Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-22T16:20:43.281Z","type":"join"}
{"nick":"tjfontaine","message":"bnoordhuis: llvm-g++ (4.2) osx-ia32 also generates the wrong NaN value","date":"2013-03-22T16:28:25.561Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: so we are shipping a product that for one platform-arch combo is generating different results, regardless of the two compiler options we have :)","date":"2013-03-22T16:30:10.865Z","type":"message"}
{"nick":"tjfontaine","message":"I'm re-rebuilding to double check that","date":"2013-03-22T16:32:22.644Z","type":"message"}
{"nick":"tjfontaine","message":"yup, indeed","date":"2013-03-22T16:32:44.193Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-03-22T16:34:59.319Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T16:38:29.932Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T16:39:19.582Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T16:41:28.659Z","type":"quit"}
{"nick":"loladiro","date":"2013-03-22T16:44:23.811Z","type":"join"}
{"nick":"mikeal","date":"2013-03-22T16:44:30.319Z","type":"join"}
{"nick":"kazupon","date":"2013-03-22T16:44:34.540Z","type":"join"}
{"nick":"benoitc","date":"2013-03-22T16:45:14.154Z","type":"join"}
{"nick":"stagas_","date":"2013-03-22T16:49:50.114Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 256 seconds","date":"2013-03-22T16:51:13.467Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T16:51:14.513Z","type":"nick"}
{"nick":"kazupon","reason":"Ping timeout: 258 seconds","date":"2013-03-22T16:53:03.422Z","type":"quit"}
{"nick":"isaacs","message":"tjfontaine: any idea why http://jenkins.nodejs.org/job/node-pullrequest/DESTCPU=ia32,label=osx/90/tapTestReport/test.tap-27/ is failing?","date":"2013-03-22T16:53:09.821Z","type":"message"}
{"nick":"isaacs","message":"er, test-child-process-fork-getconnections.js","date":"2013-03-22T16:53:17.769Z","type":"message"}
{"nick":"isaacs","message":"indutny: ^","date":"2013-03-22T16:53:19.861Z","type":"message"}
{"nick":"isaacs","message":"seems like it's only in darwin ia32","date":"2013-03-22T16:53:24.757Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T16:53:26.721Z","type":"quit"}
{"nick":"tjfontaine","message":"hm","date":"2013-03-22T16:53:34.066Z","type":"message"}
{"nick":"loladiro","date":"2013-03-22T16:58:09.166Z","type":"join"}
{"nick":"qmx","new_nick":"qmx|lunch","date":"2013-03-22T17:01:32.699Z","type":"nick"}
{"nick":"tjfontaine","message":"isaacs: are you getting that to fail reliably?","date":"2013-03-22T17:02:52.198Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: nope.","date":"2013-03-22T17:02:58.717Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: compiling in ia32 mode now to see if i can get it to","date":"2013-03-22T17:03:08.613Z","type":"message"}
{"nick":"isaacs","message":"don't really see why that'd be a difference, though","date":"2013-03-22T17:03:17.833Z","type":"message"}
{"nick":"tjfontaine","message":"ya I have seen it fail other places, like windows","date":"2013-03-22T17:04:06.653Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-03-22T17:07:56.699Z","type":"message"}
{"nick":"c4milo","date":"2013-03-22T17:08:14.361Z","type":"join"}
{"nick":"isaacs","message":"ok, this fails reliably:","date":"2013-03-22T17:10:24.098Z","type":"message"}
{"nick":"isaacs","message":"for i in `seq 100`; do echo $i; ./node test/simple/test-child-process-fork-getconnections.js || break; done","date":"2013-03-22T17:10:24.979Z","type":"message"}
{"nick":"isaacs","message":"erm.. just as i said that it passed.","date":"2013-03-22T17:10:33.737Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-03-22T17:10:36.955Z","type":"message"}
{"nick":"tjfontaine","message":"mine has yet to fail locally","date":"2013-03-22T17:10:47.694Z","type":"message"}
{"nick":"isaacs","message":"i couldn't get it to fail ever in x64 darwin mode.","date":"2013-03-22T17:11:02.099Z","type":"message"}
{"nick":"tjfontaine","message":"I'm still in ia32 from my last test","date":"2013-03-22T17:11:15.119Z","type":"message"}
{"nick":"isaacs","message":"but in ia32 darwin, it's usually failing within 100 runs","date":"2013-03-22T17:11:17.897Z","type":"message"}
{"nick":"tjfontaine","message":"ah there we go, finally 486","date":"2013-03-22T17:12:55.113Z","type":"message"}
{"nick":"isaacs","message":"always with the same AssertionError: 1 == 12 on     assert.equal(sent, count);","date":"2013-03-22T17:13:57.204Z","type":"message"}
{"nick":"tjfontaine","message":"oh you must be on v0.10","date":"2013-03-22T17:14:29.932Z","type":"message"}
{"nick":"piscisaureus_mee","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-03-22T17:16:30.472Z","type":"quit"}
{"nick":"isaacs","message":"yeah","date":"2013-03-22T17:17:10.138Z","type":"message"}
{"nick":"isaacs","message":"so, it looks like it's killing the child before all the close messages have been sent","date":"2013-03-22T17:17:24.490Z","type":"message"}
{"nick":"tjfontaine","message":"I'm up to 600 on v0.10-ia32-osx","date":"2013-03-22T17:17:58.260Z","type":"message"}
{"nick":"tjfontaine","message":"sigh, 1k runs clean","date":"2013-03-22T17:18:42.329Z","type":"message"}
{"nick":"isaacs","message":"ok, so, i think i've got an idea of what's happening","date":"2013-03-22T17:18:58.583Z","type":"message"}
{"nick":"isaacs","message":"but not why it's happening or what SHOULD be happening.","date":"2013-03-22T17:19:04.934Z","type":"message"}
{"nick":"isaacs","message":"ie, if it's a bug in the code or in the test.","date":"2013-03-22T17:19:12.001Z","type":"message"}
{"nick":"kazupon","date":"2013-03-22T17:19:46.666Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 245 seconds","date":"2013-03-22T17:21:15.018Z","type":"quit"}
{"nick":"isaacs","message":"looks like the server is emitting 'close' before all the sockets are closed by the child.","date":"2013-03-22T17:21:18.785Z","type":"message"}
{"nick":"tjfontaine","message":"yes, I agree with that assesment","date":"2013-03-22T17:21:54.356Z","type":"message"}
{"nick":"isaacs","message":"ah!","date":"2013-03-22T17:22:20.169Z","type":"message"}
{"nick":"isaacs","message":"calling getConnections","date":"2013-03-22T17:22:20.772Z","type":"message"}
{"nick":"isaacs","message":"getConnections [Error: Slave closed before reply] undefined","date":"2013-03-22T17:22:21.590Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 240 seconds","date":"2013-03-22T17:24:15.515Z","type":"quit"}
{"nick":"isaacs","message":"btw, running `make docclean; make -j4 doc` in another term makes it fail more often","date":"2013-03-22T17:26:13.003Z","type":"message"}
{"nick":"isaacs","message":"race conditions ftw.","date":"2013-03-22T17:26:17.347Z","type":"message"}
{"nick":"stagas","date":"2013-03-22T17:26:59.473Z","type":"join"}
{"nick":"tjfontaine","message":"that probably explains why we see it more on the osx buildslave, since that laptop is in troublesome condition","date":"2013-03-22T17:27:39.942Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T17:28:26.457Z","type":"quit"}
{"nick":"isaacs","message":"yep","date":"2013-03-22T17:29:08.525Z","type":"message"}
{"nick":"isaacs","message":"probably has nothing to do with ia32 at all","date":"2013-03-22T17:29:18.411Z","type":"message"}
{"nick":"isaacs","message":"just speed issue","date":"2013-03-22T17:29:22.242Z","type":"message"}
{"nick":"`3E","date":"2013-03-22T17:31:46.591Z","type":"join"}
{"nick":"isaacs","message":"WILD!  so, sometimes what the child gets is not a net.Socket, but a tcp_wrap.TCP handle!","date":"2013-03-22T17:34:20.173Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T17:34:26.624Z","type":"quit"}
{"nick":"tjfontaine","message":"oh there be dragons","date":"2013-03-22T17:34:52.889Z","type":"message"}
{"nick":"benoitc","date":"2013-03-22T17:37:14.631Z","type":"join"}
{"nick":"isaacs","message":"ok... so, apparently, when we do child.send({id:n, cmd:'close'}) a TCP is getting sent as well.","date":"2013-03-22T17:39:06.399Z","type":"message"}
{"nick":"isaacs","message":"strange..","date":"2013-03-22T17:39:09.969Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-22T17:40:13.449Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2013-03-22T17:42:31.831Z","type":"quit"}
{"nick":"hz","date":"2013-03-22T17:44:05.891Z","type":"quit"}
{"nick":"trevnorris","date":"2013-03-22T17:45:51.396Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T17:47:20.671Z","type":"quit"}
{"nick":"isaacs","message":"ok... so that's odd.  if you have an IPC channel, then the last socket you send gets its handle sent for every subsequent send.","date":"2013-03-22T17:50:43.453Z","type":"message"}
{"nick":"bradleymeck","message":"anyone have a uv-app boilerplate, and an idea why gyp when making new projects is convinced this mac is arch=i386 instead of the proper x86_64","date":"2013-03-22T17:50:58.786Z","type":"message"}
{"nick":"benoitc","date":"2013-03-22T17:52:14.364Z","type":"join"}
{"nick":"stagas_","date":"2013-03-22T17:57:23.941Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: do you know what the HeapProfiler code was used for in node_buffer?","date":"2013-03-22T17:59:15.711Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: no idea","date":"2013-03-22T17:59:27.336Z","type":"message"}
{"nick":"trevnorris","message":"coolio","date":"2013-03-22T17:59:33.510Z","type":"message"}
{"nick":"saghul","message":"bradleymeck try this: https://github.com/bnoordhuis/libuv-chat","date":"2013-03-22T17:59:40.205Z","type":"message"}
{"nick":"stagas","reason":"Ping timeout: 246 seconds","date":"2013-03-22T18:00:02.260Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T18:00:03.785Z","type":"nick"}
{"nick":"trevnorris","message":"isaacs: new buffers are building. now just working out the js changes.","date":"2013-03-22T18:00:32.780Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: btw when you have time, you should tweak lib/assert.js to work with the new Error semantics","date":"2013-03-22T18:01:04.559Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: you mean like the changes I made to lib/fs.js in 0bba590?","date":"2013-03-22T18:03:55.318Z","type":"message"}
{"nick":"bradleymeck","message":"saghul: thanks much","date":"2013-03-22T18:04:33.285Z","type":"message"}
{"nick":"trevnorris","message":"tried to include changes to assert.js as well, but was getting difficult to make assumptions about the error string.","date":"2013-03-22T18:04:47.404Z","type":"message"}
{"nick":"trevnorris","message":"i'll give it a go again","date":"2013-03-22T18:04:53.869Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: would it not work to Error.call(this, this.toString()) instead of doing the captureStackTrace portion?","date":"2013-03-22T18:06:00.083Z","type":"message"}
{"nick":"isaacs","message":"thisis weird....","date":"2013-03-22T18:08:24.594Z","type":"message"}
{"nick":"isaacs","message":"in the failing cases with this test, we're getting the same fd sent multiple times into the child.","date":"2013-03-22T18:08:35.771Z","type":"message"}
{"nick":"isaacs","message":"in the passing cases, it goes 12, 13, 14, ...","date":"2013-03-22T18:08:43.300Z","type":"message"}
{"nick":"isaacs","message":"in the failures, it's 12, 13, 12, 13, ...","date":"2013-03-22T18:08:52.372Z","type":"message"}
{"nick":"tjfontaine","message":"well if the slave dies and the next one would get 12","date":"2013-03-22T18:09:15.857Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: well. since fd's are reused, isn't it possible that the fd is failing then being reused?","date":"2013-03-22T18:09:24.337Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-03-22T18:10:23.602Z","type":"message"}
{"nick":"isaacs","message":"but taht shoudln't be happening","date":"2013-03-22T18:10:27.298Z","type":"message"}
{"nick":"trevnorris","message":"ah, so that's the strange part. got ya","date":"2013-03-22T18:10:39.088Z","type":"message"}
{"nick":"isaacs","message":"yeah, by the time we get to the 'close' message, it's already been closed.","date":"2013-03-22T18:12:00.737Z","type":"message"}
{"nick":"isaacs","message":"*by the other side*","date":"2013-03-22T18:12:04.747Z","type":"message"}
{"nick":"isaacs","message":"which is *extra* weird.","date":"2013-03-22T18:12:12.006Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: well son of a bitch. just changing line 49 to Error.call() it does work. nice job.","date":"2013-03-22T18:12:57.584Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: groovy","date":"2013-03-22T18:14:08.338Z","type":"message"}
{"nick":"tjfontaine","message":"bradleymeck: they should scrape github tags","date":"2013-03-22T18:14:55.497Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T18:15:18.015Z","type":"quit"}
{"nick":"bradleymeck","message":"should != do, in reality i want to figure out a sane way to make a /dist/ replica farm","date":"2013-03-22T18:16:43.089Z","type":"message"}
{"nick":"benoitc","date":"2013-03-22T18:16:45.191Z","type":"join"}
{"nick":"bradleymeck","message":"on that note, when doing git remote-ls wth is the ^{} by some tags","date":"2013-03-22T18:17:41.037Z","type":"message"}
{"nick":"tjfontaine","message":"ya, I was also going to suggest a git command","date":"2013-03-22T18:18:45.966Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: aha, it looks like we're getting an EOF in the client, and then closing it before the child proc has a chance to.","date":"2013-03-22T18:30:12.438Z","type":"message"}
{"nick":"tjfontaine","message":"ah, from stdin or ipc?","date":"2013-03-22T18:32:09.958Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-03-22T18:32:22.738Z","type":"join"}
{"nick":"trevnorris","message":"tjfontaine: ok. so .call shows the assertion message, but doesn't show the stack...","date":"2013-03-22T18:33:15.976Z","type":"message"}
{"nick":"trevnorris","message":"if i remember the v8 code, it uses the message passed directly, and not .message","date":"2013-03-22T18:33:41.866Z","type":"message"}
{"nick":"trevnorris","message":"which is why no message is showing up.","date":"2013-03-22T18:33:51.301Z","type":"message"}
{"nick":"tjfontaine","message":"which is why I suggested the .call(this, this.toString()), does calling captureStackTrace after that help?","date":"2013-03-22T18:34:31.707Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: no. because the message has already been formatted at that point.","date":"2013-03-22T18:35:16.318Z","type":"message"}
{"nick":"trevnorris","message":" /message/stack","date":"2013-03-22T18:35:33.289Z","type":"message"}
{"nick":"tjfontaine","message":"ok that's what I thought you meant","date":"2013-03-22T18:35:47.306Z","type":"message"}
{"nick":"cjd","message":"var err; try { thingThatThrowsError(); } catch(e) { err=e; throw e; } finally { err.stack = err.stack.replace(/oldMsg/, 'newMsg'); }","date":"2013-03-22T18:36:57.002Z","type":"message"}
{"nick":"cjd","message":"wonder if that would work","date":"2013-03-22T18:37:04.079Z","type":"message"}
{"nick":"tjfontaine","message":"it does-ish, that's what he does in fs currently","date":"2013-03-22T18:37:27.685Z","type":"message"}
{"nick":"cjd","message":"hah neat","date":"2013-03-22T18:37:54.270Z","type":"message"}
{"nick":"piscisaureus_","message":"Maybe, erm, fiddle with v8 a bit?","date":"2013-03-22T18:39:36.761Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: the change to v8 was intentional. there was a bug open about this, where they solidified it.","date":"2013-03-22T18:40:19.284Z","type":"message"}
{"nick":"piscisaureus_","message":"trevnorris: which?","date":"2013-03-22T18:40:35.320Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus_: we're talking about the Error message right?","date":"2013-03-22T18:40:59.417Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah","date":"2013-03-22T18:41:03.602Z","type":"message"}
{"nick":"tjfontaine","message":"capturing stack traces on instantiation, and basically making the delayed .message setting useless :)","date":"2013-03-22T18:41:08.007Z","type":"message"}
{"nick":"piscisaureus_","message":"you just need to set some hooks to change the message right?","date":"2013-03-22T18:41:23.173Z","type":"message"}
{"nick":"trevnorris","message":"so v8 used to lazy load the stack. so you could pop in a message after it was instantiated, then the message would be used in the stack string.","date":"2013-03-22T18:41:35.684Z","type":"message"}
{"nick":"AvianFlu","date":"2013-03-22T18:41:36.055Z","type":"join"}
{"nick":"trevnorris","message":"but now the stack is generated immediately.","date":"2013-03-22T18:41:46.423Z","type":"message"}
{"nick":"piscisaureus_","message":"So do you actually want to fiddle with the stack trace?","date":"2013-03-22T18:42:10.512Z","type":"message"}
{"nick":"piscisaureus_","message":"or just with the message that appears \"above\" the stack trace?","date":"2013-03-22T18:42:24.321Z","type":"message"}
{"nick":"trevnorris","message":"it's unreliable. i did something similar in lib/fs.js but it is crap.","date":"2013-03-22T18:42:28.160Z","type":"message"}
{"nick":"cjd","message":"err.stack contains the message which has to be altered IIRC","date":"2013-03-22T18:42:36.836Z","type":"message"}
{"nick":"trevnorris","message":"look at the first DEBUG in fs.js and you'll see what I mena.","date":"2013-03-22T18:42:48.091Z","type":"message"}
{"nick":"tjfontaine","message":"piscisaureus_: it would be nice if our assertion messages appeared above the stack","date":"2013-03-22T18:42:50.737Z","type":"message"}
{"nick":"trevnorris","message":" /mena/mean","date":"2013-03-22T18:42:54.067Z","type":"message"}
{"nick":"tjfontaine","message":"or at the very least included the message :)","date":"2013-03-22T18:43:17.840Z","type":"message"}
{"nick":"isaacs","action":"yoga class&","date":"2013-03-22T18:44:42.271Z","type":"action"}
{"nick":"trevnorris","message":"heh, ok. put together one crap solution. i'll pr it and see what you think","date":"2013-03-22T18:51:26.747Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T18:52:41.656Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-22T18:56:15.358Z","type":"join"}
{"nick":"sblom","reason":"Ping timeout: 252 seconds","date":"2013-03-22T19:13:54.535Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: the problem is that the stack is generated before toString is called to format the message.","date":"2013-03-22T19:15:56.436Z","type":"message"}
{"nick":"trevnorris","message":"tried creating a minimal test case, but that works","date":"2013-03-22T19:16:03.950Z","type":"message"}
{"nick":"stagas_","date":"2013-03-22T19:16:57.641Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T19:17:40.007Z","type":"quit"}
{"nick":"stagas","reason":"Ping timeout: 240 seconds","date":"2013-03-22T19:19:15.339Z","type":"quit"}
{"nick":"stagas_","new_nick":"stagas","date":"2013-03-22T19:19:23.009Z","type":"nick"}
{"nick":"kazupon","date":"2013-03-22T19:20:53.100Z","type":"join"}
{"nick":"benoitc","date":"2013-03-22T19:22:15.407Z","type":"join"}
{"nick":"loladiro","date":"2013-03-22T19:23:15.203Z","type":"join"}
{"nick":"trevnorris","message":"and when I run AssertionError manually it displays the message fine. wtf...","date":"2013-03-22T19:25:58.487Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 272 seconds","date":"2013-03-22T19:26:00.886Z","type":"quit"}
{"nick":"qmx|lunch","new_nick":"qmx","date":"2013-03-22T19:26:53.924Z","type":"nick"}
{"nick":"bradleymeck","reason":"Ping timeout: 245 seconds","date":"2013-03-22T19:38:21.833Z","type":"quit"}
{"nick":"trevnorris","message":"tjfontaine: here ya go: 5123","date":"2013-03-22T19:42:51.224Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: that seems relatively sane to me","date":"2013-03-22T19:44:15.040Z","type":"message"}
{"nick":"trevnorris","message":"i just hate doing string manipulations that way.","date":"2013-03-22T19:44:40.260Z","type":"message"}
{"nick":"trevnorris","message":"reminds me of hacking through crap string based html templates","date":"2013-03-22T19:44:52.695Z","type":"message"}
{"nick":"tjfontaine","message":"indeed","date":"2013-03-22T19:45:14.916Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-22T19:46:36.830Z","type":"join"}
{"nick":"sblom","date":"2013-03-22T19:46:40.369Z","type":"join"}
{"nick":"bradleymeck","message":"without a recompile*","date":"2013-03-22T19:46:52.546Z","type":"message"}
{"nick":"tjfontaine","message":"hmm?","date":"2013-03-22T19:47:42.319Z","type":"message"}
{"nick":"bradleymeck","message":"i guess recompiling is just the way to go to change node_prefix in the config?","date":"2013-03-22T19:50:31.345Z","type":"message"}
{"nick":"bradleymeck","message":"seems kinda overkill","date":"2013-03-22T19:50:37.222Z","type":"message"}
{"nick":"tjfontaine","message":"doesn't generally recompile the entire tree, just one or two objects and then relinks","date":"2013-03-22T19:51:05.093Z","type":"message"}
{"nick":"bradleymeck","message":"yea","date":"2013-03-22T19:51:14.510Z","type":"message"}
{"nick":"tjfontaine","message":"bradleymeck: http://logs.nodejs.org/libuv/latest#19:46:36.830 there's a bit of context missing, you appeared to join and ask \"without a recompile\"","date":"2013-03-22T19:52:27.495Z","type":"message"}
{"nick":"bradleymeck","message":"tjfontaine: interesting, just trying to setup a local install of node when bundling apps, and changing the node_prefix of the executable seems the right thing to do","date":"2013-03-22T19:53:56.884Z","type":"message"}
{"nick":"bradleymeck","message":"could change it in js i guess?","date":"2013-03-22T19:54:02.225Z","type":"message"}
{"nick":"tjfontaine","message":"I guess the question is how is it relevant?","date":"2013-03-22T19:55:37.300Z","type":"message"}
{"nick":"bradleymeck","message":"posterity mostly","date":"2013-03-22T19:55:54.301Z","type":"message"}
{"nick":"bradleymeck","message":"but i have some code deep in our app manager that checks the node_prefix, i can just rip it out","date":"2013-03-22T19:56:14.192Z","type":"message"}
{"nick":"piscisaureus_","reason":"Read error: No route to host","date":"2013-03-22T19:56:49.645Z","type":"quit"}
{"nick":"sgallagh","reason":"Remote host closed the connection","date":"2013-03-22T20:00:24.048Z","type":"quit"}
{"nick":"tjfontaine","message":"isaacs: I'm guessing that the get-connections failure is a similar experience to what's happening for child-process-fork-net2 http://jenkins.nodejs.org/job/node-pullrequest/DESTCPU=ia32,label=osx/99/tapTestReport/test.tap-29/","date":"2013-03-22T20:00:27.927Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-22T20:05:14.620Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-22T20:08:23.810Z","type":"quit"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T20:09:48.886Z","type":"quit"}
{"nick":"bnoordhuis","date":"2013-03-22T20:10:51.629Z","type":"join"}
{"nick":"piscisaureus_","date":"2013-03-22T20:12:21.700Z","type":"join"}
{"nick":"benoitc","date":"2013-03-22T20:16:15.366Z","type":"join"}
{"nick":"piscisaureus_","reason":"Ping timeout: 272 seconds","date":"2013-03-22T20:21:06.844Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T20:21:30.984Z","type":"join"}
{"nick":"indexzero","date":"2013-03-22T20:22:39.644Z","type":"join"}
{"nick":"MI6","message":"\u0002nodejs-master\u0002: #110 \u00037UNSTABLE\u000f windows-ia32 (4/565) osx-ia32 (4/565) windows-x64 (5/565) http://jenkins.nodejs.org/job/nodejs-master/110/","date":"2013-03-22T20:23:05.403Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 258 seconds","date":"2013-03-22T20:26:10.817Z","type":"quit"}
{"nick":"trevnorris","message":"bnoordhuis: you know what the HeapProfiler code in node_buffer is for? no one else does.","date":"2013-03-22T20:26:20.051Z","type":"message"}
{"nick":"bnoordhuis","message":"trevnorris: i do and it can't go","date":"2013-03-22T20:26:32.970Z","type":"message"}
{"nick":"bnoordhuis","message":"it makes buffers get accounted for properly in heap snapshots","date":"2013-03-22T20:26:55.011Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: it'll just get moved. not removed.","date":"2013-03-22T20:27:05.191Z","type":"message"}
{"nick":"bnoordhuis","message":"okay. what for?","date":"2013-03-22T20:27:29.706Z","type":"message"}
{"nick":"trevnorris","message":"since buffers aren't allocating their own memory anymore, it'll just get moved to the new thing i'm working on","date":"2013-03-22T20:28:02.540Z","type":"message"}
{"nick":"tjfontaine","message":"to be beside where he does the [de]allocation in his new model","date":"2013-03-22T20:28:03.728Z","type":"message"}
{"nick":"trevnorris","message":"wasn't there an agreement that _charsWritten could go?","date":"2013-03-22T20:34:02.241Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T20:34:05.256Z","type":"quit"}
{"nick":"trevnorris","message":"changing that value in js land is enough a performance hit that I care.","date":"2013-03-22T20:34:16.701Z","type":"message"}
{"nick":"mikeal","date":"2013-03-22T20:39:19.057Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 258 seconds","date":"2013-03-22T20:49:56.630Z","type":"quit"}
{"nick":"tjfontaine","message":"bnoordhuis: btw I know you guys want to start doing proper uv releases, so the upgrade pattern in https://github.com/joyent/node/pull/5125 is probably wrong","date":"2013-03-22T21:03:15.967Z","type":"message"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2013-03-22T21:14:07.861Z","type":"quit"}
{"nick":"mikeal","date":"2013-03-22T21:15:48.373Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 252 seconds","date":"2013-03-22T21:20:20.139Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T21:22:02.611Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 276 seconds","date":"2013-03-22T21:26:57.460Z","type":"quit"}
{"nick":"TooTallNate","date":"2013-03-22T21:37:33.895Z","type":"join"}
{"nick":"stephank","reason":"Read error: Operation timed out","date":"2013-03-22T21:42:27.028Z","type":"quit"}
{"nick":"TooTallNate","message":"isaacs: you gotta update node-gyp in npm pretty soon","date":"2013-03-22T21:46:40.337Z","type":"message"}
{"nick":"TooTallNate","message":"it's at v0.9.x now","date":"2013-03-22T21:46:47.406Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: sweet","date":"2013-03-22T21:46:53.296Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: yeah, could be related","date":"2013-03-22T21:47:15.180Z","type":"message"}
{"nick":"stephank","date":"2013-03-22T21:49:02.997Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-03-22T21:49:36.341Z","type":"quit"}
{"nick":"tjfontaine","message":"isaacs: the cluster-bind-twice on windows could be as well, failing to write to ipc because it's already been closed, I can see in the second worker that process._errno is EOF","date":"2013-03-22T21:50:06.481Z","type":"message"}
{"nick":"hz","date":"2013-03-22T21:51:15.479Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T21:57:24.031Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-22T22:02:16.081Z","type":"join"}
{"nick":"bradleymeck","date":"2013-03-22T22:05:49.964Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: the HeapProfiler code is what allows me to see buffers with tools like your node-profiler?","date":"2013-03-22T22:08:48.359Z","type":"message"}
{"nick":"isaacs","message":"ok, the JavaScript here is clearly not in error.","date":"2013-03-22T22:13:03.550Z","type":"message"}
{"nick":"isaacs","message":"we're getting an EOF out of libuv","date":"2013-03-22T22:13:11.324Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: you around?","date":"2013-03-22T22:13:25.899Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: how do you reproduce the error?","date":"2013-03-22T22:13:48.312Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: i run this:","date":"2013-03-22T22:14:06.108Z","type":"message"}
{"nick":"isaacs","message":"while (make -j4 && for i in `seq 100`; do echo $i; ./node test/simple/test-child-process-fork-getconnections.js || break; done); do echo \"still going...\"; done","date":"2013-03-22T22:14:06.889Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-03-22T22:14:14.910Z","type":"message"}
{"nick":"trevnorris","message":"while back i found a thread race condition where one thread would delete the handle before the other.","date":"2013-03-22T22:14:17.374Z","type":"message"}
{"nick":"trevnorris","message":"that was trying to access it","date":"2013-03-22T22:14:42.247Z","type":"message"}
{"nick":"mikeal1","date":"2013-03-22T22:16:15.490Z","type":"join"}
{"nick":"trevnorris","message":"isaacs: how long should it take?","date":"2013-03-22T22:22:08.513Z","type":"message"}
{"nick":"Kakera","reason":"Ping timeout: 252 seconds","date":"2013-03-22T22:22:22.562Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T22:22:38.338Z","type":"join"}
{"nick":"isaacs","message":"trevnorris: usually only a few minutes","date":"2013-03-22T22:22:53.397Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: one or two passes.","date":"2013-03-22T22:22:58.819Z","type":"message"}
{"nick":"isaacs","message":"trevnorris: fwiw, i've had greater sucess failing it on ia32 than x64, on darwin","date":"2013-03-22T22:23:13.183Z","type":"message"}
{"nick":"tjfontaine","message":"though it's easiest to reproduce on osx and windows","date":"2013-03-22T22:23:15.360Z","type":"message"}
{"nick":"isaacs","message":"yes","date":"2013-03-22T22:23:20.753Z","type":"message"}
{"nick":"trevnorris","message":"yeah... been running for ~5 mins and nothing","date":"2013-03-22T22:23:33.965Z","type":"message"}
{"nick":"trevnorris","message":"well, since you posted it","date":"2013-03-22T22:23:46.880Z","type":"message"}
{"nick":"piscisaureus_","date":"2013-03-22T22:25:26.677Z","type":"join"}
{"nick":"piscisaureus_","message":"what is the preferred way of getting node on a mac?","date":"2013-03-22T22:25:38.702Z","type":"message"}
{"nick":"piscisaureus_","message":"using the installer? or do most people use other means?","date":"2013-03-22T22:25:48.211Z","type":"message"}
{"nick":"tjfontaine","message":"installer","date":"2013-03-22T22:26:27.444Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: make install","date":"2013-03-22T22:26:37.743Z","type":"message"}
{"nick":"trevnorris","message":"isaacs: just out of curiosity, can you tell me if this reproduces it: https://gist.github.com/trevnorris/5225247","date":"2013-03-22T22:26:43.995Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: but most people click the green button","date":"2013-03-22T22:26:46.329Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-22T22:26:51.273Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 252 seconds","date":"2013-03-22T22:27:26.173Z","type":"quit"}
{"nick":"piscisaureus_","message":"isaacs: I was doing a quick count on downloads. *if* most people use the installer then there are almost 4 times as many windows users than there are mac users","date":"2013-03-22T22:28:05.812Z","type":"message"}
{"nick":"piscisaureus_","message":"or, windows people are 4x dumber and they download the file 4 times before installing :-p","date":"2013-03-22T22:28:32.092Z","type":"message"}
{"nick":"tjfontaine","message":"or windows users are more trained to update often","date":"2013-03-22T22:29:01.066Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: or a lot of mac users install from brew or src.","date":"2013-03-22T22:29:02.974Z","type":"message"}
{"nick":"piscisaureus_","message":"yes, so that's why I was asking how people obtain it","date":"2013-03-22T22:29:16.133Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: how are you counting downloads?","date":"2013-03-22T22:29:16.689Z","type":"message"}
{"nick":"tjfontaine","message":"I would guess a lot of the motivated people use brew or other terrible solutions","date":"2013-03-22T22:29:28.792Z","type":"message"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-03-22T22:29:34.123Z","type":"nick"}
{"nick":"tjfontaine","message":"which depresses me","date":"2013-03-22T22:29:39.854Z","type":"message"}
{"nick":"isaacs","message":"mac developers are usually pretty ok with the command line.","date":"2013-03-22T22:29:41.278Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: have you been able to reproduce the error?","date":"2013-03-22T22:29:45.586Z","type":"message"}
{"nick":"tjfontaine","message":"piscisaureus_: you should be looking at the clone counts from github :)","date":"2013-03-22T22:29:59.252Z","type":"message"}
{"nick":"trevnorris","message":"oh, and is this on master or v0.10.x","date":"2013-03-22T22:30:06.352Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: on mac yes","date":"2013-03-22T22:30:06.529Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: https://gist.github.com/piscisaureus/5225260","date":"2013-03-22T22:30:09.672Z","type":"message"}
{"nick":"tjfontaine","message":"yes","date":"2013-03-22T22:30:10.701Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-22T22:30:13.825Z","type":"join"}
{"nick":"piscisaureus_","message":"isaacs: note that takes years to complete","date":"2013-03-22T22:30:23.927Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: yes? to which, both?","date":"2013-03-22T22:30:24.257Z","type":"message"}
{"nick":"tjfontaine","message":"trevnorris: yes","date":"2013-03-22T22:30:27.788Z","type":"message"}
{"nick":"trevnorris","message":"well... don't know if i'll be able to reproduce it. does osx use bash, or something similar?","date":"2013-03-22T22:31:16.306Z","type":"message"}
{"nick":"cjd","message":"yeah bash","date":"2013-03-22T22:31:27.924Z","type":"message"}
{"nick":"cjd","message":"and hi","date":"2013-03-22T22:31:32.885Z","type":"message"}
{"nick":"piscisaureus_","message":"tjfontaine: I though github stopped providing stats?","date":"2013-03-22T22:31:40.599Z","type":"message"}
{"nick":"tjfontaine","message":"hm perhaps","date":"2013-03-22T22:32:30.225Z","type":"message"}
{"nick":"sblom","reason":"Ping timeout: 276 seconds","date":"2013-03-22T22:34:33.773Z","type":"quit"}
{"nick":"bnoordhuis","message":"guys, i want to show you a (wip) work of art: https://gist.github.com/bnoordhuis/3fafd09f65a789dd98bc","date":"2013-03-22T22:39:17.109Z","type":"message"}
{"nick":"bnoordhuis","message":"i call it \"c89 + atomic_ops = libuv\"","date":"2013-03-22T22:39:30.134Z","type":"message"}
{"nick":"tjfontaine","message":"heh","date":"2013-03-22T22:39:54.686Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-22T22:40:43.090Z","type":"quit"}
{"nick":"isaacs","message":"trevnorris: osx is unix, man.  it's got bash, all the goodies, etc.","date":"2013-03-22T22:41:17.379Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis, piscisaureus_: So, afaict, it looks like read() is returning 0 incorrectly in some cases.","date":"2013-03-22T22:41:49.641Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: [\"Textual IRC Client: www.textualapp.com\"]","date":"2013-03-22T22:41:57.119Z","type":"quit"}
{"nick":"bnoordhuis","message":"isaacs: what read()?","date":"2013-03-22T22:42:05.791Z","type":"message"}
{"nick":"tjfontaine","message":"pipe/ipc I think","date":"2013-03-22T22:42:21.128Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: deps/uv/src/unix/stream.c","date":"2013-03-22T22:42:24.760Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: it's TCP","date":"2013-03-22T22:42:28.988Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: uv_read can return 0 in some cases in which case nothing got read :)","date":"2013-03-22T22:42:45.703Z","type":"message"}
{"nick":"piscisaureus_","message":"although it should be rare","date":"2013-03-22T22:42:49.718Z","type":"message"}
{"nick":"trevnorris","message":"ugh. trying with ia32, still running script. still can't reproduce. well, sorry.","date":"2013-03-22T22:43:01.592Z","type":"message"}
{"nick":"isaacs","message":"tjfontaine: no, the pipe/ipc has some oddball behavior where it always sends the last-sent handle, but that's actually not new, or a bug, perse.","date":"2013-03-22T22:43:03.920Z","type":"message"}
{"nick":"piscisaureus_","message":"s/return/report","date":"2013-03-22T22:43:05.452Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: mk","date":"2013-03-22T22:43:16.974Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: well, uv_read is returnign 0 and also setting the error to EOF","date":"2013-03-22T22:43:27.859Z","type":"message"}
{"nick":"bnoordhuis","message":"i think i'm missing some context here...","date":"2013-03-22T22:43:35.927Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: euh, that should not happen. EOF should report -1","date":"2013-03-22T22:43:44.543Z","type":"message"}
{"nick":"isaacs","message":"oh, i mean, yeah","date":"2013-03-22T22:43:57.826Z","type":"message"}
{"nick":"isaacs","message":"uv_read is returning -1","date":"2013-03-22T22:44:03.648Z","type":"message"}
{"nick":"isaacs","message":"*read()* is returning 0 bytes read","date":"2013-03-22T22:44:10.679Z","type":"message"}
{"nick":"isaacs","message":"but the other side has definitely not ever sent a FIN","date":"2013-03-22T22:44:31.117Z","type":"message"}
{"nick":"bnoordhuis","message":"the syscall read() returns 0? that's a EOF","date":"2013-03-22T22:45:10.464Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: yes... but... that makes no sense here.","date":"2013-03-22T22:45:31.436Z","type":"message"}
{"nick":"isaacs","message":"that's why test/simple/test-child-process-fork-getconnections.js is failing","date":"2013-03-22T22:45:52.998Z","type":"message"}
{"nick":"isaacs","message":"the child proc gets an EOF on the socket, and then the JavaScript does the right thing, and dutifully destroys it","date":"2013-03-22T22:46:11.558Z","type":"message"}
{"nick":"bnoordhuis","message":"what operating systems have you seen that on?","date":"2013-03-22T22:46:21.273Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: os x","date":"2013-03-22T22:46:43.027Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: rarely, though","date":"2013-03-22T22:46:51.936Z","type":"message"}
{"nick":"bnoordhuis","message":"ah... anything is possible on os x","date":"2013-03-22T22:46:58.278Z","type":"message"}
{"nick":"tjfontaine","message":"jenkins has seen it on almost all, but most often from osx and windows","date":"2013-03-22T22:47:01.760Z","type":"message"}
{"nick":"tjfontaine","message":"lemme find an example from linux","date":"2013-03-22T22:47:13.567Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: usually this will fail: for i in `seq 100`; do echo $i; ./node test/simple/test-child-process-fork-getconnections.js || break; done","date":"2013-03-22T22:47:20.955Z","type":"message"}
{"nick":"bnoordhuis","message":"something completely different: http://en.cppreference.com/w/cpp/atomic/atomic_compare_exchange","date":"2013-03-22T22:51:01.921Z","type":"message"}
{"nick":"bnoordhuis","message":"atomic_compare_exchange lets you specify different memory models for the success and failure case","date":"2013-03-22T22:51:44.224Z","type":"message"}
{"nick":"bnoordhuis","message":"does anyone know an example of when you'd want that?","date":"2013-03-22T22:52:16.891Z","type":"message"}
{"nick":"c4milo","date":"2013-03-22T22:54:44.675Z","type":"join"}
{"nick":"piscisaureus_","message":"does node-gyp set a particular user-agent when it downloads the node.js source tarball?","date":"2013-03-22T22:55:32.884Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: ask TooTallNate","date":"2013-03-22T22:57:43.320Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah. Will do when he's here :)","date":"2013-03-22T22:57:56.943Z","type":"message"}
{"nick":"tjfontaine","message":"piscisaureus_: looking through it, no","date":"2013-03-22T22:58:14.935Z","type":"message"}
{"nick":"tjfontaine","message":"just url and potentially proxy","date":"2013-03-22T22:58:23.194Z","type":"message"}
{"nick":"tjfontaine","message":"https://github.com/TooTallNate/node-gyp/blob/master/lib/install.js#L119-153","date":"2013-03-22T22:58:56.880Z","type":"message"}
{"nick":"rendar","date":"2013-03-22T22:59:17.984Z","type":"quit"}
{"nick":"cjd","message":"ooo is node-gyp a gyp clone w/o any python dependency?","date":"2013-03-22T23:02:37.630Z","type":"message"}
{"nick":"wolfeidau","date":"2013-03-22T23:02:47.782Z","type":"join"}
{"nick":"tjfontaine","message":"no, it's a driver that sets the environment up right more or less","date":"2013-03-22T23:02:56.104Z","type":"message"}
{"nick":"stagas","reason":"Ping timeout: 276 seconds","date":"2013-03-22T23:03:09.422Z","type":"quit"}
{"nick":"`3E","reason":"Quit: gnite","date":"2013-03-22T23:03:21.197Z","type":"quit"}
{"nick":"cjd","message":"I have a little dead project to convert maven pom.xml files into js scripts and then write a library which builds java projects with node","date":"2013-03-22T23:03:49.858Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs, bnoordhuis: ok I take it back, all instances of getconnections failing on !osx were related to other issues","date":"2013-03-22T23:07:43.213Z","type":"message"}
{"nick":"stagas","date":"2013-03-22T23:08:10.226Z","type":"join"}
{"nick":"isaacs","message":"ok, so, we're *definitely* never calling shutdown from the other side, and we're *definitely* getting an EOF.  wtf, darwin!?","date":"2013-03-22T23:09:18.642Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T23:10:34.230Z","type":"quit"}
{"nick":"indexzero","date":"2013-03-22T23:13:09.918Z","type":"join"}
{"nick":"isaacs","message":"tjfontaine, bnoordhuis: thoughts about just skipping this test on OS X?","date":"2013-03-22T23:14:07.650Z","type":"message"}
{"nick":"tjfontaine","message":"I'm +1 at least for the interim","date":"2013-03-22T23:14:32.744Z","type":"message"}
{"nick":"cjd","message":"} while (ret == EOF && os == DARWIN && ++i < 10);   :P","date":"2013-03-22T23:15:05.937Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: i don't know. that's looking the other way when you know something bad is happening","date":"2013-03-22T23:15:58.768Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-03-22T23:16:06.687Z","type":"message"}
{"nick":"isaacs","message":"it sucks.","date":"2013-03-22T23:16:08.895Z","type":"message"}
{"nick":"cjd","message":"I have a test where I setup a TUN device and then send a packet through it, OSX sets up the tun asynchrnously so binding the UDP socket to the tun's address fails unless I sleep for a second","date":"2013-03-22T23:18:07.150Z","type":"message"}
{"nick":"benoitc","date":"2013-03-22T23:19:17.599Z","type":"join"}
{"nick":"isaacs","message":"cjd: i've actually tried the \"retry 10 times\" approach","date":"2013-03-22T23:20:11.897Z","type":"message"}
{"nick":"isaacs","message":"cjd: when it's in this state, it's like something is ending the socket that isn't us.","date":"2013-03-22T23:20:20.587Z","type":"message"}
{"nick":"isaacs","message":"read() returns 0  1000 times in a row if you try it","date":"2013-03-22T23:20:28.481Z","type":"message"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T23:20:34.192Z","type":"quit"}
{"nick":"cjd","message":"oh interesting","date":"2013-03-22T23:20:36.697Z","type":"message"}
{"nick":"cjd","message":"even if you sleep?","date":"2013-03-22T23:20:42.699Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-03-22T23:21:02.409Z","type":"message"}
{"nick":"cjd","message":"that's really weird","date":"2013-03-22T23:21:09.187Z","type":"message"}
{"nick":"tjfontaine","message":"isaacs: have you wireshark'd it?","date":"2013-03-22T23:21:16.300Z","type":"message"}
{"nick":"wolfeidau","reason":"Read error: Connection timed out","date":"2013-03-22T23:21:27.157Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-03-22T23:22:16.274Z","type":"join"}
{"nick":"kazupon","date":"2013-03-22T23:23:11.324Z","type":"join"}
{"nick":"isaacs","message":"tjfontaine: seems i don't have wireshark on this machine... rectifying this situation","date":"2013-03-22T23:23:50.094Z","type":"message"}
{"nick":"tjfontaine","message":"well there's always tcpdump ","date":"2013-03-22T23:24:08.163Z","type":"message"}
{"nick":"piscisaureus_","message":"I have to go. Later.","date":"2013-03-22T23:25:05.173Z","type":"message"}
{"nick":"piscisaureus_","message":"&","date":"2013-03-22T23:25:06.880Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2013-03-22T23:25:12.171Z","type":"quit"}
{"nick":"isaacs","message":"TooTallNate: You should publish a node-waf module","date":"2013-03-22T23:25:59.662Z","type":"message"}
{"nick":"tjfontaine","message":"that just errors and sumbits a bug that the module should update to gyp","date":"2013-03-22T23:27:27.205Z","type":"message"}
{"nick":"kazupon","reason":"Ping timeout: 245 seconds","date":"2013-03-22T23:27:30.007Z","type":"quit"}
{"nick":"tjfontaine","message":":)","date":"2013-03-22T23:27:31.485Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: it's not tcp simultaneous open, is it?","date":"2013-03-22T23:27:32.188Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't know if os x actually supports that","date":"2013-03-22T23:27:49.829Z","type":"message"}
{"nick":"bnoordhuis","message":"google doesn't know either, it seems","date":"2013-03-22T23:29:27.473Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T23:30:36.092Z","type":"quit"}
{"nick":"bnoordhuis","message":"compiling gcc 4.8. exciting!","date":"2013-03-22T23:30:37.983Z","type":"message"}
{"nick":"trevnorris","message":"fucking heap profiler. the code i need for that larger than my allocator.","date":"2013-03-22T23:33:43.569Z","type":"message"}
{"nick":"cjd","message":"4.8 has clang style errors w/ macro unrolling","date":"2013-03-22T23:33:46.210Z","type":"message"}
{"nick":"benoitc","date":"2013-03-22T23:33:46.957Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: simultaneous open?","date":"2013-03-22T23:34:08.263Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: that sounds like a possibility","date":"2013-03-22T23:34:14.046Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: the server is created in the master process, and sends the sockets to a forked child.","date":"2013-03-22T23:34:30.343Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: recvmsg style","date":"2013-03-22T23:34:45.162Z","type":"message"}
{"nick":"isaacs","message":"i can never figure out tcpdump","date":"2013-03-22T23:37:34.154Z","type":"message"}
{"nick":"isaacs","message":"how do i tell it to tell me about all packets going over port 12346 to localhost?","date":"2013-03-22T23:37:51.205Z","type":"message"}
{"nick":"isaacs","message":"sudo tcpdump 'tcp port 12346 and ip host localhost' <-- zero packets captured","date":"2013-03-22T23:38:13.345Z","type":"message"}
{"nick":"loladiro","date":"2013-03-22T23:39:22.926Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: how would i tell if it's doing simultaneous open?","date":"2013-03-22T23:46:14.667Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: at this point, i think the best option is just to say that cluster doesn't work on mac, and that's that.","date":"2013-03-22T23:46:24.869Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: or, actually, cluster would work fine.","date":"2013-03-22T23:46:41.211Z","type":"message"}
{"nick":"isaacs","message":"but sending a connection to the child proc does not work.","date":"2013-03-22T23:46:49.778Z","type":"message"}
{"nick":"isaacs","message":"it might just randomly die on you","date":"2013-03-22T23:46:53.488Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: re simultaneous open, when the peer and local address are the same","date":"2013-03-22T23:47:23.847Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: it's a server that sends the socket to a child proc.  net.connect(localhost, port) etc.","date":"2013-03-22T23:48:09.631Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i don't think it's simultaneous open.  the client has a different remote port","date":"2013-03-22T23:48:34.227Z","type":"message"}
{"nick":"wolfeidau","reason":"Read error: Connection reset by peer","date":"2013-03-22T23:52:51.880Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-03-22T23:53:52.527Z","type":"join"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T23:55:46.386Z","type":"quit"}
