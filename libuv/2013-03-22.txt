{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-03-22T00:00:01.378Z","type":"quit"}
{"nick":"ircretary","date":"2013-03-22T00:00:08.771Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: i mean, that's why i put that stupid hack in there in the first place.","date":"2013-03-22T00:00:16.360Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: but if we can move the heuristic to libuv, and not have it in node, that'd make me a bit happier :)","date":"2013-03-22T00:00:33.045Z","type":"message"}
{"nick":"isaacs","message":"sweep the problem under the deps/uv/ rug","date":"2013-03-22T00:01:31.862Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: no, i removed that","date":"2013-03-22T00:04:30.488Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: but i mean, writev approach is good for big messages, bad for small ones","date":"2013-03-22T00:05:06.459Z","type":"message"}
{"nick":"bnoordhuis","message":"unfortunately, yes","date":"2013-03-22T00:05:29.161Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: i seem to recall ryah doing something similar once upon a time, before there was a libuv","date":"2013-03-22T00:06:50.151Z","type":"message"}
{"nick":"bnoordhuis","message":"yes. that was a long time ago","date":"2013-03-22T00:07:09.374Z","type":"message"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-03-22T00:07:09.741Z","type":"quit"}
{"nick":"isaacs","message":"bnoordhuis: and basically coming to the same conclusion, that writev was not a savings.","date":"2013-03-22T00:07:17.074Z","type":"message"}
{"nick":"bnoordhuis","message":"also didn't work out but he had a different approach iirc","date":"2013-03-22T00:07:20.104Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2013-03-22T00:07:23.365Z","type":"message"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T00:07:26.733Z","type":"quit"}
{"nick":"isaacs","message":"he had this JS-level linked-list thingie that it'd walk over.","date":"2013-03-22T00:07:35.501Z","type":"message"}
{"nick":"isaacs","message":"and pull the data out of the strings from v8, rather than convert to buffers.","date":"2013-03-22T00:07:50.980Z","type":"message"}
{"nick":"bnoordhuis","message":"the thing is, there is room for optimization - but only if you're willing to trade latency for throughput","date":"2013-03-22T00:08:29.283Z","type":"message"}
{"nick":"bnoordhuis","message":"which most web 3.2 people with their interactive game web chat cam rooms probably don't want","date":"2013-03-22T00:09:01.256Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: sorry. someone stopped by my desk.....","date":"2013-03-22T00:12:30.622Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, no worries","date":"2013-03-22T00:13:02.896Z","type":"message"}
{"nick":"trevnorris","message":"have an idea, but you can tell me if it's possible.","date":"2013-03-22T00:13:17.003Z","type":"message"}
{"nick":"trevnorris","message":"sort of a linked list w/ a heap. where if the message is < N then it's written to the heap. and if it's larger it's left out.","date":"2013-03-22T00:14:05.726Z","type":"message"}
{"nick":"benoitc","date":"2013-03-22T00:14:06.260Z","type":"join"}
{"nick":"bnoordhuis","message":"and then?","date":"2013-03-22T00:14:17.115Z","type":"message"}
{"nick":"tjfontaine","message":"https://dl.dropbox.com/u/35720/jenkins-no-cla.png https://dl.dropbox.com/u/35720/jenkins-cla.png","date":"2013-03-22T00:14:31.176Z","type":"message"}
{"nick":"c4milo","date":"2013-03-22T00:14:46.566Z","type":"join"}
{"nick":"isaacs","message":"tjfontaine: neat.","date":"2013-03-22T00:15:06.906Z","type":"message"}
{"nick":"tjfontaine","message":"indutny has apparently signed twice","date":"2013-03-22T00:15:20.296Z","type":"message"}
{"nick":"bnoordhuis","message":"hah, that's awesome","date":"2013-03-22T00:15:21.391Z","type":"message"}
{"nick":"trevnorris","message":"bnoordhuis: so w/o cork is slow for small buffers. w/ cork it's slow for large buffers?","date":"2013-03-22T00:16:33.136Z","type":"message"}
{"nick":"bnoordhuis","message":"pretty much yes","date":"2013-03-22T00:16:58.678Z","type":"message"}
{"nick":"bradleymeck","date":"2013-03-22T00:17:04.615Z","type":"join"}
{"nick":"trevnorris","message":"and it's slow for large buffers because of the copy?","date":"2013-03-22T00:17:09.212Z","type":"message"}
{"nick":"bnoordhuis","message":"or rather the other way around","date":"2013-03-22T00:17:13.212Z","type":"message"}
{"nick":"bnoordhuis","message":"corking slows down small buffers, speeds up large buffers","date":"2013-03-22T00:17:23.187Z","type":"message"}
{"nick":"trevnorris","message":"erm. and why does it slow down small buffers?","date":"2013-03-22T00:17:55.240Z","type":"message"}
{"nick":"bnoordhuis","message":"because each call to req.connection.write() traverses up to libuv and back","date":"2013-03-22T00:18:32.595Z","type":"message"}
{"nick":"bnoordhuis","message":"and mallocs some memory in the process","date":"2013-03-22T00:18:40.925Z","type":"message"}
{"nick":"bnoordhuis","message":"the call stack is something i could flatten or batch up","date":"2013-03-22T00:19:25.091Z","type":"message"}
{"nick":"bnoordhuis","message":"but the malloc thing is more complicatd","date":"2013-03-22T00:19:37.182Z","type":"message"}
{"nick":"dominictarr","date":"2013-03-22T00:19:56.834Z","type":"join"}
{"nick":"bnoordhuis","message":"well, i'm going to sleep on it","date":"2013-03-22T00:21:07.301Z","type":"message"}
{"nick":"tjfontaine","message":"bnoordhuis: could always blockheap/slab the uv structures","date":"2013-03-22T00:21:10.258Z","type":"message"}
{"nick":"trevnorris","message":"so when data is sent to uv_write, does it need to copy that. or can it just use the same mem pointer","date":"2013-03-22T00:21:10.740Z","type":"message"}
{"nick":"tjfontaine","message":"or is that already happening, I forget, anyway","date":"2013-03-22T00:21:57.223Z","type":"message"}
{"nick":"bnoordhuis","message":"ask me all about it tomorrow. i'm off to bed","date":"2013-03-22T00:22:36.794Z","type":"message"}
{"nick":"bnoordhuis","message":"have a good night, guys","date":"2013-03-22T00:22:40.881Z","type":"message"}
{"nick":"tjfontaine","message":"sleep well","date":"2013-03-22T00:22:44.223Z","type":"message"}
{"nick":"trevnorris","message":"tjfontaine: so if i understand, data passed to uv_write needs to be copied, correct?","date":"2013-03-22T00:24:06.737Z","type":"message"}
{"nick":"loladiro","date":"2013-03-22T00:24:21.164Z","type":"join"}
{"nick":"dominictarr","reason":"Ping timeout: 264 seconds","date":"2013-03-22T00:24:31.686Z","type":"quit"}
{"nick":"trevnorris","message":"eh. i'll leave this to the professionals.","date":"2013-03-22T00:26:19.106Z","type":"message"}
{"nick":"trevnorris","action":"dives back into buffers","date":"2013-03-22T00:26:27.748Z","type":"action"}
{"nick":"bnoordhuis","reason":"Ping timeout: 245 seconds","date":"2013-03-22T00:27:05.046Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T00:27:40.121Z","type":"join"}
{"nick":"trevnorris","reason":"Quit: Leaving","date":"2013-03-22T00:30:53.260Z","type":"quit"}
{"nick":"kazupon_","date":"2013-03-22T00:31:26.190Z","type":"join"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2013-03-22T00:31:34.937Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T00:40:20.348Z","type":"quit"}
{"nick":"kevireilly","reason":"Read error: Connection reset by peer","date":"2013-03-22T00:56:44.624Z","type":"quit"}
{"nick":"kevireillyy","date":"2013-03-22T00:56:52.420Z","type":"join"}
{"nick":"c4milo","date":"2013-03-22T01:01:24.518Z","type":"join"}
{"nick":"MI6","message":"\u0002joyent/node:\u0002 \u00033Gil Pedersen\u000f \u00037v0.10\u000f * \u0002c3aae9c\u0002 : stream: Fix stall in Transform under very specific conditions  The stall  - http://git.io/yvyGsA","date":"2013-03-22T01:03:50.449Z","type":"message"}
{"nick":"eris0xff","date":"2013-03-22T01:06:40.142Z","type":"join"}
{"nick":"eris0xff","message":"hi","date":"2013-03-22T01:06:46.346Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2013-03-22T01:07:59.620Z","type":"quit"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T01:09:20.296Z","type":"quit"}
{"nick":"defunctzombie_zz","new_nick":"defunctzombie","date":"2013-03-22T01:17:46.564Z","type":"nick"}
{"nick":"AvianFlu","reason":"Remote host closed the connection","date":"2013-03-22T01:19:57.356Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T01:25:14.609Z","type":"quit"}
{"nick":"qmx|away","new_nick":"qmx","date":"2013-03-22T01:27:22.817Z","type":"nick"}
{"nick":"wolfeidau","reason":"Read error: Connection reset by peer","date":"2013-03-22T01:27:23.507Z","type":"quit"}
{"nick":"wolfeidau","date":"2013-03-22T01:27:45.518Z","type":"join"}
{"nick":"kazupon_","reason":"Remote host closed the connection","date":"2013-03-22T01:29:35.733Z","type":"quit"}
{"nick":"dpemmons","date":"2013-03-22T01:31:34.831Z","type":"join"}
{"nick":"kevireillyy","reason":"Read error: Connection reset by peer","date":"2013-03-22T01:36:45.166Z","type":"quit"}
{"nick":"kevireilly","date":"2013-03-22T01:36:46.625Z","type":"join"}
{"nick":"c4milo","date":"2013-03-22T01:38:45.594Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T01:40:50.358Z","type":"quit"}
{"nick":"erickt","date":"2013-03-22T01:42:10.307Z","type":"join"}
{"nick":"erickt","reason":"Client Quit","date":"2013-03-22T01:42:38.918Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2013-03-22T01:42:59.159Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-22T01:43:59.095Z","type":"quit"}
{"nick":"abraxas","date":"2013-03-22T01:45:23.501Z","type":"join"}
{"nick":"bradleymeck","date":"2013-03-22T01:47:18.351Z","type":"join"}
{"nick":"sblom","reason":"Ping timeout: 246 seconds","date":"2013-03-22T01:48:26.172Z","type":"quit"}
{"nick":"bradleymeck","message":"when is it safe to free a uv_async_t?","date":"2013-03-22T02:01:09.341Z","type":"message"}
{"nick":"erickt","date":"2013-03-22T02:02:39.530Z","type":"join"}
{"nick":"bradleymeck","message":"guess only after the entire loop is done… hmmm","date":"2013-03-22T02:19:55.750Z","type":"message"}
{"nick":"loladiro","date":"2013-03-22T02:32:48.473Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2013-03-22T02:34:07.232Z","type":"quit"}
{"nick":"c4milo","date":"2013-03-22T02:42:58.599Z","type":"join"}
{"nick":"indexzero","date":"2013-03-22T02:47:17.588Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T02:48:09.216Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T02:49:16.227Z","type":"join"}
{"nick":"hz","date":"2013-03-22T03:22:02.768Z","type":"quit"}
{"nick":"qmx","new_nick":"qmx|away","date":"2013-03-22T03:30:29.154Z","type":"nick"}
{"nick":"c4milo","date":"2013-03-22T03:32:45.507Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2013-03-22T03:48:11.795Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2013-03-22T03:51:57.730Z","type":"quit"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2013-03-22T03:54:46.907Z","type":"quit"}
{"nick":"bradleymeck","date":"2013-03-22T04:10:30.553Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2013-03-22T04:17:39.620Z","type":"quit"}
{"nick":"MI6","message":"\u0002nodejs-v0.10\u0002: #53 \u00037UNSTABLE\u000f linux-x64 (1/564) osx-x64 (2/564) windows-x64 (4/564) osx-ia32 (2/564) smartos-ia32 (1/564) windows-ia32 (5/564) http://jenkins.nodejs.org/job/nodejs-v0.10/53/","date":"2013-03-22T04:18:05.868Z","type":"message"}
{"nick":"indexzero","date":"2013-03-22T04:18:10.130Z","type":"join"}
{"nick":"indexzero","reason":"Client Quit","date":"2013-03-22T04:20:01.837Z","type":"quit"}
{"nick":"defunctzombie","new_nick":"defunctzombie_zz","date":"2013-03-22T04:22:43.294Z","type":"nick"}
{"nick":"erickt","reason":"Quit: erickt","date":"2013-03-22T04:26:18.933Z","type":"quit"}
{"nick":"bradleymeck","message":"does queueing uv_async_t leak memory if i dont free it during the cb somehow??","date":"2013-03-22T04:33:39.391Z","type":"message"}
{"nick":"mikeal","date":"2013-03-22T05:58:29.272Z","type":"join"}
{"nick":"trevnorris","date":"2013-03-22T06:00:38.261Z","type":"join"}
{"nick":"bradleymeck","message":"indutny: uvcat is finally memory stable, learned to seriously dislike dynamically allocating uv_async_t in the process though","date":"2013-03-22T06:04:20.122Z","type":"message"}
{"nick":"bradleymeck","message":"release tomorrowish?","date":"2013-03-22T06:04:43.709Z","type":"message"}
{"nick":"kazupon","date":"2013-03-22T06:07:32.558Z","type":"join"}
{"nick":"dominictarr","date":"2013-03-22T06:57:54.052Z","type":"join"}
{"nick":"bradleymeck","message":"kinda funny that after 3 hours im seeing i leaked 8 bytes of memory","date":"2013-03-22T07:10:01.883Z","type":"message"}
{"nick":"rendar","date":"2013-03-22T07:22:15.719Z","type":"join"}
{"nick":"`3rdEden","date":"2013-03-22T07:24:03.619Z","type":"join"}
{"nick":"benoitc","reason":"Excess Flood","date":"2013-03-22T07:26:22.097Z","type":"quit"}
{"nick":"benoitc","date":"2013-03-22T07:31:35.974Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2013-03-22T07:34:02.085Z","type":"quit"}
{"nick":"`3rdEden_","date":"2013-03-22T07:40:36.572Z","type":"join"}
{"nick":"`3rdEden","new_nick":"`3E","date":"2013-03-22T07:40:43.893Z","type":"nick"}
{"nick":"`3rdEden_","new_nick":"`3rdEden","date":"2013-03-22T07:41:02.619Z","type":"nick"}
{"nick":"`3E","reason":"Remote host closed the connection","date":"2013-03-22T07:55:30.432Z","type":"quit"}
{"nick":"kazupon","date":"2013-03-22T07:55:51.396Z","type":"join"}
