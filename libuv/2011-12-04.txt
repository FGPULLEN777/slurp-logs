{"nick":"isaacs_away","new_nick":"isaacs","date":"2011-12-04T00:21:09.351Z","type":"nick"}
{"nick":"brson","reason":"Quit: leaving","date":"2011-12-04T00:23:20.994Z","type":"quit"}
{"nick":"brson","date":"2011-12-04T00:23:37.154Z","type":"join"}
{"nick":"benvie","date":"2011-12-04T00:30:28.515Z","type":"join"}
{"nick":"travis-ci","date":"2011-12-04T00:44:22.490Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] mmalecki/node#7 (travis-ci - 51b7c88 : Maciej Małecki): The build is still failing.","date":"2011-12-04T00:44:22.648Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/mmalecki/node/compare/3197d6f...51b7c88","date":"2011-12-04T00:44:22.648Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/mmalecki/node/builds/370910","date":"2011-12-04T00:44:22.648Z","type":"message"}
{"nick":"travis-ci","date":"2011-12-04T00:44:22.648Z","type":"part"}
{"nick":"mmalecki","message":"isaacs: ^","date":"2011-12-04T00:44:50.883Z","type":"message"}
{"nick":"travis-ci","date":"2011-12-04T00:45:55.087Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] mmalecki/node#9 (travis-ci - f00dbb5 : Maciej Małecki): The build is still failing.","date":"2011-12-04T00:45:55.250Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/mmalecki/node/compare/51b7c88...f00dbb5","date":"2011-12-04T00:45:55.250Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/mmalecki/node/builds/370920","date":"2011-12-04T00:45:55.250Z","type":"message"}
{"nick":"travis-ci","date":"2011-12-04T00:45:55.250Z","type":"part"}
{"nick":"benvie","message":"oh my","date":"2011-12-04T00:46:56.260Z","type":"message"}
{"nick":"indutny","message":"isaacs: heya!","date":"2011-12-04T00:56:46.416Z","type":"message"}
{"nick":"indutny","message":"isaacs: any luck with https://github.com/joyent/node/pull/2244 ?","date":"2011-12-04T00:57:04.931Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-12-04T01:09:17.292Z","type":"quit"}
{"nick":"travis-ci","date":"2011-12-04T01:16:46.305Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] mmalecki/node#10 (travis-ci - 202ab16 : Maciej Małecki): The build is still failing.","date":"2011-12-04T01:16:46.462Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/mmalecki/node/compare/51b7c88...202ab16","date":"2011-12-04T01:16:46.462Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/mmalecki/node/builds/370956","date":"2011-12-04T01:16:46.462Z","type":"message"}
{"nick":"travis-ci","date":"2011-12-04T01:16:46.462Z","type":"part"}
{"nick":"AvianFlu_","date":"2011-12-04T01:29:28.316Z","type":"join"}
{"nick":"AvianFlu","reason":"Ping timeout: 260 seconds","date":"2011-12-04T01:30:58.934Z","type":"quit"}
{"nick":"AvianFlu_","new_nick":"AvianFlu","date":"2011-12-04T01:32:07.366Z","type":"nick"}
{"nick":"brson","reason":"Ping timeout: 255 seconds","date":"2011-12-04T01:54:40.273Z","type":"quit"}
{"nick":"sh1mmer","reason":"Quit: sh1mmer","date":"2011-12-04T02:52:27.448Z","type":"quit"}
{"nick":"erickt","reason":"Quit: erickt","date":"2011-12-04T03:00:02.687Z","type":"quit"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2011-12-04T03:24:40.045Z","type":"quit"}
{"nick":"luxigo","reason":"Ping timeout: 252 seconds","date":"2011-12-04T03:56:40.530Z","type":"quit"}
{"nick":"mjr_","date":"2011-12-04T04:02:07.157Z","type":"join"}
{"nick":"mjr_","message":"Hey guys, we rolled out node 0.6 to some pretty heavy production load yesterday, and there's some kind of bad memory leak.","date":"2011-12-04T04:06:26.644Z","type":"message"}
{"nick":"mjr_","message":"Seems like the V8 heap is really small.  I'm looking for suggestions on how to figure out where else in node it might be coming from.","date":"2011-12-04T04:07:09.431Z","type":"message"}
{"nick":"benvie","reason":"Quit: Leaving.","date":"2011-12-04T06:29:06.903Z","type":"quit"}
{"nick":"bbenvie","date":"2011-12-04T06:29:07.697Z","type":"join"}
{"nick":"ryah","message":"mjr_: presumably all that is buffers then","date":"2011-12-04T07:20:10.156Z","type":"message"}
{"nick":"ryah","message":"mjr_: hm.. how can we approach this","date":"2011-12-04T07:20:21.696Z","type":"message"}
{"nick":"mjr_","message":"hey","date":"2011-12-04T07:20:22.837Z","type":"message"}
{"nick":"ryah","message":"hey","date":"2011-12-04T07:20:28.916Z","type":"message"}
{"nick":"mjr_","message":"So, I think we might be getting confused with the v8-profiler module putting v8 into debug mode","date":"2011-12-04T07:20:36.870Z","type":"message"}
{"nick":"mjr_","message":"After further analysis, it seems that the V8 heap DOES get very large, very quickly.","date":"2011-12-04T07:21:14.113Z","type":"message"}
{"nick":"ryah","message":"hm","date":"2011-12-04T07:21:25.671Z","type":"message"}
{"nick":"mjr_","message":"But debug mode uses up a lot of memory","date":"2011-12-04T07:21:39.276Z","type":"message"}
{"nick":"ryah","message":"mjr_: process.memoryUsage() should confirm?","date":"2011-12-04T07:21:43.237Z","type":"message"}
{"nick":"mjr_","message":"yes","date":"2011-12-04T07:21:46.948Z","type":"message"}
{"nick":"ryah","message":"heap diffs.. hm","date":"2011-12-04T07:22:08.528Z","type":"message"}
{"nick":"mjr_","message":"So we are now up to 170 router processes, because we have millions of users trying to come in a day now","date":"2011-12-04T07:22:25.763Z","type":"message"}
{"nick":"ryah","message":"so - is danny's debugger helpful there?","date":"2011-12-04T07:22:28.221Z","type":"message"}
{"nick":"ryah","message":"wow","date":"2011-12-04T07:22:40.365Z","type":"message"}
{"nick":"mjr_","message":"Yeah, Danny is trying to grab heap profiles, but it seems that putting it into debug mode changes the characteristics.","date":"2011-12-04T07:22:54.532Z","type":"message"}
{"nick":"mjr_","message":"So, we were on node 0.4, and running out of CPU, with a slight growth in memory.","date":"2011-12-04T07:23:22.153Z","type":"message"}
{"nick":"mjr_","message":"We upgraded to 0.6, and CPU got cut in half, which is awesome, thanks, v8","date":"2011-12-04T07:23:37.811Z","type":"message"}
{"nick":"mjr_","message":"BUT, now things run great for a while, and then something happens and we start growing the heap like crazy","date":"2011-12-04T07:24:01.131Z","type":"message"}
{"nick":"indexzero","date":"2011-12-04T07:24:06.001Z","type":"join"}
{"nick":"mjr_","message":"standby for image","date":"2011-12-04T07:24:52.894Z","type":"message"}
{"nick":"ryah","message":"ok","date":"2011-12-04T07:25:00.740Z","type":"message"}
{"nick":"mjr_","message":"https://skitch.com/mranney/gpt25/voxer-metrics","date":"2011-12-04T07:25:45.357Z","type":"message"}
{"nick":"mjr_","message":"our code is the same at the switchover time, with just the minor changes to make it work with 0.6","date":"2011-12-04T07:26:40.213Z","type":"message"}
{"nick":"mjr_","message":"So to be clear, I now no longer think this is a libuv / buffers thing.","date":"2011-12-04T07:26:59.829Z","type":"message"}
{"nick":"mjr_","message":"oh, day stamps are off by one in that graph, thanks to a hilarious DST bug.","date":"2011-12-04T07:27:39.447Z","type":"message"}
{"nick":"ryah","message":"looking through v8 list to see if there are any big bugs","date":"2011-12-04T07:29:16.644Z","type":"message"}
{"nick":"ryah","message":"the only change is this http://codereview.chromium.org/8742020","date":"2011-12-04T07:29:21.829Z","type":"message"}
{"nick":"ryah","message":"seems unrelated","date":"2011-12-04T07:29:32.704Z","type":"message"}
{"nick":"mjr_","message":"So we have 300K HTTPS connections right now, and I think we'd have way more if we didn't have to keep restarting these processes every 10 minutes.","date":"2011-12-04T07:29:39.985Z","type":"message"}
{"nick":"CIA-95","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307v0.6\u000f * r\u00021cf26e2\u000f \u000310\u000f/ (4 files in 2 dirs)\u0002:\u000f Upgrade V8 to 3.6.6.11 - http://git.io/q_yCAg","date":"2011-12-04T07:32:09.887Z","type":"message"}
{"nick":"mjr_","message":"want me to try that patch?","date":"2011-12-04T07:32:26.873Z","type":"message"}
{"nick":"ryah","message":"no","date":"2011-12-04T07:33:18.107Z","type":"message"}
{"nick":"ryah","message":"did process.uvCounters() show anything interesting?","date":"2011-12-04T07:34:58.367Z","type":"message"}
{"nick":"ryah","message":"unfortunately we're not counting handle closes yet","date":"2011-12-04T07:35:33.855Z","type":"message"}
{"nick":"mjr_","message":"https://gist.github.com/cfddfc5ae9e89b96215a","date":"2011-12-04T07:35:59.903Z","type":"message"}
{"nick":"ryah","message":"if you do that a few times - are they growing as expected?","date":"2011-12-04T07:36:38.033Z","type":"message"}
{"nick":"mjr_","message":"yeah, we are burning through connections like crazy, as I would expect","date":"2011-12-04T07:37:09.599Z","type":"message"}
{"nick":"ryah","message":"the http parser binding got changed in the v0.4 to v0.6 upgrade","date":"2011-12-04T07:37:14.898Z","type":"message"}
{"nick":"ryah","message":"i wonder if you could be hitting something there","date":"2011-12-04T07:37:28.299Z","type":"message"}
{"nick":"mjr_","message":"Danny thought he saw more http parser references than connections","date":"2011-12-04T07:37:31.552Z","type":"message"}
{"nick":"mjr_","message":"like, lots more","date":"2011-12-04T07:37:35.884Z","type":"message"}
{"nick":"mjr_","message":"Still trying to confirm.  The heap snapshot doesn't cleanly fit into the viewer in 0.6 for some reason ","date":"2011-12-04T07:37:53.279Z","type":"message"}
{"nick":"ryah","message":"so we have a shortcut now for parsing http messages whose headers fit into one packet","date":"2011-12-04T07:39:22.882Z","type":"message"}
{"nick":"mjr_","message":"going to write a program to parse this snapshot file","date":"2011-12-04T07:39:52.947Z","type":"message"}
{"nick":"mjr_","message":"But yes, there are TONS of references like this:","date":"2011-12-04T07:40:04.280Z","type":"message"}
{"nick":"mjr_","message":"      \"3338295056\": {","date":"2011-12-04T07:40:09.754Z","type":"message"}
{"nick":"mjr_","message":"        \"constructorName\": \"HTTPParser\",","date":"2011-12-04T07:40:09.911Z","type":"message"}
{"nick":"mjr_","message":"        \"count\": 7519","date":"2011-12-04T07:40:10.174Z","type":"message"}
{"nick":"mjr_","message":"      },","date":"2011-12-04T07:40:10.383Z","type":"message"}
{"nick":"ryah","message":"http://github.com/joyent/node/commit/84d0b1bcc5154f67d9f200f3c852bb8c5b64c6ef","date":"2011-12-04T07:40:49.523Z","type":"message"}
{"nick":"mjr_","message":"That's a pretty big change.","date":"2011-12-04T07:43:18.851Z","type":"message"}
{"nick":"eddyb","date":"2011-12-04T07:44:15.514Z","type":"join"}
{"nick":"eddyb","message":"if this isn't a ridiculous mistake, I don't know what it is","date":"2011-12-04T07:44:30.942Z","type":"message"}
{"nick":"eddyb","message":"child_process.js (and net.js, I think): if(!Pipe) Pipe = new process.binding('pipe_wrap').Pipe; return new Pipe;","date":"2011-12-04T07:45:12.081Z","type":"message"}
{"nick":"eddyb","message":"so it's constructing an instance of pipe_wrap.Pipe","date":"2011-12-04T07:45:42.534Z","type":"message"}
{"nick":"eddyb","message":"then constructing an instance of an instance of Pipe","date":"2011-12-04T07:45:57.620Z","type":"message"}
{"nick":"eddyb","message":"which unless Pipe (as a class) inherits Function, it's pretty dumb","date":"2011-12-04T07:46:34.940Z","type":"message"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-12-04T07:56:19.378Z","type":"quit"}
{"nick":"ryah","message":"eddyb: where?","date":"2011-12-04T07:56:59.799Z","type":"message"}
{"nick":"eddyb","message":"ryah: https://github.com/joyent/node/blob/master/lib/child_process.js#L29","date":"2011-12-04T08:00:56.947Z","type":"message"}
{"nick":"isaacs","date":"2011-12-04T08:01:05.201Z","type":"join"}
{"nick":"ryah","message":"isaacs: yt?","date":"2011-12-04T08:02:29.322Z","type":"message"}
{"nick":"ryah","message":"eddyb: that seems broken","date":"2011-12-04T08:03:17.590Z","type":"message"}
{"nick":"eddyb","message":"how on earth it doesn't break?","date":"2011-12-04T08:03:31.846Z","type":"message"}
{"nick":"ryah","message":"eddyb: im not sure","date":"2011-12-04T08:04:41.430Z","type":"message"}
{"nick":"eddyb","message":"I found it because I don't have process.binding and I have to replace all calls to it with equivalent calls to require","date":"2011-12-04T08:05:12.937Z","type":"message"}
{"nick":"eddyb","message":"or if it's the same module's bindings, they're already in a local variable","date":"2011-12-04T08:05:38.222Z","type":"message"}
{"nick":"ryah","message":"> x = new process.binding('pipe_wrap')","date":"2011-12-04T08:08:12.375Z","type":"message"}
{"nick":"ryah","message":"{ Pipe: [Function: Pipe] }","date":"2011-12-04T08:08:12.539Z","type":"message"}
{"nick":"ryah","message":"> x.Pipe","date":"2011-12-04T08:08:12.539Z","type":"message"}
{"nick":"ryah","message":"[Function: Pipe]","date":"2011-12-04T08:08:12.539Z","type":"message"}
{"nick":"eddyb","message":"wtf","date":"2011-12-04T08:09:03.240Z","type":"message"}
{"nick":"CIA-95","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307v0.6\u000f * r\u000260e2666\u000f \u000310\u000f/ lib/child_process.js \u0002:\u000f Remove superfluous 'new' - http://git.io/fHIRKw","date":"2011-12-04T08:09:47.262Z","type":"message"}
{"nick":"eddyb","message":"ryah: somehow it works","date":"2011-12-04T08:10:54.754Z","type":"message"}
{"nick":"eddyb","message":"but it's not sup... aaaaah","date":"2011-12-04T08:11:21.452Z","type":"message"}
{"nick":"eddyb","message":"you know why it works?","date":"2011-12-04T08:11:26.133Z","type":"message"}
{"nick":"eddyb","message":"new process.binding('pipe_wrap') calls process.binding with 'pipe_wrap' as an argument. because it explicitly returns, the return value is the one returned by new, not a new process.binding object","date":"2011-12-04T08:12:32.766Z","type":"message"}
{"nick":"ryah","message":"> function foo() {","date":"2011-12-04T08:12:59.399Z","type":"message"}
{"nick":"ryah","message":"... return { a: 5 }","date":"2011-12-04T08:12:59.555Z","type":"message"}
{"nick":"ryah","message":"... }","date":"2011-12-04T08:12:59.555Z","type":"message"}
{"nick":"ryah","message":"undefined","date":"2011-12-04T08:12:59.555Z","type":"message"}
{"nick":"ryah","message":"> new foo()","date":"2011-12-04T08:12:59.555Z","type":"message"}
{"nick":"ryah","message":"{ a: 5 }","date":"2011-12-04T08:13:01.965Z","type":"message"}
{"nick":"eddyb","message":"yepp","date":"2011-12-04T08:13:16.918Z","type":"message"}
{"nick":"mjr_","message":"ryah: I wrote my own stupid parser for the heap profiles since we can't get them into the webkit ui","date":"2011-12-04T08:30:26.561Z","type":"message"}
{"nick":"mjr_","message":"https://gist.github.com/2ec5deab2c59fe16b306","date":"2011-12-04T08:30:27.124Z","type":"message"}
{"nick":"mjr_","message":"There are a mere 910 connections open on that node at the moment.","date":"2011-12-04T08:32:56.452Z","type":"message"}
{"nick":"mjr_","message":"Updated gist to include my program to parse the heap snapshot, in case I'm doing that stupidly","date":"2011-12-04T08:34:10.695Z","type":"message"}
{"nick":"ryah","message":"i would expect tcp and http-parser to be roughly the same","date":"2011-12-04T08:35:44.951Z","type":"message"}
{"nick":"mjr_","message":"I don't really know what any of that means.  I'm just sort of guessing at the meaning of the data in those snapshots","date":"2011-12-04T08:37:08.461Z","type":"message"}
{"nick":"mjr_","message":"I need to sleep.  I was pretty much up all night last night wrestling with scaling issues.","date":"2011-12-04T08:43:09.225Z","type":"message"}
{"nick":"mjr_","message":"We have a lot of room to try out patches on a small subset of the servers since we now have so many in operation","date":"2011-12-04T08:43:39.031Z","type":"message"}
{"nick":"ryah","message":"ok","date":"2011-12-04T08:44:00.961Z","type":"message"}
{"nick":"mjr_","message":"So if you come up with anything you'd like to try, I'm open to that.","date":"2011-12-04T08:44:01.867Z","type":"message"}
{"nick":"ryah","message":"ill take a hard look at the http-parser stuff soon","date":"2011-12-04T08:44:09.958Z","type":"message"}
{"nick":"ryah","message":"sounds like a likely canidate","date":"2011-12-04T08:44:16.383Z","type":"message"}
{"nick":"mjr_","message":"yeah, seems like something in there","date":"2011-12-04T08:44:26.242Z","type":"message"}
{"nick":"ryah","message":"i'll also notify the troops","date":"2011-12-04T08:44:27.820Z","type":"message"}
{"nick":"paddybyers","date":"2011-12-04T08:44:33.175Z","type":"join"}
{"nick":"mjr_","message":"Could be a bug in our code to that only seems to happen under certain circumstances","date":"2011-12-04T08:44:39.370Z","type":"message"}
{"nick":"mjr_","message":"RSS on some nodes runs at 200MB for 20 mins or so before starting the clumb.","date":"2011-12-04T08:45:08.718Z","type":"message"}
{"nick":"mjr_","message":"On other nodes, it starts climbing right away.","date":"2011-12-04T08:45:17.755Z","type":"message"}
{"nick":"mjr_","message":"The number of Timer objects seems odd also","date":"2011-12-04T08:45:52.151Z","type":"message"}
{"nick":"mjr_","message":"For tonight I'm just going to restart them all every 30 mins, whether they need it or not.","date":"2011-12-04T08:46:47.883Z","type":"message"}
{"nick":"mjr_","message":"Kinda sad.","date":"2011-12-04T08:46:57.275Z","type":"message"}
{"nick":"mjr_","message":"Anyway, talk to you later.","date":"2011-12-04T08:47:27.875Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2011-12-04T08:52:00.319Z","type":"quit"}
{"nick":"CIA-95","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307v0.6\u000f * r\u00026cc94db\u000f \u000310\u000f/ (4 files in 3 dirs)\u0002:\u000f Bump version to v0.6.5 - http://git.io/nm7mwQ","date":"2011-12-04T08:59:47.742Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2011-12-04T09:02:27.777Z","type":"quit"}
{"nick":"eddyb","message":"ryah: in stream_wrap.cc on line 172, global.slab is read","date":"2011-12-04T09:09:10.290Z","type":"message"}
{"nick":"CIA-95","message":"\u0002node:\u000f \u000303Ryan Dahl\u000f \u000307v0.6\u000f * r\u0002c50b0c9\u000f \u000310\u000f/ src/node_version.h \u0002:\u000f Now working on Node v0.6.6 - http://git.io/3gghGg","date":"2011-12-04T09:09:27.434Z","type":"message"}
{"nick":"eddyb","message":"but it's never set anywhere, so it doesn't make too much sense","date":"2011-12-04T09:09:28.871Z","type":"message"}
{"nick":"eddyb","message":"ryah: nevermind, it was close","date":"2011-12-04T09:09:58.562Z","type":"message"}
{"nick":"eddyb","message":"no idea how I missed it :|","date":"2011-12-04T09:10:05.479Z","type":"message"}
{"nick":"eddyb","message":"yet, a static handle could've been better","date":"2011-12-04T09:10:29.278Z","type":"message"}
{"nick":"eddyb","message":"I'll be the annoying questions guy today","date":"2011-12-04T09:26:14.180Z","type":"message"}
{"nick":"eddyb","message":"ryah: stream allocates Buffers for it's slab thing","date":"2011-12-04T09:26:34.781Z","type":"message"}
{"nick":"eddyb","message":"yet it uses the SlowBuffer version","date":"2011-12-04T09:26:43.581Z","type":"message"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-12-04T09:29:44.301Z","type":"quit"}
{"nick":"eddyb","message":"and I'm not sure if it's intended","date":"2011-12-04T09:32:21.068Z","type":"message"}
{"nick":"paddybyers","date":"2011-12-04T10:09:23.255Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2011-12-04T10:17:51.493Z","type":"quit"}
{"nick":"eddyb","message":"if I were to rewrite libuv, btw, I would make everything C++ classes with virtual inheritance","date":"2011-12-04T10:30:52.489Z","type":"message"}
{"nick":"eddyb","message":"or something like that","date":"2011-12-04T10:30:58.026Z","type":"message"}
{"nick":"paddybyers","date":"2011-12-04T10:32:19.357Z","type":"join"}
{"nick":"mraleph","date":"2011-12-04T10:54:14.355Z","type":"join"}
{"nick":"bnoordhuis","date":"2011-12-04T11:18:50.165Z","type":"join"}
{"nick":"luxigo","date":"2011-12-04T11:25:49.312Z","type":"join"}
{"nick":"CIA-95","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307v0.6\u000f * r\u0002248ca5d\u000f \u000310\u000f/ src/unix/error.c \u0002:\u000f unix: translate ETIMEDOUT to UV_ETIMEDOUT - http://git.io/V0P7Zw","date":"2011-12-04T11:28:05.701Z","type":"message"}
{"nick":"_eddyb_","date":"2011-12-04T11:29:40.153Z","type":"join"}
{"nick":"_eddyb_","reason":"Changing host","date":"2011-12-04T11:29:40.311Z","type":"quit"}
{"nick":"_eddyb_","date":"2011-12-04T11:29:40.312Z","type":"join"}
{"nick":"eddyb","reason":"Ping timeout: 240 seconds","date":"2011-12-04T11:32:17.466Z","type":"quit"}
{"nick":"_eddyb_","new_nick":"eddyb","date":"2011-12-04T11:39:25.763Z","type":"nick"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2011-12-04T11:52:51.651Z","type":"quit"}
{"nick":"eddyb","message":"child said: \"hello world\\r\\n\"","date":"2011-12-04T12:13:19.776Z","type":"message"}
{"nick":"eddyb","message":"so apart from that stupid stdin thing, it","date":"2011-12-04T12:13:42.426Z","type":"message"}
{"nick":"eddyb","message":"'s working out for me","date":"2011-12-04T12:13:46.875Z","type":"message"}
{"nick":"eddyb","message":"ryah: why aren't you doing the unref thing for stdin, too?","date":"2011-12-04T12:16:36.991Z","type":"message"}
{"nick":"eddyb","message":"it can be reffed only when it's reading","date":"2011-12-04T12:16:51.379Z","type":"message"}
{"nick":"eddyb","message":"https://github.com/joyent/node/issues/1726","date":"2011-12-04T12:16:52.955Z","type":"message"}
{"nick":"piscisaureus_","date":"2011-12-04T13:05:12.056Z","type":"join"}
{"nick":"eddyb","message":"O_O","date":"2011-12-04T13:07:37.205Z","type":"message"}
{"nick":"eddyb","message":"only 8 tests failed","date":"2011-12-04T13:07:43.716Z","type":"message"}
{"nick":"eddyb","message":"but 165 passed","date":"2011-12-04T13:07:51.052Z","type":"message"}
{"nick":"mmalecki","message":"eddyb: node tests? last time I checked 2 failed","date":"2011-12-04T13:08:10.556Z","type":"message"}
{"nick":"eddyb","message":"for me","date":"2011-12-04T13:08:19.066Z","type":"message"}
{"nick":"eddyb","message":"it's weird, what are those tests doing?","date":"2011-12-04T13:08:27.895Z","type":"message"}
{"nick":"eddyb","message":"try { do stuff } catch(e){/*don't care about errors*/}?","date":"2011-12-04T13:08:52.681Z","type":"message"}
{"nick":"mmalecki","message":"one is pausing and resuming stdin","date":"2011-12-04T13:08:54.435Z","type":"message"}
{"nick":"eddyb","message":"yeah, that fails for me, too","date":"2011-12-04T13:09:03.050Z","type":"message"}
{"nick":"mmalecki","message":"there's some fork tests that failed, iirc","date":"2011-12-04T13:09:07.518Z","type":"message"}
{"nick":"mmalecki","message":"http://travis-ci.org/#!/mmalecki/node/builds/370957","date":"2011-12-04T13:09:33.526Z","type":"message"}
{"nick":"eddyb","message":"anyway, this is my rewrite, which has little stuff implemented","date":"2011-12-04T13:10:04.980Z","type":"message"}
{"nick":"eddyb","message":"brb, food","date":"2011-12-04T13:10:25.279Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2011-12-04T13:11:50.652Z","type":"quit"}
{"nick":"paddybyers","date":"2011-12-04T13:35:55.263Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2011-12-04T13:44:00.463Z","type":"quit"}
{"nick":"eddyb","message":"this is wrong... the only fails I'm seeing are timeouts, most likely from the referenced stdin thing","date":"2011-12-04T13:44:05.638Z","type":"message"}
{"nick":"eddyb","message":"no \"module not found\"","date":"2011-12-04T13:44:42.802Z","type":"message"}
{"nick":"eddyb","message":"no \"method not found\"","date":"2011-12-04T13:44:56.776Z","type":"message"}
{"nick":"eddyb","message":"I don't even have a TCP implementation","date":"2011-12-04T13:45:17.971Z","type":"message"}
{"nick":"eddyb","message":"yeah, I guessed so","date":"2011-12-04T13:46:26.031Z","type":"message"}
{"nick":"luxigo","reason":"*.net *.split","date":"2011-12-04T13:46:57.907Z","type":"quit"}
{"nick":"mraleph","reason":"*.net *.split","date":"2011-12-04T13:46:58.359Z","type":"quit"}
{"nick":"pquerna","reason":"*.net *.split","date":"2011-12-04T13:47:00.160Z","type":"quit"}
{"nick":"mjr_","reason":"*.net *.split","date":"2011-12-04T13:47:00.878Z","type":"quit"}
{"nick":"CoverSlide","reason":"*.net *.split","date":"2011-12-04T13:47:01.037Z","type":"quit"}
{"nick":"mmalecki","reason":"*.net *.split","date":"2011-12-04T13:47:01.237Z","type":"quit"}
{"nick":"creationix","reason":"*.net *.split","date":"2011-12-04T13:47:01.823Z","type":"quit"}
{"nick":"ljackson","reason":"*.net *.split","date":"2011-12-04T13:47:02.155Z","type":"quit"}
{"nick":"bnoordhuis","reason":"*.net *.split","date":"2011-12-04T13:47:05.547Z","type":"quit"}
{"nick":"ryah","reason":"*.net *.split","date":"2011-12-04T13:47:05.892Z","type":"quit"}
{"nick":"raggi_","reason":"*.net *.split","date":"2011-12-04T13:47:06.288Z","type":"quit"}
{"nick":"eddyb","reason":"*.net *.split","date":"2011-12-04T13:47:06.448Z","type":"quit"}
{"nick":"igorzi","reason":"*.net *.split","date":"2011-12-04T13:47:07.637Z","type":"quit"}
{"nick":"DrPizza","reason":"*.net *.split","date":"2011-12-04T13:47:07.948Z","type":"quit"}
{"nick":"DrPizza_","date":"2011-12-04T13:47:08.938Z","type":"join"}
{"nick":"igorzi","date":"2011-12-04T13:54:17.896Z","type":"join"}
{"nick":"eddyb","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"raggi_","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"ryah","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"bnoordhuis","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"pquerna","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"mmalecki","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"CoverSlide","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"mjr_","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"mraleph","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"luxigo","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"ljackson","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"creationix","date":"2011-12-04T13:54:18.058Z","type":"join"}
{"nick":"eddyb","message":"the topic is still there","date":"2011-12-04T13:57:15.494Z","type":"message"}
{"nick":"eddyb","message":":)","date":"2011-12-04T13:57:16.100Z","type":"message"}
{"nick":"creationix","reason":"*.net *.split","date":"2011-12-04T14:07:15.111Z","type":"quit"}
{"nick":"creationix","date":"2011-12-04T14:08:38.453Z","type":"join"}
{"nick":"eddyb","message":"heh, you're late","date":"2011-12-04T14:09:41.151Z","type":"message"}
{"nick":"eddyb","message":"someone can fix the topic now :)","date":"2011-12-04T14:09:51.989Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 255 seconds","date":"2011-12-04T14:56:18.269Z","type":"quit"}
{"nick":"eddyb","message":"ryah: seriously, someone fix the topic","date":"2011-12-04T15:26:44.786Z","type":"message"}
{"nick":"mmalecki","message":"eddyb: what's wrong with it?","date":"2011-12-04T15:27:15.008Z","type":"message"}
{"nick":"eddyb","message":"gimme a second","date":"2011-12-04T15:27:26.797Z","type":"message"}
{"nick":"eddyb","reason":"\"Konversation terminated!\"","date":"2011-12-04T15:27:28.428Z","type":"part"}
{"nick":"eddyb","date":"2011-12-04T15:27:36.568Z","type":"join"}
{"nick":"eddyb","message":"mmalecki: heh","date":"2011-12-04T15:27:44.050Z","type":"message"}
{"nick":"mmalecki","message":"yeah, I'd guess so :)","date":"2011-12-04T15:27:54.333Z","type":"message"}
{"nick":"eddyb","message":"I was seeing the topic I set during the netsplit","date":"2011-12-04T15:27:57.375Z","type":"message"}
{"nick":"mmalecki","message":"what was it?","date":"2011-12-04T15:28:05.245Z","type":"message"}
{"nick":"eddyb","message":"You set the channel topic to \"EDDYB OWNS THIS CHANNEL. Just kiddin', waiting for the netsplit to be over :).\".","date":"2011-12-04T15:28:19.942Z","type":"message"}
{"nick":"mmalecki","message":"lol","date":"2011-12-04T15:28:28.104Z","type":"message"}
{"nick":"indutny","message":"hm... is isaacs going to be online today?","date":"2011-12-04T15:56:53.672Z","type":"message"}
{"nick":"mmalecki","message":"indutny: yes, for sure","date":"2011-12-04T15:57:11.289Z","type":"message"}
{"nick":"indutny","message":"mmalecki: :)","date":"2011-12-04T15:57:27.300Z","type":"message"}
{"nick":"mmalecki","message":"indutny: we're doing a podcast, so he should be here in ~3 hours or so?","date":"2011-12-04T15:57:34.135Z","type":"message"}
{"nick":"mmalecki","message":"indutny: you know, silly timezones","date":"2011-12-04T15:57:44.844Z","type":"message"}
{"nick":"indutny","message":"going to start refactoring of node-spdy, based on new zlib functionality","date":"2011-12-04T15:57:48.384Z","type":"message"}
{"nick":"indutny","message":"mmalecki: yeah, I understand","date":"2011-12-04T15:57:54.232Z","type":"message"}
{"nick":"indutny","message":"mmalecki: are you on nodeup with indexzero and isaacs?","date":"2011-12-04T15:58:05.526Z","type":"message"}
{"nick":"mmalecki","message":"indutny: yeah","date":"2011-12-04T15:58:14.411Z","type":"message"}
{"nick":"mmalecki","message":"I hope I'll be able to come up with some topic ;)","date":"2011-12-04T15:59:06.516Z","type":"message"}
{"nick":"indutny","message":"mmalecki: hehe :) nice","date":"2011-12-04T15:59:34.501Z","type":"message"}
{"nick":"erickt","date":"2011-12-04T16:08:50.479Z","type":"join"}
{"nick":"eddyb","message":"https://github.com/eddyb/gearbox-node/commits/master","date":"2011-12-04T16:09:37.053Z","type":"message"}
{"nick":"eddyb","message":"this is making me feel like I've done something","date":"2011-12-04T16:09:50.385Z","type":"message"}
{"nick":"mmalecki","message":"eddyb: wtf","date":"2011-12-04T16:11:22.487Z","type":"message"}
{"nick":"mmalecki","message":"eddyb: is it?","date":"2011-12-04T16:11:31.139Z","type":"message"}
{"nick":"mmalecki","message":"I don't even","date":"2011-12-04T16:11:48.854Z","type":"message"}
{"nick":"eddyb","message":"why the shock?","date":"2011-12-04T16:11:50.883Z","type":"message"}
{"nick":"eddyb","message":"funny thing, last commit was exactly a month ago","date":"2011-12-04T16:12:09.332Z","type":"message"}
{"nick":"eddyb","message":"mmalecki: all you're seeing is my local changes being selected into commits","date":"2011-12-04T16:12:43.783Z","type":"message"}
{"nick":"eddyb","message":"hmm","date":"2011-12-04T16:14:09.609Z","type":"message"}
{"nick":"indutny","message":"eddyb: oh man","date":"2011-12-04T16:14:26.204Z","type":"message"}
{"nick":"eddyb","message":"I think I know why tests tend to fail silently","date":"2011-12-04T16:14:28.093Z","type":"message"}
{"nick":"eddyb","message":"I wasn't doing exit(1) or anything like that","date":"2011-12-04T16:15:53.497Z","type":"message"}
{"nick":"eddyb","message":"YES","date":"2011-12-04T16:16:48.050Z","type":"message"}
{"nick":"eddyb","message":"now it works","date":"2011-12-04T16:16:49.978Z","type":"message"}
{"nick":"eddyb","message":"indutny, mmalecki: I could make CIA spit my commits in here :)","date":"2011-12-04T16:17:40.709Z","type":"message"}
{"nick":"eddyb","message":"right now #gearbox is pretty empty","date":"2011-12-04T16:17:51.391Z","type":"message"}
{"nick":"eddyb","message":"ofc... anything tty/pipe-related tends to timeout","date":"2011-12-04T16:19:50.158Z","type":"message"}
{"nick":"piscisaureus_","date":"2011-12-04T16:31:04.416Z","type":"join"}
{"nick":"_eddyb_","date":"2011-12-04T16:43:22.854Z","type":"join"}
{"nick":"_eddyb_","reason":"Changing host","date":"2011-12-04T16:43:23.016Z","type":"quit"}
{"nick":"_eddyb_","date":"2011-12-04T16:43:23.016Z","type":"join"}
{"nick":"eddyb","reason":"Ping timeout: 244 seconds","date":"2011-12-04T16:43:59.123Z","type":"quit"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2011-12-04T16:48:08.040Z","type":"quit"}
{"nick":"isaacs","date":"2011-12-04T16:50:22.514Z","type":"join"}
{"nick":"mmalecki","message":"indutny: ^","date":"2011-12-04T16:56:49.728Z","type":"message"}
{"nick":"piscisaureus_","date":"2011-12-04T16:57:32.557Z","type":"join"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2011-12-04T17:00:08.373Z","type":"quit"}
{"nick":"luxigo","reason":"Remote host closed the connection","date":"2011-12-04T17:13:48.506Z","type":"quit"}
{"nick":"|eddyb|","date":"2011-12-04T17:43:56.129Z","type":"join"}
{"nick":"_eddyb_","reason":"Ping timeout: 252 seconds","date":"2011-12-04T17:44:00.190Z","type":"quit"}
{"nick":"indutny","message":"mmalecki: :)","date":"2011-12-04T17:56:03.436Z","type":"message"}
{"nick":"indutny","message":"isaacs: !!!","date":"2011-12-04T17:56:06.298Z","type":"message"}
{"nick":"indutny","message":"heya!","date":"2011-12-04T17:56:13.540Z","type":"message"}
{"nick":"indutny","message":"how are you?","date":"2011-12-04T17:56:17.350Z","type":"message"}
{"nick":"|eddyb|","new_nick":"eddyb","date":"2011-12-04T18:06:01.881Z","type":"nick"}
{"nick":"paddybyers","date":"2011-12-04T18:08:02.078Z","type":"join"}
{"nick":"eddyb","message":"I think my rewrite is needed, node is really messy","date":"2011-12-04T18:31:03.567Z","type":"message"}
{"nick":"mmalecki","message":"eddyb: or optimized","date":"2011-12-04T18:37:10.806Z","type":"message"}
{"nick":"eddyb","message":"most stuff I've came across is not at all about optimization","date":"2011-12-04T18:38:10.666Z","type":"message"}
{"nick":"mmalecki","message":"eddyb: pull request ;)","date":"2011-12-04T18:38:43.487Z","type":"message"}
{"nick":"eddyb","message":"yeah, well","date":"2011-12-04T18:38:50.482Z","type":"message"}
{"nick":"eddyb","message":"nobody's gonna look at a pull request which changes everything","date":"2011-12-04T18:39:06.396Z","type":"message"}
{"nick":"eddyb","message":"this is how bindings should work: https://github.com/eddyb/gearbox-node/blob/master/src/modules/pipe.gear","date":"2011-12-04T18:39:53.100Z","type":"message"}
{"nick":"eddyb","message":"and there is still space for improvement","date":"2011-12-04T18:40:31.450Z","type":"message"}
{"nick":"isaacs","message":"indutny: hi","date":"2011-12-04T18:52:43.018Z","type":"message"}
{"nick":"indutny","message":"isaacs: hey, any luck with my patch?","date":"2011-12-04T18:57:40.459Z","type":"message"}
{"nick":"isaacs","message":"indutny: haven't looked at it.","date":"2011-12-04T18:57:48.071Z","type":"message"}
{"nick":"indutny","message":"isaacs: looking forward to use it new node-spdy module","date":"2011-12-04T18:57:49.858Z","type":"message"}
{"nick":"indutny","message":"isaacs: ah, ok","date":"2011-12-04T18:57:54.454Z","type":"message"}
{"nick":"isaacs","message":"been working on tap stuff, and being lazy this weekend :)","date":"2011-12-04T18:58:00.310Z","type":"message"}
{"nick":"indutny","message":":)","date":"2011-12-04T18:58:04.375Z","type":"message"}
{"nick":"indutny","message":"brb","date":"2011-12-04T18:58:06.624Z","type":"message"}
{"nick":"isaacs","message":"mostly lazy","date":"2011-12-04T18:58:09.093Z","type":"message"}
{"nick":"eddyb","message":"if you're lazy, I'm a sloth","date":"2011-12-04T19:01:58.958Z","type":"message"}
{"nick":"indutny","message":"back","date":"2011-12-04T20:05:07.848Z","type":"message"}
{"nick":"indutny","message":"isaacs: lets pull it! :)","date":"2011-12-04T20:05:45.432Z","type":"message"}
{"nick":"indutny","message":"isaacs: test is passing and I mostly copied it from one of my modules","date":"2011-12-04T20:06:09.727Z","type":"message"}
{"nick":"erickt","reason":"Quit: erickt","date":"2011-12-04T20:16:23.779Z","type":"quit"}
{"nick":"mikeal","date":"2011-12-04T20:43:25.264Z","type":"join"}
{"nick":"brson","date":"2011-12-04T20:45:13.025Z","type":"join"}
{"nick":"indexzero","date":"2011-12-04T20:45:42.378Z","type":"join"}
{"nick":"mraleph1","date":"2011-12-04T20:49:47.398Z","type":"join"}
{"nick":"mraleph","reason":"Read error: Connection reset by peer","date":"2011-12-04T20:49:53.446Z","type":"quit"}
{"nick":"mraleph1","reason":"Quit: Leaving.","date":"2011-12-04T21:00:28.132Z","type":"quit"}
{"nick":"piscisaureus_","date":"2011-12-04T21:00:51.214Z","type":"join"}
{"nick":"indutny","message":"isaacs: oh, looks like I'll probably need to add even more functionality to get zlib usable for spdy implementation","date":"2011-12-04T21:23:09.302Z","type":"message"}
{"nick":"indutny","message":"or not... lets see","date":"2011-12-04T21:24:16.849Z","type":"message"}
{"nick":"indutny","message":"isaacs: sorry, .flush() seems to fill my needs","date":"2011-12-04T21:25:33.512Z","type":"message"}
{"nick":"travis-ci","date":"2011-12-04T21:27:37.077Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] mmalecki/node#11 (travis-ci - 815fd83 : Maciej Małecki): The build is still failing.","date":"2011-12-04T21:27:37.242Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/mmalecki/node/compare/202ab16...815fd83","date":"2011-12-04T21:27:37.242Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/mmalecki/node/builds/373022","date":"2011-12-04T21:27:37.242Z","type":"message"}
{"nick":"travis-ci","date":"2011-12-04T21:27:37.242Z","type":"part"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2011-12-04T21:34:02.431Z","type":"quit"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2011-12-04T21:37:41.760Z","type":"quit"}
{"nick":"eddyb","reason":"Ping timeout: 244 seconds","date":"2011-12-04T21:46:14.099Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-04T21:49:40.652Z","type":"quit"}
{"nick":"mraleph","date":"2011-12-04T21:55:16.657Z","type":"join"}
{"nick":"mikeal","date":"2011-12-04T21:57:56.467Z","type":"join"}
{"nick":"AvianFlu","date":"2011-12-04T22:01:14.100Z","type":"join"}
{"nick":"CIA-95","reason":"Read error: Operation timed out","date":"2011-12-04T22:10:41.224Z","type":"quit"}
{"nick":"piscisaureus_","message":"I wonder if http://groups.google.com/group/nodejs/browse_thread/thread/b5eb060e6df3d1c9 could be related to mjr_'s problem","date":"2011-12-04T22:10:50.123Z","type":"message"}
{"nick":"mjr_","message":"oh, interesting","date":"2011-12-04T22:14:23.541Z","type":"message"}
{"nick":"piscisaureus_","message":"maybe - It's just speculation, this guy could just be doing something wrong","date":"2011-12-04T22:14:45.167Z","type":"message"}
{"nick":"mjr_","message":"Yeah, and we could be doing something wrong","date":"2011-12-04T22:15:08.898Z","type":"message"}
{"nick":"piscisaureus_","message":"I can't reproduce any leaks on windows w/ aborted connections on windows","date":"2011-12-04T22:15:23.958Z","type":"message"}
{"nick":"mjr_","message":"That guy's on 0.4 though","date":"2011-12-04T22:15:25.305Z","type":"message"}
{"nick":"piscisaureus_","message":"will try on mac shortly","date":"2011-12-04T22:15:28.841Z","type":"message"}
{"nick":"piscisaureus_","message":"oh","date":"2011-12-04T22:15:30.223Z","type":"message"}
{"nick":"piscisaureus_","message":"hmm","date":"2011-12-04T22:15:31.993Z","type":"message"}
{"nick":"mjr_","message":"Otherwise node inspector wouldn't work","date":"2011-12-04T22:15:36.903Z","type":"message"}
{"nick":"piscisaureus_","message":"inspector doesn't work in 0.4 - I didn't even know","date":"2011-12-04T22:16:02.305Z","type":"message"}
{"nick":"mjr_","message":"it doesn't work on 0.6","date":"2011-12-04T22:16:09.662Z","type":"message"}
{"nick":"mjr_","message":"The heap profiler part","date":"2011-12-04T22:16:13.347Z","type":"message"}
{"nick":"piscisaureus_","message":"er, yeah","date":"2011-12-04T22:16:14.616Z","type":"message"}
{"nick":"mjr_","message":"Danny is working on it.","date":"2011-12-04T22:16:22.800Z","type":"message"}
{"nick":"mjr_","message":"Luckily for us, the one person in the world who maintains the one heap tool we have for V8 happens to work for us. ","date":"2011-12-04T22:16:45.866Z","type":"message"}
{"nick":"mjr_","message":"Sounds like it's another day or two off though.","date":"2011-12-04T22:17:02.060Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_, are you running on joyent infra?","date":"2011-12-04T22:17:23.664Z","type":"message"}
{"nick":"mjr_","message":"sadly, no","date":"2011-12-04T22:17:28.449Z","type":"message"}
{"nick":"piscisaureus_","message":"hmm","date":"2011-12-04T22:17:31.084Z","type":"message"}
{"nick":"mjr_","message":"I was about to migrate over, and then we got popular","date":"2011-12-04T22:17:37.344Z","type":"message"}
{"nick":"mjr_","message":"Which makes it a lot harder","date":"2011-12-04T22:17:41.304Z","type":"message"}
{"nick":"piscisaureus_","message":"they have this nice deep heap inspection stuff","date":"2011-12-04T22:17:42.998Z","type":"message"}
{"nick":"mjr_","message":"I know, it would be great to have that right now.","date":"2011-12-04T22:17:50.557Z","type":"message"}
{"nick":"piscisaureus_","message":"in the works, but I saw ith work","date":"2011-12-04T22:17:53.548Z","type":"message"}
{"nick":"CIA-111","date":"2011-12-04T22:17:57.627Z","type":"join"}
{"nick":"piscisaureus_","message":"yeah ok","date":"2011-12-04T22:17:58.074Z","type":"message"}
{"nick":"mjr_","message":"I'm about to roll back to 0.4 and start collecting data, so we'll see how it's different","date":"2011-12-04T22:18:21.688Z","type":"message"}
{"nick":"mjr_","message":"I'm tempted to roll a custom 0.4 build that has the latest V8 and see how that fares.","date":"2011-12-04T22:18:46.787Z","type":"message"}
{"nick":"piscisaureus_","message":"heh - that shouldn't be so hard","date":"2011-12-04T22:19:14.080Z","type":"message"}
{"nick":"mjr_","message":"I wish there was an easy way to get just one of our processes running on Joyent, but we have all of these networking issues that get in the way.","date":"2011-12-04T22:22:02.276Z","type":"message"}
{"nick":"isaacs","reason":"Read error: Connection reset by peer","date":"2011-12-04T22:28:12.706Z","type":"quit"}
{"nick":"isaacs_","date":"2011-12-04T22:28:12.942Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2011-12-04T22:28:37.521Z","type":"quit"}
{"nick":"paddybyers","date":"2011-12-04T22:30:24.034Z","type":"join"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-12-04T22:41:51.532Z","type":"quit"}
{"nick":"piscisaureus_","message":"well, I'm not saying you should, but it might have helped here","date":"2011-12-04T22:46:33.713Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2011-12-04T22:49:30.194Z","type":"quit"}
{"nick":"piscisaureus_","message":"mjr_: you're using https right?","date":"2011-12-04T22:54:00.138Z","type":"message"}
{"nick":"mjr_","message":"oh yes","date":"2011-12-04T22:54:07.760Z","type":"message"}
{"nick":"piscisaureus_","message":"that could matter","date":"2011-12-04T22:54:17.208Z","type":"message"}
{"nick":"mjr_","message":"We are using the hell out of https","date":"2011-12-04T22:54:18.563Z","type":"message"}
{"nick":"mjr_","message":"We have many long-lived connections on https, and a smaller number of short ones.","date":"2011-12-04T22:54:40.256Z","type":"message"}
{"nick":"mjr_","message":"The bulk of the connection count and bytes goes over http.","date":"2011-12-04T22:54:49.625Z","type":"message"}
{"nick":"mjr_","message":"But each process is holding over 1,000 https open for a long time and streaming updates down them.","date":"2011-12-04T22:55:12.632Z","type":"message"}
{"nick":"piscisaureus_","message":"I can't find any leaks with normal http atm, but https is much trickier","date":"2011-12-04T22:57:02.334Z","type":"message"}
{"nick":"mjr_","message":"I'll bet","date":"2011-12-04T22:59:47.197Z","type":"message"}
{"nick":"mjr_","message":"I'm on Linux in production, but I could arrange you access to a machine if you thought that might help.","date":"2011-12-04T23:00:25.387Z","type":"message"}
{"nick":"mjr_","message":"No dtrace, sadly.","date":"2011-12-04T23:00:39.946Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: if we can't figure it it out might help","date":"2011-12-04T23:00:49.803Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: but its midnight here, I am going to leave shortly","date":"2011-12-04T23:01:16.317Z","type":"message"}
{"nick":"mjr_","message":"OK, well thanks for spending some time on it.","date":"2011-12-04T23:01:30.182Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: Oh I'll do much more, but not right now :-)","date":"2011-12-04T23:01:47.011Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: this makes me nervous: https://github.com/joyent/node/blob/0e8a55d2a22b88dc3b9b0165f344602b0fa8c977/lib/tls.js","date":"2011-12-04T23:05:27.797Z","type":"message"}
{"nick":"mjr_","message":"the whole file, or some change in it?","date":"2011-12-04T23:06:00.021Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: oh, this commit: https://github.com/joyent/node/commit/0e8a55d2a22b88dc3b9b0165f344602b0fa8c977","date":"2011-12-04T23:06:17.598Z","type":"message"}
{"nick":"piscisaureus_","message":"sorry","date":"2011-12-04T23:06:18.551Z","type":"message"}
{"nick":"mjr_","message":"oh, interesting","date":"2011-12-04T23:09:34.118Z","type":"message"}
{"nick":"mjr_","message":"so","date":"2011-12-04T23:09:37.999Z","type":"message"}
{"nick":"mjr_","message":"We lean on flow control in https a lot","date":"2011-12-04T23:09:48.554Z","type":"message"}
{"nick":"mjr_","message":"Since we are streaming updates out https to mobile clients, they often go away","date":"2011-12-04T23:10:01.001Z","type":"message"}
{"nick":"mjr_","message":"But we don't get an end, because their phone just went out of range or wahtever","date":"2011-12-04T23:10:13.264Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: yeah - now you should notice that this only affects the encrypted text stream","date":"2011-12-04T23:10:34.973Z","type":"message"}
{"nick":"mjr_","message":"So when we get TCP back pressure for a while, we destroy the response.","date":"2011-12-04T23:10:36.595Z","type":"message"}
{"nick":"mjr_","message":"BTW, I had to patch node 0.4 to ignore a bunch of https errors that were uncatchable.  I was sort of hoping that 0.6 would fix a lot of that.","date":"2011-12-04T23:16:42.119Z","type":"message"}
{"nick":"mjr_","message":"But https is hard.","date":"2011-12-04T23:16:44.083Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah, it's very painful","date":"2011-12-04T23:16:57.905Z","type":"message"}
{"nick":"mjr_","message":"To be fair, node 0.6 DID fix those uncatchable errors.  ","date":"2011-12-04T23:17:04.959Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: btw that event that this commit removes - I think it was new for 0.6 so your code won't rely on it","date":"2011-12-04T23:17:41.977Z","type":"message"}
{"nick":"piscisaureus_","message":"iow - nvm","date":"2011-12-04T23:17:52.250Z","type":"message"}
{"nick":"mjr_","message":"I see.  It's not used in the node internals somewhere?","date":"2011-12-04T23:18:06.377Z","type":"message"}
{"nick":"piscisaureus_","message":"I'm still looking for that","date":"2011-12-04T23:18:29.909Z","type":"message"}
{"nick":"piscisaureus_","message":"but I don't think so","date":"2011-12-04T23:18:38.096Z","type":"message"}
{"nick":"mjr_","message":"I think all we use on https is that write returns false.  If we get too many writes in a row that return false, then we drop.","date":"2011-12-04T23:18:53.960Z","type":"message"}
{"nick":"piscisaureus_","message":"there were changes to that","date":"2011-12-04T23:19:19.135Z","type":"message"}
{"nick":"piscisaureus_","message":"https://github.com/joyent/node/commit/4cdf9d4","date":"2011-12-04T23:19:20.013Z","type":"message"}
{"nick":"mjr_","message":"hmm","date":"2011-12-04T23:19:54.015Z","type":"message"}
{"nick":"mjr_","message":"Our crude heap snapshot sort of points to http parser, but I wonder if that could be related to https.","date":"2011-12-04T23:20:57.196Z","type":"message"}
{"nick":"piscisaureus_","message":"mjr_: it could also be the http header optimizations that bnoordhuis did","date":"2011-12-04T23:21:29.578Z","type":"message"}
{"nick":"piscisaureus_","message":"anyway - gtg, will spend more time tomorrow","date":"2011-12-04T23:25:29.580Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2011-12-04T23:27:45.133Z","type":"quit"}
{"nick":"piscisaureus_","date":"2011-12-04T23:36:08.455Z","type":"join"}
{"nick":"piscisaureus_","reason":"Read error: Connection reset by peer","date":"2011-12-04T23:38:28.500Z","type":"quit"}
{"nick":"piscisaureus_","date":"2011-12-04T23:38:49.437Z","type":"join"}
{"nick":"mikeal","date":"2011-12-04T23:52:23.690Z","type":"join"}
{"nick":"bbenvie","date":"2011-12-04T23:56:41.918Z","type":"quit"}
