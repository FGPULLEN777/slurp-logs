{"nick":"C-Man","reason":"Quit: Connection reset by beer","date":"2012-06-16T00:42:40.280Z","type":"quit"}
{"nick":"CodeWar","date":"2012-06-16T01:42:03.102Z","type":"join"}
{"nick":"CodeWar","reason":"Quit: Leaving","date":"2012-06-16T01:46:16.735Z","type":"quit"}
{"nick":"CodeWar","date":"2012-06-16T02:05:39.091Z","type":"join"}
{"nick":"CodeWar","message":"I found several blogs about V8 profiling though I ll admit I have a very dumb and basic question","date":"2012-06-16T02:06:16.263Z","type":"message"}
{"nick":"CodeWar","message":"when we say sampling based profiling, we re not referring to sampling IP at regular intervals right?","date":"2012-06-16T02:06:39.436Z","type":"message"}
{"nick":"CodeWar","message":"at a high level my question is this, how does the compiler determine what is hot and what is not. Is it a counter per method that the interpreter updates ","date":"2012-06-16T02:07:24.125Z","type":"message"}
{"nick":"CodeWar","message":"never mind found \"the tale of two compilers\" blog","date":"2012-06-16T02:12:00.072Z","type":"message"}
{"nick":"CodeWar","reason":"\"Leaving\"","date":"2012-06-16T02:43:05.016Z","type":"part"}
{"nick":"temp01","date":"2012-06-16T03:10:22.807Z","type":"join"}
{"nick":"Net147","date":"2012-06-16T04:08:19.644Z","type":"join"}
{"nick":"Net147","reason":"Client Quit","date":"2012-06-16T04:12:12.443Z","type":"quit"}
{"nick":"mritz","date":"2012-06-16T05:06:12.875Z","type":"join"}
{"nick":"mritz","reason":"Quit: Computer has gone to sleep.","date":"2012-06-16T05:12:39.730Z","type":"quit"}
{"nick":"temp01","reason":"Read error: Connection reset by peer","date":"2012-06-16T06:51:23.113Z","type":"quit"}
{"nick":"temp01","date":"2012-06-16T06:54:23.494Z","type":"join"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-16T06:57:02.924Z","type":"quit"}
{"nick":"rendar","date":"2012-06-16T06:57:30.856Z","type":"join"}
{"nick":"nwillems","reason":"Ping timeout: 252 seconds","date":"2012-06-16T07:43:33.994Z","type":"quit"}
{"nick":"joshthecoder","date":"2012-06-16T08:00:47.425Z","type":"join"}
{"nick":"TheJH","date":"2012-06-16T08:05:22.872Z","type":"join"}
{"nick":"hij1nx","date":"2012-06-16T08:12:56.159Z","type":"join"}
{"nick":"hij1nx_","date":"2012-06-16T08:15:02.422Z","type":"join"}
{"nick":"hij1nx","reason":"Read error: Connection reset by peer","date":"2012-06-16T08:15:59.787Z","type":"quit"}
{"nick":"hij1nx_","new_nick":"hij1nx","date":"2012-06-16T08:16:00.737Z","type":"nick"}
{"nick":"TheJH","reason":"Ping timeout: 240 seconds","date":"2012-06-16T08:16:54.841Z","type":"quit"}
{"nick":"joshthecoder","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-06-16T08:19:17.903Z","type":"quit"}
{"nick":"C-Man","date":"2012-06-16T08:20:01.222Z","type":"join"}
{"nick":"nwillems","date":"2012-06-16T08:21:09.185Z","type":"join"}
{"nick":"nwillems","reason":"Ping timeout: 260 seconds","date":"2012-06-16T08:28:31.698Z","type":"quit"}
{"nick":"TheJH","date":"2012-06-16T09:03:39.223Z","type":"join"}
{"nick":"decoder","reason":"Ping timeout: 264 seconds","date":"2012-06-16T09:22:29.539Z","type":"quit"}
{"nick":"decoder","date":"2012-06-16T09:23:10.816Z","type":"join"}
{"nick":"[[zzz]]","date":"2012-06-16T09:36:43.218Z","type":"join"}
{"nick":"[[zz]]","reason":"Ping timeout: 244 seconds","date":"2012-06-16T09:39:45.587Z","type":"quit"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-16T10:22:14.488Z","type":"quit"}
{"nick":"hij1nx","date":"2012-06-16T10:36:03.753Z","type":"join"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-16T10:45:13.027Z","type":"quit"}
{"nick":"hij1nx","date":"2012-06-16T11:11:29.190Z","type":"join"}
{"nick":"[[zzz]]","new_nick":"[[zz]]","date":"2012-06-16T11:29:43.494Z","type":"nick"}
{"nick":"xan_","reason":"Quit: leaving","date":"2012-06-16T13:11:47.486Z","type":"quit"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-16T13:48:55.337Z","type":"quit"}
{"nick":"hij1nx","date":"2012-06-16T13:51:12.956Z","type":"join"}
{"nick":"jewel","date":"2012-06-16T14:42:33.893Z","type":"join"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-16T15:41:17.139Z","type":"quit"}
{"nick":"hij1nx","date":"2012-06-16T15:46:27.412Z","type":"join"}
{"nick":"temp01","reason":"Read error: Connection reset by peer","date":"2012-06-16T15:47:13.095Z","type":"quit"}
{"nick":"temp01","date":"2012-06-16T15:49:20.360Z","type":"join"}
{"nick":"RT|Chatzilla","reason":"Quit: ChatZilla 0.9.86.1 [Firefox 2.0.0.22pre/2009081014]","date":"2012-06-16T16:10:00.569Z","type":"quit"}
{"nick":"hij1nx","reason":"Quit: hij1nx","date":"2012-06-16T17:17:10.653Z","type":"quit"}
{"nick":"temp01","reason":"Read error: Connection reset by peer","date":"2012-06-16T17:42:17.861Z","type":"quit"}
{"nick":"joshthecoder","date":"2012-06-16T18:34:53.520Z","type":"join"}
{"nick":"jewel","reason":"Ping timeout: 246 seconds","date":"2012-06-16T19:21:55.214Z","type":"quit"}
{"nick":"CodeWar","date":"2012-06-16T20:58:46.511Z","type":"join"}
{"nick":"mraleph","date":"2012-06-16T21:48:58.853Z","type":"join"}
{"nick":"mraleph","message":"CodeWar: we used to use sampling sliding window profiler for determining what to optimize, now we use conters on functions.","date":"2012-06-16T22:10:19.360Z","type":"message"}
{"nick":"CodeWar","message":"mraleph, compile the counters into optimized code?","date":"2012-06-16T22:11:12.405Z","type":"message"}
{"nick":"mraleph","message":"why into optimized? on non-optimized","date":"2012-06-16T22:11:49.339Z","type":"message"}
{"nick":"CodeWar","message":"to know whats not hot anymore, ","date":"2012-06-16T22:12:01.046Z","type":"message"}
{"nick":"CodeWar","message":"err wait this is a method JIT is it?","date":"2012-06-16T22:12:05.758Z","type":"message"}
{"nick":"mraleph","message":"we don't do that.","date":"2012-06-16T22:12:09.756Z","type":"message"}
{"nick":"mraleph","message":"yes it's a method jit.","date":"2012-06-16T22:12:19.169Z","type":"message"}
{"nick":"CodeWar","message":"and I suppose once you decide a method is hot there is no distinction made between a hot trace path within that method?","date":"2012-06-16T22:12:40.865Z","type":"message"}
{"nick":"mraleph","message":"no we don't see what is hot inside.","date":"2012-06-16T22:13:52.138Z","type":"message"}
{"nick":"CodeWar","message":"what would trigger a method to be deoptimized? I suppose code cache space is limitted?","date":"2012-06-16T22:14:30.408Z","type":"message"}
{"nick":"mraleph","message":"deoptimization will happen only if check that guards some assumption inside optimized code fails, or if debugger is enabled (and a minor other cases).","date":"2012-06-16T22:17:55.701Z","type":"message"}
{"nick":"mraleph","message":"size of code space is limited but no attempt to flush optimized code is currently done.","date":"2012-06-16T22:18:17.282Z","type":"message"}
{"nick":"CodeWar","message":"got it","date":"2012-06-16T22:18:22.305Z","type":"message"}
{"nick":"CodeWar","message":"since I ahve your attention, I ran V8 on our cpu simulator and did what I did for Mozilla","date":"2012-06-16T22:18:50.175Z","type":"message"}
{"nick":"CodeWar","message":"viz., marked all your code pages and heap pages single threaded (mmap (map_threadlocal)) its an extra kernel flag I added some time earlier","date":"2012-06-16T22:19:09.011Z","type":"message"}
{"nick":"CodeWar","message":"it brings IPI traffic down by 90 % and helps IPC numbers but not sure if its safe","date":"2012-06-16T22:19:22.821Z","type":"message"}
{"nick":"CodeWar","message":"Question being:  is code cache used by a single thread or shared across threads. Is the compiler a foreground compielr or background one? Can GC touch heap/code cache of various threads?","date":"2012-06-16T22:20:03.789Z","type":"message"}
{"nick":"mraleph","message":"normally V8 is single threaded these days.","date":"2012-06-16T22:21:07.166Z","type":"message"}
{"nick":"mraleph","message":"unless you use it from different threads.","date":"2012-06-16T22:21:20.278Z","type":"message"}
{"nick":"CodeWar","message":"didn't follow can you elaborate","date":"2012-06-16T22:21:46.453Z","type":"message"}
{"nick":"CodeWar","message":"can the code cache be used by two separate threads or will each Javascript Script have its own sandbox used by only one thread","date":"2012-06-16T22:22:11.237Z","type":"message"}
{"nick":"mraleph","message":"V8 by itself is single threaded (GC, compiler are all performed in the same thread that executes JavaScript) but V8 can be used by two threads (not simultaneously though, they have to maintain exclusive access to V8 isolate).","date":"2012-06-16T22:23:14.634Z","type":"message"}
{"nick":"CodeWar","message":"[(GC, compiler are all performed in the same thread that executes JavaScript)] .... great good to know","date":"2012-06-16T22:23:56.947Z","type":"message"}
{"nick":"CodeWar","message":"Nitro Assembler and Mozilla have a scary change coming around called JIT hardening,  change code cache permission back to X after code patching and do WX before patching... any idea if V8 intends to do somethign similar","date":"2012-06-16T22:25:06.329Z","type":"message"}
{"nick":"CodeWar","message":"*scary because* these transitions accompany TLB invalidates and broadcasts and on ARM they are less efficient than x86 (details ...)","date":"2012-06-16T22:25:28.065Z","type":"message"}
{"nick":"CodeWar","message":"that should have read Webkit Assembler, sorry","date":"2012-06-16T22:25:58.162Z","type":"message"}
{"nick":"mraleph","message":"I have not seen any changes like that comming into V8. But it's interesting to know. I am quite curious what the penalty is such a change is going to be.","date":"2012-06-16T22:27:16.366Z","type":"message"}
{"nick":"mraleph","message":"Can you point me to bug numbers or something for SpiderMonkey and JavaScriptCore?","date":"2012-06-16T22:27:50.754Z","type":"message"}
{"nick":"mraleph","message":"I wonder if using indirect calls is better than meddling with page permissions.","date":"2012-06-16T22:28:42.611Z","type":"message"}
{"nick":"CodeWar","message":"https://bugzilla.mozilla.org/show_bug.cgi?id=677272","date":"2012-06-16T22:29:08.319Z","type":"message"}
{"nick":"CodeWar","message":"mraleph,  it is","date":"2012-06-16T22:29:12.640Z","type":"message"}
{"nick":"CodeWar","message":"the define in Webkit's Assembler is currently disabled, I don't have numbers or atleast not ones I can openly share unfortunately","date":"2012-06-16T22:29:53.991Z","type":"message"}
{"nick":"CodeWar","message":"part of the page meddling part has to do with internal processor trace caches (which are really Trace JITs of predecoded instructions) when you change page protections they have to be blindly discarded","date":"2012-06-16T22:30:59.828Z","type":"message"}
{"nick":"CodeWar","message":"indirect target prediction for hot code is not too hard in trace cache and there are ITPs too ","date":"2012-06-16T22:31:17.839Z","type":"message"}
{"nick":"mraleph","message":"thanks","date":"2012-06-16T22:31:45.379Z","type":"message"}
{"nick":"mraleph","message":"I think the bug is assigned to a person who does not work for Mozilla anymore :-)","date":"2012-06-16T22:37:33.390Z","type":"message"}
{"nick":"CodeWar","message":"yes Chris left a while back though the code is in only the switch needs to be flipped","date":"2012-06-16T22:40:31.675Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2012-06-16T22:41:12.920Z","type":"quit"}
{"nick":"CodeWar","message":"we flipped the switch internally fixed some bugs, the perf was atrocious, I guess security triumphs perf.  If this is going to be a mainstream browser feature then time for processors to go back and re-add stuff ;-)","date":"2012-06-16T22:41:32.099Z","type":"message"}
{"nick":"mraleph","date":"2012-06-16T22:41:38.054Z","type":"join"}
{"nick":"rendar","date":"2012-06-16T22:44:20.640Z","type":"quit"}
{"nick":"mraleph","reason":"Client Quit","date":"2012-06-16T22:46:27.635Z","type":"quit"}
{"nick":"CodeWar","message":"any plans for object inlining or object colocation  [not sure if it even makes sense in JS, I know Java and get by on JS, sorry :-( ] ","date":"2012-06-16T22:49:04.505Z","type":"message"}
{"nick":"CodeWar","message":"having frequently accessed objects be virtually contiguous makes it easier for hardware prefetchers. Large page support for ARM is almost in its generally good news for the caches and TLBs","date":"2012-06-16T22:49:49.200Z","type":"message"}
{"nick":"CodeWar","reason":"Quit: Leaving","date":"2012-06-16T23:08:44.321Z","type":"quit"}
{"nick":"TheJH","reason":"Ping timeout: 246 seconds","date":"2012-06-16T23:12:13.250Z","type":"quit"}
{"nick":"RT|Chatzilla","date":"2012-06-16T23:16:17.893Z","type":"join"}
