{"nick":"bnoordhuis","message":"rvagg, wolfeidau: added","date":"2014-11-05T00:11:04.785Z","type":"message"}
{"nick":"rvagg","message":"woot, thanks bnoordhuis","date":"2014-11-05T00:11:13.126Z","type":"message"}
{"nick":"wolfeidau","message":"thanks!","date":"2014-11-05T00:11:13.208Z","type":"message"}
{"nick":"bnoordhuis","message":"wolfeidau: benchmark results would be much appreciated","date":"2014-11-05T00:12:17.061Z","type":"message"}
{"nick":"wolfeidau","message":"bnoordhuis: yeah I will setup something basic with graphs up on the web and get a couple of systems to push data too it","date":"2014-11-05T00:14:25.576Z","type":"message"}
{"nick":"wolfeidau","message":"for now i think some cycled tests would do, just to see CPU, memory, and event thread delay","date":"2014-11-05T00:15:25.452Z","type":"message"}
{"nick":"wolfeidau","message":"for those tasks","date":"2014-11-05T00:15:33.113Z","type":"message"}
{"nick":"ijroth","date":"2014-11-05T00:24:48.510Z","type":"join"}
{"nick":"trevnorris","message":"bnoordhuis: found the issue. bad static_cast on a void*","date":"2014-11-05T00:26:41.362Z","type":"message"}
{"nick":"rmg","reason":"Remote host closed the connection","date":"2014-11-05T00:28:47.300Z","type":"quit"}
{"nick":"rvagg","message":"wolfeidau: v0.12 branch is more active btw","date":"2014-11-05T00:39:07.189Z","type":"message"}
{"nick":"wolfeidau","message":"rvagg: cheers will give that a spin tonight!","date":"2014-11-05T00:40:13.546Z","type":"message"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2014-11-05T00:40:20.620Z","type":"quit"}
{"nick":"Wraithan","reason":"Ping timeout: 255 seconds","date":"2014-11-05T00:50:09.109Z","type":"quit"}
{"nick":"ijroth","reason":"Quit: Leaving.","date":"2014-11-05T00:51:15.023Z","type":"quit"}
{"nick":"rmg","date":"2014-11-05T00:51:48.132Z","type":"join"}
{"nick":"indutny","message":"heya","date":"2014-11-05T01:03:11.439Z","type":"message"}
{"nick":"indutny","message":"how are things?","date":"2014-11-05T01:03:14.568Z","type":"message"}
{"nick":"ramitos_","date":"2014-11-05T01:03:36.069Z","type":"join"}
{"nick":"ramitos","reason":"Ping timeout: 244 seconds","date":"2014-11-05T01:06:17.614Z","type":"quit"}
{"nick":"Wraithan","date":"2014-11-05T01:17:56.471Z","type":"join"}
{"nick":"qard","reason":"Quit: leaving","date":"2014-11-05T01:27:16.677Z","type":"quit"}
{"nick":"Wraithan","reason":"Ping timeout: 272 seconds","date":"2014-11-05T01:31:03.838Z","type":"quit"}
{"nick":"ijroth","date":"2014-11-05T01:32:06.364Z","type":"join"}
{"nick":"Wraithan","date":"2014-11-05T01:33:34.485Z","type":"join"}
{"nick":"ijroth","reason":"Client Quit","date":"2014-11-05T01:36:16.998Z","type":"quit"}
{"nick":"wolfeidau","date":"2014-11-05T01:41:25.722Z","type":"join"}
{"nick":"ijroth","date":"2014-11-05T01:43:03.337Z","type":"join"}
{"nick":"wolfeidau","reason":"Read error: Connection reset by peer","date":"2014-11-05T01:46:40.280Z","type":"quit"}
{"nick":"lloydde","reason":"Remote host closed the connection","date":"2014-11-05T01:52:37.373Z","type":"quit"}
{"nick":"ryan_stevens","reason":"Quit: ryan_stevens","date":"2014-11-05T01:57:11.901Z","type":"quit"}
{"nick":"lloydde","date":"2014-11-05T01:57:16.091Z","type":"join"}
{"nick":"lloydde","reason":"Remote host closed the connection","date":"2014-11-05T02:05:20.422Z","type":"quit"}
{"nick":"ijroth","reason":"Quit: Leaving.","date":"2014-11-05T02:05:30.872Z","type":"quit"}
{"nick":"ijroth","date":"2014-11-05T02:05:55.132Z","type":"join"}
{"nick":"indutny","message":"bnoordhuis: you around?","date":"2014-11-05T02:13:07.486Z","type":"message"}
{"nick":"ijroth","reason":"Quit: Leaving.","date":"2014-11-05T02:16:18.365Z","type":"quit"}
{"nick":"ijroth","date":"2014-11-05T02:18:08.918Z","type":"join"}
{"nick":"bnoordhuis","message":"indutny: for two more minutes, yes","date":"2014-11-05T02:22:06.511Z","type":"message"}
{"nick":"ijroth","reason":"Quit: Leaving.","date":"2014-11-05T02:25:35.562Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 258 seconds","date":"2014-11-05T02:39:17.837Z","type":"quit"}
{"nick":"lloydde","date":"2014-11-05T02:46:08.018Z","type":"join"}
{"nick":"lloydde","reason":"Remote host closed the connection","date":"2014-11-05T02:51:34.550Z","type":"quit"}
{"nick":"bnoordhuis","date":"2014-11-05T03:45:41.564Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 256 seconds","date":"2014-11-05T03:50:34.595Z","type":"quit"}
{"nick":"wolfeidau","date":"2014-11-05T04:39:42.391Z","type":"join"}
{"nick":"thlorenz","reason":"Remote host closed the connection","date":"2014-11-05T04:46:30.930Z","type":"quit"}
{"nick":"Fishrock123","date":"2014-11-05T04:55:07.542Z","type":"join"}
{"nick":"thlorenz","date":"2014-11-05T05:02:52.557Z","type":"join"}
{"nick":"Fishrock123","reason":"Quit: Leaving...","date":"2014-11-05T05:29:19.226Z","type":"quit"}
{"nick":"ryan_stevens","date":"2014-11-05T05:59:15.664Z","type":"join"}
{"nick":"rmg","reason":"Remote host closed the connection","date":"2014-11-05T06:07:28.501Z","type":"quit"}
{"nick":"lloydde","date":"2014-11-05T06:08:46.635Z","type":"join"}
{"nick":"node-forward-gh","date":"2014-11-05T06:18:22.148Z","type":"join"}
{"nick":"node-forward-gh","message":"[node\u000f] thlorenz\u000f opened pull request #49: modules: adding load linked modules feature (v0.12\u000f...fwd-v0.12-linked-module-loading\u000f) https://github.com/node-forward/node/pull/49\u000f","date":"2014-11-05T06:18:22.270Z","type":"message"}
{"nick":"node-forward-gh","date":"2014-11-05T06:18:22.270Z","type":"part"}
{"nick":"rmg","date":"2014-11-05T06:20:01.621Z","type":"join"}
{"nick":"trevnorris","message":"indutny: you still around?","date":"2014-11-05T06:23:21.508Z","type":"message"}
{"nick":"indutny","message":"yes","date":"2014-11-05T06:25:27.351Z","type":"message"}
{"nick":"indutny","message":"how are you?","date":"2014-11-05T06:25:33.822Z","type":"message"}
{"nick":"trevnorris","message":"indutny: well, just getting latest v8 to build. it has a crap ton of warnings.","date":"2014-11-05T06:27:03.938Z","type":"message"}
{"nick":"indutny","message":"oh well","date":"2014-11-05T06:27:12.223Z","type":"message"}
{"nick":"indutny","message":"I'm not surprised","date":"2014-11-05T06:27:15.306Z","type":"message"}
{"nick":"trevnorris","message":"ah crap. totally forgot what I was going to ask you... um.","date":"2014-11-05T06:28:02.342Z","type":"message"}
{"nick":"indutny","message":"what's up?","date":"2014-11-05T06:28:11.793Z","type":"message"}
{"nick":"indutny","message":"trevnorris: ??","date":"2014-11-05T06:29:24.483Z","type":"message"}
{"nick":"trevnorris","message":"trying to remember. i'm sick and my brain's all clogged up.","date":"2014-11-05T06:29:29.534Z","type":"message"}
{"nick":"indutny","message":"oh","date":"2014-11-05T06:29:35.352Z","type":"message"}
{"nick":"indutny","message":"hope you'll get better soon","date":"2014-11-05T06:29:42.023Z","type":"message"}
{"nick":"trevnorris","message":"ah ha I remember.","date":"2014-11-05T06:30:11.883Z","type":"message"}
{"nick":"trevnorris","message":"indutny: when I try to run \"lldb -- ./node\" I get the following (on linux):","date":"2014-11-05T06:30:43.901Z","type":"message"}
{"nick":"trevnorris","message":"error: node failed to load objfile for ./node","date":"2014-11-05T06:30:44.307Z","type":"message"}
{"nick":"trevnorris","message":"error: './node' doesn't contain the architecture x86_64","date":"2014-11-05T06:30:44.446Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2014-11-05T06:30:55.847Z","type":"message"}
{"nick":"indutny","message":"what does `file node` say?","date":"2014-11-05T06:31:04.700Z","type":"message"}
{"nick":"trevnorris","message":"out/Release/node: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, not stripped","date":"2014-11-05T06:31:39.291Z","type":"message"}
{"nick":"indutny","message":"very odd","date":"2014-11-05T06:32:19.351Z","type":"message"}
{"nick":"indutny","message":"lldb -- ./out/Release/node?","date":"2014-11-05T06:32:28.782Z","type":"message"}
{"nick":"trevnorris","message":"indutny: same","date":"2014-11-05T06:38:18.864Z","type":"message"}
{"nick":"indutny","message":"idk","date":"2014-11-05T06:38:57.591Z","type":"message"}
{"nick":"indutny","message":"I would google it :)","date":"2014-11-05T06:39:02.419Z","type":"message"}
{"nick":"indutny","message":"does it work on v0.10 node?","date":"2014-11-05T06:39:15.932Z","type":"message"}
{"nick":"trevnorris","message":"ah, good point.","date":"2014-11-05T06:39:29.472Z","type":"message"}
{"nick":"trevnorris","message":"nope. must be lldb.","date":"2014-11-05T06:39:44.080Z","type":"message"}
{"nick":"indutny","message":"yeah","date":"2014-11-05T06:39:47.440Z","type":"message"}
{"nick":"indutny","message":"I'd try updating it then","date":"2014-11-05T06:39:51.024Z","type":"message"}
{"nick":"indutny","message":"anyway","date":"2014-11-05T06:39:58.021Z","type":"message"}
{"nick":"indutny","message":"time to sleep","date":"2014-11-05T06:40:00.005Z","type":"message"}
{"nick":"indutny","message":"ttyl","date":"2014-11-05T06:40:01.031Z","type":"message"}
{"nick":"trevnorris","message":"night","date":"2014-11-05T06:40:24.530Z","type":"message"}
{"nick":"indutny","message":"you too","date":"2014-11-05T06:40:30.867Z","type":"message"}
{"nick":"trevnorris","message":"actually i'm running 3.6 pre-release. :P","date":"2014-11-05T06:40:40.935Z","type":"message"}
{"nick":"trevnorris","message":"maybe i'm a bit too far ahead...","date":"2014-11-05T06:40:46.187Z","type":"message"}
{"nick":"indutny","message":"hahaha","date":"2014-11-05T06:40:50.094Z","type":"message"}
{"nick":"indutny","message":"ook","date":"2014-11-05T06:40:51.493Z","type":"message"}
{"nick":"indutny","message":"btw, have you seen the security@ thing?","date":"2014-11-05T06:40:56.515Z","type":"message"}
{"nick":"trevnorris","message":"only glanced at it. i'll take a better look.","date":"2014-11-05T06:41:16.656Z","type":"message"}
{"nick":"indutny","message":"no problem","date":"2014-11-05T06:41:25.434Z","type":"message"}
{"nick":"dshaw_","date":"2014-11-05T07:00:44.606Z","type":"join"}
{"nick":"lloydde","reason":"Remote host closed the connection","date":"2014-11-05T07:10:31.554Z","type":"quit"}
{"nick":"ryan_stevens","reason":"Quit: ryan_stevens","date":"2014-11-05T07:11:21.558Z","type":"quit"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2014-11-05T07:36:48.168Z","type":"quit"}
{"nick":"trevnorris","message":"how is it that d8 always runs slower than node? I can't figure out the build options we use that do that.","date":"2014-11-05T07:38:44.127Z","type":"message"}
{"nick":"wolfeidau","message":"still some confusion relating to the private repo https://github.com/joyent/node/issues/8669#issuecomment-61688629","date":"2014-11-05T07:38:52.650Z","type":"message"}
{"nick":"trevnorris","message":"chrisdickinson: oh, btw. I just noticed you were the one that suggested the bit tweeking on my prime number generator over a year ago. thanks for that. :)","date":"2014-11-05T07:39:36.401Z","type":"message"}
{"nick":"trevnorris","message":"we shouldn't be closing issues in joyent/node if the patch has only landed in node-forward/node.","date":"2014-11-05T07:40:26.918Z","type":"message"}
{"nick":"trevnorris","message":"only posting that it has been fixed there.","date":"2014-11-05T07:40:39.567Z","type":"message"}
{"nick":"trevnorris","message":"cjihrig: ^","date":"2014-11-05T07:40:42.141Z","type":"message"}
{"nick":"wolfeidau","message":"Yeah just a note as it is popping up on twitter so comment storm may ensue :)","date":"2014-11-05T07:41:26.570Z","type":"message"}
{"nick":"trevnorris","message":"yeah. that shouldn't happen.","date":"2014-11-05T07:41:51.132Z","type":"message"}
{"nick":"trevnorris","message":"wolfeidau: thanks for mentioning it.","date":"2014-11-05T07:41:55.944Z","type":"message"}
{"nick":"wolfeidau","message":"np happy to help :)","date":"2014-11-05T07:42:06.421Z","type":"message"}
{"nick":"trevnorris","message":"wolfeidau: have a link to the twitter mention?","date":"2014-11-05T07:43:06.204Z","type":"message"}
{"nick":"wolfeidau","message":"trevnorris: https://twitter.com/vladikoff/status/529718526672928768","date":"2014-11-05T07:46:00.278Z","type":"message"}
{"nick":"trevnorris","message":"wolfeidau: thanks.","date":"2014-11-05T07:46:44.851Z","type":"message"}
{"nick":"rmg","reason":"Remote host closed the connection","date":"2014-11-05T08:16:33.741Z","type":"quit"}
{"nick":"rmg","date":"2014-11-05T08:17:51.123Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 258 seconds","date":"2014-11-05T08:22:22.765Z","type":"quit"}
{"nick":"seishun","date":"2014-11-05T08:27:57.252Z","type":"join"}
{"nick":"ijroth","date":"2014-11-05T08:47:43.071Z","type":"join"}
{"nick":"piscisaureus","date":"2014-11-05T08:48:02.112Z","type":"join"}
{"nick":"piscisaureus","message":"trevnorris: so, continuing this thought experiment about engine-agnosticism...","date":"2014-11-05T08:49:27.503Z","type":"message"}
{"nick":"paul_irish_","date":"2014-11-05T08:49:29.834Z","type":"join"}
{"nick":"trevnorris","message":"yup","date":"2014-11-05T08:49:42.975Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: I thing AsyncWrap and something smalloc-like should live in the abstraction layer","date":"2014-11-05T08:49:43.298Z","type":"message"}
{"nick":"piscisaureus","message":"and then node can build on top of that","date":"2014-11-05T08:49:49.993Z","type":"message"}
{"nick":"piscisaureus","message":"s/thing/think/","date":"2014-11-05T08:49:56.342Z","type":"message"}
{"nick":"paul_irish_","new_nick":"paul_irish","date":"2014-11-05T08:50:03.656Z","type":"nick"}
{"nick":"piscisaureus","message":"That provides some flexibility such that the abstraction layer can implement buffers, weak callbacks etc in a way that's efficient","date":"2014-11-05T08:50:47.360Z","type":"message"}
{"nick":"piscisaureus","message":"but there would be no need to replicate all the bindings","date":"2014-11-05T08:51:07.883Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: in re #8664 - how can I convince you there's a real bug here? :)","date":"2014-11-05T08:53:07.941Z","type":"message"}
{"nick":"trevnorris","message":"cool. sounds like a lot of work and a total PITA, but it could work.","date":"2014-11-05T08:53:12.267Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: I'm not expecting you to do it","date":"2014-11-05T08:53:26.149Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus: I'm not saying that it isn't a bug, i'm saying the fact you can show it's a bug by using console.log is also a bug.","date":"2014-11-05T08:53:48.619Z","type":"message"}
{"nick":"piscisaureus","message":"haha","date":"2014-11-05T08:54:02.139Z","type":"message"}
{"nick":"piscisaureus","message":"you want to fix that? I've gritted my teeth over this for the past 3 years.","date":"2014-11-05T08:54:22.019Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: but I don't see a way out unless we add uv_write_sync to libuv (which is also a major headache)","date":"2014-11-05T08:54:47.855Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus: so I'm assuming that fprintf() and fflush() don't work as expected on windows?","date":"2014-11-05T08:55:27.730Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: they work","date":"2014-11-05T08:55:38.173Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: but not if a the stream is a socket or an asynchronous pipe :)","date":"2014-11-05T08:55:56.881Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: but the bigger issue is that writes need to stay ordered","date":"2014-11-05T08:56:07.850Z","type":"message"}
{"nick":"trevnorris","message":"replied w/ hack fix to #8664","date":"2014-11-05T08:56:11.121Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: so if I do stdout.write('foo'); stdout->writeSync('bar'), the output must be \"foobar\" and not the other way round","date":"2014-11-05T08:56:57.535Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: that means that writeSync needs to synchronize previous async writes. It is possible, but headache nonetheless","date":"2014-11-05T08:57:21.265Z","type":"message"}
{"nick":"trevnorris","message":"wtf. doesn't that mean writeSync() would basically have to stall execution of the program until other asynchronous writes are complete?","date":"2014-11-05T08:57:48.101Z","type":"message"}
{"nick":"piscisaureus","message":"yup","date":"2014-11-05T08:57:54.147Z","type":"message"}
{"nick":"trevnorris","message":"but we don't give that guarantee to fs.write and fs.writeSync, do we?","date":"2014-11-05T08:58:23.711Z","type":"message"}
{"nick":"piscisaureus","message":"which is also a bug","date":"2014-11-05T08:58:32.460Z","type":"message"}
{"nick":"trevnorris","message":"haha, awesome.","date":"2014-11-05T08:58:41.742Z","type":"message"}
{"nick":"trevnorris","message":"is that a bug in libuv or node?","date":"2014-11-05T08:59:34.318Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: for writes the issue is not so bad, but ... fs.write(4, 'bar'); fs.closeSync(4);","date":"2014-11-05T08:59:48.735Z","type":"message"}
{"nick":"piscisaureus","message":"^-- that's really scary","date":"2014-11-05T09:00:00.648Z","type":"message"}
{"nick":"trevnorris","message":"ah... yeah. true that.","date":"2014-11-05T09:00:12.364Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: so yeah, the ability to synchronize between sync and async is a serious design requirement for libuv going forward","date":"2014-11-05T09:00:38.311Z","type":"message"}
{"nick":"piscisaureus","message":"or \"coordinate\"","date":"2014-11-05T09:00:50.831Z","type":"message"}
{"nick":"trevnorris","message":"okay, well let's put that on the v2 roadmap.","date":"2014-11-05T09:00:59.094Z","type":"message"}
{"nick":"trevnorris","message":"that is not a trivial task.","date":"2014-11-05T09:01:06.743Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: #8664 - majestic hack","date":"2014-11-05T09:01:14.247Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: it would be good if it had a comment that says it is a hack","date":"2014-11-05T09:01:30.654Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: actually, there's an issue with the hack","date":"2014-11-05T09:01:44.689Z","type":"message"}
{"nick":"trevnorris","message":"yeah. I know. it was just to get your test script working. ;-P","date":"2014-11-05T09:02:03.382Z","type":"message"}
{"nick":"trevnorris","message":"and all tests pass, so it _must_ work...","date":"2014-11-05T09:02:17.261Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: if we were already in a tick, now after the callback we're out of it","date":"2014-11-05T09:02:22.593Z","type":"message"}
{"nick":"piscisaureus","message":"try to wrap the entire test in a nextTick","date":"2014-11-05T09:02:28.760Z","type":"message"}
{"nick":"trevnorris","message":"hehe. I can fix that.","date":"2014-11-05T09:02:38.622Z","type":"message"}
{"nick":"piscisaureus","message":"so it would be","date":"2014-11-05T09:02:44.211Z","type":"message"}
{"nick":"piscisaureus","message":"was_in_tick = ...","date":"2014-11-05T09:02:50.122Z","type":"message"}
{"nick":"piscisaureus","message":"set_in_tick(false)","date":"2014-11-05T09:02:57.088Z","type":"message"}
{"nick":"piscisaureus","message":"MakeCallback","date":"2014-11-05T09:03:01.617Z","type":"message"}
{"nick":"piscisaureus","message":"set_in_tick(was_in_tick)","date":"2014-11-05T09:03:07.496Z","type":"message"}
{"nick":"ijroth","reason":"Read error: Connection reset by peer","date":"2014-11-05T09:03:07.578Z","type":"quit"}
{"nick":"ijroth","date":"2014-11-05T09:03:51.769Z","type":"join"}
{"nick":"piscisaureus","message":"trevnorris: or a better solution would be to use an uv_idle to force it into async-ness","date":"2014-11-05T09:03:58.213Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus: okay, updated the post w/ the fix.","date":"2014-11-05T09:04:06.004Z","type":"message"}
{"nick":"trevnorris","message":"your variable names are better.","date":"2014-11-05T09:04:24.460Z","type":"message"}
{"nick":"trevnorris","message":"going to use those.","date":"2014-11-05T09:04:26.410Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: isn't it super late there btw?","date":"2014-11-05T09:05:22.733Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus: I have been wanting a way to do something setImmediate-like from C++.","date":"2014-11-05T09:05:31.006Z","type":"message"}
{"nick":"trevnorris","message":"yeah. it's 1am here. but i'm sick and it's hard to sleep.","date":"2014-11-05T09:05:42.623Z","type":"message"}
{"nick":"piscisaureus","message":"you've become Ben 2.0 in every way haha","date":"2014-11-05T09:05:57.241Z","type":"message"}
{"nick":"trevnorris","message":"heh, except I like to play xbox before I go to bed. he likes to read papers on compiler implementations. :P","date":"2014-11-05T09:06:30.734Z","type":"message"}
{"nick":"ijroth","reason":"Read error: Connection reset by peer","date":"2014-11-05T09:06:41.446Z","type":"quit"}
{"nick":"ijroth","date":"2014-11-05T09:06:55.604Z","type":"join"}
{"nick":"trevnorris","message":"re engine-agnosticism: AsyncWrap I think could be made engine agnostic. Now, the link between that and the async listener hooks might be more difficult.","date":"2014-11-05T09:08:35.555Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus: oh, ben mentioned you'd like that every handle will be receiving a unique id.","date":"2014-11-05T09:09:12.982Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: not if you make AsyncWrap also responsible for calling callbacks","date":"2014-11-05T09:10:08.829Z","type":"message"}
{"nick":"piscisaureus","message":"I think","date":"2014-11-05T09:10:11.687Z","type":"message"}
{"nick":"trevnorris","message":"i'll also add a callback for when an object is being destructed, and pass the id to the callback.","date":"2014-11-05T09:10:15.357Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: in re setImmediate","date":"2014-11-05T09:10:21.421Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: what do you think of this trick: uv_idle_init(&req->idle); uv_idle_close(&req->idle, callback);","date":"2014-11-05T09:10:58.586Z","type":"message"}
{"nick":"piscisaureus","message":"the callback will be setimmediate-d","date":"2014-11-05T09:11:05.754Z","type":"message"}
{"nick":"trevnorris","message":"ah, nice.","date":"2014-11-05T09:11:50.268Z","type":"message"}
{"nick":"trevnorris","message":"so the uv_idle_t would be part of the class, I assume.","date":"2014-11-05T09:12:22.152Z","type":"message"}
{"nick":"trevnorris","message":"it should probably go on BaseObject or AsyncWrap. Since everything that calls MakeCallback must use AsyncWrap, think it makes more sense to belong there.","date":"2014-11-05T09:13:05.385Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: well, synchronous callbacks is only an issue with QueryWrap","date":"2014-11-05T09:14:41.998Z","type":"message"}
{"nick":"piscisaureus","message":"so I would just put it there","date":"2014-11-05T09:14:50.950Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus: you're forgetting that in case of error, all fs callbacks are made synchronously.","date":"2014-11-05T09:15:13.825Z","type":"message"}
{"nick":"piscisaureus","message":"really? hmm","date":"2014-11-05T09:15:21.229Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: in that case you're probably right","date":"2014-11-05T09:16:38.375Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris:","date":"2014-11-05T09:16:45.070Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: a C++ Promise class maybe that does stuff right automatically?","date":"2014-11-05T09:17:25.426Z","type":"message"}
{"nick":"trevnorris","message":"...","date":"2014-11-05T09:17:35.405Z","type":"message"}
{"nick":"trevnorris","message":"I'll pretend you didn't say that.","date":"2014-11-05T09:17:42.341Z","type":"message"}
{"nick":"piscisaureus","message":"I did","date":"2014-11-05T09:17:47.637Z","type":"message"}
{"nick":"trevnorris","message":"are you talking about v8::Promise?","date":"2014-11-05T09:18:14.478Z","type":"message"}
{"nick":"piscisaureus","message":"I don't know that interface","date":"2014-11-05T09:18:32.179Z","type":"message"}
{"nick":"piscisaureus","message":"but imagine this","date":"2014-11-05T09:18:35.135Z","type":"message"}
{"nick":"piscisaureus","message":"node::Promise p = new Promise(args[3].As<Function>()) // Create a c++ promise with a javascript callback","date":"2014-11-05T09:19:22.472Z","type":"message"}
{"nick":"piscisaureus","message":"r = uv_fs_stat(...);","date":"2014-11-05T09:19:36.940Z","type":"message"}
{"nick":"piscisaureus","message":"if (r<0) { p->reject(r); return };","date":"2014-11-05T09:19:55.619Z","type":"message"}
{"nick":"piscisaureus","message":"well I don't know. But I feel node internals could be much more structured but that'll only happen if we provide the right infrastructure.","date":"2014-11-05T09:21:32.365Z","type":"message"}
{"nick":"trevnorris","message":"eh... but how are you going to get the request object? each ReqWrap would need to inherit from Promise.","date":"2014-11-05T09:22:06.151Z","type":"message"}
{"nick":"piscisaureus","message":"yeah","date":"2014-11-05T09:22:24.042Z","type":"message"}
{"nick":"piscisaureus","message":"I guess AsyncWrap is already much like that.","date":"2014-11-05T09:22:32.108Z","type":"message"}
{"nick":"piscisaureus","message":"AsyncWrap just lacks the ability to make a callback asynchronous","date":"2014-11-05T09:23:07.844Z","type":"message"}
{"nick":"trevnorris","message":"yeah. What if I added MakeAsyncCallback()?","date":"2014-11-05T09:23:18.669Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: yeah","date":"2014-11-05T09:23:31.182Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: sounds good","date":"2014-11-05T09:23:35.370Z","type":"message"}
{"nick":"trevnorris","message":"cool. we've been needing to fix that problem anyways.","date":"2014-11-05T09:24:13.118Z","type":"message"}
{"nick":"trevnorris","message":"well, crap. in case of error don't we want the request to be fired nextTick style (i.e. before the event loop proceeds)?","date":"2014-11-05T09:25:08.185Z","type":"message"}
{"nick":"trevnorris","message":"seems like it might be good to allow handling of errors before allowing more I/O to occur.","date":"2014-11-05T09:25:22.063Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: I don't see a compelling reason","date":"2014-11-05T09:25:37.340Z","type":"message"}
{"nick":"trevnorris","message":"i'm trying to think of a case where resources or some such might cause an issue. but since libuv doesn't technically clean up all resources for calls to uv_close() until the end of the eloop, probably not a problem.","date":"2014-11-05T09:26:41.856Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: I think we're in the clear because you typically won't even have access to the resource (atleast not in js) until libuv completes and calls back","date":"2014-11-05T09:28:07.733Z","type":"message"}
{"nick":"trevnorris","message":"cool. sounds good.","date":"2014-11-05T09:28:20.829Z","type":"message"}
{"nick":"piscisaureus","message":"atleast not for files. net.Socket you do, but then there's an internal queue in js","date":"2014-11-05T09:28:44.549Z","type":"message"}
{"nick":"trevnorris","message":"piscisaureus: what if instead we create a queue for all the classes that need to be fired from a uv_idle and have only one uv_idle_t on node::Environment.","date":"2014-11-05T09:29:57.337Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: good thinking but no need :)","date":"2014-11-05T09:30:13.044Z","type":"message"}
{"nick":"trevnorris","message":"seems it might be a waste of resources to tack on a uv_idle_t to every AsyncWrap instantiation.","date":"2014-11-05T09:30:18.409Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: it won't be any faster","date":"2014-11-05T09:30:20.936Z","type":"message"}
{"nick":"piscisaureus","message":"ah","date":"2014-11-05T09:30:24.993Z","type":"message"}
{"nick":"piscisaureus","message":"trevnorris: uv_idle_t: 60 bytes","date":"2014-11-05T09:31:59.080Z","type":"message"}
{"nick":"trevnorris","message":"haha, ok. i'm not worried then.","date":"2014-11-05T09:32:07.864Z","type":"message"}
{"nick":"piscisaureus","message":"double that in x64 mode :)","date":"2014-11-05T09:32:39.904Z","type":"message"}
{"nick":"piscisaureus","message":"so not great, could be smaller, but I think it's not worth the complication of having a separate queue","date":"2014-11-05T09:33:04.696Z","type":"message"}
{"nick":"trevnorris","message":"yeah. sounds good to me.","date":"2014-11-05T09:33:16.120Z","type":"message"}
{"nick":"piscisaureus","message":"That's actually because libuv 1.0rc2 adds 4(!) unused fields per handle","date":"2014-11-05T09:34:09.345Z","type":"message"}
{"nick":"trevnorris","message":"um. is that for future expansion w/o needing to change the ABI?","date":"2014-11-05T09:34:43.281Z","type":"message"}
{"nick":"piscisaureus","message":"yeah","date":"2014-11-05T09:34:47.418Z","type":"message"}
{"nick":"trevnorris","message":"ah, okay.","date":"2014-11-05T09:34:54.717Z","type":"message"}
{"nick":"piscisaureus","message":"well to be able to fix bugs in 1.x without breaking the abi","date":"2014-11-05T09:35:04.521Z","type":"message"}
{"nick":"trevnorris","message":"cool. sounds good.","date":"2014-11-05T09:35:19.176Z","type":"message"}
{"nick":"trevnorris","message":"well, think my brain has had it.","date":"2014-11-05T09:43:15.833Z","type":"message"}
{"nick":"trevnorris","message":"night all.","date":"2014-11-05T09:43:17.356Z","type":"message"}
{"nick":"seishun","reason":"Ping timeout: 240 seconds","date":"2014-11-05T09:50:52.977Z","type":"quit"}
{"nick":"piscisaureus","message":"trevnorris: sleep well, and get better!","date":"2014-11-05T10:07:41.342Z","type":"message"}
{"nick":"piscisaureus","message":"I hope you're not too sick","date":"2014-11-05T10:07:46.234Z","type":"message"}
{"nick":"trevnorris","message":"indutny: when you have a moment, mind commenting on https://github.com/joyent/node/pull/8522 ?","date":"2014-11-05T11:37:33.762Z","type":"message"}
{"nick":"bnoordhuis","date":"2014-11-05T11:59:33.000Z","type":"join"}
{"nick":"thlorenz","reason":"Remote host closed the connection","date":"2014-11-05T12:19:29.812Z","type":"quit"}
{"nick":"Aria","reason":"Ping timeout: 272 seconds","date":"2014-11-05T12:27:49.868Z","type":"quit"}
{"nick":"bnoordhuis","reason":"Ping timeout: 255 seconds","date":"2014-11-05T12:31:15.006Z","type":"quit"}
{"nick":"thlorenz","date":"2014-11-05T12:37:33.598Z","type":"join"}
{"nick":"rmg","date":"2014-11-05T12:56:12.001Z","type":"join"}
{"nick":"rmg","reason":"Ping timeout: 264 seconds","date":"2014-11-05T13:00:55.802Z","type":"quit"}
{"nick":"Domenic","message":"trevnorris: 159 is > 127, so I am confused actually...","date":"2014-11-05T13:04:59.697Z","type":"message"}
{"nick":"thlorenz","reason":"Remote host closed the connection","date":"2014-11-05T13:08:51.262Z","type":"quit"}
{"nick":"bnoordhuis","date":"2014-11-05T13:37:47.052Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 240 seconds","date":"2014-11-05T13:41:52.950Z","type":"quit"}
{"nick":"seishun","date":"2014-11-05T14:17:05.337Z","type":"join"}
{"nick":"Fishrock123","date":"2014-11-05T14:20:10.723Z","type":"join"}
{"nick":"bnoordhuis","date":"2014-11-05T14:21:01.070Z","type":"join"}
{"nick":"ramitos_","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2014-11-05T14:48:44.621Z","type":"quit"}
{"nick":"ramitos","date":"2014-11-05T14:49:00.060Z","type":"join"}
{"nick":"bnoordhuis","reason":"Ping timeout: 244 seconds","date":"2014-11-05T14:58:51.071Z","type":"quit"}
{"nick":"Fishrock123","reason":"Read error: Connection reset by peer","date":"2014-11-05T15:16:00.475Z","type":"quit"}
{"nick":"Fishrock123","date":"2014-11-05T15:17:40.265Z","type":"join"}
{"nick":"Fishrock123","reason":"Read error: Connection reset by peer","date":"2014-11-05T15:24:29.060Z","type":"quit"}
{"nick":"Fishrock123","date":"2014-11-05T15:27:37.635Z","type":"join"}
{"nick":"ryan_stevens","date":"2014-11-05T15:43:47.063Z","type":"join"}
{"nick":"lloydde","date":"2014-11-05T15:47:49.831Z","type":"join"}
{"nick":"lloydde","reason":"Remote host closed the connection","date":"2014-11-05T15:56:54.010Z","type":"quit"}
