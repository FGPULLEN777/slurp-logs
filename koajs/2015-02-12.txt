{"nick":"TheThing","date":"2015-02-12T00:00:26.834Z","type":"join"}
{"nick":"UniOn","reason":"Remote host closed the connection","date":"2015-02-12T00:02:08.168Z","type":"quit"}
{"nick":"nicholaswyoung_","reason":"Ping timeout: 265 seconds","date":"2015-02-12T00:02:28.253Z","type":"quit"}
{"nick":"TheAceOfHearts","reason":"Quit: Leaving.","date":"2015-02-12T00:05:05.415Z","type":"quit"}
{"nick":"hmsimha","reason":"Ping timeout: 252 seconds","date":"2015-02-12T00:10:07.437Z","type":"quit"}
{"nick":"crzrcn1","date":"2015-02-12T00:12:19.324Z","type":"join"}
{"nick":"crzrcn","reason":"Ping timeout: 246 seconds","date":"2015-02-12T00:13:08.895Z","type":"quit"}
{"nick":"felipefdl","date":"2015-02-12T00:20:42.002Z","type":"join"}
{"nick":"TheAceOfHearts","date":"2015-02-12T00:21:25.972Z","type":"join"}
{"nick":"Foxandxss","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2015-02-12T00:30:18.641Z","type":"quit"}
{"nick":"corbanb","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦","date":"2015-02-12T00:39:26.252Z","type":"quit"}
{"nick":"stagas","date":"2015-02-12T01:01:31.281Z","type":"join"}
{"nick":"hmsimha","date":"2015-02-12T01:05:31.461Z","type":"join"}
{"nick":"hmsimha","reason":"Ping timeout: 252 seconds","date":"2015-02-12T01:13:55.312Z","type":"quit"}
{"nick":"stagas","reason":"Ping timeout: 246 seconds","date":"2015-02-12T01:24:11.927Z","type":"quit"}
{"nick":"TheAceOfHearts","reason":"Quit: Leaving.","date":"2015-02-12T01:31:43.315Z","type":"quit"}
{"nick":"eh_eff_","date":"2015-02-12T01:33:12.075Z","type":"join"}
{"nick":"eh_eff","reason":"Ping timeout: 240 seconds","date":"2015-02-12T01:35:22.953Z","type":"quit"}
{"nick":"eh_eff_","reason":"Ping timeout: 245 seconds","date":"2015-02-12T01:38:18.254Z","type":"quit"}
{"nick":"nicholaswyoung_","date":"2015-02-12T01:45:51.744Z","type":"join"}
{"nick":"nicholaswyoung_","reason":"Ping timeout: 245 seconds","date":"2015-02-12T01:51:04.580Z","type":"quit"}
{"nick":"crzrcn1","reason":"Quit: Leaving.","date":"2015-02-12T01:53:40.871Z","type":"quit"}
{"nick":"eh_eff_","date":"2015-02-12T02:02:55.422Z","type":"join"}
{"nick":"hmsimha","date":"2015-02-12T02:07:03.351Z","type":"join"}
{"nick":"TheAceOfHearts","date":"2015-02-12T02:12:56.562Z","type":"join"}
{"nick":"TheThing","reason":"Remote host closed the connection","date":"2015-02-12T02:14:26.343Z","type":"quit"}
{"nick":"soj","reason":"Ping timeout: 250 seconds","date":"2015-02-12T03:19:10.687Z","type":"quit"}
{"nick":"jonglebe_","reason":"Remote host closed the connection","date":"2015-02-12T03:28:58.686Z","type":"quit"}
{"nick":"jongleberry","date":"2015-02-12T03:29:26.473Z","type":"join"}
{"nick":"jongleberry","reason":"Ping timeout: 265 seconds","date":"2015-02-12T03:34:10.405Z","type":"quit"}
{"nick":"nicholaswyoung_","date":"2015-02-12T03:34:41.902Z","type":"join"}
{"nick":"nicholaswyoung_","reason":"Ping timeout: 252 seconds","date":"2015-02-12T03:40:00.855Z","type":"quit"}
{"nick":"TheAceOfHearts","reason":"Quit: Leaving.","date":"2015-02-12T04:20:53.192Z","type":"quit"}
{"nick":"eh_eff_","reason":"Quit: WeeChat 1.1","date":"2015-02-12T04:23:15.216Z","type":"quit"}
{"nick":"calebboyd","date":"2015-02-12T04:30:34.831Z","type":"join"}
{"nick":"calebboyd","date":"2015-02-12T04:30:44.457Z","type":"part"}
{"nick":"calebboyd","date":"2015-02-12T04:32:01.681Z","type":"join"}
{"nick":"felipefdl","reason":"Quit: (null)","date":"2015-02-12T04:51:33.987Z","type":"quit"}
{"nick":"calebboyd","date":"2015-02-12T05:03:22.077Z","type":"part"}
{"nick":"nicholaswyoung_","date":"2015-02-12T05:23:33.976Z","type":"join"}
{"nick":"nicholaswyoung_","reason":"Ping timeout: 246 seconds","date":"2015-02-12T05:28:54.031Z","type":"quit"}
{"nick":"nicholaswyoung_","date":"2015-02-12T07:07:32.494Z","type":"join"}
{"nick":"jongleberry","date":"2015-02-12T07:12:45.310Z","type":"join"}
{"nick":"felipefdl","date":"2015-02-12T07:41:05.071Z","type":"join"}
{"nick":"TheAceOfHearts","date":"2015-02-12T07:41:31.337Z","type":"join"}
{"nick":"felipefdl","reason":"Ping timeout: 246 seconds","date":"2015-02-12T07:45:20.978Z","type":"quit"}
{"nick":"nicholaswyoung_","reason":"Quit: Lingo: www.lingoirc.com","date":"2015-02-12T07:45:25.641Z","type":"quit"}
{"nick":"amodo","reason":"Ping timeout: 245 seconds","date":"2015-02-12T07:51:54.674Z","type":"quit"}
{"nick":"amodo","date":"2015-02-12T07:57:00.660Z","type":"join"}
{"nick":"TheAceOfHearts","reason":"Quit: Leaving.","date":"2015-02-12T08:02:26.291Z","type":"quit"}
{"nick":"stagas","date":"2015-02-12T08:03:22.889Z","type":"join"}
{"nick":"joshontheweb","date":"2015-02-12T08:14:40.187Z","type":"join"}
{"nick":"basicdays","reason":"Ping timeout: 246 seconds","date":"2015-02-12T08:32:17.998Z","type":"quit"}
{"nick":"felipefdl","date":"2015-02-12T09:30:09.997Z","type":"join"}
{"nick":"felipefdl","reason":"Ping timeout: 246 seconds","date":"2015-02-12T09:34:35.955Z","type":"quit"}
{"nick":"gabeio","reason":"Ping timeout: 256 seconds","date":"2015-02-12T09:45:17.284Z","type":"quit"}
{"nick":"gabeio","date":"2015-02-12T09:51:38.002Z","type":"join"}
{"nick":"joshontheweb","reason":"Quit: Computer has gone to sleep.","date":"2015-02-12T10:03:05.247Z","type":"quit"}
{"nick":"stagas","reason":"Ping timeout: 256 seconds","date":"2015-02-12T10:10:47.314Z","type":"quit"}
{"nick":"Foxandxss","date":"2015-02-12T10:24:20.159Z","type":"join"}
{"nick":"felipefdl","date":"2015-02-12T11:18:54.895Z","type":"join"}
{"nick":"felipefdl","reason":"Ping timeout: 252 seconds","date":"2015-02-12T11:23:28.853Z","type":"quit"}
{"nick":"dobson","reason":"Read error: Connection reset by peer","date":"2015-02-12T11:27:25.116Z","type":"quit"}
{"nick":"dobson","date":"2015-02-12T11:34:31.219Z","type":"join"}
{"nick":"hemanth_","date":"2015-02-12T12:06:01.394Z","type":"join"}
{"nick":"felipefdl","date":"2015-02-12T12:11:46.311Z","type":"join"}
{"nick":"hemanth_","reason":"Read error: Connection reset by peer","date":"2015-02-12T13:02:40.679Z","type":"quit"}
{"nick":"hemanth_","date":"2015-02-12T13:03:18.301Z","type":"join"}
{"nick":"ramitos","date":"2015-02-12T13:51:26.510Z","type":"join"}
{"nick":"EvanFreeman","date":"2015-02-12T15:14:15.353Z","type":"join"}
{"nick":"stagas","date":"2015-02-12T15:51:04.352Z","type":"join"}
{"nick":"hemanth_","reason":"Quit: This computer has gone to sleep","date":"2015-02-12T15:58:51.693Z","type":"quit"}
{"nick":"basicdays","date":"2015-02-12T16:14:45.227Z","type":"join"}
{"nick":"jdriscoll","date":"2015-02-12T16:20:41.571Z","type":"join"}
{"nick":"jdriscoll","message":"Is calling reject() when yielding to a Promise not supported in Koa? It hangs in my tests where resolve() works fine.","date":"2015-02-12T16:26:05.316Z","type":"message"}
{"nick":"katana_","reason":"Ping timeout: 265 seconds","date":"2015-02-12T16:28:28.626Z","type":"quit"}
{"nick":"katana_","date":"2015-02-12T16:28:51.461Z","type":"join"}
{"nick":"TheThing__","message":"reject() literally throws an error jdriscoll","date":"2015-02-12T16:30:36.877Z","type":"message"}
{"nick":"UniOn","date":"2015-02-12T16:35:53.820Z","type":"join"}
{"nick":"jdriscoll","message":"Ok. So Koa doesn't handle that error? So if I'm fetching a URL using http.get in a Promise and returning the accumulated body how would I handle a non-200 response? I can't self.throw from where I get the actual response afaict. Wrap the response and body and return both to the middleware?","date":"2015-02-12T16:38:34.594Z","type":"message"}
{"nick":"TheThing__","message":"koa should handle the error and return the non-200 response you specified in the .reject","date":"2015-02-12T16:42:15.796Z","type":"message"}
{"nick":"TheThing__","message":"oh wait, I misread what you said :b","date":"2015-02-12T16:42:24.459Z","type":"message"}
{"nick":"TheThing__","message":"I thought you meant \".throw()\" not \".reject()\"","date":"2015-02-12T16:42:33.749Z","type":"message"}
{"nick":"TheThing__","message":"my bad","date":"2015-02-12T16:42:34.648Z","type":"message"}
{"nick":"basicdays","reason":"Quit: I'm out","date":"2015-02-12T16:47:40.189Z","type":"quit"}
{"nick":"EvanFreeman","reason":"Ping timeout: 244 seconds","date":"2015-02-12T16:51:42.344Z","type":"quit"}
{"nick":"jdriscoll","message":"No, thank you for your help. I'm probably missing something simple but if I call reject with an error the server returns a 500 response where I'd like to be able to handle the error and return a more approprate response. Obviously this is a stupid example but I'm trying to wrap my head around the best way to perform non-trivial async tasks from within the context of a middleware (db queries, etc.). All the examples I've found","date":"2015-02-12T16:56:57.906Z","type":"message"}
{"nick":"jdriscoll","message":" online have been trivial synchronous operations (this.body = \"hello world\"). Here's the code I'm playing with: https://gist.github.com/jdriscoll/af914bd6085c5af68032","date":"2015-02-12T16:56:58.127Z","type":"message"}
{"nick":"Foxandxss","message":"jdriscoll: don't quote me on this, because I really never tried","date":"2015-02-12T16:58:50.424Z","type":"message"}
{"nick":"Foxandxss","message":"but I think you need to do a try catch","date":"2015-02-12T16:58:56.138Z","type":"message"}
{"nick":"Foxandxss","message":"with the yield","date":"2015-02-12T16:59:07.666Z","type":"message"}
{"nick":"jdriscoll","message":"Foxandxss: Ok thanks. That's does get me past the 500 but my middleware still doesn't know what the response was, just that it failed.","date":"2015-02-12T17:05:39.145Z","type":"message"}
{"nick":"jdriscoll","message":"Thanks all. Combining try/catch with sticking the body onto the response object, returning it and handling http errors in the middleware appears to work ok. https://gist.github.com/jdriscoll/af914bd6085c5af68032","date":"2015-02-12T17:33:14.142Z","type":"message"}
{"nick":"jongleberry","reason":"Remote host closed the connection","date":"2015-02-12T17:34:33.533Z","type":"quit"}
{"nick":"jongleberry","date":"2015-02-12T17:34:59.299Z","type":"join"}
{"nick":"TheThing__","message":"thanks for that jdriscoll","date":"2015-02-12T17:35:15.517Z","type":"message"}
{"nick":"TheThing__","message":"That's gonna be useful to remember in the future","date":"2015-02-12T17:35:22.676Z","type":"message"}
{"nick":"jongleberry","reason":"Ping timeout: 244 seconds","date":"2015-02-12T17:39:14.305Z","type":"quit"}
{"nick":"Foxandxss","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2015-02-12T17:50:03.918Z","type":"quit"}
{"nick":"crzrcn","date":"2015-02-12T17:51:40.366Z","type":"join"}
{"nick":"jongleberry","date":"2015-02-12T18:02:10.565Z","type":"join"}
{"nick":"UniOn","reason":"Remote host closed the connection","date":"2015-02-12T18:19:26.436Z","type":"quit"}
{"nick":"jdriscoll","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2015-02-12T18:27:25.299Z","type":"quit"}
{"nick":"jdriscoll","date":"2015-02-12T18:27:44.267Z","type":"join"}
{"nick":"jdriscoll","date":"2015-02-12T18:29:27.565Z","type":"part"}
{"nick":"jdriscoll","date":"2015-02-12T18:30:10.954Z","type":"join"}
{"nick":"stagas","reason":"Quit: Bye","date":"2015-02-12T18:46:57.054Z","type":"quit"}
{"nick":"TheAceOfHearts","date":"2015-02-12T18:48:50.672Z","type":"join"}
{"nick":"HairAndBeardGuy","reason":"Ping timeout: 246 seconds","date":"2015-02-12T18:58:27.000Z","type":"quit"}
{"nick":"eh_eff","date":"2015-02-12T19:05:19.963Z","type":"join"}
{"nick":"HairAndBeardGuy","date":"2015-02-12T19:14:13.376Z","type":"join"}
{"nick":"rickharrison","reason":"Ping timeout: 252 seconds","date":"2015-02-12T20:09:16.956Z","type":"quit"}
{"nick":"rickharrison","date":"2015-02-12T20:13:40.359Z","type":"join"}
{"nick":"joshontheweb","date":"2015-02-12T20:15:57.319Z","type":"join"}
{"nick":"eh_eff","reason":"Ping timeout: 246 seconds","date":"2015-02-12T20:47:35.998Z","type":"quit"}
{"nick":"basicdays","date":"2015-02-12T21:07:33.271Z","type":"join"}
{"nick":"eh_eff","date":"2015-02-12T21:56:02.649Z","type":"join"}
{"nick":"nicholaswyoung","date":"2015-02-12T22:08:43.915Z","type":"join"}
{"nick":"Foxandxss","date":"2015-02-12T22:11:44.917Z","type":"join"}
{"nick":"ramitos","reason":"Remote host closed the connection","date":"2015-02-12T22:16:42.337Z","type":"quit"}
{"nick":"Foxandxss","reason":"Read error: Connection reset by peer","date":"2015-02-12T22:18:47.053Z","type":"quit"}
{"nick":"Foxandxs_","date":"2015-02-12T22:18:47.387Z","type":"join"}
{"nick":"Foxandxs_","new_nick":"Foxandxss","date":"2015-02-12T22:19:00.566Z","type":"nick"}
{"nick":"Foxandxss","reason":"Changing host","date":"2015-02-12T22:19:00.749Z","type":"quit"}
{"nick":"Foxandxss","date":"2015-02-12T22:19:00.750Z","type":"join"}
{"nick":"jdriscoll","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2015-02-12T22:20:37.909Z","type":"quit"}
{"nick":"TheAceOfHearts","reason":"Quit: Leaving.","date":"2015-02-12T22:29:45.644Z","type":"quit"}
{"nick":"felipefdl","reason":"Quit: (null)","date":"2015-02-12T22:41:51.654Z","type":"quit"}
{"nick":"Limix","date":"2015-02-12T22:43:58.025Z","type":"join"}
{"nick":"felipefdl","date":"2015-02-12T22:47:27.995Z","type":"join"}
{"nick":"felipefdl","reason":"Client Quit","date":"2015-02-12T22:50:21.289Z","type":"quit"}
{"nick":"felipefdl","date":"2015-02-12T22:50:36.542Z","type":"join"}
{"nick":"TheAceOfHearts","date":"2015-02-12T22:55:15.305Z","type":"join"}
{"nick":"mekwall","reason":"Ping timeout: 264 seconds","date":"2015-02-12T23:05:40.312Z","type":"quit"}
{"nick":"mekwall","date":"2015-02-12T23:07:45.794Z","type":"join"}
{"nick":"felipefdl","reason":"Quit: My Mac has gone to sleep. ZZZzzzâ€¦","date":"2015-02-12T23:44:21.941Z","type":"quit"}
{"nick":"felipefdl","date":"2015-02-12T23:59:52.649Z","type":"join"}
