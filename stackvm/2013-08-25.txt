{"nick":"ircretary","reason":"Remote host closed the connection","date":"2013-08-25T00:00:00.542Z","type":"quit"}
{"nick":"ircretary","date":"2013-08-25T00:00:08.939Z","type":"join"}
{"nick":"damonoehlman","date":"2013-08-25T00:02:11.192Z","type":"join"}
{"nick":"mikolalysenko","reason":"Ping timeout: 256 seconds","date":"2013-08-25T00:10:27.844Z","type":"quit"}
{"nick":"fallsemo","date":"2013-08-25T00:12:46.224Z","type":"join"}
{"nick":"cpettitt","date":"2013-08-25T00:15:50.535Z","type":"join"}
{"nick":"mikolalysenko","date":"2013-08-25T00:21:51.160Z","type":"join"}
{"nick":"calvinfo","reason":"Quit: Leaving.","date":"2013-08-25T00:34:44.596Z","type":"quit"}
{"nick":"i_m_ca","date":"2013-08-25T00:40:40.679Z","type":"join"}
{"nick":"defunctzombie","message":"thlorenz: I need to take a closer look at the changeset, but agree that it should be a part of browserify","date":"2013-08-25T00:46:47.098Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: this is something I would expect from my browser bundler tool","date":"2013-08-25T00:46:59.669Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: I don't like that it manages the cache","date":"2013-08-25T00:48:44.973Z","type":"message"}
{"nick":"defunctzombie","message":"something feels like that should be an option to it","date":"2013-08-25T00:49:00.353Z","type":"message"}
{"nick":"defunctzombie","message":"so you could use disjoint versions of it","date":"2013-08-25T00:49:10.656Z","type":"message"}
{"nick":"defunctzombie","message":"in different bundles or whatnot","date":"2013-08-25T00:49:15.200Z","type":"message"}
{"nick":"fallsemo","reason":"Ping timeout: 264 seconds","date":"2013-08-25T00:49:18.228Z","type":"quit"}
{"nick":"defunctzombie","message":"my tendency is against globals for modules like this","date":"2013-08-25T00:49:29.908Z","type":"message"}
{"nick":"defunctzombie","message":"I don't think they should be doing the caching layer","date":"2013-08-25T00:49:37.637Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: also, dedupe does not belong in browser resolve imho","date":"2013-08-25T00:50:32.601Z","type":"message"}
{"nick":"mikolalysenko","reason":"Ping timeout: 245 seconds","date":"2013-08-25T00:50:33.160Z","type":"quit"}
{"nick":"defunctzombie","message":"thlorenz: it has nothing to do with that module, that module is only about resolving modules via support of the \"browser\" field in package.json","date":"2013-08-25T00:50:47.451Z","type":"message"}
{"nick":"defunctzombie","message":"dedupe is a higher level function","date":"2013-08-25T00:50:51.699Z","type":"message"}
{"nick":"defunctzombie","message":"that is my feedback :)","date":"2013-08-25T00:51:16.184Z","type":"message"}
{"nick":"defunctzombie","message":"substack: thlorenz: on an unrelated note, I personally think you can do more interesting things at the file level","date":"2013-08-25T00:52:11.993Z","type":"message"}
{"nick":"defunctzombie","message":"I think you can md5 every source file","date":"2013-08-25T00:52:20.256Z","type":"message"}
{"nick":"defunctzombie","message":"and check that stuff too, so this way even if some parts of a module change but other parts don't, you get more reusability","date":"2013-08-25T00:52:47.988Z","type":"message"}
{"nick":"fallsemo","date":"2013-08-25T00:53:16.967Z","type":"join"}
{"nick":"i_m_ca","reason":"Ping timeout: 248 seconds","date":"2013-08-25T00:53:57.788Z","type":"quit"}
{"nick":"mirkokiefer","reason":"Quit: mirkokiefer","date":"2013-08-25T00:54:51.586Z","type":"quit"}
{"nick":"kumavis_","reason":"Quit: kumavis_","date":"2013-08-25T00:55:41.679Z","type":"quit"}
{"nick":"calvinfo","date":"2013-08-25T00:56:25.936Z","type":"join"}
{"nick":"mikolalysenko","date":"2013-08-25T01:02:22.184Z","type":"join"}
{"nick":"cpettitt","reason":"Quit: cpettitt","date":"2013-08-25T01:05:22.814Z","type":"quit"}
{"nick":"mikolalysenko","reason":"Ping timeout: 264 seconds","date":"2013-08-25T01:07:54.256Z","type":"quit"}
{"nick":"coderzach","reason":"Quit: coderzach","date":"2013-08-25T01:15:12.855Z","type":"quit"}
{"nick":"gwenbell","date":"2013-08-25T01:18:14.579Z","type":"join"}
{"nick":"evbogue","date":"2013-08-25T01:18:21.161Z","type":"join"}
{"nick":"thlorenz","message":"defunctzombie: true, but a file may be identical with relative requires, but they end up meaning something different, so deduping on package level is best IMHO","date":"2013-08-25T01:19:26.214Z","type":"message"}
{"nick":"thlorenz","message":"I tried around with this a bit until coming to this conclusion","date":"2013-08-25T01:19:55.509Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: not sure which managed cache you are referring to - the one in browser-dedupe?","date":"2013-08-25T01:20:42.841Z","type":"message"}
{"nick":"ins0mnia","reason":"Ping timeout: 241 seconds","date":"2013-08-25T01:20:55.928Z","type":"quit"}
{"nick":"evbogue","reason":"Client Quit","date":"2013-08-25T01:21:07.000Z","type":"quit"}
{"nick":"mikolalysenko","date":"2013-08-25T01:21:14.697Z","type":"join"}
{"nick":"thlorenz","message":"also where else than in browser-resolve would I apply the dedupe wrap?","date":"2013-08-25T01:21:19.851Z","type":"message"}
{"nick":"cpettitt","date":"2013-08-25T01:22:23.556Z","type":"join"}
{"nick":"thlorenz","message":"defunctzombie: I guess I could try to just do it in browserify itself","date":"2013-08-25T01:23:51.963Z","type":"message"}
{"nick":"thlorenz","message":"so I'll get the missing tests in (browser-dedupe and browserify) and try to do it without changing browser-resolve","date":"2013-08-25T01:24:34.284Z","type":"message"}
{"nick":"gwenbell","reason":"Quit: Lost terminal","date":"2013-08-25T01:28:00.799Z","type":"quit"}
{"nick":"cpettitt","message":"Is the fs module not supported with testing? I have a test that uses it, but the object I get from require(\"fs\") is always empty when run from testling","date":"2013-08-25T01:30:04.876Z","type":"message"}
{"nick":"kriskowal","date":"2013-08-25T01:41:07.641Z","type":"join"}
{"nick":"fallsemo","reason":"Ping timeout: 260 seconds","date":"2013-08-25T01:41:15.923Z","type":"quit"}
{"nick":"fallsemo","date":"2013-08-25T01:43:20.987Z","type":"join"}
{"nick":"fallsemo","reason":"Ping timeout: 245 seconds","date":"2013-08-25T01:48:53.160Z","type":"quit"}
{"nick":"cpettitt","message":"Is there any way to use the brfs transform with testling?","date":"2013-08-25T02:01:20.501Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: I would have expected it in browserify itself","date":"2013-08-25T02:02:35.271Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: md5 is cool because even if two modules are different by major number","date":"2013-08-25T02:03:17.031Z","type":"message"}
{"nick":"thlorenz","message":"it is, but browser-resolve is part of finding the right package, so redirecting to a matching one that was cached makes sense","date":"2013-08-25T02:03:18.288Z","type":"message"}
{"nick":"defunctzombie","message":"they may have internal files that didn't change","date":"2013-08-25T02:03:30.164Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: redirecting should happen higher up, browser resolve should still find the package","date":"2013-08-25T02:04:01.013Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: md5 may be too restrictive for files - it is the same as deduping packages 'exactly' by version number","date":"2013-08-25T02:04:03.811Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: I can try redirecting higher up","date":"2013-08-25T02:04:15.302Z","type":"message"}
{"nick":"thlorenz","message":"but I'm sticking to deduping on package level, especially of all the false positiives","date":"2013-08-25T02:04:37.194Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: I wouldn't expect it to be the only thing.. I think your approach with close versions is also relevant","date":"2013-08-25T02:04:38.203Z","type":"message"}
{"nick":"thlorenz","message":"ok","date":"2013-08-25T02:04:45.898Z","type":"message"}
{"nick":"fallsemo","date":"2013-08-25T02:04:54.892Z","type":"join"}
{"nick":"defunctzombie","message":"but with md5 you don't need to do any of that to be 100% safe that what yo udedupe was a duplicate","date":"2013-08-25T02:05:03.092Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: Example: 'var f = require('./f')'","date":"2013-08-25T02:05:03.304Z","type":"message"}
{"nick":"defunctzombie","message":"regardless of version","date":"2013-08-25T02:05:06.733Z","type":"message"}
{"nick":"thlorenz","message":"could be in two files","date":"2013-08-25T02:05:11.612Z","type":"message"}
{"nick":"defunctzombie","message":"heh","date":"2013-08-25T02:05:29.743Z","type":"message"}
{"nick":"thlorenz","message":"but depending on where they are and what './f' resolves to it is totally differnt","date":"2013-08-25T02:05:29.954Z","type":"message"}
{"nick":"defunctzombie","message":"yea.. would have to be something like module.exports = require('./lib');","date":"2013-08-25T02:05:45.533Z","type":"message"}
{"nick":"defunctzombie","message":"anything else is likely to have other content that is not identical","date":"2013-08-25T02:06:04.677Z","type":"message"}
{"nick":"defunctzombie","message":"but that is certainly an amusing case","date":"2013-08-25T02:06:12.715Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: I actually ran into this with my see-eat-sleep config files which were identical","date":"2013-08-25T02:06:37.575Z","type":"message"}
{"nick":"defunctzombie","message":"one thing that makes this fail is that we no longer do path lookups client side","date":"2013-08-25T02:07:14.968Z","type":"message"}
{"nick":"thlorenz","message":"I used https://github.com/thlorenz/dynamic-dedupe there and ended up making sure that 2 subdirs above the file are identical as well to  avoid false positives","date":"2013-08-25T02:07:26.596Z","type":"message"}
{"nick":"defunctzombie","message":"with those, you could actually treat the content the same","date":"2013-08-25T02:07:34.776Z","type":"message"}
{"nick":"thlorenz","message":"yeah, but it would break detective","date":"2013-08-25T02:07:47.710Z","type":"message"}
{"nick":"defunctzombie","message":"but the path lookup for require from that point different","date":"2013-08-25T02:07:52.481Z","type":"message"}
{"nick":"thlorenz","message":"since I'd direct that to the wrong place ;)","date":"2013-08-25T02:08:02.120Z","type":"message"}
{"nick":"defunctzombie","message":"it wouldn't break detective, it would just make the client require shim different, but yea","date":"2013-08-25T02:08:19.087Z","type":"message"}
{"nick":"defunctzombie","message":"an amusing optimization after the fact haha","date":"2013-08-25T02:08:30.112Z","type":"message"}
{"nick":"thlorenz","message":"ah, ok","date":"2013-08-25T02:08:40.079Z","type":"message"}
{"nick":"thlorenz","message":"well for now I'll try to get the tests all to pass and finish dedupe on package level","date":"2013-08-25T02:08:57.813Z","type":"message"}
{"nick":"thlorenz","message":"we really need this","date":"2013-08-25T02:09:01.603Z","type":"message"}
{"nick":"thlorenz","message":"may have to finish this tomorrow morning though","date":"2013-08-25T02:09:12.293Z","type":"message"}
{"nick":"defunctzombie","message":"I think this is awesome","date":"2013-08-25T02:09:56.466Z","type":"message"}
{"nick":"defunctzombie","message":"and also think this needs to be a browserify thing and not browser-resolve","date":"2013-08-25T02:10:12.132Z","type":"message"}
{"nick":"defunctzombie","message":"I don't think that makes it any harder","date":"2013-08-25T02:10:21.879Z","type":"message"}
{"nick":"jibay","reason":"Remote host closed the connection","date":"2013-08-25T02:10:24.179Z","type":"quit"}
{"nick":"defunctzombie","message":"thlorenz: but will say, you need to not have the global cache","date":"2013-08-25T02:10:30.728Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: that is absolutely important","date":"2013-08-25T02:10:39.032Z","type":"message"}
{"nick":"defunctzombie","message":"when packaging disjoint bundles","date":"2013-08-25T02:10:45.164Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: that's what reset is for","date":"2013-08-25T02:11:54.550Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: can't rely on reset as one module may still be building","date":"2013-08-25T02:12:11.651Z","type":"message"}
{"nick":"defunctzombie","message":"you should just let the user pass in the cache or have separate instances of dedupe","date":"2013-08-25T02:12:29.897Z","type":"message"}
{"nick":"defunctzombie","message":"we have hit this before with something in browserify... trying to remember what not","date":"2013-08-25T02:12:45.205Z","type":"message"}
{"nick":"defunctzombie","message":"it is just safer if you don't have the global","date":"2013-08-25T02:12:56.183Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: what about each bundle chain gets its own instance of dedupe","date":"2013-08-25T02:12:57.983Z","type":"message"}
{"nick":"thlorenz","message":"which closes over a cache","date":"2013-08-25T02:13:07.880Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: yes, in either case, this would be something that gets setup in browserify","date":"2013-08-25T02:13:19.200Z","type":"message"}
{"nick":"thlorenz","message":"so every bundle chain has its own cache","date":"2013-08-25T02:13:23.279Z","type":"message"}
{"nick":"thlorenz","message":"ok","date":"2013-08-25T02:13:24.491Z","type":"message"}
{"nick":"defunctzombie","message":"yep","date":"2013-08-25T02:13:27.579Z","type":"message"}
{"nick":"thlorenz","message":"thanks for that hint - hadn't thought of that","date":"2013-08-25T02:13:45.193Z","type":"message"}
{"nick":"fallsemo","reason":"Ping timeout: 246 seconds","date":"2013-08-25T02:14:28.854Z","type":"quit"}
{"nick":"thlorenz","message":"defunctzombie: do you agree that --dedupe 'exact' should be a default and you'd have to explicitly turn it off via --dedupe 'none' ?","date":"2013-08-25T02:17:50.143Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: 100%","date":"2013-08-25T02:18:11.847Z","type":"message"}
{"nick":"defunctzombie","message":"absolutely exact only by default, otherwise asking for strange cases","date":"2013-08-25T02:18:41.226Z","type":"message"}
{"nick":"defunctzombie","message":"and debug issues","date":"2013-08-25T02:18:44.012Z","type":"message"}
{"nick":"defunctzombie","message":"and yes, I think dedupe should happen by default","date":"2013-08-25T02:19:08.595Z","type":"message"}
{"nick":"thlorenz","message":"coo","date":"2013-08-25T02:19:13.211Z","type":"message"}
{"nick":"thlorenz","message":"l","date":"2013-08-25T02:19:14.731Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: a note on that md5 stuff","date":"2013-08-25T02:20:04.563Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: you still could have weird debug issues though - i.e. if you edit a node_module directly and your changes don't get picked up ;)","date":"2013-08-25T02:20:11.031Z","type":"message"}
{"nick":"thlorenz","message":"yes?","date":"2013-08-25T02:20:12.483Z","type":"message"}
{"nick":"defunctzombie","message":"hm, nvm.. was thinking you could do something fancy like md5 the deps too","date":"2013-08-25T02:20:39.753Z","type":"message"}
{"nick":"defunctzombie","message":"but that doesn't work","date":"2013-08-25T02:20:43.081Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: I think we should make a note of that \"edit a node module\"  thing.. I would also think about md5 of content on top of version check to double check","date":"2013-08-25T02:21:31.478Z","type":"message"}
{"nick":"defunctzombie","action":"thinks there is something interesting hidden within md5'ing content but can't think of it yet :)","date":"2013-08-25T02:21:56.706Z","type":"action"}
{"nick":"thlorenz","message":"defunctzombie: but then you'd have to read all the modules even if you plan to dedupe them","date":"2013-08-25T02:22:14.757Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: it would go along the path of replacing require('./long/ass/path/to/foo.js'); with require(55);","date":"2013-08-25T02:22:27.358Z","type":"message"}
{"nick":"thlorenz","message":"I'd suggest to just make a note and tell people to turn dedupe off when editing node_modules","date":"2013-08-25T02:22:36.943Z","type":"message"}
{"nick":"defunctzombie","message":"which we hypothesized would be the next evolution for large stuff like d3","date":"2013-08-25T02:22:42.830Z","type":"message"}
{"nick":"defunctzombie","message":"which has many many requires","date":"2013-08-25T02:22:46.682Z","type":"message"}
{"nick":"fallsemo","date":"2013-08-25T02:22:50.355Z","type":"join"}
{"nick":"defunctzombie","message":"thlorenz: I agree about the note","date":"2013-08-25T02:22:53.503Z","type":"message"}
{"nick":"substack","message":"cpettitt: use the browserify transform field in package.json","date":"2013-08-25T02:23:13.299Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: not sure how the d3 stuff relates?","date":"2013-08-25T02:24:37.331Z","type":"message"}
{"nick":"kumavis_","date":"2013-08-25T02:24:38.665Z","type":"join"}
{"nick":"substack","message":"it would become something more like require_55()","date":"2013-08-25T02:25:02.016Z","type":"message"}
{"nick":"thlorenz","message":"substack: in order to make the detective not find these?","date":"2013-08-25T02:25:39.023Z","type":"message"}
{"nick":"thlorenz","message":"or to speed up resolution?","date":"2013-08-25T02:25:53.099Z","type":"message"}
{"nick":"substack","message":"no, to optimize away the overhead of doing requires and to prune dead code","date":"2013-08-25T02:26:26.632Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: the issue came up when someone ported d3 to use requires","date":"2013-08-25T02:26:54.443Z","type":"message"}
{"nick":"thlorenz","message":"ah, do you guys have a link where you discussed this? sounds interesting","date":"2013-08-25T02:26:57.227Z","type":"message"}
{"nick":"defunctzombie","message":"the project ended up with lots of require('string we can't minify'); stuff","date":"2013-08-25T02:27:09.211Z","type":"message"}
{"nick":"defunctzombie","message":"over and over","date":"2013-08-25T02:27:11.465Z","type":"message"}
{"nick":"defunctzombie","message":"and we thought it would be cool to obfuscate that part away as well","date":"2013-08-25T02:27:22.371Z","type":"message"}
{"nick":"thlorenz","message":"hm","date":"2013-08-25T02:27:27.777Z","type":"message"}
{"nick":"substack","message":"thlorenz: part of what is weirding me out about dedupe is the minor/major thing","date":"2013-08-25T02:27:36.584Z","type":"message"}
{"nick":"substack","message":"it seems like this is kind of thing should be handled by `npm dedupe`, not browserify","date":"2013-08-25T02:27:59.252Z","type":"message"}
{"nick":"thlorenz","message":"substack: why it just allows you to configure how aggressive it dedupes","date":"2013-08-25T02:28:01.814Z","type":"message"}
{"nick":"thlorenz","message":"substack: we need this dedupe since npm dedupe breaks once you link stuff","date":"2013-08-25T02:28:22.284Z","type":"message"}
{"nick":"substack","message":"that's really weird and breaks the best thing about node modules","date":"2013-08-25T02:28:24.094Z","type":"message"}
{"nick":"substack","message":"thlorenz: can't you just make a better version of `npm dedupe` instead?","date":"2013-08-25T02:28:38.277Z","type":"message"}
{"nick":"substack","message":"or fix the existing `npm dedupe`","date":"2013-08-25T02:28:44.070Z","type":"message"}
{"nick":"substack","message":"I really don't want this kind of thing in browserify core","date":"2013-08-25T02:28:50.025Z","type":"message"}
{"nick":"thlorenz","message":"I don't think you can","date":"2013-08-25T02:28:56.895Z","type":"message"}
{"nick":"thlorenz","message":"since that's how node works - it looks for modules in parent dirs","date":"2013-08-25T02:29:16.635Z","type":"message"}
{"nick":"substack","message":"but you just did... you just wrote it inside of browserify instead of writing a tool that juggles module directories around","date":"2013-08-25T02:29:38.903Z","type":"message"}
{"nick":"thlorenz","message":"once you link to something outside that lookup breaks and npm dedupe can do nothing about that","date":"2013-08-25T02:29:40.255Z","type":"message"}
{"nick":"cpettitt","message":"substack: thanks! That seems to be the way to go. I'm getting an error with that though \"Error: Referencepath is not defined (/Users/cpettitt/projects/dagre/test/dot-test.js)\". I'm actually making a call to readdirSync - maybe that is not supported?","date":"2013-08-25T02:29:51.606Z","type":"message"}
{"nick":"thlorenz","message":"substack: no I'm not deduping like npm dedupe at all since I do it during lookup instead of actually moving files","date":"2013-08-25T02:30:19.779Z","type":"message"}
{"nick":"thlorenz","message":"so I have more power here","date":"2013-08-25T02:30:30.902Z","type":"message"}
{"nick":"substack","message":"cpettitt: fs.readFileSync() is the only thing that works","date":"2013-08-25T02:30:35.114Z","type":"message"}
{"nick":"thlorenz","message":"substack: also you don't want people's apps to break cause they forgot npm dedupe","date":"2013-08-25T02:30:58.515Z","type":"message"}
{"nick":"substack","message":"thlorenz: but why is that better?","date":"2013-08-25T02:31:02.197Z","type":"message"}
{"nick":"substack","message":"I would think that would be much worse actually","date":"2013-08-25T02:31:07.830Z","type":"message"}
{"nick":"thlorenz","message":"i.e. suddenly they get two event busses","date":"2013-08-25T02:31:09.093Z","type":"message"}
{"nick":"cpettitt","message":"substack: that would explain it. For now I hack  shim that checks if I'm running in testling to get around it. Thanks for your help!","date":"2013-08-25T02:31:18.641Z","type":"message"}
{"nick":"substack","message":"since it breaks the correspondence between how files are organized on disk and how browserify finds files to include","date":"2013-08-25T02:31:26.462Z","type":"message"}
{"nick":"cpettitt","message":"have a shim even","date":"2013-08-25T02:31:28.108Z","type":"message"}
{"nick":"substack","message":"cpettitt: don't do that","date":"2013-08-25T02:31:43.109Z","type":"message"}
{"nick":"defunctzombie","message":"substack: dedupe is more important for client packaging than server.. I actually don't care to npm dedupe on the server ever","date":"2013-08-25T02:32:09.001Z","type":"message"}
{"nick":"defunctzombie","message":"but when I package for client, I care a *little* bit more about it","date":"2013-08-25T02:32:24.452Z","type":"message"}
{"nick":"kumavis_","reason":"Quit: kumavis_","date":"2013-08-25T02:32:36.833Z","type":"quit"}
{"nick":"defunctzombie","message":"substack: because space usage on server is not an issue, but on client we care","date":"2013-08-25T02:32:51.067Z","type":"message"}
{"nick":"thlorenz","message":"also it can break apps that use singletons like a global event bus that they requuire","date":"2013-08-25T02:32:52.204Z","type":"message"}
{"nick":"substack","message":"thlorenz: the real problem here is that how npm installs new modules into an existing dependency tree with existing modules is shitty and broken","date":"2013-08-25T02:32:54.735Z","type":"message"}
{"nick":"substack","message":"we should be fixing that instead of cluttering browserify core with work-arounds","date":"2013-08-25T02:33:04.205Z","type":"message"}
{"nick":"defunctzombie","message":"substack: that is a harder issue to fix :)","date":"2013-08-25T02:33:36.430Z","type":"message"}
{"nick":"thlorenz","message":"substack: has nothing to do with npm, but even if I manually link modules together I'd expect to get the same 'event-bus' no matter if the file exists twice as  a dependency in different modules","date":"2013-08-25T02:33:59.904Z","type":"message"}
{"nick":"cpettitt","message":"substack: what would you suggest? I have some test code for my library that loads several graphs, applies some algorithms to them, and then checks invariants. Right now I scan a directory for those graphs. If I could give testing a manifest of files to bundle that might work.","date":"2013-08-25T02:34:08.315Z","type":"message"}
{"nick":"substack","message":"thlorenz: \"exists twice\" could mean so many things","date":"2013-08-25T02:34:26.739Z","type":"message"}
{"nick":"thlorenz","message":"substack: I meant a package exists twice","date":"2013-08-25T02:34:52.152Z","type":"message"}
{"nick":"substack","message":"\"exists\"","date":"2013-08-25T02:34:58.183Z","type":"message"}
{"nick":"thlorenz","message":"makes no sense to bundle that twice","date":"2013-08-25T02:35:10.703Z","type":"message"}
{"nick":"substack","message":"it might!","date":"2013-08-25T02:35:17.643Z","type":"message"}
{"nick":"substack","message":"it makes a ton of sense in certain circumstances","date":"2013-08-25T02:35:24.360Z","type":"message"}
{"nick":"thlorenz","message":"well then you can set --dedupe 'none'","date":"2013-08-25T02:35:28.728Z","type":"message"}
{"nick":"substack","message":"do the file hashes match? probably ok then","date":"2013-08-25T02:35:44.917Z","type":"message"}
{"nick":"thlorenz","message":"or maybe we won't make deduping the default then","date":"2013-08-25T02:35:49.292Z","type":"message"}
{"nick":"substack","message":"I wouldn't depend on the version listed in package.json at all though","date":"2013-08-25T02:35:56.639Z","type":"message"}
{"nick":"thlorenz","message":"I'm deduping packages not files","date":"2013-08-25T02:36:00.181Z","type":"message"}
{"nick":"thlorenz","message":"I'm looking up package versions","date":"2013-08-25T02:36:09.863Z","type":"message"}
{"nick":"substack","message":"that's really wrong","date":"2013-08-25T02:36:10.620Z","type":"message"}
{"nick":"substack","message":"don't do that ever","date":"2013-08-25T02:36:15.430Z","type":"message"}
{"nick":"substack","message":"if there are local edits or you pull down a package from github instead of npm the files are going to differ","date":"2013-08-25T02:36:44.822Z","type":"message"}
{"nick":"thlorenz","message":"why is that wrong? package names are unique and if they have the same version they should be identical","date":"2013-08-25T02:36:50.987Z","type":"message"}
{"nick":"substack","message":"and be REALLY confusing to debug!","date":"2013-08-25T02:36:54.267Z","type":"message"}
{"nick":"substack","message":"no!!!!~!","date":"2013-08-25T02:37:00.837Z","type":"message"}
{"nick":"thlorenz","message":"then you turn off dedupe or don't use it","date":"2013-08-25T02:37:02.915Z","type":"message"}
{"nick":"substack","message":"this is wildly divergent from how it works in node","date":"2013-08-25T02:37:29.435Z","type":"message"}
{"nick":"thlorenz","message":"but very similar to npm dedupe","date":"2013-08-25T02:37:44.207Z","type":"message"}
{"nick":"substack","message":"why can't we just say \"make sure to `npm dedupe`\" then?","date":"2013-08-25T02:37:59.075Z","type":"message"}
{"nick":"thlorenz","message":"except that npm dedupe doesn't even allow you to specify how aggressively to dedupe","date":"2013-08-25T02:38:05.023Z","type":"message"}
{"nick":"thlorenz","message":"because that breaks when you link packs during development","date":"2013-08-25T02:38:19.191Z","type":"message"}
{"nick":"thlorenz","message":"and for client side development that breaks shit, like singletons","date":"2013-08-25T02:38:39.623Z","type":"message"}
{"nick":"substack","message":"that sounds like the perfect fit for an external tool then!","date":"2013-08-25T02:38:42.447Z","type":"message"}
{"nick":"substack","message":"a better `npm dedupe` command","date":"2013-08-25T02:38:46.730Z","type":"message"}
{"nick":"thlorenz","message":"but how would that work?","date":"2013-08-25T02:38:55.383Z","type":"message"}
{"nick":"substack","message":"isaacs will probably even bring it into npm core if it works well","date":"2013-08-25T02:38:57.451Z","type":"message"}
{"nick":"thlorenz","message":"I mean it'd have to change how node looks up packages","date":"2013-08-25T02:39:09.547Z","type":"message"}
{"nick":"substack","message":"just have it move files around","date":"2013-08-25T02:39:15.164Z","type":"message"}
{"nick":"thlorenz","message":"so npm link then","date":"2013-08-25T02:39:25.601Z","type":"message"}
{"nick":"thlorenz","message":"b/c then I'd have to link all deps of the pack I linked to back to where the pack would be in node_modules","date":"2013-08-25T02:39:53.959Z","type":"message"}
{"nick":"thlorenz","message":"substack: I'm just trying to make things work smoothly - I mean I convinced people where I work to use browserify","date":"2013-08-25T02:40:43.303Z","type":"message"}
{"nick":"thlorenz","message":"but if they cannot just link stuff without things breaking, that's not good","date":"2013-08-25T02:41:04.098Z","type":"message"}
{"nick":"substack","message":"it doesn't break, the bundle is just bigger than it might otherwise be","date":"2013-08-25T02:41:40.252Z","type":"message"}
{"nick":"thlorenz","message":"substack: it's very hard to develop a modularized app without being able to link","date":"2013-08-25T02:41:45.971Z","type":"message"}
{"nick":"thlorenz","message":"no it breaks things like backbone","date":"2013-08-25T02:41:53.263Z","type":"message"}
{"nick":"thlorenz","message":"cause that needs to be a singleton","date":"2013-08-25T02:42:02.164Z","type":"message"}
{"nick":"thlorenz","message":"so I need to get the same one no matter how I require it","date":"2013-08-25T02:42:16.413Z","type":"message"}
{"nick":"substack","message":"move linked dependencies up to the root node_modules?","date":"2013-08-25T02:42:19.094Z","type":"message"}
{"nick":"substack","message":"ln -s ~/custom-backbone node_modules/backbone","date":"2013-08-25T02:42:29.344Z","type":"message"}
{"nick":"thlorenz","message":"that could work, but now I have to teach everyone in my team that","date":"2013-08-25T02:42:46.973Z","type":"message"}
{"nick":"substack","message":"write a bash script","date":"2013-08-25T02:42:57.333Z","type":"message"}
{"nick":"thlorenz","message":"with browserify dedupe I wouldn't have to worry about that","date":"2013-08-25T02:43:02.838Z","type":"message"}
{"nick":"substack","message":"there's even a `postinstall` field","date":"2013-08-25T02:43:05.512Z","type":"message"}
{"nick":"substack","message":"correct","date":"2013-08-25T02:43:07.840Z","type":"message"}
{"nick":"thlorenz","message":"I do npm dedupe as postingstall","date":"2013-08-25T02:43:17.736Z","type":"message"}
{"nick":"substack","message":"but now everyone else has to worry about the unintended consequences of reasoning about very surprising deduping logic","date":"2013-08-25T02:43:26.579Z","type":"message"}
{"nick":"thlorenz","message":"substack: so lets just say we don't make dedupe the default","date":"2013-08-25T02:43:44.687Z","type":"message"}
{"nick":"thlorenz","message":"now you have to manually want to dedupe","date":"2013-08-25T02:43:53.304Z","type":"message"}
{"nick":"thlorenz","message":"I don't see much of a problem there, it's just another cool browserify feature that makes your life easier","date":"2013-08-25T02:44:14.827Z","type":"message"}
{"nick":"thlorenz","message":"substack: are you really totally hell bent on not allowing this? cause I can't think of a way to do this without adding some code to browserify","date":"2013-08-25T02:45:27.879Z","type":"message"}
{"nick":"substack","message":"one thing I am entirely on board with having turned on by default is if the md5 hash of 2 files exactly match, only one of them should be bundled","date":"2013-08-25T02:45:31.525Z","type":"message"}
{"nick":"substack","message":"but everything else should be opt-in","date":"2013-08-25T02:45:40.124Z","type":"message"}
{"nick":"substack","message":"or even better, externalized","date":"2013-08-25T02:45:53.414Z","type":"message"}
{"nick":"defunctzombie","message":"substack: can't do the md5 thing the naive way","date":"2013-08-25T02:46:00.438Z","type":"message"}
{"nick":"defunctzombie","message":"substack: module.exports = require('./lib');","date":"2013-08-25T02:46:11.672Z","type":"message"}
{"nick":"substack","message":"defunctzombie: why not?","date":"2013-08-25T02:46:12.244Z","type":"message"}
{"nick":"defunctzombie","message":"would cause it to fail","date":"2013-08-25T02:46:14.777Z","type":"message"}
{"nick":"defunctzombie","message":"if that was in index.js","date":"2013-08-25T02:46:27.443Z","type":"message"}
{"nick":"defunctzombie","message":"and the only thing in the index.js","date":"2013-08-25T02:46:32.303Z","type":"message"}
{"nick":"defunctzombie","message":"just as a trivial example","date":"2013-08-25T02:46:36.664Z","type":"message"}
{"nick":"substack","message":"defunctzombie: you can just run the linked content in another context","date":"2013-08-25T02:46:53.485Z","type":"message"}
{"nick":"defunctzombie","message":"right.. that is what would have to happen","date":"2013-08-25T02:47:04.192Z","type":"message"}
{"nick":"substack","message":"that's fine","date":"2013-08-25T02:47:08.049Z","type":"message"}
{"nick":"thlorenz","message":"substack: so that seems like another cool feature","date":"2013-08-25T02:47:20.991Z","type":"message"}
{"nick":"defunctzombie","message":"which makes the client side require (module pack I think) more complex.. not sure","date":"2013-08-25T02:47:21.207Z","type":"message"}
{"nick":"defunctzombie","message":"cause we don't have context currently","date":"2013-08-25T02:47:30.363Z","type":"message"}
{"nick":"thlorenz","message":"substack: but are you ok with adding opt-in dedupe even if it adds code to browserify core?","date":"2013-08-25T02:47:56.355Z","type":"message"}
{"nick":"substack","message":"thlorenz: I'm really skeptical about it still","date":"2013-08-25T02:48:16.708Z","type":"message"}
{"nick":"thlorenz","message":"ok - well let me get the PR in - probably tomorrow - I'll try to keep code changes to a minimum","date":"2013-08-25T02:48:44.429Z","type":"message"}
{"nick":"thlorenz","message":"substack: then you can tell me what you think - if not I'll have to use a fork at work since we really need this","date":"2013-08-25T02:49:13.571Z","type":"message"}
{"nick":"substack","message":"thlorenz: the main thing I think is really surprising about it is that currently node and browserify have no notion of versions at all","date":"2013-08-25T02:49:30.587Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie seems to aggree with me on how important dedupe is","date":"2013-08-25T02:49:31.812Z","type":"message"}
{"nick":"substack","message":"only npm cares about versions","date":"2013-08-25T02:49:34.619Z","type":"message"}
{"nick":"thlorenz","message":"you mean like require('foo:1.1.0') or something like that?","date":"2013-08-25T02:50:12.949Z","type":"message"}
{"nick":"defunctzombie","message":"I 100% think we need to dedupe in some way regardless of npm","date":"2013-08-25T02:50:13.409Z","type":"message"}
{"nick":"substack","message":"thlorenz: would just comparing the hash work for your use-case?","date":"2013-08-25T02:50:40.859Z","type":"message"}
{"nick":"defunctzombie","message":"npm is not to be relied on.. npm installing without duplicates is only a suggestion in my mind","date":"2013-08-25T02:50:50.131Z","type":"message"}
{"nick":"substack","message":"I can think of a really simple way to add hash checking","date":"2013-08-25T02:50:54.558Z","type":"message"}
{"nick":"defunctzombie","message":"substack: it wouldn't work for his patch version stuff","date":"2013-08-25T02:51:01.172Z","type":"message"}
{"nick":"substack","message":"defunctzombie: but that is in the scope of things that npm is concerned with","date":"2013-08-25T02:51:30.081Z","type":"message"}
{"nick":"defunctzombie","message":"substack: since he wants to try to dedupe on patch version.. which I think needs more flushing out (like newest patch version would win out) or something else","date":"2013-08-25T02:51:33.959Z","type":"message"}
{"nick":"substack","message":"and as long as we're patching things, we could be patching npm instead","date":"2013-08-25T02:51:40.231Z","type":"message"}
{"nick":"substack","message":"or just writing a dedicated dedupe tool","date":"2013-08-25T02:51:52.438Z","type":"message"}
{"nick":"defunctzombie","message":"substack: npm is concerned with ensuring that a module and its deps are installed on disk to be able to run","date":"2013-08-25T02:51:53.994Z","type":"message"}
{"nick":"defunctzombie","message":"it is not concerened with taking up the least amount of disk space possible","date":"2013-08-25T02:52:03.424Z","type":"message"}
{"nick":"defunctzombie","message":"and I personally don't see the value of dedupe for server as much as I do for client","date":"2013-08-25T02:52:23.126Z","type":"message"}
{"nick":"substack","message":"I am so super skeptical of branching on what package.json's version says","date":"2013-08-25T02:52:24.706Z","type":"message"}
{"nick":"defunctzombie","message":"substack: I agree","date":"2013-08-25T02:52:34.679Z","type":"message"}
{"nick":"defunctzombie","message":"I am more in favor of md5 approaches","date":"2013-08-25T02:52:40.911Z","type":"message"}
{"nick":"substack","message":"what if somebody has a linked dep in node_modules","date":"2013-08-25T02:52:41.775Z","type":"message"}
{"nick":"defunctzombie","message":"as the first pass","date":"2013-08-25T02:52:45.055Z","type":"message"}
{"nick":"defunctzombie","message":"and not patch version fuzzyness","date":"2013-08-25T02:52:53.357Z","type":"message"}
{"nick":"substack","message":"but in node_modules/foo/node_modules there is another dep with the same name/version","date":"2013-08-25T02:52:58.900Z","type":"message"}
{"nick":"substack","message":"name/version is NOT canonical in any sense","date":"2013-08-25T02:53:17.119Z","type":"message"}
{"nick":"substack","message":"it doesn't tell you anything about what the package contents actually are","date":"2013-08-25T02:53:30.075Z","type":"message"}
{"nick":"defunctzombie","message":"correct","date":"2013-08-25T02:54:13.684Z","type":"message"}
{"nick":"defunctzombie","message":"especially given the gitname/repo stuff you can do","date":"2013-08-25T02:54:24.466Z","type":"message"}
{"nick":"thlorenz","message":"so what is canonical then?","date":"2013-08-25T02:54:55.723Z","type":"message"}
{"nick":"defunctzombie","message":"content","date":"2013-08-25T02:55:11.139Z","type":"message"}
{"nick":"thlorenz","message":"well, content and surrounding","date":"2013-08-25T02:55:23.394Z","type":"message"}
{"nick":"fallsemo","reason":"Quit: Leaving.","date":"2013-08-25T02:55:30.288Z","type":"quit"}
{"nick":"defunctzombie","message":"substack: also, npm does not dedupe git repo installs iirc which is another reason to dedupe in browserify ourselves","date":"2013-08-25T02:55:38.160Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: yea","date":"2013-08-25T02:55:43.925Z","type":"message"}
{"nick":"thlorenz","message":"since depending on what relative paths resolve to the content could mean something different","date":"2013-08-25T02:55:47.052Z","type":"message"}
{"nick":"defunctzombie","message":"thlorenz: content and context","date":"2013-08-25T02:55:47.647Z","type":"message"}
{"nick":"thlorenz","message":"so how would you figure out the context?","date":"2013-08-25T02:56:00.092Z","type":"message"}
{"nick":"thlorenz","message":"you'd have to get the content of the entire world around you","date":"2013-08-25T02:56:17.962Z","type":"message"}
{"nick":"thlorenz","message":"everything that the module or its dependents require","date":"2013-08-25T02:56:32.527Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: as I said I did a poor men's version of context by saying that n parent dirs above the file have to match","date":"2013-08-25T02:57:38.511Z","type":"message"}
{"nick":"substack","message":"that's weird","date":"2013-08-25T02:57:49.647Z","type":"message"}
{"nick":"thlorenz","message":"but that is flawed and just good for development when you link","date":"2013-08-25T02:57:53.968Z","type":"message"}
{"nick":"thlorenz","message":"substack: agreed","date":"2013-08-25T02:57:57.298Z","type":"message"}
{"nick":"substack","message":"you can just load the content at runtime","date":"2013-08-25T02:57:57.505Z","type":"message"}
{"nick":"substack","message":"that's the trick that webworkify uses","date":"2013-08-25T02:58:17.208Z","type":"message"}
{"nick":"thlorenz","message":"but this needs to happen during the bundling process","date":"2013-08-25T02:58:24.951Z","type":"message"}
{"nick":"substack","message":"arguments[4] and arguments[5] in any bundle","date":"2013-08-25T02:58:25.383Z","type":"message"}
{"nick":"thlorenz","message":"so how can you rely on runtime?","date":"2013-08-25T02:58:48.282Z","type":"message"}
{"nick":"substack","message":"all the bundling process needs to care about is that md5 hashes match","date":"2013-08-25T02:58:56.331Z","type":"message"}
{"nick":"timoxley","date":"2013-08-25T02:59:12.754Z","type":"join"}
{"nick":"thlorenz","message":"ok, but then you may find false positives right?","date":"2013-08-25T02:59:22.529Z","type":"message"}
{"nick":"substack","message":"when they match, install a shim module definition that points to the existing source with the current context","date":"2013-08-25T02:59:23.711Z","type":"message"}
{"nick":"defunctzombie","message":"^ that is what should happen","date":"2013-08-25T02:59:40.514Z","type":"message"}
{"nick":"defunctzombie","message":"and I think that is easy since you just wrap the js","date":"2013-08-25T02:59:53.258Z","type":"message"}
{"nick":"substack","message":"yep!","date":"2013-08-25T02:59:58.053Z","type":"message"}
{"nick":"substack","message":"plus, you get even smaller bundles if you have 2 versions of packages with mostly the same files","date":"2013-08-25T03:00:35.432Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: would that make dedupe obsolete - assuming we could get it to work?","date":"2013-08-25T03:00:39.104Z","type":"message"}
{"nick":"substack","message":"and once you get straight-up md5 checking to work","date":"2013-08-25T03:01:47.845Z","type":"message"}
{"nick":"substack","message":"you can get even crazier and start doing byte offset diffs","date":"2013-08-25T03:01:58.007Z","type":"message"}
{"nick":"thlorenz","message":"substack: I'd suggest to possibly add dedupe even if that's true until we add that more granular md5 dedupe","date":"2013-08-25T03:02:14.039Z","type":"message"}
{"nick":"substack","message":"for small differences in source files to apply patches at runtime","date":"2013-08-25T03:02:18.310Z","type":"message"}
{"nick":"thlorenz","message":"otherwise I'll have to use my fork at work until then","date":"2013-08-25T03:02:40.056Z","type":"message"}
{"nick":"substack","message":"thlorenz: this is pretty simple, I'll just see if I can get it working tonight","date":"2013-08-25T03:02:45.927Z","type":"message"}
{"nick":"substack","message":"and if it doesn't address all of your use-case we can re-evaluate to figure out what's left","date":"2013-08-25T03:03:09.475Z","type":"message"}
{"nick":"thlorenz","message":"substack: sounds good, I'll keep finishing up my dedupe approach -- mostly tests -- in the meantime","date":"2013-08-25T03:03:43.590Z","type":"message"}
{"nick":"thlorenz","message":"then we can pick the best solution","date":"2013-08-25T03:03:58.321Z","type":"message"}
{"nick":"thlorenz","message":"defunctzombie: what do you think - my approach won't be needed if substack implements what we just discussed right?","date":"2013-08-25T03:05:22.042Z","type":"message"}
{"nick":"substack","message":"assuming it addresses all of your objections","date":"2013-08-25T03:06:04.282Z","type":"message"}
{"nick":"substack","message":"if 2 files legitimately have different file contents then you still get 2 copies","date":"2013-08-25T03:06:16.233Z","type":"message"}
{"nick":"thlorenz","message":"substack: that is fine","date":"2013-08-25T03:06:24.817Z","type":"message"}
{"nick":"thlorenz","message":"substack: well actually that would only allow 'exact' dedupe, but should be fine during development","date":"2013-08-25T03:07:28.483Z","type":"message"}
{"nick":"thlorenz","message":"in which case I could ensure to install exact same versions of the things that have to be identical","date":"2013-08-25T03:07:55.026Z","type":"message"}
{"nick":"thlorenz","message":"and in combination with npm dedupe it would even work if versions don't match (and I don't link)","date":"2013-08-25T03:08:18.611Z","type":"message"}
{"nick":"thlorenz","message":"substack: I believe your approach could have better results in general since it most likely will result in even smaller bundles than mine","date":"2013-08-25T03:09:21.758Z","type":"message"}
{"nick":"kriskowal","reason":"Quit: kriskowal","date":"2013-08-25T03:12:23.063Z","type":"quit"}
{"nick":"substack","message":"one thing I'm thinking of","date":"2013-08-25T03:12:56.799Z","type":"message"}
{"nick":"substack","message":"if there are 2 files, both with:","date":"2013-08-25T03:13:04.410Z","type":"message"}
{"nick":"substack","message":"console.log('side effect')","date":"2013-08-25T03:13:09.880Z","type":"message"}
{"nick":"substack","message":"module.exports = 555","date":"2013-08-25T03:13:13.247Z","type":"message"}
{"nick":"kriskowal","date":"2013-08-25T03:13:15.643Z","type":"join"}
{"nick":"substack","message":"if you require('./first.js') and require('./second.js') you only get 1 side effect","date":"2013-08-25T03:13:30.723Z","type":"message"}
{"nick":"substack","message":"I can make this re-run the source, but then you get different references","date":"2013-08-25T03:13:46.518Z","type":"message"}
{"nick":"substack","message":"for libs that require the same references like backbone and three.js that is problematic","date":"2013-08-25T03:14:10.295Z","type":"message"}
{"nick":"substack","message":"or I can just point to the existing export ref, but that is surprising in how side-effects work","date":"2013-08-25T03:14:46.415Z","type":"message"}
{"nick":"substack","message":"but that should be pretty rare at least","date":"2013-08-25T03:14:53.068Z","type":"message"}
{"nick":"dominictarr","date":"2013-08-25T03:15:14.779Z","type":"join"}
{"nick":"substack","message":"I think in this case probably it's sufficiently rare enough to have depended-upon side effects in files with exactly the same contents","date":"2013-08-25T03:15:58.483Z","type":"message"}
{"nick":"thlorenz","message":"substack: I believe that you would want only one side effect","date":"2013-08-25T03:16:37.339Z","type":"message"}
{"nick":"thlorenz","message":"cause that is how it is if you npm dedupe as well","date":"2013-08-25T03:16:46.267Z","type":"message"}
{"nick":"substack","message":"ok yes, just making sure this is an acceptable trade-off first","date":"2013-08-25T03:17:12.445Z","type":"message"}
{"nick":"thlorenz","message":"i.e. if you do something while being required you expect to get cached after and to have this run only once","date":"2013-08-25T03:17:17.196Z","type":"message"}
{"nick":"thlorenz","message":"imo it is","date":"2013-08-25T03:17:24.397Z","type":"message"}
{"nick":"substack","message":"ok wait I can't do this actually","date":"2013-08-25T03:18:30.156Z","type":"message"}
{"nick":"substack","message":"I've got to re-evaluate the source","date":"2013-08-25T03:18:36.891Z","type":"message"}
{"nick":"substack","message":"in the new context","date":"2013-08-25T03:18:44.127Z","type":"message"}
{"nick":"substack","message":"because the depended-upon file could have its require() calls map to different files which might differ","date":"2013-08-25T03:19:37.954Z","type":"message"}
{"nick":"substack","message":"the bundle will be tiny, but might not solve the instanceof problem with backbone and three.js","date":"2013-08-25T03:20:04.395Z","type":"message"}
{"nick":"missinglink","date":"2013-08-25T03:22:10.640Z","type":"join"}
{"nick":"thlorenz","message":"substack: that's what I mentinoned earlier","date":"2013-08-25T03:25:17.951Z","type":"message"}
{"nick":"thlorenz","message":"same source != same meaning","date":"2013-08-25T03:25:30.535Z","type":"message"}
{"nick":"timoxley","reason":"Remote host closed the connection","date":"2013-08-25T03:26:43.249Z","type":"quit"}
{"nick":"substack","message":"is it ok if this feature doesn't solve the duplicate instance problem?","date":"2013-08-25T03:27:13.321Z","type":"message"}
{"nick":"thlorenz","message":"substack: not sure though why it wouldn't solve instanceof problem since I'd get only ONE backbone","date":"2013-08-25T03:27:16.066Z","type":"message"}
{"nick":"thlorenz","message":"substack: that's the main reason I did dedupe","date":"2013-08-25T03:27:30.195Z","type":"message"}
{"nick":"substack","message":"because this patch would re-evaluate the source in the new context","date":"2013-08-25T03:27:31.131Z","type":"message"}
{"nick":"thlorenz","message":"I can't have two backbones - that breaks everything","date":"2013-08-25T03:27:49.569Z","type":"message"}
{"nick":"substack","message":"ok","date":"2013-08-25T03:27:53.274Z","type":"message"}
{"nick":"thlorenz","message":"we may consider using our approaches in tandem","date":"2013-08-25T03:28:15.895Z","type":"message"}
{"nick":"substack","message":"yes I think that might work best","date":"2013-08-25T03:28:23.299Z","type":"message"}
{"nick":"thlorenz","message":"i.e mine dedupes exact packages (if you turn it on) and yours removes duplicate files","date":"2013-08-25T03:28:35.356Z","type":"message"}
{"nick":"thlorenz","message":"on a more granular level","date":"2013-08-25T03:28:43.311Z","type":"message"}
{"nick":"thlorenz","message":"ok - gonna get some rest - will continue tomorrow","date":"2013-08-25T03:28:59.698Z","type":"message"}
{"nick":"substack","message":"ok I'll just publish what I have for hashes when I get it working","date":"2013-08-25T03:29:24.151Z","type":"message"}
{"nick":"thlorenz","message":"excited to see what you come up with, will finish my end in the morning","date":"2013-08-25T03:29:28.722Z","type":"message"}
{"nick":"substack","message":"and hopefully your patch can build upon that?","date":"2013-08-25T03:29:29.815Z","type":"message"}
{"nick":"thlorenz","message":"cool :)","date":"2013-08-25T03:29:33.722Z","type":"message"}
{"nick":"thlorenz","message":"yep, should be possible - I mean dedupe should be pretty isolated from checking file content","date":"2013-08-25T03:29:55.543Z","type":"message"}
{"nick":"substack","message":"it should give the dedupe code a good place to exist at","date":"2013-08-25T03:29:55.903Z","type":"message"}
{"nick":"thlorenz","message":"I have the main impl at thlorenz/browser-dedupe","date":"2013-08-25T03:30:19.903Z","type":"message"}
{"nick":"timoxley","date":"2013-08-25T03:30:36.884Z","type":"join"}
{"nick":"thlorenz","message":"working on getting this to handle all cases and adding more tests, but yours may be another module since it works with file content","date":"2013-08-25T03:30:48.109Z","type":"message"}
{"nick":"thlorenz","message":"substack: ok, good luck talk to you tomorrow","date":"2013-08-25T03:31:27.526Z","type":"message"}
{"nick":"thlorenz","reason":"Remote host closed the connection","date":"2013-08-25T03:34:30.864Z","type":"quit"}
{"nick":"mikolalysenko","reason":"Quit: Lost terminal","date":"2013-08-25T03:36:10.218Z","type":"quit"}
{"nick":"coderzach","date":"2013-08-25T03:43:10.361Z","type":"join"}
{"nick":"substack","message":"mbalho: https://github.com/rvagg/workshopper","date":"2013-08-25T03:59:17.228Z","type":"message"}
{"nick":"substack","message":"rvagg already split this beast up into a separate module!","date":"2013-08-25T03:59:24.962Z","type":"message"}
{"nick":"shama","reason":"Remote host closed the connection","date":"2013-08-25T04:00:55.487Z","type":"quit"}
{"nick":"defunctzombie","message":"substack: I was away ..tldr on the final decision?","date":"2013-08-25T04:02:12.648Z","type":"message"}
{"nick":"mk30","date":"2013-08-25T04:04:44.331Z","type":"join"}
{"nick":"cpettitt","reason":"Quit: cpettitt","date":"2013-08-25T04:07:55.691Z","type":"quit"}
{"nick":"mk30","reason":"Quit: Page closed","date":"2013-08-25T04:11:44.432Z","type":"quit"}
{"nick":"ircretary","reason":"Ping timeout: 276 seconds","date":"2013-08-25T04:14:12.780Z","type":"quit"}
{"nick":"substack","message":"defunctzombie: I already have the hash-checking code working","date":"2013-08-25T04:24:41.270Z","type":"message"}
{"nick":"defunctzombie","message":"substack: +1","date":"2013-08-25T04:24:48.322Z","type":"message"}
{"nick":"substack","message":"it just doesn't work with instance refs which was thlorenz's main use case","date":"2013-08-25T04:25:18.070Z","type":"message"}
{"nick":"substack","message":"but we might be able to pull ideas from dedupe into the hash checking","date":"2013-08-25T04:25:43.666Z","type":"message"}
{"nick":"defunctzombie","message":"instance refs?","date":"2013-08-25T04:36:57.527Z","type":"message"}
{"nick":"kumavis_","date":"2013-08-25T04:37:24.617Z","type":"join"}
{"nick":"jergason","date":"2013-08-25T04:48:12.377Z","type":"join"}
{"nick":"dominictarr","reason":"Quit: dominictarr","date":"2013-08-25T04:48:20.316Z","type":"quit"}
{"nick":"itpro","date":"2013-08-25T05:06:20.239Z","type":"join"}
{"nick":"itpro","new_nick":"ITpro","date":"2013-08-25T05:06:20.451Z","type":"nick"}
{"nick":"substack","message":"now it passes for the same instance refs","date":"2013-08-25T05:06:48.691Z","type":"message"}
{"nick":"substack","message":"but I'm going to come up with a more complicated test because there's a case it doesn't cover","date":"2013-08-25T05:07:02.066Z","type":"message"}
{"nick":"jergason","reason":"Remote host closed the connection","date":"2013-08-25T05:16:50.797Z","type":"quit"}
{"nick":"defunctzombie","message":"substack: while you are poking around you should look at those .external changes :p","date":"2013-08-25T05:18:54.917Z","type":"message"}
{"nick":"coderzach","reason":"Quit: coderzach","date":"2013-08-25T05:20:16.687Z","type":"quit"}
{"nick":"missinglink","reason":"Ping timeout: 276 seconds","date":"2013-08-25T05:39:21.649Z","type":"quit"}
{"nick":"st_luke","date":"2013-08-25T05:53:28.172Z","type":"join"}
{"nick":"rxgx","date":"2013-08-25T06:25:27.013Z","type":"join"}
{"nick":"rxgx","reason":"Quit: rage quit","date":"2013-08-25T06:48:39.795Z","type":"quit"}
{"nick":"calvinfo","reason":"Quit: Leaving.","date":"2013-08-25T06:53:23.190Z","type":"quit"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-08-25T07:10:28.202Z","type":"quit"}
{"nick":"st_luke","date":"2013-08-25T07:11:05.964Z","type":"join"}
{"nick":"st_luke","reason":"Ping timeout: 246 seconds","date":"2013-08-25T07:15:07.968Z","type":"quit"}
{"nick":"st_luke","date":"2013-08-25T07:22:03.653Z","type":"join"}
{"nick":"kumavis_","reason":"Quit: kumavis_","date":"2013-08-25T07:30:02.515Z","type":"quit"}
{"nick":"ITpro","reason":"Ping timeout: 246 seconds","date":"2013-08-25T07:33:40.982Z","type":"quit"}
{"nick":"substack","message":"defunctzombie: published 2.29.0","date":"2013-08-25T07:44:54.979Z","type":"message"}
{"nick":"defunctzombie","message":"substack: what new goodies does it have?","date":"2013-08-25T07:45:06.190Z","type":"message"}
{"nick":"substack","message":"sophisticated, version-aware hash checking","date":"2013-08-25T07:45:29.127Z","type":"message"}
{"nick":"substack","message":"or rather, (dependency hash)-aware","date":"2013-08-25T07:45:44.677Z","type":"message"}
{"nick":"defunctzombie","message":"oooo","date":"2013-08-25T07:45:49.125Z","type":"message"}
{"nick":"substack","message":"there's no version checking anywhere, just the dependency graph as usual","date":"2013-08-25T07:46:01.892Z","type":"message"}
{"nick":"substack","message":"but if you ever have a duplicate file anywhere, you will get that file","date":"2013-08-25T07:46:20.809Z","type":"message"}
{"nick":"substack","message":"only once","date":"2013-08-25T07:46:30.084Z","type":"message"}
{"nick":"substack","message":"and if you have a duplicate file with exactly the same hashed dependency context, you will get the same instance","date":"2013-08-25T07:46:56.235Z","type":"message"}
{"nick":"substack","message":"so if you have identical copies of backbone in node_modules/backbone and node_modules/foo/backbone with identical sub-dependencies, you will get the same instance for both","date":"2013-08-25T07:47:29.020Z","type":"message"}
{"nick":"defunctzombie","message":"substack: nice, will run it on my codebase when I rebase my external stuff next week on 2.29","date":"2013-08-25T07:47:42.626Z","type":"message"}
{"nick":"defunctzombie","message":"and see what wins I get","date":"2013-08-25T07:47:57.848Z","type":"message"}
{"nick":"defunctzombie","message":"I expect quite a few since I use modules like domify and many components also use that module","date":"2013-08-25T07:48:16.511Z","type":"message"}
{"nick":"substack","message":"https://github.com/substack/node-browserify/blob/master/test/hash_instance_context.js and https://github.com/substack/node-browserify/tree/master/test/hash_instance_context","date":"2013-08-25T07:49:49.044Z","type":"message"}
{"nick":"substack","message":"and also the simpler test/hash.js and test/hash_instance.js","date":"2013-08-25T07:50:04.983Z","type":"message"}
{"nick":"mirkokiefer","date":"2013-08-25T07:51:10.332Z","type":"join"}
{"nick":"st_luke","reason":"Remote host closed the connection","date":"2013-08-25T07:59:33.856Z","type":"quit"}
