{"nick":"rphillips","message":"kostco: https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/refactor/hostinfo2/hostinfo/iptables.lua","date":"2015-08-07T00:43:14.099Z","type":"message"}
{"nick":"rphillips","message":"so I made the HostInfo object sublcass from a Transform Stream","date":"2015-08-07T00:43:36.071Z","type":"message"}
{"nick":"rphillips","message":"it's on the refactor/hostinfo2 branch","date":"2015-08-07T00:44:27.377Z","type":"message"}
{"nick":"rphillips","message":"you should be able to take the autoupgrades module and use an inline _transform now","date":"2015-08-07T00:44:48.197Z","type":"message"}
{"nick":"kostco","message":"+1 for inline transform","date":"2015-08-07T01:00:26.308Z","type":"message"}
{"nick":"kostco","message":"rphillips: ill let you hammer out on the refactor branch for now, since im really just slowing you down atm.","date":"2015-08-07T01:02:11.382Z","type":"message"}
{"nick":"kostco","message":"take a look at passwd.lua, the asyncspawn func in misc imo is a waste since its not used in a lot of places so im curious how youll do that","date":"2015-08-07T01:02:11.421Z","type":"message"}
{"nick":"kostco","message":"another thing is that its be awesome if a any of the checks could, even the ones not relying on hostinfosubproc could declare a Info:restrictedplatforms","date":"2015-08-07T01:02:51.707Z","type":"message"}
{"nick":"rphillips","message":"hahaha. you wanted the _transform function within the class... now you get to try it out","date":"2015-08-07T01:03:01.016Z","type":"message"}
{"nick":"kostco","message":"and not worry about the whole los.type() ~= linux","date":"2015-08-07T01:03:09.250Z","type":"message"}
{"nick":"kostco","message":"man i love it! i need to type less code!","date":"2015-08-07T01:03:16.937Z","type":"message"}
{"nick":"kostco","message":"so what i did here https://gist.github.com/kaustavha/7ff3f649ed5a90968b2b#file-base-lua-L49-L58","date":"2015-08-07T01:03:47.674Z","type":"message"}
{"nick":"kostco","message":"i think thats a good idea","date":"2015-08-07T01:03:52.476Z","type":"message"}
{"nick":"kostco","message":"but im unsure how to make that work everywhere","date":"2015-08-07T01:04:03.593Z","type":"message"}
{"nick":"rphillips","message":"getPlatform() is the new function","date":"2015-08-07T01:04:20.694Z","type":"message"}
{"nick":"rphillips","message":"and it's a whitelist","date":"2015-08-07T01:04:25.379Z","type":"message"}
{"nick":"rphillips","message":"'linux', 'darwin', 'freebsd', win32'","date":"2015-08-07T01:04:35.079Z","type":"message"}
{"nick":"kostco","message":"goddamit man did you rebase","date":"2015-08-07T01:05:13.839Z","type":"message"}
{"nick":"kostco","message":"why would you rebase","date":"2015-08-07T01:05:17.039Z","type":"message"}
{"nick":"rphillips","message":"yep","date":"2015-08-07T01:05:20.003Z","type":"message"}
{"nick":"rphillips","message":"to squash all the commits","date":"2015-08-07T01:05:27.861Z","type":"message"}
{"nick":"kostco","message":"sigh alright ill go through 18 files not seperated by commits","date":"2015-08-07T01:05:34.326Z","type":"message"}
{"nick":"kostco","message":"rphillips: have you tried refactoring any of the fs using checks yet?","date":"2015-08-07T01:06:29.323Z","type":"message"}
{"nick":"rphillips","message":"fs using checks?","date":"2015-08-07T01:06:40.422Z","type":"message"}
{"nick":"kostco","message":"have you seen my gist? i was using it to figure out what to work on","date":"2015-08-07T01:07:36.007Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/f8a43d219377d78a19c6","date":"2015-08-07T01:07:49.705Z","type":"message"}
{"nick":"rphillips","message":"i havne't seen that gist in a while, but I don't understand the 'have you tried refactoring any of the fs using checks yet'","date":"2015-08-07T01:09:29.515Z","type":"message"}
{"nick":"kostco","message":"what i mean is the checks that rely on fs, i think its group three in that girst","date":"2015-08-07T01:09:53.586Z","type":"message"}
{"nick":"kostco","message":"rphillips: convert passwd.lua that uses fs and requires a whole bunch of spawned proccess running \"passwd -S <uname>' after running fs.read","date":"2015-08-07T01:10:10.899Z","type":"message"}
{"nick":"kostco","message":"and fileperms","date":"2015-08-07T01:10:37.081Z","type":"message"}
{"nick":"kostco","message":"im curious how itll look after","date":"2015-08-07T01:10:43.516Z","type":"message"}
{"nick":"kostco","message":"itll be easier for me to work off your example than trying to figure out how to make it look like what youd make it look like","date":"2015-08-07T01:11:05.719Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/refactor/hostinfo2/hostinfo/pam.lua","date":"2015-08-07T01:11:08.503Z","type":"message"}
{"nick":"kostco","message":"anyhoo im gonna get back to ipa day here at rssf, pam looks good although having to declare readstreams is a small nit, theres a few other checks that require fs utils so need to figure out how to abstract that and id definitely replace the los.type check thingy with the self:isRestrictedPlatform from my gist or whatever name makes sense tomorrow with your","date":"2015-08-07T01:21:08.791Z","type":"message"}
{"nick":"kostco","message":"self:getPlatform()","date":"2015-08-07T01:21:08.792Z","type":"message"}
{"nick":"rphillips","reason":"Quit: ZNC - http://znc.in","date":"2015-08-07T02:36:26.018Z","type":"quit"}
{"nick":"rphillips","date":"2015-08-07T02:40:51.423Z","type":"join"}
{"nick":"hdms_","date":"2015-08-07T02:56:12.504Z","type":"join"}
{"nick":"hdms","reason":"Ping timeout: 260 seconds","date":"2015-08-07T02:57:51.979Z","type":"quit"}
{"nick":"hdms_","new_nick":"hdms","date":"2015-08-07T02:57:52.314Z","type":"nick"}
{"nick":"rphillips","reason":"Quit: ZNC - http://znc.in","date":"2015-08-07T03:10:23.808Z","type":"quit"}
{"nick":"rphillips","date":"2015-08-07T03:10:37.466Z","type":"join"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-08-07T03:25:15.900Z","type":"quit"}
{"nick":"dan336","date":"2015-08-07T03:27:28.383Z","type":"join"}
{"nick":"hdms","date":"2015-08-07T03:50:56.358Z","type":"join"}
{"nick":"rphillips","reason":"Quit: ZNC - http://znc.in","date":"2015-08-07T04:14:47.274Z","type":"quit"}
{"nick":"rphillips","date":"2015-08-07T04:15:06.060Z","type":"join"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-08-07T04:16:01.477Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-07T05:08:02.374Z","type":"join"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-08-07T06:50:34.003Z","type":"quit"}
{"nick":"yperez","date":"2015-08-07T08:41:18.168Z","type":"join"}
{"nick":"yperez","new_nick":"yagop","date":"2015-08-07T08:41:34.166Z","type":"nick"}
{"nick":"yagop","message":"Hi, I recently discovered Luvit and fucking love it. Thanks a lot for the work!","date":"2015-08-07T08:44:01.288Z","type":"message"}
{"nick":"jreek","date":"2015-08-07T09:00:32.731Z","type":"join"}
{"nick":"jreek","message":"Hello. Luvit behaviour differs from Lua: http://pastebin.com/1wbU0bH1","date":"2015-08-07T09:04:19.929Z","type":"message"}
{"nick":"jreek","message":"Is it a bug? How can I create global variable using Luvit?","date":"2015-08-07T09:04:46.911Z","type":"message"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 244 seconds","date":"2015-08-07T09:13:35.350Z","type":"quit"}
{"nick":"yagop","reason":"Remote host closed the connection","date":"2015-08-07T09:13:36.469Z","type":"quit"}
{"nick":"jreek","reason":"Ping timeout: 246 seconds","date":"2015-08-07T09:21:43.656Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-07T10:35:19.297Z","type":"join"}
{"nick":"torque","reason":"*.net *.split","date":"2015-08-07T10:45:04.686Z","type":"quit"}
{"nick":"torque","date":"2015-08-07T10:49:09.450Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 246 seconds","date":"2015-08-07T11:12:02.246Z","type":"quit"}
{"nick":"jreek","date":"2015-08-07T11:17:03.672Z","type":"join"}
{"nick":"jreek","reason":"Quit: Page closed","date":"2015-08-07T11:24:02.580Z","type":"quit"}
{"nick":"hdms","date":"2015-08-07T12:02:16.470Z","type":"join"}
{"nick":"rphillips","message":"good morning","date":"2015-08-07T14:12:23.363Z","type":"message"}
{"nick":"dan336","date":"2015-08-07T14:26:29.398Z","type":"join"}
{"nick":"creationix","message":"rphillips: did you see jreek’s question?  I didn’t realize we block global leakage","date":"2015-08-07T14:26:49.046Z","type":"message"}
{"nick":"creationix","message":"I guess that’s a side effect of using setfenv in the require system","date":"2015-08-07T14:27:02.414Z","type":"message"}
{"nick":"rphillips","message":"saw that","date":"2015-08-07T14:27:03.504Z","type":"message"}
{"nick":"rphillips","message":" I think _G works though","date":"2015-08-07T14:27:12.577Z","type":"message"}
{"nick":"creationix","message":"yep,","date":"2015-08-07T14:27:20.771Z","type":"message"}
{"nick":"coderkevin","message":"creationix: Thanks for the info. I heard before that Luvit can work on the normal Lua interpreter without LuaJIT. Is that true?","date":"2015-08-07T14:59:08.348Z","type":"message"}
{"nick":"creationix","message":"coderkevin: at some level","date":"2015-08-07T14:59:27.164Z","type":"message"}
{"nick":"creationix","message":"the low-level luv binding is fully supported with normal lua","date":"2015-08-07T14:59:38.918Z","type":"message"}
{"nick":"creationix","message":"luvi still has some work left to make portable and luvit depends on luvi","date":"2015-08-07T14:59:51.447Z","type":"message"}
{"nick":"coderkevin","message":"creationix: I was wondering if it might be easier to bootstrap without LuaJIT first, then implement LuaJIT after it's up and running.","date":"2015-08-07T15:00:00.447Z","type":"message"}
{"nick":"creationix","message":"coderkevin: for a new hardware platform right?","date":"2015-08-07T15:00:20.169Z","type":"message"}
{"nick":"coderkevin","message":"creationix: It's for an ARM-based QNX platform.","date":"2015-08-07T15:00:28.890Z","type":"message"}
{"nick":"creationix","message":"right https://github.com/luvit/luvi/issues/109","date":"2015-08-07T15:00:48.861Z","type":"message"}
{"nick":"coderkevin","message":"We've already got Lua 5.2 running on this platform, I'm just trying to figure out the quickest way to get Luvit up and running to get our other devs going on top of it.","date":"2015-08-07T15:01:59.651Z","type":"message"}
{"nick":"coderkevin","message":"LuaJIT is based on 5.2 still, right?","date":"2015-08-07T15:02:44.104Z","type":"message"}
{"nick":"creationix","message":"coderkevin: 5.2ish","date":"2015-08-07T15:02:51.897Z","type":"message"}
{"nick":"creationix","message":"it’s 5.1 with backwards compatible 5.2 features","date":"2015-08-07T15:03:01.622Z","type":"message"}
{"nick":"coderkevin","message":"I see. I'll have to check what 5.2 features we're using, but it sounds like a move to LuaJIT for our existing code could be easier than a move to 5.3 even.","date":"2015-08-07T15:03:47.627Z","type":"message"}
{"nick":"creationix","message":"coderkevin: so by “luvit” you mean the whole system including lit, luvi based apps with bundled zips and the luvit standard library?","date":"2015-08-07T15:03:53.602Z","type":"message"}
{"nick":"coderkevin","message":"Well, I'm not 100% sure I need lit.  This is an embedded system, so I'm not sure that I really need a package manager.","date":"2015-08-07T15:04:24.397Z","type":"message"}
{"nick":"creationix","message":"if you don’t care about the luvit ecosystem, using luv directly is very easy","date":"2015-08-07T15:04:29.923Z","type":"message"}
{"nick":"creationix","message":"and most luvit libraries can be ported to work directly on luv easily","date":"2015-08-07T15:04:48.705Z","type":"message"}
{"nick":"coderkevin","message":"Right. I figured on libuv/luv first.  I've looked into libuv enough to become familiar with what will have to be done there.","date":"2015-08-07T15:04:58.001Z","type":"message"}
{"nick":"creationix","message":"does you system have libuv working yet?","date":"2015-08-07T15:05:07.548Z","type":"message"}
{"nick":"coderkevin","message":"That's not on QNX yet.  So I'll have to port it first, I figure.","date":"2015-08-07T15:05:24.195Z","type":"message"}
{"nick":"coderkevin","message":"Should be fairly straightforward from Linux, except QNX doesn't have epoll or eventfds.","date":"2015-08-07T15:05:43.123Z","type":"message"}
{"nick":"creationix","message":"I see","date":"2015-08-07T15:05:56.704Z","type":"message"}
{"nick":"coderkevin","message":"But that part I'm comfortable with.","date":"2015-08-07T15:06:11.761Z","type":"message"}
{"nick":"creationix","message":"so lua + libuv (via luv) is a pretty nice and very simple platform","date":"2015-08-07T15:06:16.960Z","type":"message"}
{"nick":"creationix","message":"it’s not “luvit” per se, but has the core primitives","date":"2015-08-07T15:06:30.776Z","type":"message"}
{"nick":"coderkevin","message":"Hmm, I wonder if maybe that's the way I should go instead of full-blown Luvit.","date":"2015-08-07T15:06:33.244Z","type":"message"}
{"nick":"coderkevin","message":"Primarily what we need is the lua-based libuv event loop.","date":"2015-08-07T15:06:45.769Z","type":"message"}
{"nick":"creationix","message":"and like I said, most the luvit libraries can be ported fairly easily","date":"2015-08-07T15:06:51.521Z","type":"message"}
{"nick":"coderkevin","message":"We want to be single-threaded on the event loop with the ability to put in async events from other threads.","date":"2015-08-07T15:07:06.016Z","type":"message"}
{"nick":"creationix","message":"luvi adds bundles (zip or folder) for asset bundling","date":"2015-08-07T15:07:14.184Z","type":"message"}
{"nick":"coderkevin","message":"Secondary to that is D-Bus and http support.","date":"2015-08-07T15:07:14.901Z","type":"message"}
{"nick":"creationix","message":"and lit adds package management","date":"2015-08-07T15:07:19.483Z","type":"message"}
{"nick":"coderkevin","message":"We're already using l2dbus for other things, what would you recommend for http in a luv setup?","date":"2015-08-07T15:07:39.785Z","type":"message"}
{"nick":"creationix","message":"my http-codec library in luvit will work almost out of the box on plain lua = luv","date":"2015-08-07T15:08:00.627Z","type":"message"}
{"nick":"coderkevin","message":"Does it to TLS too?","date":"2015-08-07T15:08:14.955Z","type":"message"}
{"nick":"creationix","message":"no, we use openssl for that","date":"2015-08-07T15:08:25.363Z","type":"message"}
{"nick":"coderkevin","message":"We may want to use TLS at some point for our http requests.","date":"2015-08-07T15:08:39.106Z","type":"message"}
{"nick":"creationix","message":"do you prefer coroutine or callback style code?","date":"2015-08-07T15:08:48.816Z","type":"message"}
{"nick":"coderkevin","message":"I think we're trying to stay on the main event loop as much as possible, so async/callback would probably be best.","date":"2015-08-07T15:09:25.689Z","type":"message"}
{"nick":"coderkevin","message":"But coroutines for situations where that's not feasible would be fine, I think.","date":"2015-08-07T15:09:53.665Z","type":"message"}
{"nick":"coderkevin","message":"Communicating back to the main thread from a coroutine would be done through a uv_async event, right?","date":"2015-08-07T15:11:37.530Z","type":"message"}
{"nick":"coderkevin","message":"Or would you do it some other way?","date":"2015-08-07T15:11:49.938Z","type":"message"}
{"nick":"coderkevin","message":"Sorry, I haven't done much with coroutines in Lua, so my understanding isn't very clear.","date":"2015-08-07T15:12:30.082Z","type":"message"}
{"nick":"creationix","message":"coroutines are on main thread","date":"2015-08-07T15:12:42.752Z","type":"message"}
{"nick":"creationix","message":"they are green threads","date":"2015-08-07T15:12:43.537Z","type":"message"}
{"nick":"creationix","message":"but they let you do blocking I/O without actually blocking the thread","date":"2015-08-07T15:12:47.630Z","type":"message"}
{"nick":"creationix","message":"result = someAction(arg1, arg2) vs someAction(arg1, arg2, function (err, result) end )","date":"2015-08-07T15:13:13.169Z","type":"message"}
{"nick":"creationix","message":"libuv is always callbacks, but using lua coroutines I’ve made it look blocking","date":"2015-08-07T15:13:35.697Z","type":"message"}
{"nick":"coderkevin","message":"I see.","date":"2015-08-07T15:14:02.684Z","type":"message"}
{"nick":"coderkevin","message":"How do you communicate between the threads?","date":"2015-08-07T15:14:13.191Z","type":"message"}
{"nick":"creationix","message":"I don’t have threads","date":"2015-08-07T15:14:20.503Z","type":"message"}
{"nick":"coderkevin","message":"Or well, between coroutines.","date":"2015-08-07T15:14:29.338Z","type":"message"}
{"nick":"creationix","message":"they all share the same context","date":"2015-08-07T15:14:34.555Z","type":"message"}
{"nick":"creationix","message":"so via closures the same as callbacks","date":"2015-08-07T15:14:41.269Z","type":"message"}
{"nick":"coderkevin","message":"passing values through yield?","date":"2015-08-07T15:15:09.921Z","type":"message"}
{"nick":"creationix","message":"I can write up an example and port a few of my libraries if you’d like","date":"2015-08-07T15:15:10.009Z","type":"message"}
{"nick":"creationix","message":"the yield is hidden in the wrapper code that adapts between callbacks and coroutines","date":"2015-08-07T15:15:29.977Z","type":"message"}
{"nick":"creationix","message":"user code looks like `result = someAction()`","date":"2015-08-07T15:15:42.006Z","type":"message"}
{"nick":"coderkevin","message":"It sounds interesting, I'd like to take a look.","date":"2015-08-07T15:15:42.469Z","type":"message"}
{"nick":"coderkevin","message":"Functionally though, it's basically the same, right?","date":"2015-08-07T15:15:51.260Z","type":"message"}
{"nick":"creationix","message":"more or less","date":"2015-08-07T15:15:55.614Z","type":"message"}
{"nick":"coderkevin","message":"Since it's all on the same main thread, no locking is required, right?","date":"2015-08-07T15:16:10.268Z","type":"message"}
{"nick":"creationix","message":"right","date":"2015-08-07T15:16:15.688Z","type":"message"}
{"nick":"coderkevin","message":"As long as you don't yield in a critical section.","date":"2015-08-07T15:16:27.863Z","type":"message"}
{"nick":"creationix","message":"true","date":"2015-08-07T15:16:39.149Z","type":"message"}
{"nick":"creationix","message":"so the hazard with my coroutine style is any function call can potentially cause you to yield","date":"2015-08-07T15:16:52.425Z","type":"message"}
{"nick":"coderkevin","message":"Cool, yeah I'd like to take a look.","date":"2015-08-07T15:17:04.225Z","type":"message"}
{"nick":"creationix","message":"but it’s not as bad as true threading since it’s not every statement that can pre-empt you","date":"2015-08-07T15:17:09.953Z","type":"message"}
{"nick":"coderkevin","message":"That's true.","date":"2015-08-07T15:17:19.345Z","type":"message"}
{"nick":"coderkevin","message":"One thing we care a lot about on this project is speed, so no thread-locking.","date":"2015-08-07T15:17:35.657Z","type":"message"}
{"nick":"creationix","message":"so I’ll see if I can port coro-http and dependencies to plain luv","date":"2015-08-07T15:17:41.579Z","type":"message"}
{"nick":"creationix","message":"that gives you a nice coroutine based http client and server","date":"2015-08-07T15:17:55.894Z","type":"message"}
{"nick":"creationix","message":"and then you could port the weblit framework if you want a higher-level http framework","date":"2015-08-07T15:18:16.622Z","type":"message"}
{"nick":"coderkevin","message":"We'll be running straight C code on the libuv event loop outside of Lua for higher performance code, but we want it interleaved with Lua-based events as well.","date":"2015-08-07T15:18:21.843Z","type":"message"}
{"nick":"coderkevin","message":"Okay, that sounds great.","date":"2015-08-07T15:18:29.003Z","type":"message"}
{"nick":"creationix","message":"but if you want https client, you’ll need to provide some sort of tls","date":"2015-08-07T15:18:45.452Z","type":"message"}
{"nick":"creationix","message":"if you’re able to build openssl and lua-openssl (the bindings luvi uses) it will make porting much easier","date":"2015-08-07T15:19:00.871Z","type":"message"}
{"nick":"coderkevin","message":"So just to be clear, you recommend that I run luv directly for this project since I don't really need package management so much, right?","date":"2015-08-07T15:19:08.425Z","type":"message"}
{"nick":"creationix","message":"yea, it’s faster, simpler and doesn’t require porting luvi to lua","date":"2015-08-07T15:19:26.746Z","type":"message"}
{"nick":"coderkevin","message":"That's great advice, thanks!","date":"2015-08-07T15:19:40.664Z","type":"message"}
{"nick":"creationix","message":"and if you already use and know the libuv API it will feel natural","date":"2015-08-07T15:19:40.941Z","type":"message"}
{"nick":"coderkevin","message":"We won't need an http client straight away, maybe later down the line, though.","date":"2015-08-07T15:20:13.047Z","type":"message"}
{"nick":"coderkevin","message":"Well thanks for the help. If you get that coroutine code up, I'd like to see it. Thanks again!","date":"2015-08-07T15:21:26.460Z","type":"message"}
{"nick":"creationix","message":"coderkevin: will you be on here or shall I email you?","date":"2015-08-07T15:22:30.600Z","type":"message"}
{"nick":"coderkevin","message":"I'll be here.","date":"2015-08-07T15:22:44.333Z","type":"message"}
{"nick":"creationix","message":"so a basic http server serving up static files and maybe some REST endpoints would be a good example?","date":"2015-08-07T15:23:11.332Z","type":"message"}
{"nick":"coderkevin","message":"But my email is kevin.killingsworth@garmin.com in case something happens.","date":"2015-08-07T15:23:12.720Z","type":"message"}
{"nick":"coderkevin","message":"Yeah, that would be cool.","date":"2015-08-07T15:23:34.117Z","type":"message"}
{"nick":"creationix","message":"will you be needing websockets?","date":"2015-08-07T15:23:42.379Z","type":"message"}
{"nick":"coderkevin","message":"Eventually, but not right away.","date":"2015-08-07T15:23:50.091Z","type":"message"}
{"nick":"coderkevin","message":"We're just getting http up first, then we'll worry about server push later.","date":"2015-08-07T15:24:12.295Z","type":"message"}
{"nick":"creationix","message":"I’ve been meaning to make such an example for a while anyway.  People often ask how to use luv without luvit","date":"2015-08-07T15:24:18.179Z","type":"message"}
{"nick":"coderkevin","message":"It sounds like for a controlled embedded system, it's a really good fit.","date":"2015-08-07T15:24:34.479Z","type":"message"}
{"nick":"creationix","message":"right, and you can use git submodules for dependency management anyway","date":"2015-08-07T15:25:03.211Z","type":"message"}
{"nick":"creationix","message":"that’s how we did it with luvit before I wrote lit","date":"2015-08-07T15:25:26.504Z","type":"message"}
{"nick":"creationix","message":"coderkevin: I’ll push it here https://github.com/creationix/luvweb","date":"2015-08-07T15:26:36.699Z","type":"message"}
{"nick":"coderkevin","message":"watched and starred.  :)","date":"2015-08-07T15:27:14.604Z","type":"message"}
{"nick":"creationix","message":"rphillips: turns out using luv directly with lua isn’t that painful https://github.com/creationix/luvweb","date":"2015-08-07T16:23:44.582Z","type":"message"}
{"nick":"creationix","message":"one-line require system https://github.com/creationix/luvweb/blob/c6a86ebbeb8c8116e2ea3c238c82903dd7931b3d/src/main.lua#L5-L7","date":"2015-08-07T16:23:58.153Z","type":"message"}
{"nick":"creationix","message":"all deps are now a flat list of local submodules in ‘lib’","date":"2015-08-07T16:24:19.444Z","type":"message"}
{"nick":"creationix","message":"of course if a package wants internal requires, it will need to prefix everything with it’s name like in normal lua","date":"2015-08-07T16:24:49.588Z","type":"message"}
{"nick":"rphillips","message":"that is slick","date":"2015-08-07T16:32:09.116Z","type":"message"}
{"nick":"kostco","message":"gday folks","date":"2015-08-07T16:44:37.846Z","type":"message"}
{"nick":"creationix","message":"heh, coroutines are less powerful in stock lua","date":"2015-08-07T17:00:50.420Z","type":"message"}
{"nick":"creationix","message":"you can’t use require from inside a coroutine","date":"2015-08-07T17:00:56.704Z","type":"message"}
{"nick":"creationix","message":"and would make porting lit to plain lua rather difficult","date":"2015-08-07T17:01:10.684Z","type":"message"}
{"nick":"creationix","message":"or rather, you can’t require a file that then yields","date":"2015-08-07T17:01:34.875Z","type":"message"}
{"nick":"creationix","message":"no yielding across C boundaries","date":"2015-08-07T17:01:46.543Z","type":"message"}
{"nick":"rphillips","message":"limiting","date":"2015-08-07T17:11:01.740Z","type":"message"}
{"nick":"rphillips","message":"kostco: perhaps you could take a stab at refactoring the fs tests","date":"2015-08-07T18:07:13.476Z","type":"message"}
{"nick":"rphillips","message":"creationix: which ssh key can I use","date":"2015-08-07T18:16:53.564Z","type":"message"}
{"nick":"rphillips","message":"i want to give you access to justin's box as well","date":"2015-08-07T18:17:01.043Z","type":"message"}
{"nick":"creationix","message":"sent to pm","date":"2015-08-07T18:17:31.370Z","type":"message"}
{"nick":"kostco","message":"sure rphillips to start ill take a stab at refactoring fstab","date":"2015-08-07T18:28:48.483Z","type":"message"}
{"nick":"travis-ci","date":"2015-08-07T18:44:22.208Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luv#51 (master - 73bd9dc : Tim Caswell): The build passed.","date":"2015-08-07T18:44:23.237Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luv/compare/13a5e6be0944...73bd9dc5c497","date":"2015-08-07T18:44:23.322Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luv/builds/74615357","date":"2015-08-07T18:44:23.324Z","type":"message"}
{"nick":"travis-ci","date":"2015-08-07T18:44:23.325Z","type":"part"}
{"nick":"coderkevin","message":"creationix: I tried out the luaweb, but it failed on the make step, in luv, on 'find_package(\"Lua\")'","date":"2015-08-07T18:56:15.348Z","type":"message"}
{"nick":"coderkevin","message":"I looked all over for a LuaConfig.cmake or Lua-config.cmake file, but didn't find one around.  I wonder what I'm missing.","date":"2015-08-07T18:56:47.501Z","type":"message"}
{"nick":"creationix","message":"I just got that working on my ubuntu box, pull again?","date":"2015-08-07T18:56:52.823Z","type":"message"}
{"nick":"creationix","message":"I’m still trying to fix it for OSX, bitlib and lua-openssl are harder on macs","date":"2015-08-07T18:57:16.559Z","type":"message"}
{"nick":"coderkevin","message":"Ah, okay. I'm on ubuntu as well.","date":"2015-08-07T18:57:31.315Z","type":"message"}
{"nick":"creationix","message":"coderkevin: you need https://github.com/creationix/luvweb/commit/fa4bc8147b424b7c4412e1aff3d39dd0f3e82ec0 to use system lua for luv","date":"2015-08-07T18:58:08.931Z","type":"message"}
{"nick":"creationix","message":"My test machine had system lua and /usr/local lua so I didn’t notice at first","date":"2015-08-07T18:58:24.519Z","type":"message"}
{"nick":"coderkevin","message":"ah","date":"2015-08-07T18:59:04.546Z","type":"message"}
{"nick":"creationix","message":"As soon as I get it building on OSX, I’ll port weblit now that all it’s dependencies are sastified","date":"2015-08-07T18:59:29.970Z","type":"message"}
{"nick":"coderkevin","message":"Looks like the .so's are built after the change you suggested.","date":"2015-08-07T19:04:10.434Z","type":"message"}
{"nick":"coderkevin","message":"How do I get coro-http? I see it in lit, but not in luarocks.","date":"2015-08-07T19:09:25.926Z","type":"message"}
{"nick":"creationix","message":"coderkevin: I’ve packaged them as git repos","date":"2015-08-07T19:16:29.704Z","type":"message"}
{"nick":"creationix","message":"all submodules in the sample","date":"2015-08-07T19:16:35.232Z","type":"message"}
{"nick":"creationix","message":"https://github.com/creationix/luvweb/tree/master/src/lib","date":"2015-08-07T19:16:49.595Z","type":"message"}
{"nick":"creationix","message":"it’s almost identical to the lit version, but packaged differently for normal lua require","date":"2015-08-07T19:17:15.912Z","type":"message"}
{"nick":"coderkevin","message":"Yeah, I just noticed that, and where you set it up in boot.lua","date":"2015-08-07T19:17:43.073Z","type":"message"}
{"nick":"creationix","message":"you can probably use luarocks modules too, just make sure to add their path in boot.lua in the sample","date":"2015-08-07T19:17:49.509Z","type":"message"}
{"nick":"coderkevin","message":"However, when I run \"lua main.lua\" it doesn't find coro-http.  Is it actually running boot.lua?","date":"2015-08-07T19:18:06.944Z","type":"message"}
{"nick":"creationix","message":"you need to run boot.lua","date":"2015-08-07T19:18:15.762Z","type":"message"}
{"nick":"creationix","message":"it sets calls main","date":"2015-08-07T19:18:24.486Z","type":"message"}
{"nick":"coderkevin","message":"Ah, that's what it is.","date":"2015-08-07T19:18:27.406Z","type":"message"}
{"nick":"creationix","message":"I need to update the README","date":"2015-08-07T19:18:43.296Z","type":"message"}
{"nick":"coderkevin","message":"Sorry, I was going off the README.","date":"2015-08-07T19:18:47.623Z","type":"message"}
{"nick":"creationix","message":"I fixed the “run” target in the makefile, but forgot to update the README","date":"2015-08-07T19:19:35.709Z","type":"message"}
{"nick":"creationix","message":"https://github.com/creationix/luvweb/commit/206d05a2e4f3d2e65afdafbd50d09349a17c8d69","date":"2015-08-07T19:19:37.226Z","type":"message"}
{"nick":"coderkevin","message":"Nice, I think it worked!","date":"2015-08-07T19:19:50.238Z","type":"message"}
{"nick":"coderkevin","message":"So, does this use libuv tcp sockets?","date":"2015-08-07T19:20:47.993Z","type":"message"}
{"nick":"creationix","message":"yep","date":"2015-08-07T19:20:51.783Z","type":"message"}
{"nick":"coderkevin","message":"Nice.","date":"2015-08-07T19:20:57.189Z","type":"message"}
{"nick":"creationix","message":"coro-net wraps libuv tcp and pipe into coroutine friendly read and write functions","date":"2015-08-07T19:21:05.144Z","type":"message"}
{"nick":"creationix","message":"it also uses libuv getaddrinfo to resolve hostnames to ip addresses","date":"2015-08-07T19:21:17.214Z","type":"message"}
{"nick":"coderkevin","message":"Hmm, so you can feel like you're writing synchronous code, right?","date":"2015-08-07T19:21:32.507Z","type":"message"}
{"nick":"creationix","message":"exactly","date":"2015-08-07T19:21:39.193Z","type":"message"}
{"nick":"creationix","message":"to read a stream, you can simply do: for chunk in read do … end","date":"2015-08-07T19:21:59.909Z","type":"message"}
{"nick":"coderkevin","message":"Sort of like async & await in JS, without having to actually call await.","date":"2015-08-07T19:22:03.914Z","type":"message"}
{"nick":"creationix","message":"exactly","date":"2015-08-07T19:22:08.032Z","type":"message"}
{"nick":"coderkevin","message":"That's really cool.","date":"2015-08-07T19:22:28.726Z","type":"message"}
{"nick":"coderkevin","message":"Well, I've got it all running on ubuntu, I guess the next step is getting libuv running on QNX on our HW target.","date":"2015-08-07T19:23:05.284Z","type":"message"}
{"nick":"creationix","message":"so this sample has all the primitives used by weblit, my express-like framework","date":"2015-08-07T19:23:08.363Z","type":"message"}
{"nick":"creationix","message":"right, you’ll need luv, lua-openssl, and bitlib building on your hardware","date":"2015-08-07T19:23:28.271Z","type":"message"}
{"nick":"creationix","message":"bitlib is pretty small, that should be easy","date":"2015-08-07T19:23:38.629Z","type":"message"}
{"nick":"creationix","message":"surely there is openssl already ported","date":"2015-08-07T19:23:49.921Z","type":"message"}
{"nick":"creationix","message":"so libuv is probably the hardest part","date":"2015-08-07T19:23:55.270Z","type":"message"}
{"nick":"coderkevin","message":"Right. I've dug into the guts of libuv a few times over the last few months and have a fairly good feel for it by now, so I'm not too scared about it.","date":"2015-08-07T19:24:23.136Z","type":"message"}
{"nick":"coderkevin","message":"Biggest thing is to use pipes instead of eventfds, and to not use epoll.","date":"2015-08-07T19:24:40.019Z","type":"message"}
{"nick":"creationix","message":"though I’m still unable to build lua-openssl on osx.  luvi does it, but with a huge cmake script and lots of assumptions","date":"2015-08-07T19:24:41.773Z","type":"message"}
{"nick":"coderkevin","message":"Ohm, hmm.","date":"2015-08-07T19:24:58.317Z","type":"message"}
{"nick":"creationix","message":"that’s just because osx comes with a really old system openssl","date":"2015-08-07T19:25:19.846Z","type":"message"}
{"nick":"coderkevin","message":"Well, I personally don't need OSX support for what I'm doing, so don't worry about it on my account.","date":"2015-08-07T19:25:25.247Z","type":"message"}
{"nick":"coderkevin","message":"I wonder if you could use a homebrew install of openssl.","date":"2015-08-07T19:25:46.443Z","type":"message"}
{"nick":"creationix","message":"I just want the sample easy to test.  Many devs looking at this will be on macbooks","date":"2015-08-07T19:25:46.692Z","type":"message"}
{"nick":"coderkevin","message":"Yeah, I've got a macbook I do work on too.","date":"2015-08-07T19:26:01.365Z","type":"message"}
{"nick":"creationix","message":"perhaps.  Luvi just includes openssl in a submodule and includes it statically","date":"2015-08-07T19:26:12.430Z","type":"message"}
{"nick":"coderkevin","message":"Hmm, with all the security patches for openssl, might want to have it dynamic.","date":"2015-08-07T19:26:34.077Z","type":"message"}
{"nick":"coderkevin","message":"Otherwise you'll have to bump version for Luvi every time a new security patch is released for openssl, right?","date":"2015-08-07T19:27:19.976Z","type":"message"}
{"nick":"creationix","message":"we release luvi pretty often","date":"2015-08-07T19:28:42.984Z","type":"message"}
{"nick":"creationix","message":"same day as every openssl release so far","date":"2015-08-07T19:28:49.343Z","type":"message"}
{"nick":"creationix","message":"or libuv release or luajit release","date":"2015-08-07T19:28:58.028Z","type":"message"}
{"nick":"creationix","message":"rphillips: watches the openssl lists for important updates","date":"2015-08-07T19:29:24.165Z","type":"message"}
{"nick":"coderkevin","message":"Yeah, I'm guessing someone has to!","date":"2015-08-07T19:29:38.517Z","type":"message"}
{"nick":"kostco","message":"rphillips: https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/commit/4e5cdb0a7b2a0f1d419983c773d8aaba4c5e0e1e","date":"2015-08-07T20:04:05.464Z","type":"message"}
{"nick":"kostco","message":"I took a stab at the fstab thing, still wip, gonna see what i can do with reducing the load inside base.lua and with async fs fun. But yeah take a look, leave notes","date":"2015-08-07T20:04:05.466Z","type":"message"}
{"nick":"kostco","message":"and yea ill fixer up the pr when i have a good idea of where i wanna go with it","date":"2015-08-07T20:04:43.157Z","type":"message"}
{"nick":"rphillips","message":"i don't think you need to registered platforms anymore","date":"2015-08-07T20:07:54.994Z","type":"message"}
{"nick":"rphillips","message":"the*","date":"2015-08-07T20:07:59.627Z","type":"message"}
{"nick":"rphillips","message":"kostco: that looks good","date":"2015-08-07T20:15:48.622Z","type":"message"}
{"nick":"rphillips","message":"minor comments","date":"2015-08-07T20:15:53.387Z","type":"message"}
{"nick":"creationix","message":"coderkevin: alright, got it building on both ubuntu and osx.  Had to switch to cmake for everything","date":"2015-08-07T21:32:27.608Z","type":"message"}
{"nick":"coderkevin","message":"Oh, that makes sense.","date":"2015-08-07T21:32:47.214Z","type":"message"}
{"nick":"creationix","message":"it builds static openssl on osx and windows, but uses the system openssl on linux","date":"2015-08-07T21:33:05.703Z","type":"message"}
{"nick":"creationix","message":"most everyone wanting to use luv without luvit is probably on linux and doesn’t want static openssl","date":"2015-08-07T21:33:31.396Z","type":"message"}
{"nick":"creationix","message":"just a guess","date":"2015-08-07T21:33:32.845Z","type":"message"}
{"nick":"coderkevin","message":"fair enough, I suppose.  Although we'll be on qnx.  :)","date":"2015-08-07T21:35:25.475Z","type":"message"}
{"nick":"creationix","message":"well, you’ll have custom build scripts anyway :)","date":"2015-08-07T21:36:03.177Z","type":"message"}
{"nick":"creationix","message":"this is just an example of how to use the code","date":"2015-08-07T21:36:14.380Z","type":"message"}
{"nick":"coderkevin","message":"That's true. I've started on libuv today, getting it in our build system. Thanks for the help!","date":"2015-08-07T21:37:58.958Z","type":"message"}
{"nick":"kostco","message":"rphillips: can you take a stab at refactoring passwd.lua?","date":"2015-08-07T22:26:04.682Z","type":"message"}
{"nick":"kostco","message":"I'm curious how you envision these hostinfo sub classes working when it needs to deal with a list","date":"2015-08-07T22:26:04.683Z","type":"message"}
{"nick":"rphillips","message":"let me see","date":"2015-08-07T22:26:53.242Z","type":"message"}
{"nick":"piernov","reason":"Ping timeout: 250 seconds","date":"2015-08-07T22:27:06.359Z","type":"quit"}
{"nick":"piernov","date":"2015-08-07T22:27:28.373Z","type":"join"}
{"nick":"creationix","message":"rphillips: luv port of weblit uses only 1.6mb for a server","date":"2015-08-07T22:31:44.448Z","type":"message"}
{"nick":"rphillips","message":"nice!","date":"2015-08-07T22:31:52.557Z","type":"message"}
{"nick":"creationix","message":"though I am having some strange behaviors with it","date":"2015-08-07T22:31:55.667Z","type":"message"}
{"nick":"rphillips","message":"kostco: async.map","date":"2015-08-07T22:33:38.405Z","type":"message"}
{"nick":"rphillips","message":"i think is the way to go","date":"2015-08-07T22:33:42.025Z","type":"message"}
{"nick":"rphillips","message":"there isn't a lua example","date":"2015-08-07T22:34:50.638Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/caolan/async","date":"2015-08-07T22:35:46.704Z","type":"message"}
{"nick":"rphillips","message":"will have the javascript prototype","date":"2015-08-07T22:35:52.985Z","type":"message"}
{"nick":"kostco","message":"rphillips: yep read that, give it a shot, see if you like what it looks like in passwd at the end, ill see if i cant use it to refactor pam.lua, still unsure though since the hostinfofs class is currently inited with the filepath, lemme see what i can do","date":"2015-08-07T22:48:01.977Z","type":"message"}
{"nick":"creationix","message":"weird,  lua: /home/tim/luvweb/src/lib/coro-net/init.lua:91: EADDRINUSE: address already in use","date":"2015-08-07T22:49:05.774Z","type":"message"}
{"nick":"kostco","message":"rphillips: lua has a async.map function in the async library,","date":"2015-08-07T22:49:07.712Z","type":"message"}
{"nick":"creationix","message":"there is no lua process running and according to netstat nothing has that port","date":"2015-08-07T22:49:19.574Z","type":"message"}
{"nick":"creationix","message":"the first time I ran the app, it didn't complain about a busy port, but nothing could connect either and the process didn't respond to SIGINT","date":"2015-08-07T22:49:47.943Z","type":"message"}
{"nick":"kostco","message":"ive sometimes had things close but block the port, ps aux couldnt find them, had to eventually reboot","date":"2015-08-07T22:49:53.776Z","type":"message"}
{"nick":"kostco","message":"i think killall solved the issue once","date":"2015-08-07T22:50:08.793Z","type":"message"}
{"nick":"creationix","message":"don't know if it's lua's coroutines or what, but luv on lua with coroutines is weird","date":"2015-08-07T22:50:09.086Z","type":"message"}
{"nick":"creationix","message":"yeah, killall doesn't help, there is no lua process","date":"2015-08-07T22:50:33.194Z","type":"message"}
{"nick":"kostco","message":"ive had the eaddrinuse error pop up in node soo many times, i blame libuv","date":"2015-08-07T22:50:45.971Z","type":"message"}
{"nick":"rphillips","message":"kostco: right... it's just not documented... so look at the node doc","date":"2015-08-07T22:50:57.969Z","type":"message"}
{"nick":"kostco","message":"ah that what you meant","date":"2015-08-07T22:51:15.159Z","type":"message"}
{"nick":"creationix","message":"aha!, found a unix socket file named \"0.0.0.0\" in my directory","date":"2015-08-07T22:53:01.237Z","type":"message"}
{"nick":"creationix","message":"it's interpreting my ip address as a file path","date":"2015-08-07T22:53:12.303Z","type":"message"}
{"nick":"creationix","message":"which explains why the tcp client and netstat never saw it, but the second run thought the server was still running, even after a reboot","date":"2015-08-07T22:54:04.823Z","type":"message"}
{"nick":"creationix","message":"those files are rather persistent sometimes","date":"2015-08-07T22:54:11.086Z","type":"message"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-08-07T22:56:06.187Z","type":"quit"}
{"nick":"creationix","message":"it works great now!","date":"2015-08-07T23:01:34.866Z","type":"message"}
{"nick":"creationix","message":"I successfully ported weblit and all it’s dependencies all the way down to run on lua 5.2","date":"2015-08-07T23:01:56.102Z","type":"message"}
{"nick":"kostco","message":"bleh i cant figure out how to make this pam.lua thing work with the new conventions, ill circle back to it","date":"2015-08-07T23:07:41.791Z","type":"message"}
{"nick":"creationix","message":"coderkevin: I’m all done with the sample","date":"2015-08-07T23:14:03.475Z","type":"message"}
{"nick":"creationix","message":"it has two sample mains.  One using coro-http directly and one using the higher-level weblit framework","date":"2015-08-07T23:14:17.090Z","type":"message"}
{"nick":"creationix","message":"weblit has websockets that should work out of the box","date":"2015-08-07T23:14:30.939Z","type":"message"}
