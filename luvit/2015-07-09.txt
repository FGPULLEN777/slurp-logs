{"nick":"rje","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/pull/770","date":"2015-07-09T00:01:16.940Z","type":"message"}
{"nick":"DarkGod","reason":"Ping timeout: 256 seconds","date":"2015-07-09T00:33:48.314Z","type":"quit"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-07-09T01:22:21.983Z","type":"quit"}
{"nick":"dan336","date":"2015-07-09T03:44:12.442Z","type":"join"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-07-09T04:26:55.973Z","type":"quit"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-07-09T04:52:30.257Z","type":"quit"}
{"nick":"sousoux","message":"creationix: that is the one","date":"2015-07-09T05:39:14.798Z","type":"message"}
{"nick":"dan336","date":"2015-07-09T05:44:38.454Z","type":"join"}
{"nick":"dan336","reason":"Client Quit","date":"2015-07-09T05:46:12.574Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-07-09T06:30:46.427Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 250 seconds","date":"2015-07-09T06:54:59.406Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-07-09T07:14:28.453Z","type":"join"}
{"nick":"hdms","date":"2015-07-09T07:38:49.214Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 246 seconds","date":"2015-07-09T08:36:29.967Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-07-09T08:52:11.356Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 256 seconds","date":"2015-07-09T09:44:52.323Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-07-09T09:47:51.557Z","type":"join"}
{"nick":"sousoux","reason":"Ping timeout: 250 seconds","date":"2015-07-09T11:01:59.372Z","type":"quit"}
{"nick":"sousoux","date":"2015-07-09T11:04:35.417Z","type":"join"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-07-09T13:08:13.589Z","type":"quit"}
{"nick":"rphillips","message":"sousoux: https://github.com/luvit/luvit/pull/769","date":"2015-07-09T13:28:45.177Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T13:29:53.900Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2328 (fixes/tls_connection_epipe - d3784d1 : Ryan Phillips): The build passed.","date":"2015-07-09T13:29:54.847Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/commit/d3784d163e05","date":"2015-07-09T13:29:55.038Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/70222440","date":"2015-07-09T13:29:55.038Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T13:29:55.038Z","type":"part"}
{"nick":"rphillips","message":"creationix: around?","date":"2015-07-09T13:31:53.004Z","type":"message"}
{"nick":"dan336","date":"2015-07-09T13:35:17.405Z","type":"join"}
{"nick":"travis-ci","date":"2015-07-09T13:39:02.576Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2330 (master - 66bed9f : Ryan Phillips): The build passed.","date":"2015-07-09T13:39:03.487Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/acfb1662aefa...66bed9f59b08","date":"2015-07-09T13:39:03.677Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/70223724","date":"2015-07-09T13:39:03.678Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T13:39:03.678Z","type":"part"}
{"nick":"travis-ci","date":"2015-07-09T13:41:50.272Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2332 (2.2.7 - 0313bbe : Ryan Phillips): The build passed.","date":"2015-07-09T13:41:51.229Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/2.2.7","date":"2015-07-09T13:41:51.418Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/70224140","date":"2015-07-09T13:41:51.418Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T13:41:51.418Z","type":"part"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-07-09T13:44:40.507Z","type":"quit"}
{"nick":"hdms","date":"2015-07-09T14:02:31.236Z","type":"join"}
{"nick":"rphillips","message":"https://github.com/luvit/luvit/pull/770","date":"2015-07-09T14:11:03.175Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T14:12:09.010Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2333 (fixes/change_tmp_directory - e3671fc : Ryan Phillips): The build passed.","date":"2015-07-09T14:12:10.032Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/commit/e3671fcdda5d","date":"2015-07-09T14:12:10.221Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/70228920","date":"2015-07-09T14:12:10.221Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T14:12:10.221Z","type":"part"}
{"nick":"rphillips","message":"https://github.com/luvit/luvi/pull/105","date":"2015-07-09T14:17:29.187Z","type":"message"}
{"nick":"sousoux","reason":"Ping timeout: 265 seconds","date":"2015-07-09T14:18:42.428Z","type":"quit"}
{"nick":"sousoux","date":"2015-07-09T14:19:03.467Z","type":"join"}
{"nick":"travis-ci","date":"2015-07-09T14:19:11.382Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvi#626 (openssl/bump_to_1.0.2_d - ad6e7dc : Ryan Phillips): The build passed.","date":"2015-07-09T14:19:12.371Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvi/commit/ad6e7dca6250","date":"2015-07-09T14:19:12.560Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvi/builds/70229727","date":"2015-07-09T14:19:12.560Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T14:19:12.560Z","type":"part"}
{"nick":"creationix","message":"I wonder how I added the \"in progress\" label 9 minutes ago as github says","date":"2015-07-09T14:20:54.218Z","type":"message"}
{"nick":"creationix","message":"All I did was open the link from here just now","date":"2015-07-09T14:21:09.722Z","type":"message"}
{"nick":"creationix","message":"https://github.com/luvit/luvit/pull/770","date":"2015-07-09T14:21:14.835Z","type":"message"}
{"nick":"rphillips","message":"may have been waffle","date":"2015-07-09T14:22:11.696Z","type":"message"}
{"nick":"creationix","message":"I'm not on waffle","date":"2015-07-09T14:22:58.132Z","type":"message"}
{"nick":"rphillips","message":"oh good point","date":"2015-07-09T14:23:05.243Z","type":"message"}
{"nick":"rphillips","message":"on the /tmp","date":"2015-07-09T14:23:09.709Z","type":"message"}
{"nick":"rphillips","message":"so, we got a bug report that /tmp is sometimes setup for noexec","date":"2015-07-09T14:23:34.436Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T14:23:42.388Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2335 (master - 046726e : Ryan Phillips): The build passed.","date":"2015-07-09T14:23:43.370Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/0313bbef8614...046726e4d94d","date":"2015-07-09T14:23:43.563Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/70230444","date":"2015-07-09T14:23:43.564Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T14:23:43.564Z","type":"part"}
{"nick":"creationix","message":"rphillips: in most cases TMP will be set","date":"2015-07-09T14:23:53.532Z","type":"message"}
{"nick":"creationix","message":"but yeah, noexec /tmp is a problem","date":"2015-07-09T14:24:02.179Z","type":"message"}
{"nick":"rphillips","message":"reverted it","date":"2015-07-09T14:24:40.206Z","type":"message"}
{"nick":"rphillips","message":"maybe, I should just set TMPDIR in our init scripts","date":"2015-07-09T14:24:51.123Z","type":"message"}
{"nick":"creationix","message":"hmm, maybe not.  On my ubuntu there is no TMP or TMPDIR","date":"2015-07-09T14:24:58.192Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T14:25:32.491Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2336 (revert-770-fixes/change_tmp_directory - f20a043 : Ryan Phillips): The build passed.","date":"2015-07-09T14:25:33.449Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/commit/f20a043661f5","date":"2015-07-09T14:25:33.637Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/70230696","date":"2015-07-09T14:25:33.638Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T14:25:33.638Z","type":"part"}
{"nick":"travis-ci","date":"2015-07-09T14:25:51.416Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2338 (master - 2abfb64 : Ryan Phillips): The build passed.","date":"2015-07-09T14:25:52.193Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/046726e4d94d...2abfb64b8acb","date":"2015-07-09T14:25:52.382Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/70230707","date":"2015-07-09T14:25:52.382Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T14:25:52.383Z","type":"part"}
{"nick":"travis-ci","date":"2015-07-09T14:26:01.846Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvi#628 (master - e6d3440 : Ryan Phillips): The build passed.","date":"2015-07-09T14:26:02.829Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvi/compare/c3b1b3fce883...e6d344030b06","date":"2015-07-09T14:26:03.020Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvi/builds/70230463","date":"2015-07-09T14:26:03.021Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T14:26:03.021Z","type":"part"}
{"nick":"rphillips","message":"i'm thinking setting TMPDIR in the init script might be the best way","date":"2015-07-09T14:27:47.143Z","type":"message"}
{"nick":"jetl","reason":"Quit: Leaving","date":"2015-07-09T14:28:44.999Z","type":"quit"}
{"nick":"dan336","date":"2015-07-09T14:29:53.451Z","type":"join"}
{"nick":"tte","date":"2015-07-09T14:30:11.917Z","type":"join"}
{"nick":"sousoux","reason":"Ping timeout: 250 seconds","date":"2015-07-09T14:40:23.376Z","type":"quit"}
{"nick":"sousoux","date":"2015-07-09T14:41:14.004Z","type":"join"}
{"nick":"sousoux","reason":"Ping timeout: 252 seconds","date":"2015-07-09T14:49:42.039Z","type":"quit"}
{"nick":"rphillips","message":"creationix: was there a fix with the command line parameters in luvi?","date":"2015-07-09T14:50:09.039Z","type":"message"}
{"nick":"sousoux","date":"2015-07-09T14:50:30.192Z","type":"join"}
{"nick":"rphillips","message":"09:48:58|        seanc | On 2.0.2 I sometimes get the error \"Starting /usr/bin/rackspace-monitoring-agent: ...t2-rhel61-x86_64/build/src/luvi-release/src/lua/init.lua:576: Unknown flag: -D\"","date":"2015-07-09T14:51:01.184Z","type":"message"}
{"nick":"sousoux","reason":"Ping timeout: 246 seconds","date":"2015-07-09T14:54:47.192Z","type":"quit"}
{"nick":"sousoux","date":"2015-07-09T14:55:34.919Z","type":"join"}
{"nick":"creationix","message":"rphillips: I changed it to accept a single path after -- if there were none before","date":"2015-07-09T14:59:30.992Z","type":"message"}
{"nick":"creationix","message":"so `luvi -- /path/to/app a b c` is the same as `luvi /path/to/app -- a b c`","date":"2015-07-09T14:59:53.782Z","type":"message"}
{"nick":"creationix","message":"that way you can put `#!/usr/local/bin/luvi --` in the unix shebang","date":"2015-07-09T15:00:23.655Z","type":"message"}
{"nick":"creationix","message":"unix will add the path to self (which will be a zip file appended to the shebang line)","date":"2015-07-09T15:00:40.471Z","type":"message"}
{"nick":"creationix","message":"though all that logic is completely ignored if luvi has a zip attached","date":"2015-07-09T15:01:31.577Z","type":"message"}
{"nick":"creationix","message":"which is the case for the agent","date":"2015-07-09T15:01:55.641Z","type":"message"}
{"nick":"rphillips","message":"cool","date":"2015-07-09T15:04:39.417Z","type":"message"}
{"nick":"sousoux","reason":"Ping timeout: 246 seconds","date":"2015-07-09T15:08:08.938Z","type":"quit"}
{"nick":"creationix","message":"rphillips: so what do you think about the stack trace issue sousoux is having?","date":"2015-07-09T15:08:39.026Z","type":"message"}
{"nick":"sousoux","date":"2015-07-09T15:08:44.915Z","type":"join"}
{"nick":"creationix","message":"I don't want to just change it to an xpcall in luv, that has some pretty serious preformance implications","date":"2015-07-09T15:08:54.099Z","type":"message"}
{"nick":"creationix","message":"lua_pcall can't use virtual indexes for the error handler.  So I'd have to look up debug.traceback and put it on the stack every time","date":"2015-07-09T15:09:22.411Z","type":"message"}
{"nick":"rphillips","message":"mm","date":"2015-07-09T15:09:48.573Z","type":"message"}
{"nick":"rphillips","message":"hmm","date":"2015-07-09T15:09:50.792Z","type":"message"}
{"nick":"creationix","message":"maybe \"pretty serious\" is overstating it, but it is significant","date":"2015-07-09T15:09:56.929Z","type":"message"}
{"nick":"rphillips","message":"perhaps it has something to do with the thread module?","date":"2015-07-09T15:10:00.010Z","type":"message"}
{"nick":"creationix","message":"he said he's hitting the fatal error handler in lhandle.c","date":"2015-07-09T15:10:16.490Z","type":"message"}
{"nick":"creationix","message":"in old luvit I had a way that you could register a global event source handler","date":"2015-07-09T15:10:38.702Z","type":"message"}
{"nick":"creationix","message":"function event_source(fn, type) ... end","date":"2015-07-09T15:11:01.245Z","type":"message"}
{"nick":"creationix","message":"that can be used for all sorts of useful things like wrappnig all new stacks with xpcall, implementing domains, or long-stack traces across events.","date":"2015-07-09T15:11:36.830Z","type":"message"}
{"nick":"creationix","message":"basically like a simpler, but more powerful version of node domains","date":"2015-07-09T15:11:45.660Z","type":"message"}
{"nick":"creationix","message":"it too has performance implications though","date":"2015-07-09T15:11:58.854Z","type":"message"}
{"nick":"creationix","message":"I have to check for this user-set function and call it if it exists","date":"2015-07-09T15:12:12.885Z","type":"message"}
{"nick":"creationix","message":"and we need a place per luv loop to store it","date":"2015-07-09T15:12:31.205Z","type":"message"}
{"nick":"sousoux","reason":"Ping timeout: 252 seconds","date":"2015-07-09T15:12:58.843Z","type":"quit"}
{"nick":"sousoux","date":"2015-07-09T15:13:36.907Z","type":"join"}
{"nick":"rphillips","message":"hmm /var/run isn't a good place either","date":"2015-07-09T15:28:29.129Z","type":"message"}
{"nick":"rphillips","message":"/var/lib seems to work","date":"2015-07-09T15:29:32.364Z","type":"message"}
{"nick":"sousoux","message":"creationix: couldn't you have a debug mode/switch in which xpcall is used?","date":"2015-07-09T15:32:44.723Z","type":"message"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 256 seconds","date":"2015-07-09T15:33:40.276Z","type":"quit"}
{"nick":"creationix","message":"sousoux: are you using the luv APIs directly or through luvit?","date":"2015-07-09T15:33:51.845Z","type":"message"}
{"nick":"creationix","message":"my plan was for luvit to wrap the event sources with xpcall in lua so that it's user friendly and to keep luv as fast as possible","date":"2015-07-09T15:34:21.784Z","type":"message"}
{"nick":"sousoux","message":"creationix: a mix. Sometimes via luvit, sometimes directly.","date":"2015-07-09T15:41:24.074Z","type":"message"}
{"nick":"sousoux","message":"depends if they are exposed in luvit and in some cases (custom GPIO handling for example) I actually patch luv and libuv since I need POLLPRI","date":"2015-07-09T15:42:29.694Z","type":"message"}
{"nick":"creationix","message":"Perhaps I'm worrying too much about the performance impact","date":"2015-07-09T15:43:03.883Z","type":"message"}
{"nick":"sousoux","message":"if xpcall really that much slower. I don't really understand why it should be","date":"2015-07-09T15:43:06.888Z","type":"message"}
{"nick":"sousoux","message":"is","date":"2015-07-09T15:43:09.432Z","type":"message"}
{"nick":"creationix","message":"there is no xpcall in the C side","date":"2015-07-09T15:43:24.739Z","type":"message"}
{"nick":"creationix","message":"just lua_pcall with an optional error handler","date":"2015-07-09T15:43:30.590Z","type":"message"}
{"nick":"creationix","message":"but problem is the error handler isn't a C function pointer, it's an index on the lua stack","date":"2015-07-09T15:43:44.445Z","type":"message"}
{"nick":"creationix","message":"so I have to store something on the stack","date":"2015-07-09T15:43:53.172Z","type":"message"}
{"nick":"creationix","message":"but I think I can just quicky store a c function which then does the slow lookup for debug.traceback *if* an error happens","date":"2015-07-09T15:44:15.278Z","type":"message"}
{"nick":"creationix","message":"I don't mind slowing down the error case, it's a fatal error anyway","date":"2015-07-09T15:44:26.559Z","type":"message"}
{"nick":"creationix","message":"that's basically how lua.exe does it","date":"2015-07-09T15:44:49.844Z","type":"message"}
{"nick":"creationix","message":"I'll add that","date":"2015-07-09T15:45:17.054Z","type":"message"}
{"nick":"sousoux","message":"OK thanks. yes I just looked at lua_pcall. I guess that does add one stack push per call but that should be pretty fast I would guess","date":"2015-07-09T15:46:25.758Z","type":"message"}
{"nick":"creationix","message":"right, what I didn't want to do was the slow lookup for the global `debug.traceback` on every call","date":"2015-07-09T15:47:01.023Z","type":"message"}
{"nick":"creationix","message":"I'll just wrap that in a function","date":"2015-07-09T15:47:06.892Z","type":"message"}
{"nick":"sousoux","message":"You could use luaL_traceback","date":"2015-07-09T15:47:39.624Z","type":"message"}
{"nick":"sousoux","message":"Downside is that you can't override it","date":"2015-07-09T15:48:03.271Z","type":"message"}
{"nick":"sousoux","message":"But I agree that the lookup is not important once you have an error","date":"2015-07-09T15:48:34.004Z","type":"message"}
{"nick":"creationix","message":"hmm, so it's not too simple, but I think it will do","date":"2015-07-09T15:49:16.147Z","type":"message"}
{"nick":"creationix","message":"I need to have the traceback function above the function to call and it's args","date":"2015-07-09T15:49:32.642Z","type":"message"}
{"nick":"creationix","message":"but I can calculate that and insert it","date":"2015-07-09T15:49:51.364Z","type":"message"}
{"nick":"creationix","message":"sousoux: rphillips: https://github.com/luvit/luv/commit/9c4f5f2ba2babf053a7e524503d41d8d77df9176","date":"2015-07-09T15:56:40.740Z","type":"message"}
{"nick":"rphillips","message":"wow. nice fix","date":"2015-07-09T15:57:24.928Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T15:58:59.506Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luv#375 (master - 9c4f5f2 : Tim Caswell): The build passed.","date":"2015-07-09T15:59:00.528Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luv/compare/1af5a36ebb5d...9c4f5f2ba2ba","date":"2015-07-09T15:59:00.717Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luv/builds/70245622","date":"2015-07-09T15:59:00.717Z","type":"message"}
{"nick":"travis-ci","date":"2015-07-09T15:59:00.717Z","type":"part"}
{"nick":"creationix","message":"it is a slight performance hit for something that only helps when the process has a fatal crash","date":"2015-07-09T15:59:04.695Z","type":"message"}
{"nick":"creationix","message":"but it should help debugging a lot in the case of that fatal crash","date":"2015-07-09T15:59:16.001Z","type":"message"}
