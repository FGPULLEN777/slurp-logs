{"nick":"rgrinberg","date":"2016-07-29T00:33:06.405Z","type":"join"}
{"nick":"rgrinberg","reason":"Quit: WeeChat 1.5","date":"2016-07-29T00:43:54.722Z","type":"quit"}
{"nick":"rgrinberg","date":"2016-07-29T00:44:15.443Z","type":"join"}
{"nick":"DarkGod","reason":"Quit: Leaving","date":"2016-07-29T01:55:37.143Z","type":"quit"}
{"nick":"rgrinberg","reason":"Ping timeout: 258 seconds","date":"2016-07-29T02:49:10.269Z","type":"quit"}
{"nick":"rgrinberg","date":"2016-07-29T03:03:56.585Z","type":"join"}
{"nick":"a__","reason":"Ping timeout: 258 seconds","date":"2016-07-29T04:00:28.257Z","type":"quit"}
{"nick":"a__","date":"2016-07-29T04:03:34.067Z","type":"join"}
{"nick":"rgrinberg","reason":"Ping timeout: 240 seconds","date":"2016-07-29T04:06:52.343Z","type":"quit"}
{"nick":"rphillips","message":"creationix: https://github.com/LuaJIT/LuaJIT/commit/c98660c8c3921e43029625e51166c9d273ad09df","date":"2016-07-29T05:33:12.249Z","type":"message"}
{"nick":"rphillips","message":"hmm. someone wrote nm on that comment","date":"2016-07-29T05:33:28.515Z","type":"message"}
{"nick":"SkyRocknRoll","date":"2016-07-29T05:47:12.479Z","type":"join"}
{"nick":"DarkGod","date":"2016-07-29T07:34:30.483Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 252 seconds","date":"2016-07-29T07:54:58.560Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2016-07-29T08:12:11.267Z","type":"join"}
{"nick":"rgrinberg","date":"2016-07-29T12:25:08.103Z","type":"join"}
{"nick":"devurandom","reason":"Remote host closed the connection","date":"2016-07-29T12:41:05.424Z","type":"quit"}
{"nick":"devurandom","date":"2016-07-29T12:43:04.705Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Quit: Ex-Chat","date":"2016-07-29T12:52:17.549Z","type":"quit"}
{"nick":"rendar","date":"2016-07-29T13:27:17.935Z","type":"join"}
{"nick":"creationix","message":"rphillips, cool mraleph wants to help","date":"2016-07-29T14:46:12.279Z","type":"message"}
{"nick":"creationix","message":"I wonder how to get -jdump from the agent","date":"2016-07-29T14:46:25.552Z","type":"message"}
{"nick":"rphillips","message":"same guy on the mailing list... i posted the bug on their mailing list","date":"2016-07-29T14:50:32.011Z","type":"message"}
{"nick":"creationix","message":"he's one of the original V8 authors/designers and knows me","date":"2016-07-29T14:51:09.471Z","type":"message"}
{"nick":"creationix","message":"(mraleph that is)","date":"2016-07-29T14:51:20.635Z","type":"message"}
{"nick":"creationix","message":"so the source to jdump is at https://github.com/LuaJIT/LuaJIT/blob/7e05355a08255f508d334eded96095e0bde06e2e/src/jit/dump.lua","date":"2016-07-29T14:51:49.967Z","type":"message"}
{"nick":"creationix","message":"can't require it as jit.dump though","date":"2016-07-29T14:52:13.159Z","type":"message"}
{"nick":"creationix","message":"If we can run the agent using luajit instead of luvi we could use the CLI arg, but I wonder how tricky that is","date":"2016-07-29T14:53:41.037Z","type":"message"}
{"nick":"creationix","message":"not all the agent modules were converted to the new lit style that works with plain lua right?","date":"2016-07-29T14:54:05.191Z","type":"message"}
{"nick":"rphillips","message":"true","date":"2016-07-29T14:54:56.415Z","type":"message"}
{"nick":"creationix","message":"so I guess worst case is copy-paste this module into the agent and call it","date":"2016-07-29T14:55:17.407Z","type":"message"}
{"nick":"creationix","message":"the modules it depends on seem to be available in luvit","date":"2016-07-29T14:55:31.597Z","type":"message"}
{"nick":"rphillips","message":"i can try that shortly","date":"2016-07-29T14:56:20.298Z","type":"message"}
{"nick":"rgrinberg","reason":"Ping timeout: 244 seconds","date":"2016-07-29T15:17:25.017Z","type":"quit"}
{"nick":"creationix","message":"nevermind, you can require jit.dump in luajit, it should work in luvit","date":"2016-07-29T15:18:54.507Z","type":"message"}
{"nick":"creationix","message":"rphillips: so just require('jit.dump').start() at the start of the agent","date":"2016-07-29T15:19:45.512Z","type":"message"}
{"nick":"rphillips","message":"k","date":"2016-07-29T15:20:02.957Z","type":"message"}
{"nick":"rphillips","message":"hmm. no such package","date":"2016-07-29T15:21:24.627Z","type":"message"}
{"nick":"creationix","message":"I get it sometimes","date":"2016-07-29T15:21:42.521Z","type":"message"}
{"nick":"creationix","message":"nevermind, that was luajit, not luvit","date":"2016-07-29T15:22:09.967Z","type":"message"}
{"nick":"creationix","message":"I wonder why luvit doesn't have it","date":"2016-07-29T15:22:18.053Z","type":"message"}
{"nick":"cat5e","message":"hi","date":"2016-07-29T15:28:21.656Z","type":"message"}
{"nick":"cat5e","message":"creationix, do you fiddle with require?","date":"2016-07-29T15:28:33.089Z","type":"message"}
{"nick":"cat5e","message":"try using native require instead","date":"2016-07-29T15:28:54.892Z","type":"message"}
{"nick":"creationix","message":"rphillips: ok, so copy luajit/src/jit/dump.lua to luvit/deps/jit-dump.lua and you can require it as `jit-dump`","date":"2016-07-29T15:29:12.016Z","type":"message"}
{"nick":"creationix","message":"cat5e luvit has it's own require","date":"2016-07-29T15:29:23.398Z","type":"message"}
{"nick":"cat5e","message":"creationix, yeah, use native require","date":"2016-07-29T15:29:33.767Z","type":"message"}
{"nick":"creationix","message":"but if you build your own luvi or luv based app you don't have to","date":"2016-07-29T15:29:37.019Z","type":"message"}
{"nick":"cat5e","message":"and don't do that copy thing","date":"2016-07-29T15:29:47.342Z","type":"message"}
{"nick":"cat5e","message":"https://github.com/LuaJIT/LuaJIT/blob/7e05355a08255f508d334eded96095e0bde06e2e/src/jit/dump.lua#L59-L60","date":"2016-07-29T15:30:25.428Z","type":"message"}
{"nick":"creationix","message":"cat5e yes, it depends on other modules, that works","date":"2016-07-29T15:30:59.992Z","type":"message"}
{"nick":"cat5e","message":"add a thing if startswith 'jit.' then use native require","date":"2016-07-29T15:32:48.216Z","type":"message"}
{"nick":"cat5e","message":"idk","date":"2016-07-29T15:32:53.600Z","type":"message"}
{"nick":"cat5e","message":".-.","date":"2016-07-29T15:33:03.068Z","type":"message"}
{"nick":"cat5e","message":"I mean","date":"2016-07-29T15:33:10.590Z","type":"message"}
{"nick":"cat5e","message":"wait","date":"2016-07-29T15:33:20.052Z","type":"message"}
{"nick":"cat5e","message":"creationix, these aren't stored inside the luajit binary IIRC","date":"2016-07-29T15:33:29.820Z","type":"message"}
{"nick":"cat5e","message":"so you do need to copy them over","date":"2016-07-29T15:33:48.055Z","type":"message"}
{"nick":"cat5e","message":"nvm :/","date":"2016-07-29T15:33:49.454Z","type":"message"}
{"nick":"rphillips","message":" No such module 'jit.vmdef' in 'bundle:/deps/jit-dump.lua'","date":"2016-07-29T15:34:01.561Z","type":"message"}
{"nick":"cat5e","message":"but you need to keep luajit version in mind","date":"2016-07-29T15:34:13.688Z","type":"message"}
{"nick":"cat5e","message":"so add the copy as part of the build process","date":"2016-07-29T15:34:21.246Z","type":"message"}
{"nick":"creationix","message":"after adding jit-dump.lua to luvit's deps, this works:","date":"2016-07-29T15:34:55.074Z","type":"message"}
{"nick":"creationix","message":"luvi . -- -e 'require(\"jit-dump\").start(\"A\") for i =1,1000 do b = i end'","date":"2016-07-29T15:34:56.121Z","type":"message"}
{"nick":"creationix","message":"I get nice colored trace output","date":"2016-07-29T15:35:04.663Z","type":"message"}
{"nick":"cat5e","message":"creationix, are you using standard luvi or system-luajit luvi?","date":"2016-07-29T15:35:35.592Z","type":"message"}
{"nick":"creationix","message":"cat5e luvi embeds a static copy of luajit","date":"2016-07-29T15:35:53.547Z","type":"message"}
{"nick":"cat5e","message":"there's a build flag to use system luajit IIRC","date":"2016-07-29T15:36:06.440Z","type":"message"}
{"nick":"creationix","message":"from the luv submodule","date":"2016-07-29T15:36:10.125Z","type":"message"}
{"nick":"creationix","message":"rphillips strange","date":"2016-07-29T15:36:37.933Z","type":"message"}
{"nick":"creationix","message":"rphillips, so build racker/luvi with regular-asm and run rma with it?","date":"2016-07-29T15:37:25.040Z","type":"message"}
{"nick":"rphillips","message":"luvit luvit -e \"require('./deps/jit-dump')\"","date":"2016-07-29T15:39:22.975Z","type":"message"}
{"nick":"rphillips","message":"errors","date":"2016-07-29T15:39:30.945Z","type":"message"}
{"nick":"rphillips","message":"brb","date":"2016-07-29T15:39:33.036Z","type":"message"}
{"nick":"cat5e","message":"so, I tend to be a good debugger","date":"2016-07-29T15:41:09.625Z","type":"message"}
{"nick":"cat5e","message":"but we're talking about at least 3 completely separate systems (2 local, 1 build system) and a bunch of different build flags","date":"2016-07-29T15:41:46.054Z","type":"message"}
{"nick":"rgrinberg","date":"2016-07-29T15:42:07.578Z","type":"join"}
{"nick":"cat5e","message":"creationix, can you add the build flags to luvi -v output and mark that for the next luvi release?","date":"2016-07-29T15:42:27.700Z","type":"message"}
{"nick":"cat5e","message":"like how ffmpeg -v lists build flags (or am I thinking of a different program... idk)","date":"2016-07-29T15:42:51.360Z","type":"message"}
{"nick":"creationix","message":"rphillips I got it tracing in the agent","date":"2016-07-29T15:43:53.418Z","type":"message"}
{"nick":"creationix","message":"hmm, all tests pass with tracing on","date":"2016-07-29T15:47:41.513Z","type":"message"}
{"nick":"creationix","message":"oh, I'm on an old version of virgo-agent-toolkit/luvi that doesn't have the new commits yet","date":"2016-07-29T15:48:57.744Z","type":"message"}
{"nick":"creationix","message":"updating to latest luv...","date":"2016-07-29T15:49:39.510Z","type":"message"}
{"nick":"creationix","message":"bingo, reproduced bug","date":"2016-07-29T15:50:33.988Z","type":"message"}
{"nick":"rphillips","message":"nice","date":"2016-07-29T15:53:16.965Z","type":"message"}
{"nick":"creationix","message":"now I'm trying to run just that one test to narrow it down","date":"2016-07-29T15:53:34.835Z","type":"message"}
{"nick":"creationix","message":"nevermind, test-check is the first one run it seems, now to uncommit the commit in question and get a pair of dumps to compare","date":"2016-07-29T15:55:31.758Z","type":"message"}
