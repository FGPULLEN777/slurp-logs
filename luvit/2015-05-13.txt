{"nick":"rphillips","message":"rje I bet the make.bat needs to be tweaked to pass that msvs options","date":"2015-05-13T00:05:05.834Z","type":"message"}
{"nick":"rphillips","message":"It's in the luvi project","date":"2015-05-13T00:05:25.952Z","type":"message"}
{"nick":"rje","message":"rphillips, what is on the luvi project?","date":"2015-05-13T00:06:12.970Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/luvit/luvi/blob/master/make.bat#L10","date":"2015-05-13T00:07:14.009Z","type":"message"}
{"nick":"rje","message":"that looks right","date":"2015-05-13T00:08:32.591Z","type":"message"}
{"nick":"hdms","date":"2015-05-13T00:10:56.245Z","type":"join"}
{"nick":"rphillips","message":"The -G option should be in the agents make.bat file as well","date":"2015-05-13T00:11:18.159Z","type":"message"}
{"nick":"rphillips","message":"Then program files should be used","date":"2015-05-13T00:11:22.800Z","type":"message"}
{"nick":"rje","message":"i'll take that bet","date":"2015-05-13T00:12:23.185Z","type":"message"}
{"nick":"rje","message":"seems odd though, as we shouldn't need the toolchain to build the msi","date":"2015-05-13T00:13:07.985Z","type":"message"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-05-13T00:26:44.894Z","type":"quit"}
{"nick":"a_le_","date":"2015-05-13T00:35:16.507Z","type":"join"}
{"nick":"a_le","reason":"Ping timeout: 272 seconds","date":"2015-05-13T00:38:44.303Z","type":"quit"}
{"nick":"rphillips","message":"I bet the root gets set from that. We can probably override it","date":"2015-05-13T00:45:08.434Z","type":"message"}
{"nick":"a_le_","reason":"Ping timeout: 264 seconds","date":"2015-05-13T00:59:07.495Z","type":"quit"}
{"nick":"Akagi201","date":"2015-05-13T01:10:31.099Z","type":"join"}
{"nick":"kazupon","date":"2015-05-13T01:11:13.333Z","type":"join"}
{"nick":"Akagi201","date":"2015-05-13T02:03:30.865Z","type":"quit"}
{"nick":"a_le","date":"2015-05-13T02:06:28.319Z","type":"join"}
{"nick":"a_le","reason":"Read error: Connection reset by peer","date":"2015-05-13T02:07:35.664Z","type":"quit"}
{"nick":"a_le_","date":"2015-05-13T02:07:38.594Z","type":"join"}
{"nick":"travis-ci","date":"2015-05-13T02:17:54.884Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvi#524 (master - fe77ec5 : Tim Caswell): The build passed.","date":"2015-05-13T02:17:55.851Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvi/compare/0e1c98459bac...fe77ec500ba0","date":"2015-05-13T02:17:56.046Z","type":"message"}
{"nick":"travis-ci","message":"Build details : http://travis-ci.org/luvit/luvi/builds/62332995","date":"2015-05-13T02:17:56.046Z","type":"message"}
{"nick":"travis-ci","date":"2015-05-13T02:17:56.047Z","type":"part"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T02:24:14.477Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T02:29:22.754Z","type":"join"}
{"nick":"a_le_","reason":"Ping timeout: 264 seconds","date":"2015-05-13T02:48:19.601Z","type":"quit"}
{"nick":"a_le","date":"2015-05-13T02:52:12.260Z","type":"join"}
{"nick":"rphillips","message":"http://cmake.3232098.n2.nabble.com/CPack-installation-directory-td7586870.html","date":"2015-05-13T03:21:43.756Z","type":"message"}
{"nick":"rphillips","message":"rje: ^","date":"2015-05-13T03:21:47.224Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T03:36:14.622Z","type":"quit"}
{"nick":"rphillips","message":"http://www.cmake.org/pipermail/cmake/2013-October/056200.html","date":"2015-05-13T03:41:37.390Z","type":"message"}
{"nick":"rphillips","message":"set(CPACK_WIX_SIZEOF_VOID_P 8)","date":"2015-05-13T03:41:51.072Z","type":"message"}
{"nick":"rphillips","message":"this does work","date":"2015-05-13T03:41:53.949Z","type":"message"}
{"nick":"rphillips","message":"it's lame, but works","date":"2015-05-13T03:42:17.802Z","type":"message"}
{"nick":"kazupon","date":"2015-05-13T04:40:21.116Z","type":"join"}
{"nick":"tet","date":"2015-05-13T05:16:51.754Z","type":"join"}
{"nick":"endou_","date":"2015-05-13T05:19:02.810Z","type":"join"}
{"nick":"jetl","reason":"*.net *.split","date":"2015-05-13T05:26:56.740Z","type":"quit"}
{"nick":"endou","reason":"*.net *.split","date":"2015-05-13T05:26:57.993Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-05-13T05:31:44.291Z","type":"join"}
{"nick":"SouL_|_","reason":"Ping timeout: 272 seconds","date":"2015-05-13T05:42:52.916Z","type":"quit"}
{"nick":"SouL_|_","date":"2015-05-13T06:16:47.257Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T06:50:49.436Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T06:51:22.954Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T07:33:36.410Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T07:33:43.456Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T08:34:22.871Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T08:34:57.980Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T08:47:08.190Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T08:47:15.371Z","type":"join"}
{"nick":"SouL_|__","date":"2015-05-13T09:41:00.255Z","type":"join"}
{"nick":"SouL_|_","reason":"Ping timeout: 256 seconds","date":"2015-05-13T09:41:14.298Z","type":"quit"}
{"nick":"StepetS","date":"2015-05-13T09:47:18.128Z","type":"join"}
{"nick":"StepetS","message":"Hello, I have question about (unmaintained?) luvit-redis project. I found this project depends on some headers which I found only here https://github.com/parisfuja/RR-source/tree/master/libraries/luvit . I suppose this is luvit1 copy. So if i use headers from this repo would result be compatible with current version of luvit?","date":"2015-05-13T09:54:46.422Z","type":"message"}
{"nick":"ldub_","date":"2015-05-13T10:17:02.006Z","type":"join"}
{"nick":"ldub_","message":"hello you all","date":"2015-05-13T10:21:40.488Z","type":"message"}
{"nick":"ldub_","message":"found lit search nice ;-)","date":"2015-05-13T10:21:56.231Z","type":"message"}
{"nick":"ldub_","message":"wondering if we can remove a lit package, i've heard about making it obsolete, but didn't find how to remove it.","date":"2015-05-13T10:22:53.231Z","type":"message"}
{"nick":"StepetS","reason":"Ping timeout: 256 seconds","date":"2015-05-13T10:29:24.259Z","type":"quit"}
{"nick":"StepetS","date":"2015-05-13T10:30:48.236Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T10:49:03.655Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T10:49:33.067Z","type":"join"}
{"nick":"ldub_","reason":"Ping timeout: 264 seconds","date":"2015-05-13T11:12:20.124Z","type":"quit"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2015-05-13T11:14:04.510Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T11:14:29.036Z","type":"join"}
{"nick":"ldub_","date":"2015-05-13T11:15:39.859Z","type":"join"}
{"nick":"SouL_|__","reason":"Ping timeout: 244 seconds","date":"2015-05-13T11:27:34.314Z","type":"quit"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T11:52:18.244Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T11:52:44.640Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 245 seconds","date":"2015-05-13T11:56:54.652Z","type":"quit"}
{"nick":"ldub_1","date":"2015-05-13T12:50:41.868Z","type":"join"}
{"nick":"ldub_","reason":"Ping timeout: 256 seconds","date":"2015-05-13T12:51:47.891Z","type":"quit"}
{"nick":"ldub_","date":"2015-05-13T12:56:33.725Z","type":"join"}
{"nick":"ldub_1","reason":"Ping timeout: 252 seconds","date":"2015-05-13T12:58:36.919Z","type":"quit"}
{"nick":"ldub_","reason":"Ping timeout: 240 seconds","date":"2015-05-13T13:04:09.725Z","type":"quit"}
{"nick":"ldub_","date":"2015-05-13T13:04:19.319Z","type":"join"}
{"nick":"ldub_1","date":"2015-05-13T13:06:46.240Z","type":"join"}
{"nick":"ldub_","reason":"Ping timeout: 256 seconds","date":"2015-05-13T13:08:47.312Z","type":"quit"}
{"nick":"ldub_","date":"2015-05-13T13:23:25.903Z","type":"join"}
{"nick":"ldub_1","reason":"Ping timeout: 256 seconds","date":"2015-05-13T13:23:56.341Z","type":"quit"}
{"nick":"boxofrox","reason":"Ping timeout: 245 seconds","date":"2015-05-13T13:28:59.661Z","type":"quit"}
{"nick":"SkyRocknRoll","reason":"Remote host closed the connection","date":"2015-05-13T13:33:25.318Z","type":"quit"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-05-13T13:38:00.606Z","type":"quit"}
{"nick":"a_le","date":"2015-05-13T13:54:01.438Z","type":"join"}
{"nick":"boxofrox","date":"2015-05-13T13:56:12.414Z","type":"join"}
{"nick":"kazupon","date":"2015-05-13T14:37:01.267Z","type":"join"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-05-13T15:00:22.388Z","type":"quit"}
{"nick":"arek_deepinit","date":"2015-05-13T15:05:25.336Z","type":"join"}
{"nick":"a_le","date":"2015-05-13T15:06:54.143Z","type":"join"}
{"nick":"a_le_","date":"2015-05-13T15:20:30.301Z","type":"join"}
{"nick":"a_le","reason":"Ping timeout: 265 seconds","date":"2015-05-13T15:24:42.110Z","type":"quit"}
{"nick":"hdms","date":"2015-05-13T15:41:29.888Z","type":"join"}
{"nick":"hdms","reason":"Client Quit","date":"2015-05-13T15:44:26.024Z","type":"quit"}
{"nick":"rphillips","message":"New musl out","date":"2015-05-13T15:46:03.569Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T15:53:55.867Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T15:54:23.192Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 265 seconds","date":"2015-05-13T15:59:01.165Z","type":"quit"}
{"nick":"arek_deepinit","message":"rphillips: is that some kind of drink?","date":"2015-05-13T15:59:51.241Z","type":"message"}
{"nick":"rphillips","message":"Musl is a static c library. We have been toying with it for luvit","date":"2015-05-13T16:00:27.674Z","type":"message"}
{"nick":"arek_deepinit","message":"rphillips: i was joking ;), sorry if it was stupid","date":"2015-05-13T16:00:49.365Z","type":"message"}
{"nick":"arek_deepinit","message":"im aware of musl existence ;)","date":"2015-05-13T16:00:58.486Z","type":"message"}
{"nick":"arek_deepinit","message":"its pretty good one and much lighter than libc","date":"2015-05-13T16:01:10.745Z","type":"message"}
{"nick":"arek_deepinit","message":"and implementations seems better","date":"2015-05-13T16:01:36.776Z","type":"message"}
{"nick":"rphillips","message":"We have had issues with it and luajit","date":"2015-05-13T16:01:42.210Z","type":"message"}
{"nick":"rphillips","message":"Lots of bug fixes in this release so it's worth a shot to try again","date":"2015-05-13T16:02:03.904Z","type":"message"}
{"nick":"arek_deepinit","message":"seems like luajit development is bit stagnant recently :(","date":"2015-05-13T16:03:06.730Z","type":"message"}
{"nick":"kazupon","date":"2015-05-13T16:27:30.644Z","type":"join"}
{"nick":"arek_deepinit","reason":"Ping timeout: 250 seconds","date":"2015-05-13T16:31:03.341Z","type":"quit"}
{"nick":"a_le_","date":"2015-05-13T16:39:16.699Z","type":"quit"}
{"nick":"creationix","message":"ldub_: if you really want to delete a package in lit, message me and I can delete it","date":"2015-05-13T16:58:58.611Z","type":"message"}
{"nick":"creationix","message":"there is no API for unpublishing because once something is public, others may depend on it","date":"2015-05-13T16:59:14.391Z","type":"message"}
{"nick":"creationix","message":"rphillips: shall we do a luvi release to get the sni support?","date":"2015-05-13T16:59:32.325Z","type":"message"}
{"nick":"creationix","message":"George did a lot of work fixing the old tests","date":"2015-05-13T16:59:42.900Z","type":"message"}
{"nick":"creationix","message":"https://github.com/luvit/luvi/commit/d27131a34eb0ccbfea107eb5377e3902cbf33427","date":"2015-05-13T17:00:16.947Z","type":"message"}
{"nick":"creationix","message":"and then when luvit gets updated to use new luvi, we can enable this test https://github.com/luvit/luvit/blob/master/tests/test-tls-sni-server-client.lua#L23-L26","date":"2015-05-13T17:00:47.175Z","type":"message"}
{"nick":"creationix","message":"idea: remote poller IoT agent","date":"2015-05-13T17:06:33.551Z","type":"message"}
{"nick":"hdms","date":"2015-05-13T17:14:26.550Z","type":"join"}
{"nick":"rje","message":"rphillips, bleh, got it to use Program Files instead of Program Files (x86)  http://www.cmake.org/pipermail/cmake/2013-October/056200.html","date":"2015-05-13T17:26:44.890Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T17:40:58.939Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T17:41:26.165Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 265 seconds","date":"2015-05-13T17:45:50.092Z","type":"quit"}
{"nick":"arek_deepinit","date":"2015-05-13T18:08:23.921Z","type":"join"}
{"nick":"ldub_","reason":"Quit: Leaving.","date":"2015-05-13T18:09:26.861Z","type":"quit"}
{"nick":"SouL_|_","date":"2015-05-13T18:22:02.245Z","type":"join"}
{"nick":"rje","message":"creationix, time for the agent sync","date":"2015-05-13T18:33:03.958Z","type":"message"}
{"nick":"kazupon","date":"2015-05-13T19:27:43.646Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 245 seconds","date":"2015-05-13T19:35:14.618Z","type":"quit"}
{"nick":"erlbot--","reason":"Remote host closed the connection","date":"2015-05-13T19:42:07.763Z","type":"quit"}
{"nick":"erlbot--","date":"2015-05-13T19:42:26.345Z","type":"join"}
{"nick":"ldub_","date":"2015-05-13T19:49:15.545Z","type":"join"}
{"nick":"ldub_","message":"hi again, i try to benchmark my tiny luvi app . my program exit without any trace. Any way to debug or something ?","date":"2015-05-13T20:03:16.942Z","type":"message"}
{"nick":"ldub_","message":"sometimes i have some ENOTCONN error when checkShutdown`on coro-channel, but don't happen all times","date":"2015-05-13T20:06:47.854Z","type":"message"}
{"nick":"ksheedlo","reason":"Read error: Connection reset by peer","date":"2015-05-13T20:21:12.975Z","type":"quit"}
{"nick":"ksheedlo-rax","date":"2015-05-13T20:30:19.831Z","type":"join"}
{"nick":"ldub_","message":"(i have nothing in /var/ logs)","date":"2015-05-13T20:32:24.499Z","type":"message"}
{"nick":"kazupon","date":"2015-05-13T20:36:31.013Z","type":"join"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2015-05-13T20:39:57.667Z","type":"quit"}
{"nick":"kazupon","date":"2015-05-13T20:40:19.345Z","type":"join"}
{"nick":"creationix","message":"ldub_: I’ve seen this as well from time to time with the luvit.io server","date":"2015-05-13T21:00:18.524Z","type":"message"}
{"nick":"creationix","message":"I’d love to know the root cause","date":"2015-05-13T21:00:22.271Z","type":"message"}
{"nick":"creationix","message":"my plan was to put print everywhere and see how far it gets","date":"2015-05-13T21:00:42.084Z","type":"message"}
{"nick":"creationix","message":"ldub_: are you using weblit or your own framework?","date":"2015-05-13T21:01:05.462Z","type":"message"}
{"nick":"creationix!~creationi@2001","topic":"Lua + libUV + jiT = pure awesome-sauce | http://luvit.io | https://github.com/luvit/luvit | https://github.com/luvit/luv","date":"2015-05-13T21:05:04.543Z","type":"topic"}
{"nick":"ldub_","message":"creationix: yes","date":"2015-05-13T21:06:37.204Z","type":"message"}
{"nick":"ldub_","message":"weblit-app","date":"2015-05-13T21:06:49.477Z","type":"message"}
{"nick":"creationix","message":"great, me too.  THe bug is either in weblit or the coro-* libraries","date":"2015-05-13T21:07:11.614Z","type":"message"}
{"nick":"creationix","message":"I’m currently writing docs for weblit btw","date":"2015-05-13T21:07:20.082Z","type":"message"}
{"nick":"creationix","message":"https://github.com/creationix/weblit#weblit-app","date":"2015-05-13T21:07:34.489Z","type":"message"}
{"nick":"creationix","message":"ldub_: are you able to reproduce the issue reliably?","date":"2015-05-13T21:08:36.358Z","type":"message"}
{"nick":"ldub_","message":"creationix: everytime i launch a bench, the process is killed","date":"2015-05-13T21:09:33.127Z","type":"message"}
{"nick":"{slurp}1","reason":"Ping timeout: 250 seconds","date":"2015-05-13T21:09:42.283Z","type":"quit"}
{"nick":"ldub_","message":"(at the end of the bench)","date":"2015-05-13T21:09:47.367Z","type":"message"}
{"nick":"creationix","message":"ab or wrk?","date":"2015-05-13T21:09:51.870Z","type":"message"}
{"nick":"creationix","message":"or something else","date":"2015-05-13T21:09:56.183Z","type":"message"}
{"nick":"ldub_","message":"wrk","date":"2015-05-13T21:09:57.643Z","type":"message"}
{"nick":"creationix","message":"ok, let me try to benchmark luvit.io’s weblit app","date":"2015-05-13T21:12:06.370Z","type":"message"}
{"nick":"creationix","message":"but as I’ve said, I never found the cause before, I just have luvit.io auto-restart un upstart","date":"2015-05-13T21:12:26.351Z","type":"message"}
{"nick":"ldub_","message":"creationix: i confirm that it happens at the end of the wrk process","date":"2015-05-13T21:13:12.552Z","type":"message"}
{"nick":"creationix","message":"yeah, I remember seeing that.  I’m not sure its related to the other issue where it will sometimes just exit after certain requests","date":"2015-05-13T21:13:52.024Z","type":"message"}
{"nick":"creationix","message":"time to find out","date":"2015-05-13T21:13:57.613Z","type":"message"}
{"nick":"StepetS","reason":"Quit: Leaving.","date":"2015-05-13T21:14:47.675Z","type":"quit"}
{"nick":"creationix","message":"ldub_: you’ve got the latest deps right?","date":"2015-05-13T21:16:33.172Z","type":"message"}
{"nick":"creationix","message":"(rm -rf deps && lit install)","date":"2015-05-13T21:16:38.825Z","type":"message"}
{"nick":"ldub_","message":"humm not sure","date":"2015-05-13T21:16:54.160Z","type":"message"}
{"nick":"creationix","message":"hmm, using default wrk params against luvit.io's server, it doesn't crash","date":"2015-05-13T21:18:03.114Z","type":"message"}
{"nick":"ldub_","message":"https://github.com/lduboeuf/luvi-marc-ws/blob/master/package.lua#L5-L18","date":"2015-05-13T21:18:14.018Z","type":"message"}
{"nick":"creationix","message":"but man is it slow (249 reqs/sec).  I need to profile this app some time","date":"2015-05-13T21:18:33.061Z","type":"message"}
{"nick":"ldub_","message":"^^","date":"2015-05-13T21:18:44.970Z","type":"message"}
{"nick":"creationix","message":"ldub_: that should grab the latest.  There havn't been any breaking changes to any of those","date":"2015-05-13T21:19:52.436Z","type":"message"}
{"nick":"creationix","message":"btw, why luvit/json and lduboeuf/cjson","date":"2015-05-13T21:20:13.916Z","type":"message"}
{"nick":"ldub_","message":"yes just for testing","date":"2015-05-13T21:20:30.772Z","type":"message"}
{"nick":"creationix","message":"fair","date":"2015-05-13T21:20:34.856Z","type":"message"}
{"nick":"ldub_","message":"found cjson faster","date":"2015-05-13T21:20:46.437Z","type":"message"}
{"nick":"creationix","message":"I'll bet","date":"2015-05-13T21:20:51.346Z","type":"message"}
{"nick":"ldub_","message":"i've publish it to lit","date":"2015-05-13T21:21:08.966Z","type":"message"}
{"nick":"creationix","message":"I tried building it with lit make github://lduboeuf/luvi-marc-ws","date":"2015-05-13T21:22:22.934Z","type":"message"}
{"nick":"creationix","message":"[string \"bundle:deps/require.lua\"]:253: No such module 'mconnector' in 'bundle:/libs/mclient.lua'","date":"2015-05-13T21:22:30.705Z","type":"message"}
{"nick":"ldub_","message":"you've tried cjson or luvi-marc-ws ?","date":"2015-05-13T21:23:05.154Z","type":"message"}
{"nick":"creationix","message":"I was trying the luvi-marc-ws app","date":"2015-05-13T21:23:36.693Z","type":"message"}
{"nick":"ldub_","message":"i've didn't published mconnector yet cause it is in heavy developpement ;-)","date":"2015-05-13T21:23:49.487Z","type":"message"}
{"nick":"creationix","message":"luvi apps can be published directly from github","date":"2015-05-13T21:24:00.178Z","type":"message"}
{"nick":"creationix","message":"s/published/built/","date":"2015-05-13T21:24:07.174Z","type":"message"}
{"nick":"ldub_","message":" ?","date":"2015-05-13T21:24:27.747Z","type":"message"}
{"nick":"creationix","message":"Try `lit make github://creationix/termbox-sample`","date":"2015-05-13T21:24:43.351Z","type":"message"}
{"nick":"ldub_","message":"ah ok, it does not fetch deps","date":"2015-05-13T21:24:59.420Z","type":"message"}
{"nick":"ldub_","message":"mconnector is in deps folder currently","date":"2015-05-13T21:25:14.333Z","type":"message"}
{"nick":"ldub_","message":"i know that i will have to remove it","date":"2015-05-13T21:25:25.215Z","type":"message"}
{"nick":"creationix","message":"you know about the 'libs' folder right?","date":"2015-05-13T21:25:36.736Z","type":"message"}
{"nick":"ldub_","message":"yes","date":"2015-05-13T21:25:45.315Z","type":"message"}
{"nick":"creationix","message":"cool, just making sure","date":"2015-05-13T21:25:53.082Z","type":"message"}
{"nick":"ldub_","message":"maybe a better place for now, but in the future mconnector will have a place for a lit package","date":"2015-05-13T21:26:16.576Z","type":"message"}
{"nick":"creationix","message":"but lit make on github urls should fetch all prescribed deps","date":"2015-05-13T21:26:18.504Z","type":"message"}
{"nick":"creationix","message":"anyway, when I tested my weblit app with wrk, it didn't die","date":"2015-05-13T21:27:03.291Z","type":"message"}
{"nick":"creationix","message":"though I did get ENOTCONN for each connection","date":"2015-05-13T21:27:10.649Z","type":"message"}
{"nick":"ldub_","message":"yeah like me","date":"2015-05-13T21:27:45.377Z","type":"message"}
{"nick":"ldub_","message":"my project is only testable if you have a \"marc\" server running ( which has a tcp server) and some data in it","date":"2015-05-13T21:29:35.386Z","type":"message"}
{"nick":"creationix","message":"ok, I'll see if I can fix this ENOTCONN message and see if that helps","date":"2015-05-13T21:30:05.644Z","type":"message"}
{"nick":"ldub_","message":"nice","date":"2015-05-13T21:32:49.259Z","type":"message"}
{"nick":"creationix","message":"heh, If I remove the error message, the process just silently exits!","date":"2015-05-13T21:33:37.417Z","type":"message"}
{"nick":"ldub_","message":"creationix: ^^","date":"2015-05-13T21:34:02.873Z","type":"message"}
{"nick":"creationix","message":"I know, right","date":"2015-05-13T21:34:30.468Z","type":"message"}
{"nick":"ldub_","message":"so it is related to the tcp/http connection between wrk and the luvi process","date":"2015-05-13T21:35:10.111Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2015-05-13T21:37:14.905Z","type":"quit"}
{"nick":"creationix","message":"hmm, usually, the socket is not active (according to socket:is_active())","date":"2015-05-13T21:37:51.127Z","type":"message"}
{"nick":"creationix","message":"but sometimes it’s still active, even after shutdown’s callback","date":"2015-05-13T21:38:06.297Z","type":"message"}
{"nick":"ldub_","message":"creationix:  did you test with ab?, it does not reproduce the error here","date":"2015-05-13T21:39:43.705Z","type":"message"}
{"nick":"creationix","message":"using keepalive makes a big difference","date":"2015-05-13T21:40:10.585Z","type":"message"}
{"nick":"creationix","message":"it’s default in wrk right?","date":"2015-05-13T21:40:15.236Z","type":"message"}
{"nick":"ldub_","message":"don't remember","date":"2015-05-13T21:40:24.257Z","type":"message"}
{"nick":"creationix","message":"heh, wek doesn’t pass in a User-Agent, but ab does","date":"2015-05-13T21:41:21.836Z","type":"message"}
{"nick":"creationix","message":"my logger doesn’t log requests without a user-agent","date":"2015-05-13T21:41:33.057Z","type":"message"}
{"nick":"ldub_","message":"yes must add header for that","date":"2015-05-13T21:42:43.338Z","type":"message"}
{"nick":"creationix","message":"ok, so using ab causes the server to exit, but not wrk (with my modifications)","date":"2015-05-13T21:42:51.974Z","type":"message"}
{"nick":"SouL_|_","reason":"Ping timeout: 244 seconds","date":"2015-05-13T21:47:34.362Z","type":"quit"}
{"nick":"creationix","message":"so the silent exit is before the read end or write end events ever happen","date":"2015-05-13T21:53:27.303Z","type":"message"}
{"nick":"creationix","message":"interesting","date":"2015-05-13T21:53:30.411Z","type":"message"}
{"nick":"ldub_","reason":"Ping timeout: 255 seconds","date":"2015-05-13T22:07:37.600Z","type":"quit"}
{"nick":"ldub_","date":"2015-05-13T22:08:24.421Z","type":"join"}
{"nick":"creationix","message":"ldub_: this silent exit bug is pretty deep.  I think it's some sort of crash and not normal exit","date":"2015-05-13T22:12:51.458Z","type":"message"}
{"nick":"ldub_","message":"creationix: sorry for this ;-)","date":"2015-05-13T22:13:41.036Z","type":"message"}
{"nick":"creationix","message":"yep, exit code 141","date":"2015-05-13T22:13:48.622Z","type":"message"}
{"nick":"creationix","message":"no, thanks for motivating me to fix it","date":"2015-05-13T22:14:00.518Z","type":"message"}
{"nick":"creationix","message":"I've seen it, but considered it low priority","date":"2015-05-13T22:14:11.084Z","type":"message"}
{"nick":"creationix","message":"but when it stops others from using luvit, then it becomes more important","date":"2015-05-13T22:14:22.069Z","type":"message"}
{"nick":"ksheedlo-rax","new_nick":"ksheedlo","date":"2015-05-13T22:14:49.685Z","type":"nick"}
{"nick":"ldub_","message":"creationix: i agree","date":"2015-05-13T22:15:26.293Z","type":"message"}
{"nick":"creationix","message":"heh, gdb says \"Program received signal SIGPIPE, Broken pipe.\"","date":"2015-05-13T22:15:27.316Z","type":"message"}
{"nick":"creationix","message":"now we're getting somewhere","date":"2015-05-13T22:15:41.785Z","type":"message"}
{"nick":"ldub_","message":"yeah saw that on http://stackoverflow.com/questions/18880606/socket-connection-getting-closed-abruptly-with-code-141","date":"2015-05-13T22:16:41.103Z","type":"message"}
{"nick":"ldub_","message":"creationix: just for my self learning: how did you get exit code ?","date":"2015-05-13T22:17:20.308Z","type":"message"}
{"nick":"creationix","message":"echo $?","date":"2015-05-13T22:17:29.453Z","type":"message"}
{"nick":"creationix","message":"after it exits","date":"2015-05-13T22:17:32.064Z","type":"message"}
{"nick":"creationix","message":"(if you're in bash)","date":"2015-05-13T22:17:36.940Z","type":"message"}
{"nick":"creationix","message":"luvit server.lua; echo $?","date":"2015-05-13T22:17:50.053Z","type":"message"}
{"nick":"ldub_","message":"awesome","date":"2015-05-13T22:17:58.395Z","type":"message"}
{"nick":"creationix","message":"also if you want to use gdb and luvi with debug symbols:","date":"2015-05-13T22:19:13.378Z","type":"message"}
{"nick":"creationix","message":"Edit luvi's makefile to change Release to Debug and `make clean regular test`","date":"2015-05-13T22:19:34.255Z","type":"message"}
{"nick":"creationix","message":"(in the luvi source tree)","date":"2015-05-13T22:19:42.099Z","type":"message"}
{"nick":"creationix","message":"and then gdb --args ~/luvi/build/luvi ~/luvit -- ~/luvit.io/server.lua","date":"2015-05-13T22:19:58.312Z","type":"message"}
{"nick":"ldub_","message":"i see, that will be next course, thanks","date":"2015-05-13T22:20:03.822Z","type":"message"}
{"nick":"creationix","message":"notice the path to luvi, luvit, and my app","date":"2015-05-13T22:20:10.565Z","type":"message"}
{"nick":"creationix","message":"rphillips: do you remember why we don't signal(SIGPIPE, SIG_IGN) in luvi?","date":"2015-05-13T22:22:12.575Z","type":"message"}
{"nick":"creationix","message":"thanks to ldub_ I finally found a way to reproduce a test case that need sit","date":"2015-05-13T22:22:36.532Z","type":"message"}
{"nick":"creationix","message":"*needs it","date":"2015-05-13T22:22:39.524Z","type":"message"}
{"nick":"creationix","message":"rje: ^","date":"2015-05-13T22:22:49.417Z","type":"message"}
{"nick":"creationix","message":"(ryan is on vacation today)","date":"2015-05-13T22:23:09.479Z","type":"message"}
{"nick":"ldub_","message":"oh okay, me too ^^","date":"2015-05-13T22:23:27.831Z","type":"message"}
{"nick":"rje","message":"creationix, not sure.  within the agent we used some pipes.  if you want to ignore them do it from the lua in luvit.","date":"2015-05-13T22:24:38.249Z","type":"message"}
{"nick":"creationix","message":"oh right, we can ignore that from lua","date":"2015-05-13T22:28:26.052Z","type":"message"}
{"nick":"creationix","message":"ldub_: add this to your server: require('uv').new_signal():start(\"sigpipe\")","date":"2015-05-13T22:28:33.127Z","type":"message"}
{"nick":"ldub_","message":"creationix: let's try","date":"2015-05-13T22:28:48.723Z","type":"message"}
{"nick":"creationix","message":"web servers hit SIGPIPE all the time when under high load","date":"2015-05-13T22:28:55.772Z","type":"message"}
{"nick":"ldub_","message":"humm before `require('uv').run()`","date":"2015-05-13T22:30:05.322Z","type":"message"}
{"nick":"creationix","message":"ldub_: correct, that's a blocking call","date":"2015-05-13T22:30:18.351Z","type":"message"}
{"nick":"creationix","message":"right before would be fine","date":"2015-05-13T22:30:33.072Z","type":"message"}
{"nick":"creationix","message":"I might just add this to weblit-app","date":"2015-05-13T22:31:04.454Z","type":"message"}
{"nick":"ldub_","message":"creationix: bingo!, still have some ENOTCONN but don't exit.","date":"2015-05-13T22:32:01.917Z","type":"message"}
{"nick":"creationix","message":"yep and I have a different fix for that","date":"2015-05-13T22:32:11.752Z","type":"message"}
{"nick":"ldub_","message":"creationix: other question, any default tcp timeout when dealing with tcp connections, don't find where to write it ?","date":"2015-05-13T22:35:11.991Z","type":"message"}
{"nick":"creationix","message":"ldub_: you mean the tcp keepalive value?","date":"2015-05-13T22:36:52.385Z","type":"message"}
{"nick":"ldub_","message":"oh yes sorry","date":"2015-05-13T22:37:00.738Z","type":"message"}
{"nick":"creationix","message":"socket:keepalive(enable, delay)","date":"2015-05-13T22:37:06.201Z","type":"message"}
{"nick":"creationix","message":"part of the luv api","date":"2015-05-13T22:37:09.066Z","type":"message"}
{"nick":"creationix","message":"http://docs.libuv.org/en/v1.x/tcp.html?highlight=keepalive#c.uv_tcp_keepalive","date":"2015-05-13T22:37:33.079Z","type":"message"}
{"nick":"creationix","message":"oh, I did document that one https://github.com/luvit/luv/blob/master/docs.md#uvtcp_keepalivetcp-enable-delay","date":"2015-05-13T22:37:53.343Z","type":"message"}
{"nick":"ldub_","message":"oh ok, but too low layer for me","date":"2015-05-13T22:38:11.476Z","type":"message"}
{"nick":"creationix","message":"req.socket is the tcp handle","date":"2015-05-13T22:38:24.491Z","type":"message"}
{"nick":"creationix","message":"I expose it for just this use case","date":"2015-05-13T22:38:35.851Z","type":"message"}
{"nick":"ldub_","message":"not a coro-tcp connect(..., keepalive) feature ?","date":"2015-05-13T22:38:41.369Z","type":"message"}
{"nick":"creationix","message":"hmm","date":"2015-05-13T22:38:59.732Z","type":"message"}
{"nick":"creationix","message":"so you're connect is taking a long time and you want a timeout?","date":"2015-05-13T22:39:38.417Z","type":"message"}
{"nick":"creationix","message":"or it's failing and you want it to wait longer?","date":"2015-05-13T22:39:52.507Z","type":"message"}
{"nick":"creationix","message":"ldub_: ok, update weblit-app and coro-channel to get fixes","date":"2015-05-13T22:42:03.107Z","type":"message"}
{"nick":"ldub_","message":"i did some work by using openresty's before, and found usefull to be able to set time out: conn:set_timeout(1000) -- 1 sec","date":"2015-05-13T22:42:44.376Z","type":"message"}
{"nick":"creationix","message":"ok, so you want to change the internal timeout for connect","date":"2015-05-13T22:43:17.417Z","type":"message"}
{"nick":"creationix","message":"I'm not sure libuv exposes that","date":"2015-05-13T22:43:24.240Z","type":"message"}
{"nick":"creationix","message":"if it doesn't, you can always just use a timer and cancel the connect in theory","date":"2015-05-13T22:43:41.306Z","type":"message"}
{"nick":"creationix","message":"sounds like a feature to add to coro-tcp","date":"2015-05-13T22:43:47.674Z","type":"message"}
{"nick":"creationix","message":"uv request objects have a cancel method.  Not that I've ever gotten it to work","date":"2015-05-13T22:44:10.735Z","type":"message"}
{"nick":"arek_deepinit","reason":"Quit: Konversation terminated!","date":"2015-05-13T22:45:42.346Z","type":"quit"}
{"nick":"ldub_","message":"http://wiki.nginx.org/HttpLuaModule#tcpsock:connect","date":"2015-05-13T22:46:04.780Z","type":"message"}
{"nick":"ldub_","message":"openresty's provide 2 nice features, the ability to handle timeout, and connection pool with limit","date":"2015-05-13T22:47:07.724Z","type":"message"}
{"nick":"ldub_","message":"i think it's a quite common case","date":"2015-05-13T22:47:23.822Z","type":"message"}
{"nick":"ldub_","message":"*use case","date":"2015-05-13T22:47:43.559Z","type":"message"}
{"nick":"creationix","message":"I wonder if setting the keepalive here will do that https://github.com/luvit/lit/blob/master/deps/coro-tcp.lua#L32-L33","date":"2015-05-13T22:48:03.072Z","type":"message"}
{"nick":"creationix","message":"you can try patching your coro-tcp and see if it helps","date":"2015-05-13T22:48:18.580Z","type":"message"}
{"nick":"ldub_","message":" ok, i will try all that. But quite late here, time for relax. thanks for all","date":"2015-05-13T22:49:15.447Z","type":"message"}
{"nick":"creationix","message":"did you get the updated weblit-app and coro-channel?","date":"2015-05-13T22:49:39.014Z","type":"message"}
{"nick":"creationix","message":"it fixed my server all up","date":"2015-05-13T22:49:43.475Z","type":"message"}
{"nick":"ldub_","message":"oh yes i'm going to try","date":"2015-05-13T22:49:53.640Z","type":"message"}
{"nick":"creationix","message":"you can just `lit install creationix/weblit-app creationix/coro-channel` and it will install the latest over what you have","date":"2015-05-13T22:50:04.007Z","type":"message"}
{"nick":"creationix","message":"ignoring your package.lua","date":"2015-05-13T22:50:08.295Z","type":"message"}
{"nick":"ldub_","message":"perfect","date":"2015-05-13T22:52:16.613Z","type":"message"}
{"nick":"creationix","message":"good night, thanks for helping me fix that bug","date":"2015-05-13T22:52:33.108Z","type":"message"}
{"nick":"ldub_","message":"yes, last point, keepalive is also easily configurable ?","date":"2015-05-13T22:52:51.194Z","type":"message"}
{"nick":"creationix","message":"http keepalive or tcp keepalive?","date":"2015-05-13T22:53:05.952Z","type":"message"}
{"nick":"ldub_","message":"tcp","date":"2015-05-13T22:53:12.677Z","type":"message"}
{"nick":"creationix","message":"if you can get access to the socket, it's socket:keepalive(true, seconds)","date":"2015-05-13T22:53:33.137Z","type":"message"}
{"nick":"creationix","message":"the coro-tcp connect function returns read, write, socket","date":"2015-05-13T22:53:55.638Z","type":"message"}
{"nick":"ldub_","message":"ok, default is infinite ?","date":"2015-05-13T22:53:58.874Z","type":"message"}
{"nick":"creationix","message":"no idea","date":"2015-05-13T22:54:03.835Z","type":"message"}
{"nick":"ldub_","message":"i'll check","date":"2015-05-13T22:54:16.797Z","type":"message"}
{"nick":"creationix","message":"probably whatever is os default","date":"2015-05-13T22:54:21.131Z","type":"message"}
{"nick":"ldub_","message":"or server side","date":"2015-05-13T22:54:31.674Z","type":"message"}
{"nick":"ldub_","message":"okay see you then","date":"2015-05-13T22:55:24.047Z","type":"message"}
{"nick":"ldub_","reason":"Quit: Leaving.","date":"2015-05-13T22:56:21.034Z","type":"quit"}
{"nick":"creationix","message":"alright luvit.io has new fixes deployed :)","date":"2015-05-13T22:59:48.043Z","type":"message"}
