{"nick":"kevwil","date":"2012-12-05T00:04:06.118Z","type":"join"}
{"nick":"kazupon","date":"2012-12-05T00:09:27.076Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 265 seconds","date":"2012-12-05T00:14:08.723Z","type":"quit"}
{"nick":"kevwil","reason":"Ping timeout: 252 seconds","date":"2012-12-05T00:19:23.885Z","type":"quit"}
{"nick":"coolaj86","date":"2012-12-05T00:23:42.835Z","type":"join"}
{"nick":"mmalecki[food]","new_nick":"mmalecki","date":"2012-12-05T00:48:06.902Z","type":"nick"}
{"nick":"sveisvei","reason":"Read error: Connection reset by peer","date":"2012-12-05T01:03:28.859Z","type":"quit"}
{"nick":"sveisvei","date":"2012-12-05T01:03:46.423Z","type":"join"}
{"nick":"kazupon","date":"2012-12-05T01:56:16.859Z","type":"join"}
{"nick":"Goles","date":"2012-12-05T03:23:53.278Z","type":"join"}
{"nick":"Goles","reason":"Remote host closed the connection","date":"2012-12-05T03:37:57.083Z","type":"quit"}
{"nick":"tim_smart","new_nick":"tim_smart|away","date":"2012-12-05T03:41:10.064Z","type":"nick"}
{"nick":"tim_smart|away","new_nick":"tim_smart","date":"2012-12-05T05:05:47.920Z","type":"nick"}
{"nick":"tim_smart","new_nick":"tim_smart|away","date":"2012-12-05T05:31:18.142Z","type":"nick"}
{"nick":"tim_smart|away","new_nick":"tim_smart","date":"2012-12-05T06:20:46.577Z","type":"nick"}
{"nick":"DarkGod","date":"2012-12-05T08:02:12.441Z","type":"join"}
{"nick":"kazupon_","date":"2012-12-05T08:08:21.825Z","type":"join"}
{"nick":"kazupon","reason":"Ping timeout: 260 seconds","date":"2012-12-05T08:09:55.795Z","type":"quit"}
{"nick":"kazupon_","reason":"Ping timeout: 260 seconds","date":"2012-12-05T08:43:45.595Z","type":"quit"}
{"nick":"joshthecoder","reason":"Quit: Leaving...","date":"2012-12-05T09:36:09.929Z","type":"quit"}
{"nick":"tim_smart","new_nick":"tim_smart|away","date":"2012-12-05T09:42:39.564Z","type":"nick"}
{"nick":"indexzero","date":"2012-12-05T12:41:29.751Z","type":"join"}
{"nick":"indexzero","reason":"Client Quit","date":"2012-12-05T12:41:29.752Z","type":"quit"}
{"nick":"Goles","date":"2012-12-05T13:09:41.636Z","type":"join"}
{"nick":"indexzero","date":"2012-12-05T13:29:48.459Z","type":"join"}
{"nick":"indexzero","reason":"Client Quit","date":"2012-12-05T13:30:53.635Z","type":"quit"}
{"nick":"indexzero","date":"2012-12-05T13:43:21.123Z","type":"join"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-12-05T14:46:37.439Z","type":"quit"}
{"nick":"indexzero","date":"2012-12-05T14:47:08.636Z","type":"join"}
{"nick":"devurandom","date":"2012-12-05T14:48:44.691Z","type":"join"}
{"nick":"devurandom","message":"Hi!","date":"2012-12-05T14:48:47.590Z","type":"message"}
{"nick":"devurandom","message":"How do I use an SQLite3 database with Luvit? I am currently trying to use LuaSQL within my Luvit script, but apparently Luvit is not designed to load binary Lua modules (.so)...","date":"2012-12-05T14:49:04.381Z","type":"message"}
{"nick":"creationix","message":"devurandom, luvit can load them with minor modifications","date":"2012-12-05T14:50:09.823Z","type":"message"}
{"nick":"creationix","message":"the extension has to be .luvit instead of .so","date":"2012-12-05T14:50:29.345Z","type":"message"}
{"nick":"creationix","message":"also the module can't use blocking I/O (which I'm pretty sure luasql does)","date":"2012-12-05T14:50:48.651Z","type":"message"}
{"nick":"devurandom","message":":(","date":"2012-12-05T14:50:59.821Z","type":"message"}
{"nick":"creationix","message":"and the module has to be lua 5.2 style (returning the exports table)","date":"2012-12-05T14:51:01.010Z","type":"message"}
{"nick":"devurandom","message":"LuaSQL does the latter. But if the former makes it not work, that does not help me. :(","date":"2012-12-05T14:51:45.811Z","type":"message"}
{"nick":"devurandom","message":"How do you use databases with Luvit?","date":"2012-12-05T14:51:54.076Z","type":"message"}
{"nick":"creationix","message":"devurandom, would you be interested in a non-blocking sqlite binding.  I'm thinking of doing small projects for sponsorship like Mike Pall does with luajit","date":"2012-12-05T14:52:03.749Z","type":"message"}
{"nick":"creationix","message":"luvit isn't used for many webapps as far as I know","date":"2012-12-05T14:52:13.445Z","type":"message"}
{"nick":"devurandom","message":"You mean I pay you to write a luvit-sqlite3 binding? Sadly I cannot afford that.","date":"2012-12-05T14:52:52.459Z","type":"message"}
{"nick":"creationix","message":"understood","date":"2012-12-05T14:53:09.340Z","type":"message"}
{"nick":"creationix","message":"so what are you trying to build?","date":"2012-12-05T14:53:18.957Z","type":"message"}
{"nick":"creationix","message":"maybe I can help anyway","date":"2012-12-05T14:53:23.725Z","type":"message"}
{"nick":"devurandom","message":"There is a remote chance my employer would, but I'd need to see some references, at least, to convince him.","date":"2012-12-05T14:53:28.127Z","type":"message"}
{"nick":"creationix","message":"so the first question they will have is why use luvit instead of stock lua?","date":"2012-12-05T14:53:54.276Z","type":"message"}
{"nick":"creationix","message":"since luasql already works with normal lua/luajit","date":"2012-12-05T14:54:04.528Z","type":"message"}
{"nick":"devurandom","message":"I would like to write a simple server in Lua, with simple authentication (pam or ldap), which receives some data over http and stores it in a database. As bonus features I would like to write a web frontend that displays the contents of that database and presents a form to enter new data.","date":"2012-12-05T14:54:05.562Z","type":"message"}
{"nick":"creationix","message":"how persistent does the database need to be?","date":"2012-12-05T14:54:33.405Z","type":"message"}
{"nick":"devurandom","message":"#lua recommended luvit or nginx-lua. Since I already heard of luvit, I tried it first.","date":"2012-12-05T14:54:40.113Z","type":"message"}
{"nick":"creationix","message":"have you heard of my luv project?","date":"2012-12-05T14:54:59.870Z","type":"message"}
{"nick":"devurandom","message":"creationix: permanent - some in-memory database does not help me.","date":"2012-12-05T14:55:05.388Z","type":"message"}
{"nick":"devurandom","message":"creationix: Yours? No.","date":"2012-12-05T14:55:13.934Z","type":"message"}
{"nick":"creationix","message":"it's like luvit, but more compatable with normal lua, luarocks, etc..","date":"2012-12-05T14:55:17.525Z","type":"message"}
{"nick":"creationix","message":"also I started a lua-in-browser project last weekend","date":"2012-12-05T14:55:31.915Z","type":"message"}
{"nick":"creationix","message":"my goal is to make a web framework like luvit, but more lua ecosystem friendly","date":"2012-12-05T14:55:46.808Z","type":"message"}
{"nick":"creationix","message":"you can even use lua in the browser","date":"2012-12-05T14:55:50.838Z","type":"message"}
{"nick":"creationix","message":"https://github.com/creationix/brozula, https://github.com/creationix/moonslice-luv, https://github.com/creationix/luv","date":"2012-12-05T14:56:30.285Z","type":"message"}
{"nick":"Goles","reason":"Remote host closed the connection","date":"2012-12-05T14:56:32.577Z","type":"quit"}
{"nick":"devurandom","message":"The thing I will write will be damn small. Just a few lines. We will use it to track students and the points they received for the exercise that accompanies an university course at our institute.","date":"2012-12-05T14:56:55.184Z","type":"message"}
{"nick":"Goles","date":"2012-12-05T14:57:41.472Z","type":"join"}
{"nick":"creationix","message":"I think what you need is a common requirement.  Do you mind if I use your requirements to help design the framework?","date":"2012-12-05T14:57:58.739Z","type":"message"}
{"nick":"creationix","message":"regarding persistence, maybe couchdb?","date":"2012-12-05T14:58:34.842Z","type":"message"}
{"nick":"creationix","message":"no need for a database driver there, just use the luvit http client","date":"2012-12-05T14:58:46.589Z","type":"message"}
{"nick":"devurandom","message":"Currently we use EtherPad (some web based collaborative editor), but that is ugly to use to edit ascii-art tables and it is also very slow on my netbook. So my idea is to write a small server that basically just forwards data into a database, a small commandline client to enter new data, and a web based frontend which can also display the database contents.","date":"2012-12-05T14:59:14.113Z","type":"message"}
{"nick":"devurandom","message":"brb","date":"2012-12-05T14:59:38.390Z","type":"message"}
{"nick":"creationix","message":"also depending on how fast the database has to be and how much data will be stored in it, a simple pure-lua db could be written using luvit APIs","date":"2012-12-05T15:00:01.705Z","type":"message"}
{"nick":"devurandom","message":"What do you mean \"common requirement\"?","date":"2012-12-05T15:02:10.622Z","type":"message"}
{"nick":"creationix","message":"I mean, people often want a simple database-backed webapp with some web front-end","date":"2012-12-05T15:04:24.197Z","type":"message"}
{"nick":"devurandom","message":"Really does not need to be fast. About 5 people will (spread over the whole week) enter maybe 200 lines into the database. Aprobably even lower number of people will be interested in listing the contents of that database.","date":"2012-12-05T15:04:25.178Z","type":"message"}
{"nick":"creationix","message":"this is why rails was so popular","date":"2012-12-05T15:04:30.700Z","type":"message"}
{"nick":"devurandom","message":"\"was\"? is not anymore?","date":"2012-12-05T15:04:39.620Z","type":"message"}
{"nick":"creationix","message":"I guess it still is, but the performance profile of rails isn't the best when compared to something like node.js","date":"2012-12-05T15:05:03.657Z","type":"message"}
{"nick":"creationix","message":"especially if you ever want to push data to the client","date":"2012-12-05T15:05:12.716Z","type":"message"}
{"nick":"creationix","message":"or talk to slow clients (like mobile devices)","date":"2012-12-05T15:05:20.029Z","type":"message"}
{"nick":"indexzero","reason":"Quit: indexzero","date":"2012-12-05T15:05:28.559Z","type":"quit"}
{"nick":"creationix","message":"luvit/luv perform similairly to node.js, but in lua","date":"2012-12-05T15:05:58.707Z","type":"message"}
{"nick":"creationix","message":"and using a *lot* less ram overhead","date":"2012-12-05T15:06:04.817Z","type":"message"}
{"nick":"devurandom","message":"Oh, I assume no one of my 5 users will try to use their phone or tablet to enter the data. They'll probably sit at home or in the university while reading the students exercise answers (is there a good word for it? It's \"Abgabe\" in german) and noting down the points they receive.","date":"2012-12-05T15:08:15.430Z","type":"message"}
{"nick":"devurandom","message":"lot less ram than node.js?","date":"2012-12-05T15:08:29.887Z","type":"message"}
{"nick":"indexzero","date":"2012-12-05T15:08:43.666Z","type":"join"}
{"nick":"creationix","message":"yep","date":"2012-12-05T15:08:52.845Z","type":"message"}
{"nick":"devurandom","message":"That sounds awesome. Currently we have to restart the etherpad (which runs in node.js) once a week, because it consumed all the ram of the webserver... ;)","date":"2012-12-05T15:09:00.679Z","type":"message"}
{"nick":"devurandom","message":"Thanks for the CouchDB tip. I will look into that! :)","date":"2012-12-05T15:09:35.009Z","type":"message"}
{"nick":"indexzero","reason":"Client Quit","date":"2012-12-05T15:10:15.504Z","type":"quit"}
{"nick":"creationix","message":"but for something that small, it's not unheard of to just write the entire database on every change to a new file","date":"2012-12-05T15:10:44.704Z","type":"message"}
{"nick":"creationix","message":"and to an atomic move over the old file when done","date":"2012-12-05T15:10:52.932Z","type":"message"}
{"nick":"creationix","message":"encoded as msgpack or json or something","date":"2012-12-05T15:10:59.249Z","type":"message"}
{"nick":"devurandom","message":"Also nice.","date":"2012-12-05T15:11:48.034Z","type":"message"}
{"nick":"devurandom","message":"I could even encode it as Lua... :)","date":"2012-12-05T15:11:53.588Z","type":"message"}
{"nick":"creationix","message":"yep","date":"2012-12-05T15:12:01.544Z","type":"message"}
{"nick":"creationix","message":"I called that format ltin","date":"2012-12-05T15:12:14.346Z","type":"message"}
{"nick":"creationix","message":"Lua Table Interop Notation","date":"2012-12-05T15:12:20.741Z","type":"message"}
{"nick":"creationix","message":"even wrote a luvit module for it","date":"2012-12-05T15:12:27.683Z","type":"message"}
{"nick":"creationix","message":"https://github.com/luvit/ltin/blob/master/ltin.lua","date":"2012-12-05T15:12:53.833Z","type":"message"}
{"nick":"creationix","message":"parsing is just the lua parser in a sandbox","date":"2012-12-05T15:13:03.973Z","type":"message"}
{"nick":"devurandom","message":"But that file-based approach would break, when two users start entering data at the same time, wouldn't it?","date":"2012-12-05T15:13:09.455Z","type":"message"}
{"nick":"creationix","message":"there is just one server right?","date":"2012-12-05T15:13:21.514Z","type":"message"}
{"nick":"creationix","message":"it's the luvit server that writes to the file","date":"2012-12-05T15:13:27.630Z","type":"message"}
{"nick":"creationix","message":"just put a lock variable in there to now open the file if it's already being written to.","date":"2012-12-05T15:13:47.167Z","type":"message"}
{"nick":"creationix","message":"a write queue","date":"2012-12-05T15:13:49.843Z","type":"message"}
{"nick":"creationix","message":"or a dirty flag","date":"2012-12-05T15:14:10.834Z","type":"message"}
{"nick":"devurandom","message":"Ah.","date":"2012-12-05T15:14:14.719Z","type":"message"}
{"nick":"creationix","message":"it's not really a queue since the db is global and in-memory","date":"2012-12-05T15:14:21.065Z","type":"message"}
{"nick":"creationix","message":"so when done writing, check if there is a dirty flag and start the write again","date":"2012-12-05T15:14:44.920Z","type":"message"}
{"nick":"devurandom","message":"I have to remember that in Luvit the server process keeps running, and not like in PHP, a process for each http request is created.","date":"2012-12-05T15:15:00.431Z","type":"message"}
{"nick":"creationix","message":"yep","date":"2012-12-05T15:15:07.421Z","type":"message"}
{"nick":"creationix","message":"anyway, time for breakfast, if I'm not on here, you can mail me at tim at creationix.com or ping me on twitter at @creatoinix","date":"2012-12-05T15:15:29.010Z","type":"message"}
{"nick":"creationix","message":"*@creationix","date":"2012-12-05T15:15:43.777Z","type":"message"}
{"nick":"devurandom","message":"So then I could just make the http handler stuff write requests into that queue and create another thread that writes it to the file.","date":"2012-12-05T15:16:08.409Z","type":"message"}
{"nick":"devurandom","message":"Then I could even use the same file format as we do now in the etherpad editor...","date":"2012-12-05T15:16:53.125Z","type":"message"}
{"nick":"devurandom","message":"creationix: Thanks!","date":"2012-12-05T15:17:08.212Z","type":"message"}
{"nick":"spion","reason":"Ping timeout: 246 seconds","date":"2012-12-05T15:36:23.148Z","type":"quit"}
{"nick":"devurandom","message":"creationix: Meeeeeep... https://github.com/creationix/lhttp_parser.git is apparently not Lua 5.2 compatible: lhttp_parser.c:363:1: error: unknown type name ‘luaL_reg’ -- and more","date":"2012-12-05T15:41:31.883Z","type":"message"}
{"nick":"creationix","message":"yeah, I'm having trouble being 5.1, 5.2, and luajit compatable","date":"2012-12-05T15:43:46.058Z","type":"message"}
{"nick":"creationix","message":"I'll take a patch if someone knows how to solve that","date":"2012-12-05T15:43:55.942Z","type":"message"}
{"nick":"creationix","message":"for now I'm targeting 5.1 and luajit","date":"2012-12-05T15:44:16.790Z","type":"message"}
{"nick":"devurandom","message":"https://github.com/devurandom/lualdap/commit/b785fbd7ad0b17d33bb26b9d6c1cee207117eae4#L1R22 << An example of how to make it lua 5.2 and 5.2 compatible.","date":"2012-12-05T15:44:50.539Z","type":"message"}
{"nick":"indexzero","date":"2012-12-05T15:45:11.088Z","type":"join"}
{"nick":"devurandom","message":"luaL_Reg is afaik already present in Lua 5.1","date":"2012-12-05T15:45:33.898Z","type":"message"}
{"nick":"spion","date":"2012-12-05T15:50:06.187Z","type":"join"}
{"nick":"devurandom","message":"How would I run moonslice-luv with luajit?","date":"2012-12-05T15:52:35.320Z","type":"message"}
{"nick":"devurandom","message":"@creationix","date":"2012-12-05T15:53:08.989Z","type":"message"}
{"nick":"creationix","message":"This is the app I was going to finish for me lua workshop talk https://github.com/creationix/luv-chat","date":"2012-12-05T15:55:48.273Z","type":"message"}
{"nick":"creationix","message":"I just put all the moonslice modules in my path https://github.com/creationix/luv-chat/blob/master/server.lua#L3-L4","date":"2012-12-05T15:56:08.250Z","type":"message"}
{"nick":"creationix","message":"and moonslice-luv is a recursive git repo","date":"2012-12-05T15:56:18.560Z","type":"message"}
{"nick":"creationix","message":"so clone it with the --recursive flag","date":"2012-12-05T15:56:29.964Z","type":"message"}
{"nick":"creationix","message":"and run make in it to build luv and lhttp_parser","date":"2012-12-05T15:56:38.530Z","type":"message"}
{"nick":"creationix","message":"I think the makefile assumes luajit is installed to PREFIX=/usr/local","date":"2012-12-05T15:56:53.582Z","type":"message"}
{"nick":"creationix","message":"eventually I may put it all into luarocks, but I want to finish the code first before I worry about packaging","date":"2012-12-05T15:57:14.620Z","type":"message"}
{"nick":"kevwil","date":"2012-12-05T15:57:41.143Z","type":"join"}
