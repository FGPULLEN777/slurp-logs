{"nick":"rphillips","message":"man this is sweet","date":"2015-02-10T00:38:17.631Z","type":"message"}
{"nick":"rphillips","message":"creationix: tried it out... works great","date":"2015-02-10T00:38:22.833Z","type":"message"}
{"nick":"rphillips","message":"going to clone into the agent and try this out","date":"2015-02-10T00:39:05.883Z","type":"message"}
{"nick":"DarkGod","reason":"Ping timeout: 255 seconds","date":"2015-02-10T00:44:13.537Z","type":"quit"}
{"nick":"joconnor_","reason":"Ping timeout: 245 seconds","date":"2015-02-10T00:47:19.600Z","type":"quit"}
{"nick":"rphillips","message":"cool. I have a noop main working with the monitoring agent + new lit + luvit2 within lit","date":"2015-02-10T01:14:03.790Z","type":"message"}
{"nick":"rphillips","message":"working good so far","date":"2015-02-10T01:14:18.802Z","type":"message"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-02-10T01:18:24.680Z","type":"quit"}
{"nick":"rphillips","message":"unit tests are passing in virgo-base","date":"2015-02-10T01:29:35.948Z","type":"message"}
{"nick":"rphillips","message":"creationix: is the luvit/init module checked into lit?","date":"2015-02-10T01:30:02.066Z","type":"message"}
{"nick":"UniOn","reason":"Remote host closed the connection","date":"2015-02-10T01:31:29.263Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T01:35:35.969Z","type":"join"}
{"nick":"a_le","message":"how do i empty the write queue for a stream?","date":"2015-02-10T01:41:28.034Z","type":"message"}
{"nick":"a_le","message":"in other words, if there are pending write requests for a stream, and i uv_close the stream, do i need to worry that handle->write_queue_size might be still non-zero if i now want to proceed and delete the data structure where the stream handle is embedded?","date":"2015-02-10T01:45:29.366Z","type":"message"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-02-10T02:14:30.897Z","type":"quit"}
{"nick":"rphillips","message":"hmm. a close() or destroy() should work","date":"2015-02-10T02:17:16.886Z","type":"message"}
{"nick":"a_le","date":"2015-02-10T02:21:19.306Z","type":"join"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-02-10T02:44:04.743Z","type":"quit"}
{"nick":"imzyxwvu","date":"2015-02-10T02:49:32.728Z","type":"join"}
{"nick":"imzyxwvu","message":"when i do this: local http = require \"http\" in a file required by another file, 'http' was not found. but if i add [[local require = require('luvit-require')()(\"bundle:modules/main.lua\")]] before it, everything works.","date":"2015-02-10T02:56:05.648Z","type":"message"}
{"nick":"imzyxwvu","message":"i'm using this build: \"https://ci.appveyor.com/project/racker-buildbot/luvit/build/1.0.175/artifacts\" the following code can cause it: a.lua: \"require 'b'\" b.lua \"http = require 'http'\"","date":"2015-02-10T02:58:00.528Z","type":"message"}
{"nick":"imzyxwvu","message":"it seems require.lua:formatters.lua didn't replace the require function of the module's env.","date":"2015-02-10T03:03:40.729Z","type":"message"}
{"nick":"^v","date":"2015-02-10T03:07:00.329Z","type":"join"}
{"nick":"imzyxwvu","reason":"Ping timeout: 252 seconds","date":"2015-02-10T03:16:13.271Z","type":"quit"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T03:20:48.313Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T03:22:37.217Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T03:28:18.264Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T03:40:53.295Z","type":"join"}
{"nick":"a_le","date":"2015-02-10T03:43:26.324Z","type":"join"}
{"nick":"imzyxwvu","date":"2015-02-10T03:49:13.967Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T03:52:53.277Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T04:00:59.300Z","type":"join"}
{"nick":"^v","reason":"Client Quit","date":"2015-02-10T04:01:00.134Z","type":"quit"}
{"nick":"imzyxwvu","reason":"Ping timeout: 246 seconds","date":"2015-02-10T04:01:53.885Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T04:07:10.325Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T04:25:23.180Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T04:27:40.159Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T04:49:33.320Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T04:50:26.775Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T05:01:38.235Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T05:02:40.214Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T05:10:48.344Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T05:14:59.245Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T05:22:28.256Z","type":"quit"}
{"nick":"a_le_","date":"2015-02-10T05:34:19.963Z","type":"join"}
{"nick":"a_le","reason":"Ping timeout: 256 seconds","date":"2015-02-10T05:37:51.301Z","type":"quit"}
{"nick":"a_le_","reason":"Ping timeout: 240 seconds","date":"2015-02-10T05:41:22.942Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T05:48:42.282Z","type":"join"}
{"nick":"a_le_","date":"2015-02-10T05:57:41.968Z","type":"join"}
{"nick":"a_le","reason":"Ping timeout: 252 seconds","date":"2015-02-10T05:59:01.378Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T05:59:34.452Z","type":"join"}
{"nick":"a_le_","reason":"Ping timeout: 246 seconds","date":"2015-02-10T06:03:24.025Z","type":"quit"}
{"nick":"imzyxwvu","date":"2015-02-10T06:55:00.395Z","type":"join"}
{"nick":"imzyxwvu","message":"rpi2 compiles luajit (-j4) in 90 seconds.","date":"2015-02-10T06:56:45.760Z","type":"message"}
{"nick":"Akagi201","reason":"Remote host closed the connection","date":"2015-02-10T06:59:36.228Z","type":"quit"}
{"nick":"Akagi201","date":"2015-02-10T07:00:13.910Z","type":"join"}
{"nick":"imzyxwvu1","date":"2015-02-10T07:04:26.968Z","type":"join"}
{"nick":"imzyxwvu","reason":"Ping timeout: 252 seconds","date":"2015-02-10T07:05:32.847Z","type":"quit"}
{"nick":"Akagi201_","date":"2015-02-10T07:20:34.541Z","type":"join"}
{"nick":"Akagi201","reason":"Ping timeout: 265 seconds","date":"2015-02-10T07:22:36.295Z","type":"quit"}
{"nick":"torpor","date":"2015-02-10T07:49:02.392Z","type":"join"}
{"nick":"DarkGod","date":"2015-02-10T08:34:28.353Z","type":"join"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T10:43:26.967Z","type":"quit"}
{"nick":"torpor","date":"2015-02-10T11:00:46.340Z","type":"join"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T11:20:34.747Z","type":"quit"}
{"nick":"torpor","date":"2015-02-10T11:23:26.392Z","type":"join"}
{"nick":"xt","reason":"Ping timeout: 265 seconds","date":"2015-02-10T12:34:21.449Z","type":"quit"}
{"nick":"xt","date":"2015-02-10T12:36:04.867Z","type":"join"}
{"nick":"UniOn","date":"2015-02-10T13:08:52.392Z","type":"join"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T13:39:02.859Z","type":"quit"}
{"nick":"rphillips","message":"nice","date":"2015-02-10T14:03:47.503Z","type":"message"}
{"nick":"rphillips","message":"imzyxwvu1: we replace the require system with that line","date":"2015-02-10T14:04:05.989Z","type":"message"}
{"nick":"imzyxwvu1","message":"rphillips: i thought the require in the env of a required module should also be replaced.","date":"2015-02-10T14:05:21.870Z","type":"message"}
{"nick":"torpor","date":"2015-02-10T14:07:39.331Z","type":"join"}
{"nick":"rphillips","message":"hmm. it should","date":"2015-02-10T14:11:16.977Z","type":"message"}
{"nick":"rphillips","message":"but it needs to come after the require line you pasted","date":"2015-02-10T14:12:05.179Z","type":"message"}
{"nick":"imzyxwvu1","message":"https://github.com/luvit/luvit/blob/luvi-up/app/modules/require.lua#L187  this made _G of require.lua exposed to the module, including _G.require (lua's original require). but i can't find how to let it expose the own require system of luvit.","date":"2015-02-10T14:16:19.709Z","type":"message"}
{"nick":"avidal","message":"L184 does that","date":"2015-02-10T14:18:07.199Z","type":"message"}
{"nick":"avidal","message":"requireName defaults to \"require\" and generate(module.path) creates a \"new\" luvit-require implementation rooted at the path that the new module was located","date":"2015-02-10T14:19:11.053Z","type":"message"}
{"nick":"imzyxwvu1","message":"avidal: but it seems the file required by another file can't require luvit's own library.","date":"2015-02-10T14:19:16.469Z","type":"message"}
{"nick":"imzyxwvu1","message":"a.lua: require \"b\" b.lua: local http = require \"http\"","date":"2015-02-10T14:19:53.993Z","type":"message"}
{"nick":"avidal","message":"are you sure the second module was actually located by luvit-require and not the fallback, which is lua require?","date":"2015-02-10T14:20:00.990Z","type":"message"}
{"nick":"imzyxwvu1","message":"luvit a.lua => .\\b.lua:1: module 'http' not found:","date":"2015-02-10T14:20:33.197Z","type":"message"}
{"nick":"imzyxwvu1","message":"seems i misused the new require","date":"2015-02-10T14:21:08.520Z","type":"message"}
{"nick":"avidal","message":"if luvit-require loads using the fallback, then the loaded module is still using the native require impl, not the luvit-require","date":"2015-02-10T14:21:15.221Z","type":"message"}
{"nick":"imzyxwvu1","message":"require \"./b\" works.","date":"2015-02-10T14:21:27.000Z","type":"message"}
{"nick":"imzyxwvu1","message":"sorry to bother you. i misused it.","date":"2015-02-10T14:21:35.849Z","type":"message"}
{"nick":"avidal","message":"in your example of a.lua requiring b and b requiring http, you can fix it in a.lua with:","date":"2015-02-10T14:22:19.210Z","type":"message"}
{"nick":"avidal","message":"require './b'","date":"2015-02-10T14:22:19.393Z","type":"message"}
{"nick":"avidal","message":"luvit-require doesn't look in the cwd for modules unless you prefix with ./","date":"2015-02-10T14:22:19.393Z","type":"message"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T14:23:12.926Z","type":"quit"}
{"nick":"avidal","message":"does that make sense?","date":"2015-02-10T14:23:23.446Z","type":"message"}
{"nick":"avidal","message":"you can verify if you change the value of requireName to something totally different; you'll see that the name is not available in the loaded module in your original example, and that's because it's actually being loaded by lua and not luvit","date":"2015-02-10T14:23:47.455Z","type":"message"}
{"nick":"imzyxwvu1","message":"i made more sense.","date":"2015-02-10T14:23:47.665Z","type":"message"}
{"nick":"avidal","message":"cheers :)","date":"2015-02-10T14:24:39.725Z","type":"message"}
{"nick":"avidal","message":"i dug into it quite a bit a couple of weeks ago","date":"2015-02-10T14:24:54.198Z","type":"message"}
{"nick":"avidal","message":"train just pulled in, gotta get going","date":"2015-02-10T14:25:22.433Z","type":"message"}
{"nick":"avidal","message":"glad i could help","date":"2015-02-10T14:25:24.574Z","type":"message"}
{"nick":"imzyxwvu1","message":"avidal: many thanks.","date":"2015-02-10T14:25:33.432Z","type":"message"}
{"nick":"imzyxwvu1","message":"your answer helped me a lot about this.","date":"2015-02-10T14:25:54.509Z","type":"message"}
{"nick":"rphillips","message":"thanks avidal","date":"2015-02-10T14:26:46.247Z","type":"message"}
{"nick":"imzyxwvu1","message":"i need to read the code of new luvit's require.lua more carefully.","date":"2015-02-10T14:27:01.919Z","type":"message"}
{"nick":"avidal","message":"np","date":"2015-02-10T14:35:26.049Z","type":"message"}
{"nick":"imzyxwvu1","message":"it seems new luvit doesn't have an url module.","date":"2015-02-10T14:37:31.728Z","type":"message"}
{"nick":"imzyxwvu1","message":"the one in old luvit is completely in lua. why not bump it?","date":"2015-02-10T14:38:14.755Z","type":"message"}
{"nick":"rphillips","message":"it hasn't been ported yet","date":"2015-02-10T14:41:52.467Z","type":"message"}
{"nick":"rphillips","message":"it's probably still in the old location in lib/luvit/...","date":"2015-02-10T14:42:03.604Z","type":"message"}
{"nick":"rphillips","message":"and there is probably a test in tests/to-convert/","date":"2015-02-10T14:42:13.763Z","type":"message"}
{"nick":"avidal","message":"your nicks are the same length and textual colors them the same way","date":"2015-02-10T14:47:03.955Z","type":"message"}
{"nick":"avidal","message":"so it looks like one person having a conversation with himself","date":"2015-02-10T14:47:10.081Z","type":"message"}
{"nick":"avidal","message":"imzyxwvu1: yeah, require.lua in luvit is a bit hard to grok; it could use more documentation i think","date":"2015-02-10T14:47:44.779Z","type":"message"}
{"nick":"a_le","reason":"Ping timeout: 255 seconds","date":"2015-02-10T14:49:46.513Z","type":"quit"}
{"nick":"rphillips","message":"yeah, there is also some different behaviors when the require is within a 'bundle' as wel","date":"2015-02-10T14:54:00.529Z","type":"message"}
{"nick":"rphillips","message":"well","date":"2015-02-10T14:54:02.270Z","type":"message"}
{"nick":"avidal","message":"yep","date":"2015-02-10T14:54:11.746Z","type":"message"}
{"nick":"a_le","date":"2015-02-10T15:06:56.252Z","type":"join"}
{"nick":"rphillips","message":"creationix: i'm add the tests directory to the lit 'app' and it says main.lua isn't found","date":"2015-02-10T15:10:32.066Z","type":"message"}
{"nick":"rphillips","message":"do you have an thought on how to add them in now","date":"2015-02-10T15:11:02.674Z","type":"message"}
{"nick":"rphillips","message":"?","date":"2015-02-10T15:11:04.619Z","type":"message"}
{"nick":"creationix","message":"lit app doesn’t work with luvit’s tests yet","date":"2015-02-10T15:11:38.219Z","type":"message"}
{"nick":"creationix","message":"but you can still use `LUVI_APP=app lit tests/run.lua`","date":"2015-02-10T15:11:46.129Z","type":"message"}
{"nick":"rphillips","message":"perfect... thanks","date":"2015-02-10T15:12:09.504Z","type":"message"}
{"nick":"torpor","date":"2015-02-10T15:27:38.328Z","type":"join"}
{"nick":"imzyxwvu1","message":"i suggest to import lua-cjson to luvi, for the following reason: 1. it's a fast implement, faster than any lua implement and it's also licensed under MIT. 2. JS provides a JSON object but Lua doesn't. 3. JSON is so widely used.","date":"2015-02-10T15:31:10.489Z","type":"message"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T15:47:19.662Z","type":"quit"}
{"nick":"imzyxwvu1","message":"https://github.com/imzyxwvu/luvit-fly this is a web framework for luvit still under construction. thanks if anyone could give me any suggestions. i'll complete the document later.","date":"2015-02-10T15:48:01.765Z","type":"message"}
{"nick":"rphillips","message":"creationix: thinking LUVI_MAIN might be appropriate","date":"2015-02-10T15:57:43.588Z","type":"message"}
{"nick":"rphillips","message":"right now it's using the app/main.lua... would be nice to make it the tests/run.lua","date":"2015-02-10T15:58:06.743Z","type":"message"}
{"nick":"creationix","message":"well, tests/run.lua isn’t a luvi main function, it’s a luvit script","date":"2015-02-10T15:58:44.511Z","type":"message"}
{"nick":"creationix","message":"slightly different interface","date":"2015-02-10T15:58:48.068Z","type":"message"}
{"nick":"rphillips","message":"right... it gets sourced from the app/main.lua","date":"2015-02-10T15:59:00.468Z","type":"message"}
{"nick":"creationix","message":"but we could maybe allow overriding main and convert run.lua to a main.lua format","date":"2015-02-10T15:59:19.922Z","type":"message"}
{"nick":"rphillips","message":"yeah","date":"2015-02-10T15:59:27.597Z","type":"message"}
{"nick":"rphillips","message":"not all apps will have 'require' a file support","date":"2015-02-10T15:59:40.995Z","type":"message"}
{"nick":"dan336","date":"2015-02-10T15:59:55.482Z","type":"join"}
{"nick":"xt","reason":"Ping timeout: 265 seconds","date":"2015-02-10T16:07:59.453Z","type":"quit"}
{"nick":"xt","date":"2015-02-10T16:15:18.694Z","type":"join"}
{"nick":"a_le","reason":"Ping timeout: 244 seconds","date":"2015-02-10T16:17:11.249Z","type":"quit"}
{"nick":"rphillips","message":"rje: creationix: https://github.com/virgo-agent-toolkit/virgo-base-agent/pull/148","date":"2015-02-10T16:21:10.809Z","type":"message"}
{"nick":"rphillips","message":"got virgo-base lit up","date":"2015-02-10T16:21:20.590Z","type":"message"}
{"nick":"rphillips","message":"punny :)","date":"2015-02-10T16:21:34.427Z","type":"message"}
{"nick":"creationix","message":"what do you think about my Makefile hack to built lit on the fly","date":"2015-02-10T16:22:03.367Z","type":"message"}
{"nick":"creationix","message":"ideally, we can just assume lit is in the user’s path","date":"2015-02-10T16:22:09.504Z","type":"message"}
{"nick":"creationix","message":"but it’s a little early for that I think","date":"2015-02-10T16:22:14.858Z","type":"message"}
{"nick":"rphillips","message":"for now. I think it's a good solution","date":"2015-02-10T16:22:18.603Z","type":"message"}
{"nick":"rphillips","message":"is there a way to enumerate which versions of packages are inlit?","date":"2015-02-10T16:23:15.962Z","type":"message"}
{"nick":"rphillips","message":"in lit*?","date":"2015-02-10T16:23:18.060Z","type":"message"}
{"nick":"joconnor","date":"2015-02-10T16:27:38.240Z","type":"join"}
{"nick":"a_le","date":"2015-02-10T16:46:37.325Z","type":"join"}
{"nick":"creationix","message":"rphillips: not yet, but it would be easy enough to add","date":"2015-02-10T16:47:05.665Z","type":"message"}
{"nick":"creationix","message":"should probably add it to `lit install` to not overwrite packages already installed","date":"2015-02-10T16:47:20.272Z","type":"message"}
{"nick":"rphillips","message":"now I want to build a luvi{t} OS","date":"2015-02-10T16:51:17.777Z","type":"message"}
{"nick":"creationix","message":"that could be fun","date":"2015-02-10T16:51:54.540Z","type":"message"}
{"nick":"rphillips","message":"no systemd, FTW","date":"2015-02-10T16:53:14.932Z","type":"message"}
{"nick":"torpor","date":"2015-02-10T17:04:55.390Z","type":"join"}
{"nick":"xt","reason":"Ping timeout: 265 seconds","date":"2015-02-10T17:05:30.244Z","type":"quit"}
{"nick":"xt","date":"2015-02-10T17:06:47.569Z","type":"join"}
{"nick":"imzyxwvu1","message":"good idea. i built a lua os whose INIT is a lua script that repl lua lines.","date":"2015-02-10T17:16:31.586Z","type":"message"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-02-10T17:33:31.721Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T17:34:07.443Z","type":"join"}
{"nick":"rje","message":"rphillips, nice lit'ified virgo","date":"2015-02-10T17:46:26.530Z","type":"message"}
{"nick":"rch","message":"diff looks too small, i was expecting it to be a real big change","date":"2015-02-10T17:50:15.039Z","type":"message"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T18:04:06.296Z","type":"quit"}
{"nick":"rphillips","message":"rje: just need to port the agent now","date":"2015-02-10T18:04:07.096Z","type":"message"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-02-10T18:04:37.964Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T18:05:13.389Z","type":"join"}
{"nick":"torpor","date":"2015-02-10T18:06:15.415Z","type":"join"}
{"nick":"DarkGod","reason":"Ping timeout: 265 seconds","date":"2015-02-10T18:09:18.411Z","type":"quit"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/virgo-base-agent/tree/luvi-up","date":"2015-02-10T18:15:45.470Z","type":"message"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T18:16:02.087Z","type":"quit"}
{"nick":"rphillips","message":"the base-agent tree looks simple... the actual code needs some cleanup","date":"2015-02-10T18:16:14.678Z","type":"message"}
{"nick":"torpor","date":"2015-02-10T18:29:39.338Z","type":"join"}
{"nick":"creationix","message":"rch: lit-up and luvi-up aren’t that different","date":"2015-02-10T18:39:33.270Z","type":"message"}
{"nick":"rch","message":"oh i see","date":"2015-02-10T18:43:54.933Z","type":"message"}
{"nick":"rphillips","message":"https://www.evernote.com/shard/s9/sh/357ac89f-79e1-4c15-8f7b-be66557fa207/a41ed69ae7d51d5bcaadad7b2006f568","date":"2015-02-10T18:51:34.922Z","type":"message"}
{"nick":"rphillips","message":"unit tests work on windows :)","date":"2015-02-10T18:51:40.320Z","type":"message"}
{"nick":"rphillips","message":"creationix: lit make app should pull the luvit deps right?","date":"2015-02-10T18:53:38.322Z","type":"message"}
{"nick":"rphillips","message":"if they are in the package.lua","date":"2015-02-10T18:53:50.011Z","type":"message"}
{"nick":"creationix","message":"make app imports the deps straight from the lit db to the zip, it then pulls all files from disk.  In the case of the luvit tree, the local file will overwrite the lit ones","date":"2015-02-10T18:54:30.315Z","type":"message"}
{"nick":"creationix","message":"but if you rm -rf app/modules, then `lit make app` will still make a valid luvit","date":"2015-02-10T18:54:50.967Z","type":"message"}
{"nick":"creationix","message":"I do need to add the .exe extension when on windows","date":"2015-02-10T18:55:02.689Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/4946e74f68d1a97addca","date":"2015-02-10T18:55:22.707Z","type":"message"}
{"nick":"rphillips","message":"this is my windows batch file","date":"2015-02-10T18:55:27.487Z","type":"message"}
{"nick":"rphillips","message":"if I run lit install within the app folder, the binary works","date":"2015-02-10T18:55:48.057Z","type":"message"}
{"nick":"rphillips","message":"if I do a lit make app, the require.lua file is missing","date":"2015-02-10T18:55:58.589Z","type":"message"}
{"nick":"creationix","message":"I should publish a luvit metapackage so you can depend on luvit","date":"2015-02-10T18:56:55.775Z","type":"message"}
{"nick":"rphillips","message":"+1","date":"2015-02-10T18:57:06.457Z","type":"message"}
{"nick":"creationix","message":"I think just a `lit publish` on luvit’s app folder will do it","date":"2015-02-10T18:57:09.243Z","type":"message"}
{"nick":"creationix","message":"you can try","date":"2015-02-10T18:57:10.900Z","type":"message"}
{"nick":"creationix","message":"hmm, actually, make sure to `rm -rf modules` first","date":"2015-02-10T18:57:24.139Z","type":"message"}
{"nick":"rphillips","message":"lit-up branch?","date":"2015-02-10T18:57:30.794Z","type":"message"}
{"nick":"creationix","message":"right","date":"2015-02-10T18:57:35.440Z","type":"message"}
{"nick":"rphillips","message":"k","date":"2015-02-10T18:57:37.154Z","type":"message"}
{"nick":"creationix","message":"you should still be authorized to publish to the luvit org","date":"2015-02-10T18:57:48.331Z","type":"message"}
{"nick":"rphillips","message":"woo","date":"2015-02-10T18:59:08.321Z","type":"message"}
{"nick":"rphillips","message":"seems to have worked","date":"2015-02-10T18:59:16.691Z","type":"message"}
{"nick":"rphillips","message":"creationix: is it called luvit/luvit?","date":"2015-02-10T19:00:11.951Z","type":"message"}
{"nick":"rphillips","message":"the package name","date":"2015-02-10T19:00:15.643Z","type":"message"}
{"nick":"creationix","message":"yep","date":"2015-02-10T19:00:22.563Z","type":"message"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-02-10T19:00:31.585Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T19:01:17.109Z","type":"join"}
{"nick":"creationix","message":"a_le: I believe libuv flushes the queue before calling the close callback","date":"2015-02-10T19:01:37.996Z","type":"message"}
{"nick":"rphillips","message":"hmm","date":"2015-02-10T19:01:38.179Z","type":"message"}
{"nick":"a_le","reason":"Read error: Connection reset by peer","date":"2015-02-10T19:01:52.097Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T19:02:08.311Z","type":"join"}
{"nick":"creationix","message":"a_le: no, sorry, it’s uv_shutdown that flushes","date":"2015-02-10T19:02:17.631Z","type":"message"}
{"nick":"rphillips","message":"No matching package: luvit/luvit@2.0.0","date":"2015-02-10T19:02:22.582Z","type":"message"}
{"nick":"creationix","message":"rphillips: what did it say when you published it?","date":"2015-02-10T19:02:36.583Z","type":"message"}
{"nick":"rphillips","message":"publishing: luvit@2.0.0","date":"2015-02-10T19:02:40.932Z","type":"message"}
{"nick":"rphillips","message":"done: success","date":"2015-02-10T19:02:45.214Z","type":"message"}
{"nick":"rphillips","message":"i did luvit publish","date":"2015-02-10T19:03:43.816Z","type":"message"}
{"nick":"rphillips","message":"is that right for the org?","date":"2015-02-10T19:03:49.163Z","type":"message"}
{"nick":"creationix","message":"oh interesting, it published to luvit@v2.0.0 instead of luvit/luvit@v2.0.0","date":"2015-02-10T19:04:31.723Z","type":"message"}
{"nick":"creationix","message":"rphillips: yep, my bad https://github.com/luvit/luvit/blob/lit-up/app/package.lua#L2","date":"2015-02-10T19:05:52.716Z","type":"message"}
{"nick":"creationix","message":"should be luvit/luvit","date":"2015-02-10T19:05:55.679Z","type":"message"}
{"nick":"creationix","message":"rphillips: pull lit-up and publish again","date":"2015-02-10T19:06:34.042Z","type":"message"}
{"nick":"DarkGod","date":"2015-02-10T19:07:21.863Z","type":"join"}
{"nick":"creationix","message":"rphillips: when it published, it didn’t include modules right?  Just init.lua and main.lua and package.lua I think","date":"2015-02-10T19:09:23.978Z","type":"message"}
{"nick":"rphillips","message":"correct","date":"2015-02-10T19:10:07.306Z","type":"message"}
{"nick":"rphillips","message":"pushed it again","date":"2015-02-10T19:10:09.410Z","type":"message"}
{"nick":"travis-ci","date":"2015-02-10T19:10:18.925Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#1563 (lit-up - 9356fcc : Tim Caswell): The build was broken.","date":"2015-02-10T19:10:19.891Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/3f11ea698b1b...9356fcc6bf0e","date":"2015-02-10T19:10:20.074Z","type":"message"}
{"nick":"travis-ci","message":"Build details : http://travis-ci.org/luvit/luvit/builds/50245135","date":"2015-02-10T19:10:20.074Z","type":"message"}
{"nick":"travis-ci","date":"2015-02-10T19:10:20.074Z","type":"part"}
{"nick":"creationix","message":"rphillips: looks like it’s working great","date":"2015-02-10T19:11:27.127Z","type":"message"}
{"nick":"creationix","message":"so luvit/luvit is both a luvi app and a library","date":"2015-02-10T19:11:54.178Z","type":"message"}
{"nick":"rphillips","message":"yeah","date":"2015-02-10T19:12:02.175Z","type":"message"}
{"nick":"creationix","message":"library mode just requires init.lua, but app mode uses main.lua","date":"2015-02-10T19:12:03.007Z","type":"message"}
{"nick":"rphillips","message":"the lit install... actually crashed on a pass","date":"2015-02-10T19:12:16.255Z","type":"message"}
{"nick":"rphillips","message":"something to try and reproduce","date":"2015-02-10T19:12:28.292Z","type":"message"}
{"nick":"rphillips","message":"within luvi","date":"2015-02-10T19:12:34.350Z","type":"message"}
{"nick":"rphillips","message":"maybe the ssl thing","date":"2015-02-10T19:12:42.135Z","type":"message"}
{"nick":"creationix","message":"interesting","date":"2015-02-10T19:12:42.318Z","type":"message"}
{"nick":"creationix","message":"your upstream is still wss right?","date":"2015-02-10T19:12:56.322Z","type":"message"}
{"nick":"rphillips","message":"i ran it again and it completed successfully","date":"2015-02-10T19:13:01.963Z","type":"message"}
{"nick":"creationix","message":"yeah, I haven’t seen a crash there yet","date":"2015-02-10T19:13:19.853Z","type":"message"}
{"nick":"rphillips","message":"yeah, wss","date":"2015-02-10T19:13:23.941Z","type":"message"}
{"nick":"rphillips","message":"creationix: https://github.com/virgo-agent-toolkit/virgo-base-agent.git","date":"2015-02-10T19:21:12.735Z","type":"message"}
{"nick":"rphillips","message":"could you try the luvi-up branch on your windows box?","date":"2015-02-10T19:21:19.748Z","type":"message"}
{"nick":"creationix","message":"doing that now","date":"2015-02-10T19:21:32.090Z","type":"message"}
{"nick":"rphillips","message":"make.bat lit","date":"2015-02-10T19:21:33.330Z","type":"message"}
{"nick":"rphillips","message":"make.bat virgo-base","date":"2015-02-10T19:21:36.971Z","type":"message"}
{"nick":"rphillips","message":"make.bat test","date":"2015-02-10T19:21:38.678Z","type":"message"}
{"nick":"rphillips","message":"luvit packages do not appear to be sucked down","date":"2015-02-10T19:21:56.439Z","type":"message"}
{"nick":"rphillips","message":"works on osx for me","date":"2015-02-10T19:25:48.477Z","type":"message"}
{"nick":"creationix","message":"almost done fixing lit make for windows","date":"2015-02-10T19:29:06.777Z","type":"message"}
{"nick":"rphillips","message":"sweet","date":"2015-02-10T19:30:02.190Z","type":"message"}
{"nick":"rphillips","message":"thanks","date":"2015-02-10T19:30:03.831Z","type":"message"}
{"nick":"rch","message":" creationix │ so luvit/luvit is both a luvi app and a library","date":"2015-02-10T19:30:30.541Z","type":"message"}
{"nick":"rch","message":"mindblown.gif","date":"2015-02-10T19:30:33.441Z","type":"message"}
{"nick":"creationix","message":"rch: yep","date":"2015-02-10T19:30:46.684Z","type":"message"}
{"nick":"rphillips","message":"virgo-base is the same way","date":"2015-02-10T19:33:23.903Z","type":"message"}
{"nick":"rphillips","message":"though the app is just the test suite","date":"2015-02-10T19:33:28.674Z","type":"message"}
{"nick":"creationix","message":"rphillips: almost working. Try with latest lit and luvi-up","date":"2015-02-10T19:33:38.325Z","type":"message"}
{"nick":"creationix","message":"(assuming you’re on a windows box)","date":"2015-02-10T19:33:47.165Z","type":"message"}
{"nick":"rphillips","message":"yeah... trying...","date":"2015-02-10T19:33:56.434Z","type":"message"}
{"nick":"creationix","message":"it appears the issue now is path handling somewhere","date":"2015-02-10T19:34:12.481Z","type":"message"}
{"nick":"rphillips","message":"creationix: https://www.evernote.com/shard/s9/sh/cd161898-7765-4199-b55b-9251d9034626/72cc9fe87b6849e967a1e1f2cb186474","date":"2015-02-10T19:36:06.279Z","type":"message"}
{"nick":"rphillips","message":"is this what you see?","date":"2015-02-10T19:36:09.197Z","type":"message"}
{"nick":"travis-ci","date":"2015-02-10T19:36:27.214Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#1564 (lit-up - 0901c49 : Tim Caswell): The build was fixed.","date":"2015-02-10T19:36:28.079Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/9356fcc6bf0e...0901c4997d12","date":"2015-02-10T19:36:28.926Z","type":"message"}
{"nick":"travis-ci","message":"Build details : http://travis-ci.org/luvit/luvit/builds/50248667","date":"2015-02-10T19:36:29.110Z","type":"message"}
{"nick":"travis-ci","date":"2015-02-10T19:36:29.110Z","type":"part"}
{"nick":"creationix","message":"something like that","date":"2015-02-10T19:36:30.329Z","type":"message"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T19:37:09.334Z","type":"quit"}
{"nick":"creationix","message":"windows says luvit.exe is not a valid zip","date":"2015-02-10T19:37:16.173Z","type":"message"}
{"nick":"rphillips","message":"hmm","date":"2015-02-10T19:37:35.260Z","type":"message"}
{"nick":"creationix","message":"mingw unzip can read it","date":"2015-02-10T19:38:17.685Z","type":"message"}
{"nick":"creationix","message":"it’s missing main.lua and init.lua","date":"2015-02-10T19:38:23.119Z","type":"message"}
{"nick":"creationix","message":"it installed the deps, but not the files","date":"2015-02-10T19:38:32.091Z","type":"message"}
{"nick":"joconnor","date":"2015-02-10T19:38:49.128Z","type":"quit"}
{"nick":"creationix","message":"lit must still be broken on windows, will fix","date":"2015-02-10T19:38:53.846Z","type":"message"}
{"nick":"rphillips","message":"i don't see the luvit modules being pulled down","date":"2015-02-10T19:39:27.160Z","type":"message"}
{"nick":"creationix","message":"I’m still trying to get luvit itself to `lit make`.  You have luvit/luvit@2.0.0 as a dep right?","date":"2015-02-10T19:41:46.998Z","type":"message"}
{"nick":"creationix","message":"maybe I’m not pulling in deps recursivly","date":"2015-02-10T19:43:53.573Z","type":"message"}
{"nick":"rphillips","message":"yeah, it's in the package.lua","date":"2015-02-10T19:47:25.590Z","type":"message"}
{"nick":"travis-ci","date":"2015-02-10T19:48:48.314Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#1565 (lit-up - be044b5 : Tim Caswell): The build passed.","date":"2015-02-10T19:48:49.372Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/0901c4997d12...be044b5353b5","date":"2015-02-10T19:48:49.555Z","type":"message"}
{"nick":"travis-ci","message":"Build details : http://travis-ci.org/luvit/luvit/builds/50250642","date":"2015-02-10T19:48:49.555Z","type":"message"}
{"nick":"travis-ci","date":"2015-02-10T19:48:49.555Z","type":"part"}
{"nick":"creationix","message":"hmm, when I make a sample app with just one dep to luvit/luvit@2.0.0 it pulls in all the luvit libs","date":"2015-02-10T19:50:33.428Z","type":"message"}
{"nick":"creationix","message":"I think part of the problem is LUVI_APP doesn’t like windows paths","date":"2015-02-10T19:51:49.963Z","type":"message"}
{"nick":"creationix","message":"in the Make.bat file, I used relative unix paths like “lit/app” and it works","date":"2015-02-10T19:52:15.554Z","type":"message"}
{"nick":"creationix","message":"but passing in uv.cwd() which looks like ‘C:\\Code\\luvit/app’, it breaks","date":"2015-02-10T19:52:29.810Z","type":"message"}
{"nick":"creationix","message":"\\Code\\luvit\\app","date":"2015-02-10T19:52:36.556Z","type":"message"}
{"nick":"imzyxwvu1","reason":"Ping timeout: 246 seconds","date":"2015-02-10T19:56:45.013Z","type":"quit"}
{"nick":"creationix","message":"ok, so LUVI_APP is a *colon* separated list, what could go wrong with windows paths containing colons :/","date":"2015-02-10T20:01:49.160Z","type":"message"}
{"nick":"rphillips","message":"hmm. it looks like the lit app is being used with a make virgo-base","date":"2015-02-10T20:03:01.313Z","type":"message"}
{"nick":"rphillips","message":"the lit main.lua*","date":"2015-02-10T20:03:07.281Z","type":"message"}
{"nick":"creationix","message":"rphillips: what do you mean?","date":"2015-02-10T20:08:00.095Z","type":"message"}
{"nick":"rphillips","message":"creationix: https://www.evernote.com/shard/s9/sh/cd161898-7765-4199-b55b-9251d9034626/72cc9fe87b6849e967a1e1f2cb186474","date":"2015-02-10T20:08:40.967Z","type":"message"}
{"nick":"rphillips","message":"see how it is using commands/tests...","date":"2015-02-10T20:08:48.862Z","type":"message"}
{"nick":"creationix","message":"oh, it’s interpreting your arg as a lit command","date":"2015-02-10T20:09:18.644Z","type":"message"}
{"nick":"creationix","message":"how are you calling lit?","date":"2015-02-10T20:09:29.645Z","type":"message"}
{"nick":"rphillips","message":"virgo-base.exe tests\\run.lua","date":"2015-02-10T20:10:25.971Z","type":"message"}
{"nick":"rphillips","message":"its the in the make.bat file","date":"2015-02-10T20:10:32.124Z","type":"message"}
{"nick":"creationix","message":"interesting, virgo-base has lit’s main","date":"2015-02-10T20:11:02.207Z","type":"message"}
{"nick":"creationix","message":"yeah, `lit make` is busted for sure.","date":"2015-02-10T20:12:51.741Z","type":"message"}
{"nick":"creationix","message":"it’s not including luvit’s main and it’s giving you lit’s main","date":"2015-02-10T20:13:00.211Z","type":"message"}
{"nick":"creationix","message":"I pushed a patch to luvi that helps it work better on windows","date":"2015-02-10T20:13:14.607Z","type":"message"}
{"nick":"creationix","message":"rphillips: found the bug","date":"2015-02-10T20:17:17.623Z","type":"message"}
{"nick":"creationix","message":"fs.scandir isn’t reporting the type on windows","date":"2015-02-10T20:18:50.235Z","type":"message"}
{"nick":"creationix","message":"so lit make is skipping all files when importing","date":"2015-02-10T20:19:01.921Z","type":"message"}
{"nick":"creationix","message":"I’m guessing your command has a trailing : somewhere in LUVI_APP and that’s why it’s inheriting from lit","date":"2015-02-10T20:19:18.499Z","type":"message"}
{"nick":"rphillips","message":"hmm","date":"2015-02-10T20:20:22.880Z","type":"message"}
{"nick":"rphillips","message":"i don't see LUVI_APP being set anywhere but the Make.bat file","date":"2015-02-10T20:23:19.395Z","type":"message"}
{"nick":"travis-ci","date":"2015-02-10T20:28:49.384Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luv#236 (master - e17c72a : Tim Caswell): The build has errored.","date":"2015-02-10T20:28:50.343Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luv/compare/dd2b78ae5e26...e17c72a78bc0","date":"2015-02-10T20:28:50.526Z","type":"message"}
{"nick":"travis-ci","message":"Build details : http://travis-ci.org/luvit/luv/builds/50255778","date":"2015-02-10T20:28:50.526Z","type":"message"}
{"nick":"travis-ci","date":"2015-02-10T20:28:50.526Z","type":"part"}
{"nick":"rphillips","message":"picking up the kids from school. brb in 20","date":"2015-02-10T20:29:41.246Z","type":"message"}
{"nick":"creationix","message":"ok","date":"2015-02-10T20:34:23.766Z","type":"message"}
{"nick":"Akagi201","date":"2015-02-10T20:50:31.899Z","type":"join"}
{"nick":"a_le","message":"creationix: i think i missed your message...","date":"2015-02-10T20:51:32.635Z","type":"message"}
{"nick":"creationix","message":"what were you asking?  (I’m at a different computer now)","date":"2015-02-10T20:51:58.161Z","type":"message"}
{"nick":"Akagi201_","reason":"Ping timeout: 246 seconds","date":"2015-02-10T20:52:21.014Z","type":"quit"}
{"nick":"creationix","message":"oh, something about uv_close right","date":"2015-02-10T20:53:11.173Z","type":"message"}
{"nick":"creationix","message":"so uv_shutdown will flush all buffers and callback when it’s safe to uv_close","date":"2015-02-10T20:53:22.881Z","type":"message"}
{"nick":"rphillips","message":".","date":"2015-02-10T20:53:37.939Z","type":"message"}
{"nick":"creationix","message":"rphillips: I fixed `lit make` for windows I think","date":"2015-02-10T20:53:49.541Z","type":"message"}
{"nick":"rphillips","message":"sweet","date":"2015-02-10T20:53:53.368Z","type":"message"}
{"nick":"rphillips","message":"trying it out","date":"2015-02-10T20:53:57.712Z","type":"message"}
{"nick":"a_le","message":"creationix: not sure i understand... wouldn't uv_close_cb be the only thing i need to wait for?","date":"2015-02-10T20:54:07.773Z","type":"message"}
{"nick":"a_le","message":"(before I free my handle)","date":"2015-02-10T20:54:28.222Z","type":"message"}
{"nick":"creationix","message":"I would think that would drop buffered data","date":"2015-02-10T20:54:28.520Z","type":"message"}
{"nick":"creationix","message":"http://docs.libuv.org/en/v1.x/stream.html#c.uv_shutdown","date":"2015-02-10T20:54:52.434Z","type":"message"}
{"nick":"creationix","message":"right, always wait till close_cb before freeing the handle","date":"2015-02-10T20:55:06.222Z","type":"message"}
{"nick":"creationix","message":"a_le: there is still old issue https://github.com/joyent/libuv/issues/157","date":"2015-02-10T20:56:22.671Z","type":"message"}
{"nick":"rphillips","message":"looks like the same issue...","date":"2015-02-10T20:56:28.845Z","type":"message"}
{"nick":"a_le","message":"but so, uv_shutdown is only necessary if i want to be sure to deliver all of the queued data?","date":"2015-02-10T20:56:31.830Z","type":"message"}
{"nick":"rphillips","message":"updated lit on master","date":"2015-02-10T20:56:34.838Z","type":"message"}
{"nick":"creationix","message":"a_le: right, that’s my understanding","date":"2015-02-10T20:56:41.146Z","type":"message"}
{"nick":"a_le","message":"then in the shutdown callback i actually do uv_close","date":"2015-02-10T20:57:03.550Z","type":"message"}
{"nick":"a_le","message":"and then in the uv_close callback i actually free?","date":"2015-02-10T20:57:12.548Z","type":"message"}
{"nick":"torpor","date":"2015-02-10T20:57:15.324Z","type":"join"}
{"nick":"creationix","message":"rphillips: also I just pushed a patch to the windows binaries for luvi","date":"2015-02-10T20:57:32.730Z","type":"message"}
{"nick":"rphillips","message":"ah k","date":"2015-02-10T20:57:39.301Z","type":"message"}
{"nick":"creationix","message":"rphillips: in luvit/luvit I can now do `make clean` and `make test` on windows and it works","date":"2015-02-10T20:58:13.418Z","type":"message"}
{"nick":"creationix","message":"look at the changes I made to the Make.bat file","date":"2015-02-10T20:58:23.117Z","type":"message"}
{"nick":"creationix","message":"(lit-up branch)","date":"2015-02-10T20:58:29.982Z","type":"message"}
{"nick":"rphillips","message":"k","date":"2015-02-10T20:58:46.274Z","type":"message"}
{"nick":"DarkGod","reason":"Remote host closed the connection","date":"2015-02-10T21:01:08.442Z","type":"quit"}
{"nick":"rphillips","message":"hmm. still looks like it's using the lit main.lua","date":"2015-02-10T21:01:47.918Z","type":"message"}
{"nick":"rphillips","message":"pushed the virgo-base#luvi-up branch with the updated makefile","date":"2015-02-10T21:02:32.428Z","type":"message"}
{"nick":"rphillips","message":"ok... still trying it out...","date":"2015-02-10T21:05:16.901Z","type":"message"}
{"nick":"rphillips","message":"got closer","date":"2015-02-10T21:05:20.785Z","type":"message"}
{"nick":"rphillips","message":"ok. I need to move the modules/* files","date":"2015-02-10T21:09:07.430Z","type":"message"}
{"nick":"creationix","message":"also you don’t need all the luvit/* deps, just luvit/luvit","date":"2015-02-10T21:10:00.035Z","type":"message"}
{"nick":"rphillips","message":"got that one","date":"2015-02-10T21:10:07.802Z","type":"message"}
{"nick":"rphillips","message":"so if I move app/modules/virgo to app/virgo","date":"2015-02-10T21:10:22.782Z","type":"message"}
{"nick":"rphillips","message":"require('virgo...') works?","date":"2015-02-10T21:10:33.331Z","type":"message"}
{"nick":"creationix","message":"don’t think so","date":"2015-02-10T21:10:54.851Z","type":"message"}
{"nick":"rphillips","message":"i'm getting a module 'virgo/connection' not found","date":"2015-02-10T21:10:55.049Z","type":"message"}
{"nick":"creationix","message":"require looks in the modules folder only","date":"2015-02-10T21:11:12.816Z","type":"message"}
{"nick":"rphillips","message":"wasn't there a lit patch to ignore that folder?","date":"2015-02-10T21:11:30.317Z","type":"message"}
{"nick":"creationix","message":"but you can do “./virgo” from main.lua assuming your require bootstrap has the right path","date":"2015-02-10T21:11:31.244Z","type":"message"}
{"nick":"creationix","message":"lit make now ignores modules, I should probably add that to lit publish too","date":"2015-02-10T21:12:01.648Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/virgo-base-agent/blob/luvi-up/tests/test-connection.lua#L16","date":"2015-02-10T21:12:24.289Z","type":"message"}
{"nick":"rphillips","message":"what is the best to load the module now?","date":"2015-02-10T21:12:34.188Z","type":"message"}
{"nick":"a__","reason":"Remote host closed the connection","date":"2015-02-10T21:12:52.394Z","type":"quit"}
{"nick":"rphillips","message":"the virgo module was in app/modules","date":"2015-02-10T21:12:56.643Z","type":"message"}
{"nick":"creationix","message":"hmm, virgo is a library not an app","date":"2015-02-10T21:13:17.621Z","type":"message"}
{"nick":"creationix","message":"that looks ideal","date":"2015-02-10T21:13:21.769Z","type":"message"}
{"nick":"creationix","message":"but from within virgo’s tests, you probably need “../app/init” or something","date":"2015-02-10T21:13:50.803Z","type":"message"}
{"nick":"creationix","message":"I gotta run, I’ll brb in about an hour","date":"2015-02-10T21:14:19.929Z","type":"message"}
{"nick":"rphillips","message":"np","date":"2015-02-10T21:14:52.660Z","type":"message"}
{"nick":"a__","date":"2015-02-10T21:15:36.813Z","type":"join"}
{"nick":"torpor1","date":"2015-02-10T21:25:21.341Z","type":"join"}
{"nick":"torpor","reason":"Ping timeout: 252 seconds","date":"2015-02-10T21:27:03.287Z","type":"quit"}
{"nick":"rphillips","message":"looks like luvit:lit-up is installing the luvit modules from lit to run the tests against","date":"2015-02-10T21:53:07.333Z","type":"message"}
{"nick":"rphillips","message":"i'm getting virgo/connection not found","date":"2015-02-10T21:53:33.615Z","type":"message"}
{"nick":"torpor1","reason":"Quit: Leaving.","date":"2015-02-10T21:53:41.705Z","type":"quit"}
{"nick":"rphillips","message":"which makes sense because the files are local","date":"2015-02-10T21:53:44.058Z","type":"message"}
{"nick":"rphillips","message":"yeah, i think we will need to fix the packaging...","date":"2015-02-10T22:19:12.295Z","type":"message"}
{"nick":"creationix","message":"rphillips: ok, I’m back","date":"2015-02-10T22:21:31.492Z","type":"message"}
{"nick":"rphillips","message":"wb","date":"2015-02-10T22:22:45.554Z","type":"message"}
{"nick":"rphillips","message":"creationix: see my messages on the state of things?","date":"2015-02-10T22:23:12.290Z","type":"message"}
{"nick":"creationix","message":"can I check out your code?","date":"2015-02-10T22:24:20.580Z","type":"message"}
{"nick":"creationix","message":"luvit/luvit is working as expected for me on windows now","date":"2015-02-10T22:24:28.503Z","type":"message"}
{"nick":"creationix","message":"the only remaining bug in lit-up is something is broken in the repl","date":"2015-02-10T22:24:40.089Z","type":"message"}
{"nick":"rphillips","message":"yeah, I checked it all in","date":"2015-02-10T22:25:16.816Z","type":"message"}
{"nick":"creationix","message":"rphillips: your luvit at lit-up isn’t working?","date":"2015-02-10T22:25:38.589Z","type":"message"}
{"nick":"rphillips","message":"that works","date":"2015-02-10T22:25:50.872Z","type":"message"}
{"nick":"rphillips","message":"virgo-base#luvi-up","date":"2015-02-10T22:25:56.089Z","type":"message"}
{"nick":"rphillips","message":"luvit's lit-up is installing the luvit modules from lit, then running tests against those","date":"2015-02-10T22:26:32.244Z","type":"message"}
{"nick":"creationix","message":"you mean lit-up?","date":"2015-02-10T22:26:33.617Z","type":"message"}
{"nick":"creationix","message":"rphillips: oh, you mean from the central repository","date":"2015-02-10T22:26:58.761Z","type":"message"}
{"nick":"creationix","message":"yes, I do know about that","date":"2015-02-10T22:27:02.885Z","type":"message"}
{"nick":"creationix","message":"I should probably fix that","date":"2015-02-10T22:27:08.504Z","type":"message"}
{"nick":"rphillips","message":"i merged the lit-up branch to luvi-up in virgo-base","date":"2015-02-10T22:27:30.461Z","type":"message"}
{"nick":"rphillips","message":"probably was a bit premature","date":"2015-02-10T22:27:39.270Z","type":"message"}
{"nick":"creationix","message":"just created lit #22 for that","date":"2015-02-10T22:27:41.824Z","type":"message"}
{"nick":"creationix","message":"ok, so virgo-base is a library only right?","date":"2015-02-10T22:29:32.360Z","type":"message"}
{"nick":"creationix","message":"rphillips: how is virgo-base used?  If it’s just a library and not a standalone app it should probably have a “lib” folder instead of “app” and doesn’t need main.lua","date":"2015-02-10T22:35:33.691Z","type":"message"}
{"nick":"creationix","message":"so for running the tests, I think a custom main would help a lot","date":"2015-02-10T22:36:29.112Z","type":"message"}
{"nick":"rphillips","message":"it's a library","date":"2015-02-10T22:38:17.408Z","type":"message"}
{"nick":"rphillips","message":"creationix: could you help me tweak virgo-base","date":"2015-02-10T22:38:52.816Z","type":"message"}
{"nick":"rphillips","message":"?","date":"2015-02-10T22:38:54.322Z","type":"message"}
{"nick":"creationix","message":"yeah, just making sure I understand the use case","date":"2015-02-10T22:39:06.138Z","type":"message"}
{"nick":"creationix","message":"I haven’t made a lit library this big yet","date":"2015-02-10T22:39:13.045Z","type":"message"}
{"nick":"rphillips","message":"yeah, it's used by the monitoring agent","date":"2015-02-10T22:39:17.502Z","type":"message"}
{"nick":"rphillips","message":"it's basically a library for agents","date":"2015-02-10T22:39:29.127Z","type":"message"}
{"nick":"rphillips","message":"has connection logic, etc","date":"2015-02-10T22:39:39.242Z","type":"message"}
{"nick":"creationix","message":"so is it the library’s responsibility to setup the luvit style env? (globals, event loop, etc)","date":"2015-02-10T22:39:46.978Z","type":"message"}
{"nick":"rphillips","message":"i would say it's the agent's responsibility to setup the event loop, etc","date":"2015-02-10T22:40:07.824Z","type":"message"}
{"nick":"rphillips","message":"virgo-base is just a library of luvit code","date":"2015-02-10T22:40:18.869Z","type":"message"}
{"nick":"creationix","message":"ok, I’ll try some stuff and send a pr","date":"2015-02-10T22:40:25.776Z","type":"message"}
{"nick":"rphillips","message":"thanks!","date":"2015-02-10T22:40:29.423Z","type":"message"}
{"nick":"creationix","message":"rphillips: what org should this be under in lit?","date":"2015-02-10T22:44:29.452Z","type":"message"}
{"nick":"creationix","message":"you can claim any github org that you’re a public member of","date":"2015-02-10T22:44:45.638Z","type":"message"}
{"nick":"rphillips","message":"virgo-agent-toolkit","date":"2015-02-10T22:44:47.968Z","type":"message"}
{"nick":"creationix","message":"run `lit claim virgo-agent-toolkit`","date":"2015-02-10T22:45:09.290Z","type":"message"}
{"nick":"creationix","message":"and then to add me, run `lit share virgo-agent-toolkit creationix`","date":"2015-02-10T22:45:21.444Z","type":"message"}
{"nick":"rphillips","message":"done","date":"2015-02-10T22:48:18.654Z","type":"message"}
{"nick":"creationix","message":"I see it","date":"2015-02-10T22:48:46.621Z","type":"message"}
{"nick":"creationix","action":"is amazed lit is actually working","date":"2015-02-10T22:48:56.491Z","type":"action"}
{"nick":"rphillips","message":"totally impressed as well","date":"2015-02-10T22:49:07.120Z","type":"message"}
{"nick":"UniOn","reason":"Read error: Connection reset by peer","date":"2015-02-10T22:52:01.851Z","type":"quit"}
{"nick":"UniOn","date":"2015-02-10T22:52:27.267Z","type":"join"}
{"nick":"creationix","message":"would you prefer a custom main in luvi or just assume the user has a luvit standalone binary for running tests?","date":"2015-02-10T22:52:38.233Z","type":"message"}
{"nick":"creationix","message":"if you go to https://github.com/luvit/lit-backup and look at the list of tags, you can see all the packages in lit.luvit.io","date":"2015-02-10T22:54:58.048Z","type":"message"}
{"nick":"creationix","message":"or `git ls-remote git://github.com/luvit/lit-backup.git | grep tags`","date":"2015-02-10T22:55:20.093Z","type":"message"}
{"nick":"creationix","message":"I’m still manually pushing the backup though, so it’s not always up to date","date":"2015-02-10T22:57:08.404Z","type":"message"}
{"nick":"creationix","message":"I just log in as lit@luvit.io and do `git push --tags`","date":"2015-02-10T22:57:29.445Z","type":"message"}
{"nick":"a_le","message":"after on_close(my_handle), if i walk all the handles i can find my_handle still pending, closing, but devoided of its type...","date":"2015-02-10T23:14:26.127Z","type":"message"}
{"nick":"a_le","message":"creationix: how does this make sense?","date":"2015-02-10T23:15:19.047Z","type":"message"}
{"nick":"creationix","message":"uv_walk iterates over your closed handle?","date":"2015-02-10T23:15:56.892Z","type":"message"}
{"nick":"creationix","message":"I don’t think that should happen","date":"2015-02-10T23:16:04.679Z","type":"message"}
{"nick":"a_le","message":"well it appears not to be closed","date":"2015-02-10T23:16:04.970Z","type":"message"}
{"nick":"a_le","message":"but i got my callback invoked with that handle","date":"2015-02-10T23:16:12.327Z","type":"message"}
{"nick":"creationix","message":"if the close callback gets called it better be closed","date":"2015-02-10T23:16:20.835Z","type":"message"}
{"nick":"a_le","message":"also, UV_HANDLE_TYPE_MAP returns unknown","date":"2015-02-10T23:16:23.583Z","type":"message"}
{"nick":"a_le","message":"and the loop hangs","date":"2015-02-10T23:16:57.815Z","type":"message"}
{"nick":"a_le","message":"i.e. that handle never gets closed","date":"2015-02-10T23:17:04.051Z","type":"message"}
{"nick":"a_le","message":"and given i have no other events, it's stuck there forever","date":"2015-02-10T23:17:14.797Z","type":"message"}
{"nick":"creationix","message":"is it `is_closing`?","date":"2015-02-10T23:17:50.500Z","type":"message"}
{"nick":"a_le","message":"yes","date":"2015-02-10T23:18:15.229Z","type":"message"}
{"nick":"a_le","message":"walkAndCountHandlesCb[9] {0x75172a0}[0] still waiting on pending handle of type <unknown> @0x8d3fed8 which is closing","date":"2015-02-10T23:18:16.706Z","type":"message"}
{"nick":"creationix","message":"I can’t imagine what’s causing that.  Did you try asking in #libuv?","date":"2015-02-10T23:18:53.478Z","type":"message"}
{"nick":"a_le","message":"oh damn i am in #luvit","date":"2015-02-10T23:19:05.217Z","type":"message"}
{"nick":"a_le","message":"on_close[7] {0x8d3fec0}A[1];handle@0x8d3fed8;|0->|->0|0-> down() for an on_close(0x8d3fed8) TCP handle","date":"2015-02-10T23:19:09.363Z","type":"message"}
{"nick":"a_le","message":"this is where it got closed a while before","date":"2015-02-10T23:19:18.096Z","type":"message"}
{"nick":"a_le","message":"the callback for that had been invoked","date":"2015-02-10T23:19:26.904Z","type":"message"}
{"nick":"a_le","message":"i should print the type there too, TCP handle is just inferred by me from the offset within the struct","date":"2015-02-10T23:20:21.149Z","type":"message"}
