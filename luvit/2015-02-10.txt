{"nick":"rphillips","message":"man this is sweet","date":"2015-02-10T00:38:17.631Z","type":"message"}
{"nick":"rphillips","message":"creationix: tried it out... works great","date":"2015-02-10T00:38:22.833Z","type":"message"}
{"nick":"rphillips","message":"going to clone into the agent and try this out","date":"2015-02-10T00:39:05.883Z","type":"message"}
{"nick":"DarkGod","reason":"Ping timeout: 255 seconds","date":"2015-02-10T00:44:13.537Z","type":"quit"}
{"nick":"joconnor_","reason":"Ping timeout: 245 seconds","date":"2015-02-10T00:47:19.600Z","type":"quit"}
{"nick":"rphillips","message":"cool. I have a noop main working with the monitoring agent + new lit + luvit2 within lit","date":"2015-02-10T01:14:03.790Z","type":"message"}
{"nick":"rphillips","message":"working good so far","date":"2015-02-10T01:14:18.802Z","type":"message"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-02-10T01:18:24.680Z","type":"quit"}
{"nick":"rphillips","message":"unit tests are passing in virgo-base","date":"2015-02-10T01:29:35.948Z","type":"message"}
{"nick":"rphillips","message":"creationix: is the luvit/init module checked into lit?","date":"2015-02-10T01:30:02.066Z","type":"message"}
{"nick":"UniOn","reason":"Remote host closed the connection","date":"2015-02-10T01:31:29.263Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T01:35:35.969Z","type":"join"}
{"nick":"a_le","message":"how do i empty the write queue for a stream?","date":"2015-02-10T01:41:28.034Z","type":"message"}
{"nick":"a_le","message":"in other words, if there are pending write requests for a stream, and i uv_close the stream, do i need to worry that handle->write_queue_size might be still non-zero if i now want to proceed and delete the data structure where the stream handle is embedded?","date":"2015-02-10T01:45:29.366Z","type":"message"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-02-10T02:14:30.897Z","type":"quit"}
{"nick":"rphillips","message":"hmm. a close() or destroy() should work","date":"2015-02-10T02:17:16.886Z","type":"message"}
{"nick":"a_le","date":"2015-02-10T02:21:19.306Z","type":"join"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2015-02-10T02:44:04.743Z","type":"quit"}
{"nick":"imzyxwvu","date":"2015-02-10T02:49:32.728Z","type":"join"}
{"nick":"imzyxwvu","message":"when i do this: local http = require \"http\" in a file required by another file, 'http' was not found. but if i add [[local require = require('luvit-require')()(\"bundle:modules/main.lua\")]] before it, everything works.","date":"2015-02-10T02:56:05.648Z","type":"message"}
{"nick":"imzyxwvu","message":"i'm using this build: \"https://ci.appveyor.com/project/racker-buildbot/luvit/build/1.0.175/artifacts\" the following code can cause it: a.lua: \"require 'b'\" b.lua \"http = require 'http'\"","date":"2015-02-10T02:58:00.528Z","type":"message"}
{"nick":"imzyxwvu","message":"it seems require.lua:formatters.lua didn't replace the require function of the module's env.","date":"2015-02-10T03:03:40.729Z","type":"message"}
{"nick":"^v","date":"2015-02-10T03:07:00.329Z","type":"join"}
{"nick":"imzyxwvu","reason":"Ping timeout: 252 seconds","date":"2015-02-10T03:16:13.271Z","type":"quit"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T03:20:48.313Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T03:22:37.217Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T03:28:18.264Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T03:40:53.295Z","type":"join"}
{"nick":"a_le","date":"2015-02-10T03:43:26.324Z","type":"join"}
{"nick":"imzyxwvu","date":"2015-02-10T03:49:13.967Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T03:52:53.277Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T04:00:59.300Z","type":"join"}
{"nick":"^v","reason":"Client Quit","date":"2015-02-10T04:01:00.134Z","type":"quit"}
{"nick":"imzyxwvu","reason":"Ping timeout: 246 seconds","date":"2015-02-10T04:01:53.885Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T04:07:10.325Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T04:25:23.180Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T04:27:40.159Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T04:49:33.320Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T04:50:26.775Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T05:01:38.235Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T05:02:40.214Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T05:10:48.344Z","type":"quit"}
{"nick":"^v","date":"2015-02-10T05:14:59.245Z","type":"join"}
{"nick":"^v","reason":"Ping timeout: 245 seconds","date":"2015-02-10T05:22:28.256Z","type":"quit"}
{"nick":"a_le_","date":"2015-02-10T05:34:19.963Z","type":"join"}
{"nick":"a_le","reason":"Ping timeout: 256 seconds","date":"2015-02-10T05:37:51.301Z","type":"quit"}
{"nick":"a_le_","reason":"Ping timeout: 240 seconds","date":"2015-02-10T05:41:22.942Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T05:48:42.282Z","type":"join"}
{"nick":"a_le_","date":"2015-02-10T05:57:41.968Z","type":"join"}
{"nick":"a_le","reason":"Ping timeout: 252 seconds","date":"2015-02-10T05:59:01.378Z","type":"quit"}
{"nick":"a_le","date":"2015-02-10T05:59:34.452Z","type":"join"}
{"nick":"a_le_","reason":"Ping timeout: 246 seconds","date":"2015-02-10T06:03:24.025Z","type":"quit"}
{"nick":"imzyxwvu","date":"2015-02-10T06:55:00.395Z","type":"join"}
{"nick":"imzyxwvu","message":"rpi2 compiles luajit (-j4) in 90 seconds.","date":"2015-02-10T06:56:45.760Z","type":"message"}
{"nick":"Akagi201","reason":"Remote host closed the connection","date":"2015-02-10T06:59:36.228Z","type":"quit"}
{"nick":"Akagi201","date":"2015-02-10T07:00:13.910Z","type":"join"}
{"nick":"imzyxwvu1","date":"2015-02-10T07:04:26.968Z","type":"join"}
{"nick":"imzyxwvu","reason":"Ping timeout: 252 seconds","date":"2015-02-10T07:05:32.847Z","type":"quit"}
{"nick":"Akagi201_","date":"2015-02-10T07:20:34.541Z","type":"join"}
{"nick":"Akagi201","reason":"Ping timeout: 265 seconds","date":"2015-02-10T07:22:36.295Z","type":"quit"}
{"nick":"torpor","date":"2015-02-10T07:49:02.392Z","type":"join"}
{"nick":"DarkGod","date":"2015-02-10T08:34:28.353Z","type":"join"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T10:43:26.967Z","type":"quit"}
{"nick":"torpor","date":"2015-02-10T11:00:46.340Z","type":"join"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T11:20:34.747Z","type":"quit"}
{"nick":"torpor","date":"2015-02-10T11:23:26.392Z","type":"join"}
{"nick":"xt","reason":"Ping timeout: 265 seconds","date":"2015-02-10T12:34:21.449Z","type":"quit"}
{"nick":"xt","date":"2015-02-10T12:36:04.867Z","type":"join"}
{"nick":"UniOn","date":"2015-02-10T13:08:52.392Z","type":"join"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T13:39:02.859Z","type":"quit"}
{"nick":"rphillips","message":"nice","date":"2015-02-10T14:03:47.503Z","type":"message"}
{"nick":"rphillips","message":"imzyxwvu1: we replace the require system with that line","date":"2015-02-10T14:04:05.989Z","type":"message"}
{"nick":"imzyxwvu1","message":"rphillips: i thought the require in the env of a required module should also be replaced.","date":"2015-02-10T14:05:21.870Z","type":"message"}
{"nick":"torpor","date":"2015-02-10T14:07:39.331Z","type":"join"}
{"nick":"rphillips","message":"hmm. it should","date":"2015-02-10T14:11:16.977Z","type":"message"}
{"nick":"rphillips","message":"but it needs to come after the require line you pasted","date":"2015-02-10T14:12:05.179Z","type":"message"}
{"nick":"imzyxwvu1","message":"https://github.com/luvit/luvit/blob/luvi-up/app/modules/require.lua#L187  this made _G of require.lua exposed to the module, including _G.require (lua's original require). but i can't find how to let it expose the own require system of luvit.","date":"2015-02-10T14:16:19.709Z","type":"message"}
{"nick":"avidal","message":"L184 does that","date":"2015-02-10T14:18:07.199Z","type":"message"}
{"nick":"avidal","message":"requireName defaults to \"require\" and generate(module.path) creates a \"new\" luvit-require implementation rooted at the path that the new module was located","date":"2015-02-10T14:19:11.053Z","type":"message"}
{"nick":"imzyxwvu1","message":"avidal: but it seems the file required by another file can't require luvit's own library.","date":"2015-02-10T14:19:16.469Z","type":"message"}
{"nick":"imzyxwvu1","message":"a.lua: require \"b\" b.lua: local http = require \"http\"","date":"2015-02-10T14:19:53.993Z","type":"message"}
{"nick":"avidal","message":"are you sure the second module was actually located by luvit-require and not the fallback, which is lua require?","date":"2015-02-10T14:20:00.990Z","type":"message"}
{"nick":"imzyxwvu1","message":"luvit a.lua => .\\b.lua:1: module 'http' not found:","date":"2015-02-10T14:20:33.197Z","type":"message"}
{"nick":"imzyxwvu1","message":"seems i misused the new require","date":"2015-02-10T14:21:08.520Z","type":"message"}
{"nick":"avidal","message":"if luvit-require loads using the fallback, then the loaded module is still using the native require impl, not the luvit-require","date":"2015-02-10T14:21:15.221Z","type":"message"}
{"nick":"imzyxwvu1","message":"require \"./b\" works.","date":"2015-02-10T14:21:27.000Z","type":"message"}
{"nick":"imzyxwvu1","message":"sorry to bother you. i misused it.","date":"2015-02-10T14:21:35.849Z","type":"message"}
{"nick":"avidal","message":"in your example of a.lua requiring b and b requiring http, you can fix it in a.lua with:","date":"2015-02-10T14:22:19.210Z","type":"message"}
{"nick":"avidal","message":"require './b'","date":"2015-02-10T14:22:19.393Z","type":"message"}
{"nick":"avidal","message":"luvit-require doesn't look in the cwd for modules unless you prefix with ./","date":"2015-02-10T14:22:19.393Z","type":"message"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T14:23:12.926Z","type":"quit"}
{"nick":"avidal","message":"does that make sense?","date":"2015-02-10T14:23:23.446Z","type":"message"}
{"nick":"avidal","message":"you can verify if you change the value of requireName to something totally different; you'll see that the name is not available in the loaded module in your original example, and that's because it's actually being loaded by lua and not luvit","date":"2015-02-10T14:23:47.455Z","type":"message"}
{"nick":"imzyxwvu1","message":"i made more sense.","date":"2015-02-10T14:23:47.665Z","type":"message"}
{"nick":"avidal","message":"cheers :)","date":"2015-02-10T14:24:39.725Z","type":"message"}
{"nick":"avidal","message":"i dug into it quite a bit a couple of weeks ago","date":"2015-02-10T14:24:54.198Z","type":"message"}
{"nick":"avidal","message":"train just pulled in, gotta get going","date":"2015-02-10T14:25:22.433Z","type":"message"}
{"nick":"avidal","message":"glad i could help","date":"2015-02-10T14:25:24.574Z","type":"message"}
{"nick":"imzyxwvu1","message":"avidal: many thanks.","date":"2015-02-10T14:25:33.432Z","type":"message"}
{"nick":"imzyxwvu1","message":"your answer helped me a lot about this.","date":"2015-02-10T14:25:54.509Z","type":"message"}
{"nick":"rphillips","message":"thanks avidal","date":"2015-02-10T14:26:46.247Z","type":"message"}
{"nick":"imzyxwvu1","message":"i need to read the code of new luvit's require.lua more carefully.","date":"2015-02-10T14:27:01.919Z","type":"message"}
{"nick":"avidal","message":"np","date":"2015-02-10T14:35:26.049Z","type":"message"}
{"nick":"imzyxwvu1","message":"it seems new luvit doesn't have an url module.","date":"2015-02-10T14:37:31.728Z","type":"message"}
{"nick":"imzyxwvu1","message":"the one in old luvit is completely in lua. why not bump it?","date":"2015-02-10T14:38:14.755Z","type":"message"}
{"nick":"rphillips","message":"it hasn't been ported yet","date":"2015-02-10T14:41:52.467Z","type":"message"}
{"nick":"rphillips","message":"it's probably still in the old location in lib/luvit/...","date":"2015-02-10T14:42:03.604Z","type":"message"}
{"nick":"rphillips","message":"and there is probably a test in tests/to-convert/","date":"2015-02-10T14:42:13.763Z","type":"message"}
{"nick":"avidal","message":"your nicks are the same length and textual colors them the same way","date":"2015-02-10T14:47:03.955Z","type":"message"}
{"nick":"avidal","message":"so it looks like one person having a conversation with himself","date":"2015-02-10T14:47:10.081Z","type":"message"}
{"nick":"avidal","message":"imzyxwvu1: yeah, require.lua in luvit is a bit hard to grok; it could use more documentation i think","date":"2015-02-10T14:47:44.779Z","type":"message"}
{"nick":"a_le","reason":"Ping timeout: 255 seconds","date":"2015-02-10T14:49:46.513Z","type":"quit"}
{"nick":"rphillips","message":"yeah, there is also some different behaviors when the require is within a 'bundle' as wel","date":"2015-02-10T14:54:00.529Z","type":"message"}
{"nick":"rphillips","message":"well","date":"2015-02-10T14:54:02.270Z","type":"message"}
{"nick":"avidal","message":"yep","date":"2015-02-10T14:54:11.746Z","type":"message"}
{"nick":"a_le","date":"2015-02-10T15:06:56.252Z","type":"join"}
{"nick":"rphillips","message":"creationix: i'm add the tests directory to the lit 'app' and it says main.lua isn't found","date":"2015-02-10T15:10:32.066Z","type":"message"}
{"nick":"rphillips","message":"do you have an thought on how to add them in now","date":"2015-02-10T15:11:02.674Z","type":"message"}
{"nick":"rphillips","message":"?","date":"2015-02-10T15:11:04.619Z","type":"message"}
{"nick":"creationix","message":"lit app doesn’t work with luvit’s tests yet","date":"2015-02-10T15:11:38.219Z","type":"message"}
{"nick":"creationix","message":"but you can still use `LUVI_APP=app lit tests/run.lua`","date":"2015-02-10T15:11:46.129Z","type":"message"}
{"nick":"rphillips","message":"perfect... thanks","date":"2015-02-10T15:12:09.504Z","type":"message"}
{"nick":"torpor","date":"2015-02-10T15:27:38.328Z","type":"join"}
{"nick":"imzyxwvu1","message":"i suggest to import lua-cjson to luvi, for the following reason: 1. it's a fast implement, faster than any lua implement and it's also licensed under MIT. 2. JS provides a JSON object but Lua doesn't. 3. JSON is so widely used.","date":"2015-02-10T15:31:10.489Z","type":"message"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-02-10T15:47:19.662Z","type":"quit"}
{"nick":"imzyxwvu1","message":"https://github.com/imzyxwvu/luvit-fly this is a web framework for luvit still under construction. thanks if anyone could give me any suggestions. i'll complete the document later.","date":"2015-02-10T15:48:01.765Z","type":"message"}
{"nick":"rphillips","message":"creationix: thinking LUVI_MAIN might be appropriate","date":"2015-02-10T15:57:43.588Z","type":"message"}
{"nick":"rphillips","message":"right now it's using the app/main.lua... would be nice to make it the tests/run.lua","date":"2015-02-10T15:58:06.743Z","type":"message"}
{"nick":"creationix","message":"well, tests/run.lua isn’t a luvi main function, it’s a luvit script","date":"2015-02-10T15:58:44.511Z","type":"message"}
{"nick":"creationix","message":"slightly different interface","date":"2015-02-10T15:58:48.068Z","type":"message"}
{"nick":"rphillips","message":"right... it gets sourced from the app/main.lua","date":"2015-02-10T15:59:00.468Z","type":"message"}
{"nick":"creationix","message":"but we could maybe allow overriding main and convert run.lua to a main.lua format","date":"2015-02-10T15:59:19.922Z","type":"message"}
{"nick":"rphillips","message":"yeah","date":"2015-02-10T15:59:27.597Z","type":"message"}
{"nick":"rphillips","message":"not all apps will have 'require' a file support","date":"2015-02-10T15:59:40.995Z","type":"message"}
{"nick":"dan336","date":"2015-02-10T15:59:55.482Z","type":"join"}
