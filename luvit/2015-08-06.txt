{"nick":"dan3361","reason":"Quit: Leaving.","date":"2015-08-06T00:02:11.318Z","type":"quit"}
{"nick":"rphillips","message":"kostco: why move all the stuff around?","date":"2015-08-06T00:23:20.246Z","type":"message"}
{"nick":"rphillips","message":"like, function HostInfoStdoutSubProc:run(callback) was already running isRestrictedPlatform","date":"2015-08-06T00:23:46.981Z","type":"message"}
{"nick":"kostco","message":"hmm it didnt work for me for some reason","date":"2015-08-06T00:24:26.663Z","type":"message"}
{"nick":"kostco","message":"what you said, i thought so as well","date":"2015-08-06T00:24:36.572Z","type":"message"}
{"nick":"kostco","message":"but i can move that back and give it a shot, which i was just about to do","date":"2015-08-06T00:24:51.453Z","type":"message"}
{"nick":"kostco","message":"but uh i made more changes, experimenting with making it a more functional style, looks like it reduces code","date":"2015-08-06T00:25:08.919Z","type":"message"}
{"nick":"kostco","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/commit/5689eb554a5ac13dd01cf1a4df3963cde799e3da","date":"2015-08-06T00:25:26.750Z","type":"message"}
{"nick":"rphillips","message":"you still need the initialize() function in lua","date":"2015-08-06T00:25:58.532Z","type":"message"}
{"nick":"kostco","message":"hmm it runs without it","date":"2015-08-06T00:26:50.999Z","type":"message"}
{"nick":"kostco","message":"albeit im using the hostinfo runner dunno if that makes a difference","date":"2015-08-06T00:27:01.104Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/5689eb554a5ac13dd01cf1a4df3963cde799e3da/hostinfo/autoupdates.lua#L27-L42","date":"2015-08-06T00:28:16.977Z","type":"message"}
{"nick":"rphillips","message":"this section of code is placed in the constructor","date":"2015-08-06T00:28:22.608Z","type":"message"}
{"nick":"rphillips","message":"you need to look at the buildbots as well","date":"2015-08-06T00:28:48.933Z","type":"message"}
{"nick":"kostco","message":"the buildbots?","date":"2015-08-06T00:29:01.858Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/pull/828","date":"2015-08-06T00:29:12.376Z","type":"message"}
{"nick":"rphillips","message":"'Some checks were not successful'","date":"2015-08-06T00:29:19.074Z","type":"message"}
{"nick":"rphillips","message":"you can click through to the builds","date":"2015-08-06T00:29:34.404Z","type":"message"}
{"nick":"rphillips","message":"https://travis-ci.org/virgo-agent-toolkit/rackspace-monitoring-agent/builds/74334573#L985","date":"2015-08-06T00:29:44.314Z","type":"message"}
{"nick":"kostco","message":"oh yeah","date":"2015-08-06T00:29:47.633Z","type":"message"}
{"nick":"kostco","message":"thats cos it breaks the other checks since they rely on things ive removed, whichll get fixed when i refactor those checks","date":"2015-08-06T00:30:07.695Z","type":"message"}
{"nick":"kostco","message":"so over there","date":"2015-08-06T00:30:43.944Z","type":"message"}
{"nick":"kostco","message":"[string \"bundle:/hostinfo/iptables.lua\"]:22: attempt to index local 'MetricsHandler' (a nil value)","date":"2015-08-06T00:30:43.945Z","type":"message"}
{"nick":"rphillips","message":"so, this is a ported module: https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/a3e1991263fab3b9434500126f9073b3a4f81aa8/hostinfo/ip4routes.lua","date":"2015-08-06T00:32:41.567Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/a3e1991263fab3b9434500126f9073b3a4f81aa8/hostinfo/autoupdates.lua","date":"2015-08-06T00:33:25.680Z","type":"message"}
{"nick":"kostco","message":"yea but i changed stuff, using the misc.streamingSpawn function instead of the hostinfosubproc bound to self, extended from hostinfo","date":"2015-08-06T00:33:27.780Z","type":"message"}
{"nick":"rphillips","message":"shouldn't the autoupdates.lua file look like it?","date":"2015-08-06T00:33:35.909Z","type":"message"}
{"nick":"rphillips","message":"so. parameters to functions should not have side effects","date":"2015-08-06T00:35:24.183Z","type":"message"}
{"nick":"rphillips","message":"i don't think there is a need for streamingSpawn","date":"2015-08-06T00:36:52.488Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/d7690571b9e59e5498be","date":"2015-08-06T00:40:14.285Z","type":"message"}
{"nick":"kostco","message":"so thats what ip4routes would look like with a function acting as streaming spawn instead of using the handler and hostinfosubproc","date":"2015-08-06T00:40:39.362Z","type":"message"}
{"nick":"kostco","message":"the thing is, i need to/want to call the final callback() and abort if the sigar vendor doesnt match up","date":"2015-08-06T00:41:42.617Z","type":"message"}
{"nick":"kostco","message":"also the metric handler is only ever used with the hostinfosubproc, so either way i think we should merge them somehow so the person writing hostinfo checks doesnt need to initialize it, they can just pass in a function that they want called per line","date":"2015-08-06T00:43:43.891Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636","date":"2015-08-06T00:49:40.285Z","type":"message"}
{"nick":"rphillips","message":"this is what I was sorta thinking","date":"2015-08-06T00:49:44.239Z","type":"message"}
{"nick":"rphillips","message":"we could just pass in the class","date":"2015-08-06T00:51:39.797Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636#file-gistfile1-txt-L57","date":"2015-08-06T00:52:13.225Z","type":"message"}
{"nick":"kostco","message":"so pass inside hostinfostdoutsubproc?","date":"2015-08-06T00:52:34.812Z","type":"message"}
{"nick":"kostco","message":"if not command return end sort of a deal?","date":"2015-08-06T00:52:47.098Z","type":"message"}
{"nick":"rphillips","message":"i don't get the use case","date":"2015-08-06T00:53:01.312Z","type":"message"}
{"nick":"kostco","message":"so if for whatever reason sigar returns a vendor name that isnt recognized","date":"2015-08-06T00:53:31.073Z","type":"message"}
{"nick":"kostco","message":"e.g. someone trying to run this on a custom arch distro running server","date":"2015-08-06T00:53:45.050Z","type":"message"}
{"nick":"kostco","message":"arch as in arch linux","date":"2015-08-06T00:53:59.784Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636#file-gistfile1-txt-L53","date":"2015-08-06T00:54:08.723Z","type":"message"}
{"nick":"rphillips","message":"change this to an else","date":"2015-08-06T00:54:12.017Z","type":"message"}
{"nick":"rphillips","message":"and it'll just error out on other platforms","date":"2015-08-06T00:54:18.218Z","type":"message"}
{"nick":"rphillips","message":"we could add one more flag that is like 'enabled'","date":"2015-08-06T00:54:46.591Z","type":"message"}
{"nick":"rphillips","message":"and check for it on the :run()","date":"2015-08-06T00:54:56.246Z","type":"message"}
{"nick":"kostco","message":"but can we error intelligently and return something like self._error = \"linux distro unsupported\"","date":"2015-08-06T00:55:07.188Z","type":"message"}
{"nick":"rphillips","message":"or a :disable() function","date":"2015-08-06T00:55:09.381Z","type":"message"}
{"nick":"kostco","message":"hmmm ok","date":"2015-08-06T00:55:15.227Z","type":"message"}
{"nick":"kostco","message":"yea an enabled flag makes sense, and sounds simple","date":"2015-08-06T00:55:36.636Z","type":"message"}
{"nick":"rphillips","message":"else self:disable('plugin not supported due to vendor')","date":"2015-08-06T00:55:43.410Z","type":"message"}
{"nick":"kostco","message":"hmm","date":"2015-08-06T00:55:49.868Z","type":"message"}
{"nick":"dan336","date":"2015-08-06T00:56:03.457Z","type":"join"}
{"nick":"kostco","message":"so self:disable would be declared in base.lua and would basically set self._error and return callback()?","date":"2015-08-06T00:56:24.616Z","type":"message"}
{"nick":"rphillips","message":"it would just set the self._error","date":"2015-08-06T00:56:42.849Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/a3e1991263fab3b9434500126f9073b3a4f81aa8/hostinfo/base.lua#L96","date":"2015-08-06T00:58:08.976Z","type":"message"}
{"nick":"rphillips","message":"we can short circuit it right here","date":"2015-08-06T00:58:13.090Z","type":"message"}
{"nick":"rphillips","message":"if self._error then callback() else self._execute(callback) end","date":"2015-08-06T00:58:31.375Z","type":"message"}
{"nick":"kostco","message":"ah alright","date":"2015-08-06T00:58:54.904Z","type":"message"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-08-06T01:03:31.303Z","type":"quit"}
{"nick":"rphillips","message":"kostco: we could assume","date":"2015-08-06T01:05:13.402Z","type":"message"}
{"nick":"rphillips","message":"if command is nil then the hostinfo is diabled","date":"2015-08-06T01:05:25.836Z","type":"message"}
{"nick":"rphillips","message":"disabled","date":"2015-08-06T01:05:27.549Z","type":"message"}
{"nick":"kostco","message":"hmm so we have teh self error set while looking at vendor","date":"2015-08-06T01:06:02.201Z","type":"message"}
{"nick":"kostco","message":"so just emit the callback","date":"2015-08-06T01:06:18.201Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636#file-gistfile1-txt-L48-L55","date":"2015-08-06T01:06:50.294Z","type":"message"}
{"nick":"rphillips","message":"so, command is nil","date":"2015-08-06T01:07:07.789Z","type":"message"}
{"nick":"rphillips","message":"if command is nil, then on that same line 96 in base.lua","date":"2015-08-06T01:07:44.436Z","type":"message"}
{"nick":"rphillips","message":"have a static constant saying it is disabled","date":"2015-08-06T01:08:11.504Z","type":"message"}
{"nick":"rphillips","message":"just like on 93","date":"2015-08-06T01:08:26.195Z","type":"message"}
{"nick":"rphillips","message":"could be the exact same error message","date":"2015-08-06T01:08:42.999Z","type":"message"}
{"nick":"kostco","message":"hmm but we're not really saying much, its sort of a generic message","date":"2015-08-06T01:09:08.484Z","type":"message"}
{"nick":"kostco","message":"which i feel down the road might confuse someone","date":"2015-08-06T01:09:15.304Z","type":"message"}
{"nick":"kostco","message":"like hey why do i get this hostinfo is disabled on ubuntu 20.00","date":"2015-08-06T01:09:30.929Z","type":"message"}
{"nick":"kostco","message":"well turns out sigar doesnt work, but theyd prolly debug it faster if it said doesnt work on your linux distro","date":"2015-08-06T01:09:48.945Z","type":"message"}
{"nick":"rphillips","message":"sure... we can add the vendor name","date":"2015-08-06T01:10:51.905Z","type":"message"}
{"nick":"rphillips","message":"os name as well","date":"2015-08-06T01:11:01.144Z","type":"message"}
{"nick":"rphillips","message":"etc","date":"2015-08-06T01:11:02.893Z","type":"message"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-08-06T01:24:25.203Z","type":"quit"}
{"nick":"kostco","message":"rphillips: thoughts on this:","date":"2015-08-06T02:04:38.115Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/d747a39e616b7be96404","date":"2015-08-06T02:04:38.117Z","type":"message"}
{"nick":"kostco","message":"its the most succint one ive been able to make, mixes functional and oop a lot though, so mainly all i did was move the handler into the hostinfosubproc class","date":"2015-08-06T02:05:07.142Z","type":"message"}
{"nick":"kostco","message":"since thats the only place we use the handler","date":"2015-08-06T02:05:12.844Z","type":"message"}
{"nick":"kostco","message":"therefore when writing hostinfo checks the writer doesnt need to worry about instantiating the handler, just what they want to do with each line, which is the main non repetetive part","date":"2015-08-06T02:05:47.163Z","type":"message"}
{"nick":"kostco","message":"k ill be back tomorrow","date":"2015-08-06T02:22:53.741Z","type":"message"}
{"nick":"creationix","message":"kostco: I can look at in the morning when I have more brain left","date":"2015-08-06T02:28:23.681Z","type":"message"}
{"nick":"rphillips","message":"creationix: https://twitter.com/jedisct1/status/628986328080908288","date":"2015-08-06T02:31:34.558Z","type":"message"}
{"nick":"rphillips","message":"creationix: pcre vulnerability","date":"2015-08-06T02:31:40.530Z","type":"message"}
{"nick":"creationix","message":"thanks","date":"2015-08-06T02:31:50.170Z","type":"message"}
{"nick":"creationix","message":"I need to learn some advanced Heap Fengshui techniques.","date":"2015-08-06T02:32:28.137Z","type":"message"}
{"nick":"rphillips","message":"kostco: i don't understand what is wrong with the template I wrote","date":"2015-08-06T02:32:35.485Z","type":"message"}
{"nick":"rphillips","message":"mixing functional and oop is probably not the cleanest","date":"2015-08-06T02:33:09.605Z","type":"message"}
{"nick":"creationix","message":"functional all the way! ;)","date":"2015-08-06T02:33:57.051Z","type":"message"}
{"nick":"creationix","message":"but I digress..","date":"2015-08-06T02:34:06.570Z","type":"message"}
{"nick":"rphillips","message":"+1 to functional","date":"2015-08-06T02:34:27.785Z","type":"message"}
{"nick":"creationix","message":"I love local variables much more than table properties in lua.","date":"2015-08-06T02:37:18.089Z","type":"message"}
{"nick":"creationix","message":"they are simpler, explicit, statically checked by the linter and easier on the VM","date":"2015-08-06T02:37:36.162Z","type":"message"}
{"nick":"rphillips","message":"kostco: part of the problem is that our inheritance model is single inheritance","date":"2015-08-06T02:51:14.733Z","type":"message"}
{"nick":"hdms","date":"2015-08-06T02:51:54.236Z","type":"join"}
{"nick":"rphillips","message":"in C++ we could extend the HostInfo class to be inherited from a Transform as well","date":"2015-08-06T02:51:59.788Z","type":"message"}
{"nick":"rphillips","message":"and then pipe to self","date":"2015-08-06T02:52:18.593Z","type":"message"}
{"nick":"daurnimator","message":"you can do multiple inheritance in lua...","date":"2015-08-06T03:00:09.909Z","type":"message"}
{"nick":"daurnimator","message":"just you probably rightfully chose not to","date":"2015-08-06T03:00:27.375Z","type":"message"}
{"nick":"rphillips","message":"true","date":"2015-08-06T03:04:15.927Z","type":"message"}
{"nick":"rphillips","message":"we modeled the inheritence after nodejs, which was single","date":"2015-08-06T03:04:41.666Z","type":"message"}
{"nick":"rphillips","message":"nodejs/javascript","date":"2015-08-06T03:04:49.811Z","type":"message"}
{"nick":"creationix","message":"I like rust traits","date":"2015-08-06T03:43:57.884Z","type":"message"}
{"nick":"SkyRocknRoll_","reason":"Ping timeout: 264 seconds","date":"2015-08-06T05:14:13.465Z","type":"quit"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-08-06T06:02:30.886Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-06T06:20:28.292Z","type":"join"}
