{"nick":"dan3361","reason":"Quit: Leaving.","date":"2015-08-06T00:02:11.318Z","type":"quit"}
{"nick":"rphillips","message":"kostco: why move all the stuff around?","date":"2015-08-06T00:23:20.246Z","type":"message"}
{"nick":"rphillips","message":"like, function HostInfoStdoutSubProc:run(callback) was already running isRestrictedPlatform","date":"2015-08-06T00:23:46.981Z","type":"message"}
{"nick":"kostco","message":"hmm it didnt work for me for some reason","date":"2015-08-06T00:24:26.663Z","type":"message"}
{"nick":"kostco","message":"what you said, i thought so as well","date":"2015-08-06T00:24:36.572Z","type":"message"}
{"nick":"kostco","message":"but i can move that back and give it a shot, which i was just about to do","date":"2015-08-06T00:24:51.453Z","type":"message"}
{"nick":"kostco","message":"but uh i made more changes, experimenting with making it a more functional style, looks like it reduces code","date":"2015-08-06T00:25:08.919Z","type":"message"}
{"nick":"kostco","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/commit/5689eb554a5ac13dd01cf1a4df3963cde799e3da","date":"2015-08-06T00:25:26.750Z","type":"message"}
{"nick":"rphillips","message":"you still need the initialize() function in lua","date":"2015-08-06T00:25:58.532Z","type":"message"}
{"nick":"kostco","message":"hmm it runs without it","date":"2015-08-06T00:26:50.999Z","type":"message"}
{"nick":"kostco","message":"albeit im using the hostinfo runner dunno if that makes a difference","date":"2015-08-06T00:27:01.104Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/5689eb554a5ac13dd01cf1a4df3963cde799e3da/hostinfo/autoupdates.lua#L27-L42","date":"2015-08-06T00:28:16.977Z","type":"message"}
{"nick":"rphillips","message":"this section of code is placed in the constructor","date":"2015-08-06T00:28:22.608Z","type":"message"}
{"nick":"rphillips","message":"you need to look at the buildbots as well","date":"2015-08-06T00:28:48.933Z","type":"message"}
{"nick":"kostco","message":"the buildbots?","date":"2015-08-06T00:29:01.858Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/pull/828","date":"2015-08-06T00:29:12.376Z","type":"message"}
{"nick":"rphillips","message":"'Some checks were not successful'","date":"2015-08-06T00:29:19.074Z","type":"message"}
{"nick":"rphillips","message":"you can click through to the builds","date":"2015-08-06T00:29:34.404Z","type":"message"}
{"nick":"rphillips","message":"https://travis-ci.org/virgo-agent-toolkit/rackspace-monitoring-agent/builds/74334573#L985","date":"2015-08-06T00:29:44.314Z","type":"message"}
{"nick":"kostco","message":"oh yeah","date":"2015-08-06T00:29:47.633Z","type":"message"}
{"nick":"kostco","message":"thats cos it breaks the other checks since they rely on things ive removed, whichll get fixed when i refactor those checks","date":"2015-08-06T00:30:07.695Z","type":"message"}
{"nick":"kostco","message":"so over there","date":"2015-08-06T00:30:43.944Z","type":"message"}
{"nick":"kostco","message":"[string \"bundle:/hostinfo/iptables.lua\"]:22: attempt to index local 'MetricsHandler' (a nil value)","date":"2015-08-06T00:30:43.945Z","type":"message"}
{"nick":"rphillips","message":"so, this is a ported module: https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/a3e1991263fab3b9434500126f9073b3a4f81aa8/hostinfo/ip4routes.lua","date":"2015-08-06T00:32:41.567Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/a3e1991263fab3b9434500126f9073b3a4f81aa8/hostinfo/autoupdates.lua","date":"2015-08-06T00:33:25.680Z","type":"message"}
{"nick":"kostco","message":"yea but i changed stuff, using the misc.streamingSpawn function instead of the hostinfosubproc bound to self, extended from hostinfo","date":"2015-08-06T00:33:27.780Z","type":"message"}
{"nick":"rphillips","message":"shouldn't the autoupdates.lua file look like it?","date":"2015-08-06T00:33:35.909Z","type":"message"}
{"nick":"rphillips","message":"so. parameters to functions should not have side effects","date":"2015-08-06T00:35:24.183Z","type":"message"}
{"nick":"rphillips","message":"i don't think there is a need for streamingSpawn","date":"2015-08-06T00:36:52.488Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/d7690571b9e59e5498be","date":"2015-08-06T00:40:14.285Z","type":"message"}
{"nick":"kostco","message":"so thats what ip4routes would look like with a function acting as streaming spawn instead of using the handler and hostinfosubproc","date":"2015-08-06T00:40:39.362Z","type":"message"}
{"nick":"kostco","message":"the thing is, i need to/want to call the final callback() and abort if the sigar vendor doesnt match up","date":"2015-08-06T00:41:42.617Z","type":"message"}
{"nick":"kostco","message":"also the metric handler is only ever used with the hostinfosubproc, so either way i think we should merge them somehow so the person writing hostinfo checks doesnt need to initialize it, they can just pass in a function that they want called per line","date":"2015-08-06T00:43:43.891Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636","date":"2015-08-06T00:49:40.285Z","type":"message"}
{"nick":"rphillips","message":"this is what I was sorta thinking","date":"2015-08-06T00:49:44.239Z","type":"message"}
{"nick":"rphillips","message":"we could just pass in the class","date":"2015-08-06T00:51:39.797Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636#file-gistfile1-txt-L57","date":"2015-08-06T00:52:13.225Z","type":"message"}
{"nick":"kostco","message":"so pass inside hostinfostdoutsubproc?","date":"2015-08-06T00:52:34.812Z","type":"message"}
{"nick":"kostco","message":"if not command return end sort of a deal?","date":"2015-08-06T00:52:47.098Z","type":"message"}
{"nick":"rphillips","message":"i don't get the use case","date":"2015-08-06T00:53:01.312Z","type":"message"}
{"nick":"kostco","message":"so if for whatever reason sigar returns a vendor name that isnt recognized","date":"2015-08-06T00:53:31.073Z","type":"message"}
{"nick":"kostco","message":"e.g. someone trying to run this on a custom arch distro running server","date":"2015-08-06T00:53:45.050Z","type":"message"}
{"nick":"kostco","message":"arch as in arch linux","date":"2015-08-06T00:53:59.784Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636#file-gistfile1-txt-L53","date":"2015-08-06T00:54:08.723Z","type":"message"}
{"nick":"rphillips","message":"change this to an else","date":"2015-08-06T00:54:12.017Z","type":"message"}
{"nick":"rphillips","message":"and it'll just error out on other platforms","date":"2015-08-06T00:54:18.218Z","type":"message"}
{"nick":"rphillips","message":"we could add one more flag that is like 'enabled'","date":"2015-08-06T00:54:46.591Z","type":"message"}
{"nick":"rphillips","message":"and check for it on the :run()","date":"2015-08-06T00:54:56.246Z","type":"message"}
{"nick":"kostco","message":"but can we error intelligently and return something like self._error = \"linux distro unsupported\"","date":"2015-08-06T00:55:07.188Z","type":"message"}
{"nick":"rphillips","message":"or a :disable() function","date":"2015-08-06T00:55:09.381Z","type":"message"}
{"nick":"kostco","message":"hmmm ok","date":"2015-08-06T00:55:15.227Z","type":"message"}
{"nick":"kostco","message":"yea an enabled flag makes sense, and sounds simple","date":"2015-08-06T00:55:36.636Z","type":"message"}
{"nick":"rphillips","message":"else self:disable('plugin not supported due to vendor')","date":"2015-08-06T00:55:43.410Z","type":"message"}
{"nick":"kostco","message":"hmm","date":"2015-08-06T00:55:49.868Z","type":"message"}
{"nick":"dan336","date":"2015-08-06T00:56:03.457Z","type":"join"}
{"nick":"kostco","message":"so self:disable would be declared in base.lua and would basically set self._error and return callback()?","date":"2015-08-06T00:56:24.616Z","type":"message"}
{"nick":"rphillips","message":"it would just set the self._error","date":"2015-08-06T00:56:42.849Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/a3e1991263fab3b9434500126f9073b3a4f81aa8/hostinfo/base.lua#L96","date":"2015-08-06T00:58:08.976Z","type":"message"}
{"nick":"rphillips","message":"we can short circuit it right here","date":"2015-08-06T00:58:13.090Z","type":"message"}
{"nick":"rphillips","message":"if self._error then callback() else self._execute(callback) end","date":"2015-08-06T00:58:31.375Z","type":"message"}
{"nick":"kostco","message":"ah alright","date":"2015-08-06T00:58:54.904Z","type":"message"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-08-06T01:03:31.303Z","type":"quit"}
{"nick":"rphillips","message":"kostco: we could assume","date":"2015-08-06T01:05:13.402Z","type":"message"}
{"nick":"rphillips","message":"if command is nil then the hostinfo is diabled","date":"2015-08-06T01:05:25.836Z","type":"message"}
{"nick":"rphillips","message":"disabled","date":"2015-08-06T01:05:27.549Z","type":"message"}
{"nick":"kostco","message":"hmm so we have teh self error set while looking at vendor","date":"2015-08-06T01:06:02.201Z","type":"message"}
{"nick":"kostco","message":"so just emit the callback","date":"2015-08-06T01:06:18.201Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636#file-gistfile1-txt-L48-L55","date":"2015-08-06T01:06:50.294Z","type":"message"}
{"nick":"rphillips","message":"so, command is nil","date":"2015-08-06T01:07:07.789Z","type":"message"}
{"nick":"rphillips","message":"if command is nil, then on that same line 96 in base.lua","date":"2015-08-06T01:07:44.436Z","type":"message"}
{"nick":"rphillips","message":"have a static constant saying it is disabled","date":"2015-08-06T01:08:11.504Z","type":"message"}
{"nick":"rphillips","message":"just like on 93","date":"2015-08-06T01:08:26.195Z","type":"message"}
{"nick":"rphillips","message":"could be the exact same error message","date":"2015-08-06T01:08:42.999Z","type":"message"}
{"nick":"kostco","message":"hmm but we're not really saying much, its sort of a generic message","date":"2015-08-06T01:09:08.484Z","type":"message"}
{"nick":"kostco","message":"which i feel down the road might confuse someone","date":"2015-08-06T01:09:15.304Z","type":"message"}
{"nick":"kostco","message":"like hey why do i get this hostinfo is disabled on ubuntu 20.00","date":"2015-08-06T01:09:30.929Z","type":"message"}
{"nick":"kostco","message":"well turns out sigar doesnt work, but theyd prolly debug it faster if it said doesnt work on your linux distro","date":"2015-08-06T01:09:48.945Z","type":"message"}
{"nick":"rphillips","message":"sure... we can add the vendor name","date":"2015-08-06T01:10:51.905Z","type":"message"}
{"nick":"rphillips","message":"os name as well","date":"2015-08-06T01:11:01.144Z","type":"message"}
{"nick":"rphillips","message":"etc","date":"2015-08-06T01:11:02.893Z","type":"message"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-08-06T01:24:25.203Z","type":"quit"}
{"nick":"kostco","message":"rphillips: thoughts on this:","date":"2015-08-06T02:04:38.115Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/d747a39e616b7be96404","date":"2015-08-06T02:04:38.117Z","type":"message"}
{"nick":"kostco","message":"its the most succint one ive been able to make, mixes functional and oop a lot though, so mainly all i did was move the handler into the hostinfosubproc class","date":"2015-08-06T02:05:07.142Z","type":"message"}
{"nick":"kostco","message":"since thats the only place we use the handler","date":"2015-08-06T02:05:12.844Z","type":"message"}
{"nick":"kostco","message":"therefore when writing hostinfo checks the writer doesnt need to worry about instantiating the handler, just what they want to do with each line, which is the main non repetetive part","date":"2015-08-06T02:05:47.163Z","type":"message"}
{"nick":"kostco","message":"k ill be back tomorrow","date":"2015-08-06T02:22:53.741Z","type":"message"}
{"nick":"creationix","message":"kostco: I can look at in the morning when I have more brain left","date":"2015-08-06T02:28:23.681Z","type":"message"}
{"nick":"rphillips","message":"creationix: https://twitter.com/jedisct1/status/628986328080908288","date":"2015-08-06T02:31:34.558Z","type":"message"}
{"nick":"rphillips","message":"creationix: pcre vulnerability","date":"2015-08-06T02:31:40.530Z","type":"message"}
{"nick":"creationix","message":"thanks","date":"2015-08-06T02:31:50.170Z","type":"message"}
{"nick":"creationix","message":"I need to learn some advanced Heap Fengshui techniques.","date":"2015-08-06T02:32:28.137Z","type":"message"}
{"nick":"rphillips","message":"kostco: i don't understand what is wrong with the template I wrote","date":"2015-08-06T02:32:35.485Z","type":"message"}
{"nick":"rphillips","message":"mixing functional and oop is probably not the cleanest","date":"2015-08-06T02:33:09.605Z","type":"message"}
{"nick":"creationix","message":"functional all the way! ;)","date":"2015-08-06T02:33:57.051Z","type":"message"}
{"nick":"creationix","message":"but I digress..","date":"2015-08-06T02:34:06.570Z","type":"message"}
{"nick":"rphillips","message":"+1 to functional","date":"2015-08-06T02:34:27.785Z","type":"message"}
{"nick":"creationix","message":"I love local variables much more than table properties in lua.","date":"2015-08-06T02:37:18.089Z","type":"message"}
{"nick":"creationix","message":"they are simpler, explicit, statically checked by the linter and easier on the VM","date":"2015-08-06T02:37:36.162Z","type":"message"}
{"nick":"rphillips","message":"kostco: part of the problem is that our inheritance model is single inheritance","date":"2015-08-06T02:51:14.733Z","type":"message"}
{"nick":"hdms","date":"2015-08-06T02:51:54.236Z","type":"join"}
{"nick":"rphillips","message":"in C++ we could extend the HostInfo class to be inherited from a Transform as well","date":"2015-08-06T02:51:59.788Z","type":"message"}
{"nick":"rphillips","message":"and then pipe to self","date":"2015-08-06T02:52:18.593Z","type":"message"}
{"nick":"daurnimator","message":"you can do multiple inheritance in lua...","date":"2015-08-06T03:00:09.909Z","type":"message"}
{"nick":"daurnimator","message":"just you probably rightfully chose not to","date":"2015-08-06T03:00:27.375Z","type":"message"}
{"nick":"rphillips","message":"true","date":"2015-08-06T03:04:15.927Z","type":"message"}
{"nick":"rphillips","message":"we modeled the inheritence after nodejs, which was single","date":"2015-08-06T03:04:41.666Z","type":"message"}
{"nick":"rphillips","message":"nodejs/javascript","date":"2015-08-06T03:04:49.811Z","type":"message"}
{"nick":"creationix","message":"I like rust traits","date":"2015-08-06T03:43:57.884Z","type":"message"}
{"nick":"SkyRocknRoll_","reason":"Ping timeout: 264 seconds","date":"2015-08-06T05:14:13.465Z","type":"quit"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-08-06T06:02:30.886Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-06T06:20:28.292Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Read error: No route to host","date":"2015-08-06T08:39:19.275Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-06T08:39:52.483Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Read error: No route to host","date":"2015-08-06T08:59:12.118Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-06T08:59:43.045Z","type":"join"}
{"nick":"piernov","reason":"Ping timeout: 250 seconds","date":"2015-08-06T09:08:04.411Z","type":"quit"}
{"nick":"piernov","date":"2015-08-06T09:08:16.327Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 260 seconds","date":"2015-08-06T11:08:39.930Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-06T11:20:40.415Z","type":"join"}
{"nick":"hdms","date":"2015-08-06T12:22:02.993Z","type":"join"}
{"nick":"dan336","date":"2015-08-06T13:17:24.425Z","type":"join"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-08-06T13:32:32.961Z","type":"quit"}
{"nick":"rphillips","message":"good morning","date":"2015-08-06T13:33:24.433Z","type":"message"}
{"nick":"SkyRocknRoll","reason":"Remote host closed the connection","date":"2015-08-06T13:45:05.780Z","type":"quit"}
{"nick":"creationix","message":"rphillips: morning","date":"2015-08-06T13:51:24.371Z","type":"message"}
{"nick":"creationix","message":"I've been thinking about the pcre CVE, I doubt we are actually vunerable","date":"2015-08-06T13:51:42.443Z","type":"message"}
{"nick":"creationix","message":"Since it's a heap Feng Shui attack, the limited size of our strings and the fact that they must be valid utf8 seriously limits what can be done","date":"2015-08-06T13:52:38.273Z","type":"message"}
{"nick":"rphillips","message":"gotcha","date":"2015-08-06T13:55:09.641Z","type":"message"}
{"nick":"creationix","message":"still, looking at the actual report, it's not hard to overflow the heap, I could be wrong if there is another vector where they can insert large binary strings in memory","date":"2015-08-06T13:56:20.949Z","type":"message"}
{"nick":"creationix","message":"but pretty much all the user-settable inputs to the agent are short utf8 strings right?","date":"2015-08-06T13:56:45.889Z","type":"message"}
{"nick":"creationix","message":"the fix is scheduled for September in v8.38.  So by the time we go live with the new feature, it should be fine","date":"2015-08-06T13:57:38.752Z","type":"message"}
{"nick":"creationix","message":"rphillips: have you ever used mdns to discover services on the local network?","date":"2015-08-06T14:18:34.248Z","type":"message"}
{"nick":"creationix","message":"I mean implemented a server/client pair","date":"2015-08-06T14:18:41.453Z","type":"message"}
{"nick":"rphillips","message":"i had a pet project once","date":"2015-08-06T14:19:37.713Z","type":"message"}
{"nick":"rphillips","message":"most production networks have multicast turned off","date":"2015-08-06T14:20:06.842Z","type":"message"}
{"nick":"rphillips","message":"home network. works just fine","date":"2015-08-06T14:20:22.905Z","type":"message"}
{"nick":"creationix","message":"my use case is a workshop for kids","date":"2015-08-06T14:24:42.521Z","type":"message"}
{"nick":"creationix","message":"so at home, mdns might work, but not likely at some event?","date":"2015-08-06T14:25:04.865Z","type":"message"}
{"nick":"rphillips","message":"Correct. Not likely","date":"2015-08-06T14:25:21.825Z","type":"message"}
{"nick":"creationix","message":"I suppose this is why most systems these days use some known public internet server to help find stuff","date":"2015-08-06T14:25:40.606Z","type":"message"}
{"nick":"creationix","message":"public dns -> public server -> local master","date":"2015-08-06T14:26:34.949Z","type":"message"}
{"nick":"creationix","message":"(assuming the local master also told the public server it’s local address and the querying client also told it the internal address)","date":"2015-08-06T14:26:59.250Z","type":"message"}
{"nick":"rphillips","message":"You could setup a dynamic","date":"2015-08-06T14:27:22.104Z","type":"message"}
{"nick":"rphillips","message":"Dns with bind with a restful service","date":"2015-08-06T14:27:40.319Z","type":"message"}
{"nick":"creationix","message":"internal dns?","date":"2015-08-06T14:27:51.388Z","type":"message"}
{"nick":"creationix","message":"my linux boxes can find other linux boxes by hostname on my home lan","date":"2015-08-06T14:28:12.195Z","type":"message"}
{"nick":"creationix","message":"the router is dd-wrt","date":"2015-08-06T14:28:17.844Z","type":"message"}
{"nick":"creationix","message":"but my mac’s can’t find them by hostname","date":"2015-08-06T14:28:26.745Z","type":"message"}
{"nick":"dan336","date":"2015-08-06T14:28:47.372Z","type":"join"}
{"nick":"rphillips","message":"You would register mydns.org and set the name server to your cloud server then write your client to register their internal ip to your service","date":"2015-08-06T14:29:04.780Z","type":"message"}
{"nick":"creationix","message":"oh interesting, use ddns, but publish internal IPs","date":"2015-08-06T14:29:32.235Z","type":"message"}
{"nick":"rphillips","message":"right... you could use a dynamic provider, or write your own pretty easily","date":"2015-08-06T14:29:58.350Z","type":"message"}
{"nick":"rphillips","message":"just give it a really low ttl","date":"2015-08-06T14:30:09.400Z","type":"message"}
{"nick":"creationix","message":"the problem is I have multiple networks","date":"2015-08-06T14:30:12.984Z","type":"message"}
{"nick":"creationix","message":"I could be at home, at someone else’s house, or on the road using a cell phone hotspot","date":"2015-08-06T14:30:27.187Z","type":"message"}
{"nick":"creationix","message":"I want to be able to just turn on the master and slaves, connect them to the network and they magically find eachother","date":"2015-08-06T14:30:51.346Z","type":"message"}
{"nick":"creationix","message":"and I might have multiple masters, one running at home on a rPI, one as a mobile app on my phone and one as a chrome app","date":"2015-08-06T14:31:20.252Z","type":"message"}
{"nick":"rphillips","message":"ah, you could definetly abuse https://coreos.com/os/docs/latest/cluster-discovery.html","date":"2015-08-06T14:31:38.479Z","type":"message"}
{"nick":"creationix","message":"the really hard part is some of the clients are web pages","date":"2015-08-06T14:31:39.910Z","type":"message"}
{"nick":"creationix","message":"but I might just need the master to display it’s local IP somehow and enter that manually into the web clients","date":"2015-08-06T14:32:04.537Z","type":"message"}
{"nick":"creationix","message":"(publicly hosted, but work offline with appcache)","date":"2015-08-06T14:32:47.334Z","type":"message"}
{"nick":"rphillips","message":"you could host your own etcd discovery service and not expire tokens","date":"2015-08-06T14:32:56.846Z","type":"message"}
{"nick":"creationix","message":"but how would i find that service?","date":"2015-08-06T14:33:26.747Z","type":"message"}
{"nick":"creationix","message":"the thing I’m making is essentially a discovery service, but it needs to work when there is no internet, but is local lan","date":"2015-08-06T14:33:57.974Z","type":"message"}
{"nick":"rphillips","message":"ah not internet","date":"2015-08-06T14:34:10.157Z","type":"message"}
{"nick":"rphillips","message":"missed that requirement","date":"2015-08-06T14:34:14.384Z","type":"message"}
{"nick":"rphillips","message":"no*","date":"2015-08-06T14:34:16.366Z","type":"message"}
{"nick":"rphillips","message":"if you are connected to the same access point, a broadcast should work","date":"2015-08-06T14:34:50.504Z","type":"message"}
{"nick":"rphillips","message":"which is basically mdns","date":"2015-08-06T14:34:55.579Z","type":"message"}
{"nick":"creationix","message":"I guess I could try mdns first and fall back to manual","date":"2015-08-06T14:35:45.682Z","type":"message"}
{"nick":"creationix","message":"I just don’t have manual on all the clients","date":"2015-08-06T14:36:02.050Z","type":"message"}
{"nick":"creationix","message":"many are headless nodes (microcontrollers with wifi client)","date":"2015-08-06T14:36:25.157Z","type":"message"}
{"nick":"creationix","message":"rphillips: thanks for the feedback, it’s a hard problem I’ve been working on for years","date":"2015-08-06T14:38:24.418Z","type":"message"}
{"nick":"rphillips","message":"yeah, not easy","date":"2015-08-06T14:45:36.426Z","type":"message"}
{"nick":"rphillips","message":"i always thought the quake3 server discovery was good http://caia.swin.edu.au/reports/070730A/CAIA-TR-070730A.pdf","date":"2015-08-06T14:49:53.331Z","type":"message"}
{"nick":"rphillips","message":"doesn't solve the issue with server0","date":"2015-08-06T14:50:44.736Z","type":"message"}
{"nick":"creationix","message":"yep, that works well when you have internet","date":"2015-08-06T14:52:38.507Z","type":"message"}
{"nick":"creationix","message":"maybe there isn’t one solution for every case","date":"2015-08-06T14:52:47.348Z","type":"message"}
{"nick":"creationix","message":"but in most cases I should have either internet or mdns right?","date":"2015-08-06T14:52:59.540Z","type":"message"}
{"nick":"creationix","message":"I can have masters register with a cloud server publishing their internal IP and subnet","date":"2015-08-06T14:54:14.383Z","type":"message"}
{"nick":"creationix","message":"when a client queries, return all masters with the same subnet","date":"2015-08-06T14:54:29.728Z","type":"message"}
{"nick":"creationix","message":"though I suppose is the master and client are on the same nat, they will have the same public IP for even faster matching","date":"2015-08-06T14:54:49.419Z","type":"message"}
{"nick":"creationix","message":"*if","date":"2015-08-06T14:54:52.753Z","type":"message"}
{"nick":"travis-ci","date":"2015-08-06T14:54:55.431Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvi#713 (master - babc802 : Tim Caswell): The build passed.","date":"2015-08-06T14:54:56.373Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvi/compare/e59881b0020c...babc8029afee","date":"2015-08-06T14:54:56.374Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvi/builds/74419642","date":"2015-08-06T14:54:56.375Z","type":"message"}
{"nick":"travis-ci","date":"2015-08-06T14:54:56.375Z","type":"part"}
{"nick":"creationix","message":"wohoo, we have lpeg in luvi-regular","date":"2015-08-06T15:02:36.837Z","type":"message"}
{"nick":"creationix","message":"I’ve always loved lpeg, but never actually used it much","date":"2015-08-06T15:02:50.497Z","type":"message"}
{"nick":"creationix","message":"well, that was pretty easy to add :) https://github.com/creationix/virgo-proto/commit/a12ad887f84f73a91d4c9b87e417ef92b3024f34","date":"2015-08-06T15:12:03.970Z","type":"message"}
{"nick":"creationix","message":"rphillips: rje:  when one of you have a chance, I’d like feedback on the interface to my TCP check.  See what I’m missing or what would need changing","date":"2015-08-06T15:13:51.843Z","type":"message"}
{"nick":"rphillips","message":"checking","date":"2015-08-06T15:14:15.460Z","type":"message"}
{"nick":"creationix","message":"I tried to shape the input and output like somewhat like the noits xml files","date":"2015-08-06T15:15:52.168Z","type":"message"}
{"nick":"creationix","message":"you can see the input shape at https://github.com/creationix/virgo-proto/blob/master/checks/index.lua#L28-L36 and output at https://github.com/creationix/virgo-proto/blob/master/checks/tcp.lua#L117-L127","date":"2015-08-06T15:16:38.868Z","type":"message"}
{"nick":"creationix","message":"the goal is to implement each type as a black-box with a well defined external interface.  Then I can use coroutines and functional style internally and externally it can interface with the existing agent style","date":"2015-08-06T15:17:32.875Z","type":"message"}
{"nick":"creationix","message":"actually, if we document the interfaces to all these check types with desired behavior that would help a lot.","date":"2015-08-06T15:18:22.694Z","type":"message"}
{"nick":"creationix","message":"I attempted to doc it here at https://github.com/creationix/virgo-proto/blob/master/checks/tcp.lua#L20-L50 for example","date":"2015-08-06T15:18:52.715Z","type":"message"}
{"nick":"rphillips","message":"i think we will need an 'id'","date":"2015-08-06T15:22:09.723Z","type":"message"}
{"nick":"rphillips","message":"for the check","date":"2015-08-06T15:22:12.416Z","type":"message"}
{"nick":"rphillips","message":"we will need to support ipv6 as well","date":"2015-08-06T15:23:45.884Z","type":"message"}
{"nick":"rphillips","message":"the noits allow for selecting ipv4, ipv6, or ipv4/ipv6","date":"2015-08-06T15:24:41.947Z","type":"message"}
{"nick":"rphillips","message":"we might want to wrap that getaddrinfo so we can support that","date":"2015-08-06T15:24:55.783Z","type":"message"}
{"nick":"creationix","message":"so ipv6 yes/no as an input flag?","date":"2015-08-06T15:28:58.483Z","type":"message"}
{"nick":"creationix","message":"and the ID would just be passed through right?","date":"2015-08-06T15:29:15.800Z","type":"message"}
{"nick":"rphillips","message":"well. we support ipv4 only","date":"2015-08-06T15:30:33.631Z","type":"message"}
{"nick":"rphillips","message":"ipv6 only","date":"2015-08-06T15:30:35.532Z","type":"message"}
{"nick":"rphillips","message":"or 'any', ipv4 + ipv6... whichever getaddrinfo return","date":"2015-08-06T15:30:53.111Z","type":"message"}
{"nick":"creationix","message":"would that go on the generic attributes along with host or in the config along with port?","date":"2015-08-06T15:31:02.331Z","type":"message"}
{"nick":"rphillips","message":"yes, close to the 'target'","date":"2015-08-06T15:31:11.246Z","type":"message"}
{"nick":"creationix","message":"ok, so three state (ipv4-only, ipv6-only, both)?","date":"2015-08-06T15:31:36.137Z","type":"message"}
{"nick":"rphillips","message":"correct","date":"2015-08-06T15:33:18.148Z","type":"message"}
{"nick":"rphillips","message":"something we should think about is dns usage","date":"2015-08-06T15:34:23.249Z","type":"message"}
{"nick":"rphillips","message":"the noits run a caching dns server on them","date":"2015-08-06T15:34:33.681Z","type":"message"}
{"nick":"creationix","message":"heh, you can’t use libuv’s dns to look up localhost","date":"2015-08-06T15:34:49.547Z","type":"message"}
{"nick":"creationix","message":"luvit’s is a little better I think","date":"2015-08-06T15:34:57.797Z","type":"message"}
{"nick":"creationix","message":"we could cache dns lookups in ram pretty easily","date":"2015-08-06T15:35:20.056Z","type":"message"}
{"nick":"creationix","message":"with short lifetimes","date":"2015-08-06T15:35:41.053Z","type":"message"}
{"nick":"rphillips","message":"yeah, noit does that as well... it is brittle","date":"2015-08-06T15:35:47.544Z","type":"message"}
{"nick":"rphillips","message":"ours could be better","date":"2015-08-06T15:36:00.484Z","type":"message"}
{"nick":"rphillips","message":"http://docs.rackspace.com/cm/api/v1.0/cm-devguide/content/service-checks.html","date":"2015-08-06T15:37:03.111Z","type":"message"}
{"nick":"rphillips","message":"attributes on the check","date":"2015-08-06T15:37:07.829Z","type":"message"}
{"nick":"rphillips","message":"'disabled' is an option","date":"2015-08-06T15:37:15.652Z","type":"message"}
{"nick":"creationix","reason":"Quit: ZNC - http://znc.in","date":"2015-08-06T15:43:05.248Z","type":"quit"}
{"nick":"creationix","date":"2015-08-06T15:43:28.767Z","type":"join"}
{"nick":"creationix","message":"alright, irc is back","date":"2015-08-06T15:44:04.674Z","type":"message"}
{"nick":"creationix","message":"I think I know what happened.  I was using my server’s ssh service to test the check banner","date":"2015-08-06T15:52:54.588Z","type":"message"}
{"nick":"creationix","message":"and got blacklisted for too many failed ssh connections","date":"2015-08-06T15:53:08.120Z","type":"message"}
{"nick":"rphillips","message":"hah!","date":"2015-08-06T15:54:18.957Z","type":"message"}
{"nick":"rphillips","message":"that would do it","date":"2015-08-06T15:54:21.158Z","type":"message"}
{"nick":"SkyRocknRoll","date":"2015-08-06T15:57:55.652Z","type":"join"}
{"nick":"creationix","message":"I should use http for testing","date":"2015-08-06T16:01:25.695Z","type":"message"}
{"nick":"creationix","message":"alright, now I report partial data on failure","date":"2015-08-06T16:20:08.554Z","type":"message"}
{"nick":"creationix","message":"so if there is a timeout while waiting for the body, it will still have dls results, dns time, banner data, etc","date":"2015-08-06T16:20:30.359Z","type":"message"}
{"nick":"creationix","message":"https://gist.github.com/creationix/0eb3960854d1baf69e41","date":"2015-08-06T16:22:37.797Z","type":"message"}
{"nick":"creationix","message":"rphillips: will dns resolving be common for all remote checks?","date":"2015-08-06T16:38:20.113Z","type":"message"}
{"nick":"creationix","message":"since target and dns family are part of the common attributes","date":"2015-08-06T16:38:33.707Z","type":"message"}
{"nick":"rphillips","message":"yeah, it can be an ip or a fqdn","date":"2015-08-06T16:38:52.643Z","type":"message"}
{"nick":"rphillips","message":"kostco: so, all side effects should be put into the callback","date":"2015-08-06T16:57:09.616Z","type":"message"}
{"nick":"rphillips","message":"typically, an error is passed first","date":"2015-08-06T16:57:19.995Z","type":"message"}
{"nick":"rphillips","message":"callback(err, param1, param2, etc)","date":"2015-08-06T16:57:28.776Z","type":"message"}
{"nick":"kostco","message":"rphillips: my issue is with declaring the metric handler class in the checks is that its repetetive, only, and all of the hostinfo checks that rely on hostinfostdoutsubproc need it, so why not just tie it together and then you just need to worry about the hostinfostdoutsubproc class","date":"2015-08-06T17:01:37.020Z","type":"message"}
{"nick":"kostco","message":"rphillips: the thing is we want to check the data as it streams, lines coming in need to be checked, so a callback wont work, whats wrong with just reading the lines and modifying state and handling any modifications to said state in the final cb?","date":"2015-08-06T17:02:28.915Z","type":"message"}
{"nick":"rphillips","message":"it isn't all that reusable","date":"2015-08-06T17:03:14.712Z","type":"message"}
{"nick":"kostco","message":"rphillips: so the casterfunc in readcast basically does that, draws data from the lines coming in","date":"2015-08-06T17:03:21.326Z","type":"message"}
{"nick":"kostco","message":"what isnt the metric handler or the data being read by a function sent in via the params","date":"2015-08-06T17:03:53.515Z","type":"message"}
{"nick":"rphillips","message":"have a code sample?","date":"2015-08-06T17:05:20.324Z","type":"message"}
{"nick":"kostco","message":"so yea this is with the metric handler merged into the hostinfosubproc class, so it abstracts away the class declaration and just lets the check writer write logic to handle the lines streaming in","date":"2015-08-06T17:06:14.712Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/d747a39e616b7be96404","date":"2015-08-06T17:06:15.261Z","type":"message"}
{"nick":"kostco","message":"and the readcast function here","date":"2015-08-06T17:06:51.389Z","type":"message"}
{"nick":"kostco","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/c3cce11157581b60f67c6f96a4af6caef5e35fb2/hostinfo/misc.lua","date":"2015-08-06T17:06:51.962Z","type":"message"}
{"nick":"rphillips","message":"it's a lot of logic to have in a constructor","date":"2015-08-06T17:07:06.761Z","type":"message"}
{"nick":"kostco","message":"casterfunc is called once per line, removes a lot of boilerplate for places it needs to be used","date":"2015-08-06T17:07:11.873Z","type":"message"}
{"nick":"rphillips","message":"it's not testable either","date":"2015-08-06T17:07:13.124Z","type":"message"}
{"nick":"kostco","message":"couldnt we just write a test that runs the hostinfo checks and returns the data they return?","date":"2015-08-06T17:07:36.374Z","type":"message"}
{"nick":"kostco","message":"why test the hostinfosubproc when we can directly check wehre its being used","date":"2015-08-06T17:07:47.243Z","type":"message"}
{"nick":"rphillips","message":"ideally there would be unit tests for each of these hostinfos","date":"2015-08-06T17:08:34.937Z","type":"message"}
{"nick":"rphillips","message":"with mockups of the files","date":"2015-08-06T17:08:40.612Z","type":"message"}
{"nick":"rphillips","message":"should not have to rely on the operating system for tests","date":"2015-08-06T17:09:09.014Z","type":"message"}
{"nick":"kostco","message":"yea we can test that with the hostinfo subproc handling the abstraction for handling streams","date":"2015-08-06T17:09:16.375Z","type":"message"}
{"nick":"kostco","message":"i do agree that its a lot of logic in a constructer and could prolly be rewritten better","date":"2015-08-06T17:09:37.155Z","type":"message"}
{"nick":"kostco","message":"but i also feel that initializing the handlers everywhere we use the hostinfosubproc is kinda repettetive","date":"2015-08-06T17:09:54.793Z","type":"message"}
{"nick":"rphillips","message":"function Info:_handleLine(line)","date":"2015-08-06T17:10:03.687Z","type":"message"}
{"nick":"rphillips","message":"we could do that","date":"2015-08-06T17:10:17.149Z","type":"message"}
{"nick":"kostco","message":"sure yea!","date":"2015-08-06T17:10:27.080Z","type":"message"}
{"nick":"rphillips","message":"problem is, I feel that is not very clean","date":"2015-08-06T17:12:30.221Z","type":"message"}
{"nick":"rphillips","message":"if it's a separate class we can add a unit test to read a mock file","date":"2015-08-06T17:12:49.408Z","type":"message"}
{"nick":"rphillips","message":"and :pipe() it into the parser","date":"2015-08-06T17:12:59.979Z","type":"message"}
{"nick":"rphillips","message":"aka, handler","date":"2015-08-06T17:13:04.047Z","type":"message"}
{"nick":"rphillips","message":"and compare the results of the parse","date":"2015-08-06T17:13:21.606Z","type":"message"}
{"nick":"kostco","message":"hmm","date":"2015-08-06T17:13:29.175Z","type":"message"}
{"nick":"rphillips","message":"so the unit test would be","date":"2015-08-06T17:13:46.702Z","type":"message"}
{"nick":"kostco","message":"why not have a declaration for the basic hostinfosubproc, and the metric handler in base","date":"2015-08-06T17:13:49.452Z","type":"message"}
{"nick":"kostco","message":"we can write the unit tests that way","date":"2015-08-06T17:13:53.944Z","type":"message"}
{"nick":"kostco","message":"but then we can use a version of it with the two classes merged in which we use in the hostinfo checks","date":"2015-08-06T17:14:07.752Z","type":"message"}
{"nick":"kostco","message":"merged in as in something like","date":"2015-08-06T17:15:23.753Z","type":"message"}
{"nick":"kostco","message":"exports.hostinfo = hostinfo","date":"2015-08-06T17:15:23.838Z","type":"message"}
{"nick":"kostco","message":"exports.hostinfosubproc = 'merged class here'","date":"2015-08-06T17:15:23.839Z","type":"message"}
{"nick":"kostco","message":"exports.hostinfostdoutsubproc = normal hostinfo subproc","date":"2015-08-06T17:15:23.839Z","type":"message"}
{"nick":"kostco","message":"exports.metricshandler = metricshandler","date":"2015-08-06T17:15:23.840Z","type":"message"}
{"nick":"kostco","message":"The last two arent actually used in the hostinfo checks","date":"2015-08-06T17:15:23.923Z","type":"message"}
{"nick":"rphillips","message":"we support single inheritance","date":"2015-08-06T17:15:49.216Z","type":"message"}
{"nick":"kostco","message":"ah but it wont be inhertence where we merge, itll be sort of similiar to what is happening right now","date":"2015-08-06T17:16:22.901Z","type":"message"}
{"nick":"rphillips","message":"pr it up, and we can review it","date":"2015-08-06T17:16:51.263Z","type":"message"}
{"nick":"kostco","message":"a class using another predeclared method on the metrichandler","date":"2015-08-06T17:16:52.659Z","type":"message"}
{"nick":"kostco","message":"ye","date":"2015-08-06T17:16:54.449Z","type":"message"}
{"nick":"kostco","message":"lemme see if i cant clean up the code in the gist i posted","date":"2015-08-06T17:17:07.614Z","type":"message"}
{"nick":"SkyRocknRoll","reason":"Remote host closed the connection","date":"2015-08-06T17:20:19.746Z","type":"quit"}
{"nick":"kostco","message":"rphillips: creationix https://gist.github.com/kaustavha/7ff3f649ed5a90968b2b","date":"2015-08-06T18:01:25.682Z","type":"message"}
{"nick":"[zzz]","reason":"Read error: Connection reset by peer","date":"2015-08-06T18:20:07.459Z","type":"quit"}
{"nick":"kostco","message":"couple things, i went with the detect self._error bit instead of the self.command nil check here","date":"2015-08-06T18:20:55.568Z","type":"message"}
{"nick":"kostco","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/commit/afb2bdf5b22d694660158c981633cccb5d25c22c","date":"2015-08-06T18:20:55.569Z","type":"message"}
{"nick":"kostco","message":"since self.command being nil could mean many things but the test writer can specify an error to be set when initializiation fails/detects something is off.","date":"2015-08-06T18:20:55.570Z","type":"message"}
{"nick":"kostco","message":"will need to apply the changes from here","date":"2015-08-06T18:21:21.107Z","type":"message"}
{"nick":"kostco","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/commit/c2fc85abe92bd8ab5234feb07c798a500b60757c","date":"2015-08-06T18:21:21.191Z","type":"message"}
{"nick":"kostco","message":"to my gist","date":"2015-08-06T18:21:24.102Z","type":"message"}
{"nick":"kostco","message":"also rphillips do you think itd make sense to have a hostinfo:concurrency function thats set in base and returns the concusrrency number? since right now we just have 5 in a lot of places where we do things with async","date":"2015-08-06T18:23:07.670Z","type":"message"}
{"nick":"creationix","message":"kostco: sorry, I don’t quite understand the questions","date":"2015-08-06T18:29:39.001Z","type":"message"}
{"nick":"kostco","message":"creationix: thoughts on the code in the gist","date":"2015-08-06T18:29:55.724Z","type":"message"}
{"nick":"kostco","message":"im working on refactoring the agent","date":"2015-08-06T18:30:12.503Z","type":"message"}
{"nick":"creationix","message":"right, I don’t know the existing object model enough to make intellegent comment","date":"2015-08-06T18:36:50.903Z","type":"message"}
{"nick":"kostco","message":"ah kk fair enough","date":"2015-08-06T18:37:02.784Z","type":"message"}
{"nick":"rphillips","message":"the initialize function should not have a callback function in it","date":"2015-08-06T18:42:08.837Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/kaustavha/7ff3f649ed5a90968b2b#file-autoup-lua-L51","date":"2015-08-06T18:42:14.656Z","type":"message"}
{"nick":"kostco","message":"gotcha gimme one se","date":"2015-08-06T18:44:38.902Z","type":"message"}
{"nick":"kostco","message":"x","date":"2015-08-06T18:44:39.997Z","type":"message"}
{"nick":"kostco","message":"c","date":"2015-08-06T18:44:41.159Z","type":"message"}
{"nick":"kostco","message":"changed it","date":"2015-08-06T18:58:22.403Z","type":"message"}
{"nick":"kostco","message":"rphillips: https://gist.github.com/kaustavha/7ff3f649ed5a90968b2b","date":"2015-08-06T18:58:24.516Z","type":"message"}
{"nick":"rphillips","message":"you need to try it out","date":"2015-08-06T19:18:32.044Z","type":"message"}
{"nick":"rphillips","message":"does it work?","date":"2015-08-06T19:18:38.400Z","type":"message"}
{"nick":"kostco","message":"rphillips: yes","date":"2015-08-06T19:21:19.449Z","type":"message"}
{"nick":"kostco","message":"rphillips: i test everything on a remote box","date":"2015-08-06T19:21:38.947Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/kaustavha/7ff3f649ed5a90968b2b#file-base-lua-L109","date":"2015-08-06T19:23:07.774Z","type":"message"}
{"nick":"rphillips","message":"this is transforming the base class","date":"2015-08-06T19:23:14.489Z","type":"message"}
{"nick":"rphillips","message":"transforming is the wrong word","date":"2015-08-06T19:23:22.852Z","type":"message"}
{"nick":"rphillips","message":"modifying","date":"2015-08-06T19:23:24.393Z","type":"message"}
{"nick":"rphillips","message":"i don't think this is the right approach","date":"2015-08-06T19:23:42.333Z","type":"message"}
{"nick":"kostco","message":"rphillips: hmm indeed, i wonder if i can instantiate it first then modify it","date":"2015-08-06T19:24:04.913Z","type":"message"}
{"nick":"rphillips","message":"I really don't like the _handleLines routine","date":"2015-08-06T19:24:08.416Z","type":"message"}
{"nick":"kostco","message":"which part of it? why not?","date":"2015-08-06T19:24:34.641Z","type":"message"}
{"nick":"kostco","message":"im not too picky on how its done, i just feel instantiating the handler when itll only ever be used via the hostinfostdoutsubproc is repetetive","date":"2015-08-06T19:25:02.594Z","type":"message"}
{"nick":"rphillips","message":"we lose the ability to test it with a stream","date":"2015-08-06T19:25:04.242Z","type":"message"}
{"nick":"rphillips","message":"it might be repetitive, but it's clear what it's doing","date":"2015-08-06T19:25:49.034Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/ba55e2ee8d7558317869913eef211178016f84ee/hostinfo/packages.lua","date":"2015-08-06T19:30:37.489Z","type":"message"}
{"nick":"rphillips","message":"i don't know how we could get this much cleaner","date":"2015-08-06T19:30:45.459Z","type":"message"}
{"nick":"kostco","message":"i think we could actually by not making the test writer worry about the handler being extended and then setting the _transform function","date":"2015-08-06T19:36:23.342Z","type":"message"}
{"nick":"kostco","message":"easier to understand as a built in handlelines function","date":"2015-08-06T19:36:32.314Z","type":"message"}
{"nick":"kostco","message":"we can have a version we use with the self:bindmetrichandler()","date":"2015-08-06T19:36:48.154Z","type":"message"}
{"nick":"kostco","message":"and a testable version without the self:bindmetrichandler()","date":"2015-08-06T19:36:58.629Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/7ff3f649ed5a90968b2b","date":"2015-08-06T19:37:22.081Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/5056b6487125bbdde56d","date":"2015-08-06T19:44:41.365Z","type":"message"}
{"nick":"kostco","message":"rphillips: https://gist.github.com/kaustavha/7ff3f649ed5a90968b2b","date":"2015-08-06T19:52:15.234Z","type":"message"}
{"nick":"kostco","message":"updates it, figured we can test it with streams that way if we set a self._test = true","date":"2015-08-06T19:52:29.964Z","type":"message"}
{"nick":"travis-ci","date":"2015-08-06T20:22:01.159Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2452 (master - e63e83b : Tim Caswell): The build passed.","date":"2015-08-06T20:22:02.168Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/9bea919e0298...e63e83b90991","date":"2015-08-06T20:22:02.170Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/74471467","date":"2015-08-06T20:22:02.170Z","type":"message"}
{"nick":"travis-ci","date":"2015-08-06T20:22:02.170Z","type":"part"}
{"nick":"creationix","message":"rphillips: I fixed luvit/tap to not crash on errors in callbacks again","date":"2015-08-06T20:33:28.605Z","type":"message"}
{"nick":"rphillips","message":"nice!","date":"2015-08-06T20:33:39.518Z","type":"message"}
{"nick":"creationix","message":"It used to depend on uv.run throwing an exception which is no longer the case","date":"2015-08-06T20:34:15.511Z","type":"message"}
{"nick":"creationix","message":"now luv hard exits if you don’t catch exceptions in a event callback","date":"2015-08-06T20:34:28.833Z","type":"message"}
{"nick":"creationix","message":"but since all callbacks in tap usage are wrapped with expect anyway, I juse wrapped them with pcall and routed the error","date":"2015-08-06T20:34:48.216Z","type":"message"}
{"nick":"creationix","message":"rphillips: where should this code go in the r-m-a repo? https://github.com/creationix/virgo-proto/tree/master/checks","date":"2015-08-06T20:36:22.554Z","type":"message"}
{"nick":"creationix","message":"or should I keep developing it here till we’re ready to integrate it?","date":"2015-08-06T20:36:34.061Z","type":"message"}
{"nick":"rphillips","message":"perhaps a ./poller directory","date":"2015-08-06T20:36:48.432Z","type":"message"}
{"nick":"rphillips","message":"or if we come up with a better name","date":"2015-08-06T20:37:01.241Z","type":"message"}
{"nick":"creationix","message":"since all checks are polling, perhaps “remote\"","date":"2015-08-06T20:37:30.936Z","type":"message"}
{"nick":"creationix","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/pull/830/files","date":"2015-08-06T20:43:17.084Z","type":"message"}
{"nick":"creationix","message":"interesting, luvit’s dns module doesn’t use libuv’s dns functions at all","date":"2015-08-06T20:53:41.988Z","type":"message"}
{"nick":"creationix","message":"it’s manual dns on top of udp","date":"2015-08-06T20:53:56.590Z","type":"message"}
{"nick":"rphillips","message":"yeah, libuv doesn't really have any dns functions","date":"2015-08-06T20:54:24.513Z","type":"message"}
{"nick":"rphillips","message":"getaddrinfo only supports A and AAAA records","date":"2015-08-06T20:55:08.250Z","type":"message"}
{"nick":"rphillips","message":"nodejs uses c-ares","date":"2015-08-06T20:55:29.661Z","type":"message"}
{"nick":"creationix","message":"I’m using the libuv one here https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/feat/remote-checks/remote/tcp.lua#L8-L16","date":"2015-08-06T20:55:56.816Z","type":"message"}
{"nick":"creationix","message":"though they are just thread-pool enabled getnameinfo and getaddrinfo","date":"2015-08-06T20:56:50.430Z","type":"message"}
{"nick":"rphillips","message":"that is fine for A or AAAA records","date":"2015-08-06T20:56:57.192Z","type":"message"}
{"nick":"rphillips","message":"use getaddrinfo may become a bottleneck","date":"2015-08-06T20:57:21.801Z","type":"message"}
{"nick":"rphillips","message":"using*","date":"2015-08-06T20:57:25.789Z","type":"message"}
{"nick":"kostco","message":"rphillips: take a look at hostinfo/passwd.lua when you get a chance, unsure how to refactor it to match the hostinfosubprocstdout class style,  and the autoup gists if you want, should be testable while allowing one to skip declaring the handler class","date":"2015-08-06T20:58:36.540Z","type":"message"}
{"nick":"creationix","message":"rphillips: right","date":"2015-08-06T20:58:47.976Z","type":"message"}
{"nick":"creationix","message":"I do wonder how to do a combined ipv6/ipv4 query with luvit’s dns","date":"2015-08-06T20:59:08.012Z","type":"message"}
{"nick":"creationix","message":"it just has quer4 and query6","date":"2015-08-06T20:59:15.359Z","type":"message"}
{"nick":"creationix","message":"*query4","date":"2015-08-06T20:59:22.215Z","type":"message"}
{"nick":"creationix","message":"I suppose I could just call query4 first and then fall-through to query6 if that doesn’t work","date":"2015-08-06T21:00:09.345Z","type":"message"}
{"nick":"rphillips","message":"creationix: i would use getaddrinfo from libuv","date":"2015-08-06T21:00:46.586Z","type":"message"}
{"nick":"rphillips","message":"we don't have a function for it","date":"2015-08-06T21:00:50.737Z","type":"message"}
{"nick":"rphillips","message":"that will allow for the OS to select the best fit","date":"2015-08-06T21:01:31.636Z","type":"message"}
{"nick":"creationix","message":"got it, I’ll use the luvit library when I get to dns checks that need other types","date":"2015-08-06T21:02:48.472Z","type":"message"}
{"nick":"rphillips","message":"exactly +1","date":"2015-08-06T21:03:19.518Z","type":"message"}
{"nick":"rphillips","message":"the getaddrinfo from libuv also allows for hints","date":"2015-08-06T21:03:45.277Z","type":"message"}
{"nick":"creationix","message":"I like doing things like passing in “https” for port and it gives back 443","date":"2015-08-06T21:04:35.140Z","type":"message"}
{"nick":"creationix","message":"not sure how useful that information is though, it’s probably a small database","date":"2015-08-06T21:04:47.493Z","type":"message"}
{"nick":"rphillips","message":"kostco: so adding a _transform using a stream looks like this: https://gist.github.com/rphillips/ff53252b5ea2a8886edd","date":"2015-08-06T21:04:58.312Z","type":"message"}
{"nick":"rphillips","message":"i'm not buying it... it seems more complicated","date":"2015-08-06T21:05:06.559Z","type":"message"}
{"nick":"rphillips","message":"creationix: i'm thinking we should hardcode our default ports","date":"2015-08-06T21:06:11.898Z","type":"message"}
{"nick":"rphillips","message":"for the major port numbers everything should match up","date":"2015-08-06T21:06:23.320Z","type":"message"}
{"nick":"rphillips","message":"but there will be one of those systems that has a different services database","date":"2015-08-06T21:06:45.499Z","type":"message"}
{"nick":"creationix","message":"rphillips: what do you mean?  The users specify the ports in case of remote checks right?","date":"2015-08-06T21:06:59.984Z","type":"message"}
{"nick":"rphillips","message":"i think you are saying passing in 'https' into getaddrinfo","date":"2015-08-06T21:07:25.486Z","type":"message"}
{"nick":"creationix","message":"right, I do that sometimes for fun","date":"2015-08-06T21:07:42.301Z","type":"message"}
{"nick":"creationix","message":"not sure it’s ever a good idea","date":"2015-08-06T21:07:46.271Z","type":"message"}
{"nick":"rphillips","message":":)","date":"2015-08-06T21:07:47.465Z","type":"message"}
{"nick":"rphillips","message":"that use case, I'm just thinking of a stale services database","date":"2015-08-06T21:08:00.637Z","type":"message"}
{"nick":"creationix","message":"but since I am passing the value to libuv from the user, they could type in “https” instead of a number and it would work","date":"2015-08-06T21:09:31.046Z","type":"message"}
{"nick":"creationix","message":"(of course ele would invalidate it long before it got to us)","date":"2015-08-06T21:09:43.414Z","type":"message"}
{"nick":"rphillips","message":"ah ok","date":"2015-08-06T21:09:54.454Z","type":"message"}
{"nick":"kostco","message":"gotta go to a docker workshop so brb","date":"2015-08-06T21:21:35.952Z","type":"message"}
{"nick":"kostco","message":"rphillips: did you get a chance to take a look at","date":"2015-08-06T21:22:12.260Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/7ff3f649ed5a90968b2b","date":"2015-08-06T21:22:12.353Z","type":"message"}
{"nick":"kostco","message":"Yay/nay? is that what you said seemed more complicated","date":"2015-08-06T21:22:12.355Z","type":"message"}
{"nick":"kostco","message":"shoulldve prolly waited till maas week before starting the refactoring process","date":"2015-08-06T21:25:50.396Z","type":"message"}
{"nick":"coderkevin","message":"So, I'm looking into porting Luvit to QNX. Does anyone have a recommendation as to where I should start? Start with libuv first, then go from there?","date":"2015-08-06T22:35:56.179Z","type":"message"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-08-06T22:57:29.673Z","type":"quit"}
{"nick":"creationix","message":"coderkevin: right, libuv and luajit are the hardest parts","date":"2015-08-06T23:33:10.635Z","type":"message"}
{"nick":"creationix","message":"the rest is fairly portable","date":"2015-08-06T23:33:16.830Z","type":"message"}
{"nick":"creationix","message":"rphillips: looks like George is doing something with robots https://github.com/libuv/libuv/pull/379","date":"2015-08-06T23:33:39.311Z","type":"message"}
{"nick":"creationix","message":"I would love a serial primitive in libuv","date":"2015-08-06T23:33:45.422Z","type":"message"}
{"nick":"rphillips","message":"that is really really cool","date":"2015-08-06T23:43:14.686Z","type":"message"}
