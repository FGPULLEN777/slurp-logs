{"nick":"dan3361","reason":"Quit: Leaving.","date":"2015-08-06T00:02:11.318Z","type":"quit"}
{"nick":"rphillips","message":"kostco: why move all the stuff around?","date":"2015-08-06T00:23:20.246Z","type":"message"}
{"nick":"rphillips","message":"like, function HostInfoStdoutSubProc:run(callback) was already running isRestrictedPlatform","date":"2015-08-06T00:23:46.981Z","type":"message"}
{"nick":"kostco","message":"hmm it didnt work for me for some reason","date":"2015-08-06T00:24:26.663Z","type":"message"}
{"nick":"kostco","message":"what you said, i thought so as well","date":"2015-08-06T00:24:36.572Z","type":"message"}
{"nick":"kostco","message":"but i can move that back and give it a shot, which i was just about to do","date":"2015-08-06T00:24:51.453Z","type":"message"}
{"nick":"kostco","message":"but uh i made more changes, experimenting with making it a more functional style, looks like it reduces code","date":"2015-08-06T00:25:08.919Z","type":"message"}
{"nick":"kostco","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/commit/5689eb554a5ac13dd01cf1a4df3963cde799e3da","date":"2015-08-06T00:25:26.750Z","type":"message"}
{"nick":"rphillips","message":"you still need the initialize() function in lua","date":"2015-08-06T00:25:58.532Z","type":"message"}
{"nick":"kostco","message":"hmm it runs without it","date":"2015-08-06T00:26:50.999Z","type":"message"}
{"nick":"kostco","message":"albeit im using the hostinfo runner dunno if that makes a difference","date":"2015-08-06T00:27:01.104Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/5689eb554a5ac13dd01cf1a4df3963cde799e3da/hostinfo/autoupdates.lua#L27-L42","date":"2015-08-06T00:28:16.977Z","type":"message"}
{"nick":"rphillips","message":"this section of code is placed in the constructor","date":"2015-08-06T00:28:22.608Z","type":"message"}
{"nick":"rphillips","message":"you need to look at the buildbots as well","date":"2015-08-06T00:28:48.933Z","type":"message"}
{"nick":"kostco","message":"the buildbots?","date":"2015-08-06T00:29:01.858Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/pull/828","date":"2015-08-06T00:29:12.376Z","type":"message"}
{"nick":"rphillips","message":"'Some checks were not successful'","date":"2015-08-06T00:29:19.074Z","type":"message"}
{"nick":"rphillips","message":"you can click through to the builds","date":"2015-08-06T00:29:34.404Z","type":"message"}
{"nick":"rphillips","message":"https://travis-ci.org/virgo-agent-toolkit/rackspace-monitoring-agent/builds/74334573#L985","date":"2015-08-06T00:29:44.314Z","type":"message"}
{"nick":"kostco","message":"oh yeah","date":"2015-08-06T00:29:47.633Z","type":"message"}
{"nick":"kostco","message":"thats cos it breaks the other checks since they rely on things ive removed, whichll get fixed when i refactor those checks","date":"2015-08-06T00:30:07.695Z","type":"message"}
{"nick":"kostco","message":"so over there","date":"2015-08-06T00:30:43.944Z","type":"message"}
{"nick":"kostco","message":"[string \"bundle:/hostinfo/iptables.lua\"]:22: attempt to index local 'MetricsHandler' (a nil value)","date":"2015-08-06T00:30:43.945Z","type":"message"}
{"nick":"rphillips","message":"so, this is a ported module: https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/a3e1991263fab3b9434500126f9073b3a4f81aa8/hostinfo/ip4routes.lua","date":"2015-08-06T00:32:41.567Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/a3e1991263fab3b9434500126f9073b3a4f81aa8/hostinfo/autoupdates.lua","date":"2015-08-06T00:33:25.680Z","type":"message"}
{"nick":"kostco","message":"yea but i changed stuff, using the misc.streamingSpawn function instead of the hostinfosubproc bound to self, extended from hostinfo","date":"2015-08-06T00:33:27.780Z","type":"message"}
{"nick":"rphillips","message":"shouldn't the autoupdates.lua file look like it?","date":"2015-08-06T00:33:35.909Z","type":"message"}
{"nick":"rphillips","message":"so. parameters to functions should not have side effects","date":"2015-08-06T00:35:24.183Z","type":"message"}
{"nick":"rphillips","message":"i don't think there is a need for streamingSpawn","date":"2015-08-06T00:36:52.488Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/d7690571b9e59e5498be","date":"2015-08-06T00:40:14.285Z","type":"message"}
{"nick":"kostco","message":"so thats what ip4routes would look like with a function acting as streaming spawn instead of using the handler and hostinfosubproc","date":"2015-08-06T00:40:39.362Z","type":"message"}
{"nick":"kostco","message":"the thing is, i need to/want to call the final callback() and abort if the sigar vendor doesnt match up","date":"2015-08-06T00:41:42.617Z","type":"message"}
{"nick":"kostco","message":"also the metric handler is only ever used with the hostinfosubproc, so either way i think we should merge them somehow so the person writing hostinfo checks doesnt need to initialize it, they can just pass in a function that they want called per line","date":"2015-08-06T00:43:43.891Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636","date":"2015-08-06T00:49:40.285Z","type":"message"}
{"nick":"rphillips","message":"this is what I was sorta thinking","date":"2015-08-06T00:49:44.239Z","type":"message"}
{"nick":"rphillips","message":"we could just pass in the class","date":"2015-08-06T00:51:39.797Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636#file-gistfile1-txt-L57","date":"2015-08-06T00:52:13.225Z","type":"message"}
{"nick":"kostco","message":"so pass inside hostinfostdoutsubproc?","date":"2015-08-06T00:52:34.812Z","type":"message"}
{"nick":"kostco","message":"if not command return end sort of a deal?","date":"2015-08-06T00:52:47.098Z","type":"message"}
{"nick":"rphillips","message":"i don't get the use case","date":"2015-08-06T00:53:01.312Z","type":"message"}
{"nick":"kostco","message":"so if for whatever reason sigar returns a vendor name that isnt recognized","date":"2015-08-06T00:53:31.073Z","type":"message"}
{"nick":"kostco","message":"e.g. someone trying to run this on a custom arch distro running server","date":"2015-08-06T00:53:45.050Z","type":"message"}
{"nick":"kostco","message":"arch as in arch linux","date":"2015-08-06T00:53:59.784Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636#file-gistfile1-txt-L53","date":"2015-08-06T00:54:08.723Z","type":"message"}
{"nick":"rphillips","message":"change this to an else","date":"2015-08-06T00:54:12.017Z","type":"message"}
{"nick":"rphillips","message":"and it'll just error out on other platforms","date":"2015-08-06T00:54:18.218Z","type":"message"}
{"nick":"rphillips","message":"we could add one more flag that is like 'enabled'","date":"2015-08-06T00:54:46.591Z","type":"message"}
{"nick":"rphillips","message":"and check for it on the :run()","date":"2015-08-06T00:54:56.246Z","type":"message"}
{"nick":"kostco","message":"but can we error intelligently and return something like self._error = \"linux distro unsupported\"","date":"2015-08-06T00:55:07.188Z","type":"message"}
{"nick":"rphillips","message":"or a :disable() function","date":"2015-08-06T00:55:09.381Z","type":"message"}
{"nick":"kostco","message":"hmmm ok","date":"2015-08-06T00:55:15.227Z","type":"message"}
{"nick":"kostco","message":"yea an enabled flag makes sense, and sounds simple","date":"2015-08-06T00:55:36.636Z","type":"message"}
{"nick":"rphillips","message":"else self:disable('plugin not supported due to vendor')","date":"2015-08-06T00:55:43.410Z","type":"message"}
{"nick":"kostco","message":"hmm","date":"2015-08-06T00:55:49.868Z","type":"message"}
{"nick":"dan336","date":"2015-08-06T00:56:03.457Z","type":"join"}
{"nick":"kostco","message":"so self:disable would be declared in base.lua and would basically set self._error and return callback()?","date":"2015-08-06T00:56:24.616Z","type":"message"}
{"nick":"rphillips","message":"it would just set the self._error","date":"2015-08-06T00:56:42.849Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/blob/a3e1991263fab3b9434500126f9073b3a4f81aa8/hostinfo/base.lua#L96","date":"2015-08-06T00:58:08.976Z","type":"message"}
{"nick":"rphillips","message":"we can short circuit it right here","date":"2015-08-06T00:58:13.090Z","type":"message"}
{"nick":"rphillips","message":"if self._error then callback() else self._execute(callback) end","date":"2015-08-06T00:58:31.375Z","type":"message"}
{"nick":"kostco","message":"ah alright","date":"2015-08-06T00:58:54.904Z","type":"message"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-08-06T01:03:31.303Z","type":"quit"}
{"nick":"rphillips","message":"kostco: we could assume","date":"2015-08-06T01:05:13.402Z","type":"message"}
{"nick":"rphillips","message":"if command is nil then the hostinfo is diabled","date":"2015-08-06T01:05:25.836Z","type":"message"}
{"nick":"rphillips","message":"disabled","date":"2015-08-06T01:05:27.549Z","type":"message"}
{"nick":"kostco","message":"hmm so we have teh self error set while looking at vendor","date":"2015-08-06T01:06:02.201Z","type":"message"}
{"nick":"kostco","message":"so just emit the callback","date":"2015-08-06T01:06:18.201Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/8e5ba84263d58527f636#file-gistfile1-txt-L48-L55","date":"2015-08-06T01:06:50.294Z","type":"message"}
{"nick":"rphillips","message":"so, command is nil","date":"2015-08-06T01:07:07.789Z","type":"message"}
{"nick":"rphillips","message":"if command is nil, then on that same line 96 in base.lua","date":"2015-08-06T01:07:44.436Z","type":"message"}
{"nick":"rphillips","message":"have a static constant saying it is disabled","date":"2015-08-06T01:08:11.504Z","type":"message"}
{"nick":"rphillips","message":"just like on 93","date":"2015-08-06T01:08:26.195Z","type":"message"}
{"nick":"rphillips","message":"could be the exact same error message","date":"2015-08-06T01:08:42.999Z","type":"message"}
{"nick":"kostco","message":"hmm but we're not really saying much, its sort of a generic message","date":"2015-08-06T01:09:08.484Z","type":"message"}
{"nick":"kostco","message":"which i feel down the road might confuse someone","date":"2015-08-06T01:09:15.304Z","type":"message"}
{"nick":"kostco","message":"like hey why do i get this hostinfo is disabled on ubuntu 20.00","date":"2015-08-06T01:09:30.929Z","type":"message"}
{"nick":"kostco","message":"well turns out sigar doesnt work, but theyd prolly debug it faster if it said doesnt work on your linux distro","date":"2015-08-06T01:09:48.945Z","type":"message"}
{"nick":"rphillips","message":"sure... we can add the vendor name","date":"2015-08-06T01:10:51.905Z","type":"message"}
{"nick":"rphillips","message":"os name as well","date":"2015-08-06T01:11:01.144Z","type":"message"}
{"nick":"rphillips","message":"etc","date":"2015-08-06T01:11:02.893Z","type":"message"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-08-06T01:24:25.203Z","type":"quit"}
{"nick":"kostco","message":"rphillips: thoughts on this:","date":"2015-08-06T02:04:38.115Z","type":"message"}
{"nick":"kostco","message":"https://gist.github.com/kaustavha/d747a39e616b7be96404","date":"2015-08-06T02:04:38.117Z","type":"message"}
{"nick":"kostco","message":"its the most succint one ive been able to make, mixes functional and oop a lot though, so mainly all i did was move the handler into the hostinfosubproc class","date":"2015-08-06T02:05:07.142Z","type":"message"}
{"nick":"kostco","message":"since thats the only place we use the handler","date":"2015-08-06T02:05:12.844Z","type":"message"}
{"nick":"kostco","message":"therefore when writing hostinfo checks the writer doesnt need to worry about instantiating the handler, just what they want to do with each line, which is the main non repetetive part","date":"2015-08-06T02:05:47.163Z","type":"message"}
{"nick":"kostco","message":"k ill be back tomorrow","date":"2015-08-06T02:22:53.741Z","type":"message"}
{"nick":"creationix","message":"kostco: I can look at in the morning when I have more brain left","date":"2015-08-06T02:28:23.681Z","type":"message"}
{"nick":"rphillips","message":"creationix: https://twitter.com/jedisct1/status/628986328080908288","date":"2015-08-06T02:31:34.558Z","type":"message"}
{"nick":"rphillips","message":"creationix: pcre vulnerability","date":"2015-08-06T02:31:40.530Z","type":"message"}
{"nick":"creationix","message":"thanks","date":"2015-08-06T02:31:50.170Z","type":"message"}
{"nick":"creationix","message":"I need to learn some advanced Heap Fengshui techniques.","date":"2015-08-06T02:32:28.137Z","type":"message"}
{"nick":"rphillips","message":"kostco: i don't understand what is wrong with the template I wrote","date":"2015-08-06T02:32:35.485Z","type":"message"}
{"nick":"rphillips","message":"mixing functional and oop is probably not the cleanest","date":"2015-08-06T02:33:09.605Z","type":"message"}
{"nick":"creationix","message":"functional all the way! ;)","date":"2015-08-06T02:33:57.051Z","type":"message"}
{"nick":"creationix","message":"but I digress..","date":"2015-08-06T02:34:06.570Z","type":"message"}
{"nick":"rphillips","message":"+1 to functional","date":"2015-08-06T02:34:27.785Z","type":"message"}
{"nick":"creationix","message":"I love local variables much more than table properties in lua.","date":"2015-08-06T02:37:18.089Z","type":"message"}
{"nick":"creationix","message":"they are simpler, explicit, statically checked by the linter and easier on the VM","date":"2015-08-06T02:37:36.162Z","type":"message"}
{"nick":"rphillips","message":"kostco: part of the problem is that our inheritance model is single inheritance","date":"2015-08-06T02:51:14.733Z","type":"message"}
{"nick":"hdms","date":"2015-08-06T02:51:54.236Z","type":"join"}
{"nick":"rphillips","message":"in C++ we could extend the HostInfo class to be inherited from a Transform as well","date":"2015-08-06T02:51:59.788Z","type":"message"}
{"nick":"rphillips","message":"and then pipe to self","date":"2015-08-06T02:52:18.593Z","type":"message"}
{"nick":"daurnimator","message":"you can do multiple inheritance in lua...","date":"2015-08-06T03:00:09.909Z","type":"message"}
{"nick":"daurnimator","message":"just you probably rightfully chose not to","date":"2015-08-06T03:00:27.375Z","type":"message"}
{"nick":"rphillips","message":"true","date":"2015-08-06T03:04:15.927Z","type":"message"}
{"nick":"rphillips","message":"we modeled the inheritence after nodejs, which was single","date":"2015-08-06T03:04:41.666Z","type":"message"}
{"nick":"rphillips","message":"nodejs/javascript","date":"2015-08-06T03:04:49.811Z","type":"message"}
{"nick":"creationix","message":"I like rust traits","date":"2015-08-06T03:43:57.884Z","type":"message"}
{"nick":"SkyRocknRoll_","reason":"Ping timeout: 264 seconds","date":"2015-08-06T05:14:13.465Z","type":"quit"}
{"nick":"hdms","reason":"Quit: hdms","date":"2015-08-06T06:02:30.886Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-06T06:20:28.292Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Read error: No route to host","date":"2015-08-06T08:39:19.275Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-06T08:39:52.483Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Read error: No route to host","date":"2015-08-06T08:59:12.118Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-06T08:59:43.045Z","type":"join"}
{"nick":"piernov","reason":"Ping timeout: 250 seconds","date":"2015-08-06T09:08:04.411Z","type":"quit"}
{"nick":"piernov","date":"2015-08-06T09:08:16.327Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 260 seconds","date":"2015-08-06T11:08:39.930Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-08-06T11:20:40.415Z","type":"join"}
{"nick":"hdms","date":"2015-08-06T12:22:02.993Z","type":"join"}
{"nick":"dan336","date":"2015-08-06T13:17:24.425Z","type":"join"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-08-06T13:32:32.961Z","type":"quit"}
{"nick":"rphillips","message":"good morning","date":"2015-08-06T13:33:24.433Z","type":"message"}
{"nick":"SkyRocknRoll","reason":"Remote host closed the connection","date":"2015-08-06T13:45:05.780Z","type":"quit"}
{"nick":"creationix","message":"rphillips: morning","date":"2015-08-06T13:51:24.371Z","type":"message"}
{"nick":"creationix","message":"I've been thinking about the pcre CVE, I doubt we are actually vunerable","date":"2015-08-06T13:51:42.443Z","type":"message"}
{"nick":"creationix","message":"Since it's a heap Feng Shui attack, the limited size of our strings and the fact that they must be valid utf8 seriously limits what can be done","date":"2015-08-06T13:52:38.273Z","type":"message"}
{"nick":"rphillips","message":"gotcha","date":"2015-08-06T13:55:09.641Z","type":"message"}
{"nick":"creationix","message":"still, looking at the actual report, it's not hard to overflow the heap, I could be wrong if there is another vector where they can insert large binary strings in memory","date":"2015-08-06T13:56:20.949Z","type":"message"}
{"nick":"creationix","message":"but pretty much all the user-settable inputs to the agent are short utf8 strings right?","date":"2015-08-06T13:56:45.889Z","type":"message"}
{"nick":"creationix","message":"the fix is scheduled for September in v8.38.  So by the time we go live with the new feature, it should be fine","date":"2015-08-06T13:57:38.752Z","type":"message"}
{"nick":"creationix","message":"rphillips: have you ever used mdns to discover services on the local network?","date":"2015-08-06T14:18:34.248Z","type":"message"}
{"nick":"creationix","message":"I mean implemented a server/client pair","date":"2015-08-06T14:18:41.453Z","type":"message"}
{"nick":"rphillips","message":"i had a pet project once","date":"2015-08-06T14:19:37.713Z","type":"message"}
{"nick":"rphillips","message":"most production networks have multicast turned off","date":"2015-08-06T14:20:06.842Z","type":"message"}
{"nick":"rphillips","message":"home network. works just fine","date":"2015-08-06T14:20:22.905Z","type":"message"}
{"nick":"creationix","message":"my use case is a workshop for kids","date":"2015-08-06T14:24:42.521Z","type":"message"}
{"nick":"creationix","message":"so at home, mdns might work, but not likely at some event?","date":"2015-08-06T14:25:04.865Z","type":"message"}
{"nick":"rphillips","message":"Correct. Not likely","date":"2015-08-06T14:25:21.825Z","type":"message"}
{"nick":"creationix","message":"I suppose this is why most systems these days use some known public internet server to help find stuff","date":"2015-08-06T14:25:40.606Z","type":"message"}
{"nick":"creationix","message":"public dns -> public server -> local master","date":"2015-08-06T14:26:34.949Z","type":"message"}
{"nick":"creationix","message":"(assuming the local master also told the public server it’s local address and the querying client also told it the internal address)","date":"2015-08-06T14:26:59.250Z","type":"message"}
{"nick":"rphillips","message":"You could setup a dynamic","date":"2015-08-06T14:27:22.104Z","type":"message"}
{"nick":"rphillips","message":"Dns with bind with a restful service","date":"2015-08-06T14:27:40.319Z","type":"message"}
{"nick":"creationix","message":"internal dns?","date":"2015-08-06T14:27:51.388Z","type":"message"}
{"nick":"creationix","message":"my linux boxes can find other linux boxes by hostname on my home lan","date":"2015-08-06T14:28:12.195Z","type":"message"}
{"nick":"creationix","message":"the router is dd-wrt","date":"2015-08-06T14:28:17.844Z","type":"message"}
{"nick":"creationix","message":"but my mac’s can’t find them by hostname","date":"2015-08-06T14:28:26.745Z","type":"message"}
{"nick":"dan336","date":"2015-08-06T14:28:47.372Z","type":"join"}
{"nick":"rphillips","message":"You would register mydns.org and set the name server to your cloud server then write your client to register their internal ip to your service","date":"2015-08-06T14:29:04.780Z","type":"message"}
{"nick":"creationix","message":"oh interesting, use ddns, but publish internal IPs","date":"2015-08-06T14:29:32.235Z","type":"message"}
{"nick":"rphillips","message":"right... you could use a dynamic provider, or write your own pretty easily","date":"2015-08-06T14:29:58.350Z","type":"message"}
{"nick":"rphillips","message":"just give it a really low ttl","date":"2015-08-06T14:30:09.400Z","type":"message"}
{"nick":"creationix","message":"the problem is I have multiple networks","date":"2015-08-06T14:30:12.984Z","type":"message"}
{"nick":"creationix","message":"I could be at home, at someone else’s house, or on the road using a cell phone hotspot","date":"2015-08-06T14:30:27.187Z","type":"message"}
{"nick":"creationix","message":"I want to be able to just turn on the master and slaves, connect them to the network and they magically find eachother","date":"2015-08-06T14:30:51.346Z","type":"message"}
{"nick":"creationix","message":"and I might have multiple masters, one running at home on a rPI, one as a mobile app on my phone and one as a chrome app","date":"2015-08-06T14:31:20.252Z","type":"message"}
{"nick":"rphillips","message":"ah, you could definetly abuse https://coreos.com/os/docs/latest/cluster-discovery.html","date":"2015-08-06T14:31:38.479Z","type":"message"}
{"nick":"creationix","message":"the really hard part is some of the clients are web pages","date":"2015-08-06T14:31:39.910Z","type":"message"}
{"nick":"creationix","message":"but I might just need the master to display it’s local IP somehow and enter that manually into the web clients","date":"2015-08-06T14:32:04.537Z","type":"message"}
{"nick":"creationix","message":"(publicly hosted, but work offline with appcache)","date":"2015-08-06T14:32:47.334Z","type":"message"}
{"nick":"rphillips","message":"you could host your own etcd discovery service and not expire tokens","date":"2015-08-06T14:32:56.846Z","type":"message"}
{"nick":"creationix","message":"but how would i find that service?","date":"2015-08-06T14:33:26.747Z","type":"message"}
{"nick":"creationix","message":"the thing I’m making is essentially a discovery service, but it needs to work when there is no internet, but is local lan","date":"2015-08-06T14:33:57.974Z","type":"message"}
{"nick":"rphillips","message":"ah not internet","date":"2015-08-06T14:34:10.157Z","type":"message"}
{"nick":"rphillips","message":"missed that requirement","date":"2015-08-06T14:34:14.384Z","type":"message"}
{"nick":"rphillips","message":"no*","date":"2015-08-06T14:34:16.366Z","type":"message"}
{"nick":"rphillips","message":"if you are connected to the same access point, a broadcast should work","date":"2015-08-06T14:34:50.504Z","type":"message"}
{"nick":"rphillips","message":"which is basically mdns","date":"2015-08-06T14:34:55.579Z","type":"message"}
{"nick":"creationix","message":"I guess I could try mdns first and fall back to manual","date":"2015-08-06T14:35:45.682Z","type":"message"}
{"nick":"creationix","message":"I just don’t have manual on all the clients","date":"2015-08-06T14:36:02.050Z","type":"message"}
{"nick":"creationix","message":"many are headless nodes (microcontrollers with wifi client)","date":"2015-08-06T14:36:25.157Z","type":"message"}
{"nick":"creationix","message":"rphillips: thanks for the feedback, it’s a hard problem I’ve been working on for years","date":"2015-08-06T14:38:24.418Z","type":"message"}
{"nick":"rphillips","message":"yeah, not easy","date":"2015-08-06T14:45:36.426Z","type":"message"}
{"nick":"rphillips","message":"i always thought the quake3 server discovery was good http://caia.swin.edu.au/reports/070730A/CAIA-TR-070730A.pdf","date":"2015-08-06T14:49:53.331Z","type":"message"}
{"nick":"rphillips","message":"doesn't solve the issue with server0","date":"2015-08-06T14:50:44.736Z","type":"message"}
{"nick":"creationix","message":"yep, that works well when you have internet","date":"2015-08-06T14:52:38.507Z","type":"message"}
{"nick":"creationix","message":"maybe there isn’t one solution for every case","date":"2015-08-06T14:52:47.348Z","type":"message"}
{"nick":"creationix","message":"but in most cases I should have either internet or mdns right?","date":"2015-08-06T14:52:59.540Z","type":"message"}
{"nick":"creationix","message":"I can have masters register with a cloud server publishing their internal IP and subnet","date":"2015-08-06T14:54:14.383Z","type":"message"}
{"nick":"creationix","message":"when a client queries, return all masters with the same subnet","date":"2015-08-06T14:54:29.728Z","type":"message"}
{"nick":"creationix","message":"though I suppose is the master and client are on the same nat, they will have the same public IP for even faster matching","date":"2015-08-06T14:54:49.419Z","type":"message"}
{"nick":"creationix","message":"*if","date":"2015-08-06T14:54:52.753Z","type":"message"}
{"nick":"travis-ci","date":"2015-08-06T14:54:55.431Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvi#713 (master - babc802 : Tim Caswell): The build passed.","date":"2015-08-06T14:54:56.373Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvi/compare/e59881b0020c...babc8029afee","date":"2015-08-06T14:54:56.374Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvi/builds/74419642","date":"2015-08-06T14:54:56.375Z","type":"message"}
{"nick":"travis-ci","date":"2015-08-06T14:54:56.375Z","type":"part"}
{"nick":"creationix","message":"wohoo, we have lpeg in luvi-regular","date":"2015-08-06T15:02:36.837Z","type":"message"}
{"nick":"creationix","message":"I’ve always loved lpeg, but never actually used it much","date":"2015-08-06T15:02:50.497Z","type":"message"}
{"nick":"creationix","message":"well, that was pretty easy to add :) https://github.com/creationix/virgo-proto/commit/a12ad887f84f73a91d4c9b87e417ef92b3024f34","date":"2015-08-06T15:12:03.970Z","type":"message"}
{"nick":"creationix","message":"rphillips: rje:  when one of you have a chance, I’d like feedback on the interface to my TCP check.  See what I’m missing or what would need changing","date":"2015-08-06T15:13:51.843Z","type":"message"}
{"nick":"rphillips","message":"checking","date":"2015-08-06T15:14:15.460Z","type":"message"}
{"nick":"creationix","message":"I tried to shape the input and output like somewhat like the noits xml files","date":"2015-08-06T15:15:52.168Z","type":"message"}
{"nick":"creationix","message":"you can see the input shape at https://github.com/creationix/virgo-proto/blob/master/checks/index.lua#L28-L36 and output at https://github.com/creationix/virgo-proto/blob/master/checks/tcp.lua#L117-L127","date":"2015-08-06T15:16:38.868Z","type":"message"}
{"nick":"creationix","message":"the goal is to implement each type as a black-box with a well defined external interface.  Then I can use coroutines and functional style internally and externally it can interface with the existing agent style","date":"2015-08-06T15:17:32.875Z","type":"message"}
{"nick":"creationix","message":"actually, if we document the interfaces to all these check types with desired behavior that would help a lot.","date":"2015-08-06T15:18:22.694Z","type":"message"}
{"nick":"creationix","message":"I attempted to doc it here at https://github.com/creationix/virgo-proto/blob/master/checks/tcp.lua#L20-L50 for example","date":"2015-08-06T15:18:52.715Z","type":"message"}
{"nick":"rphillips","message":"i think we will need an 'id'","date":"2015-08-06T15:22:09.723Z","type":"message"}
{"nick":"rphillips","message":"for the check","date":"2015-08-06T15:22:12.416Z","type":"message"}
{"nick":"rphillips","message":"we will need to support ipv6 as well","date":"2015-08-06T15:23:45.884Z","type":"message"}
{"nick":"rphillips","message":"the noits allow for selecting ipv4, ipv6, or ipv4/ipv6","date":"2015-08-06T15:24:41.947Z","type":"message"}
{"nick":"rphillips","message":"we might want to wrap that getaddrinfo so we can support that","date":"2015-08-06T15:24:55.783Z","type":"message"}
{"nick":"creationix","message":"so ipv6 yes/no as an input flag?","date":"2015-08-06T15:28:58.483Z","type":"message"}
{"nick":"creationix","message":"and the ID would just be passed through right?","date":"2015-08-06T15:29:15.800Z","type":"message"}
{"nick":"rphillips","message":"well. we support ipv4 only","date":"2015-08-06T15:30:33.631Z","type":"message"}
{"nick":"rphillips","message":"ipv6 only","date":"2015-08-06T15:30:35.532Z","type":"message"}
{"nick":"rphillips","message":"or 'any', ipv4 + ipv6... whichever getaddrinfo return","date":"2015-08-06T15:30:53.111Z","type":"message"}
{"nick":"creationix","message":"would that go on the generic attributes along with host or in the config along with port?","date":"2015-08-06T15:31:02.331Z","type":"message"}
{"nick":"rphillips","message":"yes, close to the 'target'","date":"2015-08-06T15:31:11.246Z","type":"message"}
{"nick":"creationix","message":"ok, so three state (ipv4-only, ipv6-only, both)?","date":"2015-08-06T15:31:36.137Z","type":"message"}
{"nick":"rphillips","message":"correct","date":"2015-08-06T15:33:18.148Z","type":"message"}
{"nick":"rphillips","message":"something we should think about is dns usage","date":"2015-08-06T15:34:23.249Z","type":"message"}
{"nick":"rphillips","message":"the noits run a caching dns server on them","date":"2015-08-06T15:34:33.681Z","type":"message"}
{"nick":"creationix","message":"heh, you can’t use libuv’s dns to look up localhost","date":"2015-08-06T15:34:49.547Z","type":"message"}
{"nick":"creationix","message":"luvit’s is a little better I think","date":"2015-08-06T15:34:57.797Z","type":"message"}
{"nick":"creationix","message":"we could cache dns lookups in ram pretty easily","date":"2015-08-06T15:35:20.056Z","type":"message"}
{"nick":"creationix","message":"with short lifetimes","date":"2015-08-06T15:35:41.053Z","type":"message"}
{"nick":"rphillips","message":"yeah, noit does that as well... it is brittle","date":"2015-08-06T15:35:47.544Z","type":"message"}
{"nick":"rphillips","message":"ours could be better","date":"2015-08-06T15:36:00.484Z","type":"message"}
{"nick":"rphillips","message":"http://docs.rackspace.com/cm/api/v1.0/cm-devguide/content/service-checks.html","date":"2015-08-06T15:37:03.111Z","type":"message"}
{"nick":"rphillips","message":"attributes on the check","date":"2015-08-06T15:37:07.829Z","type":"message"}
{"nick":"rphillips","message":"'disabled' is an option","date":"2015-08-06T15:37:15.652Z","type":"message"}
{"nick":"creationix","reason":"Quit: ZNC - http://znc.in","date":"2015-08-06T15:43:05.248Z","type":"quit"}
{"nick":"creationix","date":"2015-08-06T15:43:28.767Z","type":"join"}
{"nick":"creationix","message":"alright, irc is back","date":"2015-08-06T15:44:04.674Z","type":"message"}
{"nick":"creationix","message":"I think I know what happened.  I was using my server’s ssh service to test the check banner","date":"2015-08-06T15:52:54.588Z","type":"message"}
{"nick":"creationix","message":"and got blacklisted for too many failed ssh connections","date":"2015-08-06T15:53:08.120Z","type":"message"}
{"nick":"rphillips","message":"hah!","date":"2015-08-06T15:54:18.957Z","type":"message"}
{"nick":"rphillips","message":"that would do it","date":"2015-08-06T15:54:21.158Z","type":"message"}
{"nick":"SkyRocknRoll","date":"2015-08-06T15:57:55.652Z","type":"join"}
