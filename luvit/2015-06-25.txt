{"nick":"ralphtheninja","date":"2015-06-25T00:40:52.730Z","type":"join"}
{"nick":"dg__","reason":"Ping timeout: 272 seconds","date":"2015-06-25T01:25:20.240Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-06-25T05:02:28.262Z","type":"join"}
{"nick":"hdms","date":"2015-06-25T06:06:57.317Z","type":"join"}
{"nick":"hdms","reason":"Client Quit","date":"2015-06-25T06:07:34.558Z","type":"quit"}
{"nick":"torpor","date":"2015-06-25T09:02:04.516Z","type":"join"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-06-25T10:10:29.596Z","type":"quit"}
{"nick":"torpor","date":"2015-06-25T10:21:33.328Z","type":"join"}
{"nick":"torpor","reason":"Quit: Leaving.","date":"2015-06-25T10:39:15.549Z","type":"quit"}
{"nick":"SkyRocknRoll","reason":"Ping timeout: 256 seconds","date":"2015-06-25T10:51:10.299Z","type":"quit"}
{"nick":"SkyRocknRoll","date":"2015-06-25T11:15:49.684Z","type":"join"}
{"nick":"SkyRocknRoll","reason":"Remote host closed the connection","date":"2015-06-25T11:46:12.906Z","type":"quit"}
{"nick":"torpor","date":"2015-06-25T11:46:28.345Z","type":"join"}
{"nick":"torpor","reason":"Client Quit","date":"2015-06-25T11:46:53.654Z","type":"quit"}
{"nick":"rphillips","message":"good morning","date":"2015-06-25T12:52:14.254Z","type":"message"}
{"nick":"dan336","date":"2015-06-25T14:27:16.359Z","type":"join"}
{"nick":"rphillips","message":"going to do a luvit release","date":"2015-06-25T14:36:47.853Z","type":"message"}
{"nick":"rphillips","message":"anybody want to get anything in?","date":"2015-06-25T14:36:54.451Z","type":"message"}
{"nick":"creationix","message":"rphillips: I can do a lit release first if you want","date":"2015-06-25T14:49:56.287Z","type":"message"}
{"nick":"rphillips","message":"+1","date":"2015-06-25T14:50:16.252Z","type":"message"}
{"nick":"creationix","message":"we're 14 commits past the last tag","date":"2015-06-25T14:50:42.294Z","type":"message"}
{"nick":"creationix","message":"rphillips: ok, lit 2.1.0 released","date":"2015-06-25T14:53:58.049Z","type":"message"}
{"nick":"rphillips","message":"sweet","date":"2015-06-25T14:54:28.457Z","type":"message"}
{"nick":"rphillips","message":"bumped lit in luvit","date":"2015-06-25T14:55:01.349Z","type":"message"}
{"nick":"rphillips","message":"i'll get the changelog together","date":"2015-06-25T14:55:08.954Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T14:57:22.377Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2256 (master - 5cdc784 : Ryan Phillips): The build passed.","date":"2015-06-25T14:57:23.439Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/86f37445e03e...5cdc78467509","date":"2015-06-25T14:57:23.625Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68333806","date":"2015-06-25T14:57:23.626Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T14:57:23.626Z","type":"part"}
{"nick":"travis-ci","date":"2015-06-25T15:00:52.456Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2257 (master - 3a0d49f : Ryan Phillips): The build passed.","date":"2015-06-25T15:00:53.448Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/5cdc78467509...3a0d49fa6047","date":"2015-06-25T15:00:53.634Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68334186","date":"2015-06-25T15:00:53.635Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T15:00:53.635Z","type":"part"}
{"nick":"rphillips","message":"ok 2.2.1 done","date":"2015-06-25T15:02:12.627Z","type":"message"}
{"nick":"rphillips","message":"of luvit","date":"2015-06-25T15:02:15.439Z","type":"message"}
{"nick":"piernov_","date":"2015-06-25T15:02:32.264Z","type":"join"}
{"nick":"travis-ci","date":"2015-06-25T15:02:38.324Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2258 (master - 55aa90d : Ryan Phillips): The build passed.","date":"2015-06-25T15:02:39.303Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/3a0d49fa6047...55aa90da3531","date":"2015-06-25T15:02:39.490Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68334506","date":"2015-06-25T15:02:39.490Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T15:02:39.490Z","type":"part"}
{"nick":"piernov_","reason":"Remote host closed the connection","date":"2015-06-25T15:03:09.469Z","type":"quit"}
{"nick":"travis-ci","date":"2015-06-25T15:03:37.569Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2259 (2.2.1 - 55aa90d : Ryan Phillips): The build failed.","date":"2015-06-25T15:03:38.614Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/2.2.1","date":"2015-06-25T15:03:38.800Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68334710","date":"2015-06-25T15:03:38.800Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T15:03:38.801Z","type":"part"}
{"nick":"travis-ci","date":"2015-06-25T15:10:13.204Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2259 (2.2.1 - 55aa90d : Ryan Phillips): The build failed.","date":"2015-06-25T15:10:14.261Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/2.2.1","date":"2015-06-25T15:10:14.449Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68334710","date":"2015-06-25T15:10:14.449Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T15:10:14.449Z","type":"part"}
{"nick":"rphillips","message":"creationix: https://travis-ci.org/luvit/luvit/builds/68334710#L276","date":"2015-06-25T15:13:23.236Z","type":"message"}
{"nick":"rphillips","message":"hmm","date":"2015-06-25T15:13:25.753Z","type":"message"}
{"nick":"rphillips","message":"luvit keys are empty","date":"2015-06-25T15:13:49.026Z","type":"message"}
{"nick":"creationix","message":"you hit the github rate limit","date":"2015-06-25T15:14:10.827Z","type":"message"}
{"nick":"rphillips","message":"ah k","date":"2015-06-25T15:15:01.211Z","type":"message"}
{"nick":"creationix","message":"Adding a GITHUB_TOKEN to the environment would greatly increase the limit, but then how would you securely upload that token","date":"2015-06-25T15:15:40.389Z","type":"message"}
{"nick":"creationix","message":"looks like your limit will reset at 10:30","date":"2015-06-25T15:17:01.420Z","type":"message"}
{"nick":"creationix","message":"so yo ucould just wait 13 minutes","date":"2015-06-25T15:17:06.317Z","type":"message"}
{"nick":"rphillips","message":"ok","date":"2015-06-25T15:17:14.255Z","type":"message"}
{"nick":"rphillips","message":"i should have done [skip ci]","date":"2015-06-25T15:17:24.247Z","type":"message"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-06-25T15:30:42.544Z","type":"quit"}
{"nick":"erlbot--_","date":"2015-06-25T15:32:56.879Z","type":"join"}
{"nick":"creationix","message":"hmm, my plugin idea won't work on linux","date":"2015-06-25T15:33:23.831Z","type":"message"}
{"nick":"creationix","message":"on osx, you can cat  unix socket, but not on linux","date":"2015-06-25T15:33:34.039Z","type":"message"}
{"nick":"creationix","message":"I'll bet socat works though :)","date":"2015-06-25T15:33:52.467Z","type":"message"}
{"nick":"creationix","message":"yep `socat - UNIX:/var/run/gardener`","date":"2015-06-25T15:34:49.424Z","type":"message"}
{"nick":"rphillips","message":"yeah","date":"2015-06-25T15:36:31.636Z","type":"message"}
{"nick":"rphillips","message":"socat++","date":"2015-06-25T15:36:33.705Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T15:40:23.732Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2262 (master - ebc3ddb : Ryan Phillips): The build passed.","date":"2015-06-25T15:40:24.713Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/55aa90da3531...ebc3ddb9e64d","date":"2015-06-25T15:40:24.900Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68341129","date":"2015-06-25T15:40:24.900Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T15:40:24.900Z","type":"part"}
{"nick":"travis-ci","date":"2015-06-25T15:44:43.690Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2263 (master - 4482565 : Ryan Phillips): The build passed.","date":"2015-06-25T15:44:44.698Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/ebc3ddb9e64d...448256597334","date":"2015-06-25T15:44:44.885Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68341846","date":"2015-06-25T15:44:44.885Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T15:44:44.885Z","type":"part"}
{"nick":"creationix","message":"ok, luvit bridge is working! https://github.com/creationix/gardener","date":"2015-06-25T15:52:26.783Z","type":"message"}
{"nick":"creationix","message":"the .ino file flashes to the sensor controller (spark core)","date":"2015-06-25T15:52:47.408Z","type":"message"}
{"nick":"creationix","message":"the bridge is the luvit server","date":"2015-06-25T15:52:54.469Z","type":"message"}
{"nick":"creationix","message":"the agent plugin is simple the socat line","date":"2015-06-25T15:52:59.039Z","type":"message"}
{"nick":"creationix","message":"*simply","date":"2015-06-25T15:53:05.542Z","type":"message"}
{"nick":"creationix","message":"the bridge accepts metrics and stores them along with the timestamps https://github.com/creationix/gardener/blob/master/spark/main.ino#L31","date":"2015-06-25T15:53:36.545Z","type":"message"}
{"nick":"creationix","message":"and when socat reads the socket, it dumps the plugin report https://github.com/creationix/gardener/blob/master/bridge/server.lua#L45-L52","date":"2015-06-25T15:54:03.274Z","type":"message"}
{"nick":"erlbot--_","reason":"Remote host closed the connection","date":"2015-06-25T15:58:18.767Z","type":"quit"}
{"nick":"creationix","message":"now to setup a dedicated server.  I'm thinking one of the RPIs","date":"2015-06-25T15:59:14.050Z","type":"message"}
{"nick":"SkyRocknRoll","date":"2015-06-25T16:01:41.956Z","type":"join"}
{"nick":"dan336","date":"2015-06-25T16:04:37.394Z","type":"join"}
{"nick":"creationix","message":"hmm, it runs fine when I run it manually, but pretty-print crashes with stack overflow when running via upstart","date":"2015-06-25T16:47:16.359Z","type":"message"}
{"nick":"creationix","message":"rphillips: didn't you see a stack overflow issue the other day with pretty-print dump?","date":"2015-06-25T16:47:28.713Z","type":"message"}
{"nick":"rphillips","message":"it's been there awhile","date":"2015-06-25T16:47:42.841Z","type":"message"}
{"nick":"rphillips","message":"only when I use the terminal in emacs","date":"2015-06-25T16:47:52.732Z","type":"message"}
{"nick":"creationix","message":"I'll bet it's the same issue","date":"2015-06-25T16:49:07.780Z","type":"message"}
{"nick":"creationix","message":"something to do with assumptions about the terminal","date":"2015-06-25T16:49:15.578Z","type":"message"}
{"nick":"creationix","message":"I'll bet upstart doesn't allocate a tty","date":"2015-06-25T16:49:22.467Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T17:12:46.513Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2264 (master - feca06a : Tim Caswell): The build passed.","date":"2015-06-25T17:12:47.466Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/448256597334...feca06a94b38","date":"2015-06-25T17:12:47.652Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68354319","date":"2015-06-25T17:12:47.652Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T17:12:47.652Z","type":"part"}
{"nick":"creationix","message":"rphillips: I fixed the bug in pretty print","date":"2015-06-25T17:14:15.057Z","type":"message"}
{"nick":"creationix","message":"did you release luvit already?","date":"2015-06-25T17:14:20.258Z","type":"message"}
{"nick":"creationix","message":"https://github.com/luvit/luvit/commit/feca06a94b387c3ae276fdef79b6efa15fdacd90","date":"2015-06-25T17:16:03.543Z","type":"message"}
{"nick":"rphillips","message":"i did. but we have a few more patches","date":"2015-06-25T17:18:16.209Z","type":"message"}
{"nick":"rphillips","message":"merged this morning","date":"2015-06-25T17:18:19.044Z","type":"message"}
{"nick":"rje","message":"bbiab drs appt, in the meantime can you guys give this a few moments of thought? https://github.com/virgo-agent-toolkit/rackspace-monitoring-agent/issues/765","date":"2015-06-25T17:18:42.353Z","type":"message"}
{"nick":"rphillips","message":"nice patch...","date":"2015-06-25T17:24:40.115Z","type":"message"}
{"nick":"rphillips","message":"i looked at that code and didn't figure it out","date":"2015-06-25T17:24:47.236Z","type":"message"}
{"nick":"rphillips","message":"creationix: i think we should roll another release","date":"2015-06-25T17:27:15.424Z","type":"message"}
{"nick":"creationix","message":"rphillips: yeah, it was tricky to debug","date":"2015-06-25T17:28:49.981Z","type":"message"}
{"nick":"dan336","message":"so when lit says: 'using dependency: fe4e98eb16bc1f359e7c4535265ebedc45e024a6 as coro-http' does that mean that it isn't going to use the one in my deps folder?","date":"2015-06-25T17:47:24.090Z","type":"message"}
{"nick":"dan336","message":"because I'm trying to change that one to do some debugging and testing, and none of the changes I'm making are making into the app I'm making","date":"2015-06-25T17:50:55.248Z","type":"message"}
{"nick":"SkyRocknRoll","reason":"Remote host closed the connection","date":"2015-06-25T18:01:25.941Z","type":"quit"}
{"nick":"creationix","message":"dan336: it should use the local dep.  Does the hash change when you modify the code?","date":"2015-06-25T18:04:59.039Z","type":"message"}
{"nick":"dan336","message":"what hash do you mean?","date":"2015-06-25T18:06:04.348Z","type":"message"}
{"nick":"dan336","message":"if you mean the hash of the file contents, then yes it would change when I modify the contents of the file.","date":"2015-06-25T18:06:56.860Z","type":"message"}
{"nick":"dan336","message":"its alright though, I worked around it.","date":"2015-06-25T18:07:08.691Z","type":"message"}
{"nick":"dan336","message":"still strange that it stopped letting me do that.","date":"2015-06-25T18:07:23.818Z","type":"message"}
{"nick":"dan336","message":"also fixed the issue I ran into yesterday: https://github.com/luvit/lit/pull/96","date":"2015-06-25T18:10:12.627Z","type":"message"}
{"nick":"creationix","message":"dan336: I mean the hash for the dependency.  Local dependencies are imported into the database and their hash is shown","date":"2015-06-25T18:25:29.019Z","type":"message"}
{"nick":"creationix","message":"dan336: also why did you change the loop, this is enough right? https://github.com/luvit/lit/pull/97","date":"2015-06-25T18:29:15.682Z","type":"message"}
{"nick":"dan336","message":"the forr loop breaks out when item is nil","date":"2015-06-25T18:29:51.807Z","type":"message"}
{"nick":"dan336","message":"*for","date":"2015-06-25T18:29:53.695Z","type":"message"}
{"nick":"dan336","message":"so it never runs the check","date":"2015-06-25T18:29:59.560Z","type":"message"}
{"nick":"dan336","message":"thats how the for loop works","date":"2015-06-25T18:30:07.798Z","type":"message"}
{"nick":"dan336","message":"at least that was my understanding, otherwise the #item == 0  check would throw an error wouldn't it?","date":"2015-06-25T18:30:45.420Z","type":"message"}
{"nick":"creationix","message":"ahh, right","date":"2015-06-25T18:31:16.306Z","type":"message"}
{"nick":"creationix","message":"so what change are you trying to do then?","date":"2015-06-25T18:31:52.465Z","type":"message"}
{"nick":"dan336","message":"so if item is nil, that means the connection closed, so setting `res.keepAlive = false` causes the connection to not be added back into the connection pool. which is what it was doing before.","date":"2015-06-25T18:32:56.714Z","type":"message"}
{"nick":"creationix","message":"dan336: ok, I think I got it.  how about this? https://github.com/luvit/lit/pull/97/files","date":"2015-06-25T18:33:22.466Z","type":"message"}
{"nick":"dan336","message":"yeah that looks good too.","date":"2015-06-25T18:33:51.202Z","type":"message"}
{"nick":"dan336","message":"well no","date":"2015-06-25T18:34:08.280Z","type":"message"}
{"nick":"dan336","message":"what if item is nil AFTER a loop iteration?","date":"2015-06-25T18:34:21.639Z","type":"message"}
{"nick":"creationix","message":"you can't read past the loop or it will break keepalive","date":"2015-06-25T18:34:54.467Z","type":"message"}
{"nick":"dan336","message":"no i mean the first loop iteration item has a value","date":"2015-06-25T18:35:23.456Z","type":"message"}
{"nick":"dan336","message":"the second loop iteration item is nil so it breaks out","date":"2015-06-25T18:35:34.418Z","type":"message"}
{"nick":"piernov","date":"2015-06-25T18:35:54.893Z","type":"join"}
{"nick":"dan336","message":"wait I\"m just reading ti wrong.","date":"2015-06-25T18:35:55.769Z","type":"message"}
{"nick":"dan336","message":"yeah that will work fine.","date":"2015-06-25T18:36:03.617Z","type":"message"}
{"nick":"creationix","message":"dan336: I'm not sure my patch will make a difference though.","date":"2015-06-25T18:42:04.862Z","type":"message"}
{"nick":"dan336","message":"really why not?","date":"2015-06-25T18:42:14.188Z","type":"message"}
{"nick":"creationix","message":"well, not in the normal case.  It will only help for early disconnects","date":"2015-06-25T18:42:26.487Z","type":"message"}
{"nick":"creationix","message":"the http-codec should always emit the empty string for valid streams","date":"2015-06-25T18:42:44.080Z","type":"message"}
{"nick":"creationix","message":"we need a way to know if a socket is still active before reusing it","date":"2015-06-25T18:43:02.656Z","type":"message"}
{"nick":"creationix","message":"and we need a way to clean out sockets when they disconnect and not have them waiting around","date":"2015-06-25T18:43:19.343Z","type":"message"}
{"nick":"dan336","message":"well even if you could check if it was still alive, it wouldn't always work.","date":"2015-06-25T18:43:36.236Z","type":"message"}
{"nick":"dan336","message":"you could have just done the check milliseconds before the fin packet arrived.","date":"2015-06-25T18:44:20.288Z","type":"message"}
{"nick":"dan336","message":"its one of the fun things about http keepalive, the server can close without informing the client.","date":"2015-06-25T18:45:14.880Z","type":"message"}
{"nick":"creationix","message":"right, so we could be in the middle of sending a second request and get shurdown","date":"2015-06-25T18:45:34.691Z","type":"message"}
{"nick":"creationix","message":"*shutdown","date":"2015-06-25T18:45:39.467Z","type":"message"}
{"nick":"dan336","message":"thats correct, which is one of the reasons that the expect: continue header exists.","date":"2015-06-25T18:46:08.421Z","type":"message"}
{"nick":"creationix","message":"but if the server sent a keepalive header, we should be safe to reuse it if we're quick right?","date":"2015-06-25T18:46:39.756Z","type":"message"}
{"nick":"creationix","message":"though we should probably put a short timeout on that socket and kill it after a while","date":"2015-06-25T18:46:58.420Z","type":"message"}
{"nick":"dan336","message":"nop not even then,","date":"2015-06-25T18:47:03.018Z","type":"message"}
{"nick":"dan336","message":"*nope","date":"2015-06-25T18:47:07.217Z","type":"message"}
{"nick":"rphillips","message":"creationix: you want to enable keepalive on the socket","date":"2015-06-25T18:47:41.345Z","type":"message"}
{"nick":"rphillips","message":"it'll tell you when there is a dead peer","date":"2015-06-25T18:47:58.790Z","type":"message"}
{"nick":"creationix","message":"how will it tell us though?  What libuv API?","date":"2015-06-25T18:48:17.934Z","type":"message"}
{"nick":"rphillips","message":"you should get the close event","date":"2015-06-25T18:48:55.594Z","type":"message"}
{"nick":"rphillips","message":"an empty read/error","date":"2015-06-25T18:49:08.932Z","type":"message"}
{"nick":"rphillips","message":"http://www.tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/#checkdeadpeers","date":"2015-06-25T18:50:14.983Z","type":"message"}
{"nick":"dan336","message":"yeah, but I think the defaults are horribly high on those.","date":"2015-06-25T18:50:36.811Z","type":"message"}
{"nick":"rphillips","message":"it's what node's agent module does","date":"2015-06-25T18:50:37.337Z","type":"message"}
{"nick":"dan336","message":"ah but you can set them on a per socket basis?","date":"2015-06-25T18:51:36.119Z","type":"message"}
{"nick":"rphillips","message":"right","date":"2015-06-25T18:51:48.383Z","type":"message"}
{"nick":"rphillips","message":"and it's tunable via the OS","date":"2015-06-25T18:51:54.273Z","type":"message"}
{"nick":"creationix","message":"right, we need to somehow gracefully handle when write or read on the reused socket fails","date":"2015-06-25T18:52:47.692Z","type":"message"}
{"nick":"creationix","message":"maybe retry with a new socket?","date":"2015-06-25T18:52:56.531Z","type":"message"}
{"nick":"creationix","message":"write would fail just as fast as read right?","date":"2015-06-25T18:53:25.827Z","type":"message"}
{"nick":"dan336","message":"read is much more dependable","date":"2015-06-25T18:54:03.799Z","type":"message"}
{"nick":"creationix","message":"we could add a \"reused\" flag on the socket and if the initial write fails, just grab another socket and try again instead of crashing","date":"2015-06-25T18:54:05.088Z","type":"message"}
{"nick":"dan336","message":"I tested something out similar to that and it worked just fine.","date":"2015-06-25T18:54:31.033Z","type":"message"}
{"nick":"creationix","message":"I guess it's safe to start reading before writing, we just need to write the logic so we're not blocked on the read","date":"2015-06-25T18:54:53.764Z","type":"message"}
{"nick":"dan336","message":"well it should be safe to write the header and body and then try to read the response header","date":"2015-06-25T18:55:21.221Z","type":"message"}
{"nick":"creationix","message":"the write won't get an error?","date":"2015-06-25T18:55:37.438Z","type":"message"}
{"nick":"dan336","message":"not unless the socket is closed, but the code doesn't currently check for errors","date":"2015-06-25T18:55:57.119Z","type":"message"}
{"nick":"creationix","message":"right, so I need to check for errors on write and read to be safe and just start over with a new socket if it's a reused socket","date":"2015-06-25T18:56:41.442Z","type":"message"}
{"nick":"creationix","message":"if it's a fresh socket, give up","date":"2015-06-25T18:56:53.647Z","type":"message"}
{"nick":"creationix","message":"I don't like the idea of re-sending the request automatically","date":"2015-06-25T18:57:14.587Z","type":"message"}
{"nick":"creationix","message":"what if it was received and had side-effects","date":"2015-06-25T18:57:22.466Z","type":"message"}
{"nick":"dan336","message":"thats true.","date":"2015-06-25T18:58:09.015Z","type":"message"}
{"nick":"dan336","message":"what would you do if you were writing an http client and got a connection close? just give up or would you try again?","date":"2015-06-25T18:58:35.404Z","type":"message"}
{"nick":"dan336","message":"I suppose it depends on what you were writting...","date":"2015-06-25T18:59:12.637Z","type":"message"}
{"nick":"creationix","message":"so it's safe to restart as long as the socket is reused *and* the full request hasn't been sent","date":"2015-06-25T19:00:25.467Z","type":"message"}
{"nick":"creationix","message":"dan336: what's the error you get?  Does it hit this path? https://github.com/luvit/lit/blob/master/deps/coro-http.lua#L130","date":"2015-06-25T19:05:30.857Z","type":"message"}
{"nick":"creationix","message":"(when you reuse a closed socket)","date":"2015-06-25T19:05:46.827Z","type":"message"}
{"nick":"dan336","message":"before the patch we were looking at, it would yield in the read() call right before that line and never be resumed. with the patch it hits that error.","date":"2015-06-25T19:06:47.525Z","type":"message"}
{"nick":"creationix","message":"dan336: what do you think of this? https://github.com/luvit/lit/commit/368075e682caf5c694878c058b7dd3994827f9b7","date":"2015-06-25T19:12:47.139Z","type":"message"}
{"nick":"dan336","message":"do you think a `write()` is needed in that case too? isn't that how the handles are closed and freed?","date":"2015-06-25T19:13:45.310Z","type":"message"}
{"nick":"creationix","message":"perhaps","date":"2015-06-25T19:14:13.996Z","type":"message"}
{"nick":"creationix","message":"dan336: https://github.com/luvit/lit/commit/fc9af1527c09ac3f89b902f836b055f5bda0b94e","date":"2015-06-25T19:14:55.467Z","type":"message"}
{"nick":"sousoux","date":"2015-06-25T19:15:27.723Z","type":"join"}
{"nick":"dan336","message":"that looks good.","date":"2015-06-25T19:16:04.710Z","type":"message"}
{"nick":"creationix","message":"though I'm kinda suprized that all those writes won't cause an error if the socket is closed","date":"2015-06-25T19:16:06.358Z","type":"message"}
{"nick":"creationix","message":"is that really how tcp works?","date":"2015-06-25T19:16:11.726Z","type":"message"}
{"nick":"dan336","message":"kind of, its really more of a timing issue.","date":"2015-06-25T19:17:07.350Z","type":"message"}
{"nick":"sousoux","message":"creationix: has anyone used the https luvit server much?","date":"2015-06-25T19:17:21.249Z","type":"message"}
{"nick":"rphillips","message":"we use the client a lot","date":"2015-06-25T19:18:00.898Z","type":"message"}
{"nick":"rphillips","message":"server... not so much","date":"2015-06-25T19:18:05.756Z","type":"message"}
{"nick":"sousoux","message":"I've added in keep-alive management to http and I now get my process spinning away into 100% cpu zone","date":"2015-06-25T19:18:12.408Z","type":"message"}
{"nick":"sousoux","message":"Can't seem to track it down","date":"2015-06-25T19:18:20.915Z","type":"message"}
{"nick":"rphillips","message":"have a test case?","date":"2015-06-25T19:18:56.158Z","type":"message"}
{"nick":"sousoux","message":"Seems to be happening in tls common.lua but when it really spins away I can't even get a trace out of it","date":"2015-06-25T19:18:56.730Z","type":"message"}
{"nick":"sousoux","message":"Not yet","date":"2015-06-25T19:19:03.625Z","type":"message"}
{"nick":"sousoux","message":"If I had a test case I think I would know what it was!","date":"2015-06-25T19:19:26.219Z","type":"message"}
{"nick":"rphillips","message":"linux? osx? strace might help","date":"2015-06-25T19:19:44.052Z","type":"message"}
{"nick":"sousoux","message":"linux","date":"2015-06-25T19:19:48.318Z","type":"message"}
{"nick":"rphillips","message":"or activity monitor","date":"2015-06-25T19:19:48.544Z","type":"message"}
{"nick":"creationix","message":"sousoux: this is using luvit's node-style code and not coro-http in lit right?","date":"2015-06-25T19:19:50.317Z","type":"message"}
{"nick":"sousoux","message":"tried strace, valgrind, gdb,","date":"2015-06-25T19:20:03.732Z","type":"message"}
{"nick":"sousoux","message":"still not getting a clue","date":"2015-06-25T19:20:12.048Z","type":"message"}
{"nick":"sousoux","message":"valgrind profiling locked my entire VM up","date":"2015-06-25T19:20:32.384Z","type":"message"}
{"nick":"creationix","message":"impressive","date":"2015-06-25T19:20:40.250Z","type":"message"}
{"nick":"sousoux","message":"breaking in gdb seems to show that it is in lua","date":"2015-06-25T19:20:59.609Z","type":"message"}
{"nick":"sousoux","message":"Or at least I break into the pcall to the read callback","date":"2015-06-25T19:21:28.211Z","type":"message"}
{"nick":"sousoux","message":"from uv","date":"2015-06-25T19:21:36.210Z","type":"message"}
{"nick":"sousoux","message":"I'm not convinced that is every returning","date":"2015-06-25T19:21:52.969Z","type":"message"}
{"nick":"sousoux","message":"ever","date":"2015-06-25T19:21:55.325Z","type":"message"}
{"nick":"sousoux","message":"Hmm just wanted to know if someone had seen anything like that. I'll track it down in the end PITA","date":"2015-06-25T19:22:39.844Z","type":"message"}
{"nick":"sousoux","message":"Need https server working. Should have taken your advice and gone the coro direction. Too late now.","date":"2015-06-25T19:23:46.928Z","type":"message"}
{"nick":"creationix","message":"I run all my luvit servers behind nginx, so I only use https for clients","date":"2015-06-25T19:24:00.567Z","type":"message"}
{"nick":"piernov","reason":"Remote host closed the connection","date":"2015-06-25T19:28:54.408Z","type":"quit"}
{"nick":"creationix","message":"heh, if you reuse an http connection for exactly 100 requests through nginx with tls, it will close the connection","date":"2015-06-25T19:42:25.572Z","type":"message"}
{"nick":"creationix","message":"(gracefully with Connection: close)","date":"2015-06-25T19:42:31.484Z","type":"message"}
{"nick":"piernov","date":"2015-06-25T19:42:52.289Z","type":"join"}
{"nick":"creationix","message":"sure enough, it's a tunable param http://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_requests","date":"2015-06-25T19:43:30.390Z","type":"message"}
{"nick":"piernov","reason":"Read error: Connection reset by peer","date":"2015-06-25T19:44:57.361Z","type":"quit"}
{"nick":"piernov","date":"2015-06-25T19:46:39.237Z","type":"join"}
{"nick":"piernov","reason":"Read error: Connection reset by peer","date":"2015-06-25T19:48:46.140Z","type":"quit"}
{"nick":"dan336","message":"so the http-codec doesn't handle decoding responses for HEAD requests correctly. HEAD requests might have a content-length header, but no body, and the decode hangs trying to read the body if the content-length header is present.","date":"2015-06-25T19:49:07.777Z","type":"message"}
{"nick":"creationix","message":"hmm, I thought I had logic for that","date":"2015-06-25T19:49:22.462Z","type":"message"}
{"nick":"creationix","message":"but I may have lost if in early refactoring","date":"2015-06-25T19:49:28.127Z","type":"message"}
{"nick":"piernov","date":"2015-06-25T19:50:39.292Z","type":"join"}
{"nick":"dan336","message":"yeah the only reason that HEADs and 304 work with weblit at all is because weblit-auto-headers closes the connection in those cases.","date":"2015-06-25T19:51:27.912Z","type":"message"}
{"nick":"creationix","message":"dan336: HEAD requests should always jump to decodeEmpty right?","date":"2015-06-25T19:51:44.648Z","type":"message"}
{"nick":"creationix","message":"hmm, unless keepAlive is false maybe","date":"2015-06-25T19:52:11.624Z","type":"message"}
{"nick":"dan336","message":"thats right, 304 as well.","date":"2015-06-25T19:52:13.231Z","type":"message"}
{"nick":"creationix","message":"well, 304 could have a body I think","date":"2015-06-25T19:52:26.696Z","type":"message"}
{"nick":"creationix","message":"nevermind, that's forbidden by the spec","date":"2015-06-25T19:53:00.314Z","type":"message"}
{"nick":"dan336","message":"not it cant. the rfc says 'MUST NOT have a body'","date":"2015-06-25T19:53:02.031Z","type":"message"}
{"nick":"creationix","message":"hmm, the HEAD response is tricky","date":"2015-06-25T19:59:03.201Z","type":"message"}
{"nick":"creationix","message":"HEAD request (and any request) is allowed to have a body at the parsing level, it just doesn't mean anything at the semantic level for requests like GET and HEAD","date":"2015-06-25T19:59:44.489Z","type":"message"}
{"nick":"creationix","message":"but the response to a HEAD requests may have content headers but no content","date":"2015-06-25T20:00:02.103Z","type":"message"}
{"nick":"creationix","message":"so somehow http-codec needs to know which responses belong to HEAD requests","date":"2015-06-25T20:00:20.379Z","type":"message"}
{"nick":"rphillips","message":"i think there is a bug in the luvit https implementation","date":"2015-06-25T20:00:25.620Z","type":"message"}
{"nick":"rphillips","message":"https://gist.github.com/rphillips/14f4e8e4e096be101542","date":"2015-06-25T20:01:37.440Z","type":"message"}
{"nick":"rphillips","message":"rje: ^","date":"2015-06-25T20:01:48.566Z","type":"message"}
{"nick":"dan336","message":"creationix: could it be solved by \"upgrading\" the connection to a fresh http codec when a HEAD request is sent?","date":"2015-06-25T20:03:28.154Z","type":"message"}
{"nick":"dan336","message":"then it wouldn't have to be fixed at the codec level","date":"2015-06-25T20:04:00.081Z","type":"message"}
{"nick":"creationix","message":"dan336: you mean when the HEAD response head is parsed?","date":"2015-06-25T20:04:36.020Z","type":"message"}
{"nick":"creationix","message":"that's where we get stuck, the head is parsed and we're waiting on data","date":"2015-06-25T20:04:45.899Z","type":"message"}
{"nick":"rje","message":"rphillips, is siege not getting the body?","date":"2015-06-25T20:05:56.163Z","type":"message"}
{"nick":"sousoux","message":"Found it. My problem not yours","date":"2015-06-25T20:06:09.293Z","type":"message"}
{"nick":"rphillips","message":"sousoux: phew...","date":"2015-06-25T20:06:21.178Z","type":"message"}
{"nick":"rphillips","message":"but I do think siege is not working right","date":"2015-06-25T20:06:31.970Z","type":"message"}
{"nick":"rphillips","message":"rje: it's getting the body of 12 bytes","date":"2015-06-25T20:06:38.081Z","type":"message"}
{"nick":"dan336","message":"creationix: yes i mean when it is parsed.","date":"2015-06-25T20:07:32.164Z","type":"message"}
{"nick":"creationix","message":"dan336: btw, here is a fun test client https://gist.github.com/creationix/b2d25456345f88f74dec","date":"2015-06-25T20:08:02.570Z","type":"message"}
{"nick":"creationix","message":"though the luvit.io server is too predictable.  It doesn't test much of the error cases","date":"2015-06-25T20:08:26.547Z","type":"message"}
{"nick":"dan336","message":"oh thats cool, it does 2 connections in parrallel 200 times.","date":"2015-06-25T20:09:19.700Z","type":"message"}
{"nick":"creationix","message":"yep","date":"2015-06-25T20:09:49.418Z","type":"message"}
{"nick":"rje","message":"rphillips, vidyo?","date":"2015-06-25T20:09:53.464Z","type":"message"}
{"nick":"creationix","message":"I'm really liking split, should have made it sooner","date":"2015-06-25T20:10:01.037Z","type":"message"}
{"nick":"dan336","message":"yeah that seems really handy. I'm going to use it as soon as this http stuff is figured out :)","date":"2015-06-25T20:10:24.871Z","type":"message"}
{"nick":"dan336","message":"i have a process where I'm reading files from the disk and uploading them to a remote server, and using split would mean I could limit it to a certain number of files at a time.","date":"2015-06-25T20:11:12.735Z","type":"message"}
{"nick":"rphillips","message":"rje: sure","date":"2015-06-25T20:11:39.049Z","type":"message"}
{"nick":"dan336","message":"creationix: whats really fun is that you can do a parallel for i in pairs() loop :)","date":"2015-06-25T20:12:19.393Z","type":"message"}
{"nick":"sousoux","message":"I'll do a pull request of the http.lua keep-alive stuff if you are interested.","date":"2015-06-25T20:12:36.576Z","type":"message"}
{"nick":"creationix","message":"sousoux: sure","date":"2015-06-25T20:12:54.865Z","type":"message"}
{"nick":"piernov","reason":"Remote host closed the connection","date":"2015-06-25T20:13:20.310Z","type":"quit"}
{"nick":"creationix","message":"dan336: yeah, I think restarting the codec after parsing the head of an HEAD response is the only sane way to handle this","date":"2015-06-25T20:14:33.828Z","type":"message"}
{"nick":"creationix","message":"it just makes me sad I can't handle this at the parser level","date":"2015-06-25T20:14:40.898Z","type":"message"}
{"nick":"creationix","message":"but it would require some side-channel and coupling between the two parsers","date":"2015-06-25T20:15:08.259Z","type":"message"}
{"nick":"dan336","message":"well you can but it would require creating both the decoder and encoder at the same time so that they can share scpe","date":"2015-06-25T20:15:19.961Z","type":"message"}
{"nick":"dan336","message":"*scop","date":"2015-06-25T20:15:22.128Z","type":"message"}
{"nick":"dan336","message":"yeah","date":"2015-06-25T20:15:23.733Z","type":"message"}
{"nick":"creationix","message":"http is just a bad design","date":"2015-06-25T20:15:52.465Z","type":"message"}
{"nick":"creationix","message":"but we're stuck with it :P","date":"2015-06-25T20:15:56.311Z","type":"message"}
{"nick":"creationix","message":"maybe some day http2 will replace it","date":"2015-06-25T20:16:08.933Z","type":"message"}
{"nick":"dan336","message":"creationix: this is what makes me excited about the coro-split -> https://gist.github.com/DBarney/8bca7fbeff9b62be08c8","date":"2015-06-25T20:16:20.452Z","type":"message"}
{"nick":"dan336","message":"yeah maybe someday.","date":"2015-06-25T20:16:30.030Z","type":"message"}
{"nick":"piernov","date":"2015-06-25T20:17:00.240Z","type":"join"}
{"nick":"creationix","message":"dan336: oh, that's neat.  It's not actually parallel though, just concurrent.  It's still single threaded","date":"2015-06-25T20:17:12.670Z","type":"message"}
{"nick":"creationix","message":"but yeah, if you do any I/O in the work section, they will interleave","date":"2015-06-25T20:17:26.869Z","type":"message"}
{"nick":"dan336","message":"exactly. and yeah not parallel, just concurrent :)","date":"2015-06-25T20:17:48.971Z","type":"message"}
{"nick":"dan336","message":"i tend to get my terminology mixed up.","date":"2015-06-25T20:18:00.866Z","type":"message"}
{"nick":"creationix","message":"and you can share the same function definition for both halves","date":"2015-06-25T20:18:25.271Z","type":"message"}
{"nick":"creationix","message":"it will still create an independent task thread for each","date":"2015-06-25T20:18:32.931Z","type":"message"}
{"nick":"dan336","message":"yeah, that even better :)","date":"2015-06-25T20:18:44.540Z","type":"message"}
{"nick":"creationix","message":"maybe I'll make a variant of split that runs x clones of a task","date":"2015-06-25T20:19:11.419Z","type":"message"}
{"nick":"dan336","message":"either way, its still very cool.","date":"2015-06-25T20:19:44.789Z","type":"message"}
{"nick":"creationix","message":"the only danger is the iterator needs to be able having itself called after it ended","date":"2015-06-25T20:20:04.818Z","type":"message"}
{"nick":"creationix","message":"I don't know about pairs, but my custom iterators can't always handle this","date":"2015-06-25T20:20:18.418Z","type":"message"}
{"nick":"dan336","message":"thats true.","date":"2015-06-25T20:20:36.637Z","type":"message"}
{"nick":"creationix","message":"yeah, actually pairs won't work at all since it requires some arguments, but the idea is good in general","date":"2015-06-25T20:21:24.451Z","type":"message"}
{"nick":"piernov","reason":"Ping timeout: 272 seconds","date":"2015-06-25T20:22:10.220Z","type":"quit"}
{"nick":"rphillips","message":"fixed it: https://github.com/luvit/luvit/pull/757/files","date":"2015-06-25T20:22:50.447Z","type":"message"}
{"nick":"dan336","message":"thats too bad, but the actual one I'm going to use is the fs.scandir, which looks like it should work.","date":"2015-06-25T20:23:00.616Z","type":"message"}
{"nick":"rphillips","message":"sousoux: so that fix will affect you","date":"2015-06-25T20:23:06.467Z","type":"message"}
{"nick":"rphillips","message":"should work better","date":"2015-06-25T20:23:14.068Z","type":"message"}
{"nick":"piernov","date":"2015-06-25T20:24:53.298Z","type":"join"}
{"nick":"travis-ci","date":"2015-06-25T20:24:53.484Z","type":"join"}
{"nick":"creationix","message":"dan336: yep, I make my iterators not require any arguments","date":"2015-06-25T20:24:54.087Z","type":"message"}
{"nick":"travis-ci","message":"luvit/luvit#2266 (fixes/tls_socket - d1e0434 : Ryan Phillips): The build failed.","date":"2015-06-25T20:24:54.295Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/commit/d1e043458a2c","date":"2015-06-25T20:24:54.482Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68380467","date":"2015-06-25T20:24:54.482Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T20:24:54.482Z","type":"part"}
{"nick":"rphillips","message":"ack","date":"2015-06-25T20:24:58.365Z","type":"message"}
{"nick":"rphillips","message":"rate limit","date":"2015-06-25T20:25:16.964Z","type":"message"}
{"nick":"creationix","message":"rphillips: we could create a dummy github account, create a read-only token and store it in the build script","date":"2015-06-25T20:25:57.167Z","type":"message"}
{"nick":"creationix","message":"sure people could impersonate the account, but it wouldn't gain them much","date":"2015-06-25T20:26:18.585Z","type":"message"}
{"nick":"rphillips","message":"i think travis supports encrypted environment variables","date":"2015-06-25T20:26:33.713Z","type":"message"}
{"nick":"creationix","message":"or that, but still make it read-only so that travis can't write to anything","date":"2015-06-25T20:26:55.072Z","type":"message"}
{"nick":"creationix","message":"or if you're not paranoid, just include a read-only token in plain view.  Worst thing someone can do is read data as you using your rate limit","date":"2015-06-25T20:27:44.579Z","type":"message"}
{"nick":"creationix","message":"rphillips: not sure if it's related to your recent tls fix, but I made a change to coro-http where it unrefs sockets while they are idle in the connection pool and re-refs them when it hands them back out","date":"2015-06-25T20:28:56.892Z","type":"message"}
{"nick":"creationix","message":"that way the process's uv loop isn't hanging on idle connections","date":"2015-06-25T20:29:09.781Z","type":"message"}
{"nick":"creationix","message":"I don't remember if luvit's http client reuses sockets or not","date":"2015-06-25T20:29:47.686Z","type":"message"}
{"nick":"rphillips","message":"creationix: https://github.com/blog/2024-read-only-deploy-keys","date":"2015-06-25T20:29:59.689Z","type":"message"}
{"nick":"rphillips","message":"could we use one of these?","date":"2015-06-25T20:30:05.175Z","type":"message"}
{"nick":"creationix","message":"https://github.com/luvit/lit/commit/ac34a54f3c8d70f613bdf8c92e39be9c917d01b0","date":"2015-06-25T20:30:58.927Z","type":"message"}
{"nick":"creationix","message":"rphillips: no, but that's neat","date":"2015-06-25T20:31:26.303Z","type":"message"}
{"nick":"creationix","message":"you need a read-only token","date":"2015-06-25T20:31:32.407Z","type":"message"}
{"nick":"rphillips","message":"oh, i see","date":"2015-06-25T20:31:52.918Z","type":"message"}
{"nick":"rphillips","message":"this is an ssh key","date":"2015-06-25T20:31:55.931Z","type":"message"}
{"nick":"creationix","message":"https://github.com/settings/tokens/new","date":"2015-06-25T20:31:59.790Z","type":"message"}
{"nick":"creationix","message":"just uncheck everything and I think it's read-only","date":"2015-06-25T20:32:17.535Z","type":"message"}
{"nick":"creationix","message":"Grants read-only access to public information (includes public user profile info, public repository info, and gists)","date":"2015-06-25T20:33:28.946Z","type":"message"}
{"nick":"rphillips","message":"creationix: where does this token get passed to ?","date":"2015-06-25T20:38:39.472Z","type":"message"}
{"nick":"rphillips","message":"which part of the script","date":"2015-06-25T20:38:44.840Z","type":"message"}
{"nick":"creationix","message":"lit looks for it in an environment variable called GITHUB_TOKEN","date":"2015-06-25T20:38:56.514Z","type":"message"}
{"nick":"creationix","message":"rphillips: https://github.com/luvit/lit/blob/master/libs/github-request.lua#L32-L36","date":"2015-06-25T20:39:32.137Z","type":"message"}
{"nick":"creationix","message":"rphillips: you're hitting this now because I enabled signature checking in the client","date":"2015-06-25T20:40:46.041Z","type":"message"}
{"nick":"creationix","message":"I'm not sure this even adds much security since you already have to trust the server when dealing with shared accounts like \"luvit\"","date":"2015-06-25T20:41:04.018Z","type":"message"}
{"nick":"creationix","message":"and the server already verifies all signatures before allowing people to upload anything","date":"2015-06-25T20:41:23.835Z","type":"message"}
{"nick":"creationix","message":"I could turn on verification in the client by default","date":"2015-06-25T20:41:35.387Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/luvit/luvit/commit/6873effe8670d8bff536cbf5f6c8e610d852e1b9","date":"2015-06-25T20:45:59.617Z","type":"message"}
{"nick":"rphillips","message":"ok. we will see","date":"2015-06-25T20:46:02.630Z","type":"message"}
{"nick":"rphillips","message":"https://travis-ci.org/luvit/luvit/builds/68383540#L87","date":"2015-06-25T20:47:24.212Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T20:47:25.371Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2268 (fixes/tls_socket - 6873eff : Ryan Phillips): The build was fixed.","date":"2015-06-25T20:47:26.288Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/d1e043458a2c...6873effe8670","date":"2015-06-25T20:47:26.475Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68383540","date":"2015-06-25T20:47:26.475Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T20:47:26.476Z","type":"part"}
{"nick":"rphillips","message":"sweet!","date":"2015-06-25T20:47:31.501Z","type":"message"}
{"nick":"creationix","message":"dan336: this should fix the head response issue you were seeing https://github.com/luvit/lit/commit/4f4ec6c87811e8a997a122b2397a73c04812f816","date":"2015-06-25T20:52:39.408Z","type":"message"}
{"nick":"creationix","message":"rphillips: also we need something like this in luvit's use of http-codec if we don't already","date":"2015-06-25T20:53:32.042Z","type":"message"}
{"nick":"creationix","message":"^","date":"2015-06-25T20:53:34.462Z","type":"message"}
{"nick":"creationix","message":"I just can't handle it sanely at that level","date":"2015-06-25T20:53:43.681Z","type":"message"}
{"nick":"rphillips","message":"creationix: wdym?","date":"2015-06-25T20:54:11.685Z","type":"message"}
{"nick":"creationix","message":"the response for a HEAD request may contain headers like Content-Length or chunked encoding","date":"2015-06-25T20:54:38.834Z","type":"message"}
{"nick":"creationix","message":"but there will never be a body","date":"2015-06-25T20:54:42.467Z","type":"message"}
{"nick":"creationix","message":"the codec has no idea since the HEAD request that belongs to this response is so far away","date":"2015-06-25T20:55:01.195Z","type":"message"}
{"nick":"rphillips","message":"gotcha","date":"2015-06-25T20:55:16.456Z","type":"message"}
{"nick":"creationix","message":"most likely it's in some client encoder in some other part of the code, and even if you linked the encoder to the decoder with some shared side-channel, pipelining will cause trouble and you'd have to count requests/responses","date":"2015-06-25T20:55:47.676Z","type":"message"}
{"nick":"creationix","message":"it's much easier for the code that has req and res in the same closure to simply reset the res after reading the head","date":"2015-06-25T20:56:01.220Z","type":"message"}
{"nick":"dan336","message":"creationix: thank you, it will be very nice to use HEAD requests!","date":"2015-06-25T20:56:36.769Z","type":"message"}
{"nick":"creationix","message":"rphillips: you're not using coro-wrapper, but the idea there is I allow hot-replacing the decode function https://github.com/luvit/lit/commit/4f4ec6c87811e8a997a122b2397a73c04812f816#diff-32cb0065744f95a5c7eaca646111360eR80","date":"2015-06-25T20:56:59.719Z","type":"message"}
{"nick":"creationix","message":"this way buffered data isn't lost","date":"2015-06-25T20:57:04.021Z","type":"message"}
{"nick":"creationix","message":"https://github.com/luvit/lit/blob/master/deps/coro-wrapper.lua#L23-L25","date":"2015-06-25T20:57:24.464Z","type":"message"}
{"nick":"rje","message":"rphillips, trying to work in this solution http://stackoverflow.com/questions/12693327/running-a-powershell-script-as-admin-without-typing-in-passwords","date":"2015-06-25T20:57:34.021Z","type":"message"}
{"nick":"creationix","message":"dan336: can you test this PR that has several fixes for you?","date":"2015-06-25T20:57:43.621Z","type":"message"}
{"nick":"dan336","message":"creationix: sure","date":"2015-06-25T20:57:58.240Z","type":"message"}
{"nick":"creationix","message":"https://github.com/luvit/lit/pull/97","date":"2015-06-25T20:58:08.298Z","type":"message"}
{"nick":"dan336","message":"creationix: so it resets it correctly, but it still is trying to read a body.","date":"2015-06-25T21:07:43.475Z","type":"message"}
{"nick":"creationix","message":"how can I test this?","date":"2015-06-25T21:08:04.389Z","type":"message"}
{"nick":"creationix","message":"I guess, just make a HEAD requests to something with content normally?","date":"2015-06-25T21:08:22.464Z","type":"message"}
{"nick":"dan336","message":"but if the for loop and the continue check were wrapped in an if statment that checked to see if it was reset, it works fine.","date":"2015-06-25T21:08:25.519Z","type":"message"}
{"nick":"dan336","message":"yeah","date":"2015-06-25T21:08:29.565Z","type":"message"}
{"nick":"dan336","message":"I updated weblit-auto-headers to return '' instead of nil on HEAD and 304, and that is how I am testing it locally.","date":"2015-06-25T21:08:58.088Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T21:10:27.371Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2270 (fixes/tls_socket - ce3611c : Ryan Phillips): The build passed.","date":"2015-06-25T21:10:28.440Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/6873effe8670...ce3611cc5c1f","date":"2015-06-25T21:10:28.626Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68386415","date":"2015-06-25T21:10:28.627Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T21:10:28.627Z","type":"part"}
{"nick":"creationix","message":"it hangs just fine making HEAD against luvit.io","date":"2015-06-25T21:11:06.572Z","type":"message"}
{"nick":"creationix","message":"nginx should be doing the right thing on it's end","date":"2015-06-25T21:11:19.566Z","type":"message"}
{"nick":"dan336","message":"well nginx should be handling it fine.","date":"2015-06-25T21:11:33.723Z","type":"message"}
{"nick":"creationix","message":"dan336: that's so strange.  Why is read blocking","date":"2015-06-25T21:12:29.514Z","type":"message"}
{"nick":"dan336","message":"because its trying to read a head again. its a new codec","date":"2015-06-25T21:12:43.620Z","type":"message"}
{"nick":"dan336","message":"thats it initial state","date":"2015-06-25T21:13:01.439Z","type":"message"}
{"nick":"creationix","message":"oh, I see what you mean, I shouldn't try to read the body in the HEAD case!","date":"2015-06-25T21:13:52.462Z","type":"message"}
{"nick":"creationix","action":"oops","date":"2015-06-25T21:13:57.862Z","type":"action"}
{"nick":"dan336","message":":) exactly","date":"2015-06-25T21:14:07.418Z","type":"message"}
{"nick":"creationix","message":"got it.  I force-pushed that commit with the fix https://github.com/luvit/lit/commit/4d60b6ebaa939f5304e100c300ed5ec1572ae7d0?w=1","date":"2015-06-25T21:16:04.125Z","type":"message"}
{"nick":"dan336","message":"ok, I just tested it out. It works like a charm!","date":"2015-06-25T21:17:06.257Z","type":"message"}
{"nick":"dan336","message":"HEAD requests now work","date":"2015-06-25T21:17:18.734Z","type":"message"}
{"nick":"creationix","message":"awesome, I'll publish a new coro-http then","date":"2015-06-25T21:17:23.237Z","type":"message"}
{"nick":"dan336","message":"sweet, thank you!","date":"2015-06-25T21:17:39.595Z","type":"message"}
{"nick":"creationix","message":"dan336: published as coro-http v1.2.0","date":"2015-06-25T21:19:52.464Z","type":"message"}
{"nick":"creationix","message":"thanks for finding the bugs","date":"2015-06-25T21:19:57.177Z","type":"message"}
{"nick":"creationix","message":"and for the idea of how to handle the HEAD response","date":"2015-06-25T21:20:18.329Z","type":"message"}
{"nick":"dan336","message":"yeah no problem","date":"2015-06-25T21:20:51.896Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T21:47:11.204Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2272 (master - 49e9ac4 : Ryan Phillips): The build passed.","date":"2015-06-25T21:47:12.305Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/compare/6af94274bdf4...49e9ac4e885d","date":"2015-06-25T21:47:12.491Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68391025","date":"2015-06-25T21:47:12.491Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T21:47:12.491Z","type":"part"}
{"nick":"dg__","date":"2015-06-25T21:56:34.031Z","type":"join"}
{"nick":"travis-ci","date":"2015-06-25T22:08:39.430Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvit#2273 (feat/tls_client_reuse - 1a5db4d : zhaozg): The build failed.","date":"2015-06-25T22:08:40.559Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvit/commit/1a5db4d7b35d","date":"2015-06-25T22:08:40.745Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvit/builds/68394080","date":"2015-06-25T22:08:40.745Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T22:08:40.746Z","type":"part"}
{"nick":"rphillips","message":"hmm https://travis-ci.org/luvit/luvit/builds/68394080#L1810","date":"2015-06-25T22:08:52.460Z","type":"message"}
{"nick":"rphillips","message":"https://github.com/luvit/luvi/pull/101","date":"2015-06-25T22:10:11.877Z","type":"message"}
{"nick":"creationix","message":"yep","date":"2015-06-25T22:12:15.017Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T22:51:20.236Z","type":"join"}
{"nick":"travis-ci","message":"luvit/luvi#560 (fixes/bump_lua_openssl_for_session_reuse - 83929d9 : Ryan Phillips): The build passed.","date":"2015-06-25T22:51:21.224Z","type":"message"}
{"nick":"travis-ci","message":"Change view : https://github.com/luvit/luvi/commit/83929d992565","date":"2015-06-25T22:51:21.410Z","type":"message"}
{"nick":"travis-ci","message":"Build details : https://travis-ci.org/luvit/luvi/builds/68394738","date":"2015-06-25T22:51:21.410Z","type":"message"}
{"nick":"travis-ci","date":"2015-06-25T22:51:21.410Z","type":"part"}
{"nick":"dan336","reason":"Quit: Leaving.","date":"2015-06-25T22:59:28.748Z","type":"quit"}
{"nick":"rje","message":"rphillips, yt?","date":"2015-06-25T23:09:54.113Z","type":"message"}
{"nick":"rphillips","message":"rje: hey, back","date":"2015-06-25T23:16:43.323Z","type":"message"}
{"nick":"rphillips","message":"cpu usage with ssl and luvi usage is quite high","date":"2015-06-25T23:17:46.741Z","type":"message"}
{"nick":"rphillips","message":"luvit*","date":"2015-06-25T23:17:51.294Z","type":"message"}
{"nick":"rje","message":"rphillips, https://gist.github.com/rjemanuele/8ef88137d04f3234e7dd","date":"2015-06-25T23:21:50.129Z","type":"message"}
{"nick":"rphillips","message":"works?","date":"2015-06-25T23:22:09.473Z","type":"message"}
{"nick":"rje","message":"so that will run the tests in the right directory as admin, but it spawns another window","date":"2015-06-25T23:22:27.694Z","type":"message"}
{"nick":"rphillips","message":"-NoNewWindow","date":"2015-06-25T23:24:40.867Z","type":"message"}
{"nick":"rphillips","message":"?","date":"2015-06-25T23:24:42.477Z","type":"message"}
{"nick":"rje","message":"incompatable with -verb runas","date":"2015-06-25T23:25:13.919Z","type":"message"}
{"nick":"rphillips","message":"bummer","date":"2015-06-25T23:26:17.538Z","type":"message"}
{"nick":"rphillips","message":"so, we can't see the output?","date":"2015-06-25T23:26:28.747Z","type":"message"}
{"nick":"rje","message":"right, i'm going to try a few more things and then email appveyor support, there has got to be a way","date":"2015-06-25T23:32:01.958Z","type":"message"}
{"nick":"rphillips","message":"nice... yeah, an email would be good","date":"2015-06-25T23:32:30.552Z","type":"message"}
{"nick":"rje","message":"i wonder if you can get rdp on an appveyor account so i can test something","date":"2015-06-25T23:36:34.824Z","type":"message"}
{"nick":"rje","message":"rphillips, they say it should just work.  plan b, write a powershell script that does exactly what i want in a test repo","date":"2015-06-25T23:53:29.050Z","type":"message"}
