{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-03-15T00:00:38.428Z","type":"quit"}
{"nick":"indutny_sleeping","message":"creationix: yt?","date":"2012-03-15T00:09:52.424Z","type":"message"}
{"nick":"piscisaureus_","date":"2012-03-15T00:16:47.384Z","type":"join"}
{"nick":"piscisaureus_","reason":"Client Quit","date":"2012-03-15T00:16:50.612Z","type":"quit"}
{"nick":"mmalecki","new_nick":"mmalecki[zzz]","date":"2012-03-15T00:31:41.794Z","type":"nick"}
{"nick":"creationix","message":"i am, but putting kids to bed","date":"2012-03-15T01:32:03.527Z","type":"message"}
{"nick":"creationix","message":"ok, I'm back","date":"2012-03-15T02:00:00.857Z","type":"message"}
{"nick":"creationix","message":"Trying to figure out the C++ object typecasting problem","date":"2012-03-15T02:03:29.088Z","type":"message"}
{"nick":"creationix","message":"seems you can't cast a uvTimer instance to a uvHandle instance in C++","date":"2012-03-15T02:03:42.053Z","type":"message"}
{"nick":"creationix","message":"yeah, looks like vtables are chained","date":"2012-03-15T02:11:24.767Z","type":"message"}
{"nick":"alejandromg","date":"2012-03-15T02:51:17.253Z","type":"join"}
{"nick":"alejandromg","reason":"Quit: leaving","date":"2012-03-15T06:12:47.755Z","type":"quit"}
{"nick":"indutny_sleeping","message":"creationix: yes","date":"2012-03-15T10:17:57.115Z","type":"message"}
{"nick":"indutny_sleeping","message":"creationix: dynamic_cast, I told ya before","date":"2012-03-15T10:18:03.314Z","type":"message"}
{"nick":"indutny_sleeping","new_nick":"indutny","date":"2012-03-15T11:59:28.106Z","type":"nick"}
{"nick":"mmalecki[zzz]","new_nick":"mmalecki","date":"2012-03-15T13:29:40.490Z","type":"nick"}
{"nick":"karterk","date":"2012-03-15T13:52:23.922Z","type":"join"}
{"nick":"creationix","message":"can't dynamic_cast from a void*","date":"2012-03-15T13:56:37.863Z","type":"message"}
{"nick":"indutny","message":"creationix: yes you can't","date":"2012-03-15T13:57:29.048Z","type":"message"}
{"nick":"indutny","message":"you should reinterpret_cast to a real class","date":"2012-03-15T13:57:34.627Z","type":"message"}
{"nick":"indutny","message":"and then dynamic_cast to some parent class","date":"2012-03-15T13:57:42.521Z","type":"message"}
{"nick":"creationix","message":"well at that point, I can just use the child-class as-is","date":"2012-03-15T13:57:59.803Z","type":"message"}
{"nick":"creationix","message":"the problem is I don't know what the child-class it in the first-place","date":"2012-03-15T13:58:11.706Z","type":"message"}
{"nick":"indutny","message":"hm...","date":"2012-03-15T13:58:31.732Z","type":"message"}
{"nick":"indutny","message":"you should have one class then","date":"2012-03-15T13:58:58.739Z","type":"message"}
{"nick":"indutny","message":"with type num","date":"2012-03-15T13:59:09.209Z","type":"message"}
{"nick":"indutny","message":"s/num/enum","date":"2012-03-15T13:59:12.656Z","type":"message"}
{"nick":"piscisaureus_","date":"2012-03-15T14:06:51.057Z","type":"join"}
{"nick":"creationix","message":"one class with all the methods?","date":"2012-03-15T14:13:42.316Z","type":"message"}
{"nick":"creationix","message":"I guess that works","date":"2012-03-15T14:13:45.090Z","type":"message"}
{"nick":"creationix","message":"just wastes a lot of memory","date":"2012-03-15T14:14:05.695Z","type":"message"}
{"nick":"indutny","message":"creationix: no memory waste :)","date":"2012-03-15T14:15:34.854Z","type":"message"}
{"nick":"indutny","message":"creationix: methods are static :)","date":"2012-03-15T14:15:40.284Z","type":"message"}
{"nick":"indutny","message":"creationix: not per instance","date":"2012-03-15T14:15:47.454Z","type":"message"}
{"nick":"indutny","message":"creationix: only `type` property will waste a 4/8 bytes of memory","date":"2012-03-15T14:16:04.864Z","type":"message"}
{"nick":"creationix","message":"what about all the callbacks","date":"2012-03-15T14:16:21.046Z","type":"message"}
{"nick":"creationix","message":"and the uv structs","date":"2012-03-15T14:16:26.573Z","type":"message"}
{"nick":"creationix","message":"I guess I can union the uv structs","date":"2012-03-15T14:16:35.703Z","type":"message"}
{"nick":"creationix","message":"but the callbacks kinda need to be unique","date":"2012-03-15T14:16:48.502Z","type":"message"}
{"nick":"karterk","reason":"Remote host closed the connection","date":"2012-03-15T14:17:17.032Z","type":"quit"}
{"nick":"indutny","message":"creationix: yes, you can union them","date":"2012-03-15T14:17:27.106Z","type":"message"}
{"nick":"indutny","message":"or use pointer","date":"2012-03-15T14:17:29.610Z","type":"message"}
{"nick":"indutny","message":" /cc piscisaureus_","date":"2012-03-15T14:18:06.452Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: how would one organize that stuff with uv?","date":"2012-03-15T14:18:16.391Z","type":"message"}
{"nick":"indutny","message":"creationix: btw, why not have separate 'close' and other methods?","date":"2012-03-15T14:19:00.375Z","type":"message"}
{"nick":"indutny","message":"separate for each handle type","date":"2012-03-15T14:19:07.650Z","type":"message"}
{"nick":"indutny","message":"brb","date":"2012-03-15T14:20:03.222Z","type":"message"}
{"nick":"indutny","message":"going to take a shower","date":"2012-03-15T14:20:08.710Z","type":"message"}
{"nick":"creationix","message":"ok, I'm going to eat breakfast","date":"2012-03-15T14:20:18.714Z","type":"message"}
{"nick":"indutny","message":"creationix: back","date":"2012-03-15T14:37:01.229Z","type":"message"}
{"nick":"piscisaureus_","message":"indutny: I don't really understand the problem","date":"2012-03-15T14:43:04.369Z","type":"message"}
{"nick":"indutny","message":"piscisaureus_: one sec","date":"2012-03-15T14:53:34.195Z","type":"message"}
{"nick":"indutny","message":"creationix: yt?","date":"2012-03-15T14:53:38.788Z","type":"message"}
{"nick":"creationix","message":"back","date":"2012-03-15T14:53:45.579Z","type":"message"}
{"nick":"indutny","message":"cool","date":"2012-03-15T14:54:03.503Z","type":"message"}
{"nick":"creationix","message":"piscisaureus_, I'm trying to find a way to wrap uv_*_t values in candor","date":"2012-03-15T14:54:45.824Z","type":"message"}
{"nick":"creationix","message":"just the struct is easy","date":"2012-03-15T14:54:49.369Z","type":"message"}
{"nick":"creationix","message":"I just use timer = CData::New(sizeof(uv_timer_t))","date":"2012-03-15T14:55:05.931Z","type":"message"}
{"nick":"creationix","message":"well, with the typecast","date":"2012-03-15T14:55:11.200Z","type":"message"}
{"nick":"creationix","message":"and it will free the memory when the CData value is GCed","date":"2012-03-15T14:55:24.368Z","type":"message"}
{"nick":"creationix","message":"but I want to store callbacks with the CData too","date":"2012-03-15T14:55:35.847Z","type":"message"}
{"nick":"creationix","message":"and have a class with methods and not just a struct","date":"2012-03-15T14:55:45.063Z","type":"message"}
{"nick":"creationix","message":"it all works fine till inheritance gets mixed in","date":"2012-03-15T14:56:02.738Z","type":"message"}
{"nick":"creationix","message":"here is the base class that wraps uv_handle_t https://github.com/creationix/candor.io/blob/master/src/luv_handle.h","date":"2012-03-15T14:56:34.003Z","type":"message"}
{"nick":"creationix","message":"I have static C functions that route calls to the instance","date":"2012-03-15T14:57:15.426Z","type":"message"}
{"nick":"creationix","message":"https://github.com/creationix/candor.io/blob/master/src/luv_handle.cc#L23","date":"2012-03-15T14:57:18.328Z","type":"message"}
{"nick":"creationix","message":"and https://github.com/creationix/candor.io/blob/master/src/luv_handle.cc#L38","date":"2012-03-15T14:57:25.419Z","type":"message"}
{"nick":"creationix","message":"the problem is I typecast the void* in both cases to uvHandle instances","date":"2012-03-15T14:57:51.407Z","type":"message"}
{"nick":"creationix","message":"but they are actually uvTimer instances","date":"2012-03-15T14:57:59.036Z","type":"message"}
{"nick":"creationix","message":"and C++ classes don't seem to like typecasting that way","date":"2012-03-15T14:58:06.587Z","type":"message"}
{"nick":"creationix","message":"if I could use instance methods as C callback pointers then that would solve the callback side","date":"2012-03-15T14:59:02.059Z","type":"message"}
{"nick":"creationix","message":"I could point right to this->OnClose","date":"2012-03-15T14:59:30.258Z","type":"message"}
{"nick":"creationix","message":"but I don't think function pointers can embed the this pointer like that","date":"2012-03-15T14:59:40.540Z","type":"message"}
{"nick":"karterk","date":"2012-03-15T15:05:44.775Z","type":"join"}
{"nick":"creationix","message":"indutny, anyway, about the language, how is progress going?","date":"2012-03-15T15:25:38.677Z","type":"message"}
{"nick":"piscisaureus_","message":"creationix: looking at it","date":"2012-03-15T15:26:17.660Z","type":"message"}
{"nick":"indutny","message":"creationix: I think we're close to some sort of 'stable' base","date":"2012-03-15T15:26:35.359Z","type":"message"}
{"nick":"creationix","message":"assuming we fix my C++ issues, the candor side of the API in really ugly","date":"2012-03-15T15:26:43.732Z","type":"message"}
{"nick":"indutny","message":"creationix: fixing gc issue atm","date":"2012-03-15T15:27:04.872Z","type":"message"}
{"nick":"creationix","message":"ok","date":"2012-03-15T15:27:08.646Z","type":"message"}
{"nick":"piscisaureus_","message":"creationix: so the issue is, you need to store the candor callback in the same class as the uv_stream_t?","date":"2012-03-15T15:57:02.723Z","type":"message"}
{"nick":"creationix","message":"I'm not particular to any solution","date":"2012-03-15T15:57:28.418Z","type":"message"}
{"nick":"piscisaureus_","message":"creationix: so what you probably want to do is use a template","date":"2012-03-15T15:57:44.947Z","type":"message"}
{"nick":"creationix","message":"the problem with my current solution is I can't typecast a uvTimer instance to a uvHandle instance","date":"2012-03-15T15:57:58.875Z","type":"message"}
{"nick":"creationix","message":"I looked at templates","date":"2012-03-15T15:58:09.823Z","type":"message"}
{"nick":"creationix","message":"not sure how that helps","date":"2012-03-15T15:58:12.360Z","type":"message"}
{"nick":"creationix","message":"I don't know the original type","date":"2012-03-15T15:58:22.627Z","type":"message"}
{"nick":"piscisaureus_","message":"well","date":"2012-03-15T15:59:02.635Z","type":"message"}
{"nick":"piscisaureus_","message":"creationix: so you mean, you cannot upcast uvHandle to uvTimer","date":"2012-03-15T15:59:34.083Z","type":"message"}
{"nick":"creationix","message":"it's stored as a void* in the CData that the script has","date":"2012-03-15T15:59:51.727Z","type":"message"}
{"nick":"piscisaureus_","message":"creationix: you should not need to - just make sure you have multiple versions of onclose","date":"2012-03-15T15:59:53.610Z","type":"message"}
