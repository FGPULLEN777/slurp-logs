{"nick":"qard","date":"2018-01-15T00:02:34.278Z","type":"join"}
{"nick":"chitty","date":"2018-01-15T00:02:43.035Z","type":"join"}
{"nick":"chitty","date":"2018-01-15T00:05:10.243Z","type":"part"}
{"nick":"qard","reason":"Client Quit","date":"2018-01-15T00:05:41.881Z","type":"quit"}
{"nick":"AtumT","reason":"Remote host closed the connection","date":"2018-01-15T00:15:59.234Z","type":"quit"}
{"nick":"john51","reason":"Remote host closed the connection","date":"2018-01-15T00:37:16.498Z","type":"quit"}
{"nick":"john51","date":"2018-01-15T00:37:41.142Z","type":"join"}
{"nick":"marthinal","date":"2018-01-15T00:48:06.739Z","type":"join"}
{"nick":"marthinal","reason":"Ping timeout: 268 seconds","date":"2018-01-15T00:52:57.630Z","type":"quit"}
{"nick":"devsnek","message":"TimothyGu this is where stuff gets extemely coupled","date":"2018-01-15T01:38:12.935Z","type":"message"}
{"nick":"devsnek","message":"have you looked at ModuleJob.linked :^)","date":"2018-01-15T01:38:21.376Z","type":"message"}
{"nick":"devsnek","message":"also glad to hear its working for a real use case hehe","date":"2018-01-15T01:39:55.162Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: basically it's a reimplementation of ModuleJob, written in a less confusing (IMO) way","date":"2018-01-15T01:45:56.969Z","type":"message"}
{"nick":"TimothyGu","message":"I added a new state to vm.Module to fix this and the other bug I mentioned yesterday called \"linkingStatus\"","date":"2018-01-15T01:46:21.884Z","type":"message"}
{"nick":"TimothyGu","message":"modules returned from module.link's callback must either be \"linking\" or \"linked\"","date":"2018-01-15T01:46:49.238Z","type":"message"}
{"nick":"TimothyGu","message":"instantiate() only accept \"linked\", and link() only accept \"unlinked\"","date":"2018-01-15T01:47:23.062Z","type":"message"}
{"nick":"devsnek","message":"sgtm","date":"2018-01-15T01:50:18.905Z","type":"message"}
{"nick":"devsnek","message":"oof bradley said he was gonna land 16874 today :(","date":"2018-01-15T01:51:25.374Z","type":"message"}
{"nick":"devsnek","message":"ey TimothyGu thanks for working on this btw","date":"2018-01-15T01:51:43.254Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: for some reason I had 16874 muted ...","date":"2018-01-15T01:52:57.740Z","type":"message"}
{"nick":"TimothyGu","message":"should've pinged me haha","date":"2018-01-15T01:53:15.782Z","type":"message"}
{"nick":"devsnek","message":"rip","date":"2018-01-15T01:53:21.152Z","type":"message"}
{"nick":"devsnek","message":"i often accidentally mute stuff while going through issues on my phone","date":"2018-01-15T01:53:53.213Z","type":"message"}
{"nick":"devsnek","message":"mistap and then no button to unmute it","date":"2018-01-15T01:53:58.077Z","type":"message"}
{"nick":"TimothyGu","message":"Yeah same, though I intentionally mute things because otherwise GitHub notifications would be even unmanagable than it is already","date":"2018-01-15T01:54:30.371Z","type":"message"}
{"nick":"TimothyGu","message":"I would land the PR right now, but I'm knee-deep in vm.Module so","date":"2018-01-15T01:54:53.217Z","type":"message"}
{"nick":"devsnek","message":"hehe","date":"2018-01-15T01:55:01.169Z","type":"message"}
{"nick":"devsnek","message":"don't make *too* many changes :^)","date":"2018-01-15T01:55:46.317Z","type":"message"}
{"nick":"TimothyGu","message":"I'm just enriching the docs","date":"2018-01-15T02:13:37.726Z","type":"message"}
{"nick":"TimothyGu","message":"which is taking more time than I expected","date":"2018-01-15T02:13:45.938Z","type":"message"}
{"nick":"TimothyGu","message":"which it always does","date":"2018-01-15T02:13:48.857Z","type":"message"}
{"nick":"TimothyGu","message":"also found a stray Watchdog (pun intended) that limited all module evaluation to 1 second","date":"2018-01-15T02:16:11.474Z","type":"message"}
{"nick":"TimothyGu","message":"either plz don't do any changes right now, otherwise the merge conflict will be uppercase horrible","date":"2018-01-15T02:16:43.146Z","type":"message"}
{"nick":"devsnek","message":"i was purposely waiting","date":"2018-01-15T02:27:46.312Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: pushed some more changes. but I am *not* done.","date":"2018-01-15T02:45:02.124Z","type":"message"}
{"nick":"devsnek","message":"alrite","date":"2018-01-15T02:45:09.314Z","type":"message"}
{"nick":"TimothyGu","message":"what are you planning on doing?","date":"2018-01-15T02:45:16.385Z","type":"message"}
{"nick":"devsnek","message":"uhhhh","date":"2018-01-15T02:45:20.239Z","type":"message"}
{"nick":"devsnek","message":"i made some docs changes","date":"2018-01-15T02:45:38.965Z","type":"message"}
{"nick":"devsnek","message":"and something else","date":"2018-01-15T02:45:41.756Z","type":"message"}
{"nick":"TimothyGu","message":"my TODO list: 1) finish documentation 2) more tests for linkingStatus check for link() 3) rejects() refactor","date":"2018-01-15T02:45:55.928Z","type":"message"}
{"nick":"devsnek","message":"alright","date":"2018-01-15T02:46:03.827Z","type":"message"}
{"nick":"TimothyGu","message":"oh, I wrote a lot more docs... you might want to pick and choose which parts are still necessary after my push","date":"2018-01-15T02:46:24.218Z","type":"message"}
{"nick":"devsnek","message":"ye i'm looking now","date":"2018-01-15T02:46:53.701Z","type":"message"}
{"nick":"devsnek","message":"wow your docs are better than mine lol","date":"2018-01-15T02:48:16.452Z","type":"message"}
{"nick":"devsnek","message":"hey TimothyGu if instantiation fails won't the module to go errored","date":"2018-01-15T02:49:33.037Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: nope, it'll go back to \"uninstantiated\"","date":"2018-01-15T02:49:55.235Z","type":"message"}
{"nick":"TimothyGu","message":"you can check the spec on this","date":"2018-01-15T02:50:15.172Z","type":"message"}
{"nick":"TimothyGu","message":"https://tc39.github.io/ecma262/#sec-moduledeclarationinstantiation step 5.a.ii.","date":"2018-01-15T02:50:36.511Z","type":"message"}
{"nick":"devsnek","message":"explicitly linking wasn't needed when i was testing","date":"2018-01-15T02:51:45.076Z","type":"message"}
{"nick":"devsnek","message":"like in test-vm-module-link","date":"2018-01-15T02:51:52.818Z","type":"message"}
{"nick":"devsnek","message":"that test passed","date":"2018-01-15T02:51:59.855Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: that's because the child module doesn't really any linking","date":"2018-01-15T02:52:29.850Z","type":"message"}
{"nick":"TimothyGu","message":"because it has no imports","date":"2018-01-15T02:52:38.479Z","type":"message"}
{"nick":"devsnek","message":"right","date":"2018-01-15T02:52:42.499Z","type":"message"}
{"nick":"devsnek","message":"so its a useless call right?","date":"2018-01-15T02:52:48.153Z","type":"message"}
{"nick":"devsnek","message":"in this context","date":"2018-01-15T02:52:55.798Z","type":"message"}
{"nick":"TimothyGu","message":"basically yes","date":"2018-01-15T02:52:57.573Z","type":"message"}
{"nick":"devsnek","message":"when i had a useless instantiate you asked me to get rid of it ;-;","date":"2018-01-15T02:53:16.232Z","type":"message"}
{"nick":"TimothyGu","message":"that's different","date":"2018-01-15T02:53:22.442Z","type":"message"}
{"nick":"TimothyGu","message":"lol","date":"2018-01-15T02:53:31.846Z","type":"message"}
{"nick":"devsnek","message":"idgi","date":"2018-01-15T02:53:42.956Z","type":"message"}
{"nick":"TimothyGu","message":"instantiate in our context doesn't require any user action","date":"2018-01-15T02:54:14.612Z","type":"message"}
{"nick":"TimothyGu","message":"linking in our context requires user action","date":"2018-01-15T02:54:21.578Z","type":"message"}
{"nick":"TimothyGu","message":"vm.Module doesn't have access to a module map","date":"2018-01-15T02:54:30.597Z","type":"message"}
{"nick":"TimothyGu","message":"so we have to manually link all the modules together, include submodules of the submodules","date":"2018-01-15T02:55:09.556Z","type":"message"}
{"nick":"devsnek","message":"i get that bit","date":"2018-01-15T02:55:33.803Z","type":"message"}
{"nick":"BridgeAR","reason":"Ping timeout: 256 seconds","date":"2018-01-15T02:56:11.392Z","type":"quit"}
{"nick":"TimothyGu","message":"say you have three files","date":"2018-01-15T02:56:16.453Z","type":"message"}
{"nick":"TimothyGu","message":"/* a.mjs */ import './b.mjs';","date":"2018-01-15T02:56:20.376Z","type":"message"}
{"nick":"TimothyGu","message":"/* b.mjs */ import './c.mjs';","date":"2018-01-15T02:56:28.547Z","type":"message"}
{"nick":"devsnek","message":"right","date":"2018-01-15T02:56:32.189Z","type":"message"}
{"nick":"TimothyGu","message":"/* c.mjs */ // blank","date":"2018-01-15T02:56:37.674Z","type":"message"}
{"nick":"devsnek","message":"you don't need to call link on c.mjs","date":"2018-01-15T02:56:41.694Z","type":"message"}
{"nick":"devsnek","message":"just a and b","date":"2018-01-15T02:56:44.626Z","type":"message"}
{"nick":"TimothyGu","message":"yes, but in the general case where c.mjs' content is not predetermined, the user doesn't really know if c.mjs needs linking or not w/o checking dependencySpecifiers","date":"2018-01-15T02:57:40.234Z","type":"message"}
{"nick":"TimothyGu","message":"nor do we, w/o checking dependencySpecifiers","date":"2018-01-15T02:57:57.197Z","type":"message"}
{"nick":"devsnek","message":"i mean its just a test","date":"2018-01-15T02:58:14.342Z","type":"message"}
{"nick":"devsnek","message":"w/e","date":"2018-01-15T02:58:16.591Z","type":"message"}
{"nick":"TimothyGu","message":"(i literally have to google every abbreviation you millenials use lol) so to ensure instantiate() can only be called under the right circumstances we need to either check linking status, or check dependencySpecifiers and if needed then check linking status","date":"2018-01-15T02:59:24.954Z","type":"message"}
{"nick":"TimothyGu","message":"so to that end, calling .link() isn't totally useless, because it advances the linkingStatus from \"unlinked\" to \"linked\"","date":"2018-01-15T02:59:58.747Z","type":"message"}
{"nick":"TimothyGu","message":"and I erred on the side of simpler implementation (always check linking status)","date":"2018-01-15T03:00:28.574Z","type":"message"}
{"nick":"TimothyGu","message":"(w/o the .link() right now the test case will fail)","date":"2018-01-15T03:01:04.248Z","type":"message"}
{"nick":"devsnek","message":"i don't see that check in the code","date":"2018-01-15T03:01:19.250Z","type":"message"}
{"nick":"devsnek","message":"which is why i was thinking it was useless","date":"2018-01-15T03:01:25.455Z","type":"message"}
{"nick":"TimothyGu","message":"it's the line I just added","date":"2018-01-15T03:01:39.451Z","type":"message"}
{"nick":"TimothyGu","message":"wait it's not","date":"2018-01-15T03:01:50.548Z","type":"message"}
{"nick":"TimothyGu","message":"it's the line I added last night","date":"2018-01-15T03:01:59.928Z","type":"message"}
{"nick":"devsnek","message":"i don't see it in the diff","date":"2018-01-15T03:02:05.071Z","type":"message"}
{"nick":"devsnek","message":"maybe i'm blind","date":"2018-01-15T03:02:08.289Z","type":"message"}
{"nick":"TimothyGu","message":"ll 158-159","date":"2018-01-15T03:02:11.913Z","type":"message"}
{"nick":"devsnek","message":"oh whoops","date":"2018-01-15T03:02:37.496Z","type":"message"}
{"nick":"TimothyGu","message":"of lib/internal/vm/Module.js","date":"2018-01-15T03:02:37.742Z","type":"message"}
{"nick":"devsnek","message":"i was looking at just the third commit","date":"2018-01-15T03:02:44.522Z","type":"message"}
{"nick":"devsnek","message":"kms","date":"2018-01-15T03:02:47.437Z","type":"message"}
{"nick":"TimothyGu","message":"so you are not blind ;)","date":"2018-01-15T03:02:49.114Z","type":"message"}
{"nick":"TimothyGu","message":"yeah I added it last night sorry","date":"2018-01-15T03:02:57.480Z","type":"message"}
{"nick":"TimothyGu","message":"wait no, that is in the third commit","date":"2018-01-15T03:03:08.011Z","type":"message"}
{"nick":"devsnek","message":"ok so i am blin","date":"2018-01-15T03:03:13.287Z","type":"message"}
{"nick":"TimothyGu","message":"because the second commit is now the refactor","date":"2018-01-15T03:03:16.494Z","type":"message"}
{"nick":"devsnek","message":"d","date":"2018-01-15T03:03:16.495Z","type":"message"}
{"nick":"TimothyGu","message":"If you are I am too","date":"2018-01-15T03:03:25.833Z","type":"message"}
{"nick":"TimothyGu","message":"alright laundry time for me","date":"2018-01-15T03:03:33.265Z","type":"message"}
{"nick":"devsnek","message":"i see it in the overall diff","date":"2018-01-15T03:03:37.562Z","type":"message"}
{"nick":"devsnek","message":"good enough for me","date":"2018-01-15T03:03:40.422Z","type":"message"}
{"nick":"TimothyGu","message":"yeah I squashed my changes on yours last night because it was too difficult to deal with it","date":"2018-01-15T03:04:03.252Z","type":"message"}
{"nick":"TimothyGu","message":"it's also in https://gist.github.com/anonymous/de3512ca106144be55391a1f5b723286#file-a-diff-L205-L206 if you are interested","date":"2018-01-15T03:04:40.344Z","type":"message"}
{"nick":"devsnek","message":"maybe if this pr sits long enough that assert.rejects pr will land and we can use it :^)","date":"2018-01-15T03:04:53.418Z","type":"message"}
{"nick":"devsnek","message":"anonymous gist tho","date":"2018-01-15T03:05:00.152Z","type":"message"}
{"nick":"TimothyGu","message":"I just installed gist and I was too lazy to login to GitHub (b/c 2fa)","date":"2018-01-15T03:05:29.349Z","type":"message"}
{"nick":"TimothyGu","message":"(yes I just installed the gist Gem last night)","date":"2018-01-15T03:05:41.446Z","type":"message"}
{"nick":"TimothyGu","message":"sprunge.us doesn't accept new submissions :(","date":"2018-01-15T03:05:51.889Z","type":"message"}
{"nick":"devsnek","message":"sprunge is 500 for fetching gists","date":"2018-01-15T03:06:32.901Z","type":"message"}
{"nick":"devsnek","message":"so maybe you dodged a bullet","date":"2018-01-15T03:06:40.226Z","type":"message"}
{"nick":"TimothyGu","message":"possibly","date":"2018-01-15T03:18:47.483Z","type":"message"}
{"nick":"TimothyGu","message":"I do have things on Sprunge I didnt save anywhere else though :(","date":"2018-01-15T03:19:41.033Z","type":"message"}
{"nick":"devsnek","message":"yo TimothyGu is that extra param really needed?","date":"2018-01-15T05:15:34.903Z","type":"message"}
{"nick":"devsnek","message":"you're already calling link *on the module*","date":"2018-01-15T05:15:45.605Z","type":"message"}
{"nick":"devsnek","message":"if its just for making a common callback can't the person using the api do that","date":"2018-01-15T05:15:58.632Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: no it's not needed, but 1) provides a better symmetry with the spec, and 2) (you guessed it) allows using a common callback","date":"2018-01-15T05:16:19.012Z","type":"message"}
{"nick":"TimothyGu","message":"you see in lib/internal/loader/ModuleJob.js right now, there's a link() created for every module","date":"2018-01-15T05:16:57.599Z","type":"message"}
{"nick":"TimothyGu","message":"that's not too kosher","date":"2018-01-15T05:17:10.516Z","type":"message"}
{"nick":"devsnek","message":"heh","date":"2018-01-15T05:17:26.982Z","type":"message"}
{"nick":"devsnek","message":"ModuleJob is pretty unholy","date":"2018-01-15T05:17:33.837Z","type":"message"}
{"nick":"TimothyGu","message":"check out https://gist.github.com/TimothyGu/3c5285d554dd1f8c333685475ad01613/revisions#diff-1ba460185ebb90553ce797e30077b93d","date":"2018-01-15T05:18:36.039Z","type":"message"}
{"nick":"TimothyGu","message":"before/after:","date":"2018-01-15T05:18:49.001Z","type":"message"}
{"nick":"TimothyGu","message":"-    await result.module.link(linker.bind(undefined, moduleScript));","date":"2018-01-15T05:18:50.952Z","type":"message"}
{"nick":"TimothyGu","message":"+    await result.module.link(linker);","date":"2018-01-15T05:18:52.996Z","type":"message"}
{"nick":"TimothyGu","message":"in terms symmetry with spec, see https://tc39.github.io/ecma262/#sec-hostresolveimportedmodule","date":"2018-01-15T05:19:27.924Z","type":"message"}
{"nick":"devsnek","message":"i'm excited for jsdom modules but","date":"2018-01-15T05:20:12.344Z","type":"message"}
{"nick":"devsnek","message":"won't this break jsdom's browser target","date":"2018-01-15T05:20:24.054Z","type":"message"}
{"nick":"devsnek","message":"until realms get figured out","date":"2018-01-15T05:20:28.459Z","type":"message"}
{"nick":"devsnek","message":"or whatever that ses meeting was about","date":"2018-01-15T05:20:34.870Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: oh yeah, totally","date":"2018-01-15T05:21:42.539Z","type":"message"}
{"nick":"TimothyGu","message":"that's why we won't support modules on browsers","date":"2018-01-15T05:21:53.077Z","type":"message"}
{"nick":"devsnek","message":"rip","date":"2018-01-15T05:21:56.777Z","type":"message"}
{"nick":"TimothyGu","message":"(even right now, sandboxing in browsers is pretty sketchy","date":"2018-01-15T05:22:25.417Z","type":"message"}
{"nick":"devsnek","message":"i've seen the implementations","date":"2018-01-15T05:22:34.994Z","type":"message"}
{"nick":"TimothyGu","message":"okay then you know what I'm talking about","date":"2018-01-15T05:22:52.718Z","type":"message"}
{"nick":"devsnek","message":"hehe","date":"2018-01-15T05:23:04.968Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: are you fine with that change?","date":"2018-01-15T05:26:22.412Z","type":"message"}
{"nick":"devsnek","message":"yea","date":"2018-01-15T05:27:22.666Z","type":"message"}
{"nick":"devsnek","message":"its very logical","date":"2018-01-15T05:27:23.790Z","type":"message"}
{"nick":"devsnek","message":"not at first glance at least","date":"2018-01-15T05:27:36.540Z","type":"message"}
{"nick":"TimothyGu","message":"better documentation is again on my TODO :/","date":"2018-01-15T05:29:49.871Z","type":"message"}
{"nick":"devsnek","message":"i can also work on that","date":"2018-01-15T05:30:41.896Z","type":"message"}
{"nick":"devsnek","message":"maybe one day node will move to inline documentation in the code","date":"2018-01-15T05:31:02.846Z","type":"message"}
{"nick":"devsnek","message":"that would be pretty cool","date":"2018-01-15T05:31:09.761Z","type":"message"}
{"nick":"howdoi","reason":"Quit: Connection closed for inactivity","date":"2018-01-15T05:39:19.755Z","type":"quit"}
{"nick":"TimothyGu","message":"devsnek: some things I had on my mind is: 1) mention HostResolveImportedModule as an analog of the linker function, but also specify its differences","date":"2018-01-15T05:41:58.430Z","type":"message"}
{"nick":"devsnek","message":"i feel like we should wait on directly comparing this to spec until we see what happens with the official spec","date":"2018-01-15T05:42:27.869Z","type":"message"}
{"nick":"devsnek","message":"we might get something better from there","date":"2018-01-15T05:42:31.813Z","type":"message"}
{"nick":"devsnek","message":"and this would be more like a node bare bones thing","date":"2018-01-15T05:42:43.566Z","type":"message"}
{"nick":"devsnek","message":"i dunno","date":"2018-01-15T05:42:55.447Z","type":"message"}
{"nick":"TimothyGu","message":"2) document module.error; specifically say that this property can only be gotten when status is errored, and mention why we can't use `undefined` for the case where status is not errored (allow `throw undefined`)","date":"2018-01-15T05:43:19.985Z","type":"message"}
{"nick":"devsnek","message":"oyea","date":"2018-01-15T05:43:32.985Z","type":"message"}
{"nick":"TimothyGu","message":"nah I think the spec is pretty much frozen","date":"2018-01-15T05:43:38.241Z","type":"message"}
{"nick":"devsnek","message":"nah i meant for like","date":"2018-01-15T05:43:45.179Z","type":"message"}
{"nick":"devsnek","message":"whatever happens with realms and reflection","date":"2018-01-15T05:43:54.094Z","type":"message"}
{"nick":"devsnek","message":"someone left a comment","date":"2018-01-15T05:43:58.745Z","type":"message"}
{"nick":"TimothyGu","message":"yeah I know that; all I'm saying is that the realms proposal won't really change vm.Module much because vm.Module is very low-level","date":"2018-01-15T05:44:58.538Z","type":"message"}
{"nick":"devsnek","message":"oh it was caridy","date":"2018-01-15T05:44:58.619Z","type":"message"}
{"nick":"devsnek","message":"i would also say","date":"2018-01-15T05:45:13.457Z","type":"message"}
{"nick":"devsnek","message":"your opinions on this will probably be better informed than mine","date":"2018-01-15T05:45:22.180Z","type":"message"}
{"nick":"TimothyGu","message":"I'm looking at https://rawgit.com/caridy/proposal-realms/master/index.html right now","date":"2018-01-15T05:47:07.010Z","type":"message"}
{"nick":"devsnek","message":"i think he really wants realms to have reflection for scripts and modules","date":"2018-01-15T05:47:29.549Z","type":"message"}
{"nick":"TimothyGu","message":"it doesn't really change the core of module resolution, only layering an additional layer of things on top of the existing module stuff","date":"2018-01-15T05:47:31.956Z","type":"message"}
{"nick":"marthina_","date":"2018-01-15T05:48:35.340Z","type":"join"}
{"nick":"devsnek","message":"but like i said you probs know this stuff better than me","date":"2018-01-15T05:50:00.381Z","type":"message"}
{"nick":"devsnek","message":"so i'll defer to you","date":"2018-01-15T05:50:06.597Z","type":"message"}
{"nick":"TimothyGu","message":"I'm more just talking to myself lol","date":"2018-01-15T05:50:15.235Z","type":"message"}
{"nick":"devsnek","message":"rip","date":"2018-01-15T05:50:28.989Z","type":"message"}
{"nick":"TimothyGu","message":"in fact how our vm module behaves may actually influence their decision making","date":"2018-01-15T05:50:35.094Z","type":"message"}
{"nick":"devsnek","message":"1sec changing name to devduck","date":"2018-01-15T05:50:36.030Z","type":"message"}
{"nick":"devsnek","message":"if thats what you think then we had better make it really good","date":"2018-01-15T05:51:14.440Z","type":"message"}
{"nick":"TimothyGu","message":"not sure about you I think it *is* pretty good","date":"2018-01-15T05:51:47.712Z","type":"message"}
{"nick":"marthina_","reason":"Ping timeout: 248 seconds","date":"2018-01-15T05:53:03.829Z","type":"quit"}
{"nick":"devsnek","message":"a feature isn't good until its ready to merge","date":"2018-01-15T05:53:27.495Z","type":"message"}
{"nick":"devsnek","message":"😉","date":"2018-01-15T05:53:41.756Z","type":"message"}
{"nick":"TimothyGu","message":"I feel there are multiple layers of irony in that sentence","date":"2018-01-15T05:54:55.337Z","type":"message"}
{"nick":"TimothyGu","message":"You are the author of the PR, but I'm also getting it ready to merge, and now you are saying this","date":"2018-01-15T05:55:19.154Z","type":"message"}
{"nick":"TimothyGu","action":"shakes his head","date":"2018-01-15T05:55:36.952Z","type":"action"}
{"nick":"devsnek","message":"i really need to figure out why weechat keeps borking with unicode","date":"2018-01-15T05:56:24.843Z","type":"message"}
{"nick":"devsnek","message":"its supposed to be the best at handling it","date":"2018-01-15T05:56:30.123Z","type":"message"}
{"nick":"TimothyGu","message":"I see it fine","date":"2018-01-15T05:57:19.779Z","type":"message"}
{"nick":"devsnek","message":"i see the unicode but lines are duplicating and stuff","date":"2018-01-15T05:58:09.321Z","type":"message"}
{"nick":"TimothyGu","message":"maybe it's one of the layers in between weechat and your terminal","date":"2018-01-15T05:58:11.989Z","type":"message"}
{"nick":"devsnek","message":"its iterm2","date":"2018-01-15T05:58:21.491Z","type":"message"}
{"nick":"devsnek","message":"pretty reliable right?","date":"2018-01-15T05:58:26.351Z","type":"message"}
{"nick":"TimothyGu","message":"yeah I mean screen/tmux + ssh + whatever other things you're reading","date":"2018-01-15T05:58:43.440Z","type":"message"}
{"nick":"devsnek","message":"ok don't tell anyone but i don't use screen or tmux, i just use iterm2's builtin thing","date":"2018-01-15T05:59:18.230Z","type":"message"}
{"nick":"devsnek","action":"hides from angry bearded unix people","date":"2018-01-15T05:59:25.176Z","type":"action"}
{"nick":"TimothyGu","message":"so you run weechat 24/7 on your own computer?","date":"2018-01-15T05:59:43.134Z","type":"message"}
{"nick":"TimothyGu","message":"nah, angry bearded unix people don't use tmux, only screen","date":"2018-01-15T05:59:58.440Z","type":"message"}
{"nick":"devsnek","message":"oh i have a bouncer","date":"2018-01-15T06:00:01.789Z","type":"message"}
{"nick":"devsnek","message":"znc","date":"2018-01-15T06:00:03.921Z","type":"message"}
{"nick":"devsnek","message":"but thats off on a server","date":"2018-01-15T06:00:21.852Z","type":"message"}
{"nick":"TimothyGu","message":"heh I've got no idea then","date":"2018-01-15T06:00:29.531Z","type":"message"}
{"nick":"TimothyGu","message":"weechat in tmux + ssh works for me just fine","date":"2018-01-15T06:00:44.840Z","type":"message"}
{"nick":"devsnek","message":"ok actually now that i'm closely watching what the glitch is","date":"2018-01-15T06:01:01.077Z","type":"message"}
{"nick":"devsnek","message":"it doesn't wipe the ansi formatting from the line","date":"2018-01-15T06:01:13.995Z","type":"message"}
{"nick":"TimothyGu","message":"https://imgur.com/a/ndVQY","date":"2018-01-15T06:01:27.292Z","type":"message"}
{"nick":"devsnek","message":"so like odd parenthesis and things are left over","date":"2018-01-15T06:01:34.464Z","type":"message"}
{"nick":"TimothyGu","message":"heh","date":"2018-01-15T06:01:39.212Z","type":"message"}
{"nick":"devsnek","message":"until text covers them","date":"2018-01-15T06:01:47.413Z","type":"message"}
{"nick":"TimothyGu","message":"ansi code doesn't use parentheses iirc","date":"2018-01-15T06:01:52.379Z","type":"message"}
{"nick":"devsnek","message":"no i mean","date":"2018-01-15T06:01:57.556Z","type":"message"}
{"nick":"devsnek","message":"like the green parens","date":"2018-01-15T06:02:04.639Z","type":"message"}
{"nick":"devsnek","message":"they have ansi around them","date":"2018-01-15T06:02:08.441Z","type":"message"}
{"nick":"devsnek","message":"or the \"has quit\" text","date":"2018-01-15T06:02:19.389Z","type":"message"}
{"nick":"TimothyGu","message":"can you take a screenshot","date":"2018-01-15T06:02:19.677Z","type":"message"}
{"nick":"devsnek","message":"oh boy i don't even know whats going on now","date":"2018-01-15T06:02:45.269Z","type":"message"}
{"nick":"TimothyGu","action":"slowly walks away","date":"2018-01-15T06:03:16.781Z","type":"action"}
{"nick":"devsnek","message":"https://i.imgur.com/k9y5ys1.png","date":"2018-01-15T06:03:28.105Z","type":"message"}
{"nick":"TimothyGu","message":"no idea man","date":"2018-01-15T06:04:12.116Z","type":"message"}
{"nick":"TimothyGu","message":"it seems like weechat is calculating the character width just fine","date":"2018-01-15T06:04:33.287Z","type":"message"}
{"nick":"TimothyGu","message":"have you tried googling","date":"2018-01-15T06:04:49.272Z","type":"message"}
{"nick":"devsnek","message":"i'm idly looking into it","date":"2018-01-15T06:04:56.464Z","type":"message"}
{"nick":"TimothyGu","message":"maybe you can considering switching to Debian and use gnome-terminal","date":"2018-01-15T06:05:27.807Z","type":"message"}
{"nick":"devsnek","message":"i prefer arch tbh","date":"2018-01-15T06:05:48.208Z","type":"message"}
{"nick":"TimothyGu","message":"okay we are not getting into this","date":"2018-01-15T06:06:19.435Z","type":"message"}
{"nick":"TimothyGu","message":"gotta say, the _ filtering thing really blew up","date":"2018-01-15T06:07:31.104Z","type":"message"}
{"nick":"devsnek","message":"yea i'm just avoiding that now","date":"2018-01-15T06:08:10.984Z","type":"message"}
{"nick":"devsnek","message":"i already have too much emotional baggage with jdalton from lodash related things","date":"2018-01-15T06:08:40.880Z","type":"message"}
{"nick":"lpin","date":"2018-01-15T06:28:28.006Z","type":"join"}
{"nick":"TimothyGu","message":"joyee: you might be interested in https://github.com/tbfleming/cib/blob/master/build.py","date":"2018-01-15T06:58:40.223Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek pointed this out to me. tweaking it should allow building a wasm for clang-format/tidy","date":"2018-01-15T06:59:05.191Z","type":"message"}
{"nick":"TimothyGu","message":"for C++ linters","date":"2018-01-15T07:01:42.249Z","type":"message"}
{"nick":"marthina_","date":"2018-01-15T07:12:39.693Z","type":"join"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T07:17:00.690Z","type":"quit"}
{"nick":"marthina_","date":"2018-01-15T07:17:27.236Z","type":"join"}
{"nick":"marthina_","reason":"Ping timeout: 256 seconds","date":"2018-01-15T07:22:09.589Z","type":"quit"}
{"nick":"BridgeAR","date":"2018-01-15T07:24:38.655Z","type":"join"}
{"nick":"seishun","date":"2018-01-15T07:37:14.313Z","type":"join"}
{"nick":"marthina_","date":"2018-01-15T07:41:43.571Z","type":"join"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T07:42:38.170Z","type":"quit"}
{"nick":"marthina_","date":"2018-01-15T07:43:04.341Z","type":"join"}
{"nick":"marthina_","reason":"Ping timeout: 255 seconds","date":"2018-01-15T07:47:32.339Z","type":"quit"}
{"nick":"seishun","reason":"Ping timeout: 260 seconds","date":"2018-01-15T08:13:31.004Z","type":"quit"}
{"nick":"seishun","date":"2018-01-15T08:25:13.707Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 248 seconds","date":"2018-01-15T08:34:40.279Z","type":"quit"}
{"nick":"alweezy","date":"2018-01-15T08:34:40.466Z","type":"join"}
{"nick":"marthina_","date":"2018-01-15T08:44:21.807Z","type":"join"}
{"nick":"BridgeAR","reason":"Quit: Leaving.","date":"2018-01-15T08:48:04.166Z","type":"quit"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T08:49:38.270Z","type":"quit"}
{"nick":"marthina_","date":"2018-01-15T08:50:16.057Z","type":"join"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T08:52:34.999Z","type":"quit"}
{"nick":"marthina_","date":"2018-01-15T08:52:51.116Z","type":"join"}
{"nick":"joyee","message":"TimothyGu: I found that the llvm website actually provides binaries of their tool chain","date":"2018-01-15T08:54:45.151Z","type":"message"}
{"nick":"TimothyGu","message":"oh cool","date":"2018-01-15T08:55:06.764Z","type":"message"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T08:55:16.108Z","type":"quit"}
{"nick":"joyee","message":"So at the moment I would prefer going that direction","date":"2018-01-15T08:55:16.689Z","type":"message"}
{"nick":"joyee","message":"But thanks anyways!","date":"2018-01-15T08:55:31.704Z","type":"message"}
{"nick":"joyee","message":"Also I found that clang-tidy is a bit slow","date":"2018-01-15T08:58:06.860Z","type":"message"}
{"nick":"joyee","message":"So not sure if it should be required in the tests","date":"2018-01-15T08:58:54.274Z","type":"message"}
{"nick":"marthina_","date":"2018-01-15T09:02:04.086Z","type":"join"}
{"nick":"BridgeAR","date":"2018-01-15T09:06:17.249Z","type":"join"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T09:08:05.515Z","type":"quit"}
{"nick":"marthina_","date":"2018-01-15T09:08:25.519Z","type":"join"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T09:10:32.116Z","type":"quit"}
{"nick":"marthina_","date":"2018-01-15T09:10:58.572Z","type":"join"}
{"nick":"marthina_","reason":"Ping timeout: 248 seconds","date":"2018-01-15T09:15:13.479Z","type":"quit"}
{"nick":"marthina_","date":"2018-01-15T09:18:14.391Z","type":"join"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T09:19:17.421Z","type":"quit"}
{"nick":"marthina_","date":"2018-01-15T09:19:43.538Z","type":"join"}
{"nick":"marthina_","reason":"Ping timeout: 265 seconds","date":"2018-01-15T09:24:29.466Z","type":"quit"}
{"nick":"TimothyGu","message":"joyee: I believe V8 runs clang-format only on files that changes","date":"2018-01-15T09:30:31.361Z","type":"message"}
{"nick":"TimothyGu","message":"changed*","date":"2018-01-15T09:30:33.604Z","type":"message"}
{"nick":"TimothyGu","message":"I assume we can do the same with clang-tidy","date":"2018-01-15T09:30:46.225Z","type":"message"}
{"nick":"alweezy","reason":"Ping timeout: 256 seconds","date":"2018-01-15T10:05:55.641Z","type":"quit"}
{"nick":"alweezy","date":"2018-01-15T10:29:50.998Z","type":"join"}
{"nick":"bhughes","reason":"Ping timeout: 255 seconds","date":"2018-01-15T10:35:10.906Z","type":"quit"}
{"nick":"AtumT","date":"2018-01-15T10:37:28.779Z","type":"join"}
{"nick":"bhughes","date":"2018-01-15T10:37:37.244Z","type":"join"}
{"nick":"not-an-aardvark","reason":"Quit: Connection closed for inactivity","date":"2018-01-15T10:46:49.058Z","type":"quit"}
{"nick":"BridgeAR","reason":"Ping timeout: 264 seconds","date":"2018-01-15T10:54:21.315Z","type":"quit"}
{"nick":"marthinal","date":"2018-01-15T10:57:35.314Z","type":"join"}
{"nick":"BridgeAR","date":"2018-01-15T11:02:54.829Z","type":"join"}
{"nick":"mylesborins","reason":"Quit: farewell for now","date":"2018-01-15T11:25:12.228Z","type":"quit"}
{"nick":"mylesborins","date":"2018-01-15T11:25:41.937Z","type":"join"}
{"nick":"BridgeAR","reason":"Quit: Leaving.","date":"2018-01-15T11:46:47.717Z","type":"quit"}
{"nick":"evanlucas","date":"2018-01-15T12:00:33.745Z","type":"join"}
{"nick":"joyee","message":"TimothyGu: hmm in our case running clang-format does not take a lot of time. clang-tidy is slow even if it is only applied on one file (running it on one .cc takes about the same time as running cpplint.py on all our files IIRC)","date":"2018-01-15T12:08:50.593Z","type":"message"}
{"nick":"joyee","message":"And I don't think it's slow because of anything special about our codebase. I've tried to create the compilation database by hand and running clang-tidy on llnode, which only has 5 .cc files, and it's still slow.","date":"2018-01-15T12:11:19.273Z","type":"message"}
{"nick":"AtumT","reason":"Remote host closed the connection","date":"2018-01-15T12:30:02.562Z","type":"quit"}
{"nick":"nodejs-gh","date":"2018-01-15T12:43:13.651Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T12:43:13.651Z","type":"part"}
{"nick":"nodejs-gh","date":"2018-01-15T12:43:49.276Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T12:43:49.379Z","type":"part"}
{"nick":"nodejs-gh","date":"2018-01-15T12:46:37.659Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T12:46:37.767Z","type":"part"}
{"nick":"nodejs-gh","date":"2018-01-15T12:55:56.268Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T12:55:56.335Z","type":"part"}
{"nick":"nodejs-gh","date":"2018-01-15T12:56:51.200Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T12:56:51.269Z","type":"part"}
{"nick":"nodejs-gh","date":"2018-01-15T13:02:38.753Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T13:02:38.822Z","type":"part"}
{"nick":"nodejs-gh","date":"2018-01-15T13:04:34.906Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T13:04:34.906Z","type":"part"}
{"nick":"AtumT","date":"2018-01-15T13:36:23.620Z","type":"join"}
{"nick":"nanoflite","date":"2018-01-15T13:38:04.964Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T13:38:53.544Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T13:38:53.612Z","type":"part"}
{"nick":"BridgeAR","date":"2018-01-15T13:45:18.879Z","type":"join"}
{"nick":"AtumT_","date":"2018-01-15T13:49:33.811Z","type":"join"}
{"nick":"AtumT","reason":"Ping timeout: 260 seconds","date":"2018-01-15T13:53:00.572Z","type":"quit"}
{"nick":"marthinal","reason":"Quit: This computer has gone to sleep","date":"2018-01-15T14:01:06.322Z","type":"quit"}
{"nick":"alweezy","reason":"Ping timeout: 256 seconds","date":"2018-01-15T14:01:39.594Z","type":"quit"}
{"nick":"AtumT_","reason":"Ping timeout: 276 seconds","date":"2018-01-15T14:04:05.858Z","type":"quit"}
{"nick":"nodejs-gh","date":"2018-01-15T14:05:17.806Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T14:05:17.911Z","type":"part"}
{"nick":"alweezy","date":"2018-01-15T14:09:12.615Z","type":"join"}
{"nick":"bradleymeck","date":"2018-01-15T14:18:02.241Z","type":"join"}
{"nick":"marthinal","date":"2018-01-15T14:20:01.739Z","type":"join"}
{"nick":"AtumT","date":"2018-01-15T14:24:27.771Z","type":"join"}
{"nick":"marthinal","reason":"Ping timeout: 268 seconds","date":"2018-01-15T14:25:06.631Z","type":"quit"}
{"nick":"nodejs-gh","date":"2018-01-15T14:26:56.501Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T14:26:56.582Z","type":"part"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2018-01-15T14:43:20.165Z","type":"quit"}
{"nick":"marthinal","date":"2018-01-15T14:51:38.147Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T15:04:11.238Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T15:04:11.307Z","type":"part"}
{"nick":"bradleymeck","date":"2018-01-15T15:07:06.530Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T15:16:51.630Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T15:16:51.735Z","type":"part"}
{"nick":"alweezy","reason":"Read error: Connection reset by peer","date":"2018-01-15T15:40:11.860Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2018-01-15T15:43:57.549Z","type":"quit"}
{"nick":"geoid","date":"2018-01-15T16:00:13.869Z","type":"join"}
{"nick":"rcs","reason":"Quit: ZNC - http://znc.in","date":"2018-01-15T16:17:15.768Z","type":"quit"}
{"nick":"nanoflite","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2018-01-15T16:17:38.493Z","type":"quit"}
{"nick":"Fishrock123","date":"2018-01-15T16:43:56.779Z","type":"join"}
{"nick":"qard","date":"2018-01-15T16:48:26.533Z","type":"join"}
{"nick":"seishun","date":"2018-01-15T16:52:58.516Z","type":"join"}
{"nick":"bradleymeck","date":"2018-01-15T16:55:47.789Z","type":"join"}
{"nick":"devsnek","message":"i need to stop making prs that get turned into tsc review items :(","date":"2018-01-15T17:06:22.841Z","type":"message"}
{"nick":"bradleymeck","message":"devsnek: ESM land is ecosystem level impact XD almost always going to be TSC","date":"2018-01-15T17:13:54.863Z","type":"message"}
{"nick":"bradleymeck","message":"working on landing your refactor right now","date":"2018-01-15T17:14:07.674Z","type":"message"}
{"nick":"devsnek","message":"o","date":"2018-01-15T17:14:11.969Z","type":"message"}
{"nick":"bradleymeck","message":"my laptop has been angry","date":"2018-01-15T17:14:13.419Z","type":"message"}
{"nick":"devsnek","message":"thx","date":"2018-01-15T17:14:14.071Z","type":"message"}
{"nick":"devsnek","message":"rip","date":"2018-01-15T17:15:01.651Z","type":"message"}
{"nick":"devsnek","message":"what laptop is it","date":"2018-01-15T17:15:05.117Z","type":"message"}
{"nick":"bradleymeck","message":"devsnek: macbook 19\" 2014","date":"2018-01-15T17:23:42.698Z","type":"message"}
{"nick":"bradleymeck","message":"15\"*","date":"2018-01-15T17:23:53.884Z","type":"message"}
{"nick":"bradleymeck","message":"how I wrote 19 will remain a mystery","date":"2018-01-15T17:24:02.583Z","type":"message"}
{"nick":"devsnek","message":"https://xkcd.com/1530/","date":"2018-01-15T17:25:12.471Z","type":"message"}
{"nick":"bradleymeck","message":"hehe","date":"2018-01-15T17:27:07.877Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit:  ","date":"2018-01-15T17:30:02.927Z","type":"quit"}
{"nick":"bradleymeck","date":"2018-01-15T17:44:06.521Z","type":"join"}
{"nick":"bradleymeck","message":"`out/Release/node --experimental-modules /Users/bfarias/Documents/node/test/message/esm_display_syntax_error.mjs` is failing for me on make test, anyone else seeing that?","date":"2018-01-15T17:44:47.949Z","type":"message"}
{"nick":"devsnek","message":"uhhh","date":"2018-01-15T17:45:20.390Z","type":"message"}
{"nick":"devsnek","message":"lemme pull and check","date":"2018-01-15T17:45:27.938Z","type":"message"}
{"nick":"devsnek","message":"i wish i had a proper computer to build node :(","date":"2018-01-15T17:53:43.684Z","type":"message"}
{"nick":"bradleymeck","message":"devsnek: i see the issue","date":"2018-01-15T18:05:44.765Z","type":"message"}
{"nick":"devsnek","message":"yea","date":"2018-01-15T18:05:47.580Z","type":"message"}
{"nick":"devsnek","message":"translators","date":"2018-01-15T18:05:51.173Z","type":"message"}
{"nick":"devsnek","message":"map name/file name changed","date":"2018-01-15T18:06:00.862Z","type":"message"}
{"nick":"devsnek","message":"my build literally just finished","date":"2018-01-15T18:06:12.414Z","type":"message"}
{"nick":"devsnek","message":":(","date":"2018-01-15T18:06:15.073Z","type":"message"}
{"nick":"devsnek","message":"you want me to fix it?","date":"2018-01-15T18:06:18.568Z","type":"message"}
{"nick":"bradleymeck","message":"yea","date":"2018-01-15T18:07:26.166Z","type":"message"}
{"nick":"devsnek","message":"i'm gonna rerun the tests with master rebased in rn anyway","date":"2018-01-15T18:07:28.030Z","type":"message"}
{"nick":"devsnek","message":"cooleo","date":"2018-01-15T18:07:29.582Z","type":"message"}
{"nick":"devsnek","message":"1sec","date":"2018-01-15T18:07:32.108Z","type":"message"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2018-01-15T18:08:22.047Z","type":"quit"}
{"nick":"bradleymeck","message":"thats fine to land w/o more review since it is just a rebase issue","date":"2018-01-15T18:08:54.473Z","type":"message"}
{"nick":"devsnek","message":"awesome","date":"2018-01-15T18:09:24.960Z","type":"message"}
{"nick":"mmarchini","message":"anyone knows if llnode or mdb_v8 work properly on arm architectures?","date":"2018-01-15T18:13:27.598Z","type":"message"}
{"nick":"devsnek","message":"try it and see :(","date":"2018-01-15T18:14:10.931Z","type":"message"}
{"nick":"devsnek","message":"i'll try on termux","date":"2018-01-15T18:14:33.476Z","type":"message"}
{"nick":"geoid","reason":"Quit: Lingo: www.lingoirc.com","date":"2018-01-15T18:16:53.838Z","type":"quit"}
{"nick":"devsnek","message":"hmm npm looks broken","date":"2018-01-15T18:17:25.986Z","type":"message"}
{"nick":"devsnek","message":"cannot read property length of undefined","date":"2018-01-15T18:17:34.248Z","type":"message"}
{"nick":"mmarchini","message":":(","date":"2018-01-15T18:17:34.872Z","type":"message"}
{"nick":"mmarchini","message":"I can try it tomorrow, I don't have access to an arm machine rn","date":"2018-01-15T18:17:50.510Z","type":"message"}
{"nick":"mmarchini","message":"I'm trying to fix a CI error on https://github.com/nodejs/node/pull/14901, which is only happening to some arm builds","date":"2018-01-15T18:19:08.310Z","type":"message"}
{"nick":"mmarchini","message":"but the errors are gone if I use the Debug build or if I insert a std::cout in some points of the code :(","date":"2018-01-15T18:20:05.806Z","type":"message"}
{"nick":"devsnek","message":"bradleymeck tests passing","date":"2018-01-15T18:27:05.329Z","type":"message"}
{"nick":"devsnek","message":"should be ready to land","date":"2018-01-15T18:27:12.579Z","type":"message"}
{"nick":"bradleymeck","message":"devsnek: rebasing locally","date":"2018-01-15T18:29:47.018Z","type":"message"}
{"nick":"devsnek","message":"👍🏻","date":"2018-01-15T18:29:57.232Z","type":"message"}
{"nick":"not-an-aardvark","date":"2018-01-15T18:36:01.698Z","type":"join"}
{"nick":"Fishrock123","date":"2018-01-15T18:40:01.771Z","type":"join"}
{"nick":"lpin","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2018-01-15T18:54:20.750Z","type":"quit"}
{"nick":"nodejs-gh","date":"2018-01-15T18:55:33.804Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T18:55:33.925Z","type":"part"}
{"nick":"bradleymeck","message":"devsnek: refactor landed","date":"2018-01-15T18:56:19.950Z","type":"message"}
{"nick":"nodejs-gh","date":"2018-01-15T18:56:27.435Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T18:56:27.503Z","type":"part"}
{"nick":"devsnek","message":"wooooo","date":"2018-01-15T18:56:43.623Z","type":"message"}
{"nick":"devsnek","message":"maybe my next project will be fixing that bot","date":"2018-01-15T18:57:01.442Z","type":"message"}
{"nick":"bradleymeck","message":"hah","date":"2018-01-15T18:57:58.054Z","type":"message"}
{"nick":"marthina_","date":"2018-01-15T18:59:54.866Z","type":"join"}
{"nick":"devsnek","message":"where is the source for that bot","date":"2018-01-15T19:01:50.043Z","type":"message"}
{"nick":"devsnek","message":"all i see is the source for the github tag bot","date":"2018-01-15T19:02:13.349Z","type":"message"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T19:05:56.416Z","type":"quit"}
{"nick":"marthina_","date":"2018-01-15T19:06:05.531Z","type":"join"}
{"nick":"qard","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2018-01-15T19:09:02.829Z","type":"quit"}
{"nick":"qard","date":"2018-01-15T19:13:27.651Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T19:13:57.936Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T19:13:57.936Z","type":"part"}
{"nick":"TimothyGu","message":"devsnek: something I realized is that the vm.Module link thing doesn't work","date":"2018-01-15T19:24:06.568Z","type":"message"}
{"nick":"TimothyGu","message":"(realized during sleep)","date":"2018-01-15T19:24:19.591Z","type":"message"}
{"nick":"devsnek","message":"o","date":"2018-01-15T19:24:32.601Z","type":"message"}
{"nick":"devsnek","message":"wdym","date":"2018-01-15T19:24:39.560Z","type":"message"}
{"nick":"TimothyGu","message":"right now it checks that the module returned from linker is either linked or linking","date":"2018-01-15T19:24:46.904Z","type":"message"}
{"nick":"TimothyGu","message":"linked is fine of course, but for linking","date":"2018-01-15T19:24:54.154Z","type":"message"}
{"nick":"devsnek","message":"why wouldn't that work","date":"2018-01-15T19:25:06.111Z","type":"message"}
{"nick":"devsnek","message":"module jobs do the same thing with that linked promise","date":"2018-01-15T19:25:14.270Z","type":"message"}
{"nick":"TimothyGu","message":"I could have a module that is being linked with mod.link(() => new Promise(() => { /* will never resolve */ }));","date":"2018-01-15T19:25:36.690Z","type":"message"}
{"nick":"TimothyGu","message":"so mod will be \"linking\" forever","date":"2018-01-15T19:25:44.214Z","type":"message"}
{"nick":"devsnek","message":"well that would break anything","date":"2018-01-15T19:25:46.252Z","type":"message"}
{"nick":"devsnek","message":"not just this","date":"2018-01-15T19:25:49.889Z","type":"message"}
{"nick":"TimothyGu","message":"yeah","date":"2018-01-15T19:25:52.986Z","type":"message"}
{"nick":"devsnek","message":"you can add a timeout option i guess","date":"2018-01-15T19:25:55.764Z","type":"message"}
{"nick":"TimothyGu","message":"no that's beyond the point","date":"2018-01-15T19:26:05.187Z","type":"message"}
{"nick":"devsnek","message":"but that seems high level","date":"2018-01-15T19:26:06.205Z","type":"message"}
{"nick":"TimothyGu","message":"the same problem can happen if I'm, say, trying to fetch something over a slow network","date":"2018-01-15T19:26:27.323Z","type":"message"}
{"nick":"TimothyGu","message":"so the parentMod's link() should wait until all of its child modules are linked","date":"2018-01-15T19:26:42.229Z","type":"message"}
{"nick":"TimothyGu","message":"Idk how to fix this, but ModuleJob should provide some clues","date":"2018-01-15T19:27:11.119Z","type":"message"}
{"nick":"devsnek","message":"i don't see the issue yet","date":"2018-01-15T19:27:14.652Z","type":"message"}
{"nick":"devsnek","message":"modulejob just does `await childdep.linked`","date":"2018-01-15T19:27:37.915Z","type":"message"}
{"nick":"TimothyGu","message":"there would be a case where the parent module is \"linked\" but the child module is \"linking\"","date":"2018-01-15T19:27:40.514Z","type":"message"}
{"nick":"TimothyGu","message":"yeah we don't have that await","date":"2018-01-15T19:27:52.418Z","type":"message"}
{"nick":"TimothyGu","message":"that's a problem","date":"2018-01-15T19:28:02.699Z","type":"message"}
{"nick":"devsnek","message":"well isn't that for the loader","date":"2018-01-15T19:28:02.699Z","type":"message"}
{"nick":"TimothyGu","message":"not really","date":"2018-01-15T19:28:06.235Z","type":"message"}
{"nick":"TimothyGu","message":"when the parent module is \"linked\" but the child module is \"linking\", when I try to instantiate the parent module I would get some weird error thrown from C++","date":"2018-01-15T19:28:50.903Z","type":"message"}
{"nick":"devsnek","message":"how about you just make link() only return one promise","date":"2018-01-15T19:28:53.751Z","type":"message"}
{"nick":"devsnek","message":"ever","date":"2018-01-15T19:28:57.175Z","type":"message"}
{"nick":"devsnek","message":"then you can await module.link() internally","date":"2018-01-15T19:29:03.129Z","type":"message"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2018-01-15T19:29:05.076Z","type":"quit"}
{"nick":"TimothyGu","message":"what I'm thinking is do the recursive link() in module.link","date":"2018-01-15T19:29:29.164Z","type":"message"}
{"nick":"devsnek","message":"basically what modulejob does","date":"2018-01-15T19:29:30.691Z","type":"message"}
{"nick":"Fishrock123","date":"2018-01-15T19:29:46.243Z","type":"join"}
{"nick":"TimothyGu","message":"pretty much","date":"2018-01-15T19:29:51.365Z","type":"message"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2018-01-15T19:29:54.210Z","type":"quit"}
{"nick":"TimothyGu","message":"in fact that would probably simplify implementations too","date":"2018-01-15T19:30:02.876Z","type":"message"}
{"nick":"devsnek","message":"go for it dude","date":"2018-01-15T19:30:17.673Z","type":"message"}
{"nick":"TimothyGu","message":"because https://gist.github.com/TimothyGu/3c5285d554dd1f8c333685475ad01613#file-jsdom-vm-module-js-L27-L29 wouldn't be necessary","date":"2018-01-15T19:30:27.922Z","type":"message"}
{"nick":"TimothyGu","message":"eventually we may as well just port ModuleJob to vm.Module","date":"2018-01-15T19:30:54.874Z","type":"message"}
{"nick":"marthinal","reason":"Quit: This computer has gone to sleep","date":"2018-01-15T19:31:32.426Z","type":"quit"}
{"nick":"devsnek","message":"i was actually thinking that","date":"2018-01-15T19:33:13.240Z","type":"message"}
{"nick":"devsnek","message":"last night","date":"2018-01-15T19:33:17.839Z","type":"message"}
{"nick":"bradleymeck","message":"TimothyGu: I'd advise against it w/o Realms API people","date":"2018-01-15T19:33:29.496Z","type":"message"}
{"nick":"devsnek","message":"against what","date":"2018-01-15T19:33:41.170Z","type":"message"}
{"nick":"devsnek","message":"port ModuleJob to vm.Module?","date":"2018-01-15T19:33:50.464Z","type":"message"}
{"nick":"bradleymeck","message":"ModuleJob as vm.ModuleJob","date":"2018-01-15T19:33:50.707Z","type":"message"}
{"nick":"bradleymeck","message":"ModuleJob has some things that are not mandated by spec","date":"2018-01-15T19:34:10.859Z","type":"message"}
{"nick":"devsnek","message":"when is that ses meeting btw","date":"2018-01-15T19:34:23.712Z","type":"message"}
{"nick":"qard","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2018-01-15T19:34:27.398Z","type":"quit"}
{"nick":"bradleymeck","message":"no clue at this point","date":"2018-01-15T19:34:35.913Z","type":"message"}
{"nick":"TimothyGu","message":"ok","date":"2018-01-15T19:34:41.392Z","type":"message"}
{"nick":"bradleymeck","message":"I'm so scattered with emails I'm not on it","date":"2018-01-15T19:34:43.247Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: https://gist.github.com/f02096b2f31d62a63e414fe283c8efac","date":"2018-01-15T19:37:05.986Z","type":"message"}
{"nick":"TimothyGu","message":"shows \"Error: linking error, dependency promises must be resolved on instantiate\" when executed","date":"2018-01-15T19:37:16.073Z","type":"message"}
{"nick":"devsnek","message":"why aren't you awaiting your linking","date":"2018-01-15T19:37:48.119Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: because I'm a clueless user","date":"2018-01-15T19:38:04.984Z","type":"message"}
{"nick":"devsnek","message":"oh","date":"2018-01-15T19:38:08.364Z","type":"message"}
{"nick":"devsnek","message":"ok","date":"2018-01-15T19:38:11.085Z","type":"message"}
{"nick":"devsnek","message":"so yea just also await that link job in topModule","date":"2018-01-15T19:38:19.377Z","type":"message"}
{"nick":"devsnek","message":"ez","date":"2018-01-15T19:38:25.880Z","type":"message"}
{"nick":"TimothyGu","message":"yup","date":"2018-01-15T19:38:41.060Z","type":"message"}
{"nick":"nodejs-gh","date":"2018-01-15T19:38:51.888Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T19:38:51.956Z","type":"part"}
{"nick":"devsnek","message":"seriously where is the source for that bot","date":"2018-01-15T19:39:25.960Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: https://github.com/nodejs/?utf8=%E2%9C%93&q=bot&type=&language=","date":"2018-01-15T19:40:30.617Z","type":"message"}
{"nick":"TimothyGu","message":"is that what you're looking for?","date":"2018-01-15T19:40:41.452Z","type":"message"}
{"nick":"devsnek","message":"thats the tag bot","date":"2018-01-15T19:40:41.941Z","type":"message"}
{"nick":"devsnek","message":"i mean the nodejs-gh bot that joins and leaves here","date":"2018-01-15T19:40:54.831Z","type":"message"}
{"nick":"devsnek","message":"without saying anything","date":"2018-01-15T19:40:57.219Z","type":"message"}
{"nick":"devsnek","message":"it used to say stuff","date":"2018-01-15T19:41:01.436Z","type":"message"}
{"nick":"TimothyGu","message":"oh","date":"2018-01-15T19:41:01.681Z","type":"message"}
{"nick":"devsnek","message":"is it part of github/github-services?","date":"2018-01-15T19:41:12.130Z","type":"message"}
{"nick":"TimothyGu","message":"most people here have it on ignored","date":"2018-01-15T19:41:14.670Z","type":"message"}
{"nick":"TimothyGu","message":"[nodejs-gh] (nodejs-gh@gateway/service/github.com/x-qgjdhurifggvrewv) was GitHub IRCBot - nodejs/node","date":"2018-01-15T19:41:49.439Z","type":"message"}
{"nick":"TimothyGu","message":"looks like it","date":"2018-01-15T19:42:14.747Z","type":"message"}
{"nick":"devsnek","message":"should just make a new bot tbh","date":"2018-01-15T19:42:50.232Z","type":"message"}
{"nick":"marthina_","reason":"Remote host closed the connection","date":"2018-01-15T19:45:31.255Z","type":"quit"}
{"nick":"nodejs-gh","date":"2018-01-15T19:45:35.628Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T19:45:35.697Z","type":"part"}
{"nick":"TimothyGu","message":"devsnek: do you think we should expose \"linked\" promise to the general populace?","date":"2018-01-15T19:57:02.558Z","type":"message"}
{"nick":"devsnek","message":"i was thinking noe","date":"2018-01-15T19:57:13.746Z","type":"message"}
{"nick":"devsnek","message":"no*","date":"2018-01-15T19:57:15.300Z","type":"message"}
{"nick":"TimothyGu","message":"ok","date":"2018-01-15T19:57:30.332Z","type":"message"}
{"nick":"devsnek","message":"actually it depends","date":"2018-01-15T19:57:30.697Z","type":"message"}
{"nick":"devsnek","message":"what does calling link a second time do","date":"2018-01-15T19:57:35.945Z","type":"message"}
{"nick":"TimothyGu","message":"throws an error","date":"2018-01-15T19:57:44.589Z","type":"message"}
{"nick":"devsnek","message":"in that case i'm not sure","date":"2018-01-15T19:58:04.180Z","type":"message"}
{"nick":"devsnek","message":"i would just make link() return the existing promise","date":"2018-01-15T19:58:40.692Z","type":"message"}
{"nick":"devsnek","message":"but i understand you want to enforce some semantics of calling link","date":"2018-01-15T19:58:52.286Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: I don't want to make a second link() return the existing promise","date":"2018-01-15T19:59:28.592Z","type":"message"}
{"nick":"TimothyGu","message":"the reasoning being what if the programmer pass different callbacks to link()?","date":"2018-01-15T19:59:44.305Z","type":"message"}
{"nick":"TimothyGu","message":"will the first one get used, or will the second take priority? They both return a valid Promise...","date":"2018-01-15T20:00:05.799Z","type":"message"}
{"nick":"devsnek","message":"yea","date":"2018-01-15T20:00:05.907Z","type":"message"}
{"nick":"devsnek","message":"well if the promise is properly handled internally","date":"2018-01-15T20:00:16.434Z","type":"message"}
{"nick":"devsnek","message":"it probably doesn't need to be exposed","date":"2018-01-15T20:00:22.900Z","type":"message"}
{"nick":"devsnek","message":"i dunno","date":"2018-01-15T20:00:29.319Z","type":"message"}
{"nick":"devsnek","message":"i'm trying to think of why someone would need it","date":"2018-01-15T20:00:45.040Z","type":"message"}
{"nick":"TimothyGu","message":"I'll hide it then","date":"2018-01-15T20:01:21.709Z","type":"message"}
{"nick":"TimothyGu","message":"I just realized we didn't really have a proper circular dep test for ESM","date":"2018-01-15T20:05:01.351Z","type":"message"}
{"nick":"TimothyGu","message":"I'll see if test262 has any complex module graphs I can use to test","date":"2018-01-15T20:05:35.256Z","type":"message"}
{"nick":"devsnek","message":"afaik it just has the one simple circular","date":"2018-01-15T20:08:08.583Z","type":"message"}
{"nick":"TimothyGu","message":":(","date":"2018-01-15T20:11:15.241Z","type":"message"}
{"nick":"TimothyGu","message":"I want bigger, badder circular","date":"2018-01-15T20:11:19.972Z","type":"message"}
{"nick":"ljharb","message":"lol i want eslint-plugin-import to have a linter rule that forbids circular deps","date":"2018-01-15T20:13:38.178Z","type":"message"}
{"nick":"devsnek","message":"circular deps are usually ok","date":"2018-01-15T20:14:01.670Z","type":"message"}
{"nick":"devsnek","message":"unless its a circular export","date":"2018-01-15T20:14:06.965Z","type":"message"}
{"nick":"devsnek","message":"if thats what you mean","date":"2018-01-15T20:14:11.261Z","type":"message"}
{"nick":"ljharb","message":"nah, i want them stricken from my codebase","date":"2018-01-15T20:16:55.550Z","type":"message"}
{"nick":"ljharb","message":"imo circular deps are a symptom of subpar code organization","date":"2018-01-15T20:17:12.660Z","type":"message"}
{"nick":"ljharb","message":"they also make import ordering important, which makes refactoring more risky","date":"2018-01-15T20:17:41.925Z","type":"message"}
{"nick":"ljharb","message":"(node and test262 both still need lots of tests for it, ofc)","date":"2018-01-15T20:20:14.941Z","type":"message"}
{"nick":"qard","date":"2018-01-15T20:24:29.545Z","type":"join"}
{"nick":"TimothyGu","message":"const badPromise = new Promise(() => {}); (async () => { await badPromise; })();","date":"2018-01-15T20:24:35.430Z","type":"message"}
{"nick":"TimothyGu","message":"^^ apparently that directly exists in node","date":"2018-01-15T20:24:47.218Z","type":"message"}
{"nick":"TimothyGu","message":"hiding countless bugs :(","date":"2018-01-15T20:24:54.757Z","type":"message"}
{"nick":"TimothyGu","message":"exits!","date":"2018-01-15T20:24:59.376Z","type":"message"}
{"nick":"devsnek","message":"i'm just afraid of all the code paths that get killed if someone returns an object with `then`","date":"2018-01-15T20:25:11.269Z","type":"message"}
{"nick":"TimothyGu","message":"bradleymeck loves thenables","date":"2018-01-15T20:25:31.449Z","type":"message"}
{"nick":"bradleymeck","message":"TimothyGu: thenables are safer than Promises sadly","date":"2018-01-15T20:25:43.084Z","type":"message"}
{"nick":"devsnek","message":"i don't understand","date":"2018-01-15T20:25:48.594Z","type":"message"}
{"nick":"devsnek","message":"who came up with it","date":"2018-01-15T20:25:50.493Z","type":"message"}
{"nick":"devsnek","message":"i can't understand how they help anything","date":"2018-01-15T20:25:55.812Z","type":"message"}
{"nick":"TimothyGu","message":"history","date":"2018-01-15T20:26:01.273Z","type":"message"}
{"nick":"bradleymeck","message":"they?","date":"2018-01-15T20:26:02.314Z","type":"message"}
{"nick":"devsnek","message":"thenables","date":"2018-01-15T20:26:05.635Z","type":"message"}
{"nick":"devsnek","message":"they seem to just break everything","date":"2018-01-15T20:26:13.084Z","type":"message"}
{"nick":"TimothyGu","message":"it started with jQuery","date":"2018-01-15T20:26:20.289Z","type":"message"}
{"nick":"TimothyGu","message":"I think","date":"2018-01-15T20:26:27.618Z","type":"message"}
{"nick":"devsnek","message":":(","date":"2018-01-15T20:26:30.222Z","type":"message"}
{"nick":"TimothyGu","message":"do you know about the Promise/A+ spec","date":"2018-01-15T20:26:38.975Z","type":"message"}
{"nick":"devsnek","message":"something something we want a+","date":"2018-01-15T20:26:42.290Z","type":"message"}
{"nick":"devsnek","message":"yea i do","date":"2018-01-15T20:26:47.484Z","type":"message"}
{"nick":"bradleymeck","message":"devsnek: people wanted to integrate with A+ implementation","date":"2018-01-15T20:26:48.910Z","type":"message"}
{"nick":"bradleymeck","message":"that was fine","date":"2018-01-15T20:26:59.701Z","type":"message"}
{"nick":"bradleymeck","message":"but... they made Promises and Promise.prototype.then exposed as mutable","date":"2018-01-15T20:27:20.378Z","type":"message"}
{"nick":"bradleymeck","message":"which leaked everywhere and continues to be taint","date":"2018-01-15T20:27:29.241Z","type":"message"}
{"nick":"bradleymeck","message":"part of why I'm so paranoid these days","date":"2018-01-15T20:27:36.186Z","type":"message"}
{"nick":"bradleymeck","message":"ironically... thenables can ensure avoiding side channel mutation since you can `await {then() {}}`","date":"2018-01-15T20:28:11.351Z","type":"message"}
{"nick":"devsnek","message":"i don't want to await { then() {} }","date":"2018-01-15T20:28:25.918Z","type":"message"}
{"nick":"devsnek","message":":(","date":"2018-01-15T20:28:31.762Z","type":"message"}
{"nick":"bradleymeck","message":"and be 100% sure what the `then` does, unfortunately thats not enough cause Promises auto unbox","date":"2018-01-15T20:28:36.908Z","type":"message"}
{"nick":"TimothyGu","message":"https://twitter.com/Timothy_Gu/status/941896701425500160","date":"2018-01-15T20:28:37.061Z","type":"message"}
{"nick":"bradleymeck","message":"soo with unboxing you need to fulfill to a non-thenable even if you await a thenable","date":"2018-01-15T20:28:55.292Z","type":"message"}
{"nick":"TimothyGu","message":"hence `return { result, __proto__: null}`","date":"2018-01-15T20:29:25.907Z","type":"message"}
{"nick":"bradleymeck","message":"yes","date":"2018-01-15T20:29:30.439Z","type":"message"}
{"nick":"devsnek","message":"i don't understand why things hang if the then doesn't return a promise though","date":"2018-01-15T20:29:35.760Z","type":"message"}
{"nick":"devsnek","message":"thats the weird nonsensical thing","date":"2018-01-15T20:29:42.427Z","type":"message"}
{"nick":"bradleymeck","message":"devsnek: they hang because the spec works on thenables not a nominal type","date":"2018-01-15T20:30:14.085Z","type":"message"}
{"nick":"bradleymeck","message":"so .then needs to call its resolver function to reject or fulfill","date":"2018-01-15T20:30:32.869Z","type":"message"}
{"nick":"bradleymeck","message":"but .then is also exposed with same name as a prototype method that does something different because of A+ integration","date":"2018-01-15T20:31:05.433Z","type":"message"}
{"nick":"bradleymeck","message":"pretty much it is all chaos and nightmares because you don't know how any random thenable you are given will act","date":"2018-01-15T20:31:43.589Z","type":"message"}
{"nick":"bradleymeck","message":"so you have to make your own","date":"2018-01-15T20:31:58.106Z","type":"message"}
{"nick":"devsnek","message":"this just feels like one of those things like `with` that people will look back on and go \"wtf was going on that made this happen\"","date":"2018-01-15T20:32:08.473Z","type":"message"}
{"nick":"ljharb","message":"and the answer will be \"the web\"","date":"2018-01-15T20:33:01.514Z","type":"message"}
{"nick":"devsnek","message":"damn internet","date":"2018-01-15T20:33:38.442Z","type":"message"}
{"nick":"TimothyGu","message":"alright, seems like I encountered an infinite loop in linking","date":"2018-01-15T20:33:51.995Z","type":"message"}
{"nick":"devsnek","message":"nice","date":"2018-01-15T20:33:57.144Z","type":"message"}
{"nick":"TimothyGu","message":"and because everything is promisified Node.js is being very unhelpful","date":"2018-01-15T20:34:07.231Z","type":"message"}
{"nick":"TimothyGu","message":"by exiting rather than throwing a stack overflow error","date":"2018-01-15T20:34:25.746Z","type":"message"}
{"nick":"TimothyGu","message":"(promises are deadlocked)","date":"2018-01-15T20:34:42.940Z","type":"message"}
{"nick":"devsnek","message":"send code","date":"2018-01-15T20:34:49.578Z","type":"message"}
{"nick":"TimothyGu","message":"https://gist.github.com/301c233d02acbca1d335f1a3d65eb79c","date":"2018-01-15T20:35:18.668Z","type":"message"}
{"nick":"devsnek","message":"if we ever switch from irc like that issue asks lets please choose something that supports codeblocks","date":"2018-01-15T20:35:19.646Z","type":"message"}
{"nick":"evanlucas","message":"omg yes please","date":"2018-01-15T20:35:30.142Z","type":"message"}
{"nick":"TimothyGu","message":"discord!","date":"2018-01-15T20:35:37.423Z","type":"message"}
{"nick":"devsnek","message":"why is this a defered","date":"2018-01-15T20:35:52.830Z","type":"message"}
{"nick":"devsnek","message":"just make it the actual promise","date":"2018-01-15T20:36:14.708Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: if you run test/parallel/test-vm-module-link.js you'll see that the \"here\" never gets printed","date":"2018-01-15T20:36:16.562Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: it is an actual promise. but we have to initialize it at creation, and resolve it during linking","date":"2018-01-15T20:36:38.110Z","type":"message"}
{"nick":"ljharb","message":"devsnek: just use irccloud :-p","date":"2018-01-15T20:37:10.005Z","type":"message"}
{"nick":"devsnek","message":"muny","date":"2018-01-15T20:37:18.594Z","type":"message"}
{"nick":"devsnek","message":"am just a poor student","date":"2018-01-15T20:37:27.501Z","type":"message"}
{"nick":"TimothyGu","message":"bearded unix guys survived on emacs and pastebin for decades. we can too.","date":"2018-01-15T20:37:57.258Z","type":"message"}
{"nick":"devsnek","message":"hey tim if you push what you've got minus the link promise changes i can take a whack at it","date":"2018-01-15T20:38:16.261Z","type":"message"}
{"nick":"TimothyGu","message":"I did","date":"2018-01-15T20:38:21.090Z","type":"message"}
{"nick":"devsnek","message":"o","date":"2018-01-15T20:38:24.172Z","type":"message"}
{"nick":"devsnek","message":"cool","date":"2018-01-15T20:38:26.112Z","type":"message"}
{"nick":"TimothyGu","message":"that's the diff on top of current branch","date":"2018-01-15T20:38:29.184Z","type":"message"}
{"nick":"devsnek","message":"alright i'll test this out","date":"2018-01-15T20:38:49.441Z","type":"message"}
{"nick":"devsnek","message":"actually brb","date":"2018-01-15T20:38:53.927Z","type":"message"}
{"nick":"TimothyGu","message":"ModuleJob's linker has two await stages","date":"2018-01-15T20:39:23.881Z","type":"message"}
{"nick":"TimothyGu","message":"that might be why it's not running into this problem","date":"2018-01-15T20:39:37.489Z","type":"message"}
{"nick":"nanoflite","date":"2018-01-15T20:46:32.520Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 248 seconds","date":"2018-01-15T20:47:59.860Z","type":"quit"}
{"nick":"Fishrock123","date":"2018-01-15T20:54:13.184Z","type":"join"}
{"nick":"Fishrock123","reason":"Ping timeout: 255 seconds","date":"2018-01-15T20:58:38.231Z","type":"quit"}
{"nick":"nanoflite","reason":"Ping timeout: 256 seconds","date":"2018-01-15T21:01:21.389Z","type":"quit"}
{"nick":"marthinal","date":"2018-01-15T21:08:36.859Z","type":"join"}
{"nick":"marthinal","reason":"Ping timeout: 256 seconds","date":"2018-01-15T21:13:08.804Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2018-01-15T21:17:53.737Z","type":"quit"}
{"nick":"seishun","date":"2018-01-15T21:23:20.526Z","type":"join"}
{"nick":"evanlucas","reason":"Remote host closed the connection","date":"2018-01-15T21:40:05.435Z","type":"quit"}
{"nick":"seishun","reason":"Ping timeout: 256 seconds","date":"2018-01-15T21:50:17.679Z","type":"quit"}
{"nick":"qard","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2018-01-15T22:02:01.007Z","type":"quit"}
{"nick":"qard","date":"2018-01-15T22:04:53.754Z","type":"join"}
{"nick":"qard","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2018-01-15T22:13:58.100Z","type":"quit"}
{"nick":"qard","date":"2018-01-15T22:15:04.820Z","type":"join"}
{"nick":"devsnek","message":"i have returned","date":"2018-01-15T22:31:11.260Z","type":"message"}
{"nick":"devsnek","message":"TimothyGu i was going to say you should use createPromise/promiseResolve/promiseReject","date":"2018-01-15T22:31:26.173Z","type":"message"}
{"nick":"devsnek","message":"since that seems to be the general pattern in the code","date":"2018-01-15T22:31:37.215Z","type":"message"}
{"nick":"devsnek","message":"core*","date":"2018-01-15T22:31:38.642Z","type":"message"}
{"nick":"devsnek","message":"one of the tests is failing but the trace is useless","date":"2018-01-15T22:46:38.998Z","type":"message"}
{"nick":"devsnek","message":"the vm-modules flag got killed too?","date":"2018-01-15T22:48:02.307Z","type":"message"}
{"nick":"TimothyGu","message":"devsnek: did i kill it?","date":"2018-01-15T22:48:29.031Z","type":"message"}
{"nick":"TimothyGu","message":"seems like I did","date":"2018-01-15T22:48:32.708Z","type":"message"}
{"nick":"devsnek","message":"uh","date":"2018-01-15T22:48:34.868Z","type":"message"}
{"nick":"devsnek","message":"yea","date":"2018-01-15T22:48:37.091Z","type":"message"}
{"nick":"devsnek","message":"you replaced it with experimental modules","date":"2018-01-15T22:48:42.135Z","type":"message"}
{"nick":"TimothyGu","message":"o","date":"2018-01-15T22:48:42.634Z","type":"message"}
{"nick":"devsnek","message":"which is probably not good","date":"2018-01-15T22:48:51.302Z","type":"message"}
{"nick":"TimothyGu","message":"do we want separate flags for them?","date":"2018-01-15T22:48:51.555Z","type":"message"}
{"nick":"devsnek","message":"and kills one of the tests","date":"2018-01-15T22:48:54.683Z","type":"message"}
{"nick":"devsnek","message":"someone asked for a separate flg","date":"2018-01-15T22:48:59.288Z","type":"message"}
{"nick":"devsnek","message":"i dunno","date":"2018-01-15T22:49:01.481Z","type":"message"}
{"nick":"TimothyGu","message":"it's probably me","date":"2018-01-15T22:49:06.344Z","type":"message"}
{"nick":"devsnek","message":"anyway the bigger issue","date":"2018-01-15T22:49:17.701Z","type":"message"}
{"nick":"TimothyGu","message":"which test is broken?","date":"2018-01-15T22:49:26.968Z","type":"message"}
{"nick":"devsnek","message":"one of the tests throws MODULE_NOT_MODULE","date":"2018-01-15T22:49:29.705Z","type":"message"}
{"nick":"devsnek","message":"but the stack trace","date":"2018-01-15T22:49:32.784Z","type":"message"}
{"nick":"devsnek","message":"is useless","date":"2018-01-15T22:49:34.481Z","type":"message"}
{"nick":"TimothyGu","message":"you need async stack trace","date":"2018-01-15T22:49:42.140Z","type":"message"}
{"nick":"TimothyGu","message":"which is provided with --inspect-brk","date":"2018-01-15T22:49:48.817Z","type":"message"}
{"nick":"devsnek","message":"o","date":"2018-01-15T22:49:52.614Z","type":"message"}
{"nick":"devsnek","message":"thats a pain","date":"2018-01-15T22:50:02.528Z","type":"message"}
{"nick":"TimothyGu","message":"also are you testing on the latest pushed tree or is there local modification","date":"2018-01-15T22:50:08.504Z","type":"message"}
{"nick":"devsnek","message":"i added some code for link promises","date":"2018-01-15T22:50:26.792Z","type":"message"}
{"nick":"devsnek","message":"but nothing that would break the test","date":"2018-01-15T22:50:32.034Z","type":"message"}
{"nick":"devsnek","message":"https://gist.github.com/devsnek/d8273b319f55815413915583876518d5","date":"2018-01-15T22:51:17.403Z","type":"message"}
{"nick":"devsnek","message":"this is all i did","date":"2018-01-15T22:51:19.638Z","type":"message"}
{"nick":"TimothyGu","message":"that probably broke the test","date":"2018-01-15T22:51:59.438Z","type":"message"}
{"nick":"devsnek","message":"how would it trigger module not module","date":"2018-01-15T22:52:17.015Z","type":"message"}
{"nick":"TimothyGu","message":"s/proba/possi/","date":"2018-01-15T22:52:18.399Z","type":"message"}
{"nick":"devsnek","message":"i'll remove the changes and try again","date":"2018-01-15T22:52:53.586Z","type":"message"}
{"nick":"devsnek","message":"ok yea thats weird","date":"2018-01-15T22:53:10.786Z","type":"message"}
{"nick":"devsnek","message":"passed","date":"2018-01-15T22:53:15.723Z","type":"message"}
{"nick":"devsnek","message":"except the test that wants --vm-modules","date":"2018-01-15T22:53:35.258Z","type":"message"}
{"nick":"devsnek","message":"ok so adding the promiseReject line makes MODULE_NOT_MODULE throw","date":"2018-01-15T22:58:21.546Z","type":"message"}
{"nick":"TimothyGu","message":"lol my blind guess","date":"2018-01-15T22:58:41.356Z","type":"message"}
{"nick":"john51","reason":"Ping timeout: 255 seconds","date":"2018-01-15T22:59:14.490Z","type":"quit"}
{"nick":"john51","date":"2018-01-15T23:00:36.529Z","type":"join"}
{"nick":"devsnek","message":"how do i get through all this stepping through node internals","date":"2018-01-15T23:01:37.699Z","type":"message"}
{"nick":"devsnek","message":"i don't want to step through async hooks source","date":"2018-01-15T23:01:43.284Z","type":"message"}
{"nick":"john51","reason":"Read error: Connection reset by peer","date":"2018-01-15T23:02:17.817Z","type":"quit"}
{"nick":"TimothyGu","message":"you can enable blackboxing","date":"2018-01-15T23:02:20.590Z","type":"message"}
{"nick":"TimothyGu","message":"I've never tried it so idk how well it works","date":"2018-01-15T23:02:35.087Z","type":"message"}
{"nick":"bradleymeck","date":"2018-01-15T23:03:59.126Z","type":"join"}
{"nick":"devsnek","message":"i put a `debugger` statement in","date":"2018-01-15T23:04:33.347Z","type":"message"}
{"nick":"devsnek","message":"it didn't break","date":"2018-01-15T23:04:35.929Z","type":"message"}
{"nick":"TimothyGu","message":"okay you know what, I give up on that","date":"2018-01-15T23:04:55.103Z","type":"message"}
{"nick":"TimothyGu","message":"if the user calls instantiate before every child module finishes linking, it's their fault","date":"2018-01-15T23:05:14.685Z","type":"message"}
{"nick":"devsnek","message":"oh nvm here we go","date":"2018-01-15T23:05:16.269Z","type":"message"}
{"nick":"devsnek","message":"lol","date":"2018-01-15T23:05:18.806Z","type":"message"}
{"nick":"devsnek","message":"no i will figure this out","date":"2018-01-15T23:05:23.458Z","type":"message"}
{"nick":"TimothyGu","message":"the only algorithm to do this seems to be a DFS","date":"2018-01-15T23:05:35.662Z","type":"message"}
{"nick":"john51","date":"2018-01-15T23:05:38.300Z","type":"join"}
{"nick":"TimothyGu","message":"basically the same algorithm for Instantiate in https://tc39.github.io/ecma262/#sec-innermoduleinstantiation","date":"2018-01-15T23:05:56.194Z","type":"message"}
{"nick":"TimothyGu","message":"but that doesn't work for async, because we don't know how many modules a particular submodule has until it gives it back to us","date":"2018-01-15T23:06:27.058Z","type":"message"}
{"nick":"TimothyGu","message":"(referring to step 9.a-b","date":"2018-01-15T23:06:44.362Z","type":"message"}
{"nick":"TimothyGu","message":")","date":"2018-01-15T23:06:47.605Z","type":"message"}
{"nick":"TimothyGu","message":"and also, such instantiate errors are recoverable (the user can call instantiate() again after such errors was thrown from C++, because we check validity of a module graph before passing it to C++)","date":"2018-01-15T23:07:46.011Z","type":"message"}
{"nick":"TimothyGu","message":"*before passing it to V8","date":"2018-01-15T23:07:59.744Z","type":"message"}
{"nick":"devsnek","message":"it died on checkExecution","date":"2018-01-15T23:08:23.094Z","type":"message"}
{"nick":"devsnek","message":"gonna just console.trace","date":"2018-01-15T23:10:30.815Z","type":"message"}
{"nick":"TimothyGu","message":"BTW console.trace is also synchronous","date":"2018-01-15T23:10:55.227Z","type":"message"}
{"nick":"nodejs-gh","date":"2018-01-15T23:11:23.166Z","type":"join"}
{"nick":"nodejs-gh","date":"2018-01-15T23:11:23.166Z","type":"part"}
{"nick":"devsnek","message":"ik","date":"2018-01-15T23:12:01.462Z","type":"message"}
{"nick":"devsnek","message":"ok something linky is just getting `{}`","date":"2018-01-15T23:12:32.739Z","type":"message"}
{"nick":"devsnek","message":"instead of a module","date":"2018-01-15T23:12:36.284Z","type":"message"}
{"nick":"devsnek","message":"that seems suspecious","date":"2018-01-15T23:12:41.845Z","type":"message"}
{"nick":"ljharb","message":"that's always what happens with a circular dep breakage","date":"2018-01-15T23:13:46.498Z","type":"message"}
{"nick":"TimothyGu","message":"yup","date":"2018-01-15T23:14:01.772Z","type":"message"}
{"nick":"devsnek","message":"no i mean the module object","date":"2018-01-15T23:14:11.358Z","type":"message"}
{"nick":"devsnek","message":"our module object","date":"2018-01-15T23:14:14.544Z","type":"message"}
{"nick":"devsnek","message":"one of the link callback calls with that","date":"2018-01-15T23:14:30.698Z","type":"message"}
{"nick":"TimothyGu","message":"hmm","date":"2018-01-15T23:14:38.721Z","type":"message"}
{"nick":"TimothyGu","message":"anyway, my conclusion is that the waiting-for-linking solution doesn't work for circularity at all","date":"2018-01-15T23:15:10.388Z","type":"message"}
{"nick":"devsnek","message":"alright","date":"2018-01-15T23:15:18.318Z","type":"message"}
{"nick":"not-an-aardvark","reason":"Quit: Connection closed for inactivity","date":"2018-01-15T23:15:41.442Z","type":"quit"}
{"nick":"TimothyGu","message":"you want an explanation?","date":"2018-01-15T23:15:50.099Z","type":"message"}
{"nick":"devsnek","message":"for my weird thing?","date":"2018-01-15T23:16:49.165Z","type":"message"}
{"nick":"devsnek","message":"sure","date":"2018-01-15T23:17:02.307Z","type":"message"}
{"nick":"devsnek","message":"i can't figure it out at all","date":"2018-01-15T23:17:07.843Z","type":"message"}
{"nick":"TimothyGu","message":"no for why waiting-for-linking doesn't work for circularity","date":"2018-01-15T23:17:12.033Z","type":"message"}
{"nick":"devsnek","message":"h","date":"2018-01-15T23:17:14.460Z","type":"message"}
{"nick":"devsnek","message":"oh","date":"2018-01-15T23:17:16.522Z","type":"message"}
{"nick":"devsnek","message":":(","date":"2018-01-15T23:17:18.503Z","type":"message"}
{"nick":"TimothyGu","message":"okay here i go","date":"2018-01-15T23:17:39.954Z","type":"message"}
{"nick":"TimothyGu","message":"suppose there're a module A that imports B, and module B that imports A","date":"2018-01-15T23:17:55.499Z","type":"message"}
{"nick":"devsnek","message":"right","date":"2018-01-15T23:17:59.684Z","type":"message"}
{"nick":"TimothyGu","message":"when I try to link A, my linker function gets called with B","date":"2018-01-15T23:18:10.416Z","type":"message"}
{"nick":"devsnek","message":"right","date":"2018-01-15T23:18:25.130Z","type":"message"}
{"nick":"TimothyGu","message":"I try to link B, but *its* linker function gets called with A","date":"2018-01-15T23:18:37.260Z","type":"message"}
{"nick":"devsnek","message":"right","date":"2018-01-15T23:18:43.743Z","type":"message"}
{"nick":"TimothyGu","message":"now both A and B are in the state \"linking\"","date":"2018-01-15T23:18:48.203Z","type":"message"}
{"nick":"devsnek","message":"so now they are both waiting for the other's promise","date":"2018-01-15T23:18:53.591Z","type":"message"}
{"nick":"TimothyGu","message":"but neither will advance from \"linking\"","date":"2018-01-15T23:18:55.134Z","type":"message"}
{"nick":"TimothyGu","message":"yup","date":"2018-01-15T23:18:56.433Z","type":"message"}
{"nick":"devsnek","message":"lets just go back to syncronous module systems","date":"2018-01-15T23:19:22.226Z","type":"message"}
{"nick":"ljharb","message":"when you say \"linker function\", is that some node internal thing?","date":"2018-01-15T23:19:34.730Z","type":"message"}
{"nick":"devsnek","message":"no","date":"2018-01-15T23:19:38.264Z","type":"message"}
{"nick":"ljharb","message":"my understanding is that the entire graph is determined prior to evaluating any code","date":"2018-01-15T23:19:45.364Z","type":"message"}
{"nick":"devsnek","message":"its an async function that the user specifies","date":"2018-01-15T23:19:53.351Z","type":"message"}
{"nick":"devsnek","message":"which returns a vm.Module","date":"2018-01-15T23:19:57.055Z","type":"message"}
{"nick":"TimothyGu","message":"ljharb: it's basically our equivalent to HostResolveImportedModule","date":"2018-01-15T23:19:59.121Z","type":"message"}
{"nick":"TimothyGu","message":"but different, in that it's asynchronous","date":"2018-01-15T23:20:05.260Z","type":"message"}
{"nick":"ljharb","message":"so even modelling it with promises, every import of \"A\" would be represented by the *same* promise","date":"2018-01-15T23:20:09.184Z","type":"message"}
{"nick":"devsnek","message":"thats what i was about to suggest","date":"2018-01-15T23:20:19.277Z","type":"message"}
{"nick":"ljharb","message":"via a map of normalized path → promise","date":"2018-01-15T23:20:28.516Z","type":"message"}
{"nick":"TimothyGu","message":"*that* would require a module map","date":"2018-01-15T23:20:31.839Z","type":"message"}
{"nick":"devsnek","message":"we're just making modules here","date":"2018-01-15T23:20:39.113Z","type":"message"}
{"nick":"ljharb","message":"yes, i'm reasonably sure you can't avoid a module map","date":"2018-01-15T23:20:41.037Z","type":"message"}
{"nick":"devsnek","message":"basically we just have to hope that people link properly then","date":"2018-01-15T23:20:48.335Z","type":"message"}
{"nick":"devsnek","message":"right?","date":"2018-01-15T23:20:49.429Z","type":"message"}
{"nick":"ljharb","message":"i'm even reasonably sure that the spec effectively requires a module map, but bradleymeck can correct me if i'm wrong","date":"2018-01-15T23:21:05.526Z","type":"message"}
{"nick":"devsnek","message":"what you said before about being a clueless user, time","date":"2018-01-15T23:21:11.704Z","type":"message"}
{"nick":"devsnek","message":"tim*","date":"2018-01-15T23:21:20.689Z","type":"message"}
{"nick":"TimothyGu","message":"Yeah, I don't really want to bundle an implementation of module map","date":"2018-01-15T23:21:22.380Z","type":"message"}
{"nick":"bradleymeck","message":"ljharb: they require a local module map, not per realm","date":"2018-01-15T23:21:23.681Z","type":"message"}
{"nick":"bradleymeck","message":"per module record*","date":"2018-01-15T23:21:32.024Z","type":"message"}
{"nick":"ljharb","message":"like, per entry point?","date":"2018-01-15T23:21:45.634Z","type":"message"}
{"nick":"devsnek","message":"we could bind a module map to each conext","date":"2018-01-15T23:21:47.255Z","type":"message"}
{"nick":"devsnek","message":"and go back to having vm.Module.Context","date":"2018-01-15T23:21:52.784Z","type":"message"}
{"nick":"devsnek","message":":(","date":"2018-01-15T23:21:54.411Z","type":"message"}
{"nick":"devsnek","message":"but at that point","date":"2018-01-15T23:22:09.467Z","type":"message"}
{"nick":"TimothyGu","message":"ljharb: per module graph, if I understand correctly","date":"2018-01-15T23:22:30.131Z","type":"message"}
{"nick":"ljharb","message":"TimothyGu: right, ok - effectively that seems like \"entry point\" also to me :-)","date":"2018-01-15T23:22:50.302Z","type":"message"}
{"nick":"TimothyGu","message":"see the third invariant of https://tc39.github.io/ecma262/#sec-hostresolveimportedmodule","date":"2018-01-15T23:22:52.062Z","type":"message"}
{"nick":"devsnek","message":"yea we would want to have multiple module graphs running here","date":"2018-01-15T23:22:52.225Z","type":"message"}
{"nick":"devsnek","message":"for whatever a user is trying to do","date":"2018-01-15T23:23:02.866Z","type":"message"}
{"nick":"ljharb","message":"in a node process tho, how do you ever have more than one (pre-dynamic-import)?","date":"2018-01-15T23:23:08.660Z","type":"message"}
{"nick":"devsnek","message":"node itself only has one","date":"2018-01-15T23:23:24.134Z","type":"message"}
{"nick":"ljharb","message":"user code would too tho","date":"2018-01-15T23:23:33.793Z","type":"message"}
{"nick":"devsnek","message":"for vm modules?","date":"2018-01-15T23:23:44.898Z","type":"message"}
{"nick":"ljharb","message":"ah, right, ok","date":"2018-01-15T23:23:51.032Z","type":"message"}
{"nick":"ljharb","message":"so then yeah, only one outside of a vm, and one per vm","date":"2018-01-15T23:24:01.089Z","type":"message"}
{"nick":"ljharb","message":"and each `import()` would create a new graph once that's available","date":"2018-01-15T23:24:06.672Z","type":"message"}
{"nick":"TimothyGu","message":"ljharb: the goal is to allow multiple module graphs in the same realm","date":"2018-01-15T23:24:28.599Z","type":"message"}
{"nick":"devsnek","message":"ideally we could let the user create as many graphs as they want and bind vm modules to them","date":"2018-01-15T23:24:29.776Z","type":"message"}
{"nick":"ljharb","message":"TimothyGu: how would that be possible tho","date":"2018-01-15T23:24:39.452Z","type":"message"}
{"nick":"TimothyGu","message":"import() notwithstanding","date":"2018-01-15T23:24:43.989Z","type":"message"}
{"nick":"ljharb","message":"TimothyGu: in browsers it's via <script> but node doesn't have that","date":"2018-01-15T23:24:45.906Z","type":"message"}
{"nick":"ljharb","message":"devsnek: create how?","date":"2018-01-15T23:24:53.496Z","type":"message"}
{"nick":"devsnek","message":"i dunno","date":"2018-01-15T23:24:58.991Z","type":"message"}
{"nick":"devsnek","message":"tbd","date":"2018-01-15T23:25:02.363Z","type":"message"}
{"nick":"ljharb","message":"lol","date":"2018-01-15T23:25:07.650Z","type":"message"}
{"nick":"devsnek","message":"thats why we're having this convo","date":"2018-01-15T23:25:09.589Z","type":"message"}
{"nick":"ljharb","message":"seems worth d-ing before worrying about the implementation, no?","date":"2018-01-15T23:25:14.813Z","type":"message"}
{"nick":"TimothyGu","message":"ljharb: I don't really get the question","date":"2018-01-15T23:25:29.058Z","type":"message"}
{"nick":"ljharb","message":"also seems like something that tc39 probably wants to have a hand in","date":"2018-01-15T23:25:31.398Z","type":"message"}
{"nick":"devsnek","message":"i feel like theres a communication breakdown somewhere","date":"2018-01-15T23:25:51.090Z","type":"message"}
{"nick":"ljharb","message":"TimothyGu: i'm saying that i don't see any way within a single realm, in node, to have more than one module graph (prior to import() )","date":"2018-01-15T23:25:52.726Z","type":"message"}
{"nick":"TimothyGu","message":"ljharb: yeah, not for node proper","date":"2018-01-15T23:26:05.981Z","type":"message"}
{"nick":"ljharb","message":"iow: modulo `import()` and `vm`, there is only ever one module graph in a node process","date":"2018-01-15T23:26:07.386Z","type":"message"}
{"nick":"TimothyGu","message":"yup","date":"2018-01-15T23:26:13.641Z","type":"message"}
{"nick":"TimothyGu","message":"that's where vm.Module comes in","date":"2018-01-15T23:26:36.254Z","type":"message"}
{"nick":"ljharb","message":"and this will be a JS-exposed API?","date":"2018-01-15T23:26:53.111Z","type":"message"}
{"nick":"TimothyGu","message":"yeah","date":"2018-01-15T23:26:56.462Z","type":"message"}
{"nick":"TimothyGu","message":"it won't ever interact with the node.js module map","date":"2018-01-15T23:27:07.197Z","type":"message"}
{"nick":"TimothyGu","message":"the user controls everything in this graph","date":"2018-01-15T23:27:13.789Z","type":"message"}
{"nick":"TimothyGu","message":"and nothing outside this graph","date":"2018-01-15T23:27:21.208Z","type":"message"}
{"nick":"ljharb","message":"ok","date":"2018-01-15T23:27:26.671Z","type":"message"}
{"nick":"TimothyGu","message":"and this graph can be in the top realm, or in a VM context/realm","date":"2018-01-15T23:27:44.122Z","type":"message"}
{"nick":"TimothyGu","message":"does that make sense?","date":"2018-01-15T23:28:08.009Z","type":"message"}
{"nick":"qard","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2018-01-15T23:28:34.187Z","type":"quit"}
{"nick":"TimothyGu","message":"if TC39 wants to make a specified version of vm.Module, sure. but good luck spec'ing it","date":"2018-01-15T23:29:50.378Z","type":"message"}
{"nick":"devsnek","message":"i think that whats-his-name does","date":"2018-01-15T23:30:20.930Z","type":"message"}
{"nick":"devsnek","message":"with realms","date":"2018-01-15T23:30:22.785Z","type":"message"}
{"nick":"devsnek","message":"but i doubt it will happen","date":"2018-01-15T23:30:28.503Z","type":"message"}
{"nick":"bradleymeck","message":"ljharb: no, each ESM module has an internal module map","date":"2018-01-15T23:30:55.465Z","type":"message"}
{"nick":"bradleymeck","message":"but Realms do not","date":"2018-01-15T23:31:00.017Z","type":"message"}
{"nick":"bradleymeck","message":"that is left to the environment","date":"2018-01-15T23:31:08.482Z","type":"message"}
{"nick":"TimothyGu","message":"is there a good place where I can properly learn graph traversal","date":"2018-01-15T23:32:38.248Z","type":"message"}
{"nick":"TimothyGu","message":"i mean i know the basics but haven't written any nontrivial graph traversal problem","date":"2018-01-15T23:33:34.692Z","type":"message"}
{"nick":"devsnek","message":"i think the general idea is like uh","date":"2018-01-15T23:35:00.697Z","type":"message"}
{"nick":"devsnek","message":"as the graph is built each module gets its own internal graph so that they can all run by themselves at that point?","date":"2018-01-15T23:35:24.979Z","type":"message"}
{"nick":"devsnek","message":"so there's the big graph and then each module keeps track of what affects itself?","date":"2018-01-15T23:35:35.375Z","type":"message"}
{"nick":"devsnek","message":"as clarification","date":"2018-01-15T23:35:42.035Z","type":"message"}
{"nick":"TimothyGu","message":"okay so it goes like this. each module has a specifier-to-module map","date":"2018-01-15T23:36:28.131Z","type":"message"}
{"nick":"TimothyGu","message":"but environments may have a URL-to-module map","date":"2018-01-15T23:36:49.192Z","type":"message"}
{"nick":"devsnek","message":"our `link` is building the first right?","date":"2018-01-15T23:37:13.935Z","type":"message"}
{"nick":"devsnek","message":"and we expect people to provide their own of the second","date":"2018-01-15T23:37:22.138Z","type":"message"}
{"nick":"TimothyGu","message":"the first map is what ES mandates. the second depends on the environment","date":"2018-01-15T23:37:25.154Z","type":"message"}
{"nick":"TimothyGu","message":"yes to the first part","date":"2018-01-15T23:37:33.523Z","type":"message"}
{"nick":"TimothyGu","message":"mostly to the second part","date":"2018-01-15T23:37:50.223Z","type":"message"}
{"nick":"TimothyGu","message":"but we don't really expect the user to have anything at all","date":"2018-01-15T23:38:04.770Z","type":"message"}
{"nick":"devsnek","message":"well i mean","date":"2018-01-15T23:38:12.171Z","type":"message"}
{"nick":"devsnek","message":"we don't provite that","date":"2018-01-15T23:38:14.360Z","type":"message"}
{"nick":"devsnek","message":"provide*","date":"2018-01-15T23:38:16.527Z","type":"message"}
{"nick":"TimothyGu","message":"yes","date":"2018-01-15T23:38:17.746Z","type":"message"}
{"nick":"_ChauffeR","new_nick":"ChauffeR","date":"2018-01-15T23:38:19.940Z","type":"nick"}
{"nick":"TimothyGu","message":"that's part of the Loader if you will","date":"2018-01-15T23:38:29.696Z","type":"message"}
{"nick":"devsnek","message":"yea","date":"2018-01-15T23:39:21.023Z","type":"message"}
{"nick":"devsnek","message":"so as long link works in a smart way","date":"2018-01-15T23:39:31.209Z","type":"message"}
{"nick":"devsnek","message":"we're good","date":"2018-01-15T23:39:32.494Z","type":"message"}
{"nick":"TimothyGu","message":"the debate has really been on how smart we want .link() to be, and how smart we *can* make .link() be","date":"2018-01-15T23:41:50.596Z","type":"message"}
{"nick":"devsnek","message":"i would like it to await the dep promises","date":"2018-01-15T23:42:16.846Z","type":"message"}
{"nick":"devsnek","message":"but apparantly that breaks multiple things","date":"2018-01-15T23:42:26.850Z","type":"message"}
{"nick":"devsnek","message":"which is solved by having the 2nd map from above","date":"2018-01-15T23:42:48.830Z","type":"message"}
{"nick":"devsnek","message":"so we should probably leave that up to the user","date":"2018-01-15T23:42:55.867Z","type":"message"}
{"nick":"FruitieX","reason":"Ping timeout: 240 seconds","date":"2018-01-15T23:43:05.577Z","type":"quit"}
{"nick":"TimothyGu","message":"again, the \"proper\" solution is a DFS, but we can't have nice things in full asynchrony","date":"2018-01-15T23:44:29.380Z","type":"message"}
{"nick":"devsnek","message":"whats \"DFS\"","date":"2018-01-15T23:46:04.475Z","type":"message"}
{"nick":"TimothyGu","message":"depth-first search","date":"2018-01-15T23:46:11.630Z","type":"message"}
{"nick":"TimothyGu","message":"https://en.wikipedia.org/wiki/Depth-first_search","date":"2018-01-15T23:46:20.182Z","type":"message"}
{"nick":"devsnek","message":"o","date":"2018-01-15T23:46:21.160Z","type":"message"}
{"nick":"devsnek","message":"yes i know it by that name :<","date":"2018-01-15T23:46:30.906Z","type":"message"}
{"nick":"TimothyGu","message":"it's the algorithm used by Instantiate()","date":"2018-01-15T23:46:41.811Z","type":"message"}
{"nick":"TimothyGu","message":"https://tc39.github.io/ecma262/#sec-innermoduleinstantiation","date":"2018-01-15T23:46:43.940Z","type":"message"}
{"nick":"devsnek","message":"well with how link currently works","date":"2018-01-15T23:47:07.666Z","type":"message"}
{"nick":"devsnek","message":"right now","date":"2018-01-15T23:47:15.423Z","type":"message"}
{"nick":"devsnek","message":"is anything limited","date":"2018-01-15T23:47:18.399Z","type":"message"}
{"nick":"devsnek","message":"assuming the user knows how to use it","date":"2018-01-15T23:47:29.413Z","type":"message"}
{"nick":"TimothyGu","message":"that's unfortunately a fair assumption","date":"2018-01-15T23:48:21.967Z","type":"message"}
{"nick":"TimothyGu","message":"at least we know the user can't crash node even if they don't know how to use it","date":"2018-01-15T23:48:34.318Z","type":"message"}
{"nick":"devsnek","message":"this is a fairly complex system, the api can't do *everything*","date":"2018-01-15T23:49:03.946Z","type":"message"}
{"nick":"FruitieX","date":"2018-01-15T23:49:11.715Z","type":"join"}
{"nick":"TimothyGu","message":"it can, if it's synchronous","date":"2018-01-15T23:49:13.501Z","type":"message"}
{"nick":"TimothyGu","message":"in which case the entire concept of linking can be folded into instantiation","date":"2018-01-15T23:49:37.028Z","type":"message"}
{"nick":"TimothyGu","message":"so yeah, the api can't do everything","date":"2018-01-15T23:49:45.915Z","type":"message"}
{"nick":"devsnek","message":"is there any reason link is async then?","date":"2018-01-15T23:49:57.945Z","type":"message"}
{"nick":"devsnek","message":"or even exists?","date":"2018-01-15T23:50:04.069Z","type":"message"}
{"nick":"TimothyGu","message":"yes","date":"2018-01-15T23:50:17.945Z","type":"message"}
{"nick":"devsnek","message":"i only added it cuz modulewrap does it","date":"2018-01-15T23:50:18.747Z","type":"message"}
{"nick":"TimothyGu","message":"reading files asynchronously","date":"2018-01-15T23:50:28.202Z","type":"message"}
{"nick":"TimothyGu","message":"there's a reason why import() is asynchronous","date":"2018-01-15T23:50:36.373Z","type":"message"}
{"nick":"devsnek","message":"~~util.syncify~~","date":"2018-01-15T23:51:01.783Z","type":"message"}
{"nick":"TimothyGu","message":"something like that exists I believe","date":"2018-01-15T23:51:14.523Z","type":"message"}
{"nick":"TimothyGu","message":"basically spins the event loop in a blocking fashion","date":"2018-01-15T23:51:26.073Z","type":"message"}
{"nick":"devsnek","message":"i made something myself","date":"2018-01-15T23:51:27.711Z","type":"message"}
{"nick":"devsnek","message":"yep","date":"2018-01-15T23:51:29.483Z","type":"message"}
{"nick":"TimothyGu","message":"it's evil","date":"2018-01-15T23:51:40.199Z","type":"message"}
{"nick":"devsnek","message":"thats what i made while learning v8 api","date":"2018-01-15T23:51:42.435Z","type":"message"}
{"nick":"devsnek","message":"https://github.com/devsnek/syncify if you wanna die inside","date":"2018-01-15T23:52:05.666Z","type":"message"}
{"nick":"TimothyGu","message":"yes please","date":"2018-01-15T23:52:13.596Z","type":"message"}
{"nick":"TimothyGu","action":"groans","date":"2018-01-15T23:52:25.906Z","type":"action"}
{"nick":"TimothyGu","message":"this kind of ignores process.nextTick()","date":"2018-01-15T23:52:47.495Z","type":"message"}
{"nick":"TimothyGu","message":"which is probably not the best","date":"2018-01-15T23:52:53.326Z","type":"message"}
{"nick":"devsnek","message":"doesn't RunMicrotasks handle that?","date":"2018-01-15T23:53:11.842Z","type":"message"}
{"nick":"TimothyGu","message":"nope","date":"2018-01-15T23:53:17.566Z","type":"message"}
{"nick":"devsnek","message":"rip","date":"2018-01-15T23:53:20.327Z","type":"message"}
{"nick":"devsnek","message":"i was doing _tickCallback but things seemed to work when i switched","date":"2018-01-15T23:53:33.426Z","type":"message"}
{"nick":"TimothyGu","message":"runmicrotasks only takes care of V8's microtask queue, which is promises","date":"2018-01-15T23:53:33.915Z","type":"message"}
{"nick":"TimothyGu","message":"well _tickCallback is gone now","date":"2018-01-15T23:53:43.387Z","type":"message"}
{"nick":"TimothyGu","message":"or should be","date":"2018-01-15T23:53:53.572Z","type":"message"}
{"nick":"TimothyGu","message":"seems like it's not","date":"2018-01-15T23:53:57.703Z","type":"message"}
{"nick":"devsnek","message":"there was another one","date":"2018-01-15T23:54:05.877Z","type":"message"}
{"nick":"bradleymeck","message":"TimothyGu: it is async for a lot of reasons","date":"2018-01-15T23:54:05.997Z","type":"message"}
{"nick":"devsnek","message":"that was gotten rid of","date":"2018-01-15T23:54:08.628Z","type":"message"}
{"nick":"qard","date":"2018-01-15T23:54:10.793Z","type":"join"}
{"nick":"TimothyGu","message":"bradleymeck: what else other than I/O and code compilation","date":"2018-01-15T23:54:59.253Z","type":"message"}
{"nick":"TimothyGu","message":"circularity?","date":"2018-01-15T23:55:49.199Z","type":"message"}
{"nick":"bradleymeck","message":"TimothyGu: mainly, one of the proposals for how to impl top level await hinges on it being async.","date":"2018-01-15T23:56:05.340Z","type":"message"}
{"nick":"TimothyGu","message":"right right","date":"2018-01-15T23:56:13.729Z","type":"message"}
{"nick":"bradleymeck","message":"circularity is visible if async does any eval out of order but don't think required since we manually eval in order","date":"2018-01-15T23:56:28.343Z","type":"message"}
{"nick":"bradleymeck","message":"other big problem is if we end up with multi-module files and that WASM spec is undefined in what shared libaries work like / if they can be async","date":"2018-01-15T23:57:07.594Z","type":"message"}
{"nick":"devsnek","message":"wasm still needs a lot of work","date":"2018-01-15T23:57:38.190Z","type":"message"}
{"nick":"TimothyGu","message":"shared libraries... in wasm...","date":"2018-01-15T23:58:09.577Z","type":"message"}
{"nick":"TimothyGu","message":"my mind is being blown","date":"2018-01-15T23:58:32.309Z","type":"message"}
{"nick":"devsnek","message":"lol","date":"2018-01-15T23:59:06.060Z","type":"message"}
