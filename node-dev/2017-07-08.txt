{"nick":"zzo38","message":"mscdex: I do not have the accoutn to post on there","date":"2017-07-08T00:03:22.949Z","type":"message"}
{"nick":"ljharb","message":"zzo38: you should have a github account in order to do dev these days, can you just sign up for one?","date":"2017-07-08T00:08:14.618Z","type":"message"}
{"nick":"zzo38","message":"ljharb: Well, I don't have and cannot sign up for one (I use fossil for my own projects instead)","date":"2017-07-08T00:44:32.782Z","type":"message"}
{"nick":"Entanor","reason":"Read error: Connection reset by peer","date":"2017-07-08T00:48:55.768Z","type":"quit"}
{"nick":"Entanor","date":"2017-07-08T00:49:26.675Z","type":"join"}
{"nick":"zzo38","message":"Another thing that N-API seem to be missing is the ability to create custom exotic objects.","date":"2017-07-08T00:59:14.959Z","type":"message"}
{"nick":"zzo38","date":"2017-07-08T01:01:34.088Z","type":"part"}
{"nick":"joshontheweb","date":"2017-07-08T01:07:01.668Z","type":"join"}
{"nick":"not-an-aardvark","date":"2017-07-08T01:10:57.499Z","type":"join"}
{"nick":"joshontheweb","reason":"Quit: Computer has gone to sleep.","date":"2017-07-08T01:36:03.273Z","type":"quit"}
{"nick":"IRC-Source_43977","date":"2017-07-08T01:49:52.680Z","type":"join"}
{"nick":"IRC-Source_43977","reason":"Client Quit","date":"2017-07-08T01:50:17.477Z","type":"quit"}
{"nick":"jpanos","date":"2017-07-08T02:36:09.732Z","type":"join"}
{"nick":"jpanos","message":"Hey guys, I was wondering if you guys could help me in trying to compile Node with clang for armv7. Because right now I tried doing \"./configure --cross-compiling --dest-cpu=arm64 --dest-os=mac && make -j4\" but it's throwing an error on file arm_arch.h saying \"unsupported ARM architecture\"","date":"2017-07-08T02:39:49.860Z","type":"message"}
{"nick":"jpanos","message":"Even though it should be supported","date":"2017-07-08T02:40:07.053Z","type":"message"}
{"nick":"jpanos","message":"An old github issue says that it's a toolchain issue and that I should link to the system OpenSSL instead. Could anyone help me on doing that?","date":"2017-07-08T02:44:25.242Z","type":"message"}
{"nick":"zsoc","message":"isn't armv7 a pretty old arch? or maybe i'm confusing it with something else","date":"2017-07-08T02:45:47.250Z","type":"message"}
{"nick":"zsoc","message":"i remember compiling to armv7 for the palm pre... like.. 10 years ago","date":"2017-07-08T02:46:02.257Z","type":"message"}
{"nick":"jpanos","message":"Yeah it's kind of old. I tried arm64 also but it didn't work. I just tried armv7 because it didn't work with arm64.","date":"2017-07-08T02:48:37.492Z","type":"message"}
{"nick":"zsoc","message":"what hardware is this for.. eactly?","date":"2017-07-08T02:48:59.153Z","type":"message"}
{"nick":"zsoc","message":"you said ios i think?","date":"2017-07-08T02:49:02.852Z","type":"message"}
{"nick":"Trott","message":"jpanos: Did you already open an issue in the node repo about this?","date":"2017-07-08T02:49:30.167Z","type":"message"}
{"nick":"jpanos","message":"No, I have not. Because I don't know if it's an issue on my end.","date":"2017-07-08T02:50:01.287Z","type":"message"}
{"nick":"Trott","message":"OK, just checking. I thought I saw something yesterday, but I'm mistaken.","date":"2017-07-08T02:50:29.884Z","type":"message"}
{"nick":"Trott","message":"If no one here can help you, you can try #node-build and/or #Node.js.","date":"2017-07-08T02:51:12.669Z","type":"message"}
{"nick":"Trott","message":"Although, hold on a sec...","date":"2017-07-08T02:51:20.719Z","type":"message"}
{"nick":"Trott","message":"There might be something similar/compatible in our CI cluster and we can maybe look and see what it's doing...","date":"2017-07-08T02:51:55.905Z","type":"message"}
{"nick":"jpanos","message":"Thanks, any help is greatly appreciated.","date":"2017-07-08T02:52:25.229Z","type":"message"}
{"nick":"Trott","message":"What zsoc asked: What hardware is this for exactly?","date":"2017-07-08T02:53:39.332Z","type":"message"}
{"nick":"zsoc","message":"oh wow, there are 5 armv7/arm64 configs on CI? heh","date":"2017-07-08T02:54:21.212Z","type":"message"}
{"nick":"jpanos","message":"iOS, if built using clang it should just work.","date":"2017-07-08T02:54:40.862Z","type":"message"}
{"nick":"jpanos","message":"Well, jailbroken iOS.","date":"2017-07-08T02:55:34.257Z","type":"message"}
{"nick":"refack","message":"There was an issue opened yesterday https://github.com/nodejs/node/issues/14124","date":"2017-07-08T02:58:26.492Z","type":"message"}
{"nick":"zsoc","message":"oh look and a patch","date":"2017-07-08T02:59:12.236Z","type":"message"}
{"nick":"jpanos","message":"Thanks, I have the latest source from github, so I'll clone 6.11.0 and try to build it right now.","date":"2017-07-08T03:02:53.502Z","type":"message"}
{"nick":"jpanos","message":"I've changed the toolchain.gypi file to match his and mine still gets the same error.","date":"2017-07-08T03:08:28.541Z","type":"message"}
{"nick":"refack","message":"Sorry ðŸ˜ž","date":"2017-07-08T03:12:04.703Z","type":"message"}
{"nick":"zsoc","message":"jpanos: can you gist the full output of the error? is there more to the context or is it in /deps/ like the other thread you mentioned?","date":"2017-07-08T03:14:32.911Z","type":"message"}
{"nick":"jpanos","message":"It's cool, I know I'm trying to build to an unsupported platform. I'm going to try to build on-device now. I'm installing clang build tools on my iPad and I'm going to see if it successfully builds a binary on there. Also zsoc let me get the output from my terminal","date":"2017-07-08T03:15:22.203Z","type":"message"}
{"nick":"zsoc","message":"okay","date":"2017-07-08T03:15:33.947Z","type":"message"}
{"nick":"jpanos","message":"In file included from ../deps/openssl/asm/arm64-linux64-gas/aes/aesv8-armx.S:1: ../deps/openssl/openssl/crypto/arm_arch.h:46:6: error: \"unsupported ARM       architecture\" #    error \"unsupported ARM architecture\"      ^ 1 error generated. make[1]: *** [/Users/John/Desktop/node-v6.11.0/out/Release/obj.target/openssl/deps/openssl/asm/arm64-linux64-gas/aes/aesv8-armx.o] Error 1 make[1]: *** Waiting for unfinished jobs.... make: *** [","date":"2017-07-08T03:15:45.664Z","type":"message"}
{"nick":"zsoc","message":"usually with cc the trick is just getting a toolchain configured properly.. when there's a will there's a way","date":"2017-07-08T03:15:51.670Z","type":"message"}
{"nick":"zsoc","message":"and fwiw, it *does* support clang > 3.4.2","date":"2017-07-08T03:16:57.647Z","type":"message"}
{"nick":"zsoc","message":"jpanos: can you try using the --shared-openssl flag?","date":"2017-07-08T03:17:41.151Z","type":"message"}
{"nick":"zsoc","message":"maybe you can skip compiling it in?","date":"2017-07-08T03:17:47.044Z","type":"message"}
{"nick":"jpanos","message":"It seems to be working so far.","date":"2017-07-08T03:18:59.521Z","type":"message"}
{"nick":"zsoc","message":"you just won't have openssl built in.. obv, so tread with that knowledge","date":"2017-07-08T03:19:18.402Z","type":"message"}
{"nick":"jpanos","message":"I don't think my app will be using opensll so that's not an issue.","date":"2017-07-08T03:20:14.161Z","type":"message"}
{"nick":"zsoc","message":"alternatively, the version of arm_arch.h is rather old, there might be an upstream version you can try patching in (not sure if it's changed much). Line 46 of the header file there tho is basically saying there's no global identifier matching what it's expecting","date":"2017-07-08T03:21:17.365Z","type":"message"}
{"nick":"zsoc","message":"which is weird...__ARM_ARCH_8A__ or __ARM_ARCH_7__ should be defined here, unless it's doing something else i'm missing","date":"2017-07-08T03:21:56.012Z","type":"message"}
{"nick":"zsoc","message":"anyway, yeah if you don't need it.. see if it works without it :p","date":"2017-07-08T03:22:17.638Z","type":"message"}
{"nick":"jpanos","message":"Yeah, I think it just might be the compiler not creating those macros.","date":"2017-07-08T03:22:23.088Z","type":"message"}
{"nick":"zsoc","message":"oh","date":"2017-07-08T03:22:55.767Z","type":"message"}
{"nick":"zsoc","message":"yeah the ifdefs in that header are not at all compatible with clang","date":"2017-07-08T03:23:13.437Z","type":"message"}
{"nick":"jpanos","message":"yeah which is unfortunate because clang is the only compiler that supports building to iOS","date":"2017-07-08T03:23:46.123Z","type":"message"}
{"nick":"jpanos","message":"because Apple","date":"2017-07-08T03:23:49.368Z","type":"message"}
{"nick":"zsoc","message":"which defines 7S, 7A, or ISA_A64","date":"2017-07-08T03:23:53.710Z","type":"message"}
{"nick":"jpanos","message":"okay so I've ran into an error.","date":"2017-07-08T03:24:08.019Z","type":"message"}
{"nick":"jpanos","message":"../src/inspector_socket.cc:8:10: fatal error: 'openssl/sha.h' file not found #include \"openssl/sha.h\"  // Sha-1 hash","date":"2017-07-08T03:24:13.716Z","type":"message"}
{"nick":"zsoc","message":"honestly that.. seems like a bug.. but this is a generic thing. Like you have to be able to build openssh using clang no?","date":"2017-07-08T03:24:17.531Z","type":"message"}
{"nick":"zsoc","message":"but i'm getting deeper and deeper into territory i have no idea what's going on","date":"2017-07-08T03:24:52.637Z","type":"message"}
{"nick":"jpanos","message":"Yeah same, I'm getting way out of my comfort zone lol","date":"2017-07-08T03:25:59.813Z","type":"message"}
{"nick":"zsoc","message":"oh.. i guess it's looked for the shared source of openssl heh, i should have expected that to happen :p","date":"2017-07-08T03:26:17.747Z","type":"message"}
{"nick":"zsoc","message":"if you patch that arm_arch.h file with || defined(__ARM_ARCH_ISA_A64__) it should work in theory.. i'm not sure if arm64 is supposed to represent 8, I think so in this case for ios","date":"2017-07-08T03:27:34.434Z","type":"message"}
{"nick":"zsoc","message":"*most ios devices","date":"2017-07-08T03:27:38.978Z","type":"message"}
{"nick":"zsoc","message":"er, rather, __ARM_ARCH_ISA_A64","date":"2017-07-08T03:28:12.116Z","type":"message"}
{"nick":"jpanos","message":"So where would I put that in the file? Line 28?","date":"2017-07-08T03:29:22.259Z","type":"message"}
{"nick":"jpanos","message":"in the if statement?","date":"2017-07-08T03:29:28.291Z","type":"message"}
{"nick":"zsoc","message":"yeah i'd need another hour down this rabbit whole lol","date":"2017-07-08T03:31:15.993Z","type":"message"}
{"nick":"zsoc","message":"the 'correct' way to do this is to figure out what macros clang is exporting, which you can def do","date":"2017-07-08T03:31:35.916Z","type":"message"}
{"nick":"zsoc","message":"like it's probably defining __ARM_ARCH as 8 or something rational... i'm not sure what the strange incompatibility here is with macros.. i haven't touched a cross compiler in like 8 years o.O","date":"2017-07-08T03:32:47.909Z","type":"message"}
{"nick":"zsoc","message":"a bunch of SO threads suggest doing something like: clang --target=... -mcpu=... -E - -dM </dev/null","date":"2017-07-08T03:33:14.496Z","type":"message"}
{"nick":"zsoc","message":"to see what macros it's defining","date":"2017-07-08T03:33:30.770Z","type":"message"}
{"nick":"zsoc","message":"or just clang -arch arm64 -E -dM - < /dev/null to see all of them i guess? then maybe patch that openssl header file to match expectations and cross your fingers","date":"2017-07-08T03:34:08.223Z","type":"message"}
{"nick":"zsoc","message":"i gotta jet tho, gl! o/","date":"2017-07-08T03:34:12.321Z","type":"message"}
{"nick":"jpanos","message":"#define __ARM_ARCH 8","date":"2017-07-08T03:34:21.018Z","type":"message"}
{"nick":"jpanos","message":"Okay thanks, if I get it at some point I'll let you know","date":"2017-07-08T03:34:48.256Z","type":"message"}
{"nick":"zsoc","message":"let me check one other thing","date":"2017-07-08T03:35:24.468Z","type":"message"}
{"nick":"zsoc","message":"#   elif defined(__ARM_ARCH)","date":"2017-07-08T03:36:02.508Z","type":"message"}
{"nick":"zsoc","message":"it's line 26","date":"2017-07-08T03:36:04.619Z","type":"message"}
{"nick":"zsoc","message":"soooooo","date":"2017-07-08T03:36:06.930Z","type":"message"}
{"nick":"zsoc","message":"yeah are you sure you're using clang ? or its using clang properly.. or whatever? because if __ARM_ARCH was provided you wouldn't get that error","date":"2017-07-08T03:36:31.645Z","type":"message"}
{"nick":"zsoc","message":"like are you sure your configure command there isn't using gcc, that's what i'm asking","date":"2017-07-08T03:37:24.175Z","type":"message"}
{"nick":"Entanor","reason":"Ping timeout: 276 seconds","date":"2017-07-08T03:37:52.668Z","type":"quit"}
{"nick":"zsoc","message":"interestingly.. gcc looks like it defines __aarch64__ for arm64","date":"2017-07-08T03:39:22.799Z","type":"message"}
{"nick":"zsoc","message":"which it also checks for if __GNUC__ sooooo no idea, i'm out of ideas lol, gl tho, ttyl","date":"2017-07-08T03:40:24.043Z","type":"message"}
{"nick":"snowkidind","reason":"Quit: astalaPIZZA Baby!","date":"2017-07-08T03:54:24.747Z","type":"quit"}
{"nick":"jpanos","reason":"Quit: Page closed","date":"2017-07-08T03:55:22.216Z","type":"quit"}
{"nick":"lpin","date":"2017-07-08T04:59:04.096Z","type":"join"}
{"nick":"snowkidind","date":"2017-07-08T05:05:26.735Z","type":"join"}
{"nick":"indistylo","date":"2017-07-08T05:17:58.930Z","type":"join"}
{"nick":"kxnikx","date":"2017-07-08T05:36:49.717Z","type":"join"}
{"nick":"kxnikx","reason":"Remote host closed the connection","date":"2017-07-08T05:56:31.930Z","type":"quit"}
{"nick":"nodejs-gh","date":"2017-07-08T06:07:51.474Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-07-08T06:07:51.646Z","type":"part"}
{"nick":"snowkidind","reason":"Quit: astalaPIZZA Baby!","date":"2017-07-08T06:22:43.769Z","type":"quit"}
{"nick":"al-damiri","reason":"Quit: Connection closed for inactivity","date":"2017-07-08T07:41:19.527Z","type":"quit"}
