{"nick":"nodejs-gh","date":"2017-11-16T00:13:01.068Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T00:13:01.273Z","type":"part"}
{"nick":"apapirovski","reason":"Remote host closed the connection","date":"2017-11-16T00:25:14.254Z","type":"quit"}
{"nick":"apapirovski","date":"2017-11-16T00:27:01.399Z","type":"join"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2017-11-16T00:29:55.951Z","type":"quit"}
{"nick":"Fishrock123","date":"2017-11-16T00:42:41.748Z","type":"join"}
{"nick":"Fishrock123","reason":"Remote host closed the connection","date":"2017-11-16T01:02:30.822Z","type":"quit"}
{"nick":"Fishrock123","date":"2017-11-16T01:04:51.754Z","type":"join"}
{"nick":"apapirovski","message":"Anyone here that has a good handle on the V8 C++ api?","date":"2017-11-16T01:15:02.424Z","type":"message"}
{"nick":"joepie91","reason":"Quit: Konversation terminated!","date":"2017-11-16T01:21:43.177Z","type":"quit"}
{"nick":"joepie91","date":"2017-11-16T01:21:43.272Z","type":"join"}
{"nick":"joepie91","reason":"Changing host","date":"2017-11-16T01:21:43.273Z","type":"quit"}
{"nick":"joepie91","date":"2017-11-16T01:21:43.273Z","type":"join"}
{"nick":"mylesborins","reason":"*.net *.split","date":"2017-11-16T01:22:45.803Z","type":"quit"}
{"nick":"scott_gonzalez","reason":"*.net *.split","date":"2017-11-16T01:22:46.171Z","type":"quit"}
{"nick":"mgol","reason":"*.net *.split","date":"2017-11-16T01:22:46.171Z","type":"quit"}
{"nick":"nikc","reason":"*.net *.split","date":"2017-11-16T01:22:46.355Z","type":"quit"}
{"nick":"fcanela","reason":"*.net *.split","date":"2017-11-16T01:22:46.448Z","type":"quit"}
{"nick":"cxreg","reason":"*.net *.split","date":"2017-11-16T01:22:46.449Z","type":"quit"}
{"nick":"_ChauffeR","reason":"*.net *.split","date":"2017-11-16T01:22:46.539Z","type":"quit"}
{"nick":"mylesborins","date":"2017-11-16T01:28:20.932Z","type":"join"}
{"nick":"mgol","date":"2017-11-16T01:28:21.024Z","type":"join"}
{"nick":"scott_gonzalez","date":"2017-11-16T01:28:21.024Z","type":"join"}
{"nick":"cxreg","date":"2017-11-16T01:28:21.024Z","type":"join"}
{"nick":"nikc","date":"2017-11-16T01:28:21.024Z","type":"join"}
{"nick":"fcanela","date":"2017-11-16T01:28:21.024Z","type":"join"}
{"nick":"_ChauffeR","date":"2017-11-16T01:28:21.024Z","type":"join"}
{"nick":"_ChauffeR","reason":"Max SendQ exceeded","date":"2017-11-16T01:28:26.016Z","type":"quit"}
{"nick":"_ChauffeR","date":"2017-11-16T01:30:32.959Z","type":"join"}
{"nick":"AtumT","reason":"Remote host closed the connection","date":"2017-11-16T01:41:34.089Z","type":"quit"}
{"nick":"Fishrock123","message":"apapirovski: maybe ofrobots?","date":"2017-11-16T01:56:29.765Z","type":"message"}
{"nick":"apapirovski","message":"ofrobots: you around?","date":"2017-11-16T01:56:48.176Z","type":"message"}
{"nick":"ofrobots","message":"apapirovski: about to head out for the day, but post the question and I can take a look when I am back at the keyboard","date":"2017-11-16T01:57:22.568Z","type":"message"}
{"nick":"Fishrock123","reason":"Quit: Leaving...","date":"2017-11-16T01:57:41.901Z","type":"quit"}
{"nick":"not-an-aardvark","date":"2017-11-16T02:00:56.977Z","type":"join"}
{"nick":"apapirovski","message":"ofrobots: thanks, sent you a PM","date":"2017-11-16T02:02:39.576Z","type":"message"}
{"nick":"qard","reason":"Quit: My MacBook has gone to sleep. ZZZzzzâ€¦","date":"2017-11-16T02:09:59.320Z","type":"quit"}
{"nick":"apapirovski","reason":"Remote host closed the connection","date":"2017-11-16T04:17:00.191Z","type":"quit"}
{"nick":"apapirovski","date":"2017-11-16T04:31:33.898Z","type":"join"}
{"nick":"qard","date":"2017-11-16T05:27:05.107Z","type":"join"}
{"nick":"apapirovski","reason":"Remote host closed the connection","date":"2017-11-16T05:30:11.307Z","type":"quit"}
{"nick":"apapirov_","date":"2017-11-16T05:32:05.828Z","type":"join"}
{"nick":"apapirov_","reason":"Remote host closed the connection","date":"2017-11-16T05:34:43.759Z","type":"quit"}
{"nick":"marthinal","date":"2017-11-16T05:46:27.317Z","type":"join"}
{"nick":"apapirovski","date":"2017-11-16T05:50:51.203Z","type":"join"}
{"nick":"apapirovski","reason":"Ping timeout: 268 seconds","date":"2017-11-16T05:55:48.880Z","type":"quit"}
{"nick":"JamesMGreene","date":"2017-11-16T06:17:32.581Z","type":"join"}
{"nick":"lpin","date":"2017-11-16T06:22:57.564Z","type":"join"}
{"nick":"not-an-aardvark","reason":"Quit: Connection closed for inactivity","date":"2017-11-16T06:30:38.711Z","type":"quit"}
{"nick":"apapirovski","date":"2017-11-16T06:31:05.790Z","type":"join"}
{"nick":"JamesMGreene","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦","date":"2017-11-16T06:37:13.834Z","type":"quit"}
{"nick":"qard","reason":"Quit: My MacBook has gone to sleep. ZZZzzzâ€¦","date":"2017-11-16T06:44:06.223Z","type":"quit"}
{"nick":"BridgeAR","reason":"Ping timeout: 240 seconds","date":"2017-11-16T07:16:01.380Z","type":"quit"}
{"nick":"reydelcompas","date":"2017-11-16T07:20:43.049Z","type":"join"}
{"nick":"cspotcode","reason":"Ping timeout: 255 seconds","date":"2017-11-16T07:21:40.958Z","type":"quit"}
{"nick":"cspotcode","date":"2017-11-16T07:22:03.851Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T07:38:46.316Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T07:38:46.446Z","type":"part"}
{"nick":"nodejs-gh","date":"2017-11-16T07:39:06.622Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T07:39:06.714Z","type":"part"}
{"nick":"nodejs-gh","date":"2017-11-16T07:48:30.890Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T07:48:30.980Z","type":"part"}
{"nick":"fl0w","date":"2017-11-16T08:05:58.707Z","type":"join"}
{"nick":"apapirovski","reason":"Remote host closed the connection","date":"2017-11-16T08:20:32.429Z","type":"quit"}
{"nick":"nodejs-gh","date":"2017-11-16T08:33:21.029Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T08:33:21.272Z","type":"part"}
{"nick":"nodejs-gh","date":"2017-11-16T08:34:11.785Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T08:34:11.915Z","type":"part"}
{"nick":"nodejs-gh","date":"2017-11-16T08:55:51.430Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T08:55:51.559Z","type":"part"}
{"nick":"fl0w","reason":"Quit: fl0w","date":"2017-11-16T08:56:46.436Z","type":"quit"}
{"nick":"nodejs-gh","date":"2017-11-16T08:57:35.316Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T08:57:35.408Z","type":"part"}
{"nick":"nodejs-gh","date":"2017-11-16T08:58:16.526Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T08:58:16.655Z","type":"part"}
{"nick":"fl0w","date":"2017-11-16T08:58:53.167Z","type":"join"}
{"nick":"fl0w","reason":"Quit: fl0w","date":"2017-11-16T09:08:11.900Z","type":"quit"}
{"nick":"not-an-aardvark","date":"2017-11-16T09:13:55.513Z","type":"join"}
{"nick":"fl0w","date":"2017-11-16T09:24:29.608Z","type":"join"}
{"nick":"seishun","date":"2017-11-16T10:00:00.783Z","type":"join"}
{"nick":"gain","date":"2017-11-16T10:25:23.372Z","type":"join"}
{"nick":"fl0w","reason":"Quit: fl0w","date":"2017-11-16T10:34:53.941Z","type":"quit"}
{"nick":"nodejs-gh","date":"2017-11-16T10:47:50.573Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T10:47:50.699Z","type":"part"}
{"nick":"nodejs-gh","date":"2017-11-16T10:48:17.290Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T10:48:17.608Z","type":"part"}
{"nick":"mylesborins","reason":"Quit: farewell for now","date":"2017-11-16T11:25:11.710Z","type":"quit"}
{"nick":"mylesborins","date":"2017-11-16T11:25:42.318Z","type":"join"}
{"nick":"fl0w","date":"2017-11-16T11:50:05.661Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T11:53:18.595Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T11:53:18.690Z","type":"part"}
{"nick":"not-an-aardvark","reason":"Quit: Connection closed for inactivity","date":"2017-11-16T12:09:13.933Z","type":"quit"}
{"nick":"bhughes","reason":"Read error: Connection reset by peer","date":"2017-11-16T12:17:02.619Z","type":"quit"}
{"nick":"bhughes","date":"2017-11-16T12:17:09.424Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T12:19:06.449Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T12:19:06.539Z","type":"part"}
{"nick":"d3v","date":"2017-11-16T12:39:21.102Z","type":"part"}
{"nick":"nodejs-gh","date":"2017-11-16T12:42:25.697Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T12:42:25.790Z","type":"part"}
{"nick":"ChALkeR","reason":"Read error: No route to host","date":"2017-11-16T13:13:03.320Z","type":"quit"}
{"nick":"ChALkeR","date":"2017-11-16T13:13:14.617Z","type":"join"}
{"nick":"fl0w","reason":"Quit: fl0w","date":"2017-11-16T13:29:41.596Z","type":"quit"}
{"nick":"fl0w","date":"2017-11-16T13:37:18.544Z","type":"join"}
{"nick":"evanlucas","date":"2017-11-16T13:56:43.811Z","type":"join"}
{"nick":"apapirovski","date":"2017-11-16T13:58:29.983Z","type":"join"}
{"nick":"seishun","reason":"Quit: ChatZilla 0.9.93 [Firefox 56.0.2/20171024165158]","date":"2017-11-16T13:58:44.397Z","type":"quit"}
{"nick":"apapirovski","message":"addaleax: are you around by any chance?","date":"2017-11-16T14:00:39.120Z","type":"message"}
{"nick":"addaleax","message":"apapirovski: yea :) ðŸ‘‹","date":"2017-11-16T14:02:31.724Z","type":"message"}
{"nick":"apapirovski","message":"Awesome! So... I'm trying to use v8::Map but running into some weirdness and need a sanity check before I start looking at V8 as the source of the issue.","date":"2017-11-16T14:04:04.252Z","type":"message"}
{"nick":"apapirovski","message":"Here's a gist: https://gist.github.com/apapirovski/870b43aa7a4faf842cb92933e8fa5160","date":"2017-11-16T14:04:09.407Z","type":"message"}
{"nick":"apapirovski","message":"The offending code is line 10 & 11...","date":"2017-11-16T14:04:42.613Z","type":"message"}
{"nick":"apapirovski","message":"It returns the expected value but then silently crashes later on","date":"2017-11-16T14:05:00.684Z","type":"message"}
{"nick":"apapirovski","message":"Here's the current code for that area: https://github.com/nodejs/node/blob/master/src/node.cc#L804","date":"2017-11-16T14:06:21.264Z","type":"message"}
{"nick":"addaleax","message":"Yea, taking a look","date":"2017-11-16T14:07:14.539Z","type":"message"}
{"nick":"apapirovski","message":"Oh, a bit more background: these are the two tests that cause issues: parallel/test-domain-abort-on-uncaught.js & parallel/test-domain-with-abort-on-uncaught-exception.js","date":"2017-11-16T14:07:58.360Z","type":"message"}
{"nick":"apapirovski","message":"there are other tests that hit that particular code path but none of them crash it","date":"2017-11-16T14:08:10.736Z","type":"message"}
{"nick":"addaleax","message":"What do you mean by silently crashes?","date":"2017-11-16T14:09:07.863Z","type":"message"}
{"nick":"addaleax","message":"The lines you are pointing to seem fine to me..","date":"2017-11-16T14:09:38.336Z","type":"message"}
{"nick":"apapirovski","message":"Yeah, I haven't been able to get much insight. That's why it's stumping me. But I know it's those lines because if I replace them with 'return true;' those tests pass, if I replace with 'return true;' but also run the line 10 & 11 (without returning the value), it crashes.","date":"2017-11-16T14:10:39.979Z","type":"message"}
{"nick":"apapirovski","message":"so something like:","date":"2017-11-16T14:11:04.102Z","type":"message"}
{"nick":"apapirovski","message":"events.As<Map>()->Has(env->context(),","date":"2017-11-16T14:11:04.326Z","type":"message"}
{"nick":"apapirovski","message":"                               env->error_string()).FromJust()","date":"2017-11-16T14:11:04.419Z","type":"message"}
{"nick":"apapirovski","message":"return true;","date":"2017-11-16T14:11:06.168Z","type":"message"}
{"nick":"apapirovski","message":"All I've been able to get out of it is \"AssertionError [ERR_ASSERTION]: Test index 0 failed: Error: Command failed: ulimit -c 0 && \"/Users/apapirovski/Web/nodejs/out/Debug/node\" --abort-on-uncaught-exception \"/Users/apapirovski/Web/nodejs/test/parallel/test-domain-abort-on-uncaught.js\" child 0\" which is not at all helpful","date":"2017-11-16T14:11:42.387Z","type":"message"}
{"nick":"addaleax","message":"Hmm sounds weird..","date":"2017-11-16T14:12:56.035Z","type":"message"}
{"nick":"addaleax","message":"I'm on mobile so this is not quite as fast as I want it to be, sorry :p","date":"2017-11-16T14:13:24.011Z","type":"message"}
{"nick":"apapirovski","message":"no worries, it's helpful to at least know i'm not crazy lol. Do you know if there's any ./configure settings or anything that could give me more insight into what's going in C++?","date":"2017-11-16T14:14:55.848Z","type":"message"}
{"nick":"apapirovski","message":"(--debug has not helped)","date":"2017-11-16T14:15:16.366Z","type":"message"}
{"nick":"apapirovski","message":"Oh, one more bit, if I put the v8::Map::Has call in a CHECK, it passes. test fails... so basically I'm guessing it's some sort of an issue where it's trying to clean up after that call later on?","date":"2017-11-16T14:16:09.297Z","type":"message"}
{"nick":"addaleax","message":"Yeah, you should probably put it in a check","date":"2017-11-16T14:17:37.043Z","type":"message"}
{"nick":"addaleax","message":"--debug should be helpful if you know how to work with gdb/lldb?","date":"2017-11-16T14:18:13.168Z","type":"message"}
{"nick":"addaleax","message":"Also, this might be something for valgrind","date":"2017-11-16T14:18:28.342Z","type":"message"}
{"nick":"addaleax","message":"Hm","date":"2017-11-16T14:19:10.533Z","type":"message"}
{"nick":"addaleax","message":"Shot in the dark","date":"2017-11-16T14:19:21.726Z","type":"message"}
{"nick":"addaleax","message":"What happens if you use env->error_string().As<Value>()?","date":"2017-11-16T14:20:04.750Z","type":"message"}
{"nick":"apapirovski","message":"ok, testing. (and will play around gdb/lldb/valgrind... honestly, above my pay grade but good to learn!)","date":"2017-11-16T14:21:12.952Z","type":"message"}
{"nick":"apapirovski","message":"test still crashes. :(","date":"2017-11-16T14:22:27.631Z","type":"message"}
{"nick":"apapirovski","message":"oh, forgot to mention: Has, Get & Set all show the same behaviour (regardless of the key used). AsArray, Clear, etc. work fine","date":"2017-11-16T14:22:59.975Z","type":"message"}
{"nick":"apapirovski","message":"i'll probably try using one of the tools you mentioned. seems like a good bet. thanks for the help!","date":"2017-11-16T14:23:35.812Z","type":"message"}
{"nick":"addaleax","message":"Ohh","date":"2017-11-16T14:27:54.720Z","type":"message"}
{"nick":"addaleax","message":"I think I have an idea.. you're not going to like it","date":"2017-11-16T14:28:15.161Z","type":"message"}
{"nick":"addaleax","message":"This is called from the should-abort-on-uncaught-exception callback, right?","date":"2017-11-16T14:29:15.640Z","type":"message"}
{"nick":"addaleax","message":"Yea we can't call into JS from that, that's not okay.. Including getting properties / map entries","date":"2017-11-16T14:30:02.974Z","type":"message"}
{"nick":"addaleax","message":"I guess this has only been working out of luck so far, because we don't do anything that really runs code from it..","date":"2017-11-16T14:30:54.314Z","type":"message"}
{"nick":"addaleax","message":"I think we might need a flag that we can read in C++ without accessing V8 methods","date":"2017-11-16T14:31:32.231Z","type":"message"}
{"nick":"addaleax","message":"And that domains keep track of in js land","date":"2017-11-16T14:31:44.636Z","type":"message"}
{"nick":"nodejs-gh","date":"2017-11-16T14:34:45.318Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T14:34:45.447Z","type":"part"}
{"nick":"nikhil","date":"2017-11-16T14:36:12.071Z","type":"join"}
{"nick":"apapirovski","message":"Hey, I like anything that gets me insight into what's going on!","date":"2017-11-16T14:39:06.673Z","type":"message"}
{"nick":"apapirovski","message":"Ok, let me think about that then.","date":"2017-11-16T14:39:21.875Z","type":"message"}
{"nick":"snackmouse","date":"2017-11-16T14:40:19.265Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T14:41:05.411Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T14:41:05.412Z","type":"part"}
{"nick":"snackmouse","date":"2017-11-16T14:43:33.572Z","type":"part"}
{"nick":"fl0w","reason":"Quit: fl0w","date":"2017-11-16T14:45:23.805Z","type":"quit"}
{"nick":"fl0w","date":"2017-11-16T14:47:14.364Z","type":"join"}
{"nick":"fl0w","reason":"Client Quit","date":"2017-11-16T14:47:14.364Z","type":"quit"}
{"nick":"seishun","date":"2017-11-16T14:50:59.281Z","type":"join"}
{"nick":"lance|afk","new_nick":"lanceball","date":"2017-11-16T14:53:32.459Z","type":"nick"}
{"nick":"gain","reason":"Quit: Leaving","date":"2017-11-16T14:59:12.422Z","type":"quit"}
{"nick":"apapirovski","message":"addaleax: so that approach worked... now to benchmark it","date":"2017-11-16T15:13:11.380Z","type":"message"}
{"nick":"addaleax","message":"apapirovski: if it's anything like my setImmediate PR, it's probably going to do well ;)","date":"2017-11-16T15:16:30.861Z","type":"message"}
{"nick":"AtumT","date":"2017-11-16T15:16:36.322Z","type":"join"}
{"nick":"addaleax","message":"Also, don't worry too much about domains being fast, I'd say","date":"2017-11-16T15:16:52.434Z","type":"message"}
{"nick":"apapirovski","message":"the main part of this work has yielded 12% on adding/removing event listeners & 30% on emit with more than 1 handler. now to clean it up and then I can open a PR","date":"2017-11-16T15:18:16.025Z","type":"message"}
{"nick":"nodejs-gh","date":"2017-11-16T15:31:01.810Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T15:31:01.904Z","type":"part"}
{"nick":"nodejs-gh","date":"2017-11-16T15:31:34.549Z","type":"join"}
{"nick":"nodejs-gh","date":"2017-11-16T15:31:34.642Z","type":"part"}
{"nick":"apapirovski","reason":"Remote host closed the connection","date":"2017-11-16T15:42:39.813Z","type":"quit"}
{"nick":"BridgeAR","date":"2017-11-16T15:45:40.136Z","type":"join"}
{"nick":"apapirovski","date":"2017-11-16T15:45:52.417Z","type":"join"}
